computer networking principle protocol practice release olivier bonaventure october saylor url http saylor foundation saylor url http saylor foundation content preface introduction service protocol reference model organisation book application layer principle protocol writing simple networked application summary exercise transport layer principle reliable transport protocol user datagram protocol transmission control protocol summary exercise network layer principle internet protocol routing ip network summary exercise datalink layer local area network principle medium access control datalink layer technology summary exercise glossary bibliography saylor url http saylor foundation index table bibliography index ii saylor url http saylor foundation computer networking principle protocol practice release content saylor url http saylor foundation computer networking principle protocol practice release content saylor url http saylor foundation chapter preface textbook came frustration main author author chose write textbook textbook ﬁeld satisﬁed existing textbook frustration produced excellent textbook networking community time networking textbook mainly theoretical douglas comer chose write textbook entirely focused protocol suite difﬁcult choice time later extended textbook describing complete implementation adding practical consideration theoretical description richard stevens approached internet like explorer explained operation protocol looking packet exchanged wire jim kurose andkeith ross reinvented networking textbook starting application student use later explained internet protocol removing layer frustration motivated book different started teach networking late student internet user usage limited student using reference textbook spent time library today s student completely different avid experimented web user ﬁnd lot information web positive attitude probably curious predecessor thanks information available internet check obtain additional information topic explained teacher abundant information creates challenge teacher end nineteenth century teacher deﬁnition knowledgeable student difﬁcult student verify lesson given teacher today given information available ﬁngertips student internet verifying lesson getting information given topic click away website wikipedia provide lot information various topic student consult unfortunately organisation information website suited allow student learn furthermore huge difference quality depth information available different topic second reason computer networking community strong participant ment today widely used implementation networking protocol includes implementation linux freebsd uipstack running troller server bind unbound apache orsendmail implementation routing protocol asxorp orquagga furthermore document deﬁne internet protocol oped internet engineering task force ietf using open process ietf publishes protocol speciﬁcations publicly available rfc new proposal described internet draft open textbook aim ﬁll gap implementation network speciﬁcations providing detailed pedagogical description key principle guide operation internet book released creative common licence license motivated reason ﬁrst hope allow student use book learn computer network second hope teacher reuse adapt improve time tell possible build community contributor improve develop book starting point ﬁrst release contains material ﬁrst upper undergraduate graduate networking course writing text written olivier bonaventure laurent vanbever virginie van den saylor url http saylor foundation computer networking principle protocol practice release schriek damien saucez mickael hoerdt contributed exercise pierre reinbold designed icon used represent switch nipaul long redrawn ﬁgures svg format stephane bortzmeyer sent suggestion correction text additional information textbook available http chapter preface saylor url http saylor foundation chapter introduction ﬁrst computer built second world war expensive isolated year price gradually decreased ﬁrst experiment began connect computer early researcher including paul baran donald davy orjoseph licklider independently published ﬁrst paper describing idea building computer network baran given cost computer sharing long distance interesting idea arpanet started continued mid france louis pouzin developed cyclades network research network built moore time telecommunication computer industry interested computer network telecommunication industry bet computer industry took completely different approach designing local area network lan lan technology ethernet token ring designed time need interconnect computer led computer vendor develop suite networking protocol xerox developed xns dec chose decnet ibm developed sna microsoft introduced netbios apple bet appletalk research community arpanet decommissioned replaced reference implementation developed inside bsd unix university running unix adopt easily vendor unix workstation sun silicon graphic included variant unix parallel iso support government worked developing open networking protocol end facto standard used research community early growth usage continued today proprietary protocol seldom used shown ﬁgure provides estimation number host attached internet internet sustained large growth year figure estimation number host internet iso term contrast proprietary protocol suite speciﬁcation publicly available government mandated usage osi protocol rfc sufﬁcient encourage user switch osi protocol suite considered complex compared protocol suite saylor url http saylor foundation computer networking principle protocol practice release recent estimation number host attached internet continuing growth year number host attached internet high compared number mobile phone use today mobile phone connected net furthermore thanks availability implementation requiring limited resource uip expect growth enabled embedded device figure estimation number mobile phone looking service provided computer network useful agree terminology widely used networking literature computer network classiﬁed function geographical area cover local area network typically interconnects host maybe ten ters apart metropolitan area network typically interconnects device kilometer apart wide area network interconnect host located classiﬁcation computer network based physical topology following ﬁgures physical link represented line box computer type networking equipment computer network used allow host exchange information allow host send message host network easiest solution organise direct dedicated link pair host physical topology used especially high performance high redundancy required small number host major drawback network containing nhosts host interface practice number physical interface node limit size network built network containing nhosts required possible node room rarely located kilometer apart second possible physical organisation used inside computer connect different extension card bus bus network host attached shared medium usually cable single interface host sends electrical signal bus signal received host attached bus drawback network bus physically cut network split isolated network reason network considered difﬁcult operate maintain especially cable long place break topology used early ethernet network organisation computer network star topology topology host single physical interface physical link host center star node center star piece equipment ampliﬁes electrical signal active device piece book focus network used earth network include satellite link network technology used earth researcher develop networking technique used node located different planet inter planetary internet requires different technique one discussed book rfc reference information technique chapter introduction saylor url http saylor foundation computer networking principle protocol practice release figure mesh network figure network organised bus equipment understands format message exchanged network course failure central node implies failure network physical link fails cable cut node disconnected network practice network easier operate maintain network network administrator appreciate fact control network central point administered web interface connection center star useful point control enabling disabling device excellent observation point usage statistic figure network organised star fourth physical organisation network ring topology like bus organisation host single physical interface connecting ring signal sent host ring received host attached ring redundancy point view single ring best solution signal travel direction ring link composing ring cut entire network fails practice ring used local area network replaced network metropolitan network ring used interconnect multiple location case parallel link composed different cable used redundancy dual ring ring fails trafﬁc quickly switched ring ﬁfth physical organisation network tree network typically used large number customer connected manner cable tv network organised tree practice real network combine topology example campus network organised ring key building smaller building attached tree star important building saylor url http saylor foundation computer networking principle protocol practice release figure network organised ring figure network organised tree chapter introduction saylor url http saylor foundation computer networking principle protocol practice release isp network mesh device core network tree connect remote user book objective understand protocol mechanism necessary network shown s r r r r r r r r r r r r r s r tux linux pstn adsl figure simple internetwork ﬁgure illustrates internetwork network interconnects network network illustrated ellipse containing device explain book different type device respective role enabling host exchange information discus network interconnected rule guide interconnection analyse bus ring mesh topology used build real network point terminology need discus transmission mode exchanging information network distinguish transmission mode tv radio transmission broadcast used indicate technology sends video radio signal receiver given geographical area broadcast used computer network local area network number recipient limited ﬁrst widespread transmission mode called unicast unicast transmission mode information sent sender receiver today s internet application rely unicast transmission mode example show network type device host drawn computer intermediate node drawn cube host exchange information intermediate node example host sus unicast send information sends intermediate node node receives information upstream node host process forward downstream node host called store forward later concept key computer network second transmission mode multicast transmission mode mode used information sent set recipient ﬁrst used lan later supported wide area network sender us multicast send information nreceivers sender sends single copy information network node duplicate information necessary reach recipient belonging destination group understand importance multicast transmission consider source sthat sends information destination cande unicast information pass time intermediate node twice node waste resource intermediate node link multicast transmission host ssends information node forward downstream node node creates copy received information sends copy directly host eand downstream node reception information node copy forward node aand node thanks multicast information reach large number receiver sent link saylor url http saylor foundation computer networking principle protocol practice release ae s dcb figure unicast transmission ae s dcb figure multicast transmission chapter introduction saylor url http saylor foundation computer networking principle protocol practice release transmission mode anycast transmission mode initially deﬁned rfc transmission mode set receiver identiﬁed source sends information set receiver network ensures information delivered onereceiver belongs set usually receiver closest source receives information sent particular source anycast transmission mode useful ensure redundancy receiver fails network ensure information delivered receiver belonging group practice supporting anycast transmission mode difﬁcult s b figure anycast transmission example host marked anycast group host ssends information anycast group network ensures reach member anycast group dashed line possible delivery node subsequent anycast transmission host sto anycast group reach host attached intermediate node shown plain line anycast transmission reach member anycast group chosen network function current network condition service protocol important aspect understand studying computer network difference service protocol order understand difference useful start real world example traditional post provides service postman delivers letter recipient post deﬁnes precisely type letter size weight delivered using standard mail service furthermore format envelope speciﬁed position sender recipient address position stamp want send letter place letter post ofﬁce inside dedicated mailbox letter collected delivered ﬁnal recipient note regular service post usually doe guarantee delivery particular letter letter lost letter delivered wrong mailbox letter important sender use registered service ensure letter delivered recipient post service provide acknowledged service express mail service faster regular service computer network notion service formally deﬁned better understood considering computer network size complexity black box provides service user shown ﬁgure user human user process running computer user attached service provider provider user able exchange message user able deliver message service provider able unambiguously identify user computer network user identiﬁed unique address discus later address built used point considering unicast transmission main characteristic address unique different user attached network use address service protocol saylor url http saylor foundation computer networking principle protocol practice release user user b service provider network service access point primitive figure user service provider book deﬁne service set capability provided underlying element user user interacts service service access point note shown ﬁgure user interact service provider practice service provider distributed host implementation detail important stage interaction user service provider expressed using primitive ﬁgure primitive abstract representation interaction user service provider practice interaction implemented call example user user b service provider network figure type primitive type primitive deﬁned type primitive corresponds request issued user service provider type primitive generated network provider delivered user related earlier remote primitive type primitive generated user answer earlier primitive type primitive delivered service provide conﬁrm user previous primitive successfully processed primitive combined model different type service simplest service computer network called connectionless service modelled using primitive source destination sdu primitive issued user speciﬁes parameter source address address recipient message message use service data unit sdu message exchanged transparently user service source destination sdu primitive delivered service provider user contains parameter service data unit address sender destination user discussing service provided computer network useful able action user provider graphically frequently used representation diagram chapter later book use diagram ﬁgure diagram describes interaction user service provider convention user represented left right part diagram service provider occupies middle diagram diagram time ﬂows diagram primitive service called connectionless service need create connection transmitting data contrast service chapter introduction saylor url http saylor foundation computer networking principle protocol practice release represented plain horizontal arrow primitive attached dashed line used represent possible relationship primitive diagram provides information ordering different primitive distance primitive doe represent precise time ﬁgure provides representation connectionless service diagram user left having address s issue primitive containing sdu mthat delivered service provider destination dashed line primitive indicates primitive delivered user right corresponds primitive sent user left source provider destination s d m s d m time figure simple connectionless service possible implementation connectionless service discus later book studying realisation useful discus possible characteristic connectionless service areliable connectionless service service service provider guarantee sdus submitted user eventually delivered destination service useful user guaranteeing perfect delivery difﬁcult practice reason computer network usually support anunreliable connectionless service anunreliable connectionless service suffer various type problem compared reliable tionless service unreliable connectionless service doe guarantee delivery sdus expressed graphically using diagram practice unreliable connectionless service usually deliver large fraction sdus delivery sdus guaranteed user able recover loss sdu second imperfection affect unreliable connectionless service duplicate sdus unreliable connectionless service provider deliver sdu sent user twice illustrated diagram finally unreliable connectionless service provider deliver destination different sdu supplied illustrated ﬁgure user interacts service provider precisely know limitation underlying service able overcome problem arise requires precise deﬁnition characteristic underlying service important characteristic connectionless service preserve ordering sdus sent user user s viewpoint desirable characteristic illustrated ﬁgure connectionless service particular unreliable service guarantee preserve ordering sdus sent user illustrated ﬁgure service protocol saylor url http saylor foundation computer networking principle protocol practice release source provider destination s d msg time figure unreliable connectionless service loose sdus source provider destination s d msg s d msg s d msg figure unreliable connectionless service duplicate sdus chapter introduction saylor url http saylor foundation computer networking principle protocol practice release source provider destination s d msg s d xyz time figure unreliable connectionless service deliver erroneous sdus figure connectionless service preserve ordering sdus sent given user source provider destination s d s d b s d b s d figure connectionless service doe preserve ordering sdus sent given user service protocol saylor url http saylor foundation computer networking principle protocol practice release theconnectionless service widely used computer network later book variation basic service proposed conﬁrmed connectionless service service us primitive addition classical primitive primitive issued service provider conﬁrm user delivery previously sent sdu recipient note like registered service post ofﬁce indicates sdu delivered destination user primitive doe indicate sdu processed destination user conﬁrmed connectionless service illustrated ﬁgure source provider destination s d m s d m figure conﬁrmed connectionless service connectionless service described earlier frequently used user need exchange small sdus user needing send receive different potentially large sdus need structured exchange prefer service invocation service divided phase ﬁrst phase establishment aconnection connection temporary association user service provider connection exist time pair user established connection used transfer sdus connection usually provide bidirectional stream supporting exchange sdus user associated connection stream used transfer data second phase connection called data transfer phase phase termination connection user ﬁnished exchanging sdus request service provider terminate connection later case service provider need terminate connection establishment connection modelled using primitive primitive used request establishment connection main parameter primitive address destination user service provider delivers primitive inform destination user connection attempt accepts establish connection responds primitive point connection considered open destination user start sending sdus connection service provider process deliver user initiated connection delivery primitive terminates connection establishment phase point connection considered open user send sdus successful connection establishment illustrated example show successful connection establishment practice connection successfully established reason destination user agree policy performance reason establish connection initiating user time case destination user responds primitive primitive contains parameter indicate connection refused service provider deliver primitive inform initiating user second reason service provider unable reach destination user happen destination user currently attached network congestion chapter introduction saylor url http saylor foundation computer networking principle protocol practice release source provider destination source considers connection opendestination considersconnection open figure connection establishment case service provider responds primitive reason parameter contains additional information failure connection source provider destination connection rejected providerconnection rejected destination figure type rejection connection establishment attempt connection established service provider supply data stream communicating user ﬁrst data stream used initiating user send sdus second data stream allows responding user send sdus initiating user data stream organised different way ﬁrst organisation transfer transfer service provider guarantee delivered endpoint data stream primitive issued endpoint transfer illustrated ﬁgure main advantage mode recipient receives exactly sdus sent user sdu contains command receiving user process command soon receives sdu unfortunately transfer widely used internet internet popular service transfer sdus service provider supply byte stream link communicating user sending user sends byte using primitive contain sequence byte sdus service provider delivers sdus containing consecutive byte receiving user using primitive service provider ensures byte sent end service protocol saylor url http saylor foundation computer networking principle protocol practice release source provider destination bcd ef bcd ef figure transfer connection oriented service stream delivered correctly order endpoint service provider doe attempt preserve boundary sdus relation enforced service provider number number primitive illustrated ﬁgure practice consequence utilisation user want exchange structured sdus need provide mechanism allow receiving user separate successive sdus byte stream receives chapter application layer protocol use speciﬁc delimiters end line character delineate sdus bytestream source provider destination ab cd ef b c def figure transfer connection oriented service phase connection need released connection involves party user service provider request termination connection usually connection terminated request user data transfer ﬁnished service provider forced terminate connection lack resource inside service provider user reachable anymore network case service provider issue primitive user primitive contain parameter information reason termination connection unfortunately illustrated ﬁgure chapter introduction saylor url http saylor foundation computer networking principle protocol practice release service provider forced terminate connection guarantee sdus sent user delivered user connection release said abrupt cause loss data source provider destination b c connection opened connection opened figure abrupt connection release initiated service provider abrupt connection release triggered user user need reason terminate connection quickly issue primitive request abrupt release service provider process request stop data stream deliver primitive remote user soon possible illustrated ﬁgure abrupt connection release cause loss sdus source provider destination b c connection opened connection opened abrupt figure abrupt connection release initiated user ensure reliable delivery sdus sent user connection need consider stream compose connection independent user able release stream us send sdus sent sdus planned send connection continue receive sdus opposite stream graceful connection release usually performed shown ﬁgure user issue primitive provider issued primitive service provider wait primitive delivered receiving user issuing primitive primitive informs receiving user longer receive sdus connection able issue primitive stream opposite direction user issued primitive issue primitive request termination remaining stream service provider process request deliver corresponding user delivered pending primitive service protocol saylor url http saylor foundation computer networking principle protocol practice release point data delivered stream released successfully connection completely closed source provider destination source destination connection closedconnection opened connection opened b c b graceful graceful c d d graceful disc o graceful connection closed connection closed figure graceful connection release note reliability service important point note service reliability service guarantee correct delivery sdus provided connection released gracefully implies connection active guarantee actual delivery sdus exchanged connection need released abruptly time reference model given growing complexity computer network network researcher proposed various reference model facilitate description network protocol service open system interconnection osi model probably inﬂuential served basis standardisation work performed iso develop global computer network standard reference model use book considered simpliﬁed version osi reference ﬁve layer reference model reference model divided ﬁve layer shown ﬁgure starting ﬁrst layer physical layer communicating device linked physical medium physical medium used transfer electrical optical signal directly connected device type physical medium used practice cable information transmitted different type electrical cable common one twisted pair used telephone network enterprise network coaxial cable coaxial cable used cable tv network longer used enterprise network networking technology operate classical electrical cable ﬁber optical ﬁbers frequently used public enterprise network distance tween communication device larger kilometer main type optical ﬁbers multimode monomode multimode cheaper monomode ﬁber led interesting historical discussion debate chapter introduction saylor url http saylor foundation computer networking principle protocol practice release application transport network datalink physical physical transmission medium figure ﬁve layer reference model used send signal multimode ﬁber monomode ﬁber driven laser different mode propagation light monomode ﬁbers limited distance kilometer multimode ﬁbers used distance greater ten kilometer case repeater used regenerate optical signal endpoint ﬁber send ﬁber case radio signal used encode information exchanged cating device type modulation technique used send information wireless channel lot innovation ﬁeld new technique appearing year wireless network rely radio signal use laser sends light pulse remote detector optical technique allow create link technique depending directionality antenna used build network containing device spread small geographical area important point note physical layer service provides service usually unreliable service allows user physical layer exchange bit unit information transfer physical layer bit physical layer service unreliable physical layer change electromagnetic interference value bit transmitted physical layer deliver bit receiver bit sent sender physical layer deliver fewer bit receiver bit sent sender point strange ﬁrst glance device attached cable possible bit created lost cable mainly fact communicating device use clock transmit bit given bit rate consider sender having clock tick million time second sends bit tick microsecond sender sends electrical optical signal encodes bit sender s bit rate mbps receiver clock tick microsecond deliver mbps user receiver s clock slightly faster resp slower deliver slightly resp million bit second explains physical layer lose create bit note bit rate computer network bit rate physical layer expressed bit second mbps million bit second gbps billion bit second contrast memory tions usually expressed byte bit kilobyte byte megabyte byte transferring mbyte mbps link last second perfectly synchronised clock running high frequency difﬁcult practice physical layer introduce feedback loop allows receiver s clock synchronise automatically sender s clock physical layer include kind synchronisation reference model saylor url http saylor foundation computer networking principle protocol practice release bit rate bit second kbps mbps gbps tbps physical layer physical layerbits physical transmission figure physical layer physical layer allows entity directly attached transmission medium exchange bit able exchange bit important virtually information encoded sequence bit electrical engineer used processing stream bit computer scientist usually prefer deal higher level concept similar issue arises ﬁle storage storage device store stream bit hardware device process bit stream produced computer scientist designed ﬁlesystems allow application easily access storage device ﬁlesystems typically divided layer store sector byte unix ﬁlesystems group sector larger block contain data inodes representing structure ﬁlesystem nally application manipulate ﬁles directory translated block sector eventually bit operating computer network use similar approach layer provides service built underlying layer closer need application datalink layer build service provided underlying physical layer datalink layer allows host directly connected physical layer exchange information unit information exchanged entity datalink layer frame frame ﬁnite sequence bit datalink layer use frame use frame datalink layer provide service provide connectionless service datalink layer provide reliable delivery guarantee correct delivery information important point note datalink layer ﬁgure indicates entity datalink layer exchange frame directly reality slightly different datalink layer entity left need transmit frame issue primitive underlying physical layer bit frame physical layer convert sequence bit electromagnetic optical signal sent physical medium physical layer right hand ﬁgure decode received signal recover bit issue corresponding primitive itsdatalink layer entity transmission error entity receive frame sent earlier datalink physicalframes datalink physical figure datalink layer thedatalink layer allows directly connected host exchange information necessary exchange information host attached physical medium task network layer network layer built datalink layer network layer entity exchange packet packet ﬁnite sequence byte transported datalink layer inside frame packet usually chapter introduction saylor url http saylor foundation computer networking principle protocol practice release contains information origin destination usually pass intermediate device called router way origin destination physical layerdatalinknetwork physical layerdatalinknetwork physical layerdatalinknetwork packet packet figure network layer realisation network layer including internet provide reliable service application need exchange information reliably using network layer service directly difﬁcult ensuring reliable delivery data produced application task transport layer transport layer entity exchange segment segment ﬁnite sequence byte transported inside packet transport layer entity issue segment segment underlying network layer entity different type transport layer widely used transport layer internet tcp provides reliable bytestream transport service udp provides unreliable transport service physical layerdatalinknetwork physical layerdatalinknetworktransport physical layerdatalinknetworktransportsegments figure transport layer upper layer architecture application layer layer includes mechanism data structure necessary application use application data unit adu indicate data exchanged entity application layer physical layerdatalinknetwork physical layerdatalinknetworktransport physical layerdatalinknetworktransportadu application application figure application layer reference model contrast osi community did spend lot effort deﬁning detailed reference model fact goal internet architecture documented deployed rfc deﬁnes requirement internet host mention different layer starting application layer transport layer internet layer equivalent network layer reference model link layer combine functionality physical datalink layer reference model difference lower layer reference model close ﬁve layer use document reference model saylor url http saylor foundation computer networking principle protocol practice release osi reference model compared ﬁve layer reference model explained osi reference model deﬁned divided seven layer lower layer similar lower layer described osi reference model reﬁned application layer dividing layer session layer session layer contains protocol mechanism necessary organize synchronize dialogue manage data exchange presentation layer entity main function transport layer cope unreliability network layer session s layer objective hide possible failure connection upper layer higher session layer provides service allow establish support orderly data exchange including mechanism allow recover abrupt release underlying transport connection release connection orderly manner presentation layer designed cope different way representing information er difference way computer store information computer store integer bit ﬁeld use bit ﬁeld problem arises ﬂoating point number textual information complex different character code situation complex considering exchange structured information database record solve problem presentation layer contains provides common representation data transferred notation designed presentation layer used today protocol application layer contains mechanism ﬁt presentation session layer osi application layer divided generic service element note missing layer reference model reference place presentation session layer implicitly application layer main motivation simplifying upper layer reference model pragmatic internet application started prototype evolved later standardised application assumed used exchange information written american english bit character code sufﬁcient case email ll chapter email able evolve support different character encoding application considered different data representation explicitly example ftpcontained mechanism convert ﬁle format html language deﬁned represent web page hand iso speciﬁcations developed committee composed people did participate actual implementation iso spent lot effort analysing requirement deﬁning solution meet requirement unfortunately speciﬁcations complex difﬁcult implement completely standardisation body deﬁned recommended proﬁles contained implemented set option figure seven layer osi reference model rough consensus greater use unicode character format unicode represent different character known written language earth maybe day computer use unicode represent stored character unicode standard format exchange character stage today chapter introduction saylor url http saylor foundation computer networking principle protocol practice release organisation book document organised according reference model follows approach classical networking textbook chose approach ﬁrst explained electrical optical detail physical layer moved datalink layer approach worked infancy computer network late time student user computer network useful explain computer network building corresponding protocol simplest physical layer application layer today student active user internet application starting learn computer networking looking bit motivating starting textbook teacher chosen approach approach start application email web student know explores different layer starting application layer approach work quite today s student traditional approach fact considered engineering approach start simple network allows exchange bit explains combine different protocol mechanism build complex application approach hand considered scientiﬁc approach like biologist start existing built explores layer layer versus organisation computer networking book aim having coverage small number topic having limited coverage wide range topic covering wide range topic interesting introductory course student need detailed knowledge computer network allows student learn little start basic knowledge later need understand computer networking book chose cover smaller number topic textbook motivated fact computer network need pushed limit understanding detail main networking protocol important able fully grasp network behaves extend provide innovative book organised follows ﬁrst application layer chapter application layer given large number application course impossible cover instead focus type application ﬁrst study domain dns explain protocol involved exchange electronic mail discussion application layer end description key protocol world wide web application rely transport layer explained chapter transport layer key layer today s network contains mechanism necessary provide reliable delivery data unreliable network cover transport layer ﬁrst developing simple reliable transport layer protocol explain detail tcp udp protocol used network transport layer analyse network layer chapter network layer important layer responsible delivery packet source destination intermediate router network layer possible organisation network layer routing protocol based distance vector explain rip ospf bgp protocol actually used today s internet chapter book devoted datalink layer chapter datalink layer local area network begin explaining principle datalink layer link focus local area network ﬁrst medium access control algorithm allow multiple host share transmission medium consider opportunistic deterministic technique explain type lan important deployment viewpoint today ethernet wifi popular quote say devil detail quote reﬂects operation network protocol change single bit huge consequence computer network understanding allthe detail necessary organisation book saylor url http saylor foundation computer networking principle protocol practice release chapter introduction saylor url http saylor foundation chapter application layer application layer important visible layer computer network application reside layer human user interact application network chapter ﬁrst brieﬂy main principle application layer focus important application model model review family protocol proved useful internet electronic mail protocol allow access information world wide web domain allows human use name host use bit bit long ip address principle important model used organise networked application ﬁrst oldest model server model model server provides service client exchange information model highly asymmetrical client send request server perform action return response illustrated ﬁgure figure model model ﬁrst model used develop networked application model come naturally mainframe minicomputer networked computer used minicomputer used ten user time user interacts minicomputer using terminal terminal mainly screen keyboard cable directly connected minicomputer various type server various type client web server provides information response query sent client print server print document sent query client email server forward recipient email message sent query music server deliver music requested client viewpoint application developer client server application directly exchange message horizontal arrow labelled query andresponses ﬁgure practice message exchanged thanks underlying layer vertical arrow ﬁgure chapter focus horizontal exchange message saylor url http saylor foundation computer networking principle protocol practice release networked application exchange random message order ensure server able understand query sent client client able understand response sent server agree set syntactical semantic rule rule deﬁne format message exchanged ordering set rule called protocol protocol similar structured conversation human assume alice want know current time doe watch bob pass close following conversation place alice hello bob hello alice time bob alice thank bob welcome conversation succeeds alice bob speak language alice meet tchang speaks chinese won t able ask current time conversation human complex example assume bob security guard duty allow trusted secret agent enter meeting room agent know secret password conversation bob trudy follows bob secret password trudy bob correct password welcome alice want enter meeting room doe know password conversation follows bob secret password alice bob correct password human conversation formal soldier communicate hierarchy informal friend discus computer communicate akin soldier require rule ensure successful exchange information type rule deﬁne information exchanged computer syntactical rule precisely deﬁne format message exchanged computer process bit syntactical rule specify information encoded bit string organisation information ﬂow application ﬂow information structured precedence relationship different type information time example alice greet bob asking current time alice ask current time ﬁrst greet bob precedence relationship exist networked application example server receive username valid password accepting complex command client let ﬁrst discus syntactical rule later explain information ﬂow organised analysing real networked application protocol exchange type message protocol used support electronic mail exchange message expressed string line character transport layer allows host exchange byte need agree common representation character ﬁrst simplest method encode character use ascii table rfc provides ascii table used protocol internet example table deﬁnes following binary representation chapter application layer saylor url http saylor foundation computer networking principle protocol practice release addition ascii table deﬁnes control character character signed allow application control printer terminal control character include crandlf used terminate line bellcharacter cause terminal emit sound return cr feed lf theascii character encoded seven bit ﬁeld transmitted byte high order bit usually set byte transmitted starting high order signiﬁcant bit application exchange string composed ﬁxed variable number character common solution deﬁne character string acceptable deﬁne grammar using form bnf augmented bnf deﬁned rfc bnf set production rule generate valid character string example consider networked application us command user supply username password bnf application deﬁned shown ﬁgure figure simple bnf speciﬁcation example deﬁnes terminal command usercommand andpasswordcommand alpha terminal contains letter upper lower case alpha rule corresponds ascii character code hexadecimal capital crandlfterminals correspond carriage return linefeed control character crlf rule concatenates terminal match standard end line termination digit terminal contains digit spterminal corresponds white space character usercommand composed string separated white space abnf rule deﬁne message used internet application command rule user corresponds possible case letter compose word bracket user user user user username contains letter letter user name deﬁned string bracket password rule indicates password start letter contain number letter digit white space control character appear password deﬁned rule character string application need exchange bit bit ﬁelds integer naive solution send ﬁeld encoded host s memory unfortunately different method store ﬁelds memory cpu store signiﬁcant byte ﬁeld ﬁrst address ﬁeld store signiﬁcant byte location networked application running different cpu exchange bit ﬁelds possibility transfer transport service send signiﬁcant byte followed signiﬁcant byte send signiﬁcant byte followed signiﬁcant byte ﬁrst possibility named note written cohen second named vendor cpu used memory insisted using encoding worked application vendor cpu used recommended opposite study written relative merit type encoding discussion religious issue eventually internet chose encoding ﬁelds ted sending signiﬁcant byte ﬁrst rfc refers encoding order principle saylor url http saylor foundation computer networking principle protocol practice release write networked application contain function convert ﬁelds memory network byte order vice versa bit word application need exchange data structure containing bit ﬁelds various length example message composed bit ﬁeld followed bit ﬂags bit ﬁeld bit byte internet protocol speciﬁcations deﬁne message using representation representation line corresponds bit vertical line used delineate ﬁelds number line indicate bit position word high order bit position figure message format message mentioned transmitted starting upper word network byte order ﬁrst ﬁeld encoded bit followed bit ﬂags bit ﬁeld high order byte shown ﬁrst line low order byte appear second line followed byte ﬁelds ascii representation frequently used deﬁning binary protocol use binary protocol discussed book discus example protocol chapter model model emerged year possible architecture networked cation traditional model host act server client server serf large number client model host act server client play role model used develop various networked application ranging internet telephony ﬁle sharing ﬁlesystems detailed description application survey protocol application transport service networked application built transport service explained previous chapter main type transport service connectionless ordatagram service service connectionless service allows application easily exchange message service data unit internet service provided udp protocol explained chapter connectionless transport service internet unreliable able detect transmission error implies application receive sdu corrupted transmission error connectionless transport service allows networked application exchange message networked application running time single host application able exchange sdus remote application enable exchange sdus networked application running host identiﬁed following information host application running port number application listens sdus example htonl resp ntohl function standard c library convert unsigned integer byte order used cpu network byte order resp network byte order cpu byte order similar function exist programming language chapter application layer saylor url http saylor foundation computer networking principle protocol practice release internet port number integer host identiﬁed network address chapter network layer type internet address version address bit wide version address bit wide address usually represented using dotted decimal representation decimal number corresponds byte address address usually represented set hexadecimal number separated semicolon today internet host address small fraction address future expect host address address anymore host address communicate host having address ﬁgure illustrates using datagram service provided udp host using address figure connectionless datagram service second transport service service internet service called service creates reliable byte stream application linked transport connection like datagram service networked application use service identiﬁed host run port number host identiﬁed address address ﬁgure illustrates application using service provided tcp protocol host byte stream service provided tcp reliable bidirectional figure service principle saylor url http saylor foundation computer networking principle protocol practice release protocol protocol deﬁned networked application section important application used internet ﬁrst explain domain dns enables host identiﬁed name instead address used network operation electronic mail ﬁrst killer application global internet protocol used world wide web domain early day internet number host mainly minicomputer connected network popular application remote login ﬁle transfer ﬁve host attached internet host identiﬁed unique address forcing human user remember address remote host want use human user prefer remember name use needed using name alias address common technique computer science simpliﬁes development application allows developer ignore low level detail example using programming language instead writing machine code developer write software knowing variable us stored memory inside register name higher level address allow example programming internet treat address mere technical identiﬁers change name stable today s internet switching isp mean changing ip address domain name important typed user stability remains important important property ﬁrst solution allowed application use name ﬁle ﬁle similar symbol table compiled code contains mapping internet host associated ip maintained sri international coordinated network information center nic new host connected network administrator register ip address nic nic updated ﬁle server internet host regularly retrieved updated ﬁle server maintained sri ﬁle stored location internet host rfc networked application use ﬁnd ip address corresponding ﬁle used host network clearly suitable network containing thousand million host key issue large network deﬁne suitable naming scheme arpanet initially used ﬂat naming space host assigned unique limit collision name name usually contained institution sufﬁx identify host inside institution kind poor man s hierarchical naming scheme arpanet institution host connected network limitation ﬂat naming scheme clear end arpanet rfc proposed hierarchical naming scheme rfc discussed possibility organising name directed graph internet opted eventually tree structure capable containing name tree domain directly attached root ﬁrst domain initially added sufﬁx name host attached arpanet listed ﬁle generic domain name added rfc proposed utilisation letter country code domain name deﬁnes letter code country recognised united nation allowed country automatically domain domain include belgium france usa ireland tuvalu group small island paciﬁc turkmenistan today set managed internet corporation assigned name number icann recently icann added dozen generic domain related country domain registered catalan language ongoing discussion icann increase number domain ﬁle maintained anymore historical snapshot retrieved april available http http time line dns related development chapter application layer saylor url http saylor foundation computer networking principle protocol practice release domain managed organisation decides name registered domain name use ﬁrst served allow register domain name exception example reserved government reserved international organisation name mainly reserved company user present canada figure tree domain name rfc recommended following bnf fully qualiﬁed domain name allow host name syntax work application domain name richer syntax figure bnf fully qualiﬁed host name grammar speciﬁes host ordered list label separated dot character label contain letter number hyphen character fully qualiﬁed domain name read left right ﬁrst label hostname domain followed hierarchy domain ending root implicitly right domain registered example ﬁgure corresponds host named www inside whitehouse domain belongs domain corresponds infodomain inside ucldomain included domain hierarchical naming scheme key component domain dns dns tributed database contains mapping fully qualiﬁed domain name ip address dns us model client host need retrieve mapping given nameserver store distributed database answer query sent client nameserver responsible domain ﬁgure domain represented circle host inside domain dom host inside domain shown ﬁgure contain host name figure simple tree domain name speciﬁcation evolved later support domain name written using character set rfc extension important support language english detailed discussion outside scope document ofﬁcial list domain name maintained term iana http additional information domain http protocol saylor url http saylor foundation computer networking principle protocol practice release anameserver responsible domain dom directly answer following query ip address host residing directly inside domain dom ﬁgure nameserver s responsible direct domain dom ﬁgure retrieve mapping host client sends query server responsible domain server directly answer query retrieve mapping dns client ﬁrst sends query server responsible domain nameserver return nameserver responsible domain nameserver contacted obtain nameserver responsible domain nameserver contacted retrieve mapping thanks organisation nameservers possible dns client obtain mapping host inside domain subdomains ensure dns client able resolve fully qualiﬁed domain special nameservers responsible root domain hierarchy nameservers called root nameserver currently dozen root root nameserver maintains nameservers responsible domain name ip root nameservers synchronised provide answer querying root nameservers dns client obtain nameserver responsible nameserver possible resolve domain able contact root nameservers dns client know ip address implies dns client maintain list ip address root list impossible contact root nameservers forcing internet host maintain recent version list difﬁcult operational point view solve problem designer dns introduced special type dns server dns resolvers resolver server provides resolution service set client network usually contains resolvers host network conﬁgured send dns query local resolvers query called recursive query theresolver recurse hierarchy nameservers obtain answer dns resolvers advantage letting internet host query directly nameservers firstly regular internet host need maintain list ip address root server secondly regular internet host need send query nameservers internet furthermore dns resolver serf large number host cache received answer allows resolver quickly return answer popular dns query reduces load dns server component domain dns protocol dns protocol run datagram service bytestream service practice datagram service used short query response exchanged bytestream service used longer response expected section discus utilisation dns protocol datagram service frequent utilisation dns dns message composed ﬁve part named section rfc ﬁrst section mandatory section optional ﬁrst section dns message header contains information type message content section second section contains question sent server resolver section contains answer question client sends dns query answer section fourth section named authority contains information server provide authoritative answer required section contains additional information supplied resolver server requested question header dns message composed byte structure shown ﬁgure theid identiﬁer random value chosen client client sends question dns server remembers question identiﬁer server return answer return idﬁeld identiﬁer currently root server practice root server implemented set distinct physical server http information physical location server copy information maintained root nameserver available http february root dns server address address added root dns server slowly avoid creating problem discussed http dns root server reachable using current list ip address root nameservers maintained http ip address stable root nameservers seldom change ip address dns resolvers maintain copy ﬁle chapter application layer saylor url http saylor foundation computer networking principle protocol practice release figure dns header chosen client thanks identiﬁer client match received answer question sent theqrﬂag set dns query dns answer opcode used specify type query instance standard query client sends server return corresponding data update request client sends new data server update database theaabit set server sent response authority domain question section original dns deployment type server considered authoritative server authoritative server authoritative server managed administrator responsible given domain store recent information domain server server resolvers store dns information external domain managed owner domain provide answer date security point view authoritative bit absolute indication validity answer securing domain complex problem addressed satisfactorily recently utilisation cryptographic signature dnssec extension dns described rfc extension outside scope chapter therd recursion desired bit set client sends query resolver query said recursive resolver recurse dns hierarchy retrieve answer behalf client past resolvers conﬁgured perform recursive query behalf internet host expose resolvers security risk simplest resolver overloaded having recursive query process writing allow recursive query client belonging company network discard recursive query rabit indicates server support recursion rcode used distinguish different type error rfc additional detail ﬁelds indicate size question answer authority additional section dns message section dns message contain resource record rr rrs level format shown ﬁgure aresource record rr indicates node resource record pertains byte type ﬁeld indicate type resource record class ﬁeld used support utilisation dns environment internet thettl ﬁeld indicates lifetime resource record second ﬁeld set server return answer indicates long client resolver store resource record inside cache long ttl indicates stable rr company use short ttl value mobile host popular server dns resolvers allow host send query opendns andgoogledns example open resolvers protocol saylor url http saylor foundation computer networking principle protocol practice release figure dns resource record example web hosting company want spread load pool server conﬁgure nameservers return different answer different client answer small ttl client forced send dns query regularly nameserver reply query supplying address loaded server therdlength ﬁeld length rdata ﬁeld contains information type speciﬁed type ﬁeld type dns rr used practice atype used encode address corresponds speciﬁed aaaa type used encode address corresponds speciﬁed nsrecord contains dns server responsible given domain example query thearecord associated return following answer answer contains piece information associated ip address second domain managed different nameservers nameservers reachable reachable reachable query aaaa record associated return authority additional section cname canonical name used deﬁne alias example cname actual server web server run note reverse dns dns mainly used ﬁnd ip address correspond given useful obtain corresponds ip address using ptr pointer rr rdata aptr rr contains rrcontains ip address encoded domain address encoded reversing digit compose dotted decimal representation address example consider address hostname associated address requesting ptr rr corresponds similar solution used support address rfc chapter application layer saylor url http saylor foundation computer networking principle protocol practice release figure query arecord important point note regarding domain extensibility thanks type rdlength ﬁelds format resource record easily extended furthermore dns implementation receives new resource record doe understand ignore record able process part message allows example dns server support ignore address listed dns reply able correctly parse resource record understands extensibility allowed domain evolve year preserving backward compatibility deployed dns implementation electronic mail electronic mail email popular application computer network internet email appeared early allows user exchange text based message initially mainly used exchange short message year usage grown used exchange small long message composed part later looking detail internet email let consider simple scenario illustrated ﬁgure alice sends email bob alice prepares email using email client sends email server alice s email server extract bob s address email delivers message bob s server bob retrieves alice s message server read using favourite email client webmail interface figure simpliﬁed architecture internet email email consider book composed component message format deﬁnes valid email message encoded protocol allow host server exchange email message protocol saylor url http saylor foundation computer networking principle protocol practice release client software allows user easily create read email message software allows server efﬁciently exchange email message ﬁrst discus format email message followed protocol used today s internet exchange retrieve email email system developed past today email solution migrated internet email information software used compose deliver email wikipedia email client email server detailed information internet mail architecture rfc email message like postal mail composed part aheader play role letterhead regular mail contains metadata message body contains message email message entirely composed line ascii character line contain character terminated crandlfcontrol character rfc line compose header appear message body line containing crandlfcharacters mark end header illustrated ﬁgure figure structure email message email header contains line begin keyword followed colon additional tion format email message different type header line deﬁned rfc header line mandatory appear email message sender address header line start contains optional sender followed email address email address composed username followed sign domain date header line start date rfc precisely deﬁnes format used encode date header line appear email message subject header line allows sender indicate topic discussed email type header line used specify recipient message header line contains email address primary recipient address separated using comma cc header line used sender provide list email address receive carbon copy message address listed header line separated comma recipient email message receive andcc header line bcc header line used sender provide list comma separated email address receive blind carbon copy message bcc header line delivered recipient email message simple email message containing anddate header line line body shown surprising mandatory inside email message email message contain header line email doe contain header line relies bcc specify recipient valid chapter application layer saylor url http saylor foundation computer networking principle protocol practice release bob smith bob alice doe alice alice smith alice subject hello date mon mar hello world email message second line body note line date header line line contains crandlfcharacters mark boundary header body message optional header line deﬁned rfc furthermore email client server deﬁne header line starting optional header line deﬁned rfc worth discussed header line used associate unique identiﬁer email email identiﬁers usually structured like string domain string unique character string sequence number chosen sender email domain domain sender domain name unique host generate globally unique message identiﬁers concatenating locally unique identiﬁer domain used message created reply previous message case end line contains identiﬁer original message received header line used email message processed server reaching destination intermediate email server add received header line header line useful debug problem delivering email message ﬁgure show header line email message message originated host named received received line wrapped ability received unknown sun java tm messaging server built feb esmtp id mon mar cet received postfix esmtp id mon mar cet received localhost postfix esmtp id mon mar pst received localhost localhost postfix esmtp id rrg mon mar pst received localhost port esmtp id rrg mon mar pst received postfix esmtp id rrg mon mar pst received postfix esmtp id mon mar est date mon mar robin whittle rw subject rrg recommendation happens rrg rrg list standard email header line http protocol saylor url http saylor foundation computer networking principle protocol practice release message content removed initially email used exchange small message ascii text computer scientist growth internet supporting ascii text severe limitation reason speaker wanted write email native language required character ascii character table second user wanted send content just ascii text email binary ﬁles image sound solve problem ietf developed multipurpose internet mail extension mime extension carefully designed allow internet email carry character binary ﬁles breaking email server deployed time requirement backward compatibility forced mime designer develop extension existing email message format rfc instead deﬁning completely new format better suited support new type email rfc deﬁnes new type header line support mime header indicates version mime speciﬁcation used encode email message current version mime version mime deﬁned future thanks header line software process email message able adapt mime version used encode message message contain header supposed formatted according original rfc speciﬁcation header line indicates type data carried inside message header line used specify message encoded mime designed email server able process message containing character encoded using bit ascii character set mime allows utilisation character encoding inside email header header line indicates mime email message structured rfc deﬁnes utilisation header line common structure mime message header line indicates mime message contains pendent part example message contain plain text binary ﬁle header line indicates mime message contains representation information example message contain plain text html version text support type mime message recipient message able extract different part message rfc line used separate header line body using line separate different part email body difﬁcult body email message contains line possible option deﬁne special line mark boundary part mime message unfortunately possible email contain string body email sent student explain format mime message solve problem header line contains second parameter speciﬁes string used sender mime message delineate different part practice string chosen randomly mail client email message copied rfc show mime message containing part plain text encoded using ascii character set string simple boundary deﬁned header marker boundary successive part example mime message rfc date mon sep nathaniel borenstein nsb ned freed ned subject test simple boundary preamble ignored simple boundary chapter application layer saylor url http saylor foundation computer networking principle protocol practice release simple boundary second simple boundary header used inside mime case indicates type data placed data type speciﬁed type followed subtype detailed description rfc popular header line message contains information textual format subtypes regular ascii text deﬁned rfc document html format format deﬁned rfc header line contain second parameter speciﬁes character set used encode text standard ascii character table frequent character set include list standard character set maintained iana message contains binary representation image subtype indicates format image gif jpgorpng message contains audio clip subtype indicates format audio clip like wav message contains video clip subtype indicates format video clip like avior message contains binary information produced particular application listed subtype email client use subtype launch application able decode received binary information note ascii unicode ﬁrst computer used different technique represent character memory disk computer began exchange information tape telephone line unfortunately vendor proprietary character set exchanging data computer different vendor difﬁcult bit ascii character table rfc set adopted vendor internet protocol ascii problem internationalisation internet desire user use character set support written language ﬁrst attempt solving problem deﬁnition character set iso family standard speciﬁed various character set allowed representation european written language using bit character unfortunately character set sufﬁcient support widely used language used asian country fortunately end computer scientist proposed develop standard support written language used earth today unicode standard unicode adopted computer software vendor example java us unicode natively manipulate character python handle ascii unicode character internet application slowly moving complete support unicode character set moving ascii unicode important change huge impact current deployed implementation example work completely internationalise email rfc domain name rfc mime header line header line used header line message speciﬁes message encoded default encoding use bit ascii frequent encoding support encoding sequence byte set ascii line safely transmitted email server deﬁned rfc brieﬂy deﬁned rfc andrfc divide sequence byte encoded group byte group possibly partially ﬁlled group byte divided ﬁelds bit ﬁeld encoded character table protocol saylor url http saylor foundation computer networking principle protocol practice release value encoding value encoding value encoding value encoding r z b s j c t k d u l e v m f w n g x o h y p z q j r k b s l c t m d u n e v o f w p g x q h y example rfc illustrates encoding input data decimal encoding f p u c l point discussed happens length sequence byte encoded multiple case group byte contain byte instead reserve padding character character used twice group contains byte contains byte illustrated example input data decimal encoding f input data decimal encoding f p s explained format email message discus message changed internet ﬁgure illustrates protocol used alice sends email message bob alice prepares email email client webmail interface send email bob alice s client use simple mail transfer protocol smtp deliver message smtp server alice s email client conﬁgured default smtp server domain usually smtp server domain deliver message alice s smtp server ﬁnd smtp server contains bob s mailbox using mail exchange mx record dns set mx record associated domain mx record contains numerical preference fully qualiﬁed domain smtp server able deliver email message destined valid email address domain dns return mx record given domain case server lowest preference used ﬁrst server reachable second preferred server used bob s smtp server store message sent alice bobretrieves using webmail interface protocol post ofﬁce protocol pop internet message access protocol imap chapter application layer saylor url http saylor foundation computer networking principle protocol practice release figure email delivery protocol simple mail transfer protocol simple mail transfer protocol smtp deﬁned rfc protocol smtp cation distinguishes ﬁve type process involved delivery email message email message composed mail user agent mua mua usually email client webmail mua sends email message mail submission agent msa msa process received email forward mail transmission agent mta mta responsible transmission email directly intermediate mtas mta destination domain destination mta forward sage mail delivery agent mda accessed recipient s mua smtp used interaction mua smtp protocol like protocol internet relies stream service server listen port client send command composed line ascii text terminated server reply sending ascii line contain digit numerical code optional comment smtp protocol like protocol speciﬁed bnf bnf deﬁned rfc main smtp command deﬁned bnf rule shown ﬁgure figure bnf speciﬁcation smtp command bnf atext corresponds printable ascii character bnf rule deﬁned rfc ﬁve main command ehlo mail rcpt data alias administrator responsible given domain smtp server domain postmaster alias smtp response deﬁned bnf shown ﬁgure figure bnf speciﬁcation smtp response smtp server use structured reply code containing digit optional comment ﬁrst digit year internet service provider campus enterprise network deployed smtp extension rfc msas extension force muas authenticated msa accepts email message mua ﬁrst version smtp used helo ﬁrst command sent client smtp server smtp extended support newer feature bit character necessary allow server recognise interacting client supported extension ehlo mandatory publication rfc protocol saylor url http saylor foundation computer networking principle protocol practice release reply code indicates command successful reply code command accepted reply code command accepted additional information client expected reply code transient negative reply mean reason indicated digit comment command processed immediately hope problem transient basically telling client try command later contrast reply code permanent failure error case useless client retry command later application layer protocol ftp rfc http rfc use similar structure reply code additional detail reply code rfc example smtp reply code include following syntax error command unrecognized syntax error parameter argument command implemented bad sequence command domain service ready domain service closing transmission channel domain service available closing transmission channel requested mail action okay completed requested mail action taken mailbox unavailable requested action taken insufficient storage requested action taken mailbox unavailable start mail input end crlf crlf ﬁrst reply code correspond error command sent client fourth reply code sent server client sends command incorrect order client try send email providing destination address message reply code used server ﬁrst message agrees interact client reply code sent server closing underlying transport connection reply code returned problem lack resource prevents server accepting transport connection reply code standard positive reply indicates success previous command reply code destination mailbox temporarily unavailable various reason reply code mailbox doe exist used policy reason reply code client start transmitting email message transfer email message performed phase ﬁrst phase client open transport connection server connection established client server exchange greeting message ehlo command server insist receiving valid greeting message drop underlying transport connection receive valid greeting greeting exchanged email transfer phase start phase client transfer email message indicating email address sender mail command email address recipient rcpt command followed header body email message data command client ﬁnished sending queued email message smtp server terminates smtp association quit command successful transfer email message shown s esmtp mta information c ehlo s hello glad meet c mail alice s ok c rcpt bob s ok c data s end data cr lf cr lf c alice doe alice c bob smith bob c date mon mar c subject hello c c hello bob c small message containing line text c best regard chapter application layer saylor url http saylor foundation computer networking principle protocol practice release c alice c s ok queued c quit s bye example mta running open tcp connection smtp server host line preﬁxed s resp c response sent server resp command sent client server sends greeting soon tcp connection established client sends ehlo command fully qualiﬁed domain server reply sends greeting smtp association used exchange email send email client ﬁrst provide address recipient rcpt us mail address sender recipient sender accepted server client issue data command start transfer email message having received code client sends header body email message client indicates end message sending line containing dot server conﬁrms email message queued delivery transmission reply code client issue quit command close session server conﬁrms closing tcp connection note open smtp relay spam creation email useful tool used user exchange lot information early day smtp server open use forward email ﬁnal destination unfortunately year unscrupulous user way use email marketing purpose send malware ﬁrst documented abuse email marketing purpose occurred marketer worked computer vendor sent marketing email arpanet user time arpanet used research purpose abuse acceptable use policy unfortunately given extremely low cost sending email problem unsolicited email stopped unsolicited email called spam study carried enisa reveals email spam number continue grow place burden email infrastructure internet service provider large company need process useless message given spam message smtp server longer open rfc extension smtp developed recent year deal problem example smtp authentication scheme deﬁned rfc used smtp server authenticate client technique proposed allow smtp server authenticate message sent user rfc rfc post ofﬁce protocol ﬁrst version smtp designed internet composed minicomputer used entire university department research lab minicomputer used user time email mainly used send message user given host user remote host time smtp protocol involved delivery email host attached network running smtp server host email destined local user delivered placing email special directory ﬁle owned user introduction personal computer changed environment initially user personal computer used application telnet open remote session local minicomputer read email better solution appeared development user friendly email client application personal computer protocol designed allow client application retrieve email message destined user server protocol popular used today post ofﬁce protocol pop deﬁned rfc simplest allows client download message destined given user email server pop brieﬂy section second protocol internet message access protocol imap deﬁned rfc imap powerful complex pop imap designed allow client application efﬁciently access message stored various folder server imap implies valid email message contain line dot followed crandlf user type line email email client automatically add space character dot sending message smtp protocol saylor url http saylor foundation computer networking principle protocol practice release assumes message given user stored server provides function necessary search download delete ﬁlter message pop example simple protocol pop run bytestream service pop server usually listens port pop session composed part authorisation phase server veriﬁes client s credential transaction phase client downloads message update phase concludes session client sends command server reply preﬁxed indicate successful command indicate error client open transport connection pop server sends banner starting pop session time authorisation phase phase client send username resp password user resp pas command server reply username resp password valid username password validated pop session enters transaction phase phase client issue command stat command used retrieve status server reception command server reply line contains followed number message mailbox total size mailbox byte retr command followed space integer used retrieve nth message mailbox dele command used mark deletion nth message mailbox client retrieved possibly deleted email contained mailbox issue quit command command terminates pop session allows server delete message marked deletion using dele command ﬁgure provides simple pop session line preﬁxed c resp s sent client resp server s server ready c user alice s c pas s alice s maildrop message octet c stat s c list s message octet s s s c retr s octet s server sends message s c dele s message deleted c quit s server signing message left example pop client contact pop server behalf user named alice note example alice s password sent clear client implies able capture packet sent alice know alice s alice s client issue stat command know number message stored mailbox retrieves deletes ﬁrst message mailbox hypertext transfer protocol early day internet mainly used remote terminal access telnet email ﬁle transfer default ﬁle transfer protocol ftp deﬁned rfc widely used ftp client server included operating system rfc deﬁnes apop authentication scheme vulnerable attack chapter application layer saylor url http saylor foundation computer networking principle protocol practice release ftp client offer user interface similar unix shell allow client browse ﬁle server send retrieve ﬁles ftp server conﬁgured mode authenticated mode ftp server accepts user valid user password authenticated access ﬁles directory according permission anonymous mode client supply anonymous userid email address password client granted access special zone ﬁle contains public ﬁles ftp popular early today superseded recent protocol authenticated access ﬁles mainly using secure shell ssh protocol deﬁned rfc supported client scporsftp nowadays anonymous access mainly provided web protocol late high energy physicist working cern efﬁciently exchange document ongoing planned experiment tim evaluated document sharing technique available time existing solution met cern s requirement choose develop completely new document sharing initially called mesh quickly renamed world wide web starting point world wide web hypertext document hypertext document document contains reference hyperlink document reader immediately access hypertext invented world wide web idea hypertext document proposed ﬁrst experiment compared hypertext document used late main innovation introduced world wide web allow hyperlink reference document stored remote machine figure web client server document sharing world wide web composed important part standardised addressing scheme allows unambiguous identiﬁcation document standard document format hypertext markup language standardised protocol facilitates efﬁcient retrieval document stored server note open standard open implementation open standard playing key role success world wide web know day open standard world wide web reached current size addition open standard important factor success web availability open efﬁcient mentation standard cern started work web objective build running used physicist developed implementation ﬁrst web server web client implementation powerful used institution willing protocol saylor url http saylor foundation computer networking principle protocol practice release share information web extended developer contributed new feature example ncsa added support image mosaic browser eventually used create netscape communication ﬁrst component world wide web uniform resource identiﬁers uri deﬁned rfc uri character string unambiguously identiﬁes resource world wide web subset bnf uris uri scheme authority path query fragment scheme alpha alpha digit authority userinfo host port query pchar fragment pchar pchar unreserved query pchar fragment pchar hexdig hexdig unreserved alpha digit reserved ﬁrst component uri scheme scheme seen selector indicating meaning ﬁelds practice scheme identiﬁes protocol used client retrieve document case scheme imply protocol indicate retrievable frequent scheme http described later uri scheme deﬁned application layer protocol furilist character scheme uri second uri authority retrievable uri includes dns ip address server document retrieved using protocol speciﬁed scheme preceded information user user requesting information earlier deﬁnitions uri allowed speciﬁcation user password character rfc deprecated placing password inside uri insecure host followed semicolon character port number default port number deﬁned protocol port number included uri port number used protocol technique like service dns record used uri path document path structured ﬁlenames unix host doe imply ﬁles stored way server path speciﬁed server return default document optional part uri used provide query indicate speciﬁc section article requested document sample uris shown http mailto infobot http telnet ftp ﬁrst uri corresponds document named stored server named accessed using httpprotocol default port second uri corresponds email message subject sent user infobot domain mailto uri scheme deﬁned rfc uri reference portion document stored library directory server document retrieved using httpprotocol query associated uri fourth example server operates telnet protocol us address reachable port uri somewhat special user assume corresponds document stored example uri urn unique identiﬁer book urn scheme rfc course uri make retrievable dedicated server new protocol explicit thing scheme tag rfc used web syndication rfc atom syndication format scheme retrievable instance http used identiﬁer way resource http good explanation chapter application layer saylor url http saylor foundation computer networking principle protocol practice release server parse uri important remember character used separate user host authorisation uri implies uri point document named host having address document retrieved using ftpprotocol user set second component word wide web hypertext markup language html html deﬁnes format document exchanged web ﬁrst version html derived standard generalized markup language sgml standardised iso sgml designed allow large project document industry government law aerospace shared efﬁciently readable manner industry require document remain readable editable ten year insisted standardised format supported multiple vendor today sgml longer widely used speciﬁc application descendant including html andxml widespread markup language structured way adding annotation formatting document document example markup language include troff used write unix man page latex html us marker annotate text document composed html element element usually composed item start tag potentially includes speciﬁc attribute text including element end tag html tag keyword enclosed angle bracket generic form html element tag text displayed complex html element include optional attribute start tag tag text displayed html document shown composed part header delineated head marker body body marker example header contains title type information included header body contains image text list hyperlink image included web page indicating uri bracket inside img marker image course reside server client automatically download rendering web page marker used specify ﬁrst level heading ul marker indicates unnumbered list li marker indicates list item uri text indicates hyperlink textwill underlined rendered web page client fetch speciﬁed uri user click link figure simple html page additional detail various extension html ofﬁcial speciﬁcations maintained component world wide web hypertext transport protocol http http protocol client sends request server return response http run bytestream service http server listen default port design http largely inspired internet email protocol http request contains part amethod indicates type request uri version http protocol used client protocol saylor url http saylor foundation computer networking principle protocol practice release aheader used client specify optional parameter request line used mark end header optional mime document attached request response sent server contains part astatus line indicates request successful aheader contains additional information response response header end line mime document figure http request response type method used http request important one method popular used retrieve document server method encoded followed path uri requested document version http used client example retrieve http uri client open tcp port host send http request containing following line method variant method allows retrieval header line given uri retrieving entire document used client verify document exists instance post method used client send document server sent document attached http request mime document http client server include different http header http request response http header encoded single terminated crandlf header brieﬂy described detailed discussion standard header rfc mime header appear http request http response header mime header indicates length mime document byte header mime header indicates type attached mime document html page use type header indicates mime document encoded example header set document compressed using gzip software rfc andrfc deﬁne header speciﬁc http response server header include chapter application layer saylor url http saylor foundation computer networking principle protocol practice release server header indicates version web server generated http response server provide information software release optional module use security reason administrator disable header avoid revealing information server potential attacker date header indicates http response produced server header indicates date time modiﬁcation document attached http response similarly following header line appear inside http request sent client header provides information client generated http request server analyse header line return different header different document different user agent header followed date enables client cache memory disk recent frequently used document client need request uri server ﬁrst check document cache client sends http request header indicating date cached document server return document attached http response newer version stored client s cache referrer header followed uri indicates uri document client visited sending http request thanks header server know uri document containing hyperlink followed client information useful measure impact advertisement containing hyperlink placed website host header contains fully qualiﬁed domain uri requested note importance host header line ﬁrst version http did include host header line severe limitation web ing company example consider web hosting company want serve physical server web site contain document client sends request http orhttp http request contains following line parsing line server determine ﬁle requested thanks host header line server know request http http host header impossible host header line allowed web hosting company develop business supporting large number independent web server physical server status line http response begin version http used server usually deﬁned rfc deﬁned rfc followed digit status code additional information english http status code similar structure reply code used smtp status code starting digit valid response ok indicates http request successfully processed server response valid status code starting digit requested document longer available server moved permanently indicates requested document longer available server alocation header containing new uri requested document inserted http response modiﬁed used response http request containing header status line used server document stored server recent date indicated header status code starting digit server detected error http request sent client bad request indicates syntax error http request indicates requested document doe exist server protocol saylor url http saylor foundation computer networking principle protocol practice release status code starting digit error server internal server error indicates server process request error server http request http response mime document refers representation document mime header indicating type document size illustration transcript show http request http sponding http response http request sent using curlcommand line tool header line contains information client software mime document attached http request end blank line host http response indicates version server software used module included modiﬁed header indicates requested document modiﬁed week request html document shown attached response note blank line header http response attached mime document server header line truncated output ok date mon mar gmt server truncated tue mar gmt doctype html public http initially designed share text document reason ease tation client server designer http chose open tcp connection http request implies client open tcp connection uri want retrieve server illustrated ﬁgure web page containing text document reasonable design choice client usually remains idle human user reading retrieved document figure http underlying tcp connection web evolved support richer document containing image opening tcp connection uri performance problem html web page include dozen image forcing client open tcp connection component web page important drawback client server exchange packet open close tcp connection later increase network overhead total delay completely retrieving component web page second large number established tcp connection performance bottleneck server problem solved extending http support persistent tcp connection rfc persistent connection tcp connection client send http request illustrated ﬁgure chapter application layer saylor url http saylor foundation computer networking principle protocol practice release figure http persistent connection allow client server control utilisation persistent tcp connection http rfc deﬁnes new http header connection header used argument client indicate expects underlying tcp connection persistent header used close argument indicates entity sent close underlying tcp connection end http response header used server inform client agrees use persistent connection typical contains parameter maximum number request server agrees serve underlying tcp connection timeout second server close idle connection example show operation persistent tcp connection retrieve uris stored server connection established client sends ﬁrst request connection header request persistent connection host macintosh u intel mac o x connection server reply connection header indicates accepts maximum http request connection close connection remains idle second ok date fri mar gmt server freebsd connection html client sends second request style sheet retrieved web page host referer http macintosh u intel mac o x connection protocol saylor url http saylor foundation computer networking principle protocol practice release server reply requested style sheet maintains persistent connection note server accepts remaining http request persistent connection ok date fri mar gmt server freebsd mon apr gmt connection client automatically request web server s displayed browser server doe contain uri reply status underlying tcp connection closed immediately host referer http macintosh u intel mac o x connection date fri mar gmt server freebsd connection doctype html public html illustrated client send http request persistent tcp connection important note http request considered independent server http request implies request include header line required server understand request independence request important design choice http consequence design choice server process http request doesn t use information contained request explains client add header http request sends persistent tcp connection practice server want provide content tuned user example server provide information language server want provide advertisement targeted different type user server need maintain information preference user use information produce content matching user s preference http contains mechanism enable solve problem discus ﬁrst solution force user authenticated solution used ftp control ﬁles user access initially user name password included inside uris rfc placing password clear potentially publicly visible uri completely insecure usage deprecated rfc http support extension header rfc used server request authentication client providing credential user name password popular web server force human user remember user password server remembering password acceptable user need access protected content user accept need user password receive targeted advertisement web site visit second solution allow server tune content need capability user rely different type http header example used client icon small icon used represent web server toolbar internet browser microsoft added feature browser taking account standard http discussion cleanly support favorite icon chapter application layer saylor url http saylor foundation computer networking principle protocol practice release indicate preferred language unfortunately practice header usually set based default language browser possible user indicate language prefers use selecting option visited web server widely adopted solution http cooky http cooky initially developed private extension netscape standard rfc nutshell cookie short string chosen server represent given client http header used cookie server receives http request new client http request doe contain cookie header generates cookie client includes header returned http response header contains additional parameter including domain name cookie valid client store received cooky disk time sends http request veriﬁes know cookie domain attache cookie header http request illustrated ﬁgure http cooky work http figure http cooky note privacy issue http cooky http cooky introduced netscape key large website raised discussion concerning potential misuse consider company delivers lot advertisement web site web site wish include s advertisement content add link inside html page used web site able track interest user visit client website use information provide targeted advertisement privacy advocate sued online advertisement company force comply privacy regulation recent related technology raise privacy concern writing simple networked application networked application usually implemented using socket api api designed ﬁrst implemented unix bsd operating sechrest lfjlmt served model apis application networking stack operating socket api popular apis developed example stream api added unix v variant socket api supported programming language textbook devoted user c language consult java implementation socket api described java tutorial section use python implementation socket api illustrate key concept additional information api socket section python documentation writing simple networked application saylor url http saylor foundation computer networking principle protocol practice release socket api quite used need complete control network access application simply need instance retrieve data http simpler apis detailed discussion socket api outside scope section reference cited provide detailed discussion detail socket api starting point interesting compare socket api service primitive discussed previous chapter let ﬁrst consider connectionless service consists following primitive destination message used send message speciﬁed destination socket api corresponds send method message issued transport service deliver message application socket api corresponds return recv method called application thedata primitive exchanged service access point socket api equivalent service access point socket socket data structure maintained networking stack used application time need send receive data networking stack socket method python api take main argument address family speciﬁes type address family underlying networking stack used socket parameter corresponds protocol stack default corresponds protocol stack atype indicates type service expected networking stack default corresponds reliable bytestream service corresponds connectionless service simple client sends request server written follows description socket api simple client connectionless service import socket import sys hello world s msg hostip port typical usage application python address host case localhost server running port server ﬁrst operation creation socket parameter speciﬁed creating socket ﬁrst parameter indicates address family second socket type second operation transmission message using sendto server noted sendto take argument message transmitted tuple contains address server port number code shown support protocol stack use protocol stack socket created using address family forcing application oper select creating socket major hurdle deployment usage global internet operating system support application use default long term socket api able handle transparently force application developer specify us important issue socket api supported python force application deal ip address instead dealing directly domain name limitation date early day socket api unix time dns widely available ip address used application rely dns name interact server utilisation dns play important role scale web server content distribution network use domain name application need chapter application layer saylor url http saylor foundation computer networking principle protocol practice release perform dns resolution using getaddrinfo method method query dns build thesockaddr data structure used method socket api python getaddrinfo take argument aname domain dns queried optional port number port number remote server optional address family indicates address family used dns request resp indicates address expected thermore python socket api allows application use indicate able use address optional socket type today s internet host capable supporting application able handle address used parameter method return list tuples containing information create socket import socket example return tuples ﬁrst corresponds sockaddr containing address remote server second corresponds information peculiarity format tuples exactly key information case network layer address port number parameter seldom used used build simple client query dns contact server using depending address returned method client iterates list address returned dns sends request ﬁrst destination address create socket strategy course possible example host running network prefer use example happy eyeball approach discussed ietf example mention web browser try use ﬁrst address returned answer small delay millisecond second address tried import socket import sys hello world hostname port protocol canonicalname try s s print create socket continue ifsis msg sockaddr break described utilisation socket api write simple client using connectionless transport service let closer look reliable byte stream transport service explained service invoked creating socket type socket created client typically connect remote server send data wait answer eventually close connection operation performed calling following method operating system today default prefer use dns return address http detailed information writing simple networked application saylor url http saylor foundation computer networking principle protocol practice release method take sockaddr data structure typically returned argument fail raise exception remote server reached method take string argument return number byte actually sent string transmitted sequence consecutive byte remote server application expected check value returned method resend byte send method take integer argument indicates size buffer allocated receive data important point note utilisation method run bytestream service return byte size buffer provided application application need collect received data guarantee data sent remote host using single method received destination single method method used release underlying connection platform possible specify direction transfer released release outgoing direction release direction method used close socket call underlying connection open method possible write simple http client client operates writes homepage remote server standard output report number call used retrieve simple http client retrieves page web site import socket sys iflen len print usage hostname port hostname iflen port size data read web server re hostname port af socktype proto canonname sa create socket try af socktype proto continue connect remote host try print trying sa msg socket failed continue ifs client indicate number call vary run various factor inﬂuence number call required retrieve information server ll discus having explained operation underlying transport protocol chapter application layer saylor url http saylor foundation computer networking principle protocol practice release print connected finished readbuf iflen data print repr data print data received count recv call break mentioned socket api interface transport service common simple task like retrieving document web simpler solution example python standard library includes apis implementation various application layer protocol including http example httplib module used easily access document http simple http client retrieves page web site using standard httplib library import httplib sys iflen len print usage hostname port path hostname iflen port int port conn hostname port path print response s print module allows programmer directly use url simpler directly using socket simplicity advantage using library allow programmer manipulate concept want content pointed url include feature transparent support utilisation tlsor second type application written using socket api server server typically run forever waiting process request coming remote client server using connectionless typically start creation socket socket created networking stack networking stack default server willing use networking stack create thread handle socket handle socket unfortunately impossible deﬁne socket receive data networking stack time python socket api server using connectionless service typically use method socket api addition discussed used bind socket port number optionally ip address server bind socket available interface server situation server writing simple networked application saylor url http saylor foundation computer networking principle protocol practice release prefer bound speciﬁc ip address example server running smartphone want bound ip address wifi interface interface expensive used receive data underlying networking stack method return sender s address received data code illustrates simple server running connectionless transport service simply print standard output received message server us networking stack import socket sys true data addr stop print stopping server print received addr message data server us reliable byte stream service built socket api server start creating socket bound port chosen server server call method informs underlying networking stack number transport connection attempt queued underlying networking stack waiting accepted processed server server typically thread waiting method method return soon connection attempt received underlying stack return socket bound established connection address remote host method possible write simple web server return request request extremely simple http server import socket sys time server run ip address default used root priviledges buffer size s try print starting http server port port host print bind port port maximum queued connection true real server multithreaded catch exception conn addr print connection addr indata wait line received data buflen request real server serve file chapter application layer saylor url http saylor foundation computer networking principle protocol practice release type http request d b y h m s date server server far web server real web server use multiple thread io process large number concurrent furthermore need handle error happen receiving data transport connection outside scope section additional information complex networked application example provides discussion utilisation socket api python remains excellent source information socket api summary chapter began describing model described important family protocol application layer internet identiﬁes host using bit bit using address directly inside application difﬁcult human use explained domain allows mapping name corresponding address described dns protocol run udp naming hierarchy discussed oldest application internet electronic mail described format email message described smtp protocol used send email message pop protocol used email recipient retrieve email message server finally explained protocol used world wide web hypertext transfer protocol particular exercise section contains exercise small challenge application layer protocol domain domain dns play key role internet today allows application use fully qualiﬁed domain name fqdn instead address tool allow perform query dns server exercise use digwhich installed unix system typical usage dig follows dig server type fqdn ip address dns server resolver type dns record requested query nsfor nameserver afor address aaaa address mxfor mail relay fully qualiﬁed domain queried ip address resolvers digimplementation using relies production quality web server software available apache complex widely used thttpd andlighttpd complex source code probably easier understand linux machine description section digmanpage tell digﬁnds list nameservers query summary saylor url http saylor foundation computer networking principle protocol practice release ip address corresponds type dns query doe digsend obtain information type dns request need send obtain nameservers responsible given domain nameservers responsible domain located possible use query run parameter digqueries root dns server retrieves list name root dns server technical reason different root dns server information available text ﬁle http ip address server queried using assume residing network dns resolver need start query dns root use digto send query root server ﬁnd ip address dns server s n record responsible domain use digto send query dns server ﬁnd ip address dns server s n record responsible continue ﬁnd server responsible lifetime associated ip address perform analysis popular website lifetime associated ip address perform request time receive answer explain lifetime associated dns reply use digto ﬁnd mail relay used domain ttl record use option using dig explain preference used mxrecords ﬁnd information mx record rfc use digto query address dns record aaaa following host digis run header section output indicates idthe dns identiﬁer used send query doe implementation diggenerates random identiﬁers dig mx dig mx global option printcmd got answer header opcode query status noerror id dns implementation digand importantly resolver bind orunbound check received dns reply contains identiﬁer dns request sent important imagine attacker able send forged dns reply example associate ip address attack dns implementation dns request containing identiﬁer dns request containing identiﬁers incremented request dns request containing random identiﬁers obtain additional information root dns server http chapter application layer saylor url http saylor foundation computer networking principle protocol practice release dns protocol run udp tcp dns server prefer use udp consumes fewer resource server tcp useful large answer expected large answer force utilisation tcp using dig use tcp udp query root dns server faster receive answer tcp udp internet email protocol internet protocol protocol client sends request line ascii text terminated crlf server reply line ascii text using ascii message advantage compared protocol rely binary encoded message message exchanged client server easily understood developer network engineer simply reading message easy write small prototype implement protocol possible test server manually using telnet telnet protocol allows obtain terminal remote server telnet open tcp connection remote server port telnet implementation allow user specify alternate port telnet host port used port number parameter telnet open tcp connection remote host speciﬁed port telnet used test server using protocol tcp note need stop running telnet session work sent telnet remote host tcp connection telnet implementation type freeze tcp connection return telnet interface assume alice sends email alice account bob us bob protocol involved transmission email question alice sends email friend trudy trudy advent webmail feature rich mailer email written read using command line tool server using account use command line tool send email host server store local email directory ﬁle user check content mail ﬁle try understand line added server header email use preferred email tool send email message containing single line text email tool ability source message use function look message sent message received ﬁnd explanation line added single line ﬁrst version smtp protocol deﬁned rfc current standard smtp deﬁned inrfc considering rfc main command smtp using smtp recognise positive reply negative smtp server daemon process fail bug lack resource memory network administrator install regularly connect server check operating correctly simple solution open tcp connection port smtp server s connection established implies process listening reply sent smtp server type following command telnet rfc smtp evolved lot notably growing usage email need protect email spammer unlikely able explain additional line ﬁnd email header ll discus shorter description smtp protocol wikipedia http monitoring tool available nagios popular open source monitoring using telnet connect remote host port work network spam problem ispnetworks allow customer use port tcp directly force use isp s mail relay forward email thanks software sending spam installed pc isp s customer software able send huge spam connect ﬁxed station ingi s lab blocked exercise saylor url http saylor foundation computer networking principle protocol practice release warning nottry random smtp server exercise proposed section run smtp server dedicated exercise try production smtp server administrator server angry continue smtp session started sending greeting command helo followed fully qualiﬁed domain host terminate session sending quit command minimum smtp session allows verify smtp running doe imply mail delivered example large smtp server use database store email address serve verify correct operation server possibility use vrfy command open smtp session lab s smtp server use command verify account active know basic opening closing smtp session send email manually using mail rcpt anddata command use command manually send email forget include andsubject line header using smtp possible send email contains exactly following ascii art email agent allow send email cc bcc recipient doe smtp server support type recipient early day email read using tool advanced mail reader pine orelm today email stored dedicated server retrieved using protocol orimap user s viewpoint list advantage drawback protocol tcp protocol support different port number port number reserved application ofﬁcial repository reserved port number maintained internet assigned number authority iana http using formation default port number protocol doe run udp tcp post ofﬁce protocol pop simple protocol described rfc pop operates phase ﬁrst phase authorization phase client provides username password second phase transaction phase client retrieve email phase update phase client ﬁnalises transaction main pop command parameter pop server return answer easily determine answer positive negative smartphones user want avoid downloading large email slow wireless connection pop client download email smaller kbytes open pop session lab s pop server using username word received verify username password accepted server lab s pop server contains script run minute sends email message account email folder use pop retrieve email provide secret message teaching assistant hypertext transfer protocol main method supported ﬁrst version hypertext transfer protocol http deﬁned rfc main type reply sent http administrator responsible web server want monitor server check running correctly http server us tcp port simplest solution open unix host subset port assignment placed section rfc section rfc chapter application layer saylor url http saylor foundation computer networking principle protocol practice release tcp connection port check tcp connection accepted remote host http protocol easy write small script downloads web page server compare content expected use telnet verify web server running host instead using telnet port possible use tool curlusecurlwith traceﬁle option store traceﬁle information exchanged curl accessing server version http used curl explain different header placed curl request explain different header response http speciﬁed rfc force client use host request http doe deﬁne host header implementation support using telnet andcurlretrieve ﬁrst page http webserver sending http request host header explain difference using dig curl determine physical host http http andhttp hosted use curlwith ﬁlename retrieve http explain browser ﬁrefox retrieving url header sent http request allow client provide additional information server header language header allows indicate preferred language example curl en http send http http request indicating english en preferred language doe google provide different page french fr walloon wa question http given size homepage use diff compare different page retrieved compare size http andhttp web page downloading curl http cookie list advantage drawback using cooky web server responsible http government built datacenters ing server antwerp namur website contains static information objective balance load different server ensures service remains datacenters disconnected internet ﬂooding natural disaster technique use achieve goal minimum command sent http server followed crlf blank line dig ﬁnd ip address used list available language tag http additional information support multiple language internet protocol rfc exercise saylor url http saylor foundation computer networking principle protocol practice release chapter application layer saylor url http saylor foundation chapter transport layer transport layer built network layer important know key feature network layer service type network layer service connectionless connectionless network layer service widespread main characteristic connectionless network layer service transfer sdus limited connectionless network layer service discard sdus connectionless network layer service corrupt sdus connectionless network layer service delay reorder duplicate sdus figure transport layer reference model imperfection connectionless network layer service clearer explained network layer chapter point let simply assume imperfection occur trying understand occur transport protocol used network service class iso transport protocol deﬁned widely used discus utilisation network service book chapter organised follows ﬁrst explain possible provide reliable transport service unreliable connectionless network service explain main mechanism protocol study transport protocol used internet begin user datagram protocol udp provides simple connectionless transport service transmission control protocol tcp including congestion control mechanism principle reliable transport protocol section depict reliable transport protocol running connectionless network layer service ﬁrst assume network layer provides perfect service connectionless network layer service corrupts sdus network layer service unable carry sdus larger kbytes saylor url http saylor foundation computer networking principle protocol practice release connectionless network layer service discard sdus connectionless network layer service delay reorder duplicate sdus connectionless network layer service support sdus size remove assumption order better understand mechanism used solve imperfection reliable data transfer perfect network service transport layer entity interacts user application layer entity network layer according reference model interaction performed using primitive simplify presentation avoid confusion primitive issued user transport layer entity issued transport layer entity use following terminology interaction user transport layer entity represented using classical primitive interaction transport layer entity network layer service represented using send instead andrecvd instead illustrated ﬁgure transport send recvd figure interaction transport layer user network layer provider running perfect connectionless network service transport level entity simply issue send sdu arrival sdu similarly receiver issue sdu receipt recvd sdu simple protocol sufﬁcient single sdu sent unfortunately sufﬁcient ensure reliable delivery sdus consider case client sends ten sdus server server faster client able receive process segment sent client deliver content user server slower client problem arise transport layer entity contains buffer store sdus received application sent network service application faster network layer buffer operating suspends application let transport entity transmission queue transport entity us buffer store segment received network layer processed application application slow process data buffer transport entity able accept anymore segment network layer buffer transport entity limited overﬂow transport entity forced application layer server implemented process network transport layer hand usually implemented inside operating memory use limited memory allocated entire kernel chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release segment b figure simplest transport protocol discard received segment solve problem transport protocol include feedback mechanism allows receiver inform sender processed segment sent feedback required network layer provides perfect service include feedback transport protocol process type segment data segment carrying sdu control segment carrying acknowledgment indicating previous segment processed correctly type segment distinguished using segment composed part header contains bit set data segment set control segment payload contains sdu supplied user application transport entity modelled ﬁnite state machine containing state receiver state sender ﬁgure provides graphical representation state machine sender receiver figure finite state machine simplest transport protocol principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release fsm show sender wait acknowledgement receiver able transmit sdu ﬁgure illustrates exchange segment host d b b b c ok d b c ok figure time sequence diagram illustrating operation simplest transport protocol reliable data transfer imperfect network service transport layer deal imperfection network layer service type fections considered transport layer segment corrupted transmission error segment lost segment reordered duplicated deal type imperfection transport protocol rely different type mechanism ﬁrst problem transmission error segment sent transport entity processed network datalink layer ﬁnally transmitted physical layer layer imperfect example physical layer affected different type error random isolated error value single bit modiﬁed transmission error random burst error value nconsecutive bit changed transmission error random bit creation random bit removal bit added removed transmission error solution protect transmission error add redundancy segment sent formation theory deﬁnes mechanism used transmit information transmission channel affected random error mechanism add redundancy information sent allow receiver detect correct transmission error detailed discussion mechanism outside scope chapter useful consider simple mechanism understand operation limitation information theory deﬁnes coding scheme different type coding scheme let focus coding scheme operate binary string coding scheme function map information encoded string ofmbits string nbits simplest coding scheme parity coding coding scheme take anmbits source string produce bit coded string ﬁrst mbit coded string bit source string bit coded string chosen coded string contain number bit set example encoded encoded chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release parity scheme used ram encode character sent serial line easy coding scheme allows receiver detect single transmission error correct bit error receiver able detect error coding scheme allow receiver correct transmission error example consider coding scheme encodes source bit follows encoded encoded example consider sender sends bit error receiver receive case receiver decode received bit pattern contains majority bit set bit error receiver able anymore recover transmission error simple coding scheme force sender transmit bit source bit allows receiver correct single bit error advanced coding system allow recover error used type physical layer transport protocol use error detection scheme widely used transport protocol rely error correction scheme detect error segment usually divided part aheader contains ﬁelds used transport protocol ensure reliable delivery header tains checksum cyclical redundancy check crc used detect transmission error apayload contains user data passed application layer segment header include length indicates total length segment length payload simplest error detection scheme checksum checksum basically arithmetic sum byte segment composed different type checksum example bit checksum computed arithmetic sum byte header trailer segment checksum computed sender sending segment receiver veriﬁes checksum reception segment receiver discard segment received invalid checksum checksum easily implemented software error detection capability limited cyclical redundancy check crc better error detection capability require cpu implemented software note checksum crcs protocol protocol suite rely simple internet checksum order verify received segment affected transmission error despite popularity ease implementation internet checksum available checksum mechanism cyclical redundancy check crc powerful error detection scheme used notably disk datalink layer protocol ﬁle format zip png easily implemented efﬁciently hardware better capability internet checksum ﬁrst transport protocol designed crcs considered software implementation checksum mechanism used instead community chose internet checksum osi community chose fletcher checksum efﬁcient technique quickly compute crcs software sctp protocol initially chose checksum replaced recently crc rfc second imperfection network layer segment lost later main cause packet loss network layer lack buffer intermediate router receiver sends acknowledgement segment having received data segment simplest solution deal loss use retransmission timer sender sends segment start retransmission timer value retransmission timer larger delay transmission data segment reception corresponding acknowledgement retransmission timer expires sender assumes data segment lost retransmits illustrated ﬁgure unfortunately retransmission timer sufﬁcient recover segment loss let consider example situation depicted acknowledgement lost case sender retransmits principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release d b b c ok d b b c ok d b start timer timer expireslost segmentstart timer cancel timer figure using retransmission timer recover segment loss data segment acknowledged unfortunately illustrated ﬁgure receiver considers retransmission new segment payload delivered user d b b c ok d b b c ok d b start timer timer expires lost segmentstart timer cancel timer c ok b figure limitation retransmission timer solve problem transport protocol associate sequence number data segment sequence number ﬁelds header data segment use notation d s indicate data segment sequence number ﬁeld set acknowledgement contain sequence number indicating data segment acknowledging use ok indicate acknowledgement segment conﬁrms reception d s sequence number encoded bit string ﬁxed length simplest transport protocol alternating bit protocol abp alternating bit protocol us single bit encode sequence number implemented easily sender receiver require state finite state machine chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release wait d wait wait d recvd c nak recvd c timer expires send d sdu crc re recvd c nak recvd c timer expires send d sdu crc re sdu send d sdu crc star recvd c recvd c sdu send d sdu crc star corrupted segment discarded statesall corrupted segment discarded state figure alternating bit protocol sender fsm initial state sender wait d state sender wait ﬁrst data segment sends us sequence number having sent segment sender wait knowledgement segment retransmitted expiration retransmission timer acknowledgement incorrect sequence number received receiver ﬁrst wait d segment contains correct crc pass sdu user sends segment contains invalid crc immediately discarded receiver wait d state receive duplicate d data segment invalid crc case return segment allow sender recover possible loss previous segment note dealing corrupted segment receiver fsm alternating bit protocol discard segment contain invalid crc safest approach received segment completely different segment sent remote host receiver attempt extracting information corrupted segment know portion segment affected error ﬁgure illustrates operation alternating bit protocol alternating bit protocol recover transmission error segment loss important drawback consider host directly connected satellite link millisecond propagation delay host send bit segment maximum throughput achieved alternating bit protocol segment millisecond ignore transmission time acknowledgement selective repeat overcome performance limitation alternating bit protocol transport protocol rely pipelining technique allows sender transmit consecutive segment forced wait acknowledgement segment data segment contains sequence number encoded nbits ﬁeld pipelining allows sender transmit segment higher rate need ensure receiver doe principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release recvd d sdu crc isok crc sdu send c cvd d sdu crc isok crc sdu data ind sdu wait d send c recvd d sdu crc isok crc sdu data ind sdu proce s send c recvd d sdu crc isok crc sdu send c w ai t d process ok corrupted segment discarded statesall corrupted segment discarded state figure alternating bit protocol receiver fsm d b data req data ind b c d b c c b d b c c d c d c retransmission timer duplicate detected retransmission timer figure operation alternating bit protocol figure pipelining improve performance transport protocol chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release overloaded segment sent sender correctly received destination transport protocol rely pipelining allow sender transmit wunacknowledged segment forced wait acknowledgement receiving entity implemented using sliding window sliding window set consecutive sequence number sender use transmitting segment forced wait acknowledgement ﬁgure show sliding window containing ﬁve segment sequence number used send segment sequence number remain sliding window sliding window said closed sequence number contained sliding window used figure sliding window ﬁgure illustrates operation sliding window sliding window shown contains ments sender transmit segment forced wait acknowledgement sliding window move higher sequence number reception acknowledgement ﬁrst acknowledgement received allows sender sliding window right sequence number available sequence number used later transmit sdu figure sliding window example practice segment header encodes sequence number nbits string sequence number used implies sequence number used different segment sliding window wrap illustrated ﬁgure assuming used encode sequence number segment header note reception sender slide window use sequence number unfortunately segment loss disappear transport protocol using sliding window recover segment loss sliding window protocol deﬁne heuristic detect segment loss aretransmission strategy retransmit lost segment principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release figure utilisation sliding window modulo arithmetic simplest sliding window protocol us recovery intuitively operates follows receiver simple possible accepts segment arrive nreceiver discard segment receives receives data segment return acknowledgement containing sequence number segment received acknowledgement said cumulative receiver sends acknowledgement sequence number x implicitly acknowledges reception segment sequence number earlier key advantage cumulative acknowledgement easy recover loss acknowledgement consider example receiver received segment sent unfortunately lost thanks cumulative acknowledgement receiver receives know segment correctly received ﬁgure show fsm simple receiver receiver us variable lastack expected sequence number lastack sequence number data segment acknowledged receiver accepts segment received sequence maxseq number different sequence number recvd d sdu crc isok crc sdu data ind sdu recvd d t sdu crc isok crc sdu disc ard sdu send c ok lastack crc send c ok crc ack maxseq wait process sdu okall cor rupted segment discarded state figure receiver fsm sender simple us sending buffer store entire sliding window segment sent increasing sequence number modulo maxseq sender wait size sliding window ﬁxed given protocol negotiated connection establishment phase ll later possible change size sliding window connection s lifetime chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release acknowledgement sending buffer sender receives acknowledgement remove sending buffer acknowledged segment us retransmission timer detect segment loss simple sender maintains retransmission timer connection timer started ﬁrst segment sent sender receives acknowledgement restarts retransmission timer unacknowledged segment sending buffer retransmission timer expires sender assumes unacknowledged segment currently stored sending buffer lost retransmits unacknowledged segment buffer restarts retransmission timer corrupted segment arediscarded statesall corrupted segment arediscarded state recvd c ok t crc crcok c ok t crc remove acked seqs buffer unpack maxseq timer expires sdu buffer send d sdu crc sdu size buffer w seq sdu send d seq sdu crc maxseq figure sender fsm operation illustrated ﬁgure ﬁgure note reception segment d c receiver return cumulative acknowledgement c acknowledges segment received sequence lost segment retransmitted expiration retransmission timer figure example main advantage easily implemented provide good performance segment lost loss performance quickly drop reason receiver doe accept segment sender retransmits unacknowledged segment detected loss selective repeat better strategy recover segment loss intuitively selective repeat allows receiver accept segment furthermore selective repeat sender detects loss retransmits segment lost segment correctly received principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release aselective repeat receiver maintains sliding window wsegments store buffer segment receives ﬁgure show ﬁve segment receive window receiver received segment figure receiving window selective repeat aselective repeat receiver discard segment having invalid crc maintains variable lastack sequence number segment received receiver includes value oflastack acknowledgement sends protocol allow selective repeat receiver acknowledge segment received example placing list sequence number correctly received segment acknowledgement lastack value selective repeat receiver receives data segment ﬁrst veriﬁes segment inside receiving window yes segment placed receive buffer received segment discarded acknowledgement containing lastack sent sender receiver remove consecutive segment starting lastack receive buffer payload segment delivered user lastack receiving window updated acknowledgement acknowledging segment received sequence sent theselective repeat sender maintains sending buffer store wunacknowledged segment segment sent long sending buffer implementation selective repeat sender possible simple implementation associate retransmission timer segment timer started segment sent cancelled reception acknowledgement cover segment retransmission timer expires corresponding segment retransmitted retransmission timer restarted acknowledgement received segment covered acknowledgement removed sending buffer sliding window updated ﬁgure illustrates operation selective repeat segment lost ﬁgure c ok x used indicate segment including sequence number xhave received correctly figure selective repeat example pure cumulative acknowledgement work strategy cumulative knowledgements selective repeat sender easily determine data segment correctly ceived data segment lost example ﬁgure second c doe inform chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release explicitly sender reception d c sender retransmit segment ready received possible solution improve performance selective repeat provide additional information received segment acknowledgement returned receiver example receiver add returned acknowledgement list sequence number segment received acknowledgement called selective acknowledgement illustrated ﬁgure ﬁgure sender receives c know segment including d correctly received know segment d received cancel mission timer associated segment segment removed sending buffer reception cumulative acknowledgement c ﬁgure cover segment note maximum window size andselective repeat transport protocol us nbits encode sequence number send segment ensure reliable delivery segment andselective repeat use sending window segment consider ﬁrst assume sender sends segment received destination returned acknowledgement lost sender retransmit segment accepted receiver delivered second time user easy problem avoided maximum size sending window similar problem occurs selective repeat receiver accepts segment sending window sufﬁcient ensure reliable delivery segment easily shown avoid problem selective repeat sender use window larger orselective repeat used transport protocol provide reliable data transfer unreliable network layer service assumed size sliding window ﬁxed entire lifetime connection practice transport layer entity usually implemented operating share memory part furthermore transport layer entity support possibly hundred thousand transport connection time implies memory used support sending receiving buffer transport connection change lifetime transport protocol allow sender receiver adjust window size deal issue transport protocol allow receiver advertise current size receiving window acknowledgement sends receiving window advertised receiver bound size sending buffer used sender practice sender maintains state variable swin size sending window adjusted rwin size receiving window advertised receiver time number unacknowledged segment larger min swin rwin utilisation dynamic window illustrated ﬁgure receiver adjust advertised receive window based current memory consumption limit bandwidth used sender practice receive buffer shrink application able process received data quickly case receive buffer completely advertised receive window shrink sender receives acknowledgement receive window set blocked receives acknowledgement positive receive window unfortunately shown ﬁgure loss acknowledgement cause deadlock sender wait acknowledgement receiver waiting data segment solve problem transport protocol rely special timer persistence timer timer started sender receives acknowledgement advertising receive window set timer expires sender retransmits old segment order force receiver send new acknowledgement send current receive window size conclude description basic mechanism transport protocol need discus impact segment arriving wrong order consecutive segment reordered receiver relies sequence number reorder receive buffer unfortunately transport protocol reuse sequence number different segment segment delayed prolonged period time accepted receiver illustrated ﬁgure segment d b delayed discussion sending buffer change receive window shrink happen sender sent segment anymore inside window segment discarded receiver sender retransmit later principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release b data req b data req c data req d data new buffer available b d c c d b c d c d d figure dynamic receiving window figure risk deadlock dynamic window chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release figure ambiguity caused excessive delay deal problem transport protocol combine solution use bit encode sequence number segment header increase overhead increase delay transmission different segment having sequence number second transport protocol require network layer enforce maximum segment lifetime msl network layer ensure packet remains network msl second internet msl minute rfc note limit maximum bandwidth transport protocol us nbits encode sequence number send msl second transport protocol need send data direction reduce overhead caused ments transport protocol use piggybacking thanks technique transport entity place inside header data segment sends acknowledgement receive window advertises opposite direction data ﬂow main advantage piggybacking reduces overhead necessary send complete segment carry acknowledgement illustrated ﬁgure acknowledgement number underlined data segment piggybacking used data ﬂows direction receiver generate pure acknowledgement doe send data opposite direction shown ﬁgure figure piggybacking chapter internet doe strictly enforce msl reasonable expect packet internet remain network minute exception rule rfc implementation described http real link supporting rfc internet principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release point discussed data transfer mechanism used transport protocol provision byte stream service indicated ﬁrst chapter byte stream service widely used transport layer transport protocol provide byte stream service associate sequence number byte sent place sequence number ﬁrst byte segment segment s header illustrated ﬁgure example sender chooses byte ﬁrst segment graphical reason real transport protocol use larger segment practice division byte stream segment combined loss retransmissions explain byte stream service doe preserve sdu boundary figure provision byte stream service connection establishment release point discussed transport protocol mechanism used establish release transport connection explained ﬁrst chapter service primitive used establish connection simplest approach establish transport connection deﬁne special control segment crandca crsegment sent transport entity wish initiate connection remote entity wish accept connection reply sending casegment transport connection considered established casegment received data segment sent direction figure naive transport connection establishment unfortunately scheme sufﬁcient reason transport entity usually need maintain transport connection remote entity different user process running given transport entity request establishment transport connection different user attached remote transport entity different transport connection clearly separated ensure data connection passed connection achieved using connection identiﬁer chosen transport entity placed inside segment allow entity receives segment easily associate established connection chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release second network layer imperfect crorcasegment lost delayed suffer transmission error deal problem control segment protected using crc checksum detect transmission error furthermore casegment acknowledges reception crsegment cr segment protected using retransmission timer unfortunately scheme sufﬁcient ensure reliability transport service consider example transport connection single important transfer money transfer bank account sent connection start crsegment acknowledged casegment data segment sent acknowledged connection terminates unfortunately network layer service unreliable delay combined retransmissions lead situation depicted ﬁgure delayed crand data segment connection accepted receiving entity valid segment corresponding data delivered user duplicating sdus acceptable transport protocol solve problem figure duplicate transport connection avoid duplicate transport protocol require network layer bound maximum segment lifetime msl organisation network guarantee segment remains network longer msl second today s internet msl expected minute avoid duplicate transport connection transport protocol entity able safely distinguish duplicate crsegment new cr segment forcing transport entity remember transport connection established past classical solution avoid remembering previous transport connection detect duplicate use clock inside transport entity transport clock following characteristic transport clock implemented kbit counter clock cycle msl furthermore transport clock counter incremented clock cycle connection establishment clock illustrated ﬁgure transport clock continue incremented transport entity stop reboots figure transport clock noted transport clock need usually synchronised clock precisely synchronising clock interesting problem outside scope document detailed discussion synchronising clock principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release thetransport clock combined exchange segment called way handshake detect duplicate way handshake occurs follows initiating transport entity sends crsegment segment request establishment transport connection contains connection identiﬁer shown ﬁgure sequence number ﬁgure value extracted transport clock transmission crsegment protected retransmission timer remote transport entity process crsegment creates state connection tempt stage remote entity doe know new connection attempt duplicate segment return casegment contains acknowledgement number conﬁrm reception crsegment ﬁgure sequence number ﬁgure value extracted transport clock stage connection established initiating entity receives casegment acknowledgement number segment conﬁrms remote entity correctly received casegment transport connection considered established initiating entity numbering data segment start sequence number sending data segment initiating entity edge received casegments sending casegment remote entity considers transport connection established having received segment acknowledges casegment numbering data segment sent remote entity start sequence number way handshake illustrated ﬁgure figure handshake thanks way handshake transport entity avoid duplicate transport connection illustrated scenario ﬁrst scenario remote entity receives old crsegment considers crsegment connection establishment attempt reply sending casegment initiating host match received casegment previous connection attempt sends control segment reject ﬁgure cancel spurious connection attempt remote entity cancel connection attempt reception control segment second scenario initiating entity sends crsegment doe reach remote entity receives duplicate casegment previous connection attempt duplicate casegment contain valid acknowledgement crsegment sequence number crsegment extracted transport clock initiating entity casegment rejected crsegment retransmitted expiration retransmission timer scenario likely important consider remote entity receives old cr segment note connection attempt acknowledges sending casegment initiating entity chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release figure handshake recovery duplicate cr figure handshake recovery duplicate ca principle reliable transport protocol saylor url http saylor foundation computer networking principle protocol practice release doe matching connection attempt reply sending reject unfortunately segment reach remote entity instead remote entity receives retransmission older casegment contains sequence number ﬁrst crsegment casegment accepted remote entity conﬁrmation transport connection acknowledgement number value sequence number ﬁrst casegment figure handshake recovery duplicate crandca discussed service mentioned type connection release abrupt release andgraceful release ﬁrst solution release transport connection deﬁne new control segment drsegment consider connection released segment sent received illustrated ﬁgure figure abrupt connection release entity sends drsegment know entity sent data connection sdus lost abrupt connection release second method release transport connection release independently direction data transfer user transport service sent sdus performs direction data transfer transport entity sends control segment request release connection delivery previous sdus remote user usually placing drthe sequence number delivering previous remote entity conﬁrms reception thedrsegment release corresponding direction data transfer returning acknowledgement illustrated ﬁgure chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release figure graceful connection release user datagram protocol user datagram protocol udp deﬁned rfc provides unreliable connectionless transport service unreliable network layer connectionless service main characteristic udp service udp service deliver sdus larger udp service doe guarantee delivery sdus loss desquencing occur udp service deliver corrupted sdu destination compared connectionless network layer service main advantage udp service allows application running host exchange sdus application running remote host let consider host client server network layer service allows client send information server application running client want contact particular application running server additional addressing mechanism required ip address identiﬁes host order differentiate application running host additional addressing provided port number server using udp enabled host server register port number port number used client contact server process udp ﬁgure show typical usage udp port number client process us port number server process us port number client sends request identiﬁed originating port number client host destined port number server host server process reply request server s udp implementation send reply originating port server host destined port client host udp us single segment format shown ﬁgure udp header contains ﬁelds bit source port bit destination port bit length ﬁeld bit checksum port number encoded bit ﬁeld different server process bound different udp port time given server practice limit reached worth noticing implementation divide range allowed udp port number different range limitation fact network layer transport packet larger kbytes udp doe include mechanism split sdu sending user datagram protocol saylor url http saylor foundation computer networking principle protocol practice release figure usage udp port number figure udp header format privileged port number port ephemeral port number port registered port number ofﬁcially port unix variant process having administrator privilege bound port number smaller server dns ntp orrpc use privileged port number client need use udp usually doe require speciﬁc port number case udp implementation allocate ﬁrst available port number ephemeral range range registered port number used server theory developer network server register port number ofﬁcially iana developer note computation udp checksum checksum udp segment computed pseudo header containing source ip address destination ip address bit bit ﬁeld containing signiﬁcant byte set second set length udp segment lower byte entire udp segment including header allows receiver detect error affecting ip source destination address placed ip layer violation layering principle date time udp ip element single protocol noted checksum algorithm computes value value transmitted udp segment checksum set segment transmitter did compute checksum transmission nfs server chose disable udp checksum performance reason caused problem difﬁcult diagnose practice rarely good reason disable udp checksum detailed discussion implementation internet checksum rfc type application rely udp rule thumb udp used application delay minimised loss recovered application ﬁrst class application application client sends short request expects quick short answer dns example discussion ephemeral port range used different implementation http chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release udp application used wide area local area network distributed system rely remote procedure rpc used udp unix environment network file nfs built rpc run frequently udp second class application interactive computer game need frequently exchange small message player s location recent action game use udp minimise delay recover loss class application multimedia application interactive v oice ip interactive video ip interactive application expect delay shorter millisecond sender receiver recover loss directly inside application transmission control protocol transmission control protocol tcp initially deﬁned rfc part protocol improved publication original protocol basic protocol remain implementation support rfc today s implementation tcp provides reliable bytestream transport service unreliable connectionless network service provided ip tcp used large number application including email smtp pop imap world wide web http ﬁle transfer protocol ftp ﬁle sharing application remote computer access telnet ssh vnc multimedia application ﬂash global internet application used wide area rely tcp reported tcp responsible data exchanged global internet provide service tcp relies simple segment format shown ﬁgure tcp segment contains header described optionally payload default length tcp header byte tcp header contain option figure tcp header format tcp header contains following ﬁelds source destination port source destination port play important role tcp allow identiﬁcation connection tcp segment belongs client open tcp connection typically selects ephemeral tcp port number source port contact server using server s port number segment sent client connection source destination port server sends segment contain source resp destination port detailed presentation standardisation document concerning tcp rfc researcher analysed utilisation tcp udp global internet y performed collecting packet transmitted given link period hour day analysing header infer transport protocol used type application recent study include http http http transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release destination resp source port segment sent client ﬁgure utilization tcp source destination port tcp connection identiﬁed ﬁve piece information ip address client ip address server port chosen client port chosen server sequence number bit acknowledgement number bit window bit ﬁelds used provide reliable data transfer using protocol tcp bytestream byte stream consumes sequence number utilisation described section tcp reliable data transfer urgent pointer used indicate data considered urgent tcp bytestream rarely used practice described additional detail utilisation pointer rfc rfc ﬂags ﬁeld contains set bit ﬂags indicate segment interpreted tcp entity receiving ﬂag used connection establishment ﬂag used connection release used case problem invalid segment received ack ﬂag set indicates acknowledgment ﬁeld contains valid number wise content acknowledgment ﬁeld ignored receiver ﬂag used urgent pointer ﬂag used notiﬁcation sender indicate receiver pas data received receiving process practice tcp implementation allow tcp user indicate psh ﬂag set real utilization ﬂag checksum ﬁeld contains value internet checksum computed entire tcp segment udp reserved ﬁeld initially reserved future utilization used rfc tcp header length thl data offset ﬁeld bit ﬁeld indicates size tcp header bit word maximum size tcp header byte optional header extension used add optional information tcp header thanks header extension possible add new ﬁelds tcp header planned original cation allowed tcp evolve early eighty detail tcp header extension explained section tcp connection establishment andtcp reliable data transfer rest section organised follows ﬁrst explain establishment release tcp connection discus mechanism used tcp provide reliable bytestream service end section discussion network congestion explain mechanism tcp us avoid congestion collapse tcp connection establishment tcp connection established using handshake connection establishment phase us sequence number acknowledgment number syn ﬂag tcp connection established communicating host negotiate initial sequence number used direction connection tcp entity maintains bit counter supposed incremented chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release figure utilization tcp source destination port microsecond connection client host want open tcp connection server host creates tcp segment syn ﬂag set sequence number set current value bit counter client host s tcp entity reception segment called syn segment server host reply segment containing syn ﬂag set sequence number set current value bit counter server host s tcp entity ack ﬂag set acknowledgment number set sequence number received syn segment incremented tcp entity sends segment having acknowledgment number indicates received data including sequence number xand expecting data having sequence number syn ﬂag set segment having sequence number x implies setting syn ﬂag segment consumes sequence number segment called segment acknowledgment conﬁrms client server correctly received syn segment sequence number segment used server host verify client received segment reception segment client host reply segment containing ack ﬂag set acknowledgment number set sequence number received segment incremented point tcp connection open client server allowed send tcp segment containing data illustrated ﬁgure ﬁgure connection considered established client received segment server considers connection established reception ack segment ﬁrst data segment sent client server sequence number set resp note computing tcp s initial sequence number original tcp speciﬁcation rfc tcp entity maintained clock compute initial sequence number isn placed syn segment isn predictable caused security issue typical security problem following consider server trust host based ip address bit counter speciﬁed rfc bit counter incremented microsecond wrap hour period larger maximum segment lifetime ﬁxed minute internet rfc rfc transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release figure establishment tcp connection allows administrator login host giving consider attacker know particular conﬁguration able send ip packet having client s address source send fake tcp segment server doe receive server s answer predict isnthat chosen server send fake syn segment shortly fake ack segment conﬁrming reception segment sent server tcp connection open use send command server counter attack current tcp implementation add randomness isn solution proposed rfc compute isnas isn m h localhost localport remotehost remoteport secret mi current value tcp clock h cryptographic hash function localhost andremotehost resp localport andremoteport ip address port number local remote host secret random number known server method allows server use different isn different client time measurement performed ﬁrst implementation technique showed difﬁcult implement correctly today s tcp implementation generate good isn server course refuse open tcp connection reception syn segment refusal various reason server process listening destination port syn segment server refuse connection establishment particular client security reason server resource accept new tcp connection time case server reply tcp segment having rst ﬂag set containing sequence number received syn segment acknowledgment number illustrated ﬁgure discus utilization tcp rst ﬂag later tcp connection release figure tcp connection establishment rejected peer tcp connection establishment described state finite state machine shown fsm x resp y indicates transmission segment x resp reception segment y corresponding transition initis initial state client host start initstate sends syn segment enters syn sent state wait segment reply ack segment enters established state data departmental network containing unix workstation common allow user host use rlogin rfc run command workstation network giving password case remote workstation authenticated client host based ip address bad practice security viewpoint chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release figure tcp fsm connection establishment exchanged hand server host start initstate server process start listen destination port underlying tcp entity creates tcp control block queue process incoming syn segment reception syn segment server s tcp entity reply enters syn rcvd state remains state receives ack segment acknowledges segment enters established state apart path tcp connection establishment fsm path corresponds case client server send syn segment open tcp case client server send syn segment enter syn sent state reception syn segment sent host reply sending segment enter syn rcvd state arrives host allows transition established state ﬁgure illustrates simultaneous establishment tcp connection figure simultaneous establishment tcp connection course simultaneous tcp establishment occur source port chosen client equal destination port chosen server happen host serve client server application communicating host use ephemeral port number transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release denial service attack tcp entity open tcp connection creates transmission control block tcb tcb contains entire state maintained tcp entity tcp connection connection establishment tcb contains local ip address remote ip address local port number remote port number current local sequence number sequence number received remote entity mid tcp implementation limit number tcp connection syn rcvd state given time implementation set limit tcbs limit considered sufﬁcient heavily load http server given small delay reception syn segment reception ack segment terminates establishment tcp connection limit tcbs syn rcvd state reached tcp entity discard received tcp syn segment correspond existing tcb limit tcbs syn rcvd state chosen protect tcp entity risk ing memory tcbs syn rcvd state reason new type denial service do attack rfc do attack deﬁned attack attacker render resource unavailable network example attacker cause do attack mbps link used company sending mbps packet link case do attack subtle tcp entity discard received syn segment soon tcbs syn rcvd state attacker simply send syn segment second server reply received segment avoid caught attacker course sending syn segment different address ip addressa tcp implementation tcb entered syn rcvd state remained state second waiting retransmission initial syn segment attack later called syn ﬂood attack server isp named panix ﬁrst affected attack avoid syn ﬂood attack recent tcp implementation longer enter syn rcvd state tion syn segment instead reply directly segment wait reception valid ack implementation trick possible tcp implementation able verify received ack segment acknowledges segment sent earlier storing initial quence number segment tcb solution solve problem known syn cooky compute bit isnas follows high order bit contain low order bit counter incremented slowly low order bit contain hash value computed local remote ip address port random secret known server advantage syn cooky using server doe need create tcb reception syn segment check returned ack segment recomputing syn cookie asending packet different source ip address address allocated host called sending spoofed packet retransmitting ﬁrst syn segment ip provides unreliable connectionless service syn segment sent open tcp connection lost current tcp implementation start retransmission timer send ﬁrst syn segment timer set second ﬁrst retransmission double retransmission rfc tcp implementation enforce maximum number retransmissions initial syn segment explained earlier tcp segment contain optional header extension syn ments option used negotiate parameter utilisation extension basic tcp speciﬁcation ﬁrst parameter negotiated establishment tcp connection maximum segment size ms ms size largest segment tcp entity able process according rfc tcp implementation able receive tcp segment containing byte payload tcp implementation able process larger segment tcp implementation use tcp ms option segment indicate largest segment able process ms value indicates maximum size payload tcp segment client resp server store tcb ms value announced server resp client chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release utilisation tcp option connection establishment enable tcp extension example consider rfc discussed tcp reliable data transfer deﬁnes tcp extension support timestamps larger window client support rfc add rfc option syn segment server understands rfc option wish use reply rfc option segment extension deﬁned rfc used tcp connection server s doe contain rfc option client allowed use extension corresponding tcp header option tcp connection tcp s option mechanism ﬂexible allows extension tcp maintaining compatibility older implementation tcp option encoded using type length value format ﬁrst byte indicates type option second byte indicates total length option including ﬁrst byte byte byte speciﬁc type option rfc deﬁnes maximum segment size ms tcp option understood tcp tations option type length byte contains bit word indicates ms supported sender syn segment ms option used tcp segment having syn ﬂag set rfc deﬁnes special option supported tcp implementation ﬁrst option isend option encoded single byte having value used ensure tcp header extension end bit boundary option encoded single byte having value used tcp header extension contains tcp option aligned bit boundary encoded using tlv format note robustness principle handling tcp option tcp implementation application robustness principle usually attributed jon postel quoted liberal accept conservative send rfc concerning tcp option robustness principle implies tcp implementation able accept tcp option doe understand particular received syn segment able parse received segment crashing segment contains unknown tcp option furthermore server send segment later option proposed client syn segment tcp connection release tcp like transport protocol support type connection release graceful connection release tcp user release direction data transfer abrupt connection release user close direction data transfer tcp entity forced close connection remote host doe reply anymore lack resource abrupt connection release mechanism simple relies single segment having rst bit set tcp segment containing rst bit sent following reason segment received tcp connection rfc extension implementation respond rst segment segment received existing connection invalid header rfc cause corresponding connection closed caused security attack rfc extension implementation send rst segment need close existing tcp nection resource support connection remote host considered unreachable measurement shown usage tcp rst widespread list tcp option http transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release rst segment sent tcp entity contain current value sequence number connection doe belong existing connection acknowledgement number set expected sequence number connection note tcp rst war tcp implementers ensure tcp entity enter tcp rst war host ai sending rst segment response previous rst segment sent host bin response tcp rst segment sent host avoid inﬁnite exchange rst segment carry data tcp entity allowed send rst segment response rst segment normal way terminating tcp connection using graceful tcp connection release nism us fin ﬂag tcp header allows host release direction data transfer thesyn ﬂag utilisation fin ﬂag tcp header consumes sequence number ﬁgure fsm tcp connection release show tcp fsm used tcp connection released figure fsm tcp connection release starting established state main path fsm ﬁrst path host receives segment sequence number xand fin ﬂag set utilisation thefinﬂag indicates byte sequence number x byte byte stream sent remote host data delivered user tcp entity sends ack segment ackﬁeld set acknowledge fin segment fin segment subject retransmission mechanism normal tcp segment particular transmission protected retransmission timer point tcp connection enters state state host send data remote host data sent sends fin segment enter state state tcp entity wait acknowledgement fin segment retransmit unacknowledged data segment retransmission timer expires reception acknowledgement fin segment tcp connection completely closed tcb discarded second path host decides ﬁrst send fin segment case enters state state retransmit unacknowledged segment send new data segment wait acknowledgement fin segment receive fin segment sent remote host ﬁrst case tcp connection enters state state new data segment remote host accepted reception fin segment acknowledgement fin segment sent data received fin segment delivered user connection enters state second case fin segment received connection enters closing state data received remote host delivered user state new data segment sent host wait acknowledgement fin segment entering state state different state tcp fsm tcp entity enters state having sent ack segment tcp connection segment indicates remote host data sent correctly received safely release tcp connection discard chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release corresponding tcb having sent ack segment tcp connection enters remains state second period tcb connection maintained ensures tcp entity sent ack maintains state able retransmit segment ack segment lost remote host retransmits fin segment delay second ensures duplicate segment connection handled correctly causing transmission rst segment state second delay connection release graceful ack segment lost note busy tcp server second delay state important operational problem server having thousand simultaneously opened tcp connection consider example busy web server process tcp connection second connection remain state minute implies server maintain million tcbs time reason tcp implementation prefer perform abrupt connection release sending rst segment close connection immediately discard corresponding tcb rst segment lost remote host continues maintain tcb connection longer exists optimisation reduces number tcbs maintained host sending rst segment potential cost increased processing remote host rst segment lost tcp reliable data transfer original tcp data transfer mechanism deﬁned rfc based experience using tcp growing global internet tcp speciﬁcation updated improved time preserving backward compatibility older tcp implementation section review main data transfer mechanism used tcp tcp transport protocol provides byte stream service implication ﬁelds tcp header mechanism used tcp ﬁelds tcp header number tcp us bit sequence number sequence number placed header tcp segment containing data sequence number ﬁrst byte payload tcp segment number tcp us cumulative positive acknowledgement tcp segment contains thesequence number byte sender acknowledgement expects receive remote host theory acknowledgement number valid ack ﬂag tcp header set practice segment ack ﬂag set tcp receiver us bit ﬁeld indicate current size receive window expressed byte note transmission control block established tcp connection tcp implementation maintain transmission control block tcb tcb contains information required send receive segment connection rfc local ip address remote ip address local tcp port number remote tcp port number current state tcp fsm maximum segment size ms practice syn segment ack ﬂag set complete tcp implementation contains additional information tcb notably support urgent pointer tcp discussed book refer rfc andrfc detail tcb transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release sequence number byte byte stream ﬁrst byte new data segment send us sequence number earliest sequence number sent acknowledged current size sending window byte sequence number byte expected received remote host current size receive window advertised remote host buffer buffer used store unacknowledged data buffer buffer store data received remote host delivered user data stored receiving buffer received sequence user slow process original tcp speciﬁcation categorised transport protocol provides byte stream service us send new data established connection tcp entity performs following operation ing tcb ﬁrst check sending buffer doe contain data receive window advertised remote host window ms byte data placed payload tcp segment sequence number segment sequence number ﬁrst byte payload set ﬁrst available sequence number incremented length payload tcp segment acknowledgement number segment set current value window ﬁeld tcp segment computed based current occupancy receiving buffer data kept sending buffer case need retransmitted later tcp segment ack ﬂag set received following operation performed set value window ﬁeld received segment acknowledgement number compared newly acknowledged data remove sending buffer updated tcp segment contained data sequence number compared equal segment received sequence data delivered user updated content receiving buffer checked data present buffer delivered sequence user updated segment s payload placed receiving buffer segment transmission strategy transport protocol tcp offer bytestream practical issue left implementation choice rfc decide new tcp segment containing data sent simple extreme implementation choice ﬁrst implementation choice send tcp segment soon user requested transmission data allows tcp provide low delay service user sending data byte time tcp place user byte segment containing byte tcp huge overhead acceptable wide area network second simple solution transmit new tcp segment user produced ms byte data solution reduces overhead cost potentially high delay elegant solution problem proposed john nagle rfc john nagle observed overhead caused tcp header problem wide area connection local area connection available bandwidth usually higher proposed following rule decide send new data segment new data produced user new ack segment received ms len data ms send segment unacknowledged data place data buffer acknowledgement received send tcp segment containing buffered data tcp segment placed ip header chapter minimum size resp header byte resp byte chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release ﬁrst rule ensures tcp connection used bulk data transfer sends tcp segment second rule sends partially ﬁlled tcp segment algorithm called nagle algorithm take line code tcp implementation line code huge impact packet exchanged network researcher analysed distribution packet size capturing analysing packet passing given link study shown important result network large fraction packet tcp segment contain ment packet usually account packet passing studied link network byte exchanged long packet usually packet containing byte payload default ms host attached ethernet network popular type lan ﬁgure provides distribution packet size measured link show distribution packet size packet contain pure tcp acknowledgement occupy byte packet contain user data packet contain byte user data user data transported large packet packet size distribution implication design router discus chapter figure packet size distribution internet recent measurement indicate packet size distribution valid today s internet packet distribution tends bimodal small packet corresponding tcp pure acks byte depending utilisation tcp option large packet carrying user data tcp window performance point view main limitation original tcp speciﬁcation bit window ﬁeld tcp header ﬁeld indicates current size receive window byte limit tcp receive window byte limitation severe problem tcp designed time wide area network offered maximum bandwidth kbps today s network limitation acceptable anymore table provides throughput achieved tcp connection kbytes window function connection s rtt maximum throughput msec mbps msec mbps msec mbps msec mbps solve problem backward compatible extension allows tcp use larger receive window proposed rfc today tcp implementation support option basic idea instead measurement taken host default ms byte bsd unix derivative byte default ms speciﬁed rfc today tcp implementation derive ms maximum packet size lan interface use ethernet case precise estimation maximum bandwidth achieved tcp connection account overhead tcp ip header transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release storing bit integer tcb stored bit integer tcp segment header contains bit place window ﬁeld impossible copy value sent tcp segment instead header contains s si scaling factor negotiated connection establishment client add proposed scaling factor tcp option syn segment server support rfc place segment scaling factor us advertising receive window local remote scaling factor included tcb server doe support rfc ignores received option scaling applied using window scaling extension deﬁned rfc tcp implementation use receive buffer gbyte receive buffer maximum throughput achieved single tcp connection rtt maximum throughput msec gbps msec gbps msec gbps msec gbps throughput acceptable today s network server having gbps terfaces early tcp implementation ﬁxed receiving sending today s high performance implementation able automatically adjust size sending receiving buffer better support high bandwidth ﬂows tcp s retransmission timeout transport protocol tcp retransmission timeout correctly set order achieve good performance retransmission timeout expires early bandwidth wasted retransmitting segment correctly received retransmission timeout expires late bandwidth wasted sender idle waiting expiration retransmission timeout good setting retransmission timeout clearly depends accurate estimation tcp connection differs tcp connection change lifetime single connection example ﬁgure show evolution host period second figure evolution host easiest solution measure tcp connection measure delay transmission data segment reception corresponding illustrated http information tune tcp implementation theory tcp implementation store timestamp data segment transmitted compute new estimate reception corresponding acknowledgement using frequent measurement introduces lot noise practice implementation measure recording transmission time segment time rfc chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release ﬁgure measurement work segment loss figure measure data segment lost illustrated ﬁgure measurement ambiguous sender determine received acknowledgement triggered ﬁrst transmission segment retransmission using incorrect estimation lead incorrect value retransmission timeout reason phil karn craig partridge proposed ignore measurement performed retransmissions avoid ambiguity estimation segment retransmitted recent tcp implementation rely timestamp option deﬁned rfc option allows tcp sender place bit timestamps tcp segment sends ﬁrst timestamp t value tsval chosen sender segment example current value second value t echo reply tsecr tsval received remote host stored tcb ﬁgure show utilization timestamp option allows disambiguation measurement retransmissions figure disambiguating measurement rfc timestamp option measurement collected given tcp connection tcp entity compute retransmission timeout measurement change lifetime connection retransmission timeout change beginning tcp entity sends syn segment doe know reach remote host initial retransmission timeout usually set second rfc original tcp speciﬁcation proposed rfc include additional variable tcb smoothed computed srrt rttis measured according procedure smoothing factor security expert raised concern using clock set tsval timestamp option leak information s solution proposed solve problem tcp client establishes parallel successive connection server rfc proposed reuse new connection information collected tcb previous connection measured rtt solution widely implemented transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release retransmission timeout computed max used account delay variance value used ensure rtois larger minute smaller second practice computation retransmission timeout did work main problem computed rtodid correctly account variation measured van cobson proposed seminal paper improved algorithm compute rtoand implemented bsd unix distribution algorithm tcp standard rfc jacobson s algorithm us state variable srttthe smoothed rttandrttvar estimation variance therttand parameter tcp connection start ﬁrst rtois set ﬁrst estimation rttis available srtt rttvar andrtoare computed rttvar rtt measurement collected srttandrttvar updated follows rttvar proposed value parameter allows tcp implementation implemented kernel perform rttcomputation using shift operation instead costly ﬂoating point operation ﬁgure illustrates computation rtoupon rttchanges figure example computation rto advanced retransmission strategy default retransmission strategy deﬁned rfc retransmission timer expires tcp retransmits ﬁrst unacknowledged segment having sequence number expiration retransmission timeout rfc recommends double value retransmission called exponential backoff doubling retransmission timeout retransmission included tcp deal issue overload incorrect initial estimation retransmission timeout segment retransmitted time retransmission timeout doubled retransmission reach conﬁgured maximum rfc suggests maximum retransmission timeout second retransmission timeout reach conﬁgured maximum remote host considered unreachable tcp connection closed retransmission strategy reﬁned based experience using tcp internet ﬁrst reﬁnement clariﬁcation strategy used send acknowledgement tcp us piggybacking chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release easiest costly method send acknowledgement place data segment sent direction application layer protocol exchange data direction time method rarely work application sending data segment direction remote tcp entity return tcp segment useful information acknowledgement number cause large overhead wide area network pure ack segment sent response received data segment tcp implementation use delayed acknowledgement strategy strategy ensures piggybacking used possible pure ack segment sent second received data segment loss loss reordering ack segment important sender sent immediately rfc rfc strategy relies new timer short delay millisecond additional ﬂag tcb implemented follows reception data segment segment received sequence delayedack send pure ack segment cancel acktimer start acktimer sequence segment send pure ack segment delayedack cancel acktimer transmission data segment piggyback ack delayedack cancel acktimer acktimer expiration send pure ack segment delayed acknowledgement strategy bulk transfer tcp implementation usually edge second tcp segment received default retransmission strategy used tcp advantage simple implement particular receiver loss strategy provides lower performance selective repeat strategy tcp developer designed extension tcp allow use selective repeat strategy maintaining backward compatibility older tcp implementation tcp extension assume receiver able buffer segment receives ﬁrst extension proposed fast retransmit heuristic extension implemented tcp sender doe require change protocol assumes tcp receiver able buffer segment performance point view issue tcp s retransmission timeout isolated segment loss tcp sender remains idle waiting expiration retransmission timeouts isolated loss frequent global internet heuristic deal isolated loss waiting expiration retransmission timeout included tcp implementation early understand heuristic let consider ﬁgure show segment exchanged tcp connection isolated segment lost shown isolated segment lost sender receives duplicate acknowledgement tcp receiver immediately sends pure acknowledgement receives segment duplicate acknowledgement acknowledgement contains acknowledgement number previous segment single duplicate acknowledgement doe necessarily imply segment lost simple reordering segment cause duplicate acknowledgement measurement shown segment reordering frequent internet based observation fast retransmit heuristic included tcp implementation implemented follows transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release figure detecting isolated segment loss ack arrival duplicate acknowledgement retransmit segment process acknowledgement heuristic requires additional variable tcb dupacks implementation set default number duplicate acknowledgement trigger retransmission standard tcp speciﬁcation rfc fast retransmit heuristic improves tcp performance provided isolated segment lost current window large allow sender send duplicate acknowledgement ﬁgure illustrates operation fast retransmit heuristic figure tcp fast retransmit heuristic loss isolated window small performance fast retransmit heuristic decrease environment necessary allow tcp sender use selective repeat strategy instead default strategy implementing requires change tcp protocol receiver need able inform sender segment received using selective acknowledgement sack option deﬁned rfc tcp option chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release negotiated establishment tcp connection tcp host support option sack block attached receiver segment sends sack block allow tcp receiver indicate block data received correctly sequence ﬁgure illustrates utilisation sack block figure tcp selective acknowledgement sack option contains block block corresponds sequence number left edge right edge block edge block encoded bit number size tcp sequence number sack option sack option contains byte encode type byte length sack option containing bblocks encoded sequence practice size sack option problematic optional tcp header extension longer byte sack option usually combined rfc timestamp extension implies tcp segment usually contain sack block limitation implies tcp receiver place sack option sends information received block deal limited size sack option tcp receiver currently having block inside receiving buffer select block place sack option good heuristic sack option block recently changed sender likely aware older block sender receives sack option indicating new block new possible segment loss usually doe retransmit missing segment s immediately deal reordering tcp sender use heuristic similar fast retransmit retransmitting gap received sack option indicating gap noted sack option doe supersede acknowledgement number tcp header tcp sender remove data sending buffer acknowledged tcp s cumulative acknowledgement design chosen reason allows receiver discard part receiving buffer running memory loosing data second sack option transmitted reliably cumulative acknowledgement required deal loss ack segment carrying sack information sack option serf hint allow sender optimise retransmissions tcp congestion control previous section explained mechanism tcp us deal transmission error segment loss heterogeneous network internet enterprise ip network endsystems different level performance endsystems server attached gbps link mobile device attached low bandwidth wireless link despite huge difference performance mobile device able efﬁciently exchange segment server understand problem better let consider scenario shown ﬁgure server transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release attached mbps link sending tcp segment computer c path contains mbps link figure tcp heterogeneous link network tcp segment sent server reach router segment router router potentially receive segment mbps forward mbps router host router buffer allow store packet immediately forwarded destination understand operation tcp environment let consider simpliﬁed model network host ai attached mbps link queue represents buffer router queue emptied rate mbps figure tcp self clocking let consider host auses window segment sends segment mbps wait acknowledgement host astops sending segment window segment reach buffer router ﬁrst segment stored buffer sent router rate mbps destination host reception segment destination sends acknowledgement acknowledgement allows host ato transmit new segment segment stored buffer router transmitting second segment sent host transmission ﬁrst window segment tcp sends data segment reception acknowledgement returned practice acknowledgement sent destination serve kind clock allows sending host adapt transmission rate rate segment received destination tcp ﬁrst mechanism allows tcp adapt heterogeneous network depends availability buffer store segment sent sender transmitted destination tcp used environment global internet tcp used network large number host send segment large number receiver example let consider network destination using delayed acknowledgement sending host sends data segment acknowledgement chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release depicted similar discussed andrfc network assume buffer router inﬁnite ensure packet lost figure congestion collapse problem tcp sender attached left network send window segment segment stored buffer router transmitted destination sender left network occupancy buffer quickly grows consequence buffer occupancy measured tcp sender receiver increase consider network bit segment sent buffer segment requires millisecond transmitted mbps link millisecond transmitted mbps link measured tcp roughly millisecond ignore propagation delay link router manage buffer fifo buffer contains segment time millisecond new segment transmitted mbps link previous segment transmitted unfortunately tcp us retransmission timer performs recover transmission error buffer occupancy high tcp assumes segment lost retransmits window segment increase occupancy buffer delay buffer furthermore buffer store send low bandwidth link retransmissions segment problem called congestion collapse occurred time late example note usable bandwidth kbit link dropped bit second congestion congestion collapse problem heterogeneous network face different mechanism proposed scientiﬁc literature avoid control network congestion implemented deployed real network understand problem let ﬁrst consider simple network host attached high bandwidth link sending segment destination cattached low bandwidth link depicted figure congestion problem avoid congestion collapse host regulate transmission using congestion control mechanism mechanism implemented transport layer network layer network implemented transport layer technology asynchronous transfer mode atm orframe relay include congestion control mechanism lower layer let ﬁrst consider simple problem set ihosts share single bottleneck link shown example network congestion control scheme achieve following objective discus chapter possible organisation router s buffer time tcp implementation mainly following rfc estimation retransmission mechanism simple tcp improved publication section focus congestion control mechanism regulate transmission rate host type nisms proposed literature example proposed avoid congestion atm network mechanism host send packet received credit router credit depend occupancy router s buffer transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release congestion control scheme avoid congestion practice mean neck link overloaded ri t transmission rate allocated host iat timetand rthe bandwidth bottleneck link congestion control scheme ensure t congestion control scheme efﬁcient bottleneck link usually shared expensive resource usually bottleneck link wide area link expensive upgrade local area network congestion control scheme ensure link efﬁciently used mathematically control scheme ensure t congestion control scheme fair congestion scheme aim achieving min fairness allocation transmission rate source said fair link network congested rate allocated source jcannot increased decreasing rate allocated sourceiwhose allocation smaller rate allocated source j depending network fair allocation exist practice fairness ideal objective necessarily achieved single bottleneck link example fairness implies source allocated transmission rate visualise different rate allocation useful consider graph shown graph plot resp rate allocated host b resp point graph rb ra corresponds possible allocation transmission rate mbps bottleneck link network graph divided region lower left graph contains allocation rb ra bottleneck link congested r right border region efﬁciency line set allocation completely utilise bottleneck link r finally fairness line set fair allocation figure possible allocated transmission rate shown graph rate allocation fair efﬁcient r fair efﬁcient r efﬁcient fair r ideally allocation fair efﬁcient unfortunately maintaining allocation ﬂuctuations number ﬂows use network challenging problem furthermore thousand tcp connection pas deal ﬂuctuations demand result ﬂuctuations available bandwidth computer network use congestion control scheme congestion control scheme achieve objective listed congestion control scheme rely close cooperation endhosts router mainly implemented endhosts limited support router example measurement performed sprint network reported active tcp connection link http recent information backbone link obtained caida s realtime measurement http chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release congestion control scheme modelled algorithm adapts transmission rate r t hosti based feedback received network different type feedback possible simplest scheme binary feedback host simply learn network congested congestion control scheme allow network regularly send allocated transmission rate mbps host let focus binary feedback scheme widely used today intuitively congestion control scheme decrease transmission rate host congestion detected network order avoid congestion collapse furthermore host increase transmission rate network congested host able efﬁciently utilise network rate allocated host ﬂuctuates time depending feedback received network ﬁgure illustrates evolution transmission rate allocated host simple network initially host low allocation efﬁcient allocation increase network congested point host decrease transmission rate avoid congestion collapse congestion control scheme work time allocation fair efﬁcient figure evolution transmission rate various type rate adaption algorithm possible dah ming chiu andraj jain analysed different type algorithm used source adapt transmission rate feedback received network intuitively rate adaptation algorithm increase transmission rate network congested ensure network efﬁciently used decrease transmission rate network congested avoid congestion collapse simplest form feedback network send source binary feedback network congested congested case linear rate adaptation algorithm expressed t crate t network congested t nrate t network notcongested linear adaption algorithm c n cand nare constant analysis show fair efﬁcient binary rate adaption mechanism rely additive increase multiplicative decrease network congested host slowly increase transmission rate n network congested host multiplicatively decrease transmission rate c aimd rate adaptation algorithm implemented additive increase multiplicative decrease congestion betac multiplicative decrease betac additive increase note binary feedback type binary feedback possible computer network ﬁrst solution rely implicit feedback solution chosen tcp tcp s congestion control scheme doe require eration router assumes use buffer discard packet congestion transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release tcp us segment loss indication congestion loss network assumed congested implies congestion main cause packet loss true wired network unfortunately true wireless network solution rely explicit feedback solution proposed decbit congestion control scheme used frame relay atm network explicit feedback implemented way ﬁrst solution deﬁne special message sent router host congested unfortunately generating message increase congestion network congestion indication packet discouraged rfc better approach allow intermediate router indicate packet forward current congestion status binary feedback encoded using bit packet header scheme congested router set special bit packet forward router leave bit unmodiﬁed destination host return congestion status network acknowledgement sends detail solution ip network rfc unfortunately writing solution deployed despite potential beneﬁts tcp congestion control scheme initially proposed van jacobson current speciﬁcation rfc tcp relies additive increase multiplicative decrease aimd implement aimd tcp host able control transmission rate ﬁrst approach use timer adjust expiration time function rate imposed aimd unfortunately maintaining timer large number tcp connection difﬁcult instead van jacobson noted rate tcp congestion artiﬁcially controlled constraining sending window tcp connection send data faster thanwindow rttwherewindow maximum host s sending window window advertised receiver tcp s congestion control scheme based congestion window current value congestion window cwnd stored tcb tcp connection window used sender constrained bymin cwnd rwin swin whereswin current sending window rwin received receive dow additive increase tcp congestion control increment congestion window ms byte tcp literature phase called congestion avoidance phase tiplicative decrease tcp congestion control divide current value congestion window congestion detected tcp connection begin sending host doe know network us reach destination congested avoid causing congestion start small congestion window recommends initial window ms byte additive increase tcp congestion control scheme increment congestion window ms byte tcp connection wait able efﬁciently use available bandwidth especially important environment high avoid waiting reaching congestion window large efﬁciently utilise network tcp congestion control scheme includes algorithm objective tcp quickly reach acceptable value cwnd congestion window doubled algorithm us additional variable tcb sshtresh start threshold ssthresh estimation value cwnd did cause congestion initialised sending window updated congestion event practice tcp implementation considers network congested need retransmit segment tcp congestion control scheme distinguishes type congestion congestion tcp considers network lightly congested receives duplicate edgements performs fast retransmit fast retransmit successful implies segment lost case tcp performs multiplicative decrease congestion window divided threshold set new value congestion window congestion tcp considers network severely congested retransmission timer expires case tcp retransmits ﬁrst segment set threshold congestion window congestion window reset initial value tcp performs ﬁgure illustrates evolution congestion window severe congestion beginning connection sender performs ﬁrst segment lost retransmission timer expires time ssthresh set half current congestion window congestion window reset segment lost segment retransmitted sender performs chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release congestion window reach sshtresh switch congestion avoidance congestion window increase linearly segment lost retransmission timer expires figure evaluation tcp congestion window severe congestion ﬁgure illustrates evolution congestion window network lightly congested lost segment retransmitted using fast retransmit sender begin segment lost successfully retransmitted fast retransmit congestion window divided sender immediately enters congestion avoidance mild congestion figure evaluation tcp congestion window network lightly congested tcp implementation update congestion window receive acknowledgement assume receiver acknowledges received segment sender sends ms sized segment tcp congestion control scheme implemented using simpliﬁed initialisation cwnd ms swin ack arrival new ack congestion cwnd ssthresh increase quickly cwnd double cwnd rtt cwnd cwnd ms congestion avoidance increase slowly cwnd increase cwnd ms rtt cwnd ms duplicate old ack duplicate acknowledgement assume tcp us unlimited sequence acknowledgement number furthermore thecwnd adjusted retransmission lost segment fast retransmit additional detail rfc transmission control protocol saylor url http saylor foundation computer networking principle protocol practice release retransmitsegment ms ack old segment ignored expiration retransmission timer send retransmit lost segment ms furthermore tcp connection idle current retransmission timer reset congestion window congestion window size us connection begin longer know current congestion state network note initial congestion window original tcp congestion control mechanism proposed recommended tcp nection begin setting cwnd today s higher bandwidth network using small initial congestion window severely affect performance short tcp connection used web server publication rfc tcp host allowed use initial congestion window kbytes corresponds segment environment thanks congestion control scheme tcp adapts transmission rate loss occur work intuitively tcp transmission rate decrease percentage loss increase researcher proposed detailed model allow prediction throughput tcp connection loss occur intuition factor affect performance tcp let consider simple model assumption completely realistic give good intuition requiring complex mathematics model considers hypothetical tcp connection suffers equally spaced segment loss pi segment loss ratio tcp connection successfully segment lost ignore beginning connection tcp environment congestion avoidance isolated loss recovered using fast retransmit evolution congestion window shown ﬁgure note ﬁgure represents time measured unit supposed constant model represents size congestion window measured segment figure evolution congestion window regular loss loss equally spaced congestion window start value w incremented ms reach twice value w point segment retransmitted cycle start congestion window measured segment cycle lastsw time bandwidth tcp connection number byte transmitted given period time cycle number segment sent tcp connection equal area yellow trapeze ﬁgure area area w w chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release given regular loss consider number segment sent loss cycle deﬁnition equal throughput byte second tcp connection equal number segment transmitted divided duration cycle throughput w having eliminated w throughput detailed model analysis simulation shown ﬁrst order model tcp throughput loss occur important result show tcp connection small achieve higher throughput tcp connection having longer loss occur implies tcp congestion control scheme completely fair favor connection shorter tcp connection use large ms achieve higher throughput tcp connection use shorter ms creates source unfairness tcp connection noted today host using ms roughly byte general maximum throughput achieved tcp connection depends maximum window size loss loss depends ms loss ratio throughput min window rtt note tcp congestion control zoo ﬁrst tcp congestion control scheme proposed van jacobson addition writing scientiﬁc paper van jacobson implemented congestion avoidance scheme release bsd unix distributed university berkeley later improved congestion control adding fast retransmit fast recovery mechanism reno release bsd unix researcher proposed simulated implemented modiﬁcations tcp congestion control scheme modiﬁcations used today rfc proposed improvement fast recovery mechanism reno implementation vega us change estimate congestion order avoid designed high bandwidth link default congestion control scheme linux kernel tcp designed high bandwidth link default congestion control scheme microsoft operating system search scientiﬁc literature probably reveal different variant tcp congestion control scheme evaluated simulation tcp implementation recent linux kernel support congestion control scheme new one easily added expect new tcp congestion control scheme continue appear summary chapter studied transport layer layer provides type service application layer unreliable connectionless service simplest service offered application internet service offered udp application prefer use reliable transport service shown providing service complex providing unreliable service transport layer need recover error occur network layer transport layer protocol rely mechanism use handshake mechanism handshake mechanism correctly establish transport connection connection established transport entity exchange segment segment contains sequence number transport layer us edgements conﬁrm segment correctly received addition timer used recover segment loss sliding window used avoid overﬂowing buffer transport entity finally summary saylor url http saylor foundation computer networking principle protocol practice release explained transport connection safely released discussed mechanism used tcp reliable transport protocol used application internet notably described congestion control mechanism included tcp late explained reliability mechanism used tcp tuned year exercise section divided part ﬁrst contains exercise principle transport protocol including tcp second contains programming challenge packet analysis tool observe behaviour transport protocol principle consider alternating bit protocol described chapter doe protocol recover loss data segment doe protocol recovers loss acknowledgement student proposed optimise alternating bit protocol adding negative acknowledgment receiver sends nak control segment receives corrupted data segment kind information placed control segment sender react receiving nak transport protocol rely different type checksum verify segment affected transmission error frequently used checksum internet checksum used udp tcp internet protocol deﬁned rfc implemented various module http python implementation bit bit cyclical redundancy check crc used disk zip archive datalink layer protocol http apython module contains bit crc alder checksum deﬁned rfc sctp protocol replaced crc later rfc fletcher checksum http mentation detail using knowledge internet checksum ﬁnd transmission error detected internet checksum crcs efﬁcient error detection code able detect error affect odd number bit error affect sequence bit shorter length crc carry experiment implementation verify case checksum crcs confused secure hash function deﬁned rfc described rfc secure hash function used ensure ﬁles modiﬁed secure hash function aim detecting malicious change checksum crcs detect random transmission error perform experiment hash tions deﬁned http python hashlib module verify case version alternating bit protocol supporting variable length segment us header contains following ﬁelds anumber alength ﬁeld indicates length data chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release acrc speedup transmission segment student proposes compute crc data segment header think optimisation unix host ping command used measure send receive packet remote host use ping measure remote host chose remote destination far current location small web server distant country implementation ping various language http python implementation ping set retransmission timer implementing alternating bit protocol exchange ﬁles server measured factor affect performance alternating bit protocol link considered symmetrical offer bandwidth direction metrical link widely used local area network core internet asymmetrical link technology common example various type adsl catv technology consider implementation alternating bit protocol used host directly connected using asymmetric link assume host sending segment containing byte control information byte data acknowledgement byte long negligible minimum bandwidth required return link ensure transmission acknowledgement bottleneck derive mathematical expression provides goodput achieved alternating bit protocol suming segment contains dbytes data cbytes control information acknowledgement contains cbytes control information bandwidth direction link set bbits second delay host sseconds direction thegoodput deﬁned sdus measured byte successfully transferred period time consider alternating bit protocol used link suffers deterministic error error ratio set p mean transmitted correctly pthbit corrupted discus factor affect performance alternating bit protocol link amazon provides storage service company researcher store lot information perform computation stored information amazon allows user send ﬁles internet sending assume terabyte delivered hour amazon courier service minimum bandwidth required match bandwidth courier service large data center operator microsoft andgoogle announced install server container container hosting server assuming container server storing gbytes data time required data stored container gbps link bandwidth truck need hour container data center technique used sender recover transmission error loss data segment loss acknowledgement consider bbits second link host propagation delay tseconds derive formula computes time elapsed transmission ﬁrst bit dbytes segment sending host reception bit segment receiving host exercise saylor url http saylor foundation computer networking principle protocol practice release consider sender receiver directly connected mbps link propagation delay millisecond assume retransmission timer set second window length segment draw diagram showing transmission segment segment contains bit loss seventh segment lost second fourth sixth eighth acknowledgement lost fourth data segment reordered fourth arrives question using selective repeat instead note answer necessarily consider server connected using gbps interface delay server millisecond throughput achieved transport protocol using bit segment window segment segment segment consider server directly connected using bbits second link r second server using transport protocol sends segment containing sbytes edgements composed abytes derive formula computes smallest window measured segment required ensure server able completely utilise link question server connected asymmetrical link transmits bubits second direction used send data segment bdbits second direction used send acknowledgement trivial file transfer protocol simple ﬁle transfer protocol used host booting server read tftp speciﬁcation rfc explain tftp recovers transmission error loss possible receiver sender justify answer possible receiver sender justify answer selective repeat mechanism described book exclusively rely lative acknowledgement implies receiver return sender information segment received frequent loss reordering selective repeat receiver return time cumulative acknowledgment think type acknowledgement used selective repeat receiver provide additional information segment received design acknowledgement explain sender react reception information goodput achieved transport protocol usually deﬁned number application layer byte exchanged unit time factor inﬂuence goodput achieved given transport protocol used transmission control protocol tcp attache byte control information segment sent assuming inﬁnite window loss transmission error derive formula computes maximum tcp goodput function size segment sent sender us window size encoded nbits ﬁeld segment send receiving acknowledgement consider following situation receiver sent window data segment segment received correctly receiver returned acknowledgement lost using time sequence diagram considering window segment happens case ﬁx problem sender chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release question assume sender receiver implement selective repeat note answer different question consider transport support window byte segment maximum bandwidth protocol achieve set second happens instead advertising window segment receiver decides advertise window segment explain circumstance transport entity advertise window segment understand operation tcp congestion control mechanism useful draw time sequence diagram let consider simple scenario web client connected internet wish retrieve simple web page remote web server simplicity assume delay client server second packet transmission time client server negligible connected gbps network assume client server use kbytes segment compute time required open tcp connection send http request retrieve kbytes web page page size typical result returned search engine like bing important factor delay initial size tcp congestion window server assume ﬁrst initial window set segment deﬁned rfc kbytes segment case proposed rfc kbytes proposed recent paper perform analysis initial window segment segment sent server lost retransmission timeout ﬁxed set second question assume segment lost question consider loss second seventh acknowledgement sent client doe analysis change initial window set kbytes instead segment mbytes sent tcp connection idle minute discus value used congestion window slow start threshold retransmission timer operate reliably transport protocol us resp selective repeat use window larger resp segment doe limitation affect tcp explain answer consider simple network shown ﬁgure network router client server store outgoing interface packet addition packet currently transmitting discard packet arrive buffer assuming neglect transmission time acknowledgement server us initial window segment retransmission timer set millisecond time required transmit segment client server doe performance increase server us initial window segment instead figure simple network ﬁgure describes evolution congestion window tcp connection ﬁnd reason event marked ﬁgure ﬁgure describes evolution congestion window tcp connection ﬁnd reason event marked ﬁgure exercise saylor url http saylor foundation computer networking principle protocol practice release figure evolution congestion window figure evolution congestion window web server serf mainly html page ﬁt inside tcp segment assuming transmission time segment neglected compute total transfer time page assuming tcp stack us initial window size segment tcp stack us initial window size segment deﬁnes mechanism allow router mark packet setting bit packet header congested tcp destination receives marking packet return congestion marking source reacts halving congestion window performs congestion avoidance consider tcp connection fourth data segment experience congestion compare delay transmit segment network router discard packet congestion network router mark packet congestion practice socket interface allows use udp protocol unix host udp provides connectionless unreliable service theory allows send sdus kbytes implement small udp client small udp server python start example provided http use c java run client server different workstation determine experimentally largest sdu supported language o possible use different language operating system group using socket interface implement connectionless unreliable service provided udp simple client sends following message shown ﬁgure message bit ﬂags set value bit ﬁeld square root value contained bit ﬁeld character string ascii representation trailing number contained bit character ﬁeld bit message contain internet checksum computed entire message reception message server veriﬁes chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release ﬂag correct value bit integer square bit integer character string ascii representation bit integer internet checksum correct veriﬁcation succeeds server return sdu containing return implementation able run low endian big endian machine access different type machine laptop sparc server try run mentation type machine figure simple sdu format socket library used develop application reliable bytestream service provided tcp installed server simple server provides simple service service operates follows server listens port tcp connection establishment tcp connection server sends integer using following tlv format ﬁrst bit indicate type information ascii boolean bit indicate length information byte ascii tlv variable length byte contain ascii character byte boolean tlv length byte byte set fortrue false client reply sending received integer encoded bit integer network byte order server return tlv containing true integer correct tlv containing false close tcp connection implement client interact server c java python time implement small transport protocol protocol us sliding window transmit segment forced wait acknowledgment implementation support variable size sliding window end ﬂow send maximum window size window size encoded bit unsigned integer protocol identiﬁes data segment using sequence number sequence number ﬁrst segment incremented new segment receiver acknowledge delivered segment sending ack segment sequence number ﬁeld ack segment contains sequence number expected segment receiver ﬂow data unidirectional meaning sender sends data segment receiver sends ack segment deal segment loss protocol implement recovery technique selective repeat use retransmission timer select technique best suite need start simple technique improve later exercise saylor url http saylor foundation computer networking principle protocol practice release figure segment format segment format contains following ﬁelds segment type data segment ack segment size current window integer encoded bit ﬁeld data segment ﬁeld indicates size sending window sender ack segment ﬁeld indicates current value receiving window sequence number bit unsigned integer start sequence number incremented new data segment sent sender inside ack segment sequence ﬁeld carry sequence number segment expected receiver length payload multiple byte data segment contain payload byte data data segment transfer shorter reception data segment length different indicates end data transit data send client server exchange udp datagrams contain data ack segment provide interface allows transmit binary ﬁle support ing parameter sender receiver order test reaction protocol error loss use random number generator probabilistically drop received segment introduce random delay arrival segment packet trace analysis debugging networking problem analyse performance problem useful capture segment exchanged host analyse packet trace analysis tool available commercial tool tool able capture packet exchanged link course capturing packet require administrator privilege analyse content captured packet display information captured packet stored ﬁle ofﬂine analysis tcpdump probably known packet capture software able capture packet display content tcpdump tool display value important ﬁelds captured packet additional information tcpdump tcpdump text example output tcpdump ﬁrst tcp segment exchanged scp transfer host ip s win ms nop wscale nop nop timestamp sackok eol ip s ack win nop nop timestamp ms nop wscale nop nop sackok ip ack win nop nop timestamp ip p ack win nop nop timestamp chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release ip ack win nop nop timestamp ip p ack win nop nop timestamp ip ack win nop nop timestamp ip p ack win nop nop timestamp easily recognise output syn segment containing ms window scale timestamp sackok option segment wscale option indicates server us window scaling connection ﬁrst segment exchanged connection wireshark recent tcpdump evolved ethereal packet trace analysis software used text tool like tcpdump tcp connection wireshark provide output tcpdump main advantage wireshark includes graphical user interface allows perform various type analysis packet trace figure wireshark default window wireshark window divided part window summary ﬁrst packet trace clicking line detailed content packet middle window middle window allows inspect ﬁelds captured packet window hexadecimal representation packet ﬁeld selected middle window highlighted wireshark good displaying packet contains analysis tool useful ﬁrst tool follow tcp stream analyze menu allows reassemble display payload exchanged tcp connection tool useful need analyse example command exchanged smtp session second tool ﬂow graph statistic menu provides time sequence diagram packet exchanged comment packet content blow example figure wireshark ﬂow graph set tool tcp stream graph tool statistic menu tool allow plot various type information extracted segment exchanged tcp connection ﬁrst interesting graph sequence number graph show evolution sequence number ﬁeld captured segment time graph used detect graphically retransmissions exercise saylor url http saylor foundation computer networking principle protocol practice release figure wireshark sequence number graph second interesting graph graph show evolution function time graph used check remains stable note packet trace wireshark plot graph ﬂow client server wireshark plot graph corresponds selected packet wireshark window figure wireshark graph emulating network netkit netkit network emulator based user mode linux allows easily set emulated network linux machine act router note ﬁnd netkit netkit available http file downloaded http instruction installation available http way use netkit manual way using lab ﬁrst case boot control machine individually using command starting v virtual machine second case start network single operation command controlling lab start l man page command available http chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release careful forgot stop virtual machine lab using vhalt orlhalt netkit lab simply directory containing conﬁguration ﬁle called directory virtual machine case lab available icampus network composed pc connected router ﬁle contains following line mean connected virtual lan named avia interface connected virtual lan bvia respectively interface directory device initially used netkit store ﬁlesystem lab directory contain optional ﬁles lab provided ﬁle contains shell instruction executed startup virtual machine speciﬁc case script conﬁgures interface allow trafﬁc exchange routing table entry join starting lab consists simply unpacking provided archive going lab directory typing lstart start network note file sharing virtual machine host virtual machine access directory lab belong repertory mounted ﬁlesystem path netkit lab ﬁnd simple python application establishes tcp connection feel free code perform analysis note netkit tool virtual machine run linux standard networking tool hping tcpdump netstat available usual note capturing network trace facilitated using extension available http extension installed netkit installation dent lab order capture trafﬁc exchanged given virtual lan simply need issue command vdump lan host want pipe trace wireshark use vdump wireshark stack receives syn segment sequence number set value acknowledgement number returned segment possible stack return segment acknowledgement number set explain yes content received syn segment open tcpdump packet trace identify number different tcp connection established closed connection explain mechanism closed analyse initial sequence number used syn segment initial sequence number evolve increased microsecond tcpdump packet trace contains connection attempt explain happening connection attempt tcpdump packet trace collected popular website accessible using explain tcp option supported client server exercise saylor url http saylor foundation computer networking principle protocol practice release tcpdump packet trace collected departmental server tcp option supported server tcp implementation maintains transmission control block tcb tcp connection tcb data structure contains complete state tcp connection tcb described rfc contains ﬁrst identiﬁcation tcp connection ip address local host ip address remote host tcp port used connection remote host tcp port used connection local host note client open tcp connection local port chosen ephemeral port range localport sequence number byte byte stream ﬁrst byte new data segment send use sequence number earliest sequence number sent acknowledged sequence number byte implementation expects receive remote host exercise need maintain receive buffer implementation discard segment receives current sending window current window advertised receiver using packet trace tcb connection host sends segment trace tcpdump packet trace collected taining popular web site provides mapping information tcp connection used retrieve information server network monitoring tool ntop collect tcp segment sent received host group host provide interesting statistic number tcp connection number byte exchanged tcp connection assuming capture tcp segment sent host propose application list tcp connection established accepted host number byte exchanged connection need count number byte contained inside segment report number byte exchanged tcp connection type special device placed border campus enterprise network software run endhosts software ﬁrewalls typically analyse packet received host decide based packet s header content processed host s network stack discarded administrator conﬁgure ﬁrewalls laptop student machine prevent student installing server machine sign simple ﬁrewall block incoming tcp connection allows host establish tcp connection remote server using netkit lab explained perform test using mand line tool allows having administrator privilege send special ip packet tcp segment used verify conﬁguration diagnose problem use test operation linux tcp stack running inside netkit server host launch tcpdump parameter collect packet received client display using client host send valid syn segment unused port server host content segment returned server ﬁrewall software hardware device analysis packet decides based set rule accept discard packet received sent rule used ﬁrewall usually depend value ﬁelds packet type transport protocol port discus detail operation ﬁrewalls network layer chapter chapter transport layer saylor url http saylor foundation computer networking principle protocol practice release perform experiment send syn segment port port default port discard service service launched xinetd segment doe server sends reply happens reception segment explain answer linux stack easily conﬁgured using sysctl change kernel conﬁguration variable http recent list sysctl variable linux stack try disable selective acknowledgement timestamp large window option open tcp connection port server using manpage telnet check using tcpdump effect kernel variable segment sent linux stack innetkit network administrator need verify networking daemon active server logged server tool used verify ﬁrst solution use netstat command command allows extract various statistic networking stack linux kernel tcp netstat list active tcp connection state fsm netstat support following option useful exercise information tcp connection numeric output default netstat sends dns query resolve ip address host us convert port number service name recommended netkit machine information state tcp connection information timer information tcp connection established state netkit lab launch daemon start tcp connection using telnet use netstat verify state connection second solution determine network daemon running server use tool like nmap nmap run remotely provide information host administrator login use tcpdump collect segment sent nmap running client explain nmap operates long lived tcp connection susceptible rst attack try ﬁnd additional information attack explain tcp stack mitigate attack exercise performed measurement similar shown figure emulated network emulated network composed uml client server router client server connected router client sends data server link router client controlled using netem linux kernel module module allows insert additional delay reduce link bandwidth insert random packet loss emulated network difﬁcult obtain quantitative result real network emulated machine need share cpu memory creates interaction different emulated machine happen real world objective exercise allow student understand behaviour tcp congestion control mechanism severe problem information tcp congestion control scheme implemented linux kernel http http source code recent linux description sysctl variable allow tune tcp implementation linux kernel http exercise conﬁgured linux kernel use newreno scheme rfc close ofﬁcial standard deﬁned rfc exercise saylor url http saylor foundation computer networking principle protocol practice release used netem collect trace using wireshark tcpdump carry following analysis identify tcp option used tcp connection try ﬁnd explanation evolution tcp connection use graph wireshark careful estimation version wireshark buggy verify tcp implementation used implemented delayed ments inside packet trace ﬁnd segment retransmitted using fast retransmit explain mission detail segment retransmitted thanks expiration tcp s sion timeout explain segment retransmitted using fast retransmit contains useful graph graph time sequence graph explain compute graph trace displaying tcp segment recent version wireshark contain expert analysis heuristic indicate segment retransmitted duplicate ack retransmission timeout expired explain implement heuristic wireshark ﬁnd ﬁle exchanged transfer hired networking expert company company user networked cation complain network slow developer application argue delay caused packet loss buggy network network administrator argues network work perfectly delay perceived user caused application server application running resolve case determine problem network server application running network administrator collected representative packet trace download looking trace resolve case indicate network application culprit chapter transport layer saylor url http saylor foundation chapter network layer transport layer enables application efﬁciently reliably exchange data transport layer entity expect able send segment destination having understand underlying subnetwork technology subnetwork technology exist differ subtle detail frame size addressing network layer glue subnetworks transport layer hide transport layer complexity underlying subnetworks ensures information exchanged host connected different type subnetworks chapter ﬁrst explain principle network layer principle include datagram virtual circuit mode separation data plane control plane algorithm used routing protocol explain network layer internet starting moving routing protocol rip ospf bgp principle main objective network layer allow endsystems connected different network exchange information intermediate system called router unit information network layer called packet figure network layer reference model explaining network layer useful begin analysing service provided datalink layer variant datalink layer provide service provide connectionless service section focus connectionless datalink layer service widely used using datalink layer cause problem scope chapter rfc discussion topic main type datalink layer simplest datalink layer cating system directly connected physical layer datalink layer used link communicating system system endsystems router ppp protocol deﬁned rfc example datalink layer datalink layer exchange frame datalink frame sent datalink layer entity left transmitted physical layer reach datalink layer entity right datalink layer saylor url http saylor foundation computer networking principle protocol practice release figure datalink layer provide unreliable service frame corrupted lost reliable service case datalink layer includes retransmission mechanism similar one used transport layer unreliable service frequently used physical layer optical ﬁber twisted pair having low bit error ratio reliability mechanism used wireless network recover locally transmission error second type datalink layer used local area network lan conceptually lan set communicating device device directly exchange frame datalink layer endsystems router connected lan lan connect device lan connect hundred thousand device figure local area network chapter organisation operation local area network important ference datalink layer datalink layer used lan lan communicating device identiﬁed unique datalink layer address address usually embedded hardware device different type lan use different type datalink layer address ing device attached lan send datalink frame communicating device attached lan lan support special broadcast multicast datalink layer address frame sent broadcast address lan delivered communicating device attached lan ticast address used identify group communicating device frame sent multicast datalink layer address delivered lan communicating device belong corresponding group type datalink layer used nbma network network used interconnect device like lan device attached nbma network identiﬁed unique datalink layer address main difference nbma network traditional lan nbma service support unicast datalink layer service provided nbma network support broadcast multicast unfortunately datalink layer able send frame unlimited datalink layer characterised maximum frame size dozen different datalink layer unfortunately use different maximum frame size network layer cope heterogeneity datalink layer network layer relies following principle network layer entity identiﬁed network layer address address independent datalink layer address use chapter network layer saylor url http saylor foundation computer networking principle protocol practice release service provided network layer doe depend service internal organisation underlying datalink layer network layer conceptually divided plane data plane control plane data plane contains protocol mechanism allow host router exchange packet carrying user data control plane contains protocol mechanism enable router efﬁciently learn forward packet ﬁnal destination independence network layer underlying datalink layer key principle network layer ensures network layer used allow host attached different type datalink layer exchange packet intermediate router furthermore allows datalink layer network layer evolve independently enables network layer easily adapted new datalink layer time new datalink layer invented type service provided network layer unreliable connectionless service reliable unreliable service service popular technology andatm nowadays network use unreliable connectionless service main focus chapter organisation network layer possible internal organisation network layer datagram virtual circuit internal organisation network orthogonal service provides time datagram organisation used provide connectionless service virtual circuit organisation used network provide service datagram organisation ﬁrst popular organisation network layer datagram organisation organisation inspired organisation postal service host identiﬁed network layer address send information remote host host creates packet contains network layer address destination host network layer address information sent network layer limit maximum packet size information divided packet transport layer passed network layer understand datagram organisation let consider ﬁgure network layer address represented letter assigned host router send information host j host acreates packet containing address destination address information exchanged datagram organisation router use forwarding mean router receives packet destined look destination address packet routing table routing table data structure map destination address set destination address outgoing interface packet destined address forwarded reach ﬁnal destination main constraint imposed routing table allow host network reach host implies router know route destination path composed information stored routing table contain loop destination unreachable principle saylor url http saylor foundation computer networking principle protocol practice release figure simple internetwork example host asends packet router routing table forward packet based routing table forward packet deliver destination allow host exchange packet network relies different type protocol mechanism precise deﬁnition format packet sent host processed router second algorithm used router forward packet deﬁned protocol algorithm data plane network layer data plane contains protocol algorithm used host router create process packet contain user data data plane particular forwarding algorithm used router depends routing table maintained reach router routing table maintained using various technique manual conﬁguration distributed protocol centralised computation technique control plane network layer control plane contains protocol mechanism used compute install routing table router datagram organisation popular computer network datagram based network layer include global internet clnp deﬁned iso ipx deﬁned novell xns deﬁned xerox virtual circuit organisation main advantage datagram organisation simplicity principle organisation easily understood furthermore allows host easily send packet destination time packet forwarded independently intermediate router packet sent host follow path reach given destination cause packet reordering annoying transport protocol furthermore router using forwarding forward packet sent destination outgoing interface cause congestion link second organisation network layer called virtual circuit inspired organisation telephone network telephone network designed carry phone call usually minute phone identiﬁed telephone number attached telephone switch initiate phone telephone ﬁrst need send destination s phone number local switch switch cooperates switch network create channel telephone network channel used telephone lifetime released end channel created manually telephone operator request caller today s telephone network use automated switch allow channel carried physical link principle remain roughly chapter network layer saylor url http saylor foundation computer networking principle protocol practice release network using virtual circuit host identiﬁed network layer address host explicitly request establishment virtual circuit able send packet destination host request establish virtual circuit processed control plane installs state create virtual circuit source destination intermediate router packet sent virtual circuit contain virtual circuit identiﬁer allows router determine virtual circuit packet belongs illustrated ﬁgure virtual circuit host aand host iand host aand host figure simple internetwork using establishment virtual circuit performed using signalling protocol control plane usually source host sends signalling message indicate router address destination possibly performance characteristic virtual circuit established ﬁrst router process signalling message different way ﬁrst solution router consult routing table remember characteristic requested virtual circuit forward outgoing interface destination signalling message warded reach destination virtual circuit opened path followed signalling message illustrated red virtual circuit ﬁgure figure virtual circuit establishment second solution used router know entire topology network case ﬁrst router use technique called source routing reception signalling message ﬁrst router chooses path virtual circuit network path encoded list address intermediate router reach destination included signalling message intermediate router remove address signalling message forwarding technique enables router spread virtual circuit network better router know load remote link select loaded path establishing virtual circuit solution illustrated blue circuit ﬁgure point discussed virtual circuit organisation data plane data plane mainly deﬁnes format data packet algorithm used router forward packet data packet contain virtual circuit identiﬁer encoded ﬁxed number bit virtual circuit identiﬁers usually called label principle saylor url http saylor foundation computer networking principle protocol practice release host maintains ﬂow table associate label virtual circuit established router receives packet containing label extract label consults label forwarding table table data structure map couple incoming interface label outgoing interface used forward packet label placed outgoing packet practice label forwarding table implemented vector couple incoming interface label index entry vector contains outgoing interface outgoing label single memory access sufﬁcient consult label forwarding table utilisation label forwarding table illustrated ﬁgure figure label forwarding table network using virtual circuit virtual circuit organisation mainly used public network starting frame relay asynchronous transfer mode atm network datagram virtual circuit organisation advantage drawback main advantage datagram organisation host easily send packet number destination virtual circuit organisation requires establishment virtual circuit transmission data packet solution costly host exchange small amount data hand main advantage virtual circuit organisation forwarding algorithm used router simpler using datagram organisation furthermore utilisation virtual circuit allow load better spread network thanks utilisation multiple virtual circuit multiprotocol label switching mpls technique discus revision book considered good compromise datagram virtual circuit mpls us virtual circuit router doe extend endhosts additional information mpls control plane objective control plane network layer maintain routing table used router indicated earlier routing table data structure contains destination address block address known router outgoing interface router forward packet destined address routing table contain additional information address router path destination estimation cost path section discus main technique used maintain routing table network static routing simplest solution routing table router install router algorithm used compute table chapter network layer saylor url http saylor foundation computer networking principle protocol practice release simple solution use shortest path routing minimise number intermediate router reach destination complex algorithm account expected load link ensure congestion doe occur given trafﬁc demand algorithm ensure router conﬁgured route reach destination path composed entry routing table contain cycle cycle lead forwarding loop ﬁgure show sample routing table ﬁve router network figure routing table simple network main drawback static routing doe adapt evolution network new router link added routing table recomputed furthermore link router fails routing table updated distance vector routing distance vector routing simple distributed routing protocol distance vector routing allows router matically discover destination reachable inside network shortest path reach destination shortest path computed based metric orcosts associated link use represent metric conﬁgured link lon router router maintains routing table routing table rcan modelled data structure store known destination address d following attribute d outgoing link router us forward packet destination d d sum metric link compose shortest path reach destination d d timestamp distance vector containing destination d router us distance vector routing regularly sends distance vector interface distance vector summary router s routing table indicates distance known destination distance vector computed routing table using n second d r add destination d vector pair d r d interface send vector v interface send v interface router boot doe know destination network routing table contains sends neighbour distance vector contains address distance router receives distance vector link l process follows v received vector l link vector received def received v l received vector link l d v principle saylor url http saylor foundation computer networking principle protocol practice release d r new route r d d r d r d existing route new better v d r d r d l better route change current route r d d r d r d router iterates address included distance vector distance vector contains address router doe know insert destination inside routing table link land distance sum distance indicated distance vector cost associated link destination known router update corresponding entry routing table cost new route smaller cost known route v d r d new route learned link current best route destination r d l ﬁrst condition ensures router discovers shortest path destination second tion used account change route occur link failure change metric associated link understand operation distance vector protocol let consider network ﬁve router shown figure operation distance vector routing simple network assume ai ﬁrst send distance vector received distance vector update routing table route distance vector reach aandd distance vector tobande distance vector tod reach c dande distance vector toa b candecan reach destination distance vector tobandd point router reach router network thanks routing table shown ﬁgure deal link router failure router use timestamp stored routing table router send distance vector nseconds timestamp route regularly refreshed route timestamp older nseconds unless route reachable anymore practice cope possible loss distance vector transmission error router check timestamp route stored routing table nseconds remove route older router notice route destination expired ﬁrst associate route send chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure routing table computed distance vector simple network distance vector neighbour inform route removed routing table time ensure neighbouring router received bad news distance vector reach transmission error consider example assume link router aandbfails failure aused b reach destination b candewhile bonly used reach affected entry timeout router aandband send distance vector distance vector d c d e dknows reach b anymore distance vector b c route candeviad distance vector c route anymore reach aviab distance vector c d b tod route route point router routing table allowing reach router router reach router route bonce router dsends updated distance vector c d e step illustrated ﬁgure routing table computed distance vector failure show routing table router figure routing table computed distance vector failure consider link dandefails network partitioned disjoint part d b e c route b candeexpire ﬁrst router time router dupdates routing table ifdsends b c e alearns b candeare unreachable update routing table unfortunately distance vector sent ai lost asends distance vector d b c time dsends distance vector dupdates routing table use principle saylor url http saylor foundation computer networking principle protocol practice release shorter route advertised atowards b cande time dsends new distance vector e c b aupdates routing table time sends distance vector d b c e problem known count inﬁnity problem networking literature router aanddexchange distance vector increasing cost cost reach problem occur scenario depicted ﬁgure fact distance vector routing suffer count inﬁnity problem soon cycle network cycle necessary redundancy deal link router failure mitigate impact counting inﬁnity distance vector protocol consider unfortunately limit metric network operator use diameter network using distance vector count inﬁnity problem occurs router aadvertises router da route learned router possible solution avoid problem change router creates distance vector instead computing distance vector sending neighbor router create distance vector speciﬁc neighbour contains route learned neighbour implemented following pseudocode n second vector interface l interface d r r d d r send v end d r end l interface technique called technique count inﬁnity problem happened scenario router awould advertised learned route router variant called poison reverse possible router using variant advertise cost destination reach router send distance vector implemented using n second l interface vector interface d r r d d r d infinity send v end d r end l interface unfortunately sufﬁcient avoid count inﬁnity problem distance vector routing consider failure link network router figure count inﬁnity problem chapter network layer saylor url http saylor foundation computer networking principle protocol practice release having detected failure router asends distance vector b c e router c b c e router e unfortunately distance vector sent router ci lost transmission error router ci overloaded new count inﬁnity problem occur router csends distance vector b c router e router installs route distance reach aviac router esends distance vector b c e router band b c e router distance vector allows bto recover route distance reach link state routing link state routing second family routing protocol distance vector router use distributed algorithm compute routing table router exchange message allow router learn entire network topology based learned topology router able compute routing table using shortest path computation routing network modelled directed weighted graph router node link router edge graph positive weight associated directed edge router use shortest path reach destination practice different type weight associated directed edge unit weight link unit weight shortest path routing prefers path number intermediate router weight proportional propagation delay link link weight conﬁgured way shortest path routing us path smallest propagation delay bandwidthwhere ci constant larger highest link bandwidth network link weight conﬁgured way shortest path routing prefers higher bandwidth path lower bandwidth path usually weight associated directed edge correspond physical link link state protocol requires example weight set function link bandwidth asymmetric adsl link different weight upstream downstream direction variant possible network use optimisation algorithm ﬁnd best set weight minimize congestion inside network given trafﬁc demand router boot ﬁrst need discover router directly connected router sends hello message nseconds interface message contains router s address router unique address neighbouring router send hello message router automatically discovers neighbour connected hello message sent neighbour directly connected router router forward hello message receive hello message used detect link router failure link considered failed hello message received neighbouring router period figure exchange hello message principle saylor url http saylor foundation computer networking principle protocol practice release router discovered neighbour reliably distribute local link router network allow compute local view network topology router build packet lsp containing following information identiﬁcation address sender lsp age remaining lifetime lsp sequence number lsp link advertised lsp directed link represented following information identiﬁcation neighbour cost link lsps reliably distributed inside network using router s routing table table computed lsps received flooding algorithm used efﬁciently distribute lsps router router implement ﬂooding maintains link state database lsdb containing recent lsp sent router router receives lsp ﬁrst veriﬁes lsp stored inside lsdb router distributed lsp earlier doe need forward router forward lsp link link lsp received reliable ﬂooding implemented using following link set link router router r s lsp arrival link l newer lsp lsdb lsp link send lsp lsp flooded lsdb r return recent lsp originating router rthat stored lsdb newer return true recent note discussion newer implemented note recent lsp router implement ﬂooding able detect received lsp newer stored lsp requires comparison sequence number received lsp sequence number lsp stored link state database arpanet routing protocol used bit sequence number implemented comparison follows rfc def newer return comparison take account modulo used increment sequence number intuitively comparison divide circle sequence number half usually sequence number received lsp equal sequence number stored lsp incremented sequence number successive lsps differ router disconnected network time comparison worked october day arpanet crashed completely crash complex involved router point lsp lsp router stored lsdb router arpanet lsp newest replaced lsp router unfortunately arpanet router suffered memory problem sequence number binary replaced binary buggy router ﬂooded lsps present network newer newer unfortunately considered newer router started exchange link state packet solution recover problem shutdown entire network rfc current link state routing protocol usually use bit sequence number include special mechanism unlikely case sequence number reach maximum value using bit sequence number space take year link state packet generated second chapter network layer saylor url http saylor foundation computer networking principle protocol practice release deal memory corruption problem link state packet contain checksum checksum computed router generates lsp router verify checksum receives ﬂoods lsp furthermore router periodically verify checksum lsps stored lsdb flooding illustrated ﬁgure exchanging hello message router learns direct bours example router elearns directly connected router d bandc ﬁrst lsp sequence number contains directed link d b c router esends lsp link router d bandcinsert lsp lsdb forward link figure flooding example flooding allows lsps distributed router inside network relying routing table example lsp sent router eis likely sent twice link network example router bandcreceive e s lsp time forward link avoid sending lsp twice link possible solution slightly change router wait random time forwarding lsp link drawback solution delay ﬂood lsp router network increase practice router immediately ﬂood lsps contain new information addition removal link delay ﬂooding refresh lsps lsps contain exactly information previous lsp originating router ensure router receive lsps transmission error link state routing protocol usereliable ﬂooding reliable ﬂooding router use acknowledgement necessary retransmissions ensure link state packet successfully transferred neighbouring router thanks reliable ﬂooding router store lsdb recent lsp sent router network combining received lsps lsp router compute entire network topology figure link state database received router principle saylor url http saylor foundation computer networking principle protocol practice release note static dynamic link metric link state packet ﬂooded regularly router able measure quality delay load link adjust metric link according current quality dynamic adjustment included arpanet routing protocol experience showed difﬁcult tune dynamic adjustment ensure forwarding loop occur network today s link state routing protocol use metric manually conﬁgured router changed network operator network management tool link fails router attached link detect failure lack hello message received router detected local link failure generates ﬂoods new lsp longer contains failed link new lsp replaces previous lsp network router attached link detect failure exactly time link announced direction illustrated ﬁgure router ehas detected failure link ﬂooded new lsp router bhas detected failure figure connectivity check link reported lsp attached router router consider link having failed remove directed graph compute lsdb called connectivity check check allows link failure ﬂooded quickly single lsp sufﬁcient announce bad news link come used attached router sent lsps connectivity check allows dealing router failure router fails link fail deﬁnition unfortunately doe course send new lsp announce failure connectivity check ensures failed router removed graph router failed lsp removed lsdb using ageﬁeld included lsp ageﬁeld used bound maximum lifetime link state packet network router generates lsp set lifetime usually measured second ageﬁeld router regularly decrement ageof lsps lsdb lsp discarded agereaches thanks ageﬁeld lsp failed router doe remain lsdbs forever compute routing table router computes spanning tree rooted using dijkstra s shortest path algorithm routing table derived automatically spanning shown ﬁgure internet protocol internet protocol ip network layer protocol protocol suite ip allows application running transport layer use wide range heterogeneous datalink layer ip noted link state routing assumes router network memory store entire lsdb router memory store entire lsdb participate link state routing link state routing protocol allow router report memory removed graph router network chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure computation routing table designed link telephone line modem ip able use local area network ethernet token ring fddi new wide area data link layer technology atm frame relay recently wireless network umts gprs ﬂexibility ip ability use various type underlying data link layer technology key advantage figure ip reference model current version ip version speciﬁed rfc ﬁrst version later explain ip version expected replace ip version distant future ip version ip version data plane protocol network layer protocol suite design ip version based following assumption ip provide unreliable connectionless service tcp provides reliability required plication ip operates datagram transmission mode ip address ﬁxed size bit ip usable different type datalink layer ip host exchange variable length packet address important network layer protocol late developer designed research network interconnect research lab university tion bit wide address larger expected number host network furthermore bit nice address size router developer expecting widely used today address encoded bit ﬁeld address represented format sequence integer separated dot ﬁrst integer decimal representation signiﬁcant byte bit address example corresponds internet protocol saylor url http saylor foundation computer networking principle protocol practice release corresponds corresponds address used identify interface router host router address number interface datalink layer host single datalink layer interface single address growth wireless host datalink layer interface ethernet interface wifi interface host said multihomed multihomed host interface address important point deﬁned network layer protocol allocation network layer address naive allocation scheme provide address host host attached internet ﬁrst come ﬁrst served basis solution host belgium address host located africa use address unfortunately force router maintain speciﬁc route host ﬁgure show simple enterprise network router host associated routing table isolated address used figure scalability issue using isolated ip address preserve scalability routing important minimize number route stored router router store maintain route billion host connected today s internet router maintain route block address individual host host grouped subnets based location network typical subnet group host enterprise enterprise network usually composed lan interconnected router small block address enterprise s block usually assigned lan address composed part subnetwork identiﬁer host identiﬁer subnetwork identiﬁer composed high order bit address host identiﬁer encoded low order bit address illustrated ﬁgure figure subnetwork host identiﬁers inside address router need forward packet know subnet destination address able consult forwarding table forward packet rfc proposed use bit address encode length subnet identiﬁer led deﬁnition class unicast addition b c class rfc deﬁned dandeclasses address class d resp e address high order bit set resp class daddresses used ip multicast explained later class eaddresses currently unused discussion possible future usage chapter network layer saylor url http saylor foundation computer networking principle protocol practice release class bit length subnet id number network address network class bit class b bit class c bit class address ﬂexible class asubnet large organisation class csubnet small flexibility added introduction subnets inrfc subnets subnet identiﬁer size subnets allow network operator use subnet better match number host placed inside subnet subnet identiﬁer preﬁx network address obtained concatenating subnet identiﬁer host identiﬁer containing pi length subnet identiﬁer bit table provides example ip subnets subnet number address smallest address highest address ﬁgure provides simple example utilisation subnets enterprise network length subnet identiﬁer assigned lan usually depends expected number host attached lan link deployment used recent router using link rfc use address figure ip subnets simple enterprise network second issue concerning address network layer allocation scheme used allocate block address organisation ﬁrst allocation scheme based different class address pool address managed secretariat allocated address block ﬁrst served basis large organisation ibm bbn stanford mit able obtain class aaddress block organisation requested class baddress block containing address suitable enterprise university table provides example address block class b space way representing ip subnets use netmasks netmask bit ﬁeld phigh order bit set low order bit set number high order bit set length subnet identiﬁer netmasks usually represented dotted decimal format address example represented represented case netmask represented hexadecimal link address allocated called unnumbered link rfc section discussion unnumbered link internet protocol saylor url http saylor foundation computer networking principle protocol practice release subnet organisation ericsson sweden university akron usa university queensland australia lotus development usa universite catholique louvain belgium open software foundation usa internet victim success late organisation requesting block address started connecting internet organisation requested class b address block class aaddress block large limited supply class caddress block considered small unfortunately different class baddress block address space consumed quickly consequence routing table maintained router growing quickly router difﬁculties maintaining route limited figure evolution size routing table internet jul dec source rfc faced problem internet engineering task force decided develop classless interdomain routing cidr architecture rfc architecture aim allowing ip routing scale better architecture cidr contains important modiﬁcations compared rfc ip address class deprecated ip equipment use support subnets ip address block longer allocated basis instead cidr introduces hierarchical address allocation scheme ip router use match lookup destination address forwarding table modiﬁcations introduced improve scalability ip routing main address block allocation scheme neighbouring address block allocated different organisation conversely different address block allocated similar ganisations cidr address block allocated regional ip registry rir aggregatable manner rir responsible large block address region example ripe rir responsible europe rir allocates smaller address block large block internet service provider rfc internet service provider allocate smaller address block customer organisation request address block prove expects near future number host customer equivalent size requested address block main advantage hierarchical address block allocation scheme allows router maintain fewer route example consider address block allocated belgian university shown table router period include cisco ag http http chapter network layer saylor url http saylor foundation computer networking principle protocol practice release address block organisation universite catholique louvain katholiek universiteit leuven facultes universitaires la paix universite liege universite libre bruxelles university connected internet exclusively belnet university allocated different address block router belnet announce route university router internet maintain route university contrast consider high school government institution connected internet belnet address block assigned institution introduction cidr address block owned belnet cidr belnet announce single route cover high school difﬁculty aggregatable variable length subnets used cidr consider example fedict government institution us address block assume addition connected internet belnet fedict want connected internet service provider fedict network said multihomed shown ﬁgure figure multihoming cidr multihomed network router route address route belnet direct route route match address rfc router know route destination address forward packet route having longest preﬁx length case route used forward packet forwarding rule called longest preﬁx match speciﬁc match router implement forwarding rule understand longest preﬁx match forwarding consider ﬁgure rule route play particular role route preﬁx length match destination address route called default route packet destination received router ri destined router delivered appropriate transport protocol packet destination match route packet forwarded west interface packet destination match route packet forwarded north interface packet destination match route packet forwarded thewest interface internet protocol saylor url http saylor foundation computer networking principle protocol practice release packet destination match route packet forwarded south interface figure longest preﬁx match example longest preﬁx match implemented using different data structure possibility use trie ﬁgure show trie encodes route having different outgoing interface figure trie representing routing table note special address unicast address appear source destination address packet global internet worth noting block address special usage described rfc include chapter network layer saylor url http saylor foundation computer networking principle protocol practice release reserved common address block used host boot doe know address reserved loopback address host implementing loopback interface attached datalink layer convention address assigned interface allows process running host use contact process running host useful testing purpose reserved private network directly attached internet address called private address rfc address used address rfc host use address block connected network doe allocate address expected packet clariﬁed allocation address utilisation longest preﬁx match forward packet detailed look starting format packet packet format deﬁned rfc apart clariﬁcations backward compatible change packet format did change signiﬁcantly publication rfc packet use byte header shown packet contain optional header extension described later figure ip version header main ﬁelds header bit version indicates version ip used build header using version ﬁeld header allows network layer protocol evolve bit ip header length ihl indicates length ip header bit word ﬁeld allows use option required encoded bit ﬁeld header longer byte bit dsﬁeld used quality service usage described later bit protocol ﬁeld indicates transport layer protocol process packet s payload destination common value tcp udp bit length ﬁeld indicates total length entire packet header payload byte implies packet longer byte bit source address ﬁeld contains address source host bit destination address ﬁeld contains address destination host bit checksum protects header transmission error ﬁelds header used speciﬁc purpose ﬁrst bit time live ttl ﬁeld ﬁeld used avoid risk having packet caught inﬁnite loop transient http list assigned protocol number internet protocol saylor url http saylor foundation computer networking principle protocol practice release permanent error routing consider example situation depicted ﬁgure destination duse address ssends packet destination packet forwarded router bwhich forward router cthat forward router figure forwarding loop ip network unfortunately loop occur reason ip network network us static routing loop caused simple conﬁguration error second network us dynamic routing loop occur transiently example convergence routing protocol link router failure ttl ﬁeld header ensures forwarding loop network packet loop forever host send packet positive ttl usually router receives packet ﬁrst decrement ttl ttl packet discarded message sent packet s source section icmp router performs lookup forwarding table forward packet second problem heterogeneity datalink layer used different datalink layer datalink layer characteristic indicated earlier datalink layer characterised maximum frame size ip s point view datalink layer interface characterised maximum transmission unit mtu mtu interface largest packet including header send table provides common mtu datalink layer mtu ethernet byte wifi byte atm byte byte token ring byte fddi byte send kbytes long packet datalink layer technology used today able send kbytes packet inside frame furthermore illustrated ﬁgure problem host send packet large datalink layer used intermediate router figure need fragmentation reassembly initial ip speciﬁcation rfc suggested router decrement ttl second ensure packet remain ttl second network practice router implementation simply chose decrement ttl initial ttl value used send ip packet vary implementation current ip implementation use initial ttl http additional information ip datalink layer technology requires special mechanism rfc discussion special problem posed chapter network layer saylor url http saylor foundation computer networking principle protocol practice release solve problem includes packet fragmentation reassembly mechanism host mediate router fragment packet packet long sent datalink layer fragmentation completely performed ip layer large fragmented ets called fragment fragment large packet normal packet forwarded destination large packet intermediate router fragmentation mechanism relies ﬁelds header length identiﬁcation ﬂags thefragment offset header contains ﬂags fragment anddon t fragment df dfﬂag set indicates packet fragmented basic operation fragmentation follows large packet fragmented fragment size fragment equal maximum transmission unit link used forward packet packet contains bit identiﬁcation ﬁeld packet fragmented theidentiﬁcation large packet copied fragment allow destination reassemble received fragment fragment fragment offset indicates unit byte position payload fragment payload original packet length ﬁeld fragment indicates length payload fragment normal packet finally fragment ﬂag set fragment large packet following detail fragmentation assuming packet doe contain option mtu maximum size packet including header outgoing link mtu send p packet large int n time byte df discard p packet fragmented ip len payload len payload maxpayload maxpayload payload forward tosend fragment packet arrive destination order fragment forwarded pendently network follow different path furthermore fragment lost reach destination reassembly algorithm used destination host roughly follows destination verify received packet fragment checking value fragment ﬂag fragment offset fragment offset set fragment ﬂag reset received packet fragmented packet fragmented reassembled reassembly algorithm relies identiﬁcation ﬁeld received fragment associate fragment corresponding packet reassembled furthermore fragment offset ﬁeld indicates position fragment payload original unfragmented packet finally packet fragment ﬂag reset allows destination determine total length original unfragmented packet note reassembly algorithm deal unreliability ip network implies fragment duplicated fragment reach destination destination easily detect fragment duplication thanks fragment offset deal fragment loss reassembly algorithm bound internet protocol saylor url http saylor foundation computer networking principle protocol practice release time fragment packet stored buffer packet reassembled implemented starting timer ﬁrst fragment packet received packet reassembled expiration timer fragment discarded packet considered lost original ip speciﬁcation rfc deﬁned type option added ip header option encoded using type length value format widely used today brieﬂy described additional detail rfc interesting option option related routing record route option deﬁned allow network manager determine path followed packet record route option present router packet s path insert ip address option option implemented optional header contain byte impossible discover entire path global internet traceroute despite limitation better solution record path destination routing option strict source route loose source route option main idea option host want reason specify path followed packet sends thestrict source route option allows host indicate inside packet exact path followed strict source route option contains list address pointer indicate address list router receives packet containing option doe lookup destination address routing table forward packet directly router list advance pointer illustrated ﬁgure sforces packet follow path figure usage strict source route option maximum length optional header severe limitation strict source route option record route option loose source route option doe suffer limitation option allows sending host indicate inside packet router traversed reach destination shown ﬁgure ssends packet containing list address pointer router list initially pointer point rb rareceives packet sent s look forwarding table address pointed loose source route option destination address packet forwarded router rbthat recognises address option advance pointer address listed loose source route option anymore rband downstream router forward packet performing lookup destination address figure usage loose source route option option usually ignored router cause security problem rfc chapter network layer saylor url http saylor foundation computer networking principle protocol practice release icmp version necessary intermediate router destination host inform sender packet problem occurred processing packet protocol suite reporting internet control message protocol icmp icmp deﬁned rfc icmp message carried payload ip packet protocol value reserved icmp icmp message composed byte header variable length payload usually contains ﬁrst byte packet triggered transmission icmp message figure icmp version rfc icmp header type andcode ﬁelds indicate type problem detected sender icmp message checksum protects entire icmp message transmission error data ﬁeld contains additional information icmp message main type icmp message unreachable adestination unreachable icmp message sent packet delivered destination routing problem different type unreachability distinguished unreachable icmp message sent router doe route subnet containing destination address packet unreachable icmp message sent router attached subnet contains destination address packet destination address reached time unreachable icmp message sent destination host received packet doe support transport protocol indicated packet s protocol ﬁeld unreachable icmp message sent destination host received packet destined port number server process bound port needed icmp message sent router receives packet don t fragment ﬂag set larger mtu outgoing interface icmp message sent router lan consider lan host router assume connected subnet connected subnet host lan sends packet forward packet lan reach optimal packet sent twice lan case send icmp redirect message host inform sent packet directly allows host send packet directly problem icmp message sent router host receives ip packet containing error invalid option internet protocol saylor url http saylor foundation computer networking principle protocol practice release figure icmp redirect quench router supposed send message discard packet congestion sending icmp message case congestion best way reduce congestion inclusion congestion control scheme tcp icmp message deprecated exceeded type time exceeded icmp message exceeded attl exceeded message sent router discard packet ttl reached time exceeded icmp message sent destination unable reassemble fragment packet expiration reassembly timer request andecho reply icmp message used ping network ging software note redirection attack icmp redirect message useful router attached lan host used care create important security risk annoying attack ip network called man middle attack attack occurs attacker able receive process possibly modify forward packet exchanged source destination attacker receives packet easily collect password credit card number inject fake information established tcp connection icmp redirects unfortunately enable attacker easily perform attack ﬁgure consider host hthat attached lan hsends aan icmp redirect preﬁx aforwards hall packet want send preﬁx hcan forward avoid attack host ignore icmp redirect message receive ping used network operator verify given ip address reachable host supposed reply icmp echo reply message receives icmp echo request message sample usage ofping shown ping ping data byte byte m byte m byte m byte m byte m ping statistic packet transmitted packet received packet loss m year ago host replied echo request icmp message security problem affected implementation implementation conﬁgured disable answering echo request icmp message chapter network layer saylor url http saylor foundation computer networking principle protocol practice release useful debugging tool traceroute traceroute man page describes tool print route packet network host traceroute us ttl exceeded icmp message discover mediate router path destination principle traceroute simple router receives ip packet ttl set decrement ttl forced return sending host ttl exceeded icmp message containing header ﬁrst byte discarded ip packet discover router network path simple solution ﬁrst send packet ttl set packet ttl set sample traceroute output shown traceroute traceroute hop max byte packet m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m traceroute output show hop path host uclouvain main ietf server hop traceroute provides address router sent icmp message measured source router traceroute sends probe ttl value case hop icmp message received different address usually different packet source followed different network important utilisation icmp message discover maximum mtu used reach destination fragmentation explained earlier router receives packet larger mtu outgoing link fragment packet unfortunately fragmentation complex operation router perform line rate furthermore tcp segment transported ip packet fragmented network loss single fragment force tcp retransmit entire segment fragment tcp able send packet require fragmentation network retransmit information lost network addition ip reassembly cause challenge high speed discussed rfc using ip fragmentation allow udp application exchange large message raise security issue icmp combined don t fragment df ﬂag used tcp implementation discover largest mtu size allowed reach destination host causing network fragmentation path mtu discovery mechanism deﬁned rfc tcp implementation includes path mtu discovery request layer send segment inside packet having dfﬂag set prohibits intermediate router fragmenting packet router need forward unfragmentable packet link smaller mtu return fragmentation needed icmp message source indicating mtu outgoing link icmp message contains mtu router s outgoing link data ﬁeld reception icmp message source tcp implementation adjusts maximum segment size ms packet containing segment sends forwarded router requiring fragmentation detailed analysis traceroute output outside scope document additional information internet protocol saylor url http saylor foundation computer networking principle protocol practice release interaction datalink layer mentioned ﬁrst section chapter main type datalink layer link lan supporting broadcast multicast nbma network important issue addressed using type network ﬁrst issue device obtains address second issue packet exchanged datalink layer service link address communicating device conﬁgured manually using simple protocol address conﬁgured manually link router link used attach host network automatic conﬁguration preferred order avoid problem incorrect address example ppp speciﬁed rfc includes ip network control protocol used router ﬁgure send address attached host conﬁgure interface transmission packet link discussed chapter chap lan figure link using lan introduces additional problem lan device identiﬁed unique datalink layer address datalink layer service used host attached lan send frame host attached lan sending host know datalink layer address destination host example ﬁgure show host attached lan conﬁgured address subnet datalink layer address represented single network host want send packet host having address know datalink layer address host figure simple lan simple network shown possible manually conﬁgure mapping address host corresponding datalink layer address larger lan impossible ease utilisation lan host able automatically obtain datalink layer address corresponding address lan objective address resolution protocol arp deﬁned rfc arp datalink layer protocol used relies ability datalink layer service easily deliver broadcast frame device attached lan practice local area network use address encoded bit ﬁeld recent local area network technology use bit address chapter network layer saylor url http saylor foundation computer networking principle protocol practice release easiest way understand operation arp consider simple network shown assume host need send packet host ip address belongs subnet packet sent directly destination datalink layer service use service sending host ﬁnd datalink layer address attached host host maintains arp cache containing list mapping address datalink layer address know host boot arp cache ﬁrst consults arp cache cache doe contain requested mapping host sends broadcast arp query frame lan frame contains datalink layer address sending host requested address broadcast frame received device lan host owns requested address reply returning unicast arp reply frame requested mapping reception reply sending host update arp cache sends packet using datalink layer service deal device address reconﬁgured arp implementation remove cache entry used minute implementation arp cache entry time time sending arp note security issue address resolution protocol arp old widely used protocol unfortunately designed security issue concern arp insecure design host using arp subject type attack malicious host create denial service attack lan sending random reply received arp query pollute arp cache host lan ﬁxed network attack detected administrator physically remove malicious host lan wireless network removing malicious host difﬁcult second type attack attack used network attack attacker able read possibly modify message sent attacked device attack possible lan assume ﬁgure host malicious like receive modify packet sent host host achieved easily host manages sending fake arp reply convince host resp datalink layer address used reach resp arp used device connected lan implement router endhosts implement arp host need send packet destination outside local subnet ﬁrst send packet router reside subnet consider example network shown ﬁgure host conﬁgured address subnet us default router send packet address host ﬁrst need know datalink layer default router send arp request reception arp reply host update arp table sends packet frame default router router forward packet ﬁnal destination figure simple lan router early day internet ip address manually conﬁgured host router changed manual conﬁguration cause error cult debug recent implementation able detect misconﬁgurations example host attached subnet address unable communicate detect problem host send arp request conﬁgured address time addressed changed rfc receive answer arp request trigger alarm inform administrator chapter description implementation arp linux kernel example consider option speciﬁed ifconﬁg utility http unix host internet protocol saylor url http saylor foundation computer networking principle protocol practice release ease attachment host subnets network support dynamic host conﬁguration protocol dhcp rfc dhcp allows host automatically retrieve assigned address dhcp server associated dhcp server manages pool address assigned subnet host ﬁrst attached subnet sends dhcp request message udp segment dhcp server listens port host know address address dhcp server udp segment sent inside packet source destination address respectively dhcp request contain various option host datalink layer address server capture dhcp request selects unassigned address address pool sends assigned address dhcp reply message contains datalink layer address host additional information subnet mask address address default router address dns resolver dhcp reply message sent packet source destination address respectively address dhcp server broadcast address dhcp reply speciﬁes lifetime address allocation force host renew address allocation expires thanks limited lease time ip address automatically returned pool address host powered reduces waste address nbma network interaction datalink layer complex arp protocol used lan nbma network use special server store mapping ip dress corresponding datalink layer address asynchronous transfer mode atm network example use atmarp protocol deﬁned rfc nexthop resolution protocol nhrp deﬁned inrfc atm network frequently used today detailed operation server operation device point description useful detailed look implementation sends receives forward packet simplest case host need send segment packet host performs operation decide interface packet sent second create corresponding ip packet s simplify discussion section ignore utilisation option severe limitation today packet rarely contain option detail processing option relevant rfcs rfc furthermore assume link used defer explanation operation local area network chapter host having ndatalink layer interface manages address address assigned convention loopback address address assigned ndatalink layer interface host maintains routing table containing entry loopback address entry subnet identiﬁer assigned interface furthermore host usually us interface default interface sending packet addressed directly connected destination represented default route associated interface transport protocol running host request transmission segment usually provides destination address layer addition implementation ﬁrst performs longest preﬁx match destination address routing table lookup return identiﬁcation interface used send packet host create packet containing segment source address packet address host interface returned longest preﬁx match protocol ﬁeld packet set identiﬁcation local transport protocol created segment ttl ﬁeld packet set default ttl used host host choose packet s identiﬁcation identiﬁcation important packet fragmented network ensures destination able reassemble received fragment ideally sending host send packet twice identiﬁcation destination host order ensure fragment correctly reassembled destination unfortunately bit identiﬁcation ﬁeld expected msl practice usually dhcp server group subnets router capture subnet dhcp message forward dhcp server transport protocol implementation specify packet sent dfset set tcp implementation using path mtu discovery request transmission packet dfﬂag set chapter network layer saylor url http saylor foundation computer networking principle protocol practice release minute implies maximum bandwidth given destination limited roughly mbps realistic byte mtu bandwidth drop mbps rfc fragmentation possible low reason host highly encouraged avoid fragmentation despite mtu outgoing interface smaller packet s length packet fragmented finally packet s checksum computed transmission host receives packet destined operation perform check packet s checksum checksum incorrect packet discarded check packet fragmented yes packet passed reassembly algorithm described earlier packet passed upper layer looking protocol ﬁeld tcp udp host doe implement transport layer protocol corresponding received protocol ﬁeld sends protocol unreachable icmp message sending host received packet contains icmp message protocol ﬁeld set processing complex icmp message trigger transmission icmp message type icmp message indicate error caused previously transmitted packet icmp message usually forwarded transport protocol sent erroneous packet inspecting content icmp message includes header ﬁrst bit erroneous packet ip packet did contain option case packet transport protocol ﬁnd ﬁrst bit transport header source destination port determine affected transport ﬂow important path mtu discovery example router receives packet ﬁrst check packet s checksum checksum invalid discarded router check destination address address assigned router router behave host process packet described router mainly forward packet need accessed host network operator network management software packet addressed router forwarded outgoing interface according router s routing table router ﬁrst decrement packet s ttl ttlreaches attl exceeded icmp message sent source packet header modiﬁed checksum recomputed fortunately us arithmetic checksum router incrementally update packet s checksum described rfc router performs longest preﬁx match packet s destination address forwarding table match router return destination unreachable icmp message source lookup return interface packet forwarded forwarding packet interface router ﬁrst compare length packet mtu outgoing interface packet smaller mtu forwarded fragmentation needed icmp message sent dfﬂag sent packet fragmented dfwas set note longest preﬁx match ip router performing longest preﬁx match line rate router requires highly tuned data structure algorithm consider example implementation longest match based radix tree router gbps link link router receive byte packet second forward packet line rate router process packet nanosecond achieved software implementation hardware implementation main difﬁculty lie number memory access necessary perform longest preﬁx match nanosecond small compared memory access required naive longest preﬁx match implement additional information faster longest preﬁx match algorithm ip version late early growth internet causing operational problem router router single cpu mbyte ram store operating packet buffer routing table given rate allocation preﬁxes company university willing join internet routing table growing quickly feared preﬁxes quickly allocated study cited rfc estimated network near future august estimate indicated class b space exhausted march type noted packet fragmented dfﬂag reset different identiﬁcation ﬁelds identiﬁcation ﬁeld used packet having dfﬂag set internet protocol saylor url http saylor foundation computer networking principle protocol practice release solution developed solve problem ﬁrst short term solution introduction classless inter domain routing cidr second short term solution network address translation nat mechanism deﬁned rfc nat allowed multiple host share single public ip address explained section middleboxes parallel solution allowed internet continue usable internet engineering task force started work developing replacement work started open proposal outlined rfc group responded proposal generation internet protocol ipng tuba proposed rfc andrfc pip proposed rfc sipp proposed rfc ietf decided pursue development ipng based sipp proposal ip version used experimental protocol deﬁned rfc successor ip version ip version initial ip version deﬁned rfc designed based following assumption address encoded bit ﬁeld header simple format easily parsed hardware device host able conﬁgure address automatically security note ipng address size work ipng started clear bit small encode ipng address proposal used longer address discussion suitable address length ﬁrst approach proposed sip rfc use bit address bit address space billion time larger address space furthermore implementation perspective bit cpu considered bit address naturally ﬁt inside register approach use existing address format tuba proposal rfc reuses iso clnp byte address byte address provided room growth using iso clnp favored ietf partially political reason despite fact mature clnp implementation available bit appeared reasonable compromise time addressing architecture experience revealed scalability network layer protocol heavily depends addressing architecture designer spent lot effort deﬁning ing architecture rfc address bit wide implies different address face earth implies address square meter earth compared offer address square kilometer signiﬁcant improvement paper support unicast multicast anycast address unicast address used identify interface host host datalink layer interface ethernet interface wifi interface need address general unicast address structured shown ﬁgure unicast address composed part global routing preﬁx assigned internet service provider owns block address subnet identiﬁer identiﬁes customer isp interface identiﬁer identiﬁes particular interface endsystem chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure structure unicast address today s deployment interface identiﬁers bit wide implies different address grouped appear waste resource using bit host identiﬁer allows address provides beneﬁts security point view explained section note textual representation address necessary write address text format manually conﬁguring address documentation purpose preferred format writing address x x x x x x x x x s hexadecimal digit representing part address example address abcd abcd address contain long sequence bit set case compact notation deﬁned notation used indicate group bit block containing bit set example represented represented represented represented preﬁx represented length length preﬁx bit example notation correspond preﬁx practice type unicast address unicast address allocated block responsibility iana current allocation address block regional internet registry rir ripe europe arin afrinic africa received block address internet service provider region isps address customer considering allocation address type address allocation distinguished rirs allocate pi address pi address usually allocated internet service provider large company connected different isps pi address block allocated company company use address block provider choice change provider internet service provider allocate pa address block pi address block customer company connected isp use pa address internet protocol saylor url http saylor foundation computer networking principle protocol practice release drawback pa address company using pa address block change provider need change address us nightmare operational perspective company lobbying obtain piaddress block small connected single provider typical size address block internet service provider single company single user home user connected adsl rare case known endhost attached company want use connected internet rfc deﬁnes unique local unicast ula address ula address play similar role private address deﬁned rfc size address block allows ula ﬂexible private address furthermore ietf reserved address special usage important one compact form loopback address address logical interface running enabled host equivalent compact form unspeciﬁed address address host use source address trying acquire ofﬁcial address type unicast address link local unicast address address address block deﬁned rfc host compute link local address concatenating preﬁx bit identiﬁer interface link local address used host attached link local area network need exchange packet used notably address discovery purpose usage restricted link router forward packet source destination address link local address link local address deﬁned rfc link local address used host obtain regular address isolated lan figure link local address structure important consequence unicast addressing architecture utilisation address host address implies stack able handle multiple address case rfc deﬁnes special type anycast address subnetwork having preﬁx address bit set anycast address corresponds router inside work anycast address used host quickly send packet router inside subnetwork finally rfc deﬁnes structure multicast structure depicted ﬁgure low order bit multicast address group s identiﬁer high order bit used marker distinguish multicast address unicast address notably bit ﬂag ﬁeld indicates address temporary permanent finally scope ﬁeld indicates boundary forwarding packet destined particular address scope indicates router forward packet destined multicast address organisation indicates packet sent multicast destination address leave organisation finally global scope intended multicast group spanning global internet list allocated multicast address available http chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure multicast address structure address known example endsystem automatically belong multicast group router automatically belong multicast group discus multicast later packet format packet format heavily inspired packet format proposed sipp protocol rfc standard header deﬁned rfc occupies byte contains different ﬁelds shown ﬁgure figure ip version header rfc apart source destination address header contains following ﬁelds bit ﬁeld set intended allow ip evolve future needed class bit ﬁeld play similar role dsbyte header label ﬁeld initially intended used tag packet belonging ﬂow writing clear guideline ﬁeld used host router length size packet payload byte length encoded bit ﬁeld packet contain byte payload header bit ﬁeld indicates header follows header transport layer header tcp udp option handling option header allows simplifying processing packet compared iana maintains list allocated header type http registry used protocol ﬁeld header internet protocol saylor url http saylor foundation computer networking principle protocol practice release limit bit ﬁeld indicates number router forward packet decremented router purpose ttl ﬁeld header comparison packet simpler easier process router ﬁrst important difference checksum inside header mainly datalink layer transport protocol include checksum crc protect transmission error adding checksum header forced router recompute checksum packet limited beneﬁt detecting error practice ip checksum allows catching error occur inside router memory corruption packet reach destination beneﬁt small given reliability current memory cost computing checksum router second difference header doe support fragmentation reassembly experience shown fragmenting packet router costly developer decided router fragment packet anymore router receives packet long forwarded packet dropped router return message inform sender problem sender fragment packet perform path mtu discovery packet fragmentation performed source using option difference option simpler easier process option note header compression low bandwidth link given size header cause huge overhead low bandwidth link especially small packet exchanged v oice ip application environment technique used reduce overhead ﬁrst solution use data compression datalink layer compress information exchanged technique similar data compression algorithm used tool compress orgzip rfc compress stream bit taking advantage fact stream contain ip packet known structure second solution compress ip tcp header header compression technique deﬁned rfc advantage redundancy successive packet ﬂow signiﬁcantly reduce size protocol header solution deﬁne compressed encoding header match capability underlying datalink layer rfc option option considered header containing multiple byte ensure option packet aligned bit boundary deﬁnes type option option option processed router packet s path type routing header similar loose source routing option fragmentation option used fragmenting packet destination option security option allow host exchange packet cryptographic authentication ah header encryption authentication esp header rfc provides lot encoding different type option section discus reader consult rfc information option ﬁrst point note option contains header ﬁeld indicates type header follows option second point note order allow router efﬁciently parse packet option processed router option type routing header appear ﬁrst packet allows router process packet forced analyse packet s option point note destination option encoded using type length value format furthermore type ﬁeld contains bit indicate router doe understand option ignore option discard packet allows introduction new option network forcing device upgraded support time option deﬁned rfc speciﬁes jumbogram enables support packet containing payload larger byte jumbo packet payload length set chapter network layer saylor url http saylor foundation computer networking principle protocol practice release jumbogram option contains packet length bit ﬁeld packet sent source destination router path support option writing doe jumbogram option implemented router alert option deﬁned rfc second example option packet contain option processed special way intermediate router option used ip packet carry resource reservation protocol rsvp message usage explained later type routing header deﬁned rfc example option processed router option encoded shown figure type routing header rfc type routing option intended allow host indicate loose source route followed packet specifying address router forward packet unfortunately work routing header including entertaining demonstration scapy revealed severe security problem routing header reason loose source routing type routing header removed speciﬁcation rfc fragmentation performed exclusively source host relies fragmentation header bit header composed ﬁelds anext header ﬁeld indicates type header follows fragmentation header areserved ﬁeld set fragment offset unsigned integer contains offset byte unit data following header relative start original packet ﬂag set fragment packet fragment bit identiﬁcation ﬁeld indicates original packet fragment belongs host sends fragmented packet ensure doe reuse identiﬁcation ﬁeld packet sent destination period msl second easier bit identiﬁcation used fragmentation header bit identiﬁcation ﬁeld header implementation send fragment packet increasing fragment offset order starting ﬁrst fragment send fragment reverse order starting fragment solution advantageous host need reassemble fragment easily allocate buffer required internet protocol saylor url http saylor foundation computer networking principle protocol practice release reassemble fragment packet reception fragment host receives ﬁrst fragment packet know priori length entire packet ﬁgure provides example fragmented packet containing udp segment header type reserved fragmentation option figure fragmentation example finally type option encaspulating security payload esp deﬁned rfc authentication header ah deﬁned rfc header used ipsec rfc discussed chapter icmp version deﬁned rfc companion protocol companion protocol used router host report problem processing packet chapter datalink layer local area network used address traditional utilisation similar message carried inside packet thenext header ﬁeld icmp message contains bit header type ﬁeld code ﬁeld bit checksum computed entire message message body contains copy packet error figure icmp version packet format speciﬁes class message error message indicate problem handling packet informational message type error message deﬁned rfc destination unreachable message sent destination address packet unreachable code ﬁeld icmp header contains additional information type unreachability following code speciﬁed rfc route destination indicates router sent message did route packet s destination chapter network layer saylor url http saylor foundation computer networking principle protocol practice release communication destination administratively prohibited indicates ﬁrewall refused forward packet destination scope source address message sent source using address reach global unicast address outside subnet address unreachable message indicates packet reached subnet nation host owns destination address reached port unreachable message indicates packet received destination application listening speciﬁed port packet big router send message received packet larger mtu outgoing link message contains mtu link byte allows sending host implement path mtu discovery rfc time exceeded error message sent router host router set code report reception packet hop limit reached host set code report unable reassemble received fragment parameter problem message used report reception packet erroneous header ﬁeld type unknown header ip option type case message body contains erroneous packet ﬁrst bit message body contain pointer error type informational message deﬁned rfc echo request andecho reply used test reachability destination using allows discovery path source destination using output show traceroute host uclouvain main ietf server note path different path described earlier traceroutes performed time hop max byte packet m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m m note rate limitation icmp message hardware based router use special purpose chip interface forward packet line rate chip optimised process correct ip packet able create icmp message line rate chip receives ip packet trigger icmp message interrupt main cpu router software running cpu process packet cpu slower hardware acceleration interface overloaded process ip packet line rate generate icmp message received packet protect cpu router limit rate hardware interrupt main cpu rate icmp message generated implies erroneous ip packet cause transmission icmp message risk overloading main cpu router reason using option including router alter option discussion issue router alert ip option http http internet protocol saylor url http saylor foundation computer networking principle protocol practice release interaction datalink layer difference considering interaction datalink layer interaction network datalink layer performed using used resolve datalink layer address corresponds given address neighbour discovery protocol ndp deﬁned rfc ndp similar arp important difference ndp message exchanged message arp message sent datalink layer frame second arp request sent broadcast frame ndp solicitation message sent multicast packet transported inside multicast frame operation ndp protocol similar arp obtain address mapping host sends neighbour solicitation message message sent inside message placed packet source address address requesting host destination address multicast address host listen neighbour solicitation contains requested address owner requested address reply sending unicast neighbour advertisement message requesting host ndp suffers similar security issue arp protocol possible secure ndp using cryptographically generated address cga deﬁned rfc secure neighbour discovery protocol deﬁned rfc detailed description protocol outside scope chapter network support dynamic host conﬁguration protocol extension dhcp deﬁned inrfc operation similar dhcp described earlier addition network support mechanism assign address host stateless address uration slac deﬁned rfc host boot derives identiﬁer datalink layer concatenates bit identiﬁer preﬁx obtain address sends neighbour solicitation address target verify host using address subnet receives neighbour advertisement indicating address used host generates bit identiﬁer sends neighbour solicitation answer host considers address valid address used source address ndp message sent subnet automatically conﬁgure global address host know globally routable preﬁx used local subnet router regularly send router tisement message indicate preﬁx assigned subnet reception message host derive global address concatenating bit identiﬁer received preﬁx concludes slac sending neighbour solicitation message targeted global address ensure host using address middleboxes architecture ip protocol deﬁned type device considered network layer endhosts router endhosts source destination ip packet router forward packet router forward ip packet consults forwarding table update packet s ttl recomputes checksum forward hop router doe need read change content packet s payload today s internet exist device strictly router process modify forward ip packet device called middleboxes rfc middleboxes operate network layer middleboxes able analyse payload received packet extract transport header case application layer protocol section brieﬂy type middleboxes ﬁrewalls network address translation nat device discussion different type middleboxes reference rfc firewall internet research network interconnecting research lab security concern host agreed exchange packet tcp connection host datalink layer address derive bit identiﬁer host raise privacy concern host use identiﬁer attacker use track host internet extension stateless address conﬁguration mechanism doe raise privacy concern deﬁned rfc privacy extension allow host generate bit identiﬁer randomly time attache subnet impossible attacker use identiﬁer track host chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure ip middleboxes reference model user company connected internet allowing unlimited access host managed started concern company furthermore end security issue affected internet ﬁrst internet worm widely publicised security breach security problem convinced industry ip network key company s infrastructure protected special device like security guard fence used protect building special device quickly called ﬁrewalls typical ﬁrewall interface external interface connected global internet internal interface connected trusted network ﬁrst ﬁrewalls included conﬁgurable packet ﬁlters packet ﬁlter set rule deﬁning security policy network practice rule based value ﬁelds ip transport layer header ﬁeld ip transport header used ﬁrewall rule common one ﬁlter source address example company decide discard packet received competitor case packet source address belong competitor s address block rejected ﬁlter destination address example host research lab company receive packet global internet host ﬁnancial department ﬁlter protocol number ip header example company allow host use tcp udp experimental transport protocol ﬁlter tcp udp port number example dns server company received udp segment destination port set ofﬁcial smtp server company send tcp segment source port set ﬁlter tcp ﬂags example simple solution prohibit external host opening tcp nections host inside company discard tcp segment received external interface syn ﬂag set ﬁrewalls called stateless ﬁrewalls maintain state tcp connection pas type ﬁrewalls stateful ﬁrewalls stateful ﬁrewall track state tcp connection passing maintains tcb tcp connection tcb allows reassemble received segment order extract payload perform veriﬁcations application layer ﬁrewalls able inspect url accessed using http log url visited block tcp connection dangerous url exchanged ﬁrewalls verify smtp command used tcp connection established port tcp connection port http command response note ﬁrewalls apart ﬁrewalls different type security device installed periphery corporate work intrusion detection system id popular snort stateful device capable matching reassembled segment regular expression corresponding signature virus worm type attack deep packet inspection dpi type middlebox analysis packet s load able reassemble tcp segment order detect inappropriate usage id mainly used corporate network dpi mainly used internet service provider isps use dpi detect limit internet protocol saylor url http saylor foundation computer networking principle protocol practice release bandwidth consumed application country china iran use dpi detect inappropriate internet usage nat network address translation nat proposed andrfc short term solution deal expected shortage address late early combined cidr nat helped signiﬁcantly slow consumption address nat middlebox interconnects network using address different addressing space usually addressing space public internet using private address deﬁned rfc common deployment nat broadband access router shown ﬁgure broadband access router interconnects home network wifi ethernet based global internet isp adsl catv single address allocated broadband access router network address translation allows host attached home network share single public address figure simple nat public address second type deployment enterprise network shown ﬁgure case nat functionality installed border router enterprise private address assigned enterprise host border router manages pool containing public address figure enterprise nat public address implies nat device translates ip address nat maintains mapping table private ip address used internal network public address nat allows large number host share pool ip address host access global internet time simplest nat middlebox us mapping private ip address public ip address understand operation let assume nat shown just booted nat receives ﬁrst packet source sin internal network destined public internet creates mapping internal address sand ﬁrst address pool public address translates received packet sent public internet translation performed followed chapter network layer saylor url http saylor foundation computer networking principle protocol practice release source address packet s replaced mapped public address checksum ip header incrementally updated content changed packet carried tcp udp segment transport layer checksum included segment updated computed segment includes source destination address packet destined received public internet nat consults mapping table ﬁnd received packet translated forwarded internal network work long pool public ip address nat doe case mapping removed mapping table allow packet new host translated garbage collection implemented adding entry mapping table timestamp contains utilisation time mapping entry timestamp updated time corresponding entry used garbage collection algorithm remove oldest mapping entry table drawback simple enterprise nat size pool public address small allow large number host share nat case better solution allow nat translate ip address port number nat maintains mapping table map internal ip address tcp port number external ip address tcp port number nat receives packet internal network performs lookup mapping table packet s source ip address source tcp port number mapping source ip address source tcp port number packet translated value mapping table checksum updated packet sent global internet mapping new mapping created ﬁrst available couple ip address tcp port number packet translated entry mapping table removed end corresponding tcp connection nat track tcp connection state like stateful ﬁrewall idle time nat receives packet global internet look mapping table packet s nation ip address destination tcp port number mapping packet translated forwarded internal network packet discarded nat determine particular internal host packet forwarded reason port number nat support large number host single public address noted application open large number tcp connection tcp connection consumes mapping entry nat s mapping table nat allows host share public address using nat important drawback difﬁcult external host open tcp connection host nat consider beneﬁt security perspective nat confused ﬁrewall technique traverse nats second nat break transparency network transport layer main problem application layer protocol us ip address adus sends popular example ftp deﬁned rfc case mismatch packet header translated nat packet payload solution solve problem place application level gateway alg nat understands application layer protocol translate ip address port number adus deﬁning alg application costly application developer avoid using ip address message exchanged application layer rfc note nat nat successful given size addressing space designer expected nat useful transparency key selling point compared expected shortage address lead enterprise network administrator consider seriously result analysis ietf deﬁned nat device speciﬁc usage nat allow host access destination conversely early speciﬁcations included network address translation protocol translation pt mechanism deﬁned rfc mechanism later deprecated rfc recently restarted middlebox performs packet translation allow host contact server rfc internet protocol saylor url http saylor foundation computer networking principle protocol practice release routing ip network large ip network global internet router need exchange routing information internet interconnection network called domain different responsibility writing internet composed different domain number growing domain small enterprise manages router single building larger enterprise router multiple location large internet service provider managing thousand router class routing protocol used allow domain efﬁciently exchange routing information figure organisation small internet ﬁrst class routing protocol intradomain routing protocol called interior way protocol igp intradomain routing protocol used router inside domain exchange routing information destination reachable inside domain intradomain routing protocol domain use rip distance vector protocol domain use routing tocols ospf finally domain use static routing proprietary protocol igrp eigrp intradomain routing protocol usually objective distribute routing information corresponds shortest path router domain second allow router quickly recover link router failure second class routing protocol interdomain routing protocol called exterior gateway protocol egp objective interdomain routing protocol distribute routing information domain scalability reason interdomain routing protocol distribute aggregated routing information considers domain black box important difference intradomain interdomain routing routing policy used domain inside single domain router considered equal route available reach given destination preﬁx best route selected based technical criterion route shortest delay route minimum number hop route highest bandwidth consider interconnection domain managed different organisation longer true domain implement routing policy routing policy composed element import ﬁlter speciﬁes route accepted domain export ﬁlter speciﬁes route advertised domain ranking algorithm selects best route domain know route destination preﬁx later important difference objective interdomain routing protocol ﬁnd cheapest route destination interdomain routing protocol bgp intradomain routing section brieﬂy key feature main intradomain unicast routing protocol rip ospf chapter network layer saylor url http saylor foundation computer networking principle protocol practice release rip routing information protocol rip simplest routing protocol standardised protocol suite rip deﬁned rfc additional information rip rip router periodically exchange rip message format message shown rip message sent inside udp segment destination port set rip message contains ﬁelds cmd ﬁeld indicates rip message request response router send rip response message second message contain distance vector summarize router s routing table rip request message used router host query router content routing table typical usage router boot quickly want receive rip response neighbour compute routing table current version rip version deﬁned rfc rfc figure rip message format rip header contains authentication ﬁeld authentication used network administrator ensure rip message sent router manage used build routing table rfc support basic authentication scheme router conﬁgured password include password rip message secure attacker know password capturing single rip message password protect conﬁguration error stronger authentication scheme described rfc andrfc detail mechanism outside scope section rip message contains set route entry route entry encoded byte ﬁeld format shown rip initially designed suitable different network layer protocol tations rip used xns ipx network ﬁrst ﬁeld rip route entry address family identiﬁer afi identiﬁer indicates type address route us important ﬁelds route entry preﬁx netmask indicates length subnet identiﬁer encoded bit netmask metric metric encoded bit ﬁeld maximum rip metric rip figure format rip route entry rfc byte route entry difﬁcult use format support instead deﬁning variable length route entry format designer rfc deﬁned new format doe include afi ﬁeld format route entry used rfc shown plen length subnet identiﬁer bit metric encoded byte maximum metric address family identiﬁers maintained iana http routing ip network saylor url http saylor foundation computer networking principle protocol practice release figure format rip route entry note note timer ﬁrst rip implementation sent distance vector exactly second worked network researcher noticed router overloaded processing distance vector time collected packet trace network time router timer synchronised router sending distance vector time synchronisation transmission time distance vector caused overload router cpu increased convergence time protocol case mainly fact router set timer expiration time having processed received distance vector sally floyd andvan jacobson proposed simple solution solve synchronisation problem instead advertising distance vector exactly second router send distance vector delay chosen randomly interval rfc randomisation delay prevents synchronisation occurs ﬁxed delay recommended practice protocol designer ospf routing protocol used ip network open shortest path ospf deﬁned rfc link state routing protocol standardised ietf version ospf support deﬁned rfc ospf frequently used enterprise network isp network isp network use routing protocol developed iso clnp protocol adapted used ip rfc network ﬁnalisation standardisation ospf detailed analysis isi ospf additional information ospf compared basic routing protocol discussed section link state routing particularity ospf worth discussing large network ﬂooding information router link thousand router costly router need store information entire network better approach introduce hierarchical routing hierarchical routing divide network region router inside region detailed information topology region learn aggregated information topology region interconnection ospf support restricted variant hierarchical routing ospf s terminology region called area ospf imposes restriction network divided area area set router link grouped usually topology area chosen packet sent router inside area reach router area leaving ospf area contains type router rfc internal router router directly connected network belong area area border router router attached area example network shown ﬁgure divided area area containing router area containing rbandrc ospf area identiﬁed bit integer represented ip address ospf area area called backbone area special role backbone area group area border router router ra rbandrcin ﬁgure router directly connected backbone router belong area router support virtual link connect router belong area directly connected go introduction ospf chapter network layer saylor url http saylor foundation computer networking principle protocol practice release rdin ﬁgure important restriction imposed ospf path router belong different area ﬁgure pas backbone area figure ospf area inside area router distribute topology area exchanging link state packet router area internal router know topology area router know reach backbone area inside area router exchange packet destination reachable inside area ospf routing exchanging distance vector illustrated network topology shown let ﬁrst consider ospf routing inside area router area learn route area border router rbandrc create network summary advertisement assuming link unit link metric distance distance distance distance summary advertisement ﬂooded backbone area attached router rbandrc routing table router raselects summary advertised rbto reach summary advertised rcto reach inside area router raadvertises summary indicating distance hand consider preﬁxes inside area router rais area border router attached area router create different network summary ments distance distance ra distance ra ﬁrst summary advertisement provides precise information distance used reach preﬁx router network maintain route route router ra second advertisement improve scalability ospf reducing number route advertised area boundary practice requires manual conﬁguration border router second ospf particularity worth discussing support local area network lan shown example router attached lan routing ip network saylor url http saylor foundation computer networking principle protocol practice release figure hierarchical routing ospf figure ospf lan containing router chapter network layer saylor url http saylor foundation computer networking principle protocol practice release ﬁrst solution support lan routing protocol consider lan equivalent link router directly reach router lan approach important drawback router exchange hello link state packet router lan increase number ospf packet sent processed router remote router looking topology distributed ospf consider link lan router implies lot redundancy case failure practice entire lan completely fail case failure entire lan router need detect failure ﬂood link state packet lan completely removed ospf topology remote router better represent lan reduce number ospf packet exchanged ospf handle lan ently ospf router boot lan designated router dr rfc thedrrouter represents local area network advertises lan s subnet example furthermore lan router exchange hello packet thanks utilisation dr topology lan appears set link connected dras shown ﬁgure figure ospf representation lan note quickly detect link failure network operator expect ospf network able quickly recover link router failure ospf network recovery failure performed step router adjacent failure detect quickly default solution rely regular exchange hello packet interval successive hello set onds setting hello timer millisecond difﬁcult hello packet created processed main cpu router router easily generate process hello packet millisecond interface better solution use dedicated failure detection protocol bidirectional forwarding detection bfd protocol deﬁned implemented directly router interface solution able detect failure ment physical datalink layer interrupt router link fails unfortunately solution used type physical datalink layer router detected failure ﬂood updated link state packet network router update routing table interdomain routing explained earlier internet composed different domain domain composed group router host managed organisation example domain include belnet sprint geant abilene cisco orgoogle ospf designated router election procedure deﬁned rfc router conﬁgured router priority inﬂuences election process router highest priority preferred election run analysis evolution number domain global internet year http routing ip network saylor url http saylor foundation computer networking principle protocol practice release domain contains set router routing point view domain divided class transit stub domain stub domain sends receives packet source destination host transit domain domain provides transit service domain router domain forward packet source destination belong transit domain writing domain internet stub astub domain connected single transit domain called stub multihomed stub astub domain connected transit provider figure transit stub domain stub domain classiﬁed considering mainly send receive packet rich stub domain domain contains host mainly receive packet typical example include small cable internet service provider enterprise network hand richstub domain domain mainly produce packet example stub domain include google yahoo microsoft facebook content distribution network akamai orlimelight year seen rapid growth stub domain recent measurement indicate growing fraction packet exchanged internet produced data center managed content provider domain need interconnected allow host inside domain exchange ip packet host located domain physical perspective domain interconnected different way ﬁrst solution directly connect router belonging ﬁrst domain router inside second domain link domain called private interdomain link private peering link practice redundancy performance reason distinct physical link usually established different router domain interconnected figure interconnection domain private peering link private peering link useful example enterprise university network need connected internet service provider domain connected hundred domain using private peering link costly better solution allow domain interconnect cheaply internet exchange point ixp ixpis usually space data center host router belonging different domain domain willing exchange packet domain present ixpinstalls router ixpand connects router inside network ixp contains local area network participating router connected domain present ixp exchange packet simply use local area network ixps popular web site collect analyse data evolution bgp global internet http provides lot statistic analysis updated daily analysis interconnection domain based measurement collected global internet router attached ixp exchange packet owner domain economical incentive exchange packet ixp usually router ixp able exchange packet small fraction router present ixp chapter network layer saylor url http saylor foundation computer networking principle protocol practice release europe internet service provider content provider present ixps figure interconnection domain internet exchange point early day internet domain simply exchange route know allow host inside domain reach host global internet today s highly commercial internet longer true interdomain routing mainly need account economical relationship domain furthermore intradomain routing usually prefers route based technical merit prefer route minimum number hop prefer route minimum delay prefer high bandwidth route low bandwidth one interdomain routing mainly deal economical issue interdomain routing cost using route important quality route measured delay bandwidth different type economical relationship exist domain interdomain routing convert relationship peering relationship domain connected peering link ﬁrst category peering relationship provider relationship relationship used customer domain pay internet service provider able exchange packet global internet interdomain link similar relationship used small internet service provider pay larger internet service provider exchange packet global internet figure simple internet peering relationship understand provider relationship let consider simple internetwork shown ﬁgure internetwork stub domain connected provider contract allows host inside exchange packet host internetwork enable exchange packet know route domain domain internetwork know route allows reach host inside routing perspective commercial contract following route exchanged provider relationship customer domain advertises provider route route learned customer customer relationship provider advertises route know customer second rule ensures customer domain receives route destination reachable provider ﬁrst rule allows route customer domain distributed internet routing ip network saylor url http saylor foundation computer networking principle protocol practice release coming ﬁgure advertises provider route route learned customer hand route know second type peering relationship peering relationship relationship usually doe involve payment domain contrast provider relationship peering relationship usually established domain having similar size geographic coverage example consider ﬁgure packet need pay cheaper alternative establish peering peering established ixps present using private peering link peering used exchange packet host inside host inside doe want receive peering link packet destination belongs pay send packet routing perspective peering relationship domain advertises internal route route learned customer restriction ensures packet destined local domain customer received peering relationship implies route learned provider peer advertised peering relationship motivated economical reason domain advertise route learned provider peering relationship doe bring revenue allowed peer use link provider payment domain advertise route learned shared cost peering peering relationship allowed peer use network span continent freely exchange packet finally type peering relationship sibling relationship used domain exchange route direction practice relationship used domain belong company different type relationship implemented interdomain routing policy deﬁned domain theinterdomain routing policy domain composed main part import ﬁlter speciﬁes peering relationship route accepted bouring domain route ignored domain us forward packet export ﬁlter speciﬁes peering relationship route advertised bouring domain ranking algorithm used select best route route domain received destination preﬁx domain s import export ﬁlters deﬁned using route policy speciﬁcation language rpsl speciﬁed rfc ga internet service provider notably europe use rpsl document import export policy tool help easily convert rpsl policy router command ﬁgure provides simple example import export ﬁlters domain simple internetwork rpsl keyword used replace route domain typically used provider indicate announces route customer customer relationship case s export policy example clearly show difference customer peering relationship s export ﬁlter indicates announces internal route route learned client peering advertises route us including route learned border gateway protocol internet us single interdomain routing protocol border gateway protocol bgp current sion bgp deﬁned rfc bgp differs intradomain routing protocol discussed way bgp protocol bgp router advertises route preﬁx announces ip preﬁx interdomain path used reach preﬁx bgp s point view domain identiﬁed unique autonomous interdomain path contains number transit domain used reach associated preﬁx interdomain path called ftp ripe database contains import export policy european isps text consider autonomous domain synonym practice domain divided autonomous system ignore chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure import export policy path thanks bgp doe suffer problem affect distance vector routing protocol furthermore used implement routing policy ference bgp intradomain routing protocol bgp router doe send entire content routing table neighbour regularly given size global internet router overloaded number bgp message need process bgp us incremental update announces route changed neighbour ﬁgure show simple example bgp route exchanged domain example preﬁx announced bgp route preﬁx route indicates originator preﬁx bgp route add number learned route preﬁx compare route prefers route learned ranking algorithm route set thanks sends packet packet ﬁrst pass reaching destination inside figure simple exchange bgp route bgp router exchange route bgp session bgp session established router belonging different domain directly connected explained earlier physical connection router implemented private peering link internet exchange point bgp session adjacent router run tcp connection default bgp port contrast intradomain routing protocol exchange ip packet udp segment bgp run tcp tcp ensures reliable delivery bgp message sent router forcing router implement acknowledgement checksum furthermore router consider peering link long bgp session underlying tcp connection remain endpoint bgp session called bgp peer bgp session underlying tcp connection typically established router boot based information conﬁguration bgp session rarely released corresponding peering link fails endpoint crash routing ip network saylor url http saylor foundation computer networking principle protocol practice release session figure bgp peering session directly connected router practice establish bgp session router ﬁgure network administrator ﬁrst conﬁgure ip address link number router regularly try establish bgp session agrees establish bgp session conﬁgured ip address number security reason router establishes bgp session manually conﬁgured router bgp protocol rfc deﬁnes type message exchanged bgp session message sent soon tcp connection router established initialises bgp session allows negotiation option detail message rfc message used terminate bgp session usually error tected bgp peer router sends receives notification message immediately shutdown corresponding bgp session message used advertise new modiﬁed route withdraw previously advertised route message used ensure regular exchange message bgp session route change bgp router sent update message second shall send keepalive message conﬁrm peer peer doe receive bgp message period bgp session considered route learned session withdrawn explained earlier bgp relies incremental update implies bgp session start router ﬁrst sends bgp update message advertise peer exportable route know route advertised bgp router sends bgp update message preﬁx route new attribute changed route unreachable withdrawn bgp update message allows bgp router efﬁciently exchange information minimising number byte exchanged update message contains list ip preﬁxes withdrawn list ip preﬁxes advertised set attribute associated advertised preﬁxes remainder chapter routing information exchanged using bgp update message assume simplicity bgp message contains information preﬁx use word message indicate bgp update message containing route withdrawn message indicate bgp update containing new updated route destination preﬁx attribute need rebooted second default delay recommended rfc bgp peer negotiate different timer establishment bgp session using small interval detect bgp session failure recommended bfd used replace bgp s keepalive mechanism fast detection interdomain link failure required chapter network layer saylor url http saylor foundation computer networking principle protocol practice release conceptual point view bgp router connected nbgp peer described composed part shown ﬁgure figure organisation bgp router ﬁgure router receives bgp message left ﬁgure process message possibly sends bgp message right ﬁgure bgp router contains important data structure contains bgp route received bgp peer route ﬁltered import ﬁlter placed import ﬁlter bgp peer local routing information base contains route considered acceptable router contain route learned different bgp peer destination preﬁx forwarding information base fib used dataplane forward packet destination thefibcontains destination best route selected bgp decision process decision process algorithm selects destination preﬁx best route according router s ranking algorithm policy contains bgp route advertised bgp peer given peer built applying peer s export ﬁlter route installed fib export ﬁlter bgp peer reason peer contain different route peer bgp session start router ﬁrst exchange open message negotiate option apply entire session router extract fib route advertised peer important note known destination preﬁx bgp router advertise peer route installed inside fib route advertised peer pas peer s export ﬁlter export ﬁlter set rule deﬁne route advertised corresponding session possibly having modiﬁed attribute export ﬁlter associated bgp session example peering export ﬁlter selects internal route route learned customer show initialisation bgp session def remoteas remoteip initialize start bgp session send bgp open message remoteip port follow bgp state machine advertise local route route learned peer dinbgplocrib d remoteas b s s remoteas remoteip entire rib sent new update sent reflect local distant change router d procedure extract bgp best path destination d route installed fib prepares corresponding bgp update message routing ip network saylor url http saylor foundation computer networking principle protocol practice release message passed export ﬁlter return null route advertised peer possibly modiﬁed bgp update message advertised bgp router allow network administrator specify complex export ﬁlters simple export ﬁlter implement equivalent split horizon shown def remoteas bgpmsg check remoteas received route ifremoteas additional export policy configured accept refuse bgpmsg modify selected attribute inside bgpmsg return bgpmsg point remote router received exportable bgp route initial exchange router sends bgp update message change addition route removal route change attribute route exportable route change happen router receives bgp message summarizes processing bgp message def msg remoteas msg remoteas msg acceptable return isupdate msg msg rib bestroute best route changed remoteas b s announce best route s remoteas remoteip remoteas remoteip msg withdraw msg rib best route changed remoteas b s best route s remoteas remoteip best route anymore remoteas remoteip bgp message received router ﬁrst applies peer s import ﬁlter verify message acceptable message acceptable processing stop show simple import ﬁlter import ﬁlter accepts route contain local route used cause routing loop example import ﬁlter ﬁlter used internet service provider session customer accept route ip preﬁxes assigned customer provider real router import ﬁlters complex import ﬁlters modify attribute received bgp update def remoteas bgpmsg ifmysas additional import policy configured accept refuse bgpmsg modify selected attribute inside bgpmsg return bgpmsg chapter network layer saylor url http saylor foundation computer networking principle protocol practice release note bogon ﬁlters example frequently used import ﬁlters ﬁlters internet service provider use ignore bogon route isp community bogon route route advertised global internet typical example include private preﬁxes deﬁned rfc loopback preﬁxes ip preﬁxes allocated iana managed bgp router ensure advertises bogons global internet detailed information bogons http import ﬁlter accepts bgp message distinguishes case update message preﬁx p new route preﬁx modiﬁcation route s attribute router ﬁrst retrieves ribthe best route preﬁx new route inserted riband bgp decision process run ﬁnd best route destination pchanges bgp message need sent router s peer best route changed peer router applies export ﬁlter verify route advertised yes ﬁltered bgp message sent withdraw message sent router receives withdraw message veriﬁes removal route ribcaused best route preﬁx change noted depending content riband export ﬁlters bgp router need send withdraw message peer having received update message peer conversely let discus operation bgp network let consider simple network composed router located different as shown ﬁgure bgp bgp bgp bgp figure utilisation bgp nexthop attribute network contains router router attached local subnet advertises using bgp bgp session second used interdomain link bgp session run tcp connection established neighbouring router session let assume bgp session ﬁrst established bgp update message sent session contains ﬁelds advertised preﬁx bgp nexthop attribute including use notation u preﬁx nexthop attribute represent bgp update message section larly w preﬁx represents bgp withdraw speciﬁed preﬁx session established u u point reach reach established u route inside rib sends u u note route learned update bgp nexthop add number sends u session point bgp route exchanged router reach routing ip network saylor url http saylor foundation computer networking principle protocol practice release link failure did receive keepalive message recently time rib route learned bgp session remove rib route learned sends w bgp session doe route anymore preﬁx note origin route advertised bgp router frequent practical question operation bgp bgp router decides originate advertise route ﬁrst time practice occurs situation router manually conﬁgured network operator advertise route bgp session example bgp session uclouvain provider belnet vain s router advertises preﬁx assigned campus network router conﬁgured network operator advertise bgp session route learns intradomain routing protocol example enterprise router advertise bgp session provider route remote site route reachable advertised intradomain routing protocol ﬁrst solution frequent advertising route learned intradomain routing protocol recommended route cause large number bgp message exchanged global internet network use bgp contain router example consider network shown ﬁgure contains router attached interdomain link network routing protocol used use intradomain routing protocol ospf distribute route internal preﬁxes use bgp route advertised route advertised router need exchange route respectively received bgp session bgpbgp figure larger network using bgp ﬁrst solution allow exchange interdomain route learned respective bgp session conﬁgure intradomain routing protocol distribute inside route learned bgp session current router support feature bad solution reason intradomain routing protocol distribute attribute attached bgp route intradomain routing protocol route bgp know route originated advertisement send contain incorrect intradomain routing protocol designed support hundred thousand route bgp router receive today s global internet link said ﬂapping switch operational state disabled state short period time router attached link need frequently send routing message chapter network layer saylor url http saylor foundation computer networking principle protocol practice release best solution allow bgp router distribute inside route learned bgp session establish bgp session bgp router inside practice type bgp session session external bgp session bgp session established router directly connected belong different domain session internal bgp session bgp session established router belonging domain router need directly connected practice bgp router inside domain maintains ibgp session bgp router creates ibgp session bgp router domain ibgp session like ebgp session run tcp connection note contrast ebgp session established directly connected router ibgp session established router directly connected important point note ibgp session bgp router advertises route ibgp session provided router us route forward packet route learned router s ebgp session bgp router doe advertise route learned ibgp session ibgp session note router course advertise ebgp session route learned ibgp session difference behaviour bgp router ibgp andebgp session utilisation ibgp session consider network containing bgp router bandcinterconnected ibgp session router alearns route preﬁx pfrom router b router adoes need advertise received route router csince router calso learns route ibgp session understand utilisation ibgp session let consider happens router u network shown bgp message processed advertises ibgp session bgp update sent nexthop bgp update received sends u note bgp nexthop bgp route advertised ebgp session ebgp ebgp figure ibgp ebgp session note loopback interface ibgp session addition physical interface router conﬁgured special loopback interface interface software interface loopback interface conﬁgured router address associated interface advertised intradomain routing protocol consider example ibgp session suitable small network solution doe scale large network containing hundred router session established domain containing nbgp router large domain use route reﬂection rfc confederation rfc scale ibgp go introduction router receive bgp update ebgp session set nexthop received route address called additional detail routing ip network saylor url http saylor foundation computer networking principle protocol practice release router interface loopback interface interface fails unreachable router receive anymore packet ip address case loopback interface remains reachable long router s interface remains ibgp session usually established using router s loopback address endpoint allows ibgp session underlying tcp connection remain physical interface fail router router learn interdomain route ibgp ebgp session let examine happens router packet destined packet intradomain routing protocol bgp bgp routing table contains following longest preﬁx match route indicates forward packet forward packet route directly connected route match address thanks intradomain routing protocol distributed following route east north west build forwarding table combine route learned intradomain routing protocol route learned bgp thanks intradomain routing table interdomain route bgp nexthop shortest path computed intradomain routing protocol ﬁgure packet directly connected north interface s resulting forwarding table associate outgoing interface directly connected preﬁx directly connected nexthop outgoing interface preﬁxes learned bgp shown north north east north north west coupling interdomain intradomain routing table intradomain route change link failure change link metric forwarding table updated router shortest path bgp nexthop changed point discussed looking bgp decision process network contain router maintain ebgp session router stub router attached single router network core router reside path border router using bgp illustrated ﬁgure scenario router able forward packet destination preﬁx inside packet need forwarded router router resides path bgp nexthop attached solution used ensure able forward interdomain packet enable bgp router include router ibgp ibgp session added ﬁgure solution work used as force router resource cpu memory run bgp maintain large forwarding table encapsulate interdomain packet sent router need forward packet destination outside local different encapsulation mechanism exist multiprotocol label switching mpls rfc layer tunneling protocol rfc frequently used large domain detailed explanation technique outside scope section chapter network layer saylor url http saylor foundation computer networking principle protocol practice release ebgp figure deal router simplest encapsulation scheme understand ip ip deﬁned rfc encapsulation scheme place ip packet called inner packet including payload payload larger ip packet called outer packet used border router forward packet router maintain bgp routing table example ﬁgure router forward packet destination add packet header source address set address destination address address protocol ﬁeld ip header set indicate contains packet packet forwarded forwarding table built thanks intradomain routing table reception packet outer header consults bgp forwarding table forward packet bgp decision process import export ﬁlters key difference bgp intradomain routing protocol domain deﬁne ranking algorithm determine route chosen forward packet route learned preﬁx ranking depends bgp attribute attached bgp route ﬁrst bgp attribute used rank bgp route attribute attribute unsigned integer attached bgp route received ebgp session associated import ﬁlter comparing route destination preﬁx bgp router prefers route highest bgp router know route prefers route having one shortest attribute used prefer route attribute present inside bgp update exchanged ibgp session present message exchanged ebgp session common utilisation support backup link consider situation depicted ﬁgure like use high bandwidth link send receive packet use backup link failure primary bgp router prefer route highest attribute policy implemented using following import ﬁlter import ra set rb set accept import ﬁlter bgp route learned rbover high bandwidth link preferred route learned backup link primary link fails corresponding route removed s rib route learned route rbas soon advertised rbonce link come routing ip network saylor url http saylor foundation computer networking principle protocol practice release rb ra figure create backup link bgp import ﬁlter modiﬁes selection bgp route inside inﬂuences route followed packet forwarded addition using primary link send packet like receive packet high bandwidth link need set attribute import ﬁlter import ra set rb set accept attribute used prefer cheap link compared expensive example network wish send receive packet mainly interdomain link expensive cheap ra rb figure prefer cheap link expensive install following import ﬁlter ensure sends packet learned route import ra set set accept import ﬁlter doe inﬂuence example prefers route link expensive link send packet receive packet expensive link important point remember used prefer route send packet inﬂuence route followed received packet important utilisation attribute support provider ing relationship economic point view important difference type peering relationship domain usually earns money sends packet customer ship hand pay provider sends packet provider relationship chapter network layer saylor url http saylor foundation computer networking principle protocol practice release using peering send packet usually neutral economic perspective account economic issue domain usually conﬁgure import ﬁlters router follows insert high attribute route learned customer insert medium attribute route learned peering insert low attribute route learned provider import ﬁlter router domain prefer reach destination customer route exists prefer use peering relationship send packet provider know alternate route consequence setting attribute like internet path asymmetrical consider example internetwork shown ﬁgure figure asymmetry internet path consider internetwork route available inside reach path path path ﬁrst path chosen learned customer hand receives path provider select path reach depending prefers provider coming organisation bgp router shown ﬁgure organisation bgp router discussed bgp decision process bgp decision process algorithm used router select route installed fib multiple route preﬁx bgp decision process receives set candidate route preﬁx us seven step step route removed candidate set process stop set contains ignore route having unreachable bgp nexthop prefer route having highest prefer route having shortest prefer route having smallest med prefer route learned ebgp session route learned ibgp session prefer route having closest bgp implementation conﬁgured install route single preﬁx fib purpose go introduction bgp routing ip network saylor url http saylor foundation computer networking principle protocol practice release tie breaking rule prefer route learned router lowest router id ﬁrst step bgp decision process ensures bgp router doe install fib route nexthop considered unreachable intradomain routing protocol happen example router crashed intradomain routing protocol usually advertises failure router failure bgp session terminates rule implies bgp decision process time intradomain routing protocol report change reachability preﬁx containing bgp nexthops second rule allows domain deﬁne routing preference attribute set import ﬁlter router learned route ebgp session contrast intradomain routing protocol bgp doe contain explicit metric global internet impossible domain agree common metric meet requirement domain despite bgp router prefer route having short attribute route long path step bgp decision process motivated fact operator expect route long lower quality route shorter study shown strong correlation quality route length explaining fourth step bgp decision process let ﬁrst ﬁfth sixth step bgp decision process step used implement hot potato routing intuitively domain implement hot potato routing try forward packet destined address outside domain domain quickly possible understand hot potato routing let consider domain shown ﬁgure preﬁx peering link router inside route second figure hot cold potato routing ﬁfth step bgp decision process router prefers use route learned ebgp session compared route learned ibgp session router resp prefers use route router resp reach preﬁx sixth step bgp decision process take account distance measured length shortest intradomain path bgp router bgp nexthop route learned ibgp session rule used router example router received route distance distance ﬁrst route router route minimises cost forwarding packet inside sending chapter network layer saylor url http saylor foundation computer networking principle protocol practice release hot potato routing allows minimise cost forwarding packet situation desirable example assume domain router east west coast domain high metric associated link correspond cost forwarding packet usa customer pay prefer receive packet destined link instead link objective cold potato routing cold potato routing implemented using discriminator med attribute attribute optional bgp attribute border router advertising bgp route ebgp session med attribute usually used indicate ebgp session cost reach bgp nexthop advertised route med attribute set router advertises route ebgp session example router u u assume bgp session ﬁrst established u point router inside send packet session established router u router decision process destination selects route chosen route reach preﬁx route know u router run decision process prefer route advertised contains smallest med router inside packet link expected router longer us bgp route learned stop advertising ibgp session sends w ibgp session router keep route learned link fails sends w ibgp session router sending u ibgp session practice ﬁfth step bgp decision process slightly complex route given preﬁx learned different as example assume ﬁgure hot cold potato routing advertised shown ﬁgure peering link router route med attribute set med set s router compare bgp route med value med value ﬁfth step bgp decision process solves problem comparing med attribute route learned neighbour additional detail med attribute rfc noted using med attribute cause problem bgp network explained practice med attribute used ebgp session unless domain agree enable step bgp decision allows selection single route bgp router received route considered equal ﬁrst step decision process happen example stub attached different provider shown ﬁgure router equally good bgp route break tie router identiﬁed unique practice ip address assigned router router lowest router id step bgp decision process replaced selection oldest route rfc preferring oldest route breaking tie used prefer stable path unstable path drawback approach selection bgp route depends arrival time corresponding message make bgp selection process lead problem difﬁcult debug figure stub connected provider med attribute used provider peering relationship request customer peering relationship med attribute enabled explicit agreement peer routing ip network saylor url http saylor foundation computer networking principle protocol practice release bgp convergence previous section explained operation bgp router compared intradomain routing protocol key feature bgp ability support interdomain routing policy deﬁned domain import export ﬁlters ranking process domain deﬁne routing policy router vendor implemented conﬁguration tweak support complex routing policy routing policy chosen domain interfere routing policy chosen domain understand issue let ﬁrst consider simple internetwork shown preferred path d path figure disagree internetwork internetwork focus route advertised let assume resp prefers economic reason route learned route learned u sequence exchange bgp message possible ﬁrst u learned route run bgp decision process selects route doe advertise route sends u learned route run bgp decision process selects route doe advertise route u time u route sends w mean time prefers route sends w reception bgp withdraws know direct route resp sends u resp u resp theory continue exchange bgp message practice sends message faster bgp converges example shown route selected bgp router depend ordering bgp message exchanged similar scenario rfc operational perspective conﬁguration annoying network operator easily predict path chosen unfortunately annoying bgp conﬁgurations example let consider conﬁguration named bad gadget internetwork as advertises route preﬁx analyse route preﬁx routing preference following path path path path path path sends u p route known p select direct path let consider possible exchange bgp message u p path preferred path us direct path u p chapter network layer saylor url http saylor foundation computer networking principle protocol practice release preferred path othe r pathspreferred path oth e r path preferred path oth e r figure bad gadget internetwork u p path preferred path us path changed path sends u p andw p new path direct path u p path sends u p andw p switch direct path ﬁrst step example show convergence bgp unfortunately guaranteed interdomain routing policy interfere complex way shown checking global convergence detailed discussion fortunately operational guideline guarantee bgp convergence global internet ensure bgp converge guideline consider type peering relationship provider case bgp convergence guaranteed provided following condition fulﬁlled topology composed directed provider peering link acyclic graph prefers route received customer route received peer provider ﬁrst guideline implies provider provider asxcannot customer asx relationship make sense economic perspective imply circular payment furthermore provider usually larger customer second guideline corresponds economic preference provider earns money sending packet customer make sense prefer customer learned route route learned provider show bgp convergence guaranteed associate preference route learned peer route learned customer theoretical perspective guideline veriﬁed automatically ensure bgp converge global internet veriﬁcation performed practice force domain disclose routing policy willing furthermore problem known practice researcher operator expect guideline domain thanks large bgp data collected operator study analysed researcher shown modelling internet topology requires cost provider peering relationship publicly available model go classical peering relationship data collected establishing bgp session unix host running bgp daemon bgp router ent as unix host store bgp message received regular dump bgp routing table http http http orhttp routing ip network saylor url http saylor foundation computer networking principle protocol practice release topology internet ﬁrst analysis recent study include based study internet topology summarised shown ﬁgure figure layered structure global internet domain internet divided category according role position topology core internet composed isps domain provider isp peering relationship isps customer tionships smaller isps example isps include sprint oropentransit isps national continental isps customer isps isps smaller customer peering relationship isps example isps include france telecom belgacom british telecom network stub domain enterprise campus network network smaller isps customer isps peering relationship large content provider managing large datacenters content provider producing growing fraction packet exchanged global internet content provider customer isps try establish peering ship ixps isps organisation internet bgp decision process path internet length hop chapter network layer saylor url http saylor foundation computer networking principle protocol practice release summary exercise principle routing protocol used data network use positive link weight happen distance vector routing protocol network contains negative link weight figure simple network network specialist design network problem need solve set metric link network usa abilene network interconnects research lab university ﬁgure show network figure abilene network network assume link weight set path followed packet sent router located los angeles reach router located new york router located washington possible conﬁgure link metric packet sent router located los angeles router located respectively new york andwashington follow path possible conﬁgure link weight packet sent router located los angeles router located new york follow path packet sent router located new york router located los angeles follow completely different path ﬁgure downloaded abilene observatory http tory contains detailed description abilene network including detailed network statistic conﬁguration equipment used network summary saylor url http saylor foundation computer networking principle protocol practice release assume router located denver andkansas city need exchange lot packet conﬁgure link metric link router doe carry packet sent router network ﬁve node network shown conﬁgure link metric packet sent router eto router ause link packet sent router buse link d figure simple ﬁve node network ﬁve node network shown conﬁgure link weight packet sent router e resp f follow path resp question worked stable state routing table computed routing protocol let consider transient problem main happen network topology change consider network topology shown ﬁgure assume router use distance vector protocol us split horizon figure simple network redundant link compute routing table router network obtain table table main event affect topology network failure link measurement performed ip network shown failure happen frequently usually relatively short period time addition link work new link provisioned frequently link failed time ago router followed reboot change metric link reconﬁguring router attached link http analysis failure inside abilene network june http analysis failure affecting larger isp network chapter network layer saylor url http saylor foundation computer networking principle protocol practice release destination route route b route c route d route e b c d b b b c d c b c c d d b c d d e b c d e distance vector protocol operate different mode periodic update andtriggered update periodic update default mode distance vector protocol example router advertise distance vector thirty second triggered update router sends distance vector routing table change periodically change consider distance vector protocol using split horizon periodic update assume fails bandcupdate local routing table advertise end period select ordering periodic update time router sends distance vector indicate vector sent neighbor update table period required allow network converge stable state consider distance vector protocol triggered update link fails assume bupdates routing table immediately sends distance vector aand assume aanddprocess received distance vector asends distance vector indicate distance vector exchanged update table time distance vector sent router received router router learned new route destination distance vector message exchanged network converges stable state consider network shown network metric link set link metric set direction network path cost dand old router randomly select equal cost path install forwarding table recent router able use nequal cost path destination figure simple network running ospf recent router lookup forwarding table destination address return set outgoing interface design algorithm selects outgoing interface used packet knowing avoid reordering segment given tcp connection follow path consider network shown time ospf converges router compute following routing table destination route route b route c route d route e c b e c b c b b d c c c c b e c d c d b e d e c c d e e exercise saylor url http saylor foundation computer networking principle protocol practice release important difference ospf rip ospf router ﬂood link state packet allow router recompute routing table rip router exchange distance vector consider link fails router bi ﬁrst detect failure point bcannot reach anymore cand path ehave failed ccannot reach banymore half path dhave failed router bwill ﬂood updated link state packet entire network router compute forwarding table reception link state packet router usually ﬁrst ﬂood received packet recompute forwarding table assume bi ﬁrst recompute forwarding table followed d cand ﬁnally e update forwarding table verify pair router able exchange packet provide answer using table similar shown ﬁnd ordering update forwarding table avoids transient problem consider network shown ﬁgure explain path followed packet reach figure stub connected provider consider shown ﬁgure stub connected provider provider packet destined received change conﬁguration consider stub shown ﬁgure decides advertise instead allocated provider doe receive packet destined reachability address affected link fails propose conﬁguration achieves objective shown ﬁgure preserve reachability ip address inside s interdomain chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure stub connected provider link fails consider network shown ﬁgure network contains single bgp router assume single preﬁx lot packet help bgp advertisement receives packet happens link fails consider network ﬁgure bgp message exchanged router preﬁx route known router route doe advertise assume link message exchanged event bgp message sent consider network shown ﬁgure single preﬁx network link considered backup link used primary link fails implemented setting low route received link network path used router reach assume link fails bgp message exchanged path used reach link come bgp message exchanged path used reach february pakistan telecom authority issued order pakistan isps block access ip address belonging youtube operator noted address belonging read http understand happened really youtube avoid problem exercise saylor url http saylor foundation computer networking principle protocol practice release figure stub connected provider figure simple internetwork chapter network layer saylor url http saylor foundation computer networking principle protocol practice release figure simple internetwork figure simple internetwork backup link exercise saylor url http saylor foundation computer networking principle protocol practice release kind solution propose improve security interdomain routing currently address associated root server domain http indicates different physical server support large anycast service conﬁgure bgp router provide anycast service consider network shown ﬁgure network preﬁx pand link metric set draw ibgp ebgp session assume session pover bgp message exchanged route chosen router network session established preﬁx pover session route selected router change med attribute used session session possible conﬁgure router network preﬁx pvia us link figure simple internet bgp med attribute set igp cost reach bgp nexthop advertised preﬁx router conﬁgured use med value route advertised given session use ﬁgure link primary link backup link advantage drawback using med attribute application compared ﬁgure assume manager like use link backup link manager agree use bgp med attribute use different route learned practice following subnets indicate smallest largest address inside subnet following subnets indicate smallest largest address inside subnet chapter network layer saylor url http saylor foundation computer networking principle protocol practice release researcher network operator collect expose lot bgp data establish ebgp session data collection router production router located operational network data collection router available popular one http http exercise use routeviews bgp router access router using telnet logged router use router s command line interface analyse bgp routing table telnet trying connected escape character c oregon exchange bgp route viewer route view data archived http hardware grant cisco system contact help question comment service use able contribute view router view routing table as list as documented current participant http using aaa logins login username rviews http user access verification username rviews router ebgp session router isps http list ebgp session maintained router command supported router ip bgp command useful command take preﬁx parameter allows retrieve route router received speciﬁed preﬁx use ip bgp ﬁnd best path used router reach uclouvain knowing announced belnet according bgp routing table as peer belnet analysis preﬁxes assigned skynet output ip bgp reveals strange path preﬁx pass twice explain origin igp metric localpref valid external netkit allows easily perform experiment using emulated environment composed virtual exercise saylor url http saylor foundation computer networking principle protocol practice release machine running user model linux netkit allows setup small network lab conﬁgure access pc interconnected using cable network equipment anetkit lab deﬁned conﬁguration ﬁles script textﬁle deﬁnes virtual machine network topology simple ﬁle shown string describing lab author lab email address author lan lan conﬁguration ﬁle request creation virtual machine named host network interface connected local area network named lan netkit allows deﬁne interface given host attach different local area network ﬁle host example ﬁle shell script executed end boot virtual host typically script network interface conﬁgured daemon launched directory host example directory used store conﬁguration ﬁles copied virtual machine s ﬁlesystems ﬁrst created netkit contains script used run lab lstart allows launch lab lhalt allows halt machine end lab need exchange ﬁles virtual machine linux host netkit run note virtual host mount directory contains running lab home directory exercise use netkit lab containing host router conﬁguration ﬁles available network topology lab shown ﬁgure figure router lab ﬁle lab shown network use subnet linux ip address assigned interface conﬁgured using ifconfig ifconfig used parameter list existing interface host conﬁguration sample ifconfig output shown host ifconfig link encap ethernet hwaddr ad inet chapter network layer saylor url http saylor foundation computer networking principle protocol practice release addr scope link broadcast running multicast rx tx rx b tx b lo link encap local loopback inet addr scope host loopback running rx tx rx b tx b host interface loopback interface lo address address interface address link local address assigned interface broadcast address used particular case outside scope exercise ifconfig provides statistic number packet sent received interface important formation provided ifconfig hardware address hwaddr used datalink layer interface example interface us bit ad hardware address conﬁgure address assigned interface specifying address netmask ifconfig netmask specify preﬁx length text ifconﬁg case ifconﬁg allows verify interface correctly conﬁgured link encap ethernet hwaddr ad inet addr scope link broadcast running multicast rx tx rx b tx b important command linux route allows look content routing table stored linux kernel change example route return content routing table route detailed description conﬁgure route using tool use ifconfig conﬁgure following address interface interface use route look content routing table host verify using ping reach use ifconfig conﬁgure address interface interface router exercise saylor url http saylor foundation computer networking principle protocol practice release host attached local area network contains single router router act default router add default route use default router reach remote address verify using ping reach address need conﬁgure host router reach host router emulated network add ifconﬁg androute command ﬁles host network correctly conﬁgured started using lstart use network conﬁgured test ip packet fragmented ifconﬁg command allows specify maximum transmission unit mtu largest size frame allowed given interface default mtu eth interface byte force mtu byte interface attached use ping send byte ping packet router attached capture packet router using tcpdump order doe emulated host sends ip fragment use ping send byte ping packet capture packet using tcpdump order doe emulated host sends ip fragment measurement doe emulated host generate identiﬁers ip packet sends reset mtu interface router byte leave mtu interface router byte check host ping host use tcpdump analyse happening routing information protocol rip distance vector protocol used small ip network various implementation rip exercise use quagga mentation ip routing protocol run linux unix compatible operating system quagga fact set daemon interact linux kernel exercise use daemon zebra andripd zebra master daemon handle interaction linux kernel routing table routing protocol ripd implementation rip protocol interacts linux routing table zebra daemon use linux real virtual machine router need ﬁrst conﬁgure ip address terfaces machine conﬁguration veriﬁed conﬁgure zebra andripd daemon conﬁguration ﬁles daemon reside ﬁrst conﬁguration ﬁle list daemon launched zebra started enable ripd andzebra ﬁle conﬁgured follows file tell zebra package daemon start entry format daemon yes equivalent infinitely low priority lower number mean higher priority read detail daemon bgpd zebra ospfd ripd ripngd second conﬁguration ﬁle ﬁle deﬁnes global conﬁguration rule apply zebra exercise use default conﬁguration ﬁle shown zebra zebra configuration file chapter network layer saylor url http saylor foundation computer networking principle protocol practice release hostname zebra password zebra enable password zebra static default route sample ip route log file zebra conﬁguration ﬁle line beginning comment conﬁguration deﬁnes hostname zebra password default password password zebra given connecting zebra management console tcp connection management console use like shell unix host specify command zebra daemon second enable password zebra speciﬁes password provided giving command change conﬁguration daemon possible specify static route conﬁguration ﬁle use facility exercise parameter speciﬁed log ﬁle zebra writes debugging information additional information quagga available http interesting conﬁguration ﬁle exercise ﬁle contains parameter speciﬁc operation rip protocol sample ripd tion ﬁle shown hostname ripd password zebra enable password zebra router rip network redistribute connected log file conﬁguration ﬁles shown different way conﬁgure ripd statement router ripindicates beginning conﬁguration rip routing protocol indented line follow conﬁguration protocol ﬁrst line network used enable rip interface ip subnet match second line redistribute connected indicates subnetworks directly connected router tised conﬁguration line used ripd interacts linux kernel routing table advertises subnetworks directly connected router new interface abled conﬁgured router subnetwork preﬁx automatically advertised similarly subnetwork preﬁx automatically removed subnetwork interface shutdown experiment rip use emulated router shown ﬁgure download entire lab figure ﬁve router lab exercise saylor url http saylor foundation computer networking principle protocol practice release describing topology interface used host shown b f v c w b c d x d e y e f z type subnetworks topology subnetworks preﬁx used link router subnetworks preﬁx used local area network attached single router router conﬁgured different way specifying conﬁguration ﬁles typing command directly router using telnet ﬁrst router conﬁgured provided conﬁguration ﬁles look conﬁgurations ﬁles lab s directory router r ﬁles contain ifconfig command used conﬁgure interface virtual router conﬁguration ﬁles located r copied automatically virtual router boot launch lab using lstart verify router reach traceroute determine route followed packet ripd daemon conﬁgured typing command tcp connection ripd listens port router use telnet connect ripd daemon default password zebra logged ripd daemon reach prompt query status router typing prompt ﬁnd list supported command command particularly useful type obtain list sub option example ip rip return routing table maintained ripd daemon disable interface router typing ifconﬁg router verify impact command routing table router network interface typing ifconﬁg interface router edit conﬁguration ﬁle router router network verify reachable router inside network open shortest path ospf protocol protocol used terprise ip network ospf implemented ospfd daemon quagga use topology previous exercise netkit lab downloaded theospfd daemon support complex conﬁguration ripd daemon sample conﬁguration shown hostname ospfd password zebra enable password zebra chapter network layer saylor url http saylor foundation computer networking principle protocol practice release interface ip ospf cost interface ip ospf cost interface ip ospf cost interface ip ospf cost router ospf network area network area network area network area log file conﬁguration ﬁle ip ospf cost specify metric interface ospfd conﬁguration composed part router identiﬁer unique inside network usually identiﬁer ip address assigned router second subnetwork router associated area example use backbone area command speciﬁes ospf hello message sent interface subnetwork advertised router command used interface attached endhosts ensure problem occur student conﬁgures software ospf router laptop attached interface netkit lab contains conﬁguration router theospfd daemon listens tcp port follow evolution ospf protocol using ip ospf command launch lab using lstart verify address reachable router inside network conﬁgure router changing ﬁle restart daemon verify address reachable router inside network update network conﬁguration packet sent router router use direct link router packet sent forwarded disable interface router quickly network converges follow evolution routing table router typing netstat interface router change mtu router leave unchanged interface router impact change explain disable interface router quickly network converges interface halt router using vcrash quickly doe network react failure exercise saylor url http saylor foundation computer networking principle protocol practice release chapter network layer saylor url http saylor foundation chapter datalink layer local area network datalink layer lowest layer reference model discus mentioned previously type datalink layer ﬁrst datalink layer appeared one used link device directly connected physical link brieﬂy discus datalink layer chapter second type datalink layer one used local area network lan main difference lan datalink layer need regulate access local area network usually shared medium chapter organised follows ﬁrst discus principle datalink layer service us physical layer medium access control algorithm used local area network regulate access shared medium finally discus important datalink layer technology emphasis ethernet wifi network principle datalink layer us service provided physical layer different tations physical layer technological perspective provide service enables datalink layer send receive bit directly connected device datalink layer receives packet network layer datalink layer entity exchange frame explained previous chapter datalink layer technology impose limitation size frame technology impose maximum frame size enforce minimum maximum frame size ﬁnally technology support single frame size case datalink layer usually include adaptation sublayer allow network layer send receive packet adaptation layer include fragmentation reassembly mechanism figure datalink layer reference model physical layer service facilitates sending receiving bit furthermore usually far perfect explained introduction physical layer change electromagnetic interference value bit transmitted saylor url http saylor foundation computer networking principle protocol practice release physical layer deliver bit receiver bit sent sender physical layer deliver fewer bit receiver bit sent sender datalink layer allow endsystems exchange frame containing packet despite limitation link local area network ﬁrst problem solved encode frame sequence bit receiver easily recover received frame despite limitation physical layer physical layer perfect problem simple datalink layer simply need deﬁne encode frame sequence consecutive bit receiver easily able extract frame received bit unfortunately imperfection physical layer make framing problem slightly complex solution proposed used practice different datalink layer technology framing framing problem deﬁned doe sender encode frame receiver efﬁciently extract stream bit receives physical layer ﬁrst solution solve framing problem require physical layer remain idle time transmission frame idle period detected receiver serve marker delineate frame boundary unfortunately solution sufﬁcient reason physical layer remain idle need transmit bit second inserting idle period frame decrease maximum bandwidth achieved datalink layer physical layer provide alternative idle period physical layer able send receive physical symbol represent value various reason outside scope chapter physical layer able exchange physical symbol example manchester encoding used physical layer send different symbol manchester encoding differential encoding scheme time divided period period divided half different voltage level applied send symbol sender set voltage level half period send resp sender set high resp low voltage ﬁrst half period low resp high voltage second half encoding ensures transition middle period allows receiver synchronise clock sender s clock apart encoding manchester encoding support additional symbol invh andinvb voltage level used half period deﬁnition symbol appear inside frame composed technology use special symbol marker beginning end frame figure manchester encoding unfortunately encoding used physical layer generic solution used physical layer able transmit receive required generic solution called stufﬁng variant exist bit stufﬁng andcharacter stufﬁng enable receiver easily delineate frame boundary technique reserve special bit string frame boundary marker encode frame special bit string appear inside frame bit stufﬁng reserve bit string frame boundary marker ensures consecutive transmitted physical layer inside frame bit stufﬁng frame sent follows sender transmits marker sends bit frame insert chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release additional bit set sequence ﬁve consecutive ensures sent frame contains sequence consecutive bit set consequence marker pattern appear inside frame sent marker sent mark end frame receiver performs opposite decode received frame ﬁrst detects beginning frame thanks marker process received bit count number consecutive bit set ﬁve consecutive bit set bit removed inserted sender ﬁve consecutive bit set indicates marker followed bit set table illustrates application bit stufﬁng frame original frame transmitted frame example consider transmission sender ﬁrst send marker followed ﬁve consecutive bit set insert bit set new inserted followed new inserted followed end frame marker bit stufﬁng increase number bit required transmit frame worst case bit stufﬁng course long sequence bit set frame transmission error occur stuffed bit marker error case frame affected error possibly frame correctly decoded receiver able resynchronise valid marker bit stufﬁng easily implemented hardware implementing software difﬁcult given higher overhead bit manipulation software software implementation prefer process character bit datalink layer usually use character stufﬁng technique operates frame contain integer number character character used marker delineate frame boundary character stufﬁng technique use dle stx andetx character ascii character set dle stx resp dle etx used mark beginning end frame transmitting frame sender add dle character transmitted dle character ensures marker appear inside transmitted frame receiver detects frame boundary remove second dle receives consecutive dle character example transmit frame dle stx sender ﬁrst send dle stx marker followed dle sender transmits additional dle character followed stx dle etx marker original frame transmitted frame dle stx dle etx dle stx dle stx dle dle stx dle etx dle stx dle etx dle stx dle dle stx dle dle etx dle etx character stufﬁng like bit stufﬁng increase length transmitted frame character stufﬁng worst frame frame containing dle character transmission error occur receiver incorrectly decode frame error occur marker able resynchronise correctly received marker error detection framing datalink layer include mechanism detect recover transmission error allow receiver detect transmission error sender add redundant information error detection code frame sent error detection code computed sender frame transmits receiver receives frame error detection code recomputes veriﬁes received error detection code match computer error detection code match frame considered valid error detection scheme exist entire book written subject detailed discussion technique outside scope book discus example illustrate key principle understand error detection code let consider device exchange bit string containing nbits allow receiver detect transmission error sender convert string nbits string bit usually rredundant bit added beginning end transmitted bit string technique interleave redundant bit original bit error detection code deﬁned function computes rredundant bit corresponding string nbits simplest error detection code principle saylor url http saylor foundation computer networking principle protocol practice release parity bit type parity scheme odd parity resp odd parity scheme redundant bit chosen resp odd number bit set transmitted bit string bit receiver easily recompute parity received bit string discard string invalid parity parity scheme used character exchanged case eighth bit parity bit table show parity bit computed bit string containing bit bit string odd parity parity parity bit allows receiver detect transmission error affected single bit transmitted bit bit error receiver necessarily able detect transmission error powerful error detection scheme deﬁned cyclical redundancy check crc widely used datalink layer protocol crc detect transmission error affecting burst n bit transmitted frame transmission error affect odd number bit additional detail crcs possible design code allows receiver correct transmission error simplest error correction code triple modular redundancy tmr transmit bit set resp sender transmits resp transmission error receiver decode transmission error affected single bit receiver performs majority voting shown table scheme allows receiver correct transmission error affect single bit received bit decoded bit powerful error correction code proposed used application hamming code clever combination parity bit provides error detection correction capability practice datalink layer protocol combine bit stufﬁng character stufﬁng length indication frame header checksum crc computed sender placed frame applying stufﬁng medium access control datalink layer need select framing technique described optionally add retransmission algorithm explained transport layer provide reliable service datalink layer local area network face additional problem lan composed host attached shared physical medium physical layer perspective lan organised different way network host attached physical cable host attached upstream downstream node entire network form ring network host attached device chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release wireless network host send receive frame using radio signal basic physical organisation local area network shown graphically ﬁgure ﬁrst focus physical organisation time figure bus ring local area network common problem network organisation efﬁciently share access local area network device send frame time electrical optical radio signal correspond frame appear time transmission medium receiver able decode frame simultaneous transmission called collision collision involve frame transmitted device attached local area network collision main cause error wired local area network local area network technology rely medium access control algorithm regulate transmission minimise avoid collision broad family medium access control algorithm orpessimistic mac algorithm algorithm assume collision severe problem completely avoided algorithm ensure time device allowed send frame lan usually achieved using distributed protocol elect device allowed transmit time deterministic mac algorithm ensures collision happen overhead regulating transmission device attached lan oroptimistic mac algorithm algorithm assume collision normal operation local area network aim minimise number collision try avoid collision stochastic algorithm usually easier implement deterministic one ﬁrst discus simple deterministic mac algorithm important optimistic rithms coming distributed deterministic mac algorithm static allocation method ﬁrst solution share available resource device attached local area network deﬁne priori distribution transmission resource different device ndevices need share transmission capacity lan operating bmbps device allocated bandwidth ofb n mbps limited resource need shared environment local area network ﬁrst radio mission marconi century ago application exchange information radio signal developed radio signal electromagnetic wave power centered given frequency radio spectrum corresponds frequency ranging roughly khz ghz frequency allocation plan negotiated government reserve frequency range speciﬁc application broadcast radio broadcast television mobile communication aeronautical radio navigation amateur dio satellite frequency range subdivided channel channel reserved given application radio broadcaster given region frequency division multiplexing fdm static allocation scheme frequency allocated device attached shared medium device us different transmission frequency collision medium access control saylor url http saylor foundation computer networking principle protocol practice release occur optical network variant fdm called wavelength division multiplexing wdm used optical ﬁber transport light different wavelength interference wdm different wavelength allocated device share optical ﬁber time division multiplexing tdm static bandwidth allocation method initially deﬁned phone network ﬁxed telephone network voice conversation usually transmitted kbps signal telephone conservation generates kbytes second byte microsecond telephone conversation need multiplexed single line example europe thirty kbps voice signal multiplexed single mbps line using time division multiplexing tdm tdm divide transmission opportunity slot telephone network slot corresponds croseconds position inside slot reserved voice signal ﬁgure illustrates tdm link used carry voice conversation vertical line represent slot boundary letter different voice conversation byte voice conversation sent microsecond slot byte corresponding given conversation sent position slot figure multiplexing tdm shown completely static conversation share link dynamic case endpoint link exchange message specifying conversation us byte inside slot thanks signalling message possible dynamically add remove voice conversation given link tdm fdm widely used telephone network support ﬁxed bandwidth conversation using local area network support computer probably inefﬁcient computer usually send information ﬁxed rate instead behaviour period computer try send highest possible rate transfer ﬁle period longer period computer doe transmit packet using static allocation scheme computer attached lan lead huge inefﬁciencies able transmit nof total bandwidth period despite fact computer period need transmit information dynamic mac algorithm discussed remainder chapter aim solve problem aloha computer mainly mainframe dozen terminal attached terminal usually building mainframe directly connected case terminal installed remote location connected modem attached line university hawaii chose different organisation instead using telephone line connect distant terminal developed ﬁrst packet radio technology computer network built telephone network physical cable alohanet showed possible use radio signal interconnect computer ﬁrst version alohanet described operated follows terminal mainframe exchanged frame composed bit frame contained character control bit parity information detect transmission error channel mhz range reserved operation alohanet ﬁrst channel used mainframe send frame terminal second channel shared terminal send frame mainframe terminal share transmission channel risk collision deal problem transmission error mainframe veriﬁed parity bit received frame sent acknowledgement channel correctly received frame terminal hand retransmit unacknowledged frame tcp retransmitting frame immediately expiration ﬁxed timeout good approach terminal retransmit frame time leading network collapse better approach far perfect terminal wait random time expiration retransmission timeout avoids synchronisation multiple retransmitting terminal chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release show operation alohanet terminal use python syntax medium access control algorithm described chapter algorithm applied new frame need transmitted attempt transmit frame maxtimes loop transmission attempt performed follows frame sent frame protected timeout terminal wait valid acknowledgement frame expiration timeout terminal receives acknowledgement frame delivered correctly algorithm terminates terminal wait random time attempt retransmit frame aloha n max send frame wait timeout break transmission successful timeout wait transmission attempt analysed performance alohanet particular assumption hanet worked channel lightly loaded case frame rarely retransmitted channel trafﬁc total number correct retransmitted frame transmitted unit time close thechannel utilization number correctly transmitted frame unit time unfortunately analysis reveals channel utilization reach maximum time channel bandwidth higher utilization alohanet unstable network collapse collided retransmissions note amateur packet radio packet radio technology evolved various direction ﬁrst experiment performed university hawaii amateur packet radio service developed amateur radio operator descendant alohanet amateur radio operator interested new technology spend countless hour developing new antenna transceivers ﬁrst personal computer appeared amateur radio operator designed radio modem datalink layer protocol network grew possible connect server european country using packet radio relay amateur radio operator developed protocol stack used packet radio service part amateur packet radio network connected global internet use preﬁx improvement alohanet proposed publication nique variant wireless network today slotted technique proposed important show simple modiﬁcation signiﬁcantly improve channel tion instead allowing terminal transmit time proposed divide time slot allow terminal transmit beginning slot slot corresponds time required transmit ﬁxed size frame practice slot imposed single clock received terminal alohanet located central mainframe analysis reveals simple modiﬁcation improves channel utilization factor carrier sense multiple access aloha slotted aloha easily implemented unfortunately used network lightly loaded designing network low utilisation possible clearly increase cost network overcome problem aloha medium access control mechanism proposed improve channel utilization carrier sense multiple access csma signiﬁcant improvement compared aloha csma requires node listen transmission channel verify free transmitting frame node sens channel busy defers transmission channel free provides detailed description operation csma medium access control saylor url http saylor foundation computer networking principle protocol practice release persistent csma n max wait send frame wait ack timeout ack break transmission successful timeout end loop transmission attempt called persistent csma terminal continuously listen channel transmit frame soon channel free important variant csma csma main difference persistent csma described csma node doe continuously listen channel determine free csma terminal sens transmission channel busy wait random time sensing channel improves channel utilization compared persistent csma persistent csma terminal sense channel busy transmit cause collision soon channel free csma synchronisation doe occur terminal wait random time having sensed transmission channel higher channel utilization achieved csma come expense slightly higher waiting time terminal network lightly loaded non persistent csma n max listen channel free channel send frame wait ack timeout received ack break transmission successful timeout wait end loop transmission attempt analyzes performance csma variant assumption mission channel trafﬁc analysis compare aloha slotted aloha persistent csma assumption aloha achieves channel utilization channel capacity slotted aloha able use capacity persistent csma improves utilization reaching capacity csma achieves channel capacity carrier sense multiple access collision detection csma improves channel utilization compared aloha performance improved especially wired network consider situation terminal connected cable cable example coaxial cable early day ethernet built twisted pair extending csma useful understand intuitively frame transmitted network collision occur ﬁgure illustrates physical transmission frame cable transmit frame host send electrical signal shared medium ﬁrst step begin transmission electrical signal point ﬁgure electrical signal travel cable electrical signal travel fast know information travel faster speed light coaxial cable electrical signal slightly slower chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release speed light kilometer second reasonable estimation implies cable length kilometer electrical signal need microsecond travel end cable end coaxial cable equipped termination point ensure electrical signal reﬂected source illustrated point ﬁgure electrical signal reached left endpoint host point b start receive frame transmitted notice delay transmission bit host reception host host attached cable receive ﬁrst bit frame slightly different time later timing difference key problem mac algorithm point electrical signal reached end cable occupies completely host continues transmit electrical signal end frame shown point sending host stop transmission electrical signal corresponding end frame leaf coaxial cable channel entire electrical signal removed cable figure frame transmission shared bus looked frame actually transmitted electrical signal shared bus interesting look happens host transmit frame time illustrated ﬁgure host b start transmission time point time host c sens channel consider free long time point electrical signal host host b reach host combined electrical signal shown graphically superposition curve ﬁgure decoded host host c detects collision receives signal decode host c decode frame determine host sending colliding frame note host host b detect collision host c point ﬁgure shown host detect collision receive electrical signal decode wired network host able detect collision listening like host c ﬁgure sending frame host transmits frame compare electrical signal transmits electrical signal sens wire point ﬁgure host sens signal point sens electrical signal differs signal detects collision point frame corrupted stop transmission ability detect collision transmitting starting point carrier sense multiple access collision detection medium access control algorithm used ethernet network ethernet host detects collision transmitting immediately stop transmission compared pure csma important improvement collision occur colliding host detected stopped transmission practice host detects collision sends special jamming signal cable ensure host detected collision medium access control saylor url http saylor foundation computer networking principle protocol practice release figure frame collision shared bus better understand collision useful analyse worst collision shared bus network let consider wire host attached end shown ﬁgure host start transmit frame electrical signal propagated cable propagation time depends physical length cable speed electrical signal let use represent propagation delay second slightly second beginning transmission s frame b decides start transmitting frame b sens s frame detects collision stop transmitting beginning b s frame travel cable reach host host detect collision time important point note collision occur ﬁrst second transmission collision did occur period occur transmission channel busy second host sense transmission channel transmitting frame figure worst collision shared bus furthermore wired network used collision cause transmission error affect frame transmission error affect bit inside frame seldom occur wired network reason designer chose completely remove acknowledgement frame datalink layer host transmits frame veriﬁes transmission affected collision given negligible bit error ratio underlying network assumes frame received correctly destination frame retransmitted delay removing acknowledgement interesting optimisation reduces number frame exchanged network number frame need processed host use optimisation ensure host able detect collision affect frame problem chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release important short frame let consider host b sending small frame host c illustrated ﬁgure frame sent b short situation illustrated occur host b send frame stop transmitting point short frame arrive location host c collide host c decode point frame absorbed end wire host host b detected collision consider frame received correctly destination figure collision problem solve problem network using require host transmit second network transmission speed ﬁxed given network technology implies technology us enforces minimum frame size popular technology ethernet called theslot innovation introduced computation retransmission timeout aloha timeout ﬁxed host synchronised retransmit time setting timeout compromise network access delay collision short timeout lead low network access delay higher risk collision hand long timeout cause long network access delay lower risk collision binary exponential algorithm introduced network solve problem understand binary exponential let consider collision caused exactly host detected collision host retransmit frame immediately defer transmission time colliding host ﬂips coin decide retransmit immediately defer retransmission case possible host retransmit immediately new collision occurs ﬁrst host retransmits immediately second defers retransmission second host retransmits immediately ﬁrst defers retransmission host defer retransmission new collision occurs second case host ﬂipped different coin delay chosen host defers retransmission long ensure retransmission collide immediate retransmission host delay longer time necessary avoid collision host decide defer transmission network idle delay confused duration transmission slot slotted aloha network slot time time collision occur beginning transmission frame slotted aloha duration slot transmission time entire frame medium access control saylor url http saylor foundation computer networking principle protocol practice release slot time optimal delay shortest delay ensures ﬁrst host able retransmit frame completely collision host competing algorithm avoid second collision time network heavily loaded host competing time case host able automatically adapt retransmission delay binary exponential performs adaptation based number collision affected frame ﬁrst collision host ﬂips coin wait slot time second collision generates random number wait slot time duration waiting time doubled collision complete algorithm shown ﬁgure n max wait send frame collision collision detected stop transmitting send jamming k min n r random slottime wait r slottime wait break end loop transmission attempt delay used short delay corresponding time required network adapter switch transmit receive mode used prevent host sending continuous stream frame leaving transmission opportunity host network contributes fairness despite delay condition completely fair consider example network host server sending long frame client sending acknowledgment measurement reported shown situation client suffer repeated collision lead wait long period time exponential algorithm carrier sense multiple access collision avoidance thecarrier sense multiple access collision avoidance medium access control algorithm designed popular wifi wireless network technology sens transmission channel transmitting frame furthermore try avoid collision carefully tuning timer used device us acknowledgement like csma frame contains sequence number crc crc used detect transmission error sequence number used avoid frame duplication device receives correct frame return special acknowledgement frame sender introduces small delay named short inter frame spacing sif reception frame transmission acknowledgement frame delay corresponds time required switch radio device reception transmission mode compared csma deﬁnes precisely device allowed send frame deﬁnes delay difs andeifs send frame device ﬁrst wait channel idle distributed coordination function inter frame space difs previous frame received correctly previously received frame corrupted indicates collision device sense channel idle extended inter frame space eifs sif difs eifs exact value sif difs eifs depend underlying physical layer chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release ﬁgure show basic operation device transmitting host averiﬁes channel long period sends data frame checking validity received frame recipient sends acknowledgement frame short sif delay host c doe participate frame exchange sens channel busy beginning data frame host ccan use information determine long channel busy note sif difs eifs device start sense channel immediately bit data frame decide transmit frame transmission acknowledgement frame figure operation device main difﬁculty device transmit time cause collision illustrated ﬁgure assuming ﬁxed timeout transmission data frame timeout transmission data frame small corresponds sif plus time required transmit acknowledgement frame figure collision medium access control saylor url http saylor foundation computer networking principle protocol practice release deal problem relies backoff timer backoff timer random delay chosen device range depends number retransmissions current frame range grows exponentially retransmissions minimum range backoff timer slottime parameter depends underlying physical layer compared s exponential backoff important difference notice initial range backoff timer seven time larger impossible detect collision happen collision affect entire frame affect beginning frame second device regularly sense transmission channel timer channel busy device transmitting timer frozen channel free channel free timer restarted contrast recomputed collision illustrated ﬁgure host achooses smaller backoff host csenses channel busy freeze backoff timer restarts channel free figure detailed example summarises operation device value sif difs eifs slottime depend underlying physical layer technology simplified n max waituntil free channel correct wait wait int random min slottime wait channel free backoff timer frozen channel sensed busy send frame wait ack timeout received ack frame received correctly break retransmission required chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release problem faced wireless network called hidden station problem wireless network radio signal propagated way direction example device separated wall able receive s signal receiving signal produced host illustrated ﬁgure happen environment example device different side hill able receive s signal able receive signal sent station hill furthermore radio propagation condition change time example truck temporarily block communication nearby device figure hidden station problem avoid collision situation allows device reserve transmission channel time using control frame request send rts clear send ct short frame minimize risk collision reserve transmission channel device sends rts frame intended recipient data frame rts frame contains duration requested reservation recipient reply sif delay ct frame contains duration reservation duration reservation sent rts ct host collide sender reception data frame informed reservation compute total duration transmission defer access transmission channel illustrated ﬁgure host areserves transmission channel send data frame host host cnotices reservation defers transmission figure reservation utilization reservation optimisation useful collision frequent collision time required transmit rts ct frame signiﬁcant particular short frame exchanged device turn transmission error medium access control saylor url http saylor foundation computer networking principle protocol practice release deterministic medium access control algorithm huge debate networking community best suited medium access control algorithm local area network optimistic algorithm described relatively easy implement designed performance perspective mathematical model simulation showed ability optimistic technique sustain load optimistic technique able guarantee frame delivered given delay bound application require predictable transmission delay deterministic mac algorithm considered fraction networking community best solution fulﬁll need local area network proponent deterministic opportunistic technique lobbied develop standard local area network incorporate solution instead trying ﬁnd impossible compromise diverging view ieee committee chartered develop local area network standard chose work parallel different lan technology created working group ieee working group responsible proponent deterministic mac algorithm agreed basic principle exchanging special frame called token device regulate access transmission medium did agree suitable physical layout network ibm argued favor network manufacturing industry led general motor argued favor network led creation ieee working group standardise token bus network ieee working group standardise token ring network technique widely used anymore today principle protocol important ieee token ring technology deﬁned use token ring example explain principle mac algorithm network network include defunct fddi recent resilient pack ring good survey token ring network token ring network composed set station attached unidirectional ring basic principle token ring mac algorithm type frame travel ring token data frame token ring start station sends token token small frame represents authorization transmit data frame ring transmit data frame ring station ﬁrst capture token removing ring station capture token time station owns token safely transmit data frame ring risking collision having transmitted frame station remove ring resend token station transmit frame figure token ring network basic principle token ring simple subtle implementation detail add complexity token ring network understand detail let analyse operation token ring interface station token ring interface serf different purpose like lan interface able send receive frame addition token ring interface ring able forward electrical signal pass ring station powered token ring interface operate different mode listen andtransmit operating inlisten mode token ring interface receives electrical signal upstream neighbour ring introduces delay equal transmission time bit ring regenerates signal sending downstream neighbour ring chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release ﬁrst problem faced token ring network token represents authorization transmit continuously travel ring data frame transmitted let assume token produced sent ring station token ring network token bit frame structure shown figure token format token composed ﬁelds starting delimiter marker indicates beginning frame ﬁrst token ring network used manchester coding starting delimiter contained symbol representing symbol represent bit ﬁeld ending delimiter mark end token access control ﬁeld present frame contains ﬂags important thetoken bit set token frame reset frame let consider ﬁve station network depicted ﬁgure token ring network assume station sends token neglect propagation delay link station introduces bit delay ﬁrst bit frame return sends ﬁfth bit token station powered time ﬁrst ﬁve bit token travel ring avoid problem special station called monitor token ring ensure token travel forever ring monitor insert delay equal bit transmission time station monitor ﬁgure token ring network able transmit entire token receiving ﬁrst bit token upstream neighbour explained token forwarded ring let analyse station capture token transmit data frame need information format data frame data frame begin starting delimiter followed access control ﬁeld token bit reset aframe control ﬁeld allows deﬁnition type frame destination source address payload crc ending delimiter frame status ﬁeld format token ring data frame illustrated figure data frame format capture token station operate listen mode mode station receives bit upstream neighbour bit correspond data frame forwarded downstream neighbour correspond token station capture transmit data frame data frame token encoded bit string beginning starting delimiter followed access control ﬁeld station receives ﬁrst bit starting delimiter know data frame token medium access control saylor url http saylor foundation computer networking principle protocol practice release forward entire delimiter downstream neighbour receives fourth bit access control ﬁeld token bit station know frame data frame token thetoken bit reset indicates data frame remaining bit data frame forwarded downstream station token bit set token station capture resetting bit currently buffer thanks modiﬁcation beginning token beginning data frame station switch transmit mode send data frame starting ﬁfth bit access control ﬁeld delay introduced token ring station play key role enabling station efﬁciently capture token having transmitted data frame station remain transmit mode received bit data frame ensures bit sent station remain network forever data frame sent station token ring network pass station attached network station detect data frame analyse destination address possibly capture frame frame status ﬁeld appears ending delimiter used provide acknowledgement requiring special frame frame status contains ﬂags aandc ﬂags reset station sends data frame ﬂags modiﬁed recipient station sens address destination address frame capture frame check crc place buffer destination frame set abit resp cbit frame status ﬁeld seen resp copied data frame inspecting frame status returning frame sender verify frame received correctly destination text describes basic operation token ring network station work correctly tunately real token ring network able handle various type anomaly increase complexity token ring station brieﬂy list problem outline solution detailed description operation token ring station ﬁrst problem station attached network start bootstrap network sending ﬁrst token station implement distributed election mechanism used select monitor station amonitor monitor manages token ring network ensures operates correctly ﬁrst role introduce delay bit transmission time ensure token travel smoothly ring second themonitor sends ﬁrst token ring verify token pass regularly according token ring standard station retain token transmit data frame duration longer token holding time tht slightly millisecond network containing nstations monitor receive token second monitor doe receive token period cut ring time reinitialises ring sends token anomaly occur token ring network example station capture token powered having resent token station captured token sent data frame powered receiving data frame case bit string corresponding end frame remain ring removed sender technique deﬁned allow monitor handle problem unfortunately monitor fails station elected new monitor datalink layer technology section review key characteristic datalink layer technology discus technology widely used today detailed survey datalink layer technology outside scope book protocol datalink developed starting section focus protocol used transport ip packet host router directly connected link link dedicated physical cable leased line telephone network connection modem communicating host hdlc widely used datalink layer protocol chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release ﬁrst solution transport ip packet serial line proposed rfc known serial line ip slip slip simple character stufﬁng technique applied ip packet slip deﬁnes special character end decimal esc decimal end appears beginning end transmitted ip packet sender add esc end character inside transmitted ip packet slip support transmission ip packet assumes communicating manually conﬁgured s ip address slip mainly used link offering bandwidth kbps low bandwidth link sending byte ip header followed byte tcp header tcp segment take lot time initiated development family compression technique efﬁciently compress header ﬁrst header compression technique proposed rfc designed exploit redundancy consecutive segment belong tcp connection segment ip address port number furthermore ﬁelds sequence acknowledgement number change random way rfc deﬁned simple technique reduce redundancy successive segment development header compression technique continued improvement developed rfc slip implemented used environment limitation discussed rfc protocol ppp designed shortly speciﬁed rfc ppp aim support ip network layer protocol various type serial line ppp fact family protocol used protocol deﬁnes framing technique transport network layer packet link control protocol used negotiate option authenticate session using username password type credential network control protocol speciﬁc network layer protocol used negotiate option speciﬁc protocol example s ncp rfc negotiate address used address dns resolver s ncp deﬁned rfc ppp framing rfc inspired datalink layer protocol standardised iso typical ppp frame composed ﬁelds shown ﬁgure ppp frame start byte ﬂag containing ppp use bit stufﬁng character stufﬁng depending environment protocol used address control ﬁelds present backward compatibility reason bit protocol ﬁeld contains network layer protocol carried ppp frame used packet compressed rfc used uncompressed packet used link control protocol used password authentication protocol pap used packet ppp support variable length packet lcp negotiate maximum packet length ppp frame end frame check sequence default bit crc implementation negotiate bit crc frame end ﬂag figure ppp frame format ppp played key role allowing internet service provider provide access modem late early isps operated modem bank connected telephone network isps key issue authenticate user connected telephone network authentication performed using extensible authentication protocol eap deﬁned rfc eap simple extensible protocol initially used access router authenticate user connected dialup line authentication method starting simple pair complex scheme iana maintains registry assigned ppp protocol ﬁelds http datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release deﬁned implemented isps started upgrade physical infrastructure provide internet access asymmetric digital subscriber line adsl tried reuse existing authentication billing system meet requirement ietf developed speciﬁcations allow ppp frame transported network link ppp designed nowadays adsl deployment use ppp atm rfc ethernet rfc ethernet ethernet designed palo alto research center ﬁrst coaxial cable shared medium mbps bandwidth ethernet improved late digital equipment intel xerox published ﬁrst ofﬁcial ethernet speciﬁcation dix speciﬁcation deﬁnes important parameter ethernet network ﬁrst decision standardise commercial ethernet mbps second decision duration slot time ethernet long slot time enables network span long distance force host use larger minimum frame size compromise slot time microsecond corresponds minimum frame size byte decision frame format experimental mbps ethernet network built xerox used short frame containing bit source destination address ﬁelds bit type indication byte payload bit crc using bit address suitable experimental network clearly small commercial deployment initial ethernet speciﬁcation dix allowed host ethernet network recommended important change compared networking technology available time ﬁrst change require host attached ethernet network globally unique datalink layer address datalink layer address manually conﬁgured host went state art noted suitable administrative procedure needed assigning number host network host moved network necessary change host number number use new network easier said network administrator record continuously changing state piece paper tacked wall anticipated future ofﬁce environment host location change telephone changed second change introduced ethernet encode address bit ﬁeld bit address huge compared networking technology available huge address space advantage including ability allocate large block address manufacturer eventually lan technology opted bit address change introduced ethernet deﬁnition broadcast andmulticast address need multicast ethernet foreseen thanks size addressing space possible reserve large block multicast address manufacturer datalink layer address used ethernet network called mac address structured shown ﬁgure ﬁrst bit address indicates address identiﬁes network adapter multicast group upper bit used encode organisation unique identiﬁer oui oui identiﬁes block address allocated responsible uniqueness ethernet address manufacturer manufacturer received oui build sell product million address block figure bit ethernet address format original mbps ethernet speciﬁcation dix deﬁned simple frame format frame composed ﬁve ﬁelds ethernet frame start preamble shown ﬁgure used physical layer receiver synchronise clock sender s clock ﬁrst ﬁeld frame destination information history ethernet technology http ouis allocated xerox ethernet ieee later iso standard allocation ouis moved ieee list oui allocation http chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release address address placed beginning frame ethernet interface quickly verify frame recipient cancel processing arriving frame second ﬁeld source address destination address unicast address source address unicast address ﬁeld bit integer indicates type network layer packet carried inside frame ﬁeld called ethertype frequently used ethertype include address resolution protocol arp fourth ethernet frame payload minimum length payload byte ensure minimum frame size including header bit ethernet payload longer byte size reasonable ﬁrst ethernet speciﬁcation written time xerox using experimental mbps ethernet offered byte payload rfc required minimum mtu byte byte large support need forcing network adapter contain overly large memory furthermore simulation measurement study performed ethernet network revealed able achieve high utilization illustrated ﬁgure based show channel utilization achieved ethernet network containing different number host sending frame different size figure impact frame length maximum channel utilisation ﬁeld ethernet frame bit cyclical redundancy check crc crc able catch larger number transmission error internet checksum used ip udp tcp format ethernet frame shown note crc located frame transport datalink layer usually chose different strategy place crcs checksum transport layer protocol usually place crcs checksum segment header datalink layer protocol place crc frame header trailer end frame choice reﬂects tion assumption inﬂuences performance rfc crc placed trailer ethernet datalink layer compute transmitting frame insert end transmission ernet interface use optimisation today checksum placed header tcp segment impossible network interface compute transmitting segment network interface provide hardware assistance compute tcp checksum complex tcp checksum placed ofﬁcial list assigned ethernet type value available http attentive reader question need different ethertypes ip header contains version ﬁeld used distinguish packet theoretically used ethertype unfortunately developer early implementation device did check version ﬁeld packet received parsed frame ethertype set packet sending packet device caused disruption avoid problem ietf decided apply distinct ethertype value network interface compute tcp checksum segment transferred host memory network interface datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release figure ethernet dix frame format ethernet frame format shown speciﬁed dix format used send rfc packet rfc publication dix institute electrical electronic engineer ieee began standardise local area network technology ieee worked lan gy starting ethernet token ring token bus technology completely different agreed use bit mac address speciﬁed initially ethernet developing ethernet standard ieee working group confronted problem ethernet mandated minimum payload size byte company looking lan technology parently transport short frame containing byte payload frame sent ethernet host padding ensure payload byte long ethernet header dix doe contain length ﬁeld impossible receiver determine useful byte placed inside payload ﬁeld solve problem ieee decided replace type ﬁeld ethernet dix header length length ﬁeld contains number useful byte frame payload load contain byte padding byte added sender removed receiver order add length ﬁeld signiﬁcantly changing frame format ieee remove type ﬁeld ﬁeld impossible receiving host identify type network layer packet inside received frame solve new problem ieee developed completely new sublayer called logical link control protocol deﬁned sublayer provided slightly different version type ﬁeld original ethernet frame format contained acknowledgement retransmissions provide reliable service practice used support ip ethernet network ﬁgure show ofﬁcial frame format figure ethernet frame format note ethernet service ethernet network provides unreliable connectionless service support different transmission mode ieee able deﬁne frame format maintaining backward compatibility ethernet dix frame format trick assign value ethertype value host receives frame determine frame s format checking ﬁeld value lower smaller clearly length indicator frame value larger type dix frame chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release unicast multicast andbroadcast ethernet service unreliable theory good ethernet network practice provide service delivers frame destination high probability successful delivery doe reorder transmitted frame ﬁrst property consequence utilisation second property consequence physical organisation ethernet network shared bus property important evolution ethernet technology preserved physical layer deﬁned ethernet network ﬁrst physical layer usually called provided mbps coaxial cable characteristic cable transceivers used enabled utilisation meter long segment network include repeater segment second physical layer physical layer used coaxial cable easier install cable longer meter physical layer deﬁned transport ethernet optical link major change physical layer support twisted pair speciﬁcation twisted pair cable traditionally used support telephone service ofﬁce building ofﬁce building today equipped structured cabling twisted pair cable installed room central telecom closet building ﬂoor large building telecom closet act concentration point telephone service lan introduction twisted pair led major change ethernet ﬁrst change concern physical topology network network shared bus coaxial cable typically pass room contains connected computer network network device connected network attached twisted pair cable end telecom closet maintenance perspective major improvement cable weak point network physical damage cable broke entire network failure occurred network administrator manually check entire cable detect damaged twisted pair damaged device connected twisted pair affected doe affect device second major change introduced impossible build network simply connecting twisted pair twisted pair connected relay operates physical layer relay called ethernet hub hubis physical layer relay receives electrical signal interface regenerates signal transmits interface hub able convert electrical signal physical layer conversion figure ethernet hub reference model computer directly attached ethernet hub ethernet hub attached ethernet hub build larger network important guideline followed building complex network hub network topology tree hub relay physical layer adding link network create electrical shortcut completely disrupt network implies redundancy network failure hub link hub partition network isolated network second hub relay physical layer collision happen handled network implies maximum delay pair device network longer datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release microsecond slot time delay longer collision short frame correctly detected constraint limit geographical spread network containing hub figure hierarchical ethernet network composed hub late mbps slow application network manufacturer developed lan technology offered higher bandwidth mbps fddi lan used optical ﬁbers development shown ethernet adapted different physical layer manufacturer started work mbps ethernet convinced ieee standardise new technology initially called fast ethernet fast ethernet designed constraint fast ethernet support twisted pair easier physical layer perspective support higher bandwidth coaxial cable twisted pair coaxial cable nightmare deployment maintenance perspective second fast ethernet perfectly compatible existing mbps ethernet allow fast ethernet technology used initially backbone technology interconnect mbps ethernet network forced fast ethernet use exactly frame format mbps ethernet implied minimum fast ethernet frame size remained bit preserve minimum frame size mbps instead mbps duration slot time decreased microsecond evolution ethernet did stop ieee published ﬁrst standard provide gigabit ethernet optical ﬁbers type physical layer added gigabit ethernet standard appeared work ongoing develop standard gigabit gigabit ethernet thinking terabit ethernet table list main ethernet standard detailed list http standard comment coaxial cable coaxial cable pair category utp optical ﬁber category utp stp m maximum multimode optical ﬁber km maximum pair shielded twisted pair maximum multimode single mode optical ﬁbers laser gbps optical ﬁber category utp gbps developed standard expected ethernet switch increasing physical layer bandwidth fast ethernet solution improve mance ethernet lan second solution replace hub intelligent device ethernet hub operate physical layer regenerate electrical signal extend geographical reach chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release network performance perspective interesting device operate datalink layer analyse destination address frame forward frame selectively link lead destination device usually called ethernet ethernet switch relay operates datalink layer illustrated ﬁgure figure ethernet switch reference model anethernet switch understands format ethernet frame selectively forward frame interface ethernet switch maintains mac address table table contains mac address known switch identiﬁer switch s port frame sent address forwarded reach destination illustrated mac address table switch switch receives frame destined address b forward frame south port receives frame destined address d forward north port figure operation ethernet switch selling point ethernet network thanks utilisation bit mac address ethernet lan plug play datalink layer host attached ethernet segment hub immediately exchange ethernet frame requiring conﬁguration important retain plug play capability ethernet switch implies ethernet switch able build mac address table automatically requiring manual conﬁguration automatic conﬁguration performed mac address learning algorithm run ethernet switch algorithm extract source address received frame remembers port frame ﬁrst ethernet relay operated datalink layer called bridge practice main difference switch bridge bridge usually implemented software switch device text use switch referring relay datalink layer word bridge datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release source ethernet address received information inserted mac address table switch us forward frame allows switch automatically learn port use reach destination address provided host previously sent frame problem upper layer protocol use acknowledgement layer ethernet printer sends ethernet frame detail ethernet switch forward ethernet frame ﬁrst update mac address table source address frame mac address table used switch contains timestamp updated time frame received known source address timestamp used remove mac address table entry active nminutes limit growth mac address table allows host port switch us mac address table forward received unicast frame entry frame s destination address mac address table frame forwarded selectively port listed entry switch doe know reach destination address forward frame port port frame received ensures frame reach destination expense unnecessary transmission unnecessary transmission destination sent ﬁrst frame multicast broadcast frame forwarded similar way arrival frame f port p table mac address table dictionary port port list port switch table src src heard port p ifisunicast dst ifdst intable forwardframe f table dst oinports ifo p forwardframe f o multicast broadcast destination oinports ifo p forwardframe f o note security issue ethernet hub switch security perspective ethernet hub drawback older coaxial cable host attached hub able capture frame exchanged pair host attached hub ethernet switch better perspective thanks selective forwarding host usually receive frame destined multicast broadcast unknown frame doe imply switch completely secure unfortunately attack ethernet switch security perspective mac address table fragile element ethernet switch table ﬁxed size switch store ten hundred address switch store ten thousand address security point view limited resource target denial service attack unfortunately attack possible ethernet switch malicious host overﬂow mac address table switch generating thousand frame random source address mac address table switch need broadcast frame receives point attacker receive unicast frame destined address arp attack discussed previous chapter occur ethernet switch recent switch implement type defence attack need carefully conﬁgured network administrator detailed discussion security issue ethernet switch themac address learning algorithm combined forwarding algorithm work network shown deal link switch failure network administrator add redundant link ensure network remains connected failure let consider happens ethernet network shown ﬁgure switch boot mac address table assume host asends frame host reception frame update mac address table remember address ai reachable chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release figure ethernet switch loop west port entry address cin s mac address table frame forwarded receives frame update mac address table address forward frame host ca received copy frame doe know reach destination address forward frame received frame received single frame sent host awill continuously duplicated switch mac address table contains entry address quickly available link bandwidth used forward copy frame ethernet doe contain ttl hoplimit loop stop mac address learning algorithm allows switch unfortunately loop arise network topology tree severe problem forcing switch used network hub severe limitation solve problem inventor ethernet switch developed spanning tree protocol protocol allows switch automatically disable port ethernet switch ensure network doe contain cycle cause frame loop forever spanning tree protocol thespanning tree protocol stp proposed distributed protocol used switch reduce network topology spanning tree cycle topology example consider network shown ﬁgure ﬁgure bold line corresponds ethernet ethernet switch attached network contains cycle broken allow ethernet switch using mac address learning algorithm exchange frame network stp compute following spanning tree root tree interface spanning tree interface connected lanb active lanh served port onlang disabled frame originating lanb destined lana forwarded onlanc onlane onlanf eventually onlana switch running spanning tree protocol exchange bpdus bpdus sent frame destination mac address reserved multicast mac address switch unique bitidentiﬁer ensure uniqueness lower bit identiﬁer set unique mac address allocated switch manufacturer high order bit switch identiﬁer conﬁgured network administrator inﬂuence topology spanning tree default value high order bit datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release figure spanning tree computed switched ethernet network switch exchange bpdus build spanning tree intuitively spanning tree built ﬁrst selecting switch smallest identiﬁer root tree branch spanning tree composed shortest path allow switch compose network reached bpdus exchanged switch contain following information identiﬁer root switch r cost shortest path switch sent bpdu root switch c identiﬁer switch sent bpdu t number switch port bpdu sent p use notation r c t p represent bpdu root identiﬁer isr cost iscand sent port pof switch construction spanning tree depends ordering relationship bpdus ordering relationship implemented python function return true bpdu better bpdu def better return addition identiﬁer discussed network administrator conﬁgure cost associated switch port usually cost port depends bandwidth standard recommends value course network administrator choose value use notation cost p indicate cost associated port pin section bandwidth cost mbps mbps gbps gbps gbps thespanning tree protocol us terminology illustrate ﬁgure switch port different state root designated andblocked port root switch designated state state port switch determined based bpdu received port spanning tree protocol us ordering relationship build spanning tree switch listens bpdus port r c t p received port q switch computes port s priority vector v q r q t p q cost q cost associated port bpdu chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release received switch store table priority vector received port switch compare identiﬁer smallest root identiﬁer stored table identiﬁer smaller switch root spanning tree deﬁnition distance root bpdu switch r p ri switch identiﬁer andpwill set port number bpdu sent switch chooses best priority vector table r c t p port best priority vector learned switch port closest root switch port root port switch root port switch switch compute bpdu r c s p ri root identiﬁer cthe cost best priority vector sthe identiﬁer switch pwill replaced number port bpdu sent switch determine state port comparing bpdu priority vector received port switch s bpdu better priority vector port port designated port port blocked port state port important considering transmission bpdus root switch regularly sends bpdu designated port bpdu received root port switch directly connected root switch switch computes bpdu sends bpdu designated port bpdus received root port downstream switch compute bpdu network topology stable switch send bpdu designated port receive bpdu root port bpdu sent blocked port switch listen bpdus blocked anddesignated port bpdu received port topology stable utilisation port bpdus data frame summarised table port state receives bpdus sends bpdu handle data frame blocked yes root yes yes designated yes yes yes illustrate operation spanning tree protocol let consider simple network topology ﬁgure figure simple spanning tree computed switched ethernet network assume ﬁrst boot sends port boot sends bpdu received update table computes new port root port second port designated state assume boot immediately receives s bpdu port computes port root port switch bpdu sent port datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release reach compare priority vector built bpdu notice better port blocked port computation spanning tree switch discard received data frame time network topology guaranteed topology stable time switch start use mac learning algorithm forward data frame root anddesignated port used forward data frame switch discard data frame received blocked port forward frame port switch port link fail switched ethernet network failure occurs switch able recompute spanning tree recover failure spanning tree protocol relies regular transmission bpdus detect failure bpdu contains additional ﬁelds age bpdu maximum age agecontains time passed root switch initially originated bpdu root switch sends bpdu ageof zero switch computes bpdu increment ageby ageof bpdus stored switch s table incremented second bpdu expires age reach maximum age network stable doe happen bpdu s regularly sent root switch downstream switch root fails network partitioned bpdu expire switch recompute bpdu restart spanning tree protocol topology change detected forwarding data frame stop topology guaranteed additional detail reaction failure virtual lan important advantage ethernet switch ability create virtual local area network vlans virtual lan deﬁned set port attached ethernet switch switch support vlans run mac learning algorithm virtual lan switch receives frame unknown multicast destination forward port belong virtual lan port belong virtual lan similarly switch learns source address port associate virtual lan port us information forwarding frame virtual lan ﬁgure illustrates switched ethernet network virtual lan require local conﬁguration switch host ccan exchange frame host d host outside vlan complex port vlan switch support vlans local conﬁguration sufﬁcient anymore switch receives frame switch able determine vlan frame originated use correct mac table forward frame assigning identiﬁer virtual lan placing identiﬁer inside header frame exchanged switch figure virtual local area network switched ethernet network ieee deﬁned standard special header encode vlan identiﬁers bit header includes bit vlan ﬁeld contains vlan identiﬁer frame format header described header inserted immediately source mac address ethernet frame ethertype ﬁeld maximum frame size increased byte encoded bit contains chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release figure format header ﬁelds tag protocol identiﬁer set allow receiver detect presence additional header priority code point pcp bit ﬁeld used support different transmission priority frame value lowest priority value highest frame higher priority expect forwarded earlier frame having lower priority cbit used compatibility ethernet token ring network bit header contain vlan identiﬁer value frame doe belong vlan value reserved implies different vlan identiﬁers used ethernet network wireless network radio spectrum limited resource shared twentieth century government international organisation regulated radio spectrum regulation control utilisation radio spectrum order ensure interference different user company want use frequency range given region apply license regulator regulator charge fee utilisation radio spectrum government encouraged competition company bidding frequency increase license fee ﬁrst experiment alohanet wireless network grew experiment outside arpanet experiment ﬁrst mobile phone veloped tested experimental mobile phone starting point ﬁrst generation analog mobile phone given growing demand mobile phone clear analog mobile phone ogy sufﬁcient support large number user support user new service researcher country worked development digital mobile telephone european country decided develop standard common cellular telephone europe global mobile communication gsm standard evolved billion user connected gsm network today frequency range radio spectrum reserved speciﬁc application require special licence exception exception known industrial scientiﬁc medical ism radio band band used industrial scientiﬁc medical application requiring licence regulator example model use mhz ism band cordless telephone operate mhz ism ghz band added list ism band frequency range corresponds frequency emitted microwave oven sharing band licensed application likely caused interference given large number microwave oven used despite risk interference microwave oven opening ghz allowed networking industry develop wireless network technique allow computer exchange data using cable section discus popular wifi family wireless network wireless networking technique bluetooth orhiperlan use frequency range today wifi popular wireless networking technology hundred million wifi device development technology started late wavelan proprietary wireless network wavelan operated mbps used different frequency band different region world early ieee created working group standardise family wireless network technology working group proliﬁc produced wireless networking standard use different frequency range different physical layer table provides summary main standard datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release standard frequency typical throughput max bandwidth range m ghz mbps mbps ghz mbps mbps ghz mbps mbps ghz mbps mbps ghz mbps mbps developing family standard ieee working group took similar approach ieee working group developed various type physical layer ethernet network network use medium access control technique described earlier assume architecture use frame format architecture wifi network slightly different local area network discussed practice main type wifi network independent oradhoc network infrastructure independent oradhoc network composed set device communicate device play role adhoc network usually connected global internet adhoc network used example laptop need exchange information connect computer wifi printer figure independent adhoc network wifi network infrastructure network infrastructure network contains access point attached ﬁxed local area network usually ethernet network connected network internet ﬁgure show network access point wifi device wifi device associated access point us access point relay exchange frame device associated access point reachable lan access point relay operates datalink layer like switch ﬁgure represents layer reference model involved wifi host communicates host attached ethernet network access point device exchange variable length frame slightly different structure simple frame format used ethernet lan review key part frame additional detail frame contains ﬁxed length header variable length payload contain byte user data bit crc payload contain byte working group deﬁned basic service set bs group device communicate continue usenetwork referring set device communicate chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release figure infrastructure network figure access point datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release deployment use maximum payload size byte used infrastructure network attached ethernet lan data frame shown figure data frame format ﬁrst header bit frame control ﬁeld ﬁeld contains ﬂags indicate type frame data frame acknowledgement management frame frame sent ﬁxed lan duration bit ﬁeld used reserve transmission channel data frame duration ﬁeld usually set time required transmit acknowledgement frame sif delay note duration ﬁeld set zero multicast broadcast frame frame acknowledged need reserve transmission channel transmission sequence control ﬁeld contains bit sequence number incremented data frame astute reader noticed data frame contain address surprising compared protocol network datalink layer header contain source destination address need address header come infrastructure network network frame usually exchanged router server attached lan wifi device attached access point role address ﬁelds speciﬁed bit ﬂags frame control ﬁeld frame sent wifi device server attached lan access point ﬁrst address frame set mac address access point second address set mac address source wifi device address address ﬁnal destination lan server reply sends ethernet frame source address mac address destination address mac address wifi device frame captured access point convert ethernet header frame header frame sent access point contains address ﬁrst address mac address destination wifi device second address mac address access point address mac address server sent frame control frame simpler data frame contain frame control duration ﬁeld address acknowledgement frame small contain address destination acknowledgement source address sequence control ﬁeld acknowledgement frame acknowledgement frame easily associated previous frame acknowledges unicast data frame contains duration ﬁeld used reserve transmission channel ensure collision affect acknowledgement frame sequence control ﬁeld mainly used receiver remove duplicate frame duplicate frame detected follows data frame contains bit sequence control ﬁeld frame control ﬁeld contains retry bit ﬂag set frame transmitted receiver store recent sequence number received source address frame retry bit reset reception frame retry bit set receiver veriﬁes sequence number determine duplicated frame frame used reserve transmission channel order transmit data frame acknowledgement rts frame contain duration transmitter receiver address duration fact frame format contains fourth optional address ﬁeld fourth address used wireless network used interconnect bridge attached classical lan network chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release figure ieee ack ct frame ﬁeld rts frame indicates duration entire reservation time required transmit ct data frame acknowledgement required sif delay ct frame format acknowledgement frame figure ieee rts frame format note service despite utilization acknowledgement layer provides unreliable connectionless service like ethernet network use acknowledgement acknowledgement used minimize probability frame duplication guarantee frame correctly received recipient like ethernet network provide high probability successful delivery frame guarantee furthermore noted network use acknowledgement multicast broadcast frame implies practice frame likely suffer transmission error unicast frame addition data control frame brieﬂy described network use type management frame management frame used various purpose brieﬂy frame detailed discussion ﬁrst type management frame beacon frame frame broadcasted regularly access point beacon frame contains information capability access point supported transmission rate service set identity ssid ssid ascii string contain character access point support ssids announce beacon frame access point choose remain silent advertise beacon frame case wifi station send probe request frame force available access point return probe response frame note ip type encapsulation scheme deﬁned support ip ethernet network original encapsulation scheme built ethernet dix format deﬁned rfc second encapsulation rfc scheme built protocol network situation simpler rfc encapsulation used practice encapsulation add byte header ﬁrst byte correspond header followed byte ethernet type ﬁeld ip arp ﬁgure show ip packet encapsulated frame second important utilisation management frame allow wifi station associated access point wifi station start listens beacon frame ﬁnd available ssids allowed datalink layer technology saylor url http saylor foundation computer networking principle protocol practice release figure ip ieee send receive frame access point wifi station associated access point access point doe use security mechanism secure wireless transmission wifi station simply sends association request frame preferred access point usually access point receives strongest radio signal frame contains parameter chosen wifi station ssid request join access point reply association response frame accepts wifi station summary chapter ﬁrst explained principle datalink layer type datalink layer used link used local area network link datalink layer provide framing technique datalink layer protocol include reliability mechanism used transport layer described protocol used link internet local area network pose different problem device share transmission channel case medium access control algorithm necessary regulate access transmission channel device transmit time collision occurs frame decoded recipient family mac algorithm statistical optimistic mac algorithm reduce probability collision completely prevent algorithm collision occurs collided frame retransmitted described operation aloha csma mac algorithm deterministic pessimistic mac algorithm avoid collision described token ring mac station exchange token regulate access transmission channel finally described successful local area network technology ethernet wifi ethernet facto lan technology analysed evolution ethernet including operation hub switch described spanning tree protocol used switch interconnected year wifi facto wireless technology home inside enterprise explained operation wifi network described main frame exercise consider switched network shown ﬁgure spanning tree computed network assuming link unit cost indicate state port consider switched network shown ﬁgure network assume lan switch switch update table link failure enterprise network organized set backbone device interconnected using mesh link shown ﬁgure network beneﬁts drawback using ethernet chapter datalink layer local area network saylor url http saylor foundation computer networking principle protocol practice release figure small network composed ethernet switch switch ip router running ospf figure typical enterprise backbone network commercial ethernet switch able run spanning tree protocol independently vlan beneﬁts using spanning tree exercise saylor url http saylor foundation computer networking principle protocol practice release chapter datalink layer local area network saylor url http saylor foundation chapter glossary aimd additive increase multiplicative decrease rate adaption algorithm used notably tcp host additively increase transmission rate network congested multiplicatively decrease congested detected anycast transmission mode information sent source onereceiver belongs speciﬁed group api application programming interface arp address resolution protocol protocol used device obtain datalink layer address corresponds address local area network arp deﬁned rfc arpanet advanced research project agency arpa network network built network scientist usa funding arpa ministry defense arpanet considered grandfather today s internet ascii american standard code information interchange ascii scheme deﬁnes binary representation character ascii table contains printable character control character ascii character encoded bit contained character required write text english character set unicode developed later support written language abstract syntax notation designed iso standard ﬂexible notation used data structure representing encoding transmitting decoding data application designed used presentation layer osi reference model used protocol snmp atm asynchronous transfer mode bgp border gateway protocol interdomain routing protocol used global internet bnf form bnf formal way language using syntactic lexical rule bnfs frequently used deﬁne programming language deﬁne message exchanged networked application rfc explains bnf written specify internet protocol broadcast transmission mode information sent node network cidr classless inter domain routing current address allocation architecture deﬁned rfc andrfc line synonym regular telephone line line used dial telephone number dns domain distributed database allows map name ip address dns domain deﬁned rfc saylor url http saylor foundation computer networking principle protocol practice release dns domain distributed database queried host map name ip address ebgp ebgp session bgp session directly connected router belong different autonomous system called external bgp session egp exterior gateway protocol synonym interdomain routing protocol eigrp enhanced interior gateway routing protocol eigrp proprietary intradomain routing protocol used enterprise network eigrp us dual algorithm described frame frame unit information transfer datalink layer wide area networking technology using virtual circuit deployed telecom operator ftp file transfer protocol deﬁned rfc facto protocol exchange ﬁles internet widespread adoption http rfc ftp file transfer protocol deﬁned rfc ﬁle initially contained list internet host address network grew ﬁle replaced dns host maintains small ﬁle used dns available html hypertext markup language speciﬁes structure syntax document changed world wide web html maintained html working group http hypertext transport protocol deﬁned rfc hub relay operating physical layer iana internet assigned number authority iana responsible coordination dns root ip addressing internet protocol resource ibgp ibgp session bgp router belonging autonomous called internal bgp session icann internet corporation assigned name number icann coordinate allocation domain name ip address number protocol parameter coordinate operation evolution dns root server ietf internet engineering task force organisation develops standard col used internet ietf mainly cover transport network layer application layer protocol standardised ietf work ietf organised working group work performed exchanging email ietf meeting year participation open http igp interior gateway protocol synonym intradomain routing protocol igrp interior gateway routing protocol igrp proprietary intradomain routing protocol us distance vector igrp support multiple metric route replaced eigrp imap internet message access protocol deﬁned rfc imap internet message access protocol imap deﬁned rfc protocol allows client access manipulate email stored server imap email message remain server downloaded client internet public internet network composed different network running internet internet internetwork network composed different network internet popular internetwork internet used path inverse query dns server resolvers inverse query query domain corresponds given ip address ipinternet protocol generic term network layer protocol protocol suite widely used today expected replace chapter glossary saylor url http saylor foundation computer networking principle protocol practice release version internet protocol connectionless network layer protocol used internet today address encoded bit ﬁeld version internet protocol connectionless network layer protocol intended replace address encoded bit ﬁeld intermediate intermediate intradomain routing initially deﬁned iso clnp protocol extended support used isp network deﬁned isn initial sequence number tcp connection sequence number chosen client resp server placed syn resp segment establishment tcp connection iso international standardization organisation agency united nation based geneva develop standard various topic iso country representative vote approve reject dard work development iso standard expert working group additional information iso obtained http iso international standardization organisation iso standard deﬁnes code represent country subdivision http isp internet service provider network provides internet access client itu international telecommunication union united nation s agency purpose develop dard telecommunication industry initially created standardise basic telephone expanded later data network work itu mainly network specialist telecommunication industry operator vendor http information ixp internet exchange point location router belonging different domain attached local area network establish peering session exchange packet http http partial list ixps lan local area network leased line telephone line permanently available endpoint man metropolitan area network mime multipurpose internet mail extension mime deﬁned rfc set extension format email message allow use character inside mail message mime message composed different part having different format mime document mime document document encoded using mime format minicomputer minicomputer typically used serve department corresponding wikipedia article additional information http modem modem device encodes resp decodes digital information ulating resp demodulating analog signal modem frequently used transmit digital information telephone line radio link http survey various type modem ms tcp option used tcp entity syn segment indicate maximum segment size able receive multicast transmission mode information sent efﬁciently allthe receiver belong given group nameserver server implement dns protocol answer query name inside domain nat network address translator middlebox translates ip packet nbma non broadcast mode multiple access network subnetwork support multiple doe provide efﬁcient way sending broadcast frame device attached subnetwork atm subnetworks example nbma network saylor url http saylor foundation computer networking principle protocol practice release order internet protocol allow transport sequence byte sequence byte ﬁcient carry ascii character order refers encoding bit integer http nfs network file deﬁned rfc ntp network time protocol deﬁned rfc osi open system interconnection set networking standard developed isoincluding layer osi reference model ospf open shortest path intradomain routing protocol used enterprise isp network ospf deﬁned rfc andrfc packet packet unit information transfer network layer pbl learning teaching approach relies problem pop post ofﬁce protocol deﬁned rfc pop post ofﬁce protocol pop deﬁned rfc protocol allows client download email message stored server resolver server implement dns protocol resolve query resolver usually serf set client host campus client given isp sends dns query nameservers behalf client store received answer cache resolver know ip address root nameservers rip routing information protocol intradomain routing protocol based distance vector used enterprise network rip deﬁned rfc rir regional internet registry organisation manages ip address number behalf iana root nameserver server responsible root domain name hierarchy currently dozen root nameservers dns resolver http mation operation root server rtt delay transmission segment reception corresponding acknowledgement transport protocol router relay operating network layer rpc type remote procedure call deﬁned rpc mechanism deﬁned rfc used application nfs sdu service data unit service data unit unit information transferred application segment segment unit information transfer transport layer smtp simple mail transfer protocol deﬁned rfc snmp simple network management protocol management protocol deﬁned network socket api originally deﬁned berkeley unix allow programmer develop client server spoofed packet packet said spoofed sender packet used source address different address ssh secure shell ssh transport layer protocol deﬁned rfc standard query dns server resolvers standard query query aor aaaaa record query typically return ip address switch relay operating datalink layer syn cookie syn cooky technique used compute initial sequence number isn tcb transmission control block set variable maintained established tcp nection tcp implementation tcp transmission control protocol protocol transport layer protocol suite provides reliable bytestream service ip chapter glossary saylor url http saylor foundation computer networking principle protocol practice release refers tcp andipprotocols telnet telnet protocol deﬁned rfc tld domain type tlds cctld tld correspond letter country code gtld generic tlds assigned country tl transport layer security deﬁned rfc cryptographic protocol used provide nication security internet application protocol used transport service detailed description outside scope book udp user datagram protocol protocol transport layer protocol suite provides unreliable connectionless service includes mechanism detect corruption unicast transmission mode information sent source recipient vnc networked application allows remotely access computer s graphical user interface http world wide web consortium created standardise protocol mechanism used global www focused subset application layer http wan wide area network wide area networking technology using virtual circuit deployed telecom operator xwindow associated protocol deﬁned xml extensible markup language xml ﬂexible text format derived sgml originally designed electronic publishing industry used wide variety application need exchange structured data xml speciﬁcations maintained working group saylor url http saylor foundation computer networking principle protocol practice release chapter glossary saylor url http saylor foundation chapter bibliography possible bibliography includes stable hypertext link reference cited saylor url http saylor foundation computer networking principle protocol practice release chapter bibliography saylor url http saylor foundation chapter index table saylor url http saylor foundation computer networking principle protocol practice release chapter index table saylor url http saylor foundation bibliography standard committee ieee computer society ieee standard information nology telecommunication information exchange system local metropolitan area work speciﬁc requirement wireless lan medium access control mac physical layer phy speciﬁcations ieee standard committee ieee computer society ieee standard local metropolitan area network medium access control mac bridge ieee std standard committee ieee computer society ieee standard local metropolitan area virtual bridged local area network ieee ieee standard information telecommunication information exchange tan area logical link control available http standard committee ieee computer society ieee standard information technology telecommunication information exchange system local tan area network speciﬁc requirement carrier sense multiple access collision detection access method physical layer speciﬁcation ieee available http standard committee ieee computer society ieee standard information information exchange metropolitan area token ring access method physical layer speciﬁcation ieee available http augustin cuvellier orgogozo viger friedman latapy magnien eira avoiding traceroute anomaly paris traceroute internet measurement conference october http spinellis d survey content distribution nologies acm comput surv december labovitz mcpherson oberheide jahanian internet domain trafﬁc proceeding acm sigcomm conference sigcomm sigcomm acm new york ny usa arlitt williamson analysis tcp reset behaviour internet sigcomm comput commun rev saylor url http saylor foundation computer networking principle protocol practice release abramson aloha alternative computer communication proceeding november fall joint computer conference houston texas november afips fall acm new york ny information management proposal march baran baran distributed communication series http biondi ebalard routing header security cansecwest security conference april bonomi fendick ﬂow control framework available bit rate atm service ieee network v olume issue page bertsekas gallager data network second edition prentice hall bhatia manral v ohara y ospf difference discussion work progress internet draft bagnulo matthew van beijnum network address protocol translation client server internet draft work progress october beech nielsen taylor link access protocol amateur packet radio version revision july brakmo o malley peterson tcp vega new technique congestion detection avoidance proceeding conference communication architecture protocol application london united kingdom august september sigcomm acm new york ny benvenuti understanding linux network internals o reilly medium bush v think atlantic monthly july pp bush fidonet technology tool history commun acm bux network performance proceeding ieee v ol buford yu lua networking application morgan kaufmann cheswick william bellovin steven rubin aviel firewall internet security second edition repelling wily hacker calvert donahoo socket java practical guide programmer morgan man chiu jain analysis increase decrease algorithm congestion avoidance computer network computer network isdn system v ol pp cerf v kahn protocol packet network intercommunication ieee transaction nications gont security assessment transmission control protocol tcp security assessment transmission control protocol tcp internet draft work progress chi y oliveira zhang cyclops internet observatory acm sigcomm computer communication review ccr october carr sury palet martinez davidson evans yilmaz wijte y address allocation assignment policy ripe document september crane taft practical consideration ethernet local network design proc hawaii international conference system science honolulu january pp cheshire presentation ietf november cheswick evening berferd cracker lured endured studied proc winter usenix conference pp bibliography saylor url http saylor foundation computer networking principle protocol practice release clark design philosophy darpa internet protocol computer communication view august pp comer internetworking principle protocol architecture prentice hall comer internetworking design implementation internals prentice hall cohen holy war plea peace ien april http donahoo calvert socket c practical guide programmer morgan kaufman dix digital intel xerox ethernet local area network data link layer physical layer speciﬁcations sigcomm comput commun rev jul dimitropoulos krioukov fomenkov huffaker hyun y claffy riley relationship inference validation acm sigcomm computer communication review ccr dalal y printis absolute internet ethernet host number proceeding seventh symposium data communication mexico city mexico october sigcomm acm new york ny dunkels architecture proceeding ﬁrst international ence mobile application system service mobisys san francisco donnet friedman internet topology discovery survey ieee communication survey tutorial december davik yilmaz gjessing uzun ieee resilient packet ring tutorial ieee communication magazine mar v ol n dijkstra note problem connection graph numerische mathematik fddi ansi information system fiber distributed data interface fddi token ring medium access control mac ansi fletcher arithmetic checksum serial transmission communication ieee tions v ol pp francois filsﬁls evans bonaventure achieving igp convergence large ip network sigcomm comput commun rev jul floyd jacobson v synchronization periodic routing message tions networking v april fuller v lear meyer reclassifying usable unicast address space internet draft march workin progress fortz rexford thorup trafﬁc engineering traditional ip routing protocol ieee communication magazine october theodore faber joe touch wei yue state tcp effect busy server proc infocom pp feldmeier fast software implementation error detection code trans netw ga govindan alaettinoglu varadhan estrin architecture stable analyzable internet routing ieee network magazine v ol pp january grier campbell social history bitnet listserv annals history computing ieee v olume issue pp genilloud mhs ﬁrst step edi communication standard sigcomm comput commun rev apr bibliography saylor url http saylor foundation computer networking principle protocol practice release gao grifﬁn rexford inherently safe backup routing bgp proc ieee infocom april gao rexford stable internet routing global coordination transaction networking december pp grifﬁn shepherd wilfong stable path problem interdomain routing trans netw apr grifﬁn wilfong analysis bgp convergence property sigcomm comput commun rev grifﬁn wilfong analysis med oscillation problem bgp proceeding ieee international conference network protocol november icnp ieee computer society washington dc routing using diffusing computation tions networking v ol gast wireless network deﬁnitive guide o reilly gill v lack priority queuing considered harmful acm queue december goralski illustrated network work modern network morgan mann huffaker fomenkov plummer moore claffy distance metric internet presented ieee international telecommunication symposium ha rhee xu cubic new tcp variant sigops oper syst rev jul information technology telecommunication information exchange system termediate intermediate routeing information exchange protocol use conjunction protocol providing network service iso jacobson v congestion avoidance control symposium proceeding tions architecture protocol stanford california united state august v cerf ed sigcomm acm new york ny jung sit balakrishnan morris dns performance effectiveness caching trans netw kerrisk linux programming interface starch press kent mogul fragmentation considered harmful sigcomm comput commun rev karn partridge improving time estimate reliable transport protocol acm trans comput syst karn price diersing packet radio amateur service ieee journal selected area communication kaufman perlman sommerfeld do protection protocol ceedings acm conference computer communication security washington usa october cc acm new york ny kung morris ﬂow control atm network ieee network v olume issue page kleinrock tobagi packet switching radio channel sense mode characteristic ieee transaction communication v ol pp december katz ward bidirectional forwarding detection rfc june khanna zinky j revised arpanet routing metric sigcomm comput commun rev bibliography saylor url http saylor foundation computer networking principle protocol practice release kurose ross computer networking approach featuring internet licklider memorandum member afﬁliates intergalactic computer network leiner cerf v clark kahn kleinrock lynch postel robert wolff brief history internet sigcomm comput commun rev eng keong lua crowcroft pia sharma lim survey comparison peer overlay network scheme communication survey tutorial ieee v olume issue pp lfjlmt lefﬂer fabry joy lapsley miller torek advanced interprocess communication tutorial bsd programmer s supplementary documentation lamport shostak pea byzantine general problem acm trans program lang syst jul leboudec rate adaptation congestion control fairness tutorial malamud analyzing phase v van nostrand reinhold mcfadyen system network architecture overview ibm system journal v ol pp mckusick year berkeley unix freely redistributable open source v oices open source revolution oreilly http minei lucek application emerging development new technology http wiley series communication networking distributed system wiley mcquillan richer rosen overview new routing algorithm arpanet proceeding sixth symposium data communication paciﬁc grove california united state november sigcomm acm new york ny mathis semke mahdavi ott macroscopic behavior tcp congestion avoidance algorithm sigcomm comput commun rev jul molle sohraby venetsanopoulos model asynchronous csma col local area network ieee journal selected area communication v olume issue jul page s mühlbauer uhlig fu meulle maennel search appropriate ularity model routing policy proceeding conference application technology chitectures protocol computer communication kyoto japan august sigcomm acm new york ny malkin rip routing protocol addison wesley metcalfe boggs ethernet distributed local computer network communication acm mill computer network time synchronization network time protocol crc press march pp miyakawa dual stack iab technical plenary july mogul case http proceeding conference tions technology architecture protocol computer communication cambridge massachusetts united state august september oran ed sigcomm acm new york ny moore moore packet switching history http bibliography saylor url http saylor foundation computer networking principle protocol practice release moy ospf anatomy internet routing protocol addison wesley myers brief history interaction technology interaction mar nelson complex information processing ﬁle structure complex changing indeterminate proceeding national conference cleveland ohio united state august winner ed acm acm new york ny paxson v internet packet dynamic sigcomm comput commun rev perlman algorithm distributed computation spanning tree extended lan sigcomm comput commun rev perlman interconnection bridge router switch internetworking protocol edition addison wesley perlman rbridges transparent routing proc ieee infocom march pouzin cyclades network present state development trend symposium computer network pp rago unix v network programming addison wesley rochlis eichin microscope tweezer worm mit s perspective commun acm jun cerf v ascii format network interchange rfc postel user datagram protocol rfc rosen vulnerability network control protocol example rfc july postel internet protocol rfc postel internet control message protocol rfc postel transmission control protocol rfc clark window acknowledgement strategy tcp rfc july su postel domain naming convention internet user application rfc postel simple mail transfer protocol rfc crocker standard format arpa internet text message rfc plummer ethernet address resolution protocol converting network protocol address ethernet address transmission ethernet hardware rfc postel tcp maximum segment size related topic rfc lefﬂer karels trailer encapsulation rfc april hornig standard transmission ip datagrams ethernet network rfc april nagle congestion control internetworks rfc harrenstien stahl feinler dod internet host table speciﬁcation rfc postel reynolds file transfer protocol rfc partridge mail routing domain rfc stahl domain administrator guide rfc mockapteris domain name implementation speciﬁcation rfc postel reynolds standard transmission ip datagrams ieee network rfc bibliography saylor url http saylor foundation computer networking principle protocol practice release romkey nonstandard transmission ip datagrams serial line slip rfc june braden borman partridge computing internet checksum rfc braden requirement internet host communication layer rfc jacobson v compressing header serial link rfc waitzman standard transmission ip datagrams avian carrier rfc apr cerf v mill explaining role gosip rfc mogul deering path mtu discovery rfc callon use osi routing dual environment rfc kantor bsd rlogin rfc rivest algorithm rfc april jacobson v braden borman tcp extension high performance rfc callon tcp udp bigger address tuba simple proposal internet addressing routing rfc june rekhter y li architecture ip address allocation cidr rfc fuller v li yu varadhan classless routing cidr address ment aggregation strategy rfc wimer clariﬁcations extension bootstrap protocol rfc simpson protocol ppp rfc bradner mankin ip generation ipng white paper solicitation rfc piscitello use iso clnp tuba environment rfc francis pip architecture rfc risjsighani computation internet checksum incremental update rfc egevang francis ip network address translator nat rfc simpson protocol ppp rfc jul simpson ppp framing rfc july hinden simple internet protocol plus white paper rfc masinter mccahill uniform resource locator url rfc bradner mankin recommendation ip generation protocol rfc baker requirement ip version router rfc june delgrossi berger internet stream protocol version protocol speciﬁcation version rfc schulzrinne casner frederick jacobson v rtp transport protocol application rfc resnick walker mime rfc rekhter y moskowitz karrenberg groot lear address allocation private internet rfc bibliography saylor url http saylor foundation computer networking principle protocol practice release myers rose post ofﬁce protocol version rfc fielding frystyk hypertext transfer protocol rfc bellovin defending sequence number attack rfc deutsch deflate compressed data format speciﬁcation version rfc mccann deering mogul path mtu discovery ip version rfc perkins ip encapsulation ip rfc mathis mahdavi floyd romanow tcp selective acknowledgment option rfc freed borenstein multipurpose internet mail extension mime format internet message body rfc freed borenstein multipurpose internet mail extension mime medium type rfc hubbard kosters conrad karrenberg postel internet registry ip allocation guideline rfc malkin minnear ripng rfc baker atkinson authentication rfc droms dynamic host conﬁguration protocol rfc march touch tcp control block interdependence rfc april laubach halpern classical ip arp atm rfc april moy ospf version rfc april luciani katz piscitello cole doraswamy nbma hop lution protocol nhrp rfc april gross kaycee li mali stephen ppp rfc july hoffman masinter zawinski mailto url scheme rfc july malkin rip version rfc deering hinden internet protocol version speciﬁcation rfc crawford transmission packet ethernet network rfc degermark nordgren pink ip header compression rfc mamakos lidl evarts carrel simone wheeler method transmitting ppp ethernet pppoe rfc allman paxson v stevens tcp congestion control rfc april fielding gettys mogul frystyk masinter leach lee hypertext transfer protocol rfc june frank hostetler lawrence leach luotonen stewart http authentication basic digest access authentication rfc june alaettinoglu villamizar gerich kessens meyer bates karrenberg terpstra routing policy speciﬁcation language rpsl rfc june tsirtsis srisuresh network address translation protocol translation rfc connolly masinter medium type rfc june kristol montulli http state management mechanism rfc bibliography saylor url http saylor foundation computer networking principle protocol practice release paxson v allman computing tcp s retransmission timer rfc thaler hopps multipath issue unicast multicast selection rfc retana white fuller v mcpherson using preﬁxes point link rfc srisuresh egevang traditional ip network address translator traditional nat rfc rosen viswanathan callon multiprotocol label switching architecture rfc ramakrishnan floyd black addition explicit congestion notiﬁcation ecn ip rfc carpenter brim middleboxes taxonomy issue rfc senie network address translator nat application design guideline rfc stone stewart otis stream control transmission protocol sctp checksum change rfc droms bound v olz lemon perkins carney dynamic host conﬁguration protocol rfc july iana address rfc floyd inappropriate tcp reset considered harmful rfc allman floyd partridge increasing tcp s initial window rfc faltstrom hoffman costello internationalizing domain name application idna rfc march crispin internet message access protocol version rfc march hinden deering internet protocol version addressing architecture rfc april thomson huitema ksinant v souissi dns extension support ip version rfc october aboba blunk v ollbrecht carlson levkowetz extensible cation protocol eap rfc june karn bormann fairhurst grossman ludwig mahdavi montenegro touch wood advice internet subnetwork designer rfc july larzon degermark pink jonsson fairhurst lightweight user datagram protocol rfc july cheshire aboba guttman dynamic conﬁguration address rfc lau townsley goyret layer tunneling protocol version rfc march arkko kempf zill nikander secure neighbor discovery send rfc march aura cryptographically generated address cga rfc march fielding masinter uniform resource identiﬁer uri generic tax rfc january arends austein larson massey rose dns security introduction requirement rfc march bibliography saylor url http saylor foundation computer networking principle protocol practice release hinden haberman unique local unicast address rfc ylonen lonvick secure shell ssh protocol architecture rfc grifﬁn huston bgp wedgie rfc rekhter y li hare border gateway protocol rfc hinden deering ip version addressing architecture rfc kent seo security architecture internet protocol rfc kent ip authentication header rfc kent ip encapsulating security payload esp rfc kohler handley floyd datagram congestion control protocol dccp rfc march conta deering gupta internet control message protocol net protocol version speciﬁcation rfc march mcpherson gill v bgp med consideration rfc march bates chen chandra bgp route reﬂection alternative mesh internal bgp ibgp rfc april duke braden eddy blanton roadmap transmission control col tcp speciﬁcation document rfc josefsson data encoding rfc atkinson fanto cryptographic authentication rfc cerf v burleigh hooke torgerson durst scott fall weiss networking architecture rfc april narten nordmark simpson soliman neighbor discovery ip version rfc thomson narten jinmei stateless address autoconﬁguration rfc delany email authentication using public key advertised dns mainkeys rfc allman calla delany libbey fenton thomas domainkeys identiﬁed mail dkim signature rfc narten draves krishnan privacy extension stateless address tion rfc montenegro kushalnagar hui culler transmission packet ieee network rfc klensin ko y overview framework internationalized email rfc july touch defending tcp spooﬁng attack rfc july simeborski melnikov smtp service extension authentication rfc july heffner mathis chandler reassembly error high data rate rfc july aoun davy reason network address translator protocol translator historic status rfc july eddy tcp syn flooding attack common mitigation rfc chen sangli avoid bgp best path transition external rfc bibliography saylor url http saylor foundation computer networking principle protocol practice release traina mcpherson scudder autonomous confederation bgp rfc hutzler crocker resnick allman finch email submission tions access accountability requirement rfc varada haskins allen ip version ppp rfc abley savola deprecation type routing header rfc cheshire address conﬂict detection rfc july crocker overell augmented bnf syntax speciﬁcations abnf rfc klensin simple mail transfer protocol rfc resnick internet message format rfc coltun ferguson moy lindem ospf rfc july crocker internet mail architecture rfc july phillips davis tag identifying language rfc allman paxson v blanton tcp congestion control rfc cotton vegoda special use address rfc january sandlund pelletier jonsson robust header compression rohc work rfc march duerst masinter zawinski mailto uri scheme rfc october baker li bao yin framework translation rfc april barth http state management mechanism rfc april gont security assessment internet protocol version rfc july rhodes goerzen foundation python network programming comprehensive guide building network application python second edition academic press ramakrishnan jain binary feedback scheme congestion avoidance computer network connectionless network layer sigcomm comput commun rev ramakrishnan henry yang ethernet capture effect analysis solution ings ieee conference local computer network mn robert aloha packet slot capture sigcomm comput commun rev apr ross overview fddi ﬁber distributed data interface ieee selected area vol pp russell rough consensus running code standard war ieee annals history computing sidhu andrew oppenheimer inside appletalk subramanian agarwal rexford katz r characterizing internet hierarchy multiple vantage point ieee infocom sechrest sechrest introductory interprocess communication tutorial programmer s supplementary documentation scheiﬂer gettys x window complete reference xlib x protocol icccm xlfd x version release digital press bibliography saylor url http saylor foundation computer networking principle protocol practice release stone greenwald partridge hughes performance checksum crc s real data trans netw shoch hupp measured performance ethernet local network commun acm senapathi hernandez introduction tcp ofﬂoad engine march stoica morris karger kaashoek balakrishnan chord scalable lookup service internet application proceeding conference application nologies architecture protocol computer communication sigcomm acm new york ny usa semke mahdavi mathis automatic tcp buffer tuning sigcomm comput mun rev stigge plotz muller redlich reversing crc theory practice berlin humboldt university berlin pp sridharan tan bansal thaler compound tcp new tcp congestion control long distance network internet draft work progress april seifert edward switch book complete guide lan switching nology wiley selinger selinger collision demo http stevens fenner rudoff unix network programming socket networking api addison wesley sklower improving efﬁciency osi checksum calculation sigcomm comput commun rev semke mahdavi mathis automatic tcp buffer tuning sigcomm comput commun rev stevens illustrated protocol stevens unix network programming v olume second edition networking apis socket xti prentice hall stewart routing internet stoll stalking wily hacker commun acm tsuchiya eng extending ip internet address reuse sigcomm comput commun rev thomborson v standard modem ieee micro vol pp unicode unicode consortium unicode standard version deﬁned unicode standard version boston ma vasseur pickavet demeester network recovery protection restoration cal ip mpls morgan kaufmann publisher varghese network algorithmics interdisciplinary approach designing fast worked device morgan kaufmann vyncke paggen lan switch security hacker know switch cisco press waserman baker network address translation internet draft ber http wilson michaelson huston redesignation future use private use internet draft september work progress http white mc pherson srihari practical bgp bibliography saylor url http saylor foundation computer networking principle protocol practice release watson mechanism reliable transport protocol connection management computer network williams painless guide crc error detection algorithm august unpublished manuscript http winston netbios speciﬁcation wing yourtchenko happy eyeball success host internet draft work progress july http recommendation open system interconnection model notation recommendation information technology open system interconnection protocol providing transport service xns xerox xerox network system architecture zimmermann osi reference model iso model architecture open system interconnection ieee transaction communication vol april pp bibliography saylor url http saylor foundation computer networking principle protocol practice release bibliography saylor url http saylor foundation index symbol frame format data frame token frame abrupt connection release additive increase multiplicative decrease aimd address address learning address resolution protocol adhoc network aimd alg aloha alternating bit protocol anycast api application layer application level gateway arp arp cache arpanet ascii atm b encoding basic service set bs frame bgp bgp bgp bgp decision process bgp keepalive bgp bgp nexthop bgp notification bgp open bgp peer bgp rib bgp update binary exponential bit stufﬁng bnf border gateway protocol bridge broadcast bs c carrier sense multiple access carrier sense multiple access collision ance carrier sense multiple access collision tion character stufﬁng checksum computation cidr class address class b address class c address classless interdomain routing clear send cold potato routing collision collision detection collision domain conﬁrmed connectionless service congestion collapse connection establishment saylor url http saylor foundation computer networking principle protocol practice release service connectionless service connectionless service count inﬁnity csma csma csma persistent ct ct frame cumulative acknowledgement peering relationship d datagram datalink layer delayed acknowledgement denial service dhcp line difs distance vector distributed coordination function inter frame space dns dns message format dynamic host conﬁguration protocol e eap ebgp egp eifs eigrp electrical cable email message format ending delimiter token ring ethernet bridge ethernet dix frame format ethernet hub ethernet switch ethernet type ﬁeld ethertype exponential backoff export policy extended inter frame space extensible authentication protocol f fairness fast ethernet fdm ﬁrewall layer reference model frame frequency division multiplexing ftp g getaddrinfo graceful connection release h hello message hidden station problem forwarding hot potato routing html http hub iana ibgp icann icmp ietf igp igrp imap import policy independent network infrastructure network interdomain routing policy internet internet internet control message protocol inverse query ip option ip preﬁx ip subnet fragmentation reassembly fragmentation isn iso itu ixp j jamming jumbogram index saylor url http saylor foundation computer networking principle protocol practice release l label lan large window leased line link local address link local address routing llc logical link control llc loopback interface m mac address learning mac address table ethernet switch man attack manchester encoding fairness maximum segment lifetime msl maximum segment lifetime msl maximum segment size maximum transmission unit maximum transmission unit mtu data transfer middlebox mime mime document minicomputer modem monitor station monomode optical ﬁber ms mtu discriminator med multicast multihomed host multihomed network multimode optical ﬁber n nagle algorithm nameserver nat nbma neighbour discovery protocol network address translation network information center network layer order nfs network csma ntp o open shortest path ﬁber ordering sdus organisation unique identiﬁer osi osi reference model ospf ospf area ospf designated router oui p packet packet radio packet size distribution path mtu discovery pbl persistence timer persistent csma physical layer piggybacking ping protocol pop post ofﬁce protocol ppp private address provider aggregatable address provider independent address provision byte stream service r reference model reliable connectionless service request send resolver rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc index saylor url http saylor foundation computer networking principle protocol practice release rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc index saylor url http saylor foundation computer networking principle protocol practice release rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rip rir robustness principle root nameserver router routing information protocol rpc rts rts frame s sdu sdu service data unit segment selective acknowledgement repeat sendto sequence number serial line ip service access point service data unit service primitive service set identity ssid peering relationship short inter frame spacing sibling peering relationship sif slac slot time ethernet slotted aloha slottime smtp snmp socket source routing speed light split horizon split horizon poison reverse spoofed packet ssh ssid standard query starting delimiter token ring stateless address conﬁguration data transfer stub domain stufﬁng bit stufﬁng character subnet mask switch syn cookie syn cooky t tcb tcp tcp connection establishment tcp connection release tcp fast retransmit tcp header tcp initial sequence number tcp ms tcp option tcp rst index saylor url http saylor foundation computer networking principle protocol practice release tcp sack tcp selective acknowledgement tcp self clocking tcp syn tcp reference model telnet isp time division multiplexing time live ip diagram tld tl token holding time token ring data frame token ring monitor token ring token frame traceroute transit domain transmission control block transport clock transport layer connectivity u udp udp checksum udp segment unicast unique local unicast unreliable connectionless service v virtual circuit virtual lan vlan vnc w wan wavelength division multiplexing wdm wifi x xml index saylor url http saylor foundation