introduction computer graphic version august david eck hobart william smith college pdf version free book available t http pdf doe include sample program doe external link ﬁle s shown blue pdf internal link shown red link used acrobat reader pdf reader david eck david eck eck department mathematics computer science hobart william smith college geneva ny rcialpurposes modiﬁed version distributed cial purpose provided distributed license o riginal speciﬁcally work licensed creative commo n license view copy thi s license visit http o ther us require permission author web site book http sbookcontents preface viii introduction painting drawing element graphic hardware software graphic pixel coordinate color pixel coordinate coordinate system aspect ratio color model shape basic shape stroke polygon curve path transforms viewing modeling translation rotation combining transformation scaling shear matrix vector hierarchical modeling building complex object scene graph transform stack java shape stroke transforms buﬀeredimage pixel html canvas graphic graphic context icontents ii shape stroke transforms auxiliary canvas pixel manipulation image svg scene description language svg document structure shape style transforms polygon path hierarchical model animation opengl geometry shape color opengl opengl primitive opengl color glcolor glvertex array depth test coordinate transforms coordinate basic transforms hierarchical modeling projection viewing coordinate system viewport transformation projection transformation modelview transformation camera abstraction polygonal mesh gldrawarrays indexed face set gldrawarrays gldrawelements data buﬀers java display list vbos linear algebra vector vector math matrix transformation homogeneous coordinate using glut jogl using glut using jogl opengl light material introduction lighting light material light property normal vector iii opengl lighting equation light material opengl working material deﬁning normal vector working light global lighting property image texture texture coordinate mipmaps filtering texture target texture parameter texture transformation loading texture memory texture color buﬀer texture object loading texture c using texture jogl light camera action attribute stack moving camera moving light scene graph api basic javascript module scene renderer camera object geometry material light modeling example building object polygonal mesh ifss curve surface texture transforms loading model feature instanced mesh user input shadow cubemap texture skybox reﬂection refraction introduction webgl programmable pipeline webgl graphic context shader program data flow pipeline value uniform variable iv value attribute drawing primitive webgl vertex array object webgl instanced drawing example webgl context option bit glsl rgb triangle webgl shape stamper point primitive webgl error handling glsl basic type data structure qualiﬁers expression function deﬁnitions control structure limit image texture texture unit texture object working image way make texture cubemap texture computational example texture webgl implementing transforms transforms glsl transforms javascript graphic webgl transformation shader script introducing glmatrix transforming coordinate transforming normal rotation mouse lighting material minimal lighting specular reﬂection phong shading adding complexity lighting moving light spotlight light attenuation diskworld texture v texture transforms glmatrix generated texture coordinate procedural texture bumpmaps environment mapping framebuﬀers framebuﬀer operation render texture renderbuﬀers dynamic cubemap texture webgl extension anisotropic filtering color instanced drawing webgl deferred shading multiple draw buﬀers webgl basic graphic ray tracing ray casting recursive ray tracing limitation ray tracing path tracing bsdf s path tracing algorithm introduction webgpu webgpu basic adapter device canvas shader module render pipeline buﬀers drawing multiple vertex input auto bind group layout instance index instanced drawing indexed drawing drawing multiple primitive using index shaders multisampling wgsl address space alignment data type declaration annotation expression function statement control function deﬁnitions vi graphic webgpu depth test coordinate system diskworld texture texture coordinate texture sampler mipmaps cubemap texture texture format compute shaders workgroups dispatch compute shaders simulation retrieving output detail lost device error handling limit feature render pas option render pipeline option programming language java programming language basic language structure object data structure window event c programming language language basic pointer array data structure javascript programming language core language array object javascript web page interacting page promise async function async function await using promise directly b blender blender basic view adding object scene edit mode light material texture vii saving work feature blender modeling text curve proportional editing extruding mesh mesh modiﬁers blender animation keyframe animation tracking path animation rendering animation light material lighting eevee versus cycle shader editor c gimp inkscape gimp painting program painting tool selection path layer inkscape drawing program d listing sample program e glossary textbook represents attempt develop ﬁrst course computer graphic typically taken computer scien ce student fourth year college long continue appropriate open question given change ﬁeld computer graphic ha ve tried make book suitable reader book substantial experience wit h programming language including knowledge pro gramming data structure taking computer graphic course semester programming additional experience student studied java programming language book accessible people wi th background language example book use javascript java possib le programming javascript knowledge c important cer tain section book essential feature programming language c overed appendix need learn programming beginning try free introdu ctory java textbook available http versi typo added material used fall ver sion course version used fall added material webgl glsl e updated javascript code use updated chapter use release library retired teaching decided work ve rsion summer added new chapter webgpu moved release webgpu us javascript promise added new section appendix cover promise async function soon remove version library ad ded short section javascript module start chapter modiﬁed example use module modular material chapter changed typo small error ﬁxed th roughout book thanks reader danny hurlburt ﬁxing home web site book http page address contains link downloading copy web site downloading pdf version book freetextbook welcome redistribute long d o charge post unmodiﬁed copy web site make distribute modiﬁed version including translation long version make original source clear distributed free charge lic ense oﬃcially book licensed creative common attribu tion sample program book actually web pag e meant viewed viiipreface ix web browser web version book includes intera ctive demo program integrated web page make book sample program demo use html canvas graphic chapter webgpu chapter webgl chapter canvas graphic s webgl work modern browser webgpu new technology s problematic july available default web browser ch rome edge window macos work hardware browser enabled experimental feature webgpu ve ry likely future graphic web important start learning sample program demo download web site version book available main page web s ite look folder namedsourceanddemo note web browser willing use certain source local ﬁle model modular java cript script browser error try run sample local ly instead web issue aﬀects example example y ou use version book solution run web server computer view textbook web server possible ﬁgure web browser use resource local ﬁles good ide browse web conﬁguration taught computer graphic couple year p eriod year ﬁeld developed make major change y time taught course time able structure course pr imarily opengl graphic api common use extended period o pengl implement fundamental graphic normal vector coordinate transformation lighting way transparent fairly easy u se newer graphic apis ﬂexible powerful steeper l earning curve believe introductory computer science course beneﬁts star ting simpler framework library opengl serf purpose opengl widely supported various reason part easy use oﬃcially dropped latest version lthough practice supported desktop computer furthermore opengl largely superceded newer graphic apis metal vulkan web gl based opengl continue widely supported time webgpu inspired newer apis point replace webgl new application approach book use subset opengl f ramework introducing fundamental concept graphic cover webgl version opengl run web browser chapt er introduce webgpu opengl make major foundation course real emphasis fundamental concept geometric modeling transformation h ierarchical modeling scene graph color lighting texture animation tinue believe opengl make good introduction material chapter short overview computer graphic introduces concept covered rest book chapter cover graphic java javascript s vg emphasis idea transformation scene graph carry dimension chapter andchapter cover openggl opengl fairly primitive bypreface x today sstandard itincludesmanybasicfeaturesthatares computer graphic api covered chapter graphic api web gra phics using javascript chapter show fundamental conce pt used interface chapter andchapter cover webgl modern version opengl graphic web webgl requires programmer write shader program implement feature built opengl look ing implementation opportunity understand deeply computer actual ly make image chapter look brieﬂy advanced technique po ssible opengl andchapter introduction webgpu newest api graphic t web appendix containsbriefintroductionstothreeprogramminglanguag esthatareusedinthe book java c javascript appendix b meant reader started basic us blender sophisticated modeling program introducing student blender good way help develop nsional intuition appendix c contains briefer introduction graphic prog ram gimp inkscape older version available http http http http downloads version available pdf web site version book built set o f common source source obtained cloning following git reposit ory github http source originally meant publication ar e provided guarantee limited support people interested wo rking source include image html ﬁles java c source code xml ﬁles xslt transformation bash shell script latex macro usi ng source requires additional software latex java bash shell mor e information readme ﬁle david eck professor emeritus department mathematics computer science hobart william smith college pulteney street geneva new york usa email eck www http august introduction term computer graphic refers involved creation manipulation image computer including animated im age broad ﬁeld change advance come dizzyin g pace diﬃcult beginner know start core fundamental idea foundation application computer grap hics book attempt cover foundational idea ﬁ t course possible cover entire ﬁeld ﬁ rst large good place start thisshortchapterprovidesanoverviewandintroductionto thematerialthatwillbecovered rest book going lot painting drawing main focus book graphic w ork go producing model scene ultimately lmost case end result computer graphic project image course direct production manipulation image important topic right furthermore lot idea carry dimension make se nse start graphic animagethatispresentedonthecomputerscreenismadeupof pixel thescreenconsists rectangular grid pixel arranged row column pixel small easy individually fact h display essentially invisible given time pixel ca n color screen day use color color speciﬁed t hree number giving level red green blue color color shown screen combination primary color othe r format possible grayscale pixel shade gray pixel color g iven number speciﬁes level gray scale ty pically shade gray used early computer screen used indexed color small set color usually displayed indexed color display numbered list possible color color pixel speciﬁed integer giving po sition color list case color value pixel screen stored large block memory known frame buﬀer changing image screen requires changing color value stored frame buﬀer screen redra wn time second immediately color value changed n frame buﬀer color introduction pixel screen changed match disp layed image change computer screen used way basic model raster graphic term raster technically refers mechanism used older v acuum tube computer monitor electron beam row pixel making t hem glow beam moved screen powerful magnet deﬂec t path electron stronger beam brighter glow pixel b rightness pixel controlled modulating intensity electron beam color value stored frame buﬀer used determine intensity elect ron beam color screen pixel red dot green dot blue dot separately illuminated beam modern computer monitor raster sa sense moving electron beam mechanism control color s pixel diﬀerent diﬀerent type screen screen pi xels color value pixel stored frame buﬀer idea ima ge consisting grid pixel numerical color value pixel deﬁnes raster gr aphics image computer screen represented usin g pixel specifying individual pixel color best way create image ano ther way specify basic geometric object contains shape line ci rcles triangle rectangle idea deﬁnes vector graphic represent image list geometric shape contains make thing interesting shape s attribute thickness line color ﬁlls rectangle c ourse image composed simple geometric shape approach certa inly wouldn t work picture beautiful sunset photographic ima ge work type image architectural blueprint s cientiﬁc illustration infact earlyinthehistoryofcomputing vectorgraphicsw asevenuseddirectlyoncomputer screen ﬁrst graphical computer display dev eloped raster display slow expensive practical fortunately poss ible use vacuum tube technology way electron beam directly dr aw line screen simply sweeping beam line vector graphic displ ay store display list line appear screen point screen glow brieﬂy illuminated electron beam gra phics display display list continually redrawing li ne list change image necessary change content displ ay list course display list long image start ﬂicker line chance visibly fade turn redrawn point image speciﬁed rea sonably small number geometric shape information needed repre sent image smaller using vector representation using raster represent ation consider image thousand line segment vector representation o f image need store coordinate thousand point endpoint line kilobyte memory store image frame buﬀer fo r raster display require memory similarly vector display draw line screen quickly raster display copy image frame buﬀer screen soon raster display fast inexpensive th ey quickly displaced vector display ability display type image reaso nably introduction divide raster graphic vector graphic pers ists area computer graphic example seen division tw o category program used create image painting program anddrawing program painting program image represented grid pixel user creates image assigning color pixel using drawing tool act like painter s brush tool draw geometric shape line ctangles point painting program color individual pixel pixel color saved make clearer suppose use painting program draw house draw tree house erase tree ll o nly reveal blank background house fact image really contained house t individually colored pixel viewer perceive making picture o f house drawing program user creates image adding geom etric shape image isrepresentedasalistofthoseshapes ifyouplaceahouses hape orcollectionofshapesmaking house image place tree shape o f house house stored list shape mage contains delete tree house image just dded tree furthermore able select shape image change size drawing program oﬀer rich set editing operation po ssible painting program reverse true practical program image creation editing com bine element painting drawing usually dominant e xample drawing program allow user include image treating shape painting program let user create layer separate image s layered create ﬁnal image layer manip ulated like shape drawing program house y tree separate layer image house tree graphic program adobe photoshop andadobe illustrator category painting program illustrator drawing program world free software gnu progra m gimp good alternative photoshop whileinkscape reasonably capable free drawing program short introdu ctions gimp inkscape appendix c divide raster vector graphic appears n ﬁeld graphic ﬁle format way represent image data sto red ﬁle original image recovered bit stored ﬁle presentation follow exact known speciﬁcation speciﬁcation called g raphics ﬁle format popular graphic ﬁle format include gif png jpeg webp svg m ost image used web gif png jpeg browser support svg image newer webp format gif png jpeg webp basically raster graphic forma t image speciﬁed storing color value pixel gif older ﬁle mat largely superseded png ﬁnd gif image web gif format support animated image gifs used simple animation s web page gif us indexed color model maximum color png use e ither indexed color jpeg meant color image data necessary represent raster image b e quite large data usually contains lot redundancy data ca n compressed reduce itschapter introduction size gif png use lossless data compression mean original image recovered perfectly compressed data jpeg e alossy data compression algorithm mean image recovered jpeg ﬁle exactly original image information lost t sound like good idea fact diﬀerence noticeable using lossy compression usually permit greater reduction size compressed dat jpeg generally work photographic image image sha rp edge diﬀerent color especially bad line drawing image contai n text png preferred format image webp use lossless lossy compres sion svg hand fundamentally vector graphic fo rmat svg image include raster image svg actually lan guage describing dimensional vector graphic image svg stand scal able vector graphic term scalable indicates advantage vector gr aphics loss quality size image increased line poi nt represented scale perfect geometric line try greatly increase size raster image hand ﬁnd don t h ave color value pixel new image pixel original mage expanded cover rectangle pixel scaled image mult block uniform color scalable nature svg image make good choice web b rowsers graphical element computer s desktop deskt op environment using svg image desktop icon digital image matter format speciﬁed using acoordinate coordinate set correspondence number geometric point dimension point assigned pair number called coordinate point coordinate point called name x y arbitrary raster image grid pixel arranged nto row column natural coordinate pixel c orresponds pair integer giving number row number column c ontain pixel simple case disagreement th e row numbered vector image natural use coordina te coordinate image arbitrary degree image c speciﬁed using diﬀerent coordinate system want say lot coordinat e system major focus large book mportant graphic dimension element graphic turn graphic ﬁnd common approach common vector graphic raster graphic content image speciﬁed list geometric object technique ref erred geometric modeling starting point construct artiﬁcial world collection simple geometric shape arranged space object c attribute combined global property world determine appearan ce object range basic shape limited including poin t line segment triangle achapter introduction complex shape polygon sphere built pproximated collection basic shape considered basi make image scene scene projected dimension wn dimension projection equivalent taking photograph scene let s l ook work little geometry start space course space exists conceptually s useful think t real able visualize mind space need coordinate associ ate point space number usually referred x y andzcoordinates point coordinate referred world want build scene inside world geometric object example specify line segment scene giving coordi nates endpoint specify triangle giving coordinate vertex smallest building block work line segmen t triangle called geometric primitive diﬀerent graphic system make diﬀerent set primitive s available case basic shape line tria ngles considered primitive complex scene contain large number primitive diﬃcult create scene giving explicit coordinate ind ividual primitive solution programmer immediately guess chunk toge ther primitive reusable component example scene contains utomobiles create geometric model wheel automobile modeled fo ur wheel model component use cop y automobile model scene note geometric model designed used component complex model referred hierarchical modeling suppose constructed model wheel geom etric primitive wheel moved position model automobil e coordinate primitive adjusted exactly g ained building wheel point coordinate wheel adjusted way place wheel automobile just specify single djustment applied wheel type adjustment used ed ageometric transform geometric transformation geometric transform used t o adjust size orientation position geometric object making model auto mobile build onewheel apply diﬀerent transforms wheel model dd copy wheel automobile similarly add automobile s scene applying diﬀerent transforms automobile model basic kind geometric transform called scaling rotation translation scaling transform used set size object make bigger smaller speciﬁed factor rotation transf orm used set object s orientation rotating angle speciﬁc axis translation transform used set position object displacing g iven original position book meet transformation ﬁ rst dimension easier understand graphic come truly essential appearance geometric shape interesting yo u able set appearance assign ing attribute geometric object obvious attribute color getting realis tic appearance turn lot complicated simply specifying color pri mitive graphic instead ofchapter introduction color usually talk material term material refers property determine intrinsic visual appearance surface es entially mean surface interacts light hit surface material proper tie include basic color property shininess roughness trans parency useful kind material property texture general term texture way varying material property surface common use texture allow diﬀerent color diﬀeren t point using image texture image applied surf ace image look like painted surface texture lso refer changing value thing like transparency texture allow add scene using huge number geometric primitive instead ca n use smaller number textured primitive material intrinsic property object actu al appearance object depends environment object viewed real world don t unless light environment t true graphic add simulated lighting scene source light scene light source color intensity nd direction position light source interact material prop erties object scene support lighting graphic range fair ly simple complex computationally intensive finally image general ultimate goal graphic produce image world transformation invol vesviewing andprojection world look diﬀerent seen diﬀerent point vi ew set point view need specify position viewer directio n viewer looking necessary specify direction direction t hat pointing upwards ﬁnal image thought placing virtual camer scene view set world seen point view p rojected projection analogous taking picture camera ﬁnal step graphic assign color individual pixel image process called rasterization process producing image referred rendering scene case ultimate goal create single image create animation consisting sequence image world diﬀe rent time animation small change image sequence lmost aspect scene change animation including coordinate pr imitives transformation material property view example object t o grow course animation gradually increasing scale factor scal ing transformation applied object changing view animation giv e eﬀect moving ﬂying scene course diﬃcult compute necessary change technique help computation important use physic engine computes motion interaction objec t based law physic won t learn physic engine book chapter introduction hardware software using opengl primary basis graphic programming origin al congraphics whichwasknown graphic expensive comput er designed intensive graphical application today graphic computing pow er smart phone opengl supported graphic hardware modern computi ng device including desktop computer laptop mobile device form w ebgl used graphic web section bit ground history opengl graphic hardware support ﬁrst desktop computer content screen wer e managed directly cpu example draw line segment screen cpu run loop set color pixel lie line needless say graphic lot cpu s time graphic performance slow compare d expect today changed computer faster general urse big change modern computer graphic processing specia lized component called gpu graphic processing unit gpu includes processor d oing graphic computation fact include large number processor wo rk parallel greatly speed graphical operation includes dedicated mory storing thing like image list coordinate gpu processor fast acce s data stored gpu faster access data stored mputer s main memory draw line perform graphical operation cpu simply send command necessary data gpu responsible actually carrying command cpu oﬄoads graph ical work gpu optimized carry work quickly se t command gpu understands make api gpu opengl example graphic api gpus support opengl sense understan d opengl command opengl command eﬃciently translated command gpu understand opengl graphic api fact proce s replaced modern alternative including vulkan open api s ame group responsible opengl proprietary apis used apple mic rosoft metal web new api called webgpu developm ent time implemented web browser newer api s complex designed speed eﬃciency ea metal vulkan covered textbook webgpu introd uced inchapter book use opengl provides easier troduction graphic webgl major api graphic web browser said opengl api fact series ap subject repeated extension revision current d ﬁnal version ﬁrst released diﬀerent ver sion furthermore specialized version called opengl e embedde d system mobile phone tablet webgl use web browser basically port opengl e useful know wh y opengl changed know opengl designed cl server responsible controlling computer s display performing graphicschapter introduction computation carry command issued client ty pically server gpu including graphic processor memory server ex ecutes opengl command client cpu computer appl ication program running opengl command come program runni ng cpu actually possible run opengl program remotely network execute application program remote computer ope ngl client graphic computation display computer ar e actually using opengl server key idea client server separate com ponents communication channel component opengl mmands data need communicated client cpu se rver gpu channel capacity channel limiting factor graphic performance think drawing image screen gpu draw ima ge microsecond takesmillisecondstosendthedatafortheimagefromthecpu tothegpu thenthegreatspeed gpu time take draw image communication time reason driving factor evolution o f opengl desire limit communication needed t cpu gpu approach store information gpu s memory data going used time transmitted gpu stored memo ry immediately accessible gpu approach tr y decrease number opengl command transmitted gpu draw g iven image opengl draw primitive triangle specifying pri mitive mean specifying coordinate attribute vertex o riginal opengl separate command used specify coordinate vertex nd command needed time value attribute changed draw single trian gle require command drawing complex object thousand tr iangles thousand command opengl possibl e draw object single command instead thousand data ob ject loaded array sent single step gpu unfortuna tely object going drawn data retrans mitted time object drawn ﬁxed opengl vertex buﬀer object vbo block memory gpu store coordinate attribu te value set vertex make possible reuse data having ret ransmit cpu gpu time used similarly opengl introduced texture object make possible store image gpu use texture mean texture image going reused time loaded gpu tha t gpu easily switch image having reload new capability added opengl api grew size growth outpaced invention new sophisticated techni ques doing graphic new technique added opengl problem matter feature add demand new featur complaint new feature making thing complicated opengl w giant machine new piece tacked pleasing ev eryone real solution make machine programmable opengl possible write programschapter introduction executed graphical computation gpu program run gpu gpu speed programmer want use new graphic t echnique write program implement feature just hand gpu t opengl api doesn t changed thing api support ability send program gpu execution program called shaders term doesn t really actually ﬁrst shaders introduced vertex shaders andfragment shaders primitive drawn work ver tex primitive applying geometric transform vertex coordin ate using attribute global lighting environment compute color ver tex vertex shader program job doing computa tions similarly work pixel inside primitive fragment sha der job performing computation fragment shad er called pixel shaders idea programmable graphic hardware success successful opengl usual processi ng deprecated meaning use discouraged opengl removed fr om opengl standard present optional extension pra ctice original feature opengl supported desktop version opengl probably continue available future embedded howeve r opengl e later use shaders mandatory large opengl api completely removed webgl version opengl use web browser based opengl e requires shaders neve rtheless begin study opengl version concept d etails version relevant oﬀers easier entry point someon e new graphic programming opengl shaders written glsl opengl shading language like opengl glsl gone version spend ti later course studying glsl e version used webgl opengl e glsl us syntax similar c programming language ﬁnal remark gpu hardware note comput ations diﬀerent vertex pretty independent po tentially parallel true computation diﬀerent fragment f act gpus hundred thousand processor operate parallel admit tedly individual processor powerful cpu typical d computation complicated large number processor d large parallelism possible graphic computation make impres sive graphic performance fairly inexpensive graphic chapter begin study computer graphic looking dimensional case thing simpler lot easier visu alize idea covered chapter relevant chapter begin section examine graphi c general way tying particular programming language graphic ap coding example section written pseudocode make sense programming background reading book section s quick look graphic particular language java javascript html canvas graphic svg language use general idea earlier chapter pixel coordinate color create image point image assigned color point identiﬁed pair numerical coordinate color speciﬁed numerically assignment number point o r color somewhat arbitrary need spend time studying coordinate system associate number point color model associate number color pixel coordinate digital image row column pixel pixe l image speciﬁed saying column row contains term coordinate pixel identiﬁed pair integer giving column numbe r row number example pixel coordinate lie colum n number row number conventionally column numbered left right st arting zero graphic system including one study chapter nu mber row starting zero including opengl number row instead graphic pixel grid shown row column number left row numbered right numberd note particular pixel identiﬁed pair o f coordinate x y depends choice coordinate need know coo rdinate use know point talking row column number identify pixel point pixel c ontains point mathematically contains inﬁnite number point th e goal computer graphic really color create manipulate image ideal sense image deﬁned specifying color point jus t pixel pixel approximation imagine true ideal imag e want display image display coloring pixel approximat ion implication suppose example want draw line segment ma thematical line thickness invisible really want draw t hick line segment speciﬁed width let s say line pixel wi problem unless line horizontal vertical t actually draw th e line coloring pixel diagonal geometric line cover pixel partially n ot possible make pixel black white try draw line blac k white pixel result jagged staircase eﬀect eﬀect examp le called aliasing seen outline character drawn screen diagonal curved boundary region diﬀerent color term aliasing likely come fact ideal image naturally described coordinate try represent image using pixel ordinate map integer pixel coordinate considered diﬀ erent name alias pixel antialiasing term technique designed mitigate eﬀe ct aliasing theideaisthatwhenapixelisonlypartiallycoveredbyasha pe thecolorofthepixelshouldbe mixture color shape color backgro und drawing black line white background color partially covered pixel gray shade gray depending fraction pixel covered line practice calculating area exactly pixel diﬃcult approximate method used example geometric line shown left alo ng approximation line coloring pixel line greatly magniﬁed individual pixel line right drawn using antialiasing wh ile middle chapter graphic note antialiasing doe perfect image c reduce jaggies caused aliasing viewed normal scal e issue involved mapping coor dinates pixel example point pixel correspond c oordinates center pixel corner pixel general th ink number referring corner pixel way thinking bout say integer coordinate refer line pixel t o pixel doesn t determine exactly pixel aﬀected wh en geometric shape drawn example line drawn using html canvas graphic shown greatly magniﬁed line speciﬁed colored black line width line drawn point point canvas graphic integer coordinate correspond line pixel line drawn extends pixel inﬁnitely thi n geometric line line line drawn lie half row pixel half row graphic us antialiasing rendered line color ing row pixel gray line drawn point case line lie exactly line pixel get colored black t gray pixel end line fact line extends halfway pixel endpoint graphic system render lin e diﬀerently interactive demo let experiment pixel antialiasing interactive demo web page s version book downloaded web site ﬁnd demo folder named demo note interactive demo accompany th book click question mark icon upper left information abo ut use demo graphic complicated fact pixel aren t used pixel today smaller resolution display device m easured term number pixel inch display quantity referred pp pixel inch dpi dot inch early screen tended resolution s close ppi resolution typical viewing distance indiv idual pixel clearly visible like display pixel nch high resolution display today pixel inch high est resolution individual pixel longer distinguished fact pixel come range size problem f use coordinate system based pixel image created assuming pixel inch look tiny ppi display line look good ppi ppi line probably fact graphic system pixel doesn t really fer size physical pixel instead just unit measure s et appropriate desktop pixel usually o ne inch smart phone usually viewed closer distance value closer inch furthermore meaning pixel unit asure change example user applies magniﬁcation web page pixel cause problem completely solved fortunately problem vector graphic use book vector graphic pixel issue rasterization step n vector image converted pixel display vector image creat ed using convenient coordinate represents idealized nt image rasterized image approximation ideal image approxim ation left display hardware coordinate system doing graphic given rectangle want draw graphic primitive primitive speciﬁed using coordinate rectangle possible select coordinate appropriat e application example rectangle represents ﬂoor plan foot foot ro om want use coordinate unit measure foot d coordinate range horizontal direction vertical di rection unit measure case foot pixel foot corresp ond pixel image coordinate pixel general real number integer fact s better forget pixel just think point t image point pair coordinate given real number specify coordinate rectangle just hav e specify horizontal coordinate left right edge rectangle vertical coordinate let s value left right andbottom thought xmin xmax ymin andymax reason assume example topi thanbottom want coordinate vertical coor dinate increase instead case topwill correspond maximum instead minimum value allow programmer specify coordinate t hey like use good subroutine aschapter graphic setcoordinatesystem left right graphic responsible automatic ally transforming coordinate speciﬁed coordinate pixel coordinate subroutine available s useful transformation ne hand let s consider general case given coordinate point coordinate want ﬁnd coordinate point second coordinate remember t hat coordinate just way assigning number point s point real suppose horizontal vertical limit oldleft oldright oldtop andoldbottom ﬁrst coordinate newleft newright newtop andnewbottom second suppose point coordinate oldx oldy ﬁrst coordinate want ﬁnd coordinate s newx newy point second coordinate oldleft oldright oldtop oldbottom oldx oldy newleft newright newtop newbottom newx newy formula newxandnewyare given newx newleft oldx oldleft oldright oldleft newright newle ft newy newtop oldy oldtop oldbottom oldtop newbottom newto p logic oldxis located certain fraction distance oldleftto oldright fraction given oldx oldleft oldright oldleft formula newxjust say newxshould lie fraction distance newleft tonewright check formula testing work whe noldxis equal oldleftor tooldright oldyis equal oldbottom tooldtop example suppose want transform mber coordinate limit left right andbottominto pixel coordinate range left right case newleft andnewtopare zero formula simply newx oldx left right left newy oldy course give newxandnewyas real number rounded truncated integer value need integer coordinate s pixel reverse pixel coordinate real numbe r useful example image displayed computer screen y ou want react mouse click image probably mouse coordinate t erms integer pixel coordinate want transform pixel coordinate y chosen coordinate practice won t usually transfo rmations graphic apis provide higher level way specify trans form talk insection graphic aspect ratio theaspect ratio rectangle ratio width height exam ple aspect ratio mean rectangle twice wide tal l aspect ratio mean width time height aspect ratio s written form width height use term refer fraction square aspect ratio equal rectangle aspect ratio height ha s width equal coordinate aspect ratio horizont al vertical limit coordinate left right andtop aspect ratio absolute value right left coordinate used rectangle spect ratio viewed rectangle unit horizontal direction ha ve apparent length unit vertical direction aspect ratio don t match distortion example shape deﬁned equation circle true aspect ratio x y coordinate match aspect ratio drawing area suppose x y coordinate range draw circle radius center drawing area square circle look like circle circle distorted ellipse problem occurs aspect ratio coordinate doe match aspect ratio drawing area bad thing use diﬀerent unit length t vertical horizontal direction suppose want use coordinat e limit left right andtop want preserve aspect ratio ca e depending shape display rectangle adjust v alues leftandrightor ofbottomandtopto make aspect ratio match chapter graphic good idea preser ve aspect ratio matching aspect ratio coordinate aspect ratio drawing area extending range x y value horizontally vertically look deeply geometric transforms later t chapter time ll program code setting coordinate system color model talking basic foundation computer g raphics coordinate system color color actually s urprisingly complex topic look part topic relevant c omputer graphic application color computer screen produced combination red green blue light diﬀerent color produced varying intensity eac h type light color speciﬁed number giving intensity red green blue color intensity speciﬁed number range zero minimum inte nsity maximum intensity method specifying color called rgb color model rgb stand example rgb color model number triple represents color obtained setting red intensi ty green blue set half intensity red green blue value color ar e called color component color rgb color model light wave variety wavelength pure color light wavelength general color contain mathematically inﬁnite number represen t color combining just red green blue light fact t quite youmighthaveheardthatcombinationsofthethreebasic primary colorsaresuﬃcient represent color human eye kind s color sensor detect red green blue light approximatio eye doe contain kind color sensor sensor called cone cone cell respond exclusively red green blue light kind cone c ell responds varying degree wavelength light wide range given mix wavelen gths stimulate type cell certain degree intensity stimulation determines color diﬀerent mixture wavelength stimulates type o f cone cell extent perceived color perceived color fa ct speciﬁed number giving intensity stimulation type e cell possible produce possible pattern stimulation combinin g just basic color matterchapter graphic color chosen just fact way o ur eye actually work diﬀerent basic color produce reasona bly large fraction set perceivable color color t world computer screen discussion applies t o people actually kind cone cell color blindness missin g kind cone cell surprisingly common range color produced device mputer screen called thecolor gamut device diﬀerent computer screen diﬀerent color gamut rgb value produce somewhat diﬀerent color diﬀerent screen color gamut color printer noticeably probabl y color gamut screen explains printed image probably doe n t look exactly did screen printer way make color diﬀeren tly way screen doe screen combine light make color printer com bine ink dye diﬀerence color meant printer express ed using diﬀerent set basic color common color model printer color cmyk using col or cyan magenta yellow black case common color model computer graphic s rgb rgb color represented using bit color component tal bit represent color representation called number represent diﬀerent value positive int egers color speciﬁed triple integer r g b range representation work shade red gr een blue eye distinguish application image processed computing color component common use additional bit color com ponent avoid visual eﬀects occur rounding error computation application use integer ﬂoating point value c olor component hand fewer bit used example common color scheme us bit red blue component bit green component total bit color green get extra bit eye sensit ive green light red blue color save memory compared c olor common memory expensive color model rgb rgb sometim e criticized unintuitive example s obvious people th yellow combination red green closely related color model hsvandhsldescribe set color rgb attempt intuitive way h v called hsb b standing hsv hsb exact ly model h model stand hue basic spectral col h increase color change red yellow green cyan blue magenta red value h taken range color s thought arranged circle red degree s hsv hsl stand saturation taken range saturation give shade gray shade depending t value v l saturation give pure color decreasing saturation li ke adding gray color v stand value l stand determine bright dark color main diﬀerence hsv model pure spectral color occur hsl occur let s look color hsv color model illustra tion show color withchapter graphic range s v equal note t hat bright pure color give paler saturated colo r give darker color s s probably easier understand color model looking t actual color represented interactive demo let experiment rgb hsv color model demo fourth component added color model fourt h component called alpha color model use referred name rg ba hsla alpha color usually used represent transparency color maximal alpha value fully opaque transparent color wi th alpha equal zero completely transparent invisible intermediate value translucent partly transparent color transparency determines happens draw color foreground color color background color foreground color fully opaque simply replaces background color foreground c olor partly transparent blended background color assuming alph component range color computed newcolor alpha foreground color alpha background color computation separately red blue gr een color component calledalpha blending eﬀect like viewing background colored gl as color glass add tint background color ty pe blending possible use alpha component common rgba color model bit component us total bit represent color convenient number integer value represented using value integer value interpreted rgba colo color component arranged integer somewhat arbitrary common layout store alpha component bit followed d green blue probably called argb color layout lso use shape talking graphic concept like pixel coordinate b ut fortunately don t usually work lowest level graphic system let work shape triangle circle s individual pixel andchapter graphic lot hard work coordinate using transfor m working coordinate directly section l ook capability typically provided graphic api basic shape graphic api certain basic shape drawn command complex shape require multiple command exactly qualiﬁes basic shape varies api webgl api f example basic shape point line triangle subsection consider line rectangle oval basic line really mean line segment straight line segment connecting given point plane simple line segment w ithout antialiasing basic shape drawn coloring pixel lie inﬁnitely geometric line segment algorithm drawing line decide exac tly pixel color ﬁrst computer graphic algorithm bresenham s algorithm line drawing implement eﬃcient procedure doing won t discus lo detail s worth looking want start learning graph ic hardware actually low level case line typically comp licated antialiasing complication line width wide line actua lly drawn rectangle line attribute property aﬀect t heir appearance question happen end wide line appearance mi ght improved adding rounded cap end line square e xtending line half line make sense question w hen line meet larger shape line joined graphi c system support line pattern dash dot illustration show som e possibility left wide line cap round cap s quare cap geometric line segment shown dotted line style called right line diﬀerent pattern dot dash middl e diﬀerent style line join mitered rounded beveled basic rectangular shape side vertical h orizontal tilted rectangle generally applying rotation rectum ngle speciﬁed point endpoint o f diagonal rectangle alternatively width height given w ith single base point x y case width height positive rec tangle base point x y upper left corner rectangle y incre as lower left corner rectangle y increase b ottom graphic height width suppose given point th want draw rectangle determine suppose awing command available requires point x y width ight command x smaller width computed absolute value minus similarly y height pseudocode drawrectangle point x min y min width ab height ab drawrectangle x y width height common variation rectangle allow rounded corner round rect corner replaced elliptical arc degree round ing speciﬁed giving horizontal radius vertical radius ellipse example round rects shape right radius ellipse shown ﬁnal basic shape oval oval called elli pse oval closed curve radius basic oval assume radius vertical horizontal oval property speciﬁed giving rectang le just contains speciﬁed giving center point length v ertical radius horizontal radius illustration oval left shown wi th containing rectangle center point radius r oval right circle circle just oval whi ch radius length oval available basic shape approx imated drawing large number line segment number line needed fo r good approximation depends size oval s useful know supp ose oval center point x y horizontal radius vertical radius m athematically point oval given x co angle y sin angle chapter graphic whereangletakes value angle measured degree πif measured radian sinandcosare standard sine cosine function approximation oval use formula ge nerate number point connect point line segment pseudoc ode assuming angle measured radian pirepresents mathematical constant π draw oval center x y horizontal radius verti cal radius numberoflines x co y sin x co y sin draw line circle course just ﬁrst time used sine cosine function won t fun ctions play important role computer graphic association circle s circular motion rotation meet talk transforms section demo stroke way make shape visible drawing strokeit closed shape rectangle oval ﬁllit stroking line like dragging pen line stroking rectangle oval like dragging pen long boundary filling shape mean coloring point contained inside shape s possible stroke ﬁll shape case interior shape outline shape diﬀerent appearance shape intersects like shape ill ustration s entirely clear count interior shape fact diﬀerent rule ﬁlling shape based cal led thewinding number winding number shape point roughly t imes shape wind point positive direction unterclockwise winding number negative winding opposite direction illustration shape left traced direction shown winding nu mber region shown number inside region graphic shape shown ﬁlled using ﬁll rule th e shape center ﬁll rule color region winding number shape shown right rule color region winding number odd region winding number ﬁlled question shape ﬁlled course ﬁlled color type ﬁll possible including pattern andgradients pattern image usually small image used ﬁll shape p attern repeated horizontally vertically necessary cover entir e shape gradient similar way color vary point point instead taking color image computed lot variation basic dea line segment color varies color speciﬁed t endpoint line segment possibly additional point point th e color interpolated color extrapolated point line cont ains line segment lying outside line segment repeatin g pattern line segment simply extending color nearest endpoint f alinear gradient color constant line perpendicular basic line segm ent line solid color going direction radial gradient color constant circle centered endpoint line segment doesn t exh aust possibility idea pattern gradient look like shape ﬁlled gradient pattern ﬁrst shape ﬁlled simple linear gradient deﬁned b y just color second shape us radial gradient pattern gradient necessarily restricted ﬁl ling shape stroking shape ﬁlling band pixel bounda ry shape gradient pattern instead solid colo finally mention string text considere d shape purpose drawing boundary shape outline c haracters text drawn ﬁlling shape graphic system po sible stroke outline shape deﬁnes text following illustration t string graphic shown ﬁlled pattern ﬁlled gradie nt stroked solid black chapter graphic polygon curve path impossible graphic api include possible shape basic shape usually way create complex shape example consider polygon polygon closed shape consisting sequence line segment e ach line segment joined endpoint line segment connects ﬁrst endpoint called vertex polygon polygon deﬁne d listing vertex aregular polygon side length angle s ides equal square equilateral triangle example gular polygon convex polygon property point inside polygon entire line segment point inside polygon intuitively convex polygon indentation boundary concavity property shape just polygon olygons n olygons polygon required simple meaning th polygon intersection vertex diﬀerent intersect endpoint polygon usually required b e planar meaning vertex lie plane course graphic lie plane issue doe issue draw polygon capability like graphic api drawing possibility com mands stroking ﬁlling polygon vertex polygon given ar ray point array plus array fact example java graphic api includes command ﬂex ible approach introduce idea java svg html canvas api sup port idea path general shape include line segment curve d segment segment don t connected segment endpoi nt path created givingchapter graphic series command tell essentially pen b e moved draw path path created point represents p en s current location command moving pen drawing command drawing various kind segment drawing polygon need command start new path x y pen point x y adding segment t path drawing x y add line segment path start current pen l ocation end point x y pen x y add line segment current pen location s tarting point unless pen producing closed pa th forclosepath need deﬁne starting path sub path subpath consists series connected segment movetoalways start new subpath aclosepath end current segment implicitly start new starting point mean position pen recent movetoorclosepath suppose want path represents triangle vertex command createpath moveto lineto lineto closepath theclosepath command end replaced lineto pen ﬁrst vertex path represents abstract geometric object creating e doe make visible screen path make visible need addi tional command stroking ﬁlling path earlier section saw approximate oval d rawing eﬀect polygon large number side example drew separate line segment really bunch separate line polygo way ﬁll thing better approximate oval poly gonal path oval center x y radius createpath moveto x y angle lineto x co angle y sin angle closepath using path draw ﬁlled oval stroke just want draw outline polygon s better create poly gon path draw line segment separate side path compute r know side single shape make possible control appearan ce join consecutive side noted earlier section graphic noted path contain kind segment b esides line example possible include arc circle segment type curve bezier curve bezier curve used create general curved shap e fairly intuitive used program allow user design curve interactively mathematically bezier curve deﬁned parametric pol ynomial equation don t need understand mean use k inds bezier curve common use cubic bezier curve quadratic bezier curve deﬁned cubic quadratic polynomial respectively general term bezier curve used usually refers cubic bezier curve cubic bezier curve segment deﬁned endpoint segment twocontrol point understand work s best think pen draw curve segment pen start ﬁrst endpoint h eaded direction ﬁrst control point distance control point th e endpoint control speed pen start drawing curve second control poi nt control direction speed pen get second endpoint curve unique cubic curve satisﬁes condition illustration show cubic bezier curve segme nt curve segment right connected endpoint form longer curve curve drawn black line endpoint shown black dot trol point blue square red line connecting control point correspo nding endpoint ordinarily curve drawn interface let user edit curve hand note endpoint curve segment tangent l ine connects endpoint control point note sharp point corner curve segment meet segment merge smoothly int o control point properly chosen easier understand expe rience interactive demo let edit cubic bezier curve segment dragging e ndpoints control point demo cubic bezier curve segment added path path s current pen location act ﬁrst endpoint segment command adding th e segment path specify control point second endpoint typ ical command look like cubiccurveto x y add curve current location point x y using control point pen leaf current loc ation heading end point x y arriving direct ion quadratic bezier curve segment similar cubic ver sion quadratic case control point segment curve lea f ﬁrst endpoint heading direction control point arrives se cond endpoint coming direction control point curve case arc graphic easier understand e xperience try interactive demo transforms insection discussed coordinate system possible transform coordinate coordinate s ection ll look idea little closely look geometric transfor mations used place graphic object coordinate viewing modeling typical application rectangle pixel natural pixel coordinate image displayed rectangle ed theviewport set geometric object deﬁned possibly diﬀer ent coordinate generally us coordinate integer object make scene world want view coordinate e deﬁne scene called world coordinate graphic world lie plane s possible t o picture entire inﬁnite plane need pick rectangular area pl ane display image let s rectangular area window view window coordinate transform used map window window viewportt illustration trepresents coordinate transformation ti function take world coordinate x y window map pixel coordinate t x y viewport ve drawn viewport window diﬀerent size em phasize thing object fac t don t exist space doesn t really make sense compare s izes example check t x y look rectangle corner window rectangle displayed viewport displayed rectangle w ith corner t t example t t use coordinate transformation way ows choose world coordinate natural describing scene t hat want display itchapter graphic easier work directly viewport coord inates line suppose want deﬁne complex object suppos e copy object scene maybe making imation like object diﬀerent position diﬀerent frame wou ld like choose convenient coordinate use deﬁne object ll coordinate use deﬁne object called object coordinate object want place object scene need transform object coord inates used deﬁne objectintotheworldcoordinatesystemthatweareusingfor thescene thetransformationthat need called modeling transformation picture illustrates object deﬁned object coordinate mapped diﬀ erent modeling transformation world coordinate remember order view scene anothe r transformation map object view window world coordinate viewp ort mind choice view window tell p art scene shown image moving resizing rotating window w ill diﬀerent view scene suppose make image car happened making image illustrat ion making image left fact possibility eithe r car moved right view window deﬁnes scene moved left important sure understand try cell phone camera aim object step left notice happens object came ra s viewﬁnder movechapter graphic right picture similarly happens betwee n picture middle picture car rotated counterclockwise window rotated clockwise try want actua l photo compare finally change picture t o right happen car got smalleror window got larger camera bigger window mean seeing larger ﬁeld view applying zoom camera backing away obj ect viewing important general idea modify vi ew window change coordinate applied viewport fact leaving coordinate place moving object scene instead eﬀect ﬁnal image apply oppo site transformation object example moving window leftis equivalent moving object right essential distinction transformi ng window transforming object mathematically specify geometric primit ive giving coordinate natural coordinate computer applies seque nce transformation coordinate produce end coordinate used actually draw primitive image think transformation modeling transforms coordinate transforms computer s s ame version section includes live demo help understand equivalence mode ling transformation viewport transformation read help text demo information demo return idea time later book bu t case geometric transforms central concept computer grap hics let s look basic type transformation transforms use graphic written form x b y e c x d y f x y represents coordinate point transf ormation applied transformed coordinate transform deﬁned b y constant b c d e andf note written function t t x y x b y e c x d y f transformation form called aﬃne transform aﬃne transform property applied parallel line t ransformed line parallel follow aﬃne transform aﬃne transf orm result aﬃne transform translation translation transform simply move point certai n horizontally certain vertically x y original point transformed point formula translation x e y f whereeis number unit point moved horizontall y andfis moved vertically translation general formula aﬃne transform graphic typ ically function aschapter graphic translate e f apply translate transformation translation apply drawn afterthe command given subsequent drawing ope ration ewould added fwould added let s look example suppose draw f using coordinate f centered say translate beforedrawing f point f moved horizontally unit vertically unit c oordinates actually used translation f centered light gray f picture show drawn wi thout translation dark red f show f drawn applying translation arrow show upper left corner f moved unit s unit point f subjected displacement note example assuming increase point remember command translate e f translation applies allthe drawing just shape draw apply transformation translation second transfor m replace translation combined translation subsequent drawing aﬀected combined transformation example combine translate translate result single translation translate important point lot say later remember don t compute coordinate transforma tions just specify original coordinate object th e object coordinate specify transform transforms applied compu ter take care applying transformation coordinate don t need kn ow equation used transformation just need understand d oes geometrically rotation rotation transform purpose rotates po int origin point rotated angle called angle r otation purpose angle measured degree radian graph ic apis java javascript look later chapter use radian ope ngl svg use degree rotation positive angle rotates object direct ion positive positive counterclockwise coordina te point doe example clockwise usual pixel coordinate point obvious rotation anglechapter graphic ofrradians origin applied point x y resulting point given co r x sin r y sin r x co r y general formula aﬃne transform co r r sin r picture illustrates rotation ori gin angle negative degree light gray f original shape dark r ed f shape result apply rotation arrow show upper left c orner original f moved graphic api typically command rotate r apply rotation command used beforedrawing object rotation applies combining transformation position happen combine transformation suppose drawing object say translate rotate assume angle measured degree translation apply subsequent drawing rotation command thing th draw translation arerotated object translation applies toobjects ha vealready rotated example shown left illustration whe light gray f original shape red f show result applying transf orms original original f ﬁrst rotated degree angle moved unit graphic rotate translate translate rotate note transforms applied object reverse order given code ﬁrst transform code applied object aﬀected second transform note orde r transforms applied important reverse order transforms applied example saying rotate translate result shown right illustrat ion picture original f ﬁrst moved unit right resulting shape s rotated angle degree origin shape actually appears screen example applying transformation s uppose want rotate shape angle rabout point p q instead point ﬁrst moving point p q origin using translate standard rotation origin calling rotate r finally origin point p q applying translate p q keeping mind write code transformation reverse order need say translate p q rotate r translate drawing shape fact graphic apis let accomplish transform single command rotate r p q apply rotation angle rabout point p q scaling scaling transform used make object bigger smal ler mathematically scaling transform simply multiplies given ount given point x y scaled factor ain x direction factor din y direction resulting point given x d y apply transform shape centered o rigin stretch shape factor ahorizontally dvertically example original light gray f scaled factor horizontally vertical ly ﬁnal dark red f chapter graphic common case horizontal vertical scaling fa ctors called uniform scaling uniform scaling stretch shrink shape disto rting scaling applied shape centered addition stretched shrunk shape moved away tow ards fact true description scaling operation push po int away pull point want scale point t han use sequence transforms similar case ro tation graphic api provide function scale d applying scaling transformation usual transform applies xandycoordinates subsequent drawing operation note negative scaling factor allowed resu lt reﬂecting shape possibly stretching shrinking example scale reﬂect object vertically fact aﬃne transform created combin ing translation rotation origin scaling origin won t try prove interactive demo let experiment tran slations rotation scaling transformation combining demo note transform translation d rotation scaling preserve length angle object pplied preserve aspect ratio rectangle transforms property cal led euclidean allow uniform scaling resulting transformation preserve angle s aspect ratio length shear look type basic transform shearing transform shear fact built rotation scaling necess ary really obvious shear tilt object horizontal shear tilt thing left negative shear right positive shear vertical sh ear tilt example horizontal shear chapter graphic horizontal shear doe hori zontal line moved left right proportional long line horizontal shear applied point x y resulting point given x b y y constant shearing factor similarly vertical shear shearing factor ci given equation x c x y shear occasionally called skew skew usually spe ciﬁed angle shear factor transformation applied object t displayed image transformation map rectan gular view window contains scene rectangular grid pixel whe image displayed ll assume view window rotated side parallel case transform ation expressed term translation scaling transforms let s look typic al case viewport pixel coordinate ranging left widthon right heightat assume limit view window left right andtop case transformation programmed scale width height translate transforms applied poin transforms applied point reverse order speciﬁe d program ﬁrst transforms speciﬁed program h ow work consider point x y view window point come object scene modeling transforms applied object p roduce point x y point ready ﬁnal transformation viewport coordinate coordinate x y ﬁrst translated coordinate multiplied scaling factor shown giving ﬁnal coordina te width height chapter graphic note point left mapped point right mapped width height just want question aspect ratio noted subsection want force aspect ratio window match aspect ratio viewport necessary adjust limit window pseudocode su broutine assuming corner viewport pixel c oordinates subroutine applywindowtoviewporttransformation left right horizontal limit view window vertical limit view window width height width height viewport preserveaspect window forced match viewport aspect preserveaspect adjust limit match aspect ratio drawing rea displayaspect ab height width windowaspect ab displayaspect windowaspect expand viewport vertically excess displayaspect windowaspect expand viewport horizontally excess right right left left scale width height translate matrix vector transforms used computer graphic repr esented matrix point operate represented vector rec matrix point view computer scientist array o f number vectoris dimensional array matrix vector studied ﬁ eld mathematics called linear algebra linear algebra fundamental computer graphic fac t matrix vector math built gpus won t need know great deal li near algebra textbook basic idea essential vector need list numbe r written x y x y z x y z w matrix n row m column called matrix need matrix n row column numb er row equal number column ifaandbare matrix multiplied product matrix ifais matrix vi vector length n vcan multiplied byato vector function take vtoavis transformation transforms given vector size n vector s ize transformation form called linear transformation graphic suppose aandbare matrix vi vector length form diﬀerent product bv ab central fact operation eﬀect multiply vbyband multiply result multiply matrix aandbto matrix product aband multiply vby ab result rotation scaling turn linear transforma tions operation rotating x y angle dabout origin multiplying x y matrix let s matrix rd similarly scaling factor ain horizontal direction andbin vertical direction given matrix sa b want apply scaling followed rotation point x y compute eitherrd sa bv rdsa b suppose want apply opera tions scale rotate thousand point typically transforming ob jects computer graphic point compute product matrix rdsa bonce apply combined transform point single multiplicati mean program say rotate d scale b draw complex object computer doesn t track separate opera tions combine operation single matrix just keep track pply say transformation object computer just combine ma trix using matrix algebra multiple transformation handled eﬃciently si ngle transformation really nice gaping problem translation linear transformation bring translation framework th look little strange ﬁrst instead representing point pair number x y represent triple number x add coordinate turn represent rotation scaling aﬃne space multiplication matrix matrix need row containing multiplying x matrix give new vector ignore extra coordinate consider t ransformation x y record matrix translation ta b scaling sa b rotation rd d co d co d sin d compare multiplication matrix form ulas given translation scaling rotation doing graphic programming won t need multiplication important idea y ou away discussion sequence transformation comb ined single transformation computer need track single matrix whic h current matrix current implement transfo rm command translate b orrotate d computer simply multiplies current matrix th e matrix represents graphic hierarchical modeling section look complex scene built simple shape th e key hierarchical structure complex object simpler object turn simpler object u ntil bottom simple geometric primitive drawn directly thi s called hierarchical modeling transforms studied previ ous section play important role hierarchical modeling hierarchical structure key dealing complexit y area computer science rest reality surprise play important role computer graphic building complex object major motivation introducing new coordinate s possible use coordinate natural scene th want draw extend idea individual object scene drawi ng object use coordinate natural object usually want object natural coordinate ce ntered origin use origin convenient reference point th en place scene use scaling transform followed rotation followe d translation set size orientation position scene recall transfo rmations used way called modeling transformation transforms applie d order scale rotate translate scaling rotation leave refe rence point ﬁxed object scaled rotated s easy use transla tion reference point desired point scene course particular case need operation remember code transformation s speciﬁed opposite order order applied object d transformation speciﬁed drawing object code trans lation come ﬁrst followed rotation scaling modeling transforms ar e composed order common usage modeling transformation used place objec t scene aﬀect object scene limit application just object save current transformation starting work object restore diﬀers graphic api l et s suppose subroutine savetransform andrestoretransform performing task savetransform make copy modeling transformation curre ntly eﬀect store copy doe change current transformati merely save copy later whenrestoretransform called retrieve copy replace curr ent modeling transform retrieved transform typical code dr awing object form savetransform translate dx dy object position rotate r set orientation object scale sx sy set size object draw object using natural coordinate graphic restoretransform note don t know don t need know saved tr ansform doe simply identity transform transform doesn t modify coordinate applied transform place coordinate transform aﬀects scene th e modeling transform object eﬀectively applied addition transf orm speciﬁed previously modeling transform move object natural coo rdinates proper place scene coordinate transform applied scene carry object let s extend idea suppose object wa nt draw complex entity number smaller object think exa mple potted ﬂower pot stem leaf bloom like able d raw smaller component object natural coordinate system just d o main object example like specify bloom coordinate wh ich center bloom easy draw small component objec t bloom coordinate use modeling transformation mov e position main object composing complex object natural coord inate complete scene apply modeling transformation complex object actual scene t complex object carried overall transformation appl y consists modeling transformation place th e complex object followed transformation place complex object scen fact build object smaller objec t turn smaller object level example coul d draw bloom s petal coordinate system apply modeling transfor mations place petal natural coordinate bloom anoth er transformation move bloom position stem transformat ion place entire potted ﬂower scene hierarchical modeling let s look little example suppose want draw s imple image cart wheel cart used complex scene example low body cart drawn pair rectangle wheel suppose written subroutine drawwheel draw wheel subroutine draw wheel natural coordinate coordinate wheel centered ha s radius cart s coordinate convenient use midpoint base large rectangle reference point assume positive direction graphic point upward common convention mathematic rectangular body cart width height coordinate lower l eft corner rectangle draw command ﬁllrectangle cart smaller red rectangle drawn similar way complete cart need add wheel object make size wheel ﬁ t cart need scaled place correct position relative bo dy cart wheel translated left wheel right coded example play number right size positi ons wheel wheel looked better moved bit u sing usual technique hierarchical modeling save current transform befor e drawing wheel restore drawing wheel restricts eﬀect mo deling transformation wheel wheel doe aﬀect cart pseudocode subroutine draw cart coordinate sys tem subroutine drawcart savetransform save current transform translate center wheel scale scale reduce radius drawwheel draw wheel restoretransform restore saved transform savetransform save translate center second wheel scale scale reduce radius drawwheel draw second wheel restoretransform restore transform setdrawingcolor red use red color draw rectangle s fillrectangle draw body cart fillrectangle draw cart s important note subroutine used dra w wheel reason wheel appear picture diﬀerent position tha t diﬀerent modeling transformation eﬀect subroutine call subroutine use ad d cart scene apply modeling transformation c art add cart scene wanted calling drawcart subroutine time diﬀerent modeling transformation notice analogy building complex sce ne object similar building complex program subroutine c as work piece problem separately compose solution big pr oblem solution smaller problem solved problem reuse th solution place demo us cart animated scene s frame demo chapter graphic demo probably guess hierarchical modeling used d raw windmill example drawwindmill method draw windmill coordinate windmill scene produced applying diﬀerent modeling transform standard windmill furthermore windm ill complex object constructed using various mode ling transformation easy diﬀerent part scene ca n animated fact animation just aspect modeling computer ani mation consists sequence frame frame separate image small change frame point view frame separate scene t o drawn separately object appear frame animate object simply apply diﬀerent modelingtransformationtotheobjectineachframe thepar ametersusedinthetransformation computed current time frame number make cart left right example apply modeling transfo rmation translate framenumber cart framenumber frame number frame cart unit farther right previous frame fact t actual program translation applied cart translate framenumber move reference point cart horizontal axis frame coordinate used scene t range put cart outside scene loop really neat thing type animation work wit h hierarchical modeling example drawwindmill method doesn t just draw draw animated windmill turning vane just mean rotat ion applied vane depends frame number modeling transformation appli ed windmill rotating vane scaled moved object thi s example hierarchical modeling vane windmill rot ation vane ofchapter graphic modeling transformation place vane w indmill object modeling transformation applied windmill object t o place scene contains complete source code java version example section book cover graphic programming java familiar look s ource code especially paintcomponent method draw entire scene example ing scene graph api implemented javascript scene graph logically component complex scene form structur structure object thatitcontains ifthesce neishierarchical thenthestructureis hierarchical structure known scene graph scene graph structure root representing entire scene child root representing object scene visualize scene gra ph sample scene sun wheel ground circlefilled circlelinefilled square vanewindmillcart drawing single object connection s parent object connection represents occurrence object t parent object example ﬁlled square object occurs cart n windmill used twice cart windmill cart contains red r ectangles created square scaling pole windmill scaled square ﬁlled circle used sun used twice wheel line used time sun time wheel ve drawn arrow m arked representchapter graphic connection wheel turn used twice cart diagram leaf lack space occurrence ﬁlled square scene used make road line middle road arrow picture associated modeling tr ansformation place parent object object contai n copy arrow connecting object diﬀerent associated modeling transformation object copy th e transformation diﬀers scene graph exists conceptually appli cation exists implicitly example java version program mention ed draw image procedurally calling subroutine n o data structure represent scene graph instead scene graph implicit sequ ence subroutine call draw scene node graph subroutine eac h arrow subroutine various object drawn using diﬀerent modeling transformation discussed subsection computer keep track current transformation represents transforms applied object obje ct drawn subroutine program save current transformation calling th e subroutine subroutine return saved transformation restored inside s ubroutine object drawn coordinate possibly calling subrouti ne draw modeling transformation extra transformation s eﬀect outside subroutine transform eﬀect s ubroutine called restored subroutine return possible scene graph represented ac tual data structure program approach graphical obj ect scene represented program object way build iented scene graph api simple example implemented java look program draw animated scene previous ex ample represents scene data structure pr ocedurally scene graph api implemented javascript live demo look source code read html canvas graphic section example program java javascript node scene graph represented object belonging class named scenegraphnode abstract class actual node scene graph deﬁne d subclass class example subclass named compoundobject represent complex graphical object variable obj type compoundobject includes method subobj adding compound object implementing scene graph data structure object decision handle transforms option ow transformation associated node scene graph case decided use special node represent transforms object type transformedobject atransformedobject ascenegraphnode contains link scenegraphnode contains modeling transformation applied object modeling transformation given term scaling rotation translation amou nt instance variable object worth noting applied n order scale rotate translate matter order instance variable set code want translation followed rotation need transformedobjects implement translation plus rotation transformedobject applied order worth noting set ter method scaling rotation chapter graphic translation return value equal objec make possible chain call method single statement say thing like new transformedobject windmill ttranslation type chaining make compact code el iminate need lot extra temporary variable decision handle color possibility make acoloredobject class similar transformedobject case just added asetcolor method main screengraphnode class color set compound object inherited unless diﬀerent lor set word color compound object act default color color overridden addition compound object transformed object need scene graph node represent basic graphical object occupy botto m level scene graph node actual drawing end familiar data structure note t hat scene graph actually example directed acyclic graph proces s drawing scene involves traversal dag term acyclic mean c t cycle graph scene graph obvious requirement object directly indirectly transform stack suppose write subroutine draw object b eginning subroutine use routine savetransform save copy current transform end subroutine restoretransform reset current transform value saved order work correctly hi erarchical graphic routine actually use stackof transforms recall stack simply list ite m added pushed end list removed popped end problem drawing complex object subrou tine subroutine mean drawing subroutine active time saved transform transform saved tra nsform saved need remember transforms restoretransform called recently saved transform restored stack exactly structure needed implement operation start drawing object push current transfor m stack drawing object pop transform stack betwe en operation object hierarchical transforms pushed popped stack needed graphic apis come transform stack deﬁne example original opengl api includes function glpushmatrix andglpopmatrix using stack transformation matrix built opengl java api doe include stack transforms doe method g etting setting current transform set method used expl icit stack data structure tochapter graphic implement necessary operation turn html canvas api graphic ll includes function named save andrestore actually pushandpop operation stack function essential impl ementing hierarchical graphic html canvas let s try bring considering app lie simple object complex scene ﬁlled circle fro nt wheel cart example scene rearranged scene graph tha t scene ve added label modeling transformation applied o bject wheelfilled circle cart scale scale translate scale translate dx rotate r rotation wheel translation cart shown variable diﬀerent diﬀerent frame animation computer start drawing scene modeling transform e ﬀect identity transform transform prepares draw cart t save copy current transform identity pushing stack n modiﬁes current transform multiplying modeling transforms cart scale translate come drawing wheel push curren t transform modeling transform cart stack modiﬁ e current transform wheel s modeling transforms account similarly w hen come ﬁlled circle save modeling transform wheel applies modeling transform circle ﬁnally circle actually drawn scene transformed combined transform transform place circle directly t scene composed transform place circle wheel place wheel cart place cart scene dr awing circle computer replaces current transform pop stac modeling transform wheel transform used part wheel drawn wheel transf orm cart popped cart original transform identi ty popped computer go object scene start pro cess identity transform starting point sound complicated emphasize computer doe responsibility simply desi gn individual object natural coordinate specify t modeling transformation applied object construct scene similar way computer taking account layer hierarchical structure deal component structure time s power hierarchical design s t help deal graphic java rest chapter look speciﬁc implementation onal graphic new idea g eneral concept covered used real graphic system section focus java programming languag java remains popular programming language standard desktop v ersion includes sophisticated graphic api topic reading section know basic java programming don t sho uld able follow discussion graphic api section inappendix basic introduction java graphic api discussed swing ap graphical user interface programming included standard distrib ution java java program written using alternative api called javafx whic h standard distribution javafx discussed textbook graphic api fact quite similar api html canvas graphic discus ed insection original version java smaller graphic api tightly focused pixel used integer coordinate api sub routine stroking ﬁlling variety basic shape including line rectangle oval s polygon java us termdrawinstead stroke speciﬁcation meaning drawing operation precise pixel level integer coordinate deﬁned t o refer line pixel example pixel grid shown line pixel numbered pixel command ﬁllrect ﬁlls rectangle upper left corner width height shown left command drawrect conceptually drag pen outline rectangle pen square upper left corner pen move outl ine pen move right edge rectangle pixel rightof edge colored pen move edge pixel edge col ored result shown right point belabor detail point having precise speciﬁcation meaning graphical operatio n give ﬁne control happens pixel level java s original graphic did support thing like umber coordinate transforms antialiasing gradient just year java ﬁ rst introduced new graphic api added doe support advan ced api look graphic java language api deﬁned la rge set class actual drawing operation original graphic api contained class named graphic inthenewerswingapi drawingoperationsaremethodsinac lassnamed subclass graphic original drawing operation avail able class java contained collection class known graphic example package named class deﬁne shape transforms package named graphic need place draw java drawing s urface object class jpanel represents rectangular area screen jpanelclass method named paintcomponent draw content create drawing surface create subclass jpaneland provide deﬁnition paintcomponent method drawing inside paintcomponent necessary change content drawing panel s repaint method trigger paintcomponent thepaintcomponent method parameter type graphic parameter passed method actually object type obtain access advanced graphic capability deﬁnition thepaintcomponent method usually look like protected void paintcomponent graphic g g parameter draw using rest section assume variable type discus thing ﬁrst exa mple note support antialiasing turned default enabled graphic context intimidating command antialiasing antialias simple example graphic complete java program y ou look sample program provide minimal framework drawing static animated image respectively using program similar framework working mouse key eventsinagraphicsprogram youcanusetheseprogramsasth ebasisforsomeexperimentation want explore java graphic shape drawingwiththeoriginal graphic classisdoneusingintegercoordinates withthemeasureme nt given pixel work standard coordinate s ystem appropriate coordinate used unit measure coordinate equal pixel need able specify shape usi ng real number java provides support shape deﬁned using real number coordi nates example class package represents line segment endpoint ar e given pair real graphic java real number type doubleandﬂoat thedoubletype represent larger range number ﬂoat greater number signiﬁcant digit doubleis commonly used type fact doublesare simply easier use java ﬂoat value generally accuracy graphic applica tions advantage taking space memory furthermore computer gra phics hardware us ﬂoat value internally given consideration package actually provides version shape using coordinate type ﬂoatand using coordinate type double strange way taking example class abstract class subclass represe nt line using ﬂoatcoordinates using doublecoordinates strangest subclass ar e deﬁned nested class inside mean declare variable type create object need use new line new note using constant type ﬂoatin java add f suﬃx value reason double easier java simplicity want stick using slightly better performance let s look class abstract class concrete subclass point dimension speciﬁed real number coordinate point shape t ﬁll stroke point constructed real number new ifpis variable type use toretrieveitscoordinates andyoucanuse x y x y tosetitscoordinates pdisavariableoftype youcanalsoreferdirectlytothe coordinate similarly class oﬀer similar variety way manipulate propertie s won t try list variety class represent geometric shape s including abstract class contains pair subclass shape rectangle interior ﬁlled shape outline stroked shape line purely mensional stroked aside line rectangle probably simplest shap e corner point x y awidth height constructed data new x y w h corner point x y speciﬁes minimum rectangle usual pixel coordinate sys tem x y upper left corner coordinate minimum value yi x y lower left corner side rectangle ar e parallel coordinate ax variable rof public instance variable width height equal zero nothi ng drawn rectangle ﬁlled stroked common task deﬁ ne rectangle corner point accomplished creating rectangle heig ht andchapter graphic width equal zero addingthe second point rectangle adding point rectangle cause rectangle grow just includ e point r new class basic shape work similarly check java api documentation detail interesting represents general path segment line bezier curve path created using metho d similar moveto linetosubroutines discussed subsection create path start constructing object type p new path pi ﬁrst created construct path mov ing imaginary pen path want create method x y move pen point x y drawing used specify initial point path starting point new piece path method x y draw line current pen position x y leaving pen x y method used close path current piece path drawing l ine starting point example following code creates triangle vert ice p new add bezier curve segment bezier curve discussed subsection add cubic bezier curve method x y add curve segment start current pen posit ion end x y using control point curve method addin g quadratic bezier curve segment path quadto requires single control point cx cy x y path intersects interior determined looking winding number discussed subsection possible rule determining poin t interior asking winding number curve bout point asking odd set winding rule used nonzero evenodd default windnonzero finally note possible draw copy ima ge graphic context image loaded ﬁle created program di scuss second possibility later section image represented object typeimage fact assume object type buﬀeredimage subclass image ifimgis object img x y null chapter graphic draw image upper left corner point x y fourth parameter hard explain speciﬁed nullforbuﬀeredimages draw image natural width height diﬀerent width height speciﬁed method img x y width height null method drawing string text method speciﬁes string basepoint string basepoint lower left corner string ignoring descender like tail letter g example hello world image string subject transforms way s shape transforms way rotated text image example e happen apply rotation text image stroke object represents shape ﬁll th e shape stroke class deﬁnes method doing method stroking shape called draw shape shape type shape type shape class used newly cre ated object object represents shape drawn example new course possible create shape object reu se time pen used stroking shape usually represe nted object type basicstroke default stroke line width equal s unit current coordinate pixel line diﬀeren t width install new stroke new basicstroke width thewidthin constructor type ﬂoat possible add parameter constructor control shape stroke endpoint segment meet seesubsection example chapter graphic new basicstroke round bevel possible make stroke dash dot won t discus stroking ﬁlling shape mean setting color certai n pixel java rule used coloring pixel called pa ints solid color gradient pattern like thing java paint represente d object paintis object paint setpaintto used graphic context subsequent drawing operation time paint changed older met hod c work color equivalent calling c solid color represented object type color color represented internally rgba color opaque color maximal alpha component created using constructor new color r g b wherer g andbareintegers range givethe red green blue component color translucent color add alpha c omponent range new color r b g function h s b creates color value hsb color model hsv case hue saturation brightness color component given value type ﬂoat constant represent dozen common color example draw square black outline light blue interior square new new color square new basicstroke square solid color java class gradientpaint represent simple linear gradient andtexturepaint represent pattern ﬁlls image pattern used similar way graphic arecalledtextures gradientsandpatternswerediscusse forthesepaints color applied pixel depends coordinate s pixel create texturepaint need buﬀeredimage object specify image use pattern say coordinate im age map drawing coordinate display specifying rectum ngle hold copy image constructor take form new texturepaint image rect whereimageis thebuﬀeredimage andrectis outside speciﬁed rectangle image repeated horizontally vertically con tructor gradientpaint take formchapter graphic new gradientpaint cyclic value type ﬂoat type color andcyclic isboolean gradient color vary line segment point point color ﬁrst endpoint second endpoint color constant line perpendicular line seg ment boolean parameter cyclic say color pattern repeat example command install gradientpaint graphic context new gradientpaint true way note current paint used stroke ﬁlls sample java program display polygon ﬁlled gradientpaint atexturepaint let adjust property image ﬁles program location compiled class ﬁles ma ke program run transforms java implement geometric transformation method th class example calling apply translation object drawn method called method ar e available correspond transform function discussed section sx sy scale horizontal scale factor sxand vertical scale factor sy r rotates angle rabout origin angle measured radian positive angle rotates positive direction positive r x y rotates angle rabout point x y dx dy translates dxhorizontally dyvertically sx sy applies horizontal shear sxand vertical shear sy usually shear amount giving pure horizo ntal vertical shear transform java represented object class aﬃnetransform create general aﬃne transform constructor affinetransform trns new affinetransform b c d e f transform trnswill transform point x y point given x c y e b x d y f apply transform trnsto graphic context calling trns graphic context current aﬃne transform compositi transforms applied command modify current transform copy curren t transform calling return aﬃnetransform object set current transform trns thisreplacesthecurrenttransformin aﬃnetransform trns note trns diﬀerent trns ﬁrst command replaces current transform second modiﬁes current transform composing trns chapter graphic thegettransform andsettransform method used implement hierarchical modeling theidea asdiscussedin isthatbeforedrawinganobject youshouldsave current transform drawing object restore th e saved transform additional modeling transformation applied drawing th e object eﬀect outside object java look like affinetransform savedtransform drawobject savedtransform hierarchical graphic really need stack transfo rms hierarchy implementedusingsubroutines thentheabovecodewouldbe partofasubroutine andthevalue local variable savedtransform stored subroutine stack eﬀectively using subroutine stack implement s tack saved transforms addition modeling transformation transforms ed set viewport transformation establishes coordinate s ystem used drawing usually java just graphic context h created drawing operation java version applywindowtoviewporttransformation function subsection sample program example iwillmentiononemoreusefor aﬃnetransform object youdoneedtoexplicitly transform coordinate example given object coordina te x y need know actually end screen pixel coordinate like transform x y current transform corresponding pixel coo rdinates aﬃnetransform class method applying aﬃne transform point work object type example affinetransform trns originalpoint new x y transformedpoint new originalpoint transformedpoint transformedpoint contains pixel coords correspo nding x y int pixelx int int pixely int way used working string wh en displaying string transformed coordinate want transform base point string string want transformation aﬀect locat ion string size rotation accomplish use technique obtain pixel coordinate transformed basepoint draw string coordinate using original untransformed graphic context reverse operation necessary given pixel coordinate px py ﬁnd point x y transformed px py given aﬃne transform example implementing mouse interaction generally kn ow pixel coordinate mouse want ﬁnd corresponding point r chosen coordinate need inverse transform inverse aﬃne transform t transform performs opposite transforma tion t x y px py ifris inverse transform r px py x y java inverse transform aﬃnetransform trnscan obtained withchapter graphic affinetransform inverse ﬁnal note older drawing method graphic drawline use integer coordinate s important note shape drawn ing older method subject transformation shape speciﬁed real number coordinate example drawing line eﬀect drawing endpoint fact dra wing aﬀected transformation coordinate buﬀeredimage pixel graphic application useful able work image visible screen need canvas need way quickly copy canvas screen exa mple useful store copy image canvas canv oﬃcial copy image change image canvas copie d screen reason draw extra stuﬀ scre en image changing oﬃcial copy example draw box sel ected region image damaging oﬃcial copy canvas remove box screen just copy ca nvas image screen java image implemented object typebuﬀeredimage buﬀeredimage represents region memory draw exactly t way draw screen obtain graphic c use drawing image buﬀeredimage animage draw graphic otherimage using drawimage method graphic context want display mage typical setup variable bufferedimage osc canvas osg graphic context drawing canva s object created using example osc new bufferedimage intrgb osg constructor buﬀeredimage speciﬁes width height image type type tell color represented ima ge stored type typeintrgb mean image us regular rgb color bit color component color component pixel packed single integer value program us buﬀeredimage store copy image paintcomponent method generally form protected void paintcomponent graphic g osc null draw extra stuff image chapter graphic sample program us technique program user draw line rectangle oval dr agging mouse mouse move shape drawn starting point mo use current location mouse move part existing image repeatedl y covered uncovered changing existing image fact image reen canvas shape user drawing actually drawn paintcomponent content canvas shape drawn oﬃcial image canvas u ser release mouse end drag operation main reason writing program illustrate p ixel manipulation computingwiththecolorcomponentsofindividualpixels t hebuﬀeredimage classhasmethods reading setting color individual pixel im age consists row column pixel oscis abuﬀeredimage int color x y get integer represents color pixel col umn number xand row number color component stored ﬁeld integer colorvalue individual color component extracted processing using java s bit manipulation operator int red color int green color int blue color similarly given red green blue color component value s range combine component value single integer use set color pixel image int color red green blue x y color method reading setting color n entire rectangular region pixel pixel operation used implement feature sa mple program smudge tool user drag tool s like smearing wet paint user ﬁrst click mouse color component small square pixel surrounding mouse position copied array user move m ouse color array blended color pixel near mouse position color blended color array small rectangle en smudged theseconduseofpixelmanipulationisinimplementing ﬁlt aﬁlter inthisprogram operation modiﬁes image replacing color e ach pixel weighted average color square pixel blur ﬁlter e xample us equal weight pixel average color pixel changed simple average color pixel neighbor using diﬀerent weight eac h pixel produce striking eﬀects pixel manipulation sample program produce eﬀect s t achieved pure vector graphic encourage learn lookin g source code look live demo section im plement eﬀects using html canvas graphic html canvas graphic modern web browser support graphicsapithat beused tocreateimages onawebpage theapiisimplementedusingjavascript thecl web won t cover javascript language sec tion understand material presented don t need know y ou know learn graphic api similar diﬀers java api presented previous sectio short introduction javascript section inappendix graphic context visible content web page element headline paragraph thecontentisspeciﬁedusingthehtmllanguage canvas sanhtmlelement itappears page blank rectangular area used dr awing surface calling html canvas graphic api source code web page canvas element created code form canvas thecanvas thewidthandheightgive size drawing area pixel idis identiﬁer used refer canvas javascript draw canvas need graphic context graphic ntext object containsfunctionsfordrawingshapes italsocontainsvar iablesthatrecordthecurrentgraphics state including thing like current drawing color tra nsform font generally usegraphics variable refers graphic contex t variable course programmer graphic conte xt play role canvas api variable type play java typical starting point canvas thecanvas graphic ﬁrst line get reference canvas element web page using id second line creates graphic context canvas element code produce error web browser doesn t support canvas add som e error checking putting command inside try catch statement typically store canvas graphic context gl obal variable use graphic context program contra st java typically new context time paintcomponent method called new context initial state default color str oke property applied transform graphic context global change t o state function carry subsequent function call unless s omething limit eﬀect actually lead fairly common type bug example apply rotation function rotation accumulate time function called unless undo previous rotation function called rest section concerned descri bing canvas graphic context record mplete source code minimal web page us canvas graphic chapter graphic doctype html html head title canvas graphic script let canvas dom object corresponding canvas let graphic graphic context drawing canva s function draw draw canvas using graphic context hello world function init canvas thecanvas graphic draw draw canvas init body canvas thecanvas complete minimal example l ook sample page look page browser read source code example show d raw basic shape using canvas graphic use basis ow n experimentation advanced starter example add utility function drawing shape setting u p coordinate add animation includes simple hierarchical modeling example show respond keyboard mouse event shape default coordinate canvas usual measure pixel upper left corner increase right increase downward range xandyvalues given widthandheightproperties canvas element term pixel unit measure r eally correct probably say like nominal t unit measure pixel typical desktop resolution magniﬁcation pply magniﬁcation browser window unit measure get stretched olution screen unit default coordinate correspond actu al pixel display device canvas api support limited set basic shape fact basic shape rectangle text shape created path shape stroked ﬁlled includes text stroke string tex t pen dragged outline character ﬁll string inside s character ﬁlled really make sense stroke text character rat large functionschapter graphic drawing rectangle text graphic refers object represents graphic context x y w h draw ﬁlled rectangle corner x y width wand height width height equal zero nothi ng drawn x y w h stroke outline rectangle x y w h clear rectangle ﬁlling fully transparent pixel allowing background canvas ba ckground determined property web page canvas appears background color image canvas str x y ﬁlls character string str left end baseline string positioned point x y str x y stroke outline character string path created using function graphic context context keep track current current version api path represented object way work path time kee p copy path later reuse path contain line bezier curve circular arc common function working path start new path previous path discarded current path graphic context note t graphic context keep track current point point cu rrent path calling current point undeﬁned x y current point x y adding thepath thiscanbeusedforthestartingpointofthepathor tostartanew disconnected segment path x y add line segment starting current point ending x y path current point x y x y add cubic bezier curve path curve start current point end x y point control point curve bezier curve control point discussed subsection cx cy x y add quadratic bezier curve current point x y control point cx cy x y r startangle endangle add arc circle center x y radius parameter starting ending angle o f arc measured radian arc extends positive direction start angle end angle positive rotation direction f rom positive positive clockwise default coordi nate optional ﬁfth parameter set trueto arc extends negative direction drawing arc current point end arc t current point called arc drawn line added p ath extends current point starting point ar recall immediately current point chapter graphic add path line current point starting point current segment curve recall t hat start new segment curve time use moveto creating curve command doe draw visible appear image ﬁll stroke path command used ﬁll stroke current path ﬁll path closed ﬁll algori thm act ﬁnal line segment added close path stroke sha pe s center virtual pen move path n canvas drawing s common use path pas center pixel th corner example draw line extends pixel coord inates pixel coordinate youwould actuallystrokethegeome triclinewith endpoint look example take step draw line start new path starting point ne w path add line point draw line remember line remains current path unt il time s draw ﬁlled regular octagon centered radius let let angle let x angle let y angle x y function used draw circle start angle end angle s ﬁlled circle radius centered draw just outline circle use place apply operation path look d etails draw wedge circle current point center circle arc plus lin e current point line end arc ce nter circle wedge way draw oval circle ing transforms cover later section javascript interesting property possible add new function property existing o bject sample programchapter graphic show add function graphic context drawing line oval shape built int o api stroke attribute line width aﬀect visual appearan ce stroke ﬁlls stored property graphic context example value o number represents width used stroke width given pixel default coordinate subject transforms change line width assigning value property change current width change aﬀects subsequent stroke read c urrent value savewidth save current width property control appearance endpoint stroke b e set round square butt quotation mark value example round similarly control appearance point segment st roke join segment possible value round vel miter line endpoint join discussed subsection note value string somewhat unusual aspect api propertie s graphic context value string including property cont rol color used drawing font used drawing text color controlled value property graphic context maintains separate style ﬁlling nd stroking solid color stroking ﬁlling speciﬁed string valid color strin g one used cs language used specify color style pr operties element web page solid color speciﬁed name red black beige rgb color speciﬁed string form rgb r g b parenthesis contain number range giving red green b lue component color hexadecimal color code supported form xx yyzz xx yy zz hexadecimal number giving rgb color comp onents example rgb light blue darker greenish bl ue style actually complicated simple solo d color gradient pattern supported example gradient created w ith series step let lineargradient red yellow green lineargradient use gradient fil l ﬁrst line creates linear gradient vary colo r line segment point point color gradi ent speciﬁed addcolorstop function ﬁrst parameter give fraction dista nce initial point ﬁnal point color applied second string t hat speciﬁes color achapter graphic color stop speciﬁes color initial point colo r stop speciﬁes color ﬁnal point gradient created used bo th ﬁll style stroke style graphic context finally note font used drawing text t value property value string used specify font c fairly complicated simplest version include f serif monospace font accessible web page add italicorboldor string example monospace size centimete r bold italic serif size ual size default usually small note text like drawing subject coordinate transforms applying scaling ope ration change size text negative scaling factor produce text transforms graphic context basic function modifying t current transform scaling rotation translation function wi ll compose current transform arbitrary transform completely replacing th e current transform sx sy scale sxin syin angle rotate angleradians origin positive rotation clockwise default coordinate tx ty translate txin tyin direction b c d e f apply aﬃne transform x c y e b x d y f b c d e f discard current transformation set current transformation x c y e b x d y f note shear transform apply shea r general transform example horizontal shear shear factor use implement hierarchical modeling discussed section need able save current transformation restore later unfortunately way provided read current transformation canvas graphic ntext graphic context keep stack transformation provide s method pushing popping current transformation fact method t han save restore current transformation actually save restore e ntire state graphic context including property current color line width d font current path push copy current state graphic context luding current transformation stack remove item stack containing saved state graphic context restore graphic context th state using method basic setup drawing object wi th modeling transform chapter graphic save copy current state b apply modeling transformati ons r sx sy draw object restore saved state note drawing object includes change attri butes drawing color change undone hierarchical graphic usually want eliminates need extr statement saving restoring thing like color draw hierarchical model need traverse scene gra ph procedurally data structure s pretty java fa ct basic concept learned transformation m odeling carry canvas graphic api concept apply widely carr y graphic apis just little added complexity sample web page implement hierarchical modeling using canvas api know transformation dr aw oval using canvas api suppose want oval center x y horizontal radius vertical radius idea draw circle radius center t hen transform circle need scaled factor translated center x y use make sure transformation aﬀect circl recalling order transforms code opposite order applied object x y circle radius note current path notaﬀected call example path discarded whe called called end path stro ked hand line width used stroke aﬀ ected scale transform applied oval note order c ommands reversed line width subject scaling interesting point transforms path html canvas api point used create path transformed th e current transformation saved saved pixel coordinate later path stroked ﬁlled current transform eﬀect path alth ough aﬀect example line width path stroked particular c t make path apply diﬀerent transformation example t make ov path use draw oval diﬀerent position time dra w oval place diﬀerent translation transforms applied graphic graphic situation diﬀerent java coordinate tha t stored path actual number used specify path object coordinate path stroked ﬁlled transformation eﬀ ect time applied path path reused time draw copy diﬀ erent transformation comment oﬀered example apis look simi lar subtle diﬀerences auxiliary canvas insubsection looked sample program us buﬀeredimage implement canvas allow direct manipulation color individual pixel id ea applied html canvas graphic way s little diﬀer ent sample web application doe pretty thing java program image ﬁlters version section live demo version program functionality try various drawi ng tool work don t forget try smudge tool applied shape drawn demo javascript web page represented data structure deﬁned standard called dom document object model canvas w e use canvas data structure th e page javascript canvas created function canvas way add kind dynamically created canvas dom web page used canvas doing use set t width height property need graphic context drawing ex ample code creates canvas get graphic context canvas ﬁlls canvas white osc canvas ca nvas size osc set explicitly osg graphic context drawin g osc white use context osc w hite sample program let user drag mouse canvas t o draw shape canvas hold oﬃcial copy picture seen user canvas user see ca nvas copied canvas picture modiﬁed user dra gging mouse draw line oval rectangle new shape actually drawn n content canvas added canvas user ﬁnishes drag operation tool change directly c anvas result copied screen exact imitation java program demo version mentioned actually us somewhat d iﬀerent technique accomplish thing us canvas o ne located exactly lower canvas hold actual image upper va completely transparent user drawing line oval rectangle wh ile user dragging mouse draw shape new shape drawn upper canvas hide lower canvas beneath shape user rele as mouse shape ischapter graphic added lower canvas upper canvas cleared ma ke completely transparent tool operate directly lower c anvas pixel manipulation smudge tool sample program demo implemented computing color component value pixel image implem entation requires way read color pixel canvas wi th function x y w h graphic graphic context canvas function read color rectangle pixel x y upper left corner rectangle wi width height parameter expressed pixel coordinate consider example color return color data rectangle left corner canvas return value color object property thewidthandheightgive number row column pixel returned d ata according documentation scre en width height function data r eal physical pixel display device nominal pixel used pixel coordinate canvas device pixel nomina l pixel m sure really happen practice value array array element pixel element contain red blue green alpha color compo nents pixel given integer range pixel lie outside canvas component value zero array value type element unsigned integer limited range javascri pt styped array datatypes hold value speciﬁc numerical type e xample suppose just want read rgb color pixel coordinate x y set pixel x rgb color component pixel r g b function imagedata x y used copy color image data object canvas placing rectangle n canvas upper left corner x y theimagedata objectcanbeonethatwasreturnedbyacallto possibly color data modiﬁed create blan k image data object calling w h ﬁll data let s consider smudge tool sample program user click mouse tool use color data square pixel surrounding mouse location osgis graphic context canvas contains image want arithmetic color v alues copy color component intoanothertypedarray oneoftype function function grabsmudgedata x y x y give mouse locati let color smudgecolorarray null make image data array time function graphic smudgeimagedata smudgecolorarray new let copy color component data smudgecolorarray ﬂoating point array smudgecolorarray used computing new color value image mouse move color value array copied image data object smudgeimagedata used color value image function called poi nt visited user drag smudge tool canvas function swapsmudgedata x y x y new mouse locati let color color d ata image let color data pixel array locati ons smudgecolorarray pixel va getimagedata get alpha value pixel coordi nates actually canvas let j j compute new rgb value let newsmudge smudgecolorarray j j let newimage smudgecolorarray j j j newimage smudgecolorarray j newsmudge alpha component alpha component zero set output color zero transparent black effect color pixel canvas let j j j smudgeimagedata copy new color canvas function new color computed pixel square pixel mouse location color replaced weighted average o f current color pixel color corresponding pixel smudgecolorarray time color insmudgecolorarray replaced similar weighted average worthwhile try understand example se e processing color data source code example graphic image example pixel manipulation look ima ge ﬁlters modify image replacing color pixel weighted average o f color pixel pixel surround depending weighting factor s used result simple slightly blurred version image interesting version section includes interactive demo let apply diﬀerent image ﬁlters variety image demo ﬁltering operation demo us image data functi onsgetimagedata createimagedata andputimagedata discussed color data entire image obtained getimagedata result averaging computation placed new image data object resulting image dat copied image usingputimagedata remaining question original image come canvas ﬁrst place image web page spec iﬁed element web page source img mypic thesrcattribute speciﬁes url image loaded th e optional idcan used reference image javascript script image mypic get reference object represents image th e document structure object use draw image canvas ifgraphics graphic context canvas image x y draw image upper left corner x y point x y image transformed transformation eﬀect graphi c context draw image using natural width height scaled trans formation specify width height rectangle ima ge drawn image x y width height version drawimage image scaled ﬁt speciﬁed rectangle suppose image want draw canvas web page case possible load image dynamically th like making canvas making use document object create img element newimage img animgelement need srcattribute speciﬁes url loaded example soon assign value srcattribute browser start loading image loading asynchronously computer conti nues execute script waiting load complete mean t si mply draw image line assignment statement image like ly loading time want draw image ﬁnished loading th happen need assign function image s onloadproperty setting src function bechapter graphic called image fully loaded putting tog ether simple javascript function loading image speciﬁed url drawing canvas loaded function loadanddraw imageurl x y let image img doneloading imageurl function doneloading image x y similar technique used load image ﬁlter dem mystery clear discussing use canvas simplepaintprogram example earlier section noted content canvas copied main canvas didn t say ho w fact using drawimage addition drawing image canvas drawimage used draw content canvas canvas sample program command osc used draw canvas main canvas graphic graphic context drawing main canvas oscis object represents canvas svg scene description language finish chapter look graphic svg scalable vector graphic far considering graphic p rogramming apis svg hand scene description language programming language programming language creates scene generating t content procedurally scene description language speciﬁes scene declarativel y listing content svg vector graphic language content scene includes s hapes attribute color line width geometric transforms familiar interesting new context svg xml language mean strict som ewhat verbose syntax make little annoying write ha nd make possible read understand svg document familiar wit h syntax s possible svg originally stood simple vector graphic mean simple language point cover part language option mention goal introduce t idea scene description language language use basic idea used rest chapter svg used ﬁle format storing vector graphic ima ge way png jpeg ﬁle format storing ima ge mean open svg ﬁle web browser view imag svg image included web page using srcof img element s svg example web version section displayed svg document writt en plain text create svg image using regular text edi tor read sourcechapter graphic svg image opening text editor viewing source image displayed web browser svg document structure svg ﬁle like xml document start standard c ode memorizes just copied new document code copied starting point svg document type discu ssed section remember use subset svg speciﬁcation xml doctype svg public svg http svg http xmlns http xmidymid scene description go ﬁrst line say xml svg document r est document svg element act container entire scene descrip tion ll need know little xml syntax xml element gener al form look like elementname content element start start tag begin followed identiﬁer tag ending start tag include attribute form value thenameis identiﬁer valueis string value enclosed single double quotation mark ele ment end end tag element match element start tag form element name attribute name bet ween start end tag come content element content c consist text nested element element content replace end start tag leave end tag called ta example circle red actual svg element speciﬁes circle s ea y forget end tag legal xml cument looking svg document ﬁve line starting svg just long start tag use tag shown customize value t hewidth height viewbox andpreserveaspectratio attribute line comment comment xml start end thewidthandheightattributes svg tag specify natural preferred size image forced diﬀerent size example used img element web page speciﬁes diﬀerent width height size speciﬁed using unit measure infor inch cmfor centimeter px pixel pixel thechapter graphic inch unit measure speciﬁed pixel used ther e space number unit measure theviewbox attribute set coordinate used drawing image called view window subsection value viewbox list number giving minimum minimum width height view window width height po itive xincreases yincreases number list c separated space comma typical list num bers svg finally preserveaspectratio attribute tell happens aspect ratio viewbox doe match aspect ratio rectangle wh ich image displayed default value xmidymid extend limts v iewbox horizontally vertically preserve aspect ratio viewbox wil l appear center display rectangle ifyouwouldlikeyourimagetostretchtoﬁllthed isplayrectangle ignoringtheaspect ratio set value preserveaspectratio aspect ratio issue discussed subsection let s look complete svg document draw simple s hapes s document probably ﬁgure draw wit hout knowing svg xml doctype svg public svg http svg http xmlns http xmidymid rect blue text red hello w orld line blue ellipse rgb circle magenta black polygon green s image produced example hello world chapter graphic drawing coordinate example xranges yranges value used drawing including stroke width d font size given term coordinate remember use coor dinate ﬁnd convenient note way part image covered shape drawn transparent s example larger variety shape source code example lot comment us feature discus remainer section look source code example open text editor open web browser use browser s view source command shape style transforms svg basic shape speciﬁed element tag give shape attribute property shape attri butes specify geometry endpoint line radius circle attr ibutes specify style property ﬁll color line width style property wh attribute book section using term attribute xml sense transform attribute used apply geometric transform t shape detailed example consider rectelement speciﬁes rectangle geometry oftherectangleisgivenbyattributesnamed x y widthandheightintheusualway thedefault value xandyis zero optional leaving th e setting value zero widthand heightare required attribute value example element rect speciﬁes rectangle corner width heigh t rect give rectangle corner width ight note way attribute xml element given order th erectelement optional attribute rxandrythat used make roundrects corner rep laced elliptical arc value rxandrygive horizontal vertical radius elliptical graphic style attribute added say shape st roked ﬁlled default use black ﬁll stroke precisely later default shape inherit value style attribute envi ronment black ﬁll stroke initial environment common style attrib ute speciﬁes ﬁll shape value indi cate shape ﬁlled color format c s color used html canvas api example common color black red rgb color rgb gradient pattern ﬁlls discus speciﬁes stroke shape possible val ues ﬁll number specify opacity stroke ﬁll value tran slucent stroke ﬁll default value mean fully opaque number set line width use stroke e line width subject transforms default value ﬁne coordinate using pixel unit measure wi custom coordinate system determines appearance endpoint stroke value square round butt default butt seesubsection discussion line cap join determines appearance point segment stroke meet value miter round bevel def ault miter example us option let s make squ rounded pointed corner size centered origin nd using translucent red ﬁll gray stroke rect red gray ro und simple outline rectangle ﬁll rect black non e thetransform attribute used apply transform series trans form shape example make rectangle tilted degree s horizontal rect rotate value rotate represents rotation degree radian origin positive direction rotation usual rotates po sitive direction positive specify diﬀerent center rotati adding argument rotate example rotate rectangle center rect rotate chapter graphic translation scaling work probably expect tr ansform value form translate dx dy scale sx sy shear transforms namesskewxandskewy argument skew angle shear f example transform skewx tilt grees equivalent shear factor function tilt xi called skewxbecause modiﬁes skews point leavin g unchanged example use skewxto tilt rectangle make parallelogram rect skewx used angle degree make rectangle tilt right usual pixel coordinate value transform attribute list transforms separated space comma transforms applied object usual n opposite order listed rect translate rotate skewx ﬁrst skew rectangle parallelogram rot ate parallelogram degree origin translate unit tion addition rectangle svg line circle ellipsis text basic shape detail line element represents line segement geometric attrib ute specify coordinate endpoint line segme nt attribute zero default value make easier specify horizontal vertical line example line black strokeattribute wouldn t line default valu e forstokeis circle element geometric attribute cx cy andrgiving coordinate center circle radius center coordin ate default value equal zero ellipse element attribute cx cy rx andry whererxandrygive radius ellipse text element little diﬀerent attribute xandy default value zero specify location basepoint text t text given content element attribute eleme nt divided start tag end tag text appear drawing come b etween start end tag example text text appear image t usual stroke ﬁll attribute apply text text ha s additional style attribute attribute speciﬁes font value th e generic font name serif monospace s peciﬁc font available number giving approximate height charac ters coordinate font size subject coordinate m odeling transforms like length bold italic text setting equal bold equal italic example us op tions applies additional style transform good measure chapter graphic text italic bold black rgb rotate hello world polygon path svg nice feature making complex shape th e polygon element make easy create polygon list coordinate pair fo r example polygon creates polygon vertex pair number pointsattribute speciﬁes vertex number separated space comma ve used mixture space com ma make clear number pair course add usual style att ributes stroke ﬁll polygon element polyline similar polygon leaf line ﬁnal vertex starting vertex th e diﬀerence show polyline stroked polyline ﬁlled missing si added path element interesting fact ba sic shape text using path element path consist line segment bezier curve elliptical arc won t discus elliptical ar c syntax specifying path succinct feature t seen path element attribute named dthat contains data path data consists o r command command consists single letter fol lowed data necessary command moveto lineto cubic bezier quadrati c bezier command familiar coded letter m l c command closing path segment z requires data example pat h data m l draw line segment point point combine connected line segment l command exam ple polygon example given created using path element path m l z z end data close path adding ﬁnal si polygon note usual use comma space data c command take number data specify trol point ﬁnal endpoint cubic bezier curve segment multiple value connected sequence curve segements similarly q mmand us data value specify control point ﬁnal endpoint quadratic bezier curve segment large curvy yellow shape shown picture earlier sect ion created path line segment bezier curve segment path m c l c z yellow black svg path add ﬂexibility deﬁning relative version t path command data command given relative current positio relative command example instead telling whereto tell farto current position name relative version path command lower case letter instead upperchapter graphic case m mean point coordinate m mean unit horizontally unit vertically th e current position similarly current position x y command l ﬁrst character lowe r case l draw line x y hierarchical model svg interesting language w ork individual simple shape complex scene want able hierarchi cal modeling object constructed transform appl ied entire complex object need way group object treated svg g element content g element list shape element simple shape nested g element add style transform attribute g element main point grouping group treated single object transform attribute g transform entire group style attribute g element set default value group replacing current defa ult example g black transfor scale circle ellipse ellipse line path m c nested shape use black default value attribute default overridden specifyi ng diﬀerent value element path element example setting scale group ﬂips entire image vertically o nly comfortable working coordinate y increase simple line drawing o f face produced group suppose want include multiple copy obj ect scene shouldn t necessary repeat code drawing object wou ld nice like reusable subroutine fact svg simil ar deﬁne reusable object inside defs element object deﬁned inside defs added scene copy object added scene single com mand work object idattribute identify example deﬁne obje ct look like plus sign chapter graphic defs g plus black line line use element used add copy plus sign object scene syntax use xlink plus value xlink href attribute idof object character added beginning don t forget leave use element simply ignored add transform attribute use element apply transformation copy object apply style attribute used default value attribute copy example dra w plus sign diﬀerent transforms stroke width use xlink plus translate s use xlink plus translate rot ate note t change color plus sign lready speciﬁes stroke color object deﬁned defs section used object deﬁnitions make possible create h ierarchy multiple level example deﬁnes wheel object us copy wheel cart object defs define object represents wheel centered radius wheel filled circle wit h rectangle spoke g wheel circle black circle lightgray rect b lack rect b lack rotate rect b lack rotate circle black define object represents cart wh eel rectangle body cart g cart use xlink wheel translate scale use xlink wheel translate scale rect rect chapter graphic svg ﬁle go add copy wheel copy o f cart image cart diﬀerent color transforms t image animation svg number advanced feature won t discus e want mention animation possible animate property n svg object including geometry style transforms syntax animation fa irly complex example tell produce fairly compl ex hierarchical animation like example discussed ed demo subsection svg version animation note web browser implement svg animation correctly attribute shape element animated adding n animate element content shape element example make s rectangle image left right rect animate x indefinite note animate nested inside rect theattributename attribute tell attribute rect animated case thefromandtoattributes say xwill value durattribute duration long animation last value mean tributerepeatcount indeﬁnite mean animation completes start repeat indeﬁnitely long image displayed repeatcount attribute omitted animation run rectangle jump orig inal position remain repeatcount replaced freeze animation run rectangle wil l frozen ﬁnal position instead jumping st arting position animation begin image ﬁrst load want animation start later time add abeginattribute value give time animation shou ld start number second image load want rectangle forth s initial ﬁnal position need called keyframe animation important idea right fromandtoattributes allow specify value beginnin g end animation keyframe animation value spe ciﬁed additional time middle animation keyframe animation svg thefromandtoattributeschapter graphic replaced keytimes andvalues moving rectangle example modiﬁed use keyframes rect animate x indefinite thekeytimes attribute list number separated semicolon number range increasing order ﬁrst nu mber number number speciﬁes time imation fraction complete animation example point thr ough animation way valuesattribute list value value key time case value xi start animation animation end animation th e key time value x obtained interpolating value speciﬁed fo r key time result case rectangle move left right ﬁrst half animation right left second half transforms animated need use animatetransform tag instead animate need add typeattribute specify transform animating rotate translate examp le transform animation applied group g scale animatetransform transform sca le freeze rect rgb polygon green animation show growing tree green triang le brown rectangle animation transform go scale scale animation start second image load last second end animation tree freeze ﬁnal scale transform attribute g element speciﬁes scale eﬀect animation start scale factor llapses object size zero invisible ﬁnd example m oving rectangle keyframe animation sample ﬁle create animated object defs section svg ﬁle apply animation use element make possible create hierarchical anim ations simple example sample ﬁle example show rotating hexagon rotating square t vertex hexagon hexagon constructed copy object wit h diﬀerent rotation applied copy copy basic object shown image t right hexagon square deﬁned animated object rotation used hexagon rotation applied hexagon applies square rotation s make example hier archical animation look example probably animation don t forget check source code whi ch surprisingly short chapter opengl geometry time computer graphic dimension won t section chapter really ﬁ nd concept graphic carry dimen sion brings new feature used focus opengl graphic api introduced gone version change opengl graphic api similar apis covered primiti ve way course complicated fact support opengl th e basis webgl current standard application web covered chapter andchapter competing framework graphic inclu ding microsoft s apple s metal vulkan designed creator open gl modern eﬃcient replacement chapter discussion limited openg l opengl large api cover goal introduc e graphic concept fully cover api signiﬁcant cover ha s removed modern version opengl including webgl m odern graphic apis steep initial learning curve really th e best starting place encountering graphic ﬁrst time addit ional support opengl similar framework opengl s till supported desktop implementation opengl s reasonable pl ace start learning graphic chapter concentrate geometric aspect gra phics deﬁning transforming object projecting scene image image produce look unrealistic chapter add realism simulating eﬀects lighting material property surf ace shape color opengl section introduces core feature opengl discussion section limited need know abo ut add direction xandydirections used convention dire ction calledz default coordinate xandyaxes lie plane image positive direction point direction perpendicular image default coordinate opengl image show region space opengl geometry x y andzall range minus diﬀerent region apply transform just use coordinate lie bet ween note programming opengl implemented d iﬀerent programming language api speciﬁcation assumes tha t language section short introduction c speciﬁ cation translates directly language main diﬀerences t o special characteristic array c language example follow c syntax note thing diﬀerent language m foll owing c api refer function subroutine section explains write opengl program c java need consul t section actual programming live opengl demo t book written using javascript simulator implement subset opengl simulator discussed subsection opengl primitive opengl draw basic shape including point li ne triangle support curve curved surface approximated simpler shape basic shape referred primitive primitive n opengl deﬁned vertex vertex simply point given x y andzcoordinates let s jump right draw triangle take step glbegin gl triangle glend vertex triangle speciﬁed functi vertex speciﬁed call glbeginandglend parameter glbegintells type primitive drawn gltriangles primitive allows draw triangle just specify vertex triangle tha t want draw note using preferred way specify primitive openg l alternative covered subsection complicated use consider convenient way learn vertex prope rties way actually thing modern graphic s apis note opengl function actually just send comm ands gpu opengl save batch command transmit drawing won t actually command transmitted ensure happ en function glflush called case function called autom atically opengl api run time opengl vertex coordinate function speciﬁes xandy coordinate vertex zcoordinate set zero function speciﬁes coordinate nam e tell parameter passed function f end indicate s parameter type ﬂoat fact glvertex function including v ersions parameter typeintordouble named like version parameter won t clear w hy exist later version array numbe r instead individual numberschapter opengl geometry parameter entire set vertex function ferred glvertex standing parameter speciﬁcation prolif eration name fact c programming language doesn t support overloadin g function name c distinguishes function name nu mber type parameter passed function opengl kind primitive seven exi st modern opengl dropped simplest primitive glpoints simply render point vertex primitive default point rendered single pixel size point primitive changed calling glpointsize size parameter size type ﬂoatand speciﬁes diameter rendered point pixel default point square circular point calling glenable gl pointsmooth function glpointsize andglenable change opengl state includes setting aﬀect rendering encounter man y function function glenable andgldisable used turn feature oﬀ general ruleisthatanyrenderingfeaturethatrequiresextracompu tationisturnedoﬀbydefault ifyou want feature turn calling glenable appropriate parameter primitive drawing line segment gllines gllinestrip disconnected line segment specify vertex segment want draw primitive draw c onnected sequence line segment diﬀerence gllineloopadds extra line segment ﬁnal vertex ﬁrst vertex use vertex primitive seen far ab cf deab cf deab cf deab cf point b c d e f speciﬁed order th illustration point lie plane mind general point space width line primitive set calling gllinewidth width line width speciﬁed pixel notsubject scaling transformation let s look example opengl doe circle primit ive approximate circle drawing polygon large number side d raw outline polygon use gllineloopprimitive glbegin gl lineloop angle represents pi x co angle y sin angle x y glend chapter opengl geometry draw approximation circumference circl e radius center remember learn use example like mplete running program read section make change code depending opengl implementation using set primitive drawing triangle ar e gltriangles gltriangle strip andgltriangle fan bc fde g hia bc fde g hi b cdef bcde f g h triangle left make gltriangles primitive vertex primitive set vertex m akes separate triangle agltriangle stripprimitive ﬁrst vertex produce triangle afte r new vertex add triangle strip connect ing new vertex previous vertex gltriangle fanprimitives shown right gltriangle fan ﬁrst vertex make triangle vertex af ter add anther triangle case new triangle connecting new vertex previous vertex ﬁrst vertex speciﬁed vertex picture note thatgltriangle fancan used drawing polygon picture b y way dot line primitive opengl w ould draw green interior ﬁgures remaining primitive removed fro m modern opengl areglquads glquadstrip andglpolygon quad short quadrilateral polygon quad dete rmined vertex order quad rendered correctly opengl vertex quad lie plane true polygon primitive similarly t o rendered correctly quad polygon convex subsection opengl doesn t check condition satisﬁed use quad polygon err shape easily produced triangle primitive ar e really necessary record example bc fd egh jl kab cfd e gh ij l ka b cdef bcd e vertex primitive speciﬁed order b c note order diﬀers quad primitive glquads vertex individual quadchapter opengl geometry speciﬁed counterclockwise order qua d forglquadstrip vertex alternate strip ot opengl color opengl large collection function used specify color geometry draw function name form glcolor stand suﬃx give number type parameter shou ld warn realistic graphic opengl complicated notion color us diﬀerent set function learn chapte r stick glcolor example function parameter type ﬂoat parameter red green blue component color numbe r range fact value outside range allowed negative v alues color value used computation value used given wh en color actually appears screen component value clamped range t hat value zero changed zero value greater changed add fourth component color using fourth component known alpha used default drawing mode possible conﬁgure opengl touseitasthedegreeoftransparencyofthecolor similarl ytotheuseofthealphacomponentin graphic apis looked need comma nd turn transparency glenable gl blend glblendfunc gl srcalpha gl oneminussrcalpha ﬁrst command enables use alpha component disabled calling gldisable glblend glblend option disabled alpha simply ignored second command tell alpha component color wi ll used parameter shown common implement transparency usual way note transparency work ﬁne d iﬃcult use transparency correctly like use integer color value range use set color function name ub stand signed unsigned byte data type value range e example command setting drawing color opengl draw black draw white draw red draw color just tiny bit differe nt black suffix ub f important draw red draw transparent red opengl configured transparency default drawing plain red using function set value current colo r opengl state generate vertex glvertex function current color saved vertex coordinate attribute t vertex verticeschapter opengl geometry kind attribute color intere sting point opengl color associated individual vertex wi th complete shape changing current color call glbegin andglend shape diﬀerent vertex diﬀerent color attribute o pengl compute color pixel inside shape interpolating color vertex opengl extremely conﬁgurable note interpolation color just default behavior example triangle vertex ar e assigned color red green blue image used kind hello world example opengl triangle drawn command glbegin gl triangle red green blue glend note drawing primitive notneed explicitly set color vertex want shape color j ust set current color drawing shape just t oglbegin example draw solid yellow triangle yellow glbegin gl triangle glend alsorememberthatthecolorforavertexisspeciﬁed beforethecallto glvertex thatgenerates vertex version section interactive demo t hat draw basic opengl triangle diﬀerent colored vertex demo ﬁ rst opengl example demo actually us webgl use test check whethe r web browser support webgl demo chapter opengl geometry sample program draw basic opengl triangle using java program doe using c programming language version us javascript simulator implem ents just part opengl covered book th ose program used experiment drawing opengl use t o test opengl programming environment common operation clear drawing area ﬁlling wi th background color possible drawing big colored rectangle opengl potentially eﬃcient way function glclearcolor r g b set color used clearing drawing area set color color isn t used actually command clear dr awing area parameter ﬂoating point value range varia nt function provide color component ran ge default clear color zero black alpha component equa l zero command actual clearing glclear gl colorbufferbit correct term calling drawing area thecolor buﬀer buﬀer general term referring region memory ope ngl us buﬀers addition color buﬀer encounter depth buﬀ er just moment glclearcommand used clear diﬀerent buﬀers sa time eﬃcient clearing separately clea ring parallel parameter glcleartells buﬀer buﬀers clear clear buﬀe r combine constant represent arithmeti c operation example glclear gl colorbufferbit gl depthbufferbit form glclearthat generally used graphic depth buﬀer p lay essential role graphic depth buﬀer genus lly used appropriate parameter glclearis justglcolor buffer bit glcolor glvertex array version glcolor andglvertex diﬀerent number type parameter version let place data command single array parameter name versi ons end v example v actually stand vector meaning essentially array number fo r example function coords coordswould array containing ﬂoating point num bers existence array parameter opengl force diﬀe rences opengl implementation diﬀerent programming language array s java diﬀerent array c array javascript diﬀerent let s l ook situation c ﬁrst s language original opengl api c array variable sort variation pointer varia bles array pointer used interchangeably circumstance fact t c api array parameter actually speciﬁed pointer example parameter f type pointer tochapter opengl geometry actual parameter array variable pointer point beginning sequence thre e ﬂoats example suppose want draw square need coordinate vertex square c coordinate array use pull coordinate need float coords glbegin gl triangle fan coords us coords coords coords us coords coords coords us coords coords coords us coords coords glend example us pointer arithmetic coords n represents pointer element array alternative notation coords n address operator coords n mean pointer coords n alien people familiar java javascript ex amples avoid using pointer arithmetic occasionally use address ope rators java people designed jogl wanted preserve t ability pull data middle array s possible wo rk pointer java solution replace pointer parameter c api pair parameter jogl parameter specify array contains dat specify starting index data array example squ code translates java float coords triangle coords us coords coords coords us coords coords coords us coords coords coords us coords coords really diﬀerence parameter althou gh zero ﬁrst little annoying main diﬀerence preﬁxes required nature jogl api won t say mor e jogl need translate example jogl mi nd extra parameter required working array record glvertex andglcolor function use book complete set available opengl x y xyarray x y xyarray x y xyarray x y z xyzarray x y z xyzarray x y z xyzarray r g b rgbarray r g b rgbarray r g b rgbarray chapter opengl geometry r g b rgbaarray r g b rgbaarray r g b rgbaarray forglcolor mind ub variation require integer th e range f d variation require number range depth test obvious point viewing object b ehind object happens object hidden viewer object create image world make sure object s upposed hidden object fact visible image hidden surface problem solution simple just draw object order object object cover ed later object drawn called painter s algorithm s essentially used doing unfortunately s easy implement object intersect object hidden order draw object point wrong object s visible ﬁx cut object piece intersection treat piece separate object fact problem tersecting object s possible object ﬁrst object h ides second second hide hide ﬁrst t painter s algorithm fail regardless order object drawn solution cut object piece s obvious cut problem solved sue correct drawing order change point view changed geometri c transformation applied mean correct drawing order recomput ed time happens animation mean frame opengl doe use painter s algorithm instead us technique called depth test depth test solves hidden surface problem matter w hat order object drawn draw order want ter m depth distance viewer object object gr eater depth farther viewer object smaller depth hide object greater depth implement depth test algorithm opengl store depth value eac h pixel image extra memory used store depth value make depth buﬀer mentioned earlier drawing process depth buﬀer used track currently visible pixel second object drawn pi xel information depth buﬀer used decide new object o f object currently visible new object n color pixel changed new object depth buﬀer updated new object current object data new object discarded color depth buﬀers left unchanged default depth test notturned lead bad result drawing enable depth test calling glenable gl depthtest turned oﬀ calling gldisable gldepth test forget enable depth test drawing image likely c onfusing make nochapter opengl geometry sense physically quite mess forget t o clear depth buﬀer using theglclearcommand shown earlier section time y ou clear color buﬀer demo online version section let experiment wit h depth test let happens y geometry extends outside visible range demo detail implementation depth t est pixel depth buﬀerstoresarepresentationofthedistancefromtheviewe rtothepointthatiscurrentlyvisible pixel value essentially point transformation applied fact depth buﬀer called t range possible scaled range fact limited range depth buﬀer value mean opengl displa y object limited range distance viewer depth value corresponds t o minimal distance depth value corresponds maximal distance clea r depth buﬀer depth value set thought representing b ackground image choose range visible image transformation apply default range absence trans formation point outside range visible image common problem use small range object missing scene t heir front back cut oﬀ lie outside visible range tempted use huge range make sure object want incl ude image included range s good idea depth b uﬀer limited number bit pixel limited accuracy larger range value represent harder distinguish betwe en object depth think happen object y scene depth value depth buﬀer m exactly depth issue depth buﬀer algorithm strange result object exactly depth value logicall y s clear object visible real problem depth test object point second object point thi s possible numerical calculation perfectly accurate actual exa mple picture shown gray square drawn follo wed white square followed black square square lie plane small rotation applied force computer calculation drawing th e object picture left drawn depth test disabled example pixel white square drawn computer didn t try ﬁgure lie s graychapter opengl geometry square simply colored pixel white right d epth test enabled strange result finally way note discussion assumes th transparent object unfortunately depth test doe handle tran sparency correctly transparency mean object contribute t o color pixel depth test assumes pixel color color object nearest viewer point handle transparency correctly opengl y ou pretty resort implementing painter s algorithm hand fo r transparent object scene coordinate transforms inchapter looked fairly closely coordinate system transforms dimensional computer graphic section discussion thing complicated dimension lo t basic concept remain coordinate coordinate way assigning number point n dimension need pair number specify point coordinate referred xandy course name arbitrary assig nment pair number point arbitrary large extent point obje ct real thing coordinate just number assign refer t hem easily work mathematically seen power di scussed transforms deﬁned mathematically term coordinate hav e real useful physical meaning dimension need number specify poin s essentially mean dimensional coordinate called perpendicular image illustrates coordinate positive direction x y andz ax shown big arrow green blue red version section demo version ima ge drag ax rotate image demo example image look illusion s stronger rotate image thing contribute eﬀect f thing object farther away viewer look smaller image way opengl geometry scene projected discus projection t section factor shading object object shaded wa y imitates interaction object light illuminates o ﬀ discussion lighting chapter section concentrate construct sc ene referred modeling opengl programmer usually think term coordinate sy stem lie plane screen perpendicular screen positive direction pointing ofthe screen viewer default coordinate opengl using apply transformation similar positive direction pointing intothe screen contradiction coordinate actually use d arbitrary set transformation convention opengl work ordinate point viewer negative point away viewer transformation default coordinate rever s direction conventional arrangement ax produce coordinate mean point thumb right hand direction positive curl ﬁngers hand cu rl direction positive looking tip thumb curl counterclockwise direction way th ink curl ﬁgures right hand positive xto positive thumb point direction positive default opengl coordinate hardly used spen d time trying visualize coordinate system use hand describes natural coordinate viewer s point view eye viewing coordinate t heseeye coordinate necessarily natural coordinate world coord inate coordinate scene referr ed world coordinate recall object usually speciﬁed directly wor ld coordinate instead object speciﬁed coordinate known object coordinate modeling transforms applied place object world o r complex object opengl object coordinate number used t heglvertex function specify vertex object object appe ar screen usually subject sequence transformation starting mo deling transform basic transforms basic transforms extension basic transf orms familiar rotation scaling translation lo ok equivalent aﬀect object applied modeling transforms discus use transforms opengl translation easiest translation add numbe r coordinate true just need number specify mount motion direction coordinate ax translation dx dy dz transforms point x y z point opengl translation speciﬁed comma nd gltranslatef dx dy dz command gltranslated dx dy dz chapter opengl geometry translation aﬀect drawing command given note version command ﬁrst en ding f take ﬂoat value parameter second ending d t akes parameter type double example gltranslatef translate object unit zdirection scaling work similar way instead scaling factor need opengl command scaling glscale f d command glscalef sx sy sz transforms point x y z x sx y sy z sz scale factor sxin thex direction syin theydirection szin thezdirection scaling origin move point farther closer origin f uniform scaling factor use scaling factor minus t o apply reﬂection example glscalef reﬂects object reversing sign zcoordinate note reﬂection convert coordinate coordinate andvice versa remember handed distinction pr operty world just way chooses lay coordinate w orld rotation harder rotation rotation p oint usually taken origin rotation rotation line whi ch called axis rotation think earth rotating axis axis rotati line pass north pole south pole axis stay ﬁxed ea rth rotates pointsthatarenotontheaxismoveincirclesabouttheaxis anylinecanbeanaxisofrotation generally use axis pass origin t common choice axis rotation coordinate ax s convenient able use diﬀerent line t axis easy way specify line pass o rigin just specify point line addition origin s ho w thing opengl axis rotation speciﬁed number ax ay az zero axis line ax ay az specify rotation transformation specify axis angle rotation axis account diﬀerence positive nd negative angle t just say clockwise counterclockwise look t rotating earth north pole counterclockwise rotation look south pole clockwise rotation diﬀerence betwee n deﬁne direction rotation use rule say point thumb right hand direction axis point point ax ay az determines axis direction rotation fo r positive angle given direction ﬁngers curl emp hasize rule work working coordinate sy stem switched coordinate need use rule determine positive direction rotation demo help understand rotation space demo chapter opengl geometry rotation function opengl glrotatef r ax ay az use glrotated ﬁrst parameter speciﬁes angle rotation measured d egrees parameter specify axis rotation line t o ax ay az example scaling translation scaling opengl glscalef uniform scaling factor glscalef shrink half onl glscalef reflect reflects positive negative gltranslatef unit positive ction gltranslatef point x y z glrotatef rotate degree move axis axis axis axis glrotatef effect previo rotation glrotatef rotate degree move axis axis axis axis glrotatef rotate degree move axis axis axis axis glrotatef rotate degree lin e point remember transforms applied object dra wn transformation function called transformation apply objec t opposite order order appear code course opengl draw drawing opengl draw using zero zcoordinate drawing probably want apply version rotation scaling translat ion opengl doe transform function just use version wit h appropriate parameter translation dx dy use gltranslatef dx dy zero translation zdirection mean transform doesn t change zcoordinate map course use gltranslated instead gltranslatef scaling sx sy use glscalef sx sy scale xandy direction leaving zcoordinate unchanged rotation angle rabout origin use glrotatef r rotation rotates usual opengl coordinate point screen rule say t hat rotation positive angle counterclockwise direction point right point upwards counterclockwise rotation rotates positive direction positive convention used previously positive dir ection opengl geometry hierarchical modeling modeling transformation used hierarchical mo deling allows complex object built simpler object section review brieﬂy hierarchical modeling object deﬁned natural coordina te usually using reference point object scaled rotated translated place world coordinate complex object implemen t need way limiting eﬀect modeling transformation object par t object using stack transforms drawing object push copy current transform stack drawing object using necessary temporary transformation restore previous transform poppin g stack opengl maintains stack transforms provides func tions manipulating stack fact transform stack diﬀeren t purpose introduces complication postpone section si nce transforms represented matrix stack actually stack matrix openg l function operating stack named glpushmatrix andglpopmatrix function parameter return value ope ngl keep track current matrix composition transforms applied calling function glscalef simply modiﬁes current matrix object drawn u sing glvertex function coordinate speciﬁed objec t transformed current matrix function aﬀects cu rrent matrix glloadidentity callingglloadidentity set current matrix identity transform r epresents change coordinate usual starting poin t series transformation function glpushmatrix called copy current matrix pushed stack note doe change current matrix just save copy stack glpopmatrix called matrix stack popped th e stack matrix replaces current matrix note tha tglpushmatrix andglpopmatrix occur corresponding pair glpushmatrix save copy current matrix corresponding glpopmatrix restores copy glpushmatrix corresponding glpopmatrix additional call function long properly paired usually glpushmatrix drawing object andglpopmatrix ﬁnishing object drawing s require additional pair call function example suppose want draw cube s har d draw face using let s transformation start function draw square position face cube fo r cube size face sit unit screen plane vertex function draw square function s parameter ﬂoating poi nt number range rgb color square void square float r float g float b r g b set color square glbegin gl triangle fan glend chapter opengl geometry make red face cube just need square consider right face perpendicular plane make right face start face rotate degree think rotating face red position right face green t illustration rotating red square xy z draw green right face cube glpushmatrix glrotatef square glpopmatrix call glpushmatrix andglpopmatrix ensure rotation applied square carry object drawn later th e face similar way rotating face coordinat e ax try visualize rotation need case combine nto function draw cube make interesting size cube par ameter void cube float size draw cube length size glpushmatrix save copy current matrix glscalef size size size scale unit cube desired si ze square red face glpushmatrix glrotatef square green right face glpopmatrix glpushmatrix glrotatef square blue face glpopmatrix glpushmatrix glrotatef square cyan face glpopmatrix glpushmatrix glrotatef square magenta left facechapter opengl geometry glpopmatrix glpushmatrix glrotatef square yellow face glpopmatrix glpopmatrix restore matrix state cube sample program us function draw cube let rotate cube pressing arrow key java version web version image cube rotated degree degree make right side visible complex example hierarchical modeling glpushmatrix matrix check opengl equivalent cart windm ill tion used example subsection version example program example hierarchical ic opengl mind transformation matrix function sglrotated glpushmatrix opengl webgl modern graph ic apis responsible managing transforms matrix quite likely using software library provides function ver y similar built opengl projection viewing previous section looked modeling transformation transforms fr om object coordinate world coordinate mputer graphic need know coordinate system transforms b etween discus section start overview various coordinate system review opengl geometry coordinate system coordinate actually use drawing object called object coordinate object coordinate chosen convenient o bject drawn modeling transformation applied set size orientation position object overall scene case hierarchical m odeling object coordinate larger complex object modeling trans formation ﬁrst applied vertex object coordinate build complete scene cal led world coordinate coordinate overall scene imaginary w orld creating modeling transformation map object coordinate wo rld coordinate real world depends standi ng direction looking t make picture scene know position viewer viewer think viewer s head tilted purpose opengl imagi ne viewer attached individual coordinate known eye coordinate coordinate viewer origin looking d irection negative positive direction pointing straight pointing right coordinate word eye coordinate coordinate actually want usefor drawing screen transform world coordinate eye coordinate called viewing transformation confusing think way free use y coordinate want world eye coordinate natural coordinat e making picture world seen viewer used diﬀerent coordina te world coordinate building world transform coor dinates eye coordinate ﬁnd viewer actually see transformation s viewing transform note way opengl doesn t track separate m odeling viewing transforms combined single transform whic h known modelview transformation fact world coordinate m ost important natural coordinate opengl doesn t repr esentation doesn t use internally opengl object eye coordin ate meaning opengl go directly object coordinate eye coordinate appl ying modelview transformation viewer t entire world ﬁts viewport rectangular region screen displ ay device image drawn say scene clipped edge o f viewport furthermore opengl viewer limited range eye coordinate point larger smaller clipped away rendered image course way viewing work real world s required use depth test opengl subsection volume space actually rendered image called view volume thing inside view volume make image thing view volume clip ped seen purpose drawing opengl applies coordinate transform map view volume acube cube centered origin extends t coordinate sys tem cube referred clip coordinate transformation eye coordinate clip coordinat e called projection transformation point haven t quite projected scene surface simply discarding rdinate needed provide depth information th needed depth test chapter opengl geometry note clip coordinate coordinate used f apply transformation modelview projection trans form identity handed coordinate positive direction th pointing screen westillaren t end thing actually drawn ther e aredevice coordinate coordinate actual drawing take pl ace physical display device computer screen ordinarily d evice coordinate pixel unit measure drawing region rectangle pixel rectangle called viewport viewport transformation take x y clip coordinate scale ﬁt viewport let s sequence transformation ti think primitive line triangle scene ppear image want make scene primitive go followin g sequence operation object coordinatesworld coordinateseye coordinatesclip coordinatesdevice coordinatesmodeling transformviewing transformviewport transformprojection transform modelview transform point deﬁne primitive speciﬁed object ordinate using method point ﬁrst subjected modelview transformati combination modeling transform place primitive wo rld viewing transform map primitive eye coordinate projection transformation applied map vie w volume visible viewer clip coordinate cube transformed primitive lie outside cube image processing stop primitive lie inside outside lie outside cl ipped away discarded remains processed viewport transform applied produce vice coordinate actually used draw primitive display device s just matter deciding color individual pixel o f primitive need consider transforms ho w use opengl viewport transformation simplest transforms viewport transform transforms xandyclip coordinate coordinate used display device spe cify viewport transform necessary specify rectangle device t scene rendered using glviewport function opengl provided drawing surface environ ment running jogl java glut library drawing su rface rectangular grid pixel horizontal size vertical size opengl us coordinate drawing surface put lower left y incr easing x increasing left right drawing surface ﬁr st given opengl viewport set entire drawing surface possib le opengl draw diﬀerent rectangle callingchapter opengl geometry glviewport x y width height x y lower left corner viewport drawing surf ace coordinate andwidthandheightare size viewport clip coordinate wil l mapped speciﬁed viewport note mean icular drawing limited viewport error viewport extend o utside drawing surface unusual set situation deliberat ely size drawing surface change user resizes window contains drawing surface opengl doe automaticall y change viewport match new size environment opengl run ning seesection information handled jogl glut glviewport used draw diﬀerent scene vie w scene drawing surface suppose example wa nt draw scene drawing surface pixel o utline simple glviewport draw left half drawin g surface draw scene glviewport draw right half dra wing surface draw second scene ﬁrst glviewport command establishes pixel viewport lo wer left corner lower left corner viewport t lower left corner drawing surface viewport ﬁlls left half drawing surf ace similarly second viewport lower left corner ﬁlls right half t drawing surface projection transformation weturnnexttotheprojectiontransformation likeanytran sform theprojectionisrepresented opengl matrix opengl keep track projection ma trix separately matrix represents modelview transformation s ame transform function asglrotatef applied matrix opengl need way k matrix function apply determined ope ngl state property called matrix mode value matrix mode constant glprojection glmodelview function glrotatef called modiﬁes matrix matrix modiﬁed depends current value matrix m ode value set calling function glmatrixmode initial value glmodelview mean want work projection matrix ﬁrst glmatrixmode gl projection want working modelview matrix m ust glmatrixmode gl modelview program generally set matrix mode glprojection set projection transformation immediately set matrix mode ba ck toglmodelview mean program sure tha t matrix mode glmodelview opengl geometry help understand projection remember imag e inﬁnite world view volume worl d visible image view volume determined combination v iewing transformation projection transformation viewing transform determi ne viewer located direction viewer facing doesn t say mu ch world viewer projection transform doe speciﬁes sha pe extent region view think viewer camera big invisibl e box attached camera encloses world camer view inside box view volume camera move world box move view volume change shape size box don t change shape size box correspond projection transform posit ion orientation camera correspond viewing transform just way saying mathematically opengl projection transformation transforms eye coordinate clip coordin ate mapping view volume clipping cube contains tha t visible image specify projection just mean specifying size shap e view volume relative viewer general type projection perspective projection andorthographic projection perspective projection physically realistic tha t show opengl display rectangle computer sc reen window actual world extend screen s show view taking picture world n ordinary camera perspective view apparent size object depends h ow far away viewer thing viewer seen fact ignoring clipping direction moment world view inﬁnite pyramid viewer apex pyramid side pyr amid passing side viewport rectangle opengl t actually pyra mid use depth test solve hidden surface problem dep th buﬀer store ﬁnite range depth value t represent entire range depth value inﬁnite pyramid theoretically view object certain rang e distance viewer image range distance speciﬁed tw o value nearandfar perspective transformation value po sitive number farmust greater near closer viewer neardistance farther away fardistance discarded doe appear rendered ima ge volume space represented image truncated py pyramid view volume perspective projection chapter opengl geometry eye near farview volume truncated pyramid near far clipping plane view volume bounded side plus t truncated pyramid plane called clipping plane lie wrong plane clipped away projection tran sformation map side thetruncatedpyramidineyecoordinatestothesixsidesoft heclippingcubeinclipcoordinates opengl setting projection transformation equi valent deﬁning view volume perspective transformation set view volume truncated pyramid obscure term shape frustum perspective transformation set glfrustum command glfrustum xmin xmax ymin ymax near far thelasttwoparametersspecifythe nearandfardistancesfromtheviewer asalreadydiscussed viewer assumed origin facing t direction negative eye coordinate near clipping pl ane far clipping plane notice minus sign ﬁrst parameter specify side pyramid xmin xmax ymin andymaxspecify horizontal vertical limit view volume near clipping plane example coordinate corner small end pyramid xmin ymax thexandylimits far clipping plane larger usually larger limit speciﬁed glfrustum command note xandylimits glfrustum usually symmetrical zero xmin usually equal negative xmaxandyminis usually equal negative ymax required possible asymmet rical view volume doe point directly center view matrix mode set glprojection work projection transformation glfrustum used code segment form glmatrixmode gl projection glloadidentity glfrustum xmin xmax ymin ymax near far glmatrixmode gl modelview glloadidentity ensures starting point identity transform t important glfrustum modiﬁes existing projection matrix replaci ng theoretically possible don t want t o try think happen combine projection transformation nto compared perspective projection orthographic projec tions easier understand orthographic projection world projected ont o image discarding thechapter opengl geometry type proj ection unrealistic viewer example apparent size o bject doe depend distance viewer object viewer wel l viewer visible image orthographic projection eful especially interactive modeling program useful true size ang le undistorted perspective fact s really clear mean say s viewer case orthographic projection orthograph ic projection opengl considered viewer viewer located ordinate origin facing direction negative theoretically rectang ular corridor extending inﬁnitely direction viewer n view perspective projection ﬁnite segment inﬁnit e corridor actually shown opengl image ﬁnite view volume rectangular cut inﬁnite corridor nearclipping plane farclipping plane value far greater near orthographic projection value nearis allowed negative putting near clipping plane vi ewer shown lower section illustration eye fareye near farview volume rectangular solid near far clipping plane orthographic pr ojection eye inside view volume case near clipping plane lie eye value near negative note negative value nearputs near clipping plane positive viewer orthographic projection set opengl using glorthomethod following form glortho xmin xmax ymin ymax near far ﬁrst parameter specify left right view volume note parameter nearandfar opengl geometry fact minimum view volume maximum case true minimum maximum turn nearandfarafter withglfrustum glorthoshould called matrix mode glprojection example suppose want view volume bo x centered origin containing x y andzvalues range accomplished wi th glmatrixmode gl projection glloadidentity glortho glmatrixmode gl modelview turn eﬀect glorthoin simple case exactly eﬀect ofglscalef projection just scale box wn factor s usually better think projection diﬀerent sort thing scaling minus sign zscaling factor projection revers dir ection transforming conventionally eye coordin ate opengl s default coordinate theglfrustum method particularly easy use library kno wn asglu eglulibraryincludesthemethod gluperspective easier way set perspective projection comma nd gluperspective fieldofviewangle aspect near far used instead glfrustum theﬁeldofviewangle vertical angle measured degree upper view volume pyramid d lower typical value range degree aspectparameter aspect ratio view width pyramid divided height value aspect generally set aspect ratio viewport t henearandfarparameters gluperspective meaning glfrustum modelview transformation modeling viewing like diﬀerent g conceptually opengl combine single transformation way distinguish principle diﬀerence purely conceptu al given transformation considered modeling transformation viewing transformation depending think signiﬁcant diﬀeren ce conceptually viewing transformation usually applies objec t scene object modeling transformation di ﬀerence principle seen similar graphic subsection let s think work example suppose model house ori gin facing direction positive suppose viewer positive looking origin viewer looking directly fro nt house apply modeling transformation house rotate degree transformation house facing positive dir ection viewer looking directly leftside house hand rotate viewer degree viewer negative whichchapter opengl geometry view leftside house net result transformatio n viewer end exactly view house transformation implemented opengl command glrotatef command represents modeling transfor mation rotates object degree viewing transformation rotates view er degree note eﬀect viewer inverse eﬀect object modeling viewing transforms related way examp le looking object foot left viewing transform object foot theright modeling transform case end sam e view object transformation represented opengl gltranslatef work scaling viewer shrink look viewer exactly world expanding modeling viewing transformation principle remain diﬀerent conceptually typically applied di ﬀerent point code general drawing scene following load dentity matrix starting point apply viewing transformation draw object scene modeling transformation remember op engl keep track transformation mod elview transform current sure step glmatrixmode glmodelview duringstep youwillprobablyuse glpushmatrix andglpopmatrix tolimiteachmodeling transform particular object loading identity matrix viewer defau lt position origin looking negative positive pointing upwards view suppose example like viewer defaul t location origin positive point operat ion exactly eﬀect moving world object contains unit n negative direction whichever operation performed viewer en d exactly position relative object operation implemented opengl command gltranslatef example suppose use comm ands glrotatef gltranslatef establish viewing transformation modeling tran sform command ﬁrst translate object unit positive rotate object degree object originally placing object unit directly viewer remember modeli ng transformation applied object order opposite order code w hat command viewing transformation eﬀect view invers e eﬀect object inverse translate rotate rotate t ranslate inverse undo rotation beforeyou undo translation eﬀect viewing transformation ﬁrst rotate view degree abou t leave viewer origin looking positive translate viewer backing viewer point obje ct pointchapter opengl geometry unit directly viewer think interpretation aﬀect view house start transformation aﬀects house viewer looking wel l far away house viewer located note way order viewing transformat ion applied asthe order occur code version section includes live demo help understand equivalence mode ling viewing picture taken demo visualizes view volume translu cent gray box scene contains cube inside view volume appear rendered image case projection perspective projection d view volume frustum picture rotating frus tum right viewing transformation rotating cube left m odeling transform read help text demo information demo diﬃcult set view combining rotation scal ings translation opengl provides easier way set typical view com mand opengl glu library glu library provides following convenient method fo r setting viewing transformation glulookat eyex eyey eyez refx refy refz upx upy upz method place viewer point eyex eyey eyez looking point refx refy refz viewer oriented vector upx upy upz point upwards viewer s view example position viewer negative unit origin looking origin positive dir ection pointing usual use glulookat outline typical display rou tine drawing image scene opengl possibly set clear color set glclear gl colorbufferbit gl depthbufferbit chapter opengl geometry possibly set projection glmatrixmode gl modelview glloadidentity glulookat eyex eyey eyez refx refy refz upx upy upz viewing transform glpushmatrix apply modeling transform draw object glpopmatrix glpushmatrix apply modeling transform draw objec t glpopmatrix camera abstraction projection viewing discussed using analog y acamera real camera used picture world graphic useful imagine using virtual camera thing setting viewing transform ation like positioning pointing camera projection transformation determ ines property camera ﬁeld view sort lens doe use cour se analogy break opengl respect real camera doesn t clipping written camera utility implement idea ca mera meant job setting projection view instead doing hand set property camera api available c java versi ons somewhat diﬀerent java version discus c implementation ﬁrst section basic information programming opengl c java example using camera program polyhedron viewer exam ple section note version camera use java cript simulator opengl simulator library api identical java api c camera deﬁned sample ﬁle corresponding header ﬁle documentation api header ﬁle use camera include start program compile program include list ﬁles want compile camera depends glu library c s standard math lib rary make sure library available compiled use camera cameraapply chapter opengl geometry set projection viewing transform drawin g scene calling function replaces usual code setting projection vie wing transformation leaf matrix mode set glmodelview remaining function api used conﬁgure ca mera usually initialization possible chang e conﬁguration time remember setting used ca llcameraapply available function include cameralookat eyex eyey eyez refx refy refz upx upy upz determines viewing transform just like glulookat default cameralookat camerasetlimits xmin xmax ymin ymax zmin zmax set limit view volume zmin zmax given respect view reference point eye xy limit measured distance view reference point near distance default camerasetlimits camerasetscale limit convenience method calling camerasetlimits limit limit limi t limit camerasetorthographic ortho switch orthographic perspective projection parameter perspective orthographic default perspective camerasetpreserveaspect preserve determine aspect ratio viewport respected parameter ignore respect viewport aspect ratio default preserve aspect ratio case default setting suﬃcient note par ticular cameralookat andcamerasetlimits work set view projection paramete r tocameralookat represent point world coordinate view refer ence point refx refy refz middle scene want render parameter camerasetlimits deﬁne box view reference point contain want appear image use jogl java camera api implemented cl as named camera deﬁned ﬁle camera meant use glpanel orglcanvas used opengl drawing surface use camer create object type cameraas instance variable camera new camera drawing scene opengl drawing context type note presence parameter necessary c required open gl drawing context jogl implemented object c version se t viewing projectionchapter opengl geometry transformation replace code woul d use purpose function conﬁguring camera java c method cameraobject parameter booleaninstead int eyex eyey eyez refx refy refz upx upy upz xmin xmax ymin ymax zmin zmax limit ortho ortho type boolea n preserve preserve ty pe boolean camera come simulated trackbal l allows user rotate view clicking dragging mouse display use glut c just need install mouse function mouse motion function b y calling glutmousefunc trackballmousefunction glutmotionfunc trackballmotionfunction function trackballmousefunction andtrackballmotionfunction deﬁned camera api declared documented trackball work modifying viewing transformation associated camera work cameraapply calledatthebeginningofthedisplayfunctiontosetthevie wingandprojectiontransformations install trackball use cameraobject jogl drawsurface wheredrawsurface component camera used polygonal mesh gldrawarrays drawn simple shape opengl section look complex shape represented way conven ient rendering opengl introduce new eﬃcient way draw opengl primit ives opengl directly render point line polygon fact modern opengl polygon used triangle polyhedron analog polygon represented exactly polyhedron face tha t polygon hand polygon available curved surface s surface sphere approximated polyhedron represented curve d surface approximated apolygonal mesh set polygon connected edg e polygon small approximation look like curved surface chapter lighting eﬀects used make polygonal sh look like curved surface like polyhedron problem represent set set triangle start deﬁning convenient way represent set data st ructure indexed face set thepolygonsinapolygonalmesharealsoreferredtoas face s asinthefacesofapolyhedron primary mean representing polygonal me h indexed face set ifs data ifs includes list vertex app ear mesh giving coordinate vertex vertex identiﬁed integer speciﬁes index chapter opengl geometry position list example consider house polyhedron vertex face vertex list polyhedron form vertex vertex vertex vertex vertex vertex vertex vertex vertex vertex order vertex completely arbitrary purpo se simply allow vertex identiﬁed integer polygonal face mesh just t o list vertex order going polygon ifs specify vertex b y giving index list example say triangular face pyramid polygon formed vertex vertex vertex complete data mesh giving list vertex index face face data fo r house remember number parenthesis index vertex list face face face face face face face face face order face listed arbitrary t freedom vertex face listed start vert ex ve picked starting vertex possible ordering corresponding possible direction circumference polygon examp le starting vertex ﬁrst face list speciﬁed ﬁrst possibility right case following r eason polygon viewed think having face facin g opposite direction turnschapter opengl geometry convenient consider face face polygon polyhedron like house face face outside polyhedron usual rule th e vertex polygon listed counterclockwise order looking f ace polygon looking face vertex listed clockwise ord er default rule used opengl face face flip vertex order clockwise vertex face data indexed face set represe nted pair dimensional array house version java c ould use double vertexlist int facelist case additional data ifs e xample want color face polyhedron diﬀerent color face add array facecolors hold color data element facecolors array doublevalues range giving rgb color component s face setup use following code draw po lyhedron using java jogl int facecolors set color face nu mber triangle fan int j j facelist int vertexnum facelist j index vertex j face double vertexcoords vertexlist vertexnum ver tex vertexcoords note vertex index used time face data ifs representation vertex represented face list single integer representation us memory space alternative t o write vertex time occurs face data house example ifs representation us number represent vertex face polygonal mesh opposed number alternative representation indexed face set advantage suppose wa nt modify shape polygon mesh moving vertex ea ch frame animation way morphing shape form ly position vertex changing way connected togethe r necessary update number vertex list value fac e list remain opengl geometry way store data ifs c exam ple array problematic use dimensional ar ray data case store vertex coordinate single array t length vertex array time number vertex data vertex numbernwill begin index nin array face list deal fact th face number vertex common solution add array data face c possible determine length array need variable store number vertex number face using representation data house int vertexcount number vertex double vertexdata int facecount number face int facedata adding facecolors array hold color data face use followin g c code draw house int j j index facedata array facecount facecolors color face number glbegin gl triangle fan facedata j generate vertex face num ber int vertexnum facedata j vertex number vertexdata array vertexdata vertexnum increment j past ended data fac glend note use c address operator example facecolors pointer element number thefacecolors array element ﬁrst color component value face number match parameter type c parameter pointer type easily draw edge polyhedron instead th e face simply using gllineloopinstead gltriangle fanin drawing code probably leaving color change interesting issue come wa nt draw face edge nice eﬀect run problem wi th depth test pixel edge lie depth pixel face discussed subsection depth test handle situation o pengl solution feature called polygon feature adjust depth n clip coordinate polygon order avoid having object exactly depth t o apply polygon oﬀset need set oﬀset callingchapter opengl geometry glpolygonoffset second parameter give oﬀset unit dete rmined ﬁrst parameter meaning ﬁrst parameter somewhat obscure valu e work case enable glpolygon offset fillfeature drawing face outline procedure glpolygonoffset glenable gl polygon offsetfill draw face gldisable gl polygon offsetfill draw edge sample program draw house number o f polyhedron us drawing code similar looked e including polygon oﬀset program example using camera trackba ll api discussed subsection user rotate polyhedron dragging t mouse programhasmenusthatallowtheusertoturnrenderingofedg esandfacesonandoﬀ plussome option java version program c version menu c version display data polyhedron created live demo version program sectio n line demo gldrawarrays gldrawelements opengl command seen far original opengl opengl added feature increase performance complaint original opengl large number function call needed draw primitive using function address issue opengl introduced function gldrawarrays andgldrawelements function used modern opengl including webgl look gldrawarrays ﬁrst diﬀerences c java version api c onsider c version ﬁrst deal change necessary java version t subsection using gldrawarrays data needed draw primitive including vertex coordinate color vertex attribute c packed array primitive drawn single gldrawarrays recall primitive gllineloopor agltriangles include large number vertex reduction number function call sub tantial usegldrawarrays store vertex coordinate primitive single array use array int ﬂoat ordouble coordinate vertex data array sa number pas parameter function order need tell opengl ﬁnd data calling void glvertexpointer int size int type int stride void array thesizeparameter number coordinate vertex provide number coordinate vertex typeis constant tell data type eachchapter opengl geometry number array possible value glfloat glint andgldouble constant provide match data type number array thestrideis usually meaning data value stored conse cutive location array case stridegives distance byte location data vertex location vertex thi s allow store data vertex coordinate array ﬁnal parameter array contains data listed type void c data type pointer point type data recall array varia ble c kind pointer just pas array variable fourth parameter example suppose want draw square set vertex array float coords glvertexpointer gl float coords addition setting location vertex coordinate s enable use array calling glenableclientstate gl vertexarray opengl ignores vertex pointer state e nabled use gldisableclientstate disable use vertex array finally order actua lly draw primitive function void gldrawarrays int primitivetype int firstvertex t vertexcount function corresponds use theprimitivetype tell primitive type drawn glquads orgltriangle strip primitivetypesthatcanbeusedwith glbegincanbeusedhere theparameter ﬁrstvertex isthe number ﬁrst vertex used drawing pri mitive note position given term vertex number corresponding array ndex vertex number time number coordinate vertex set t glvertexpointer vertexcount parameter number vertex used just glvertex called vertexcount time ﬁrstvertex zero vertexcount total number vertex array command drawing square n example gldrawarrays gl triangle fan data associated vertex addi tion vertex coordinate example want specify diﬀerent color ea ch vertex color vertex array specify th e location data calling void glcolorpointer int size int type int stride void rray work just like gvertexpointer need enable color array calling glenableclientstate gl colorarray setup gldrawarrays opengl pull color color array vertex time pull vertex coordina te vertex array later encounter kind vertex data coordin ate color dealt way let s draw standard opengl triangle drew using insubsection vertex triangle diﬀerent color use color array addition vertex arr opengl geometry float coords coor d vertex float color rgb value vertex glvertexpointer gl float coords set data type location glcolorpointer gl float color glenableclientstate gl vertexarray enable use array glenableclientstate gl colorarray gldrawarrays gl triangle use vertex starting vertex practice code place th e function doe actual drawing gldrawarrays display routine draw image rest display routine example initialization routine function gldrawelements similar gldrawarrays designed use data format similar indexed face set gldrawarrays opengl pull data enabledarraysinorder thenvertex andsoon gldrawelements youprovidealistofvertexnumbers openglwillgothrough t helistofvertexnumbers pulling data speciﬁed vertex array advantag e come indexed face set fact vertex reused sev eral time usegldrawelements draw primitive need array store vertex numb er number array bit integer supposed unsigned integer array regular positive integer work need array store vertex coordinate vertex data en able array way gldrawarrays using function glvertexarray andglenableclientstate actually draw primitive function void gldrawelements int primitivetype vertexcount dat atype void array primitivetype primitive type gllines vertexcount number vertex drawn datatype speciﬁes type data array arrayis array hold list vertex number datatype given constant glunsigned byte glunsigned short orglunsigned intto specify bit integer respectively example draw cube draw face th e cube primitive typeglquads need vertex coordinate array vertex nu mbers face array use color array ve rtex color vertex color interpolated pixel face just like triangle code used draw cube neces sarily program float vertexcoords coordinate vertex o f cube float vertexcolors rgb color value vert ex int elementarray vertex number face chapter opengl geometry glvertexpointer gl float vertexcoords glcolorpointer gl float vertexcolors glenableclientstate gl vertexarray glenableclientstate gl colorarray gldrawelements gl quad gl unsigned int elementarray note second parameter number vertex number quad thesampleprogram usesthiscodetodrawacube itdraws second cube using gldrawarrays java version need read subsection understan d javascript version data buﬀers java ordinary java array suitable use gldrawelements andgldrawarrays partly format data stored partl y ineﬃciency transfer data java array graphic proces sing unit problem solved using direct nio buﬀers term nio refers package contains class buﬀer case object class subclass floatbuﬀer orintbuﬀer finally direct mean buﬀer isoptimizedfordirecttransferofdatabetweenmemoryando array nio buﬀer numbered sequence element type floatbuﬀer example contains numbered sequence value type ﬂoat subclass buﬀerfor java s primitive data type boolean nio buﬀers used jogl place array used c api example jogl following glvertexpointer method public void glvertexpointer int size int type int stride buffer buffer parameter diﬀers c version buﬀer c type floatbuﬀer intbuﬀer ordoublebuﬀer type buﬀer match typeparameter method function glcolorpointer work way gldrawelements take form public void gldrawelements int primitivetype vertexcou nt datatype buffer buffer buﬀercan type intbuﬀer shortbuﬀer orbytebuﬀer match datatype unsigned int unsigned short orunsigned byte class contains static utility method working direct nio buﬀers easiest use method create buﬀer java array example method array take ﬂoatarray parameter creates floatbuﬀer length containing data array method used create buﬀers sample program example float vertexcoords coordinate vertex cube int elementarray vertex number face chapter opengl geometry buffer use glvertexpointer gldrawelements floatbuffer vertexcoordbuffer buffer vertexcoords intbuffer elementbuffer e lementarray buﬀers used drawing cube float vertexcoordbuffer quad unsigned int elementbuffer therearealsomethodssuchas n whichcreatesa floatbuﬀer length remember nio buﬀer like array simply linear sequence element given type fact just array possible refer item buﬀer index position sequence suppose buﬀeris variable type floatbuﬀer ii intandxis aﬂoat x copy value xinto position number iin buﬀer similarly used retrieve value index iin buﬀer method make possible work buﬀers way work array display list vbos opengl drawing command considered far unfortunate ineﬃciency object going drawn ce command data fordrawingthatobjectmustbetransmittedtothegpueachti metheobjectisdrawn itshould possible store information gpu r eused retransmitting look technique doing display list andvertex buﬀer object vbos display list original opengl b ut modern opengl api vbos introduced opengl important modern opengl discus brieﬂy consid er fully webgl display list useful sequence opengl com mands used time display list list graphic command da ta used command display list stored gpu content displa y list transmitted gpu list created called key point calling list requires opengl command li st command executed command transmitted c pu graphic card power hardware acceleration used t o execute command highest possible speed note calling display list twice result diﬀer ent eﬀects eﬀect depend opengl state time display list ed example display list generates geometry sphere draw sphere d iﬀerent location long diﬀerent modeling transforms eﬀect time list called list produce sphere diﬀerent color long drawing color ch anged call list want use display list ﬁrst ask int eger identify list gpu command listid glgenlists return value intwhich identiﬁer list parameter glgenlists int usually actually ask list id s chapter opengl geometry parameter tell want list id secutive integer listais return value glgenlists identiﬁers list lista ve allocated list way store comman d listidis id list code form glnewlist listid gl compile opengl command stored list glendlist parameter glcompile mean want store command list execute use alternative parameter glcompile andexecute command executed immediately stored th e list later reuse created display list way t list command glcalllist listid eﬀect command tell gpu execute list th stored tell graphic card list longer needed ca lling listid second parameter method play role s parameter glgenlists allows delete sequentially numbered list deleting list allows gpu reuse memory use d list vertex buﬀer object diﬀerent approach reusing inf ormation store data command vbo similar array fact essen tially array stored gpu eﬃciency reuse opengl comm ands create delete vbos transfer data array cpu vb o gpu conﬁgure gldrawarrays andgldrawelements data vbo instead ordinary array c nio buﬀer jogl an send data gpu use number time discus use vbos o f opengl sample program let compare diﬀerent tech niques rendering complex image c version program java version program draw sphere arranged cube sphere diﬀerent color r ed color varying axis green second axis amou nt blue sphere vertex coordinate comput ed using math function sin andcos program allows select ﬁve diﬀerent renderin g method show time take render sphere using selecte d method java version menu selecting method c version r image menu use mouse rotate cube sphere bo th better view generate data computing average render time th e ﬁve rendering technique draw recomputing vertex data remarkably foolish way draw sphere recomputing vertex coordinate time sph ere drawn draw precomputed data vertex coordinate computed stored array sphere drawn using data used call glvertex taken array recomputed time y opengl geometry list display list created containing command data needed draw sphere sphere drawn single display list array data sphere stored vertex array java nio buﬀer sphere drawn using gldrawarrays using technique discussed earlier section data t o sent gpu time sphere drawn vbos gldrawarrays used draw sphere time data stored vbo instead array data ly transmitted gpu experiment expected display li t vbos gave shortest rendering time little diﬀerence interesting diﬀerences result c version result j ava version fact function call c eﬃcient meth od call java try program computer compare rendering t imes various rendering method linear algebra linear algebra branch mathematics fundamental computer graphic study vector linear transformation matrix encountered topic insubsection context section look m closely extend discussion dimension essential know mathematical detail th covered section handled internally opengl software library need familiar concept terminology th especially true modern opengl leaf detail program software library handle detail need know t o use library want skim section use later reference vector vector math vector quantity length direction vect visualized arrow long remember length direction t arrow relevant speciﬁc location irrelevant vector u sed computer graphic represent direction direction object light urce direction surface face case interested d irection vector length visualize vector va arrow starting origin ending pointp certain extent identify long remember arrow starting point used represent ifphas coordinate b c use coordinate think b c vector value ofarepresents changein starting point arrow ending point bi change ci change example point x y z coordinate vector dx dy dz point coordinate specify po sition space xyzcoordinate vector coordinate specify change x y andzcoordinates vector represent vector arrow tha t start origin thenchapter opengl geometry head arrow just ll visualize vector arrow start point case ad arrow point distinction point vector subtle purpose distinction ignored purpose important ll sequence number treat coordinate vec tor point whichever appropriate context basic property vector length term coordinate length vector x y z given sqrt just pythagorean theorem dimension vi vector length denoted length vector called norm considering vector concept formu la similar dimension vector length particularly important cal ledunit vector x y z vector exactly vector point direction vector given wherelengthis length dividing vector length said normalize vector result unit vector point direction s original vector vector added given vector sum deﬁned sum geometric meaning v vector sum obtained placing starting point ending point sum vector starting point ending point remember vector length direction set position multiplication complicated obvious deﬁnition product vector similar deﬁnition sum doe geometric m eaning rarely used kind vector multiplication tha t used scalar product dot product cross product x y z vector ai number scalar product ofaandvis deﬁned av x y z assuming ai positive vi zero avis vector point direction v length atimes length ifais negative avpoints opposite direction fromv anditslengthis thistypeofproductiscalledascalarproduct number like ai referred scalar multiplic ation scalesvto new length given vector thedot product denoted deﬁned opengl geometry notethatthedotproductisanumber notavector thedotpro ducthasseveralveryimportant geometric meaning note length ve ctorvis just square root furthermore dot product vector property co angle whereangleis measure angle particular case unit vector length dot product unit vector simply cosine angle furthermore cosine angle zero vector perpendicular dot p roduct zero property dot product particularly important li ghting calculation eﬀect light shining surface depends angle lig ht make surface scalar product dot product deﬁned dimensio vector type product called cross product important geometric meaning vector cross product denoted vector deﬁned vector zero directionorinexactlyoppositedirections assuming thenitisperpendicular furthermore vector rule coordinate curl ﬁ ngers right hand thumb point direction perpendicular unit vector cross product unit vector perpendicular finally iwillnotethatgiventwopoints thediﬀerence deﬁned diﬀerence vector visualized arrow t hat start end suppose vertex polygon vector plane polygon cross product vector perpendicular polygon x try visualize vector perpendicular triangle obtained taking cross product vector lie side triangle vector said normal vector polygon normal vector length called aunit normal unit normal important lighting calculation nd useful able calculate unit normal polygon opengl geometry matrix transformation matrix just array number matrix withrrows ccolumns said aandbare matrix number column ai equal number row b thenaandbcan multiplied matrix product ab ifais bi abis particular multiplied vector thought ai vi vector ndimensions thought product avis vector product matrix aand vector x y z displayed like y x y z x y z x y z note coordinate product avis simply dot product row matrix aand vector using deﬁnition multiplication vector ma trix matrix deﬁnes transformation applied vector yield ano ther vector transformation deﬁned way linear transformation t hey main object study linear algebra linear transformation lhas property vector vandw l l v l w number s l sv sl v rotation scaling linear transformation trans lation nota linear tion include translation widen view tr ansformation include aﬃne transformation aﬃne transformation deﬁned rou ghly linear transformation followed translation geometrically aﬃne transfor mation transformation preserve parallel line line parallel image aﬃne transformation parallel line computer gr aphics interested aﬃne transformation dimension s ﬁrst odd narrow view linear moving fou rth dimension note ﬁrst aﬃne transformation dimensi ons transforms vector vector given formula formula express linear transformation given mul tiplication matrix followed translation thexdirection theydirection thezdirection trick replace vector x y z vectorchapter opengl geometry x y adding fourth coordinate instead matrix use matrix vector multiplied matrix result precis ely vector instead applying aﬃnetransformation vector apply lineartransformation vector pointless w hat opengl computer graphic system aﬃne transformat ion represented matrix row dimensional vector changed dimensional vector adding ﬁnal coordi nate result aﬃne transformation important computer g raphics implemented multiplication vector matrix identity transformation leaf vector unchang ed corresponds multiplication bytheidentity matrix whichhasonesalongitsdescendingdiagonalandzeroselse opengl function glloadidentity set current matrix identity matrix n opengl transformation function gltranslatef tx ty tz eﬀect multiplying current matrix matrix represents t ransformation multiplication right mi current matrix ti matrix represents transformation current matrix set pr oduct matrix mt record following illustration show identity matrix th e matrix corresponding various opengl transformation function tx ty tz co d d sin d co d matrix gltranslatef tx ty tz glscalef sx sy sz glrotatef co d sin d d co d glrotatef co d d sin d co d glrotatef possible use arbitrary transformation matri x opengl using function glmultmatrixf t orglmultmatrixd t parameter t array number type ﬂoatordouble representing transformation matrix array imensional array length item array number tran sformation matrix stored inchapter opengl geometry order number ﬁst column f ollowed number second column function multiply curre nt matrix matrix t right use example implement ar transform easy represent sequence scale rotation transla tions homogeneous coordinate ﬁnish section bit mathematical implementation transformation common transformation com puter graphic aﬃne transformation case perspective projectio n projection transformation aﬃne perspective projection object appear smaller move farther away viewer property aﬃne trans formation express aﬃne transforms preserve parallel line parallel line converge distance perspective projection surprisingly represent perspective project ion matrix provided willing stretch use coordinate represented vector vector fou rth coordinate allow fourth coordinate requiring coordinate fourth coordinat e w consider coordinate x y z w represent vector note consistent previous usage considers x y represent x y z fourth coordinate zero correspondin g vector possible think x y representing point inﬁnity direction x y z coordinate x y z w used way referred homogeneous coordinate use homogeneous coordinate matrix b e used transform dimensional vector including matrix row s transformation represented way pr ojection transformation perspective projection fact opengl doe s internally represents point vector using homogeneou s coordinate represents transformation matrix specif y vertex using homogeneous coordinate example command x y z w value w generates point fortunately deal homogeneous coordinate directly t real exception homogeneous coordinate used surprisingly conﬁguring opengl lighting ll chapter using glut jogl opengl api graphic support thing like window eve nt opengl depends external mechanism create drawing surface draw windowing apis support opengl library used produce complete application look cr apis make possible use opengl application java simple application written c possible win dowing api glut opengl utility toolkit glut small api used cr eate window serve simple frame opengl drawing surface support handling mouse andchapter opengl geometry keyboard event basic animation doe su pport control button input ﬁelds doe allow menu pop resp onse mouse action original version glut longer actively supported version called freeglut http recommended instead example version included linux actually freeglut detail freeglut ap http jogl java opengl collection class make possibl e use opengl java application jogl integrated swing awt th e standard java graphical user interface apis jogl create java gui component s draw using opengl opengl component used java application way use canvasorjpanelas drawing surface like thing java jogl immensely complicated use fairly s imple application jogl standard java s home web site http section contains information started using g lut jogl assuming know basic programming c java brieﬂy discusses javascript library written simulate sub et opengl used book using glut work glut need c compiler copy o pengl glut freeglut development library t tell exactly t hat mean computer computer run linux mint example free c mpiler gcc available opengl development installed package mesa linux implementation opengl contains complete c program us glut compile using command s gcc glutprog glutprog tell compiler use glutprog output ﬁle run normal executable ﬁle optio n executable ﬁle named option tell comp iler link program glut opengl library character s lower case l option linker won t recognize glut opengl function program us glu library compiling require option us math library need option program require s additional ﬁles included example sample program depends compiled linux gcc compiler using c ommand gcc cube sample program used starting point writing program use glut doesn t open wind ow program contains framework needed opengl drawing including doing anim ation responding mouse keyboard event setting menu source code ntains comment tell use window consider installing wsl window subsyste m linux http write soon include ability work gui program wsl oﬃcial micros oft let installchapter opengl geometry version linux inside window option olde r open source project cygwin http using cygwin installed package xinit star ting window startxwin command able compile run opengl examp le textbook cygwin terminal window using command u se linux macos situation complicated opengl deprecated favor metal apple s proprietary api wr ite opengl used macos apple s xcode developer tool exampl e textbook require modiﬁcation work xcode tool opengl nd glut library loaded way mac linux modiﬁed prog ram use macos source folder ﬁle folder information glut library make easy write basic opengl applicat ion glut us function write function handle ev ents occur display need redrawn user click mouse presse s key keyboard use glut need include header ﬁle start source code ﬁle us general opengl ader ﬁle header ﬁles installed standard location folder named gl note folder diﬀerent omitted entirely progra m usually begin like include include computer saying include actually includes subset freeglut corresponds glut access freeglut w ould substitute include depending feature us program need header ﬁles include include program s main function contain code initialize glut cre ate open window set event handling registering function called response various event setup function run glut loop function wait event pro cesses calling function registered handle event loop run program end happenswhentheuserclosesthewindoworwhentheprogramca llsthestandard exit function set function glut us fact th c possible pas function parameter function exampl e ifdisplay function called draw content window pr ogram use command glutdisplayfunc display install function event handler display t display event occurs content window need redrawn including window ﬁrst opened note thatdisplaymust previously deﬁned function param eters void display opengl drawing code go chapter opengl geometry mind s function make opengl display function set display function calling glutdisplayfunc display glut function work similar way e xcept need parameter lot possible function w ill cover let s jump right look possible main routine glut program us common event handler int main int argc char argv glutinit argc argv required initialization glutinitdisplaymode glut double glut depth glutinitwindowsize size display area p ixels glutinitwindowposition location screen c oordinates glutcreatewindow opengl program parameter t window title glutdisplayfunc display called window need b e redrawn glutreshapefunc reshape called size windo w change glutkeyboardfunc keyfunc called user type cha racter glutspecialfunc specialkeyfunc called user pre ss special key glutmousefunc mousefunc called mousedown mou seup event glutmotionfunc mousedragfunc called mouse dr agged glutidlefunc idlefun called ev ents glutmainloop run event loop function r eturns return line actually reached ﬁrst ﬁve line necessary initialization nex t seven line install event handler glutmainloop run glut event loop discus function s used ﬁrst glut function glutinit parameter shown note argcandargvrepresent argument program passing glutinit allows process certain argument ar e recognized glut won t discus argument function sglutinitwindowsize glutinitwindowposition obvious thing size given pixel window po ition given term pixel coordinate computer screen w ith upper left corner screen function glutcreatewindow creates window note happen window glutmainloop called additional function called main initialization global variable ope ngl state required program opengl initialization ingglutcreatewindow callingglutmainloop turning function used main glutinitdisplaymode glut double glut depth called deﬁne characteristic opengl drawing context paramet er speciﬁes feature like opengl context feature repre sented constant ed parameter glutdepth say depth buﬀer created depth test won t work doing grap hics wouldn t include asks double buﬀering mean drawing actually copy copied sc reen seen copying byglutswapbuffers whichmustbe called end display function useglutsingle instead glutdouble getsingle buﬀering case glflush end display function instead glutswapbuﬀers example book use glutdouble chapter opengl geometry glutdisplayfunc display display function contain opengl drawing code completely redraw scene similar paintcomponent java swing api display function dec lared void function parameter void display glutreshapefunc reshape reshape function called user change size window parameter tell new width heig ht drawing area void reshape int width int height example use method set projectio n transform projection depends window size reshape function req uired provided set opengl viewport window used drawing calling glviewport width height viewport set automatically reshape function s peciﬁed glutkeyboardfunc keyfunc keyboard function called user type character b space called spe cial key arrow key produce character pressed keyboard fu nction parameter type unsigned char represents character typed tw ointparameters location mouse key pressed n pixel coordinate upper left corner display area deﬁnitio n key function form void keyfunc unsigned char ch int x int y make change program s data requ ire display redrawn glutpostredisplay similar calling repaint java better callglutpostredisplay display function directly note th s possible opengl drawing command directly ing function probably make sense using single buﬀering th callglflush make sure drawing appears screen glutspecialfunc specialkeyfunc special function called user press certain special key arrow key home key parameter integer code key pressed plus mouse posi tion key pressed void specialkeyfunc int key int x int y glut constant represent possible key code incl udingglutkeyleft glutkeyright glutkeyup andglutkeydown arrow key glutkeyhomefor home key example check user p ressed left arrow key testing key glut keyleft glutmousefunc mousefunc mouse function called user press user release button mouse parame ter tell occurred function generally look like void mousefunc int button int buttonstate int x int y buttonstate glut handle mousepressed event buttonstate glut handle mousereleased event chapter opengl geometry ﬁrst parameter tell mouse button pressed leased value constant glutleftbutton left glutmiddle button middle glutrightbutton right mouse button parameter tell position mouse mouse position given pixel ordinate left corner display area y increasing glutmotionfunc mousedragfunc motion function called user move mouse dragging mouse button pre ssed user press mouse opengl window function continue called mouse move outside window mouse release event s ent window function parameter specify new mouse positio n void mousedragfunc int x int y glutidlefunc idlefunction idle function called glut event loop event waiting processed idl e function parameter called possible periodic interval gl ut timer function schedule function called speciﬁed d elay set timer gluttimerfunc delayinmilliseconds timerfunction use rselectedid deﬁne timerfunction void timerfunction int timerid parameter timerfunction called integer passed parameter gluttimerfunc want use gluttimerfunc animation timerfunction end gluttimerfunc glut window doe menu bar possible add hidden popup menu window menu appear response mouse clic k display set triggered left middle right mouse bu tton menu created using function glutcreatemenu menuhandler parameter function called user sele ct command menu function deﬁned parameter type intthat identiﬁes command selected void menuhandler int commandid menu created command added menu calling function glutaddmenuentry commandid ﬁrst parameter string appear menu second intthat identiﬁes command integer passed function user selects t command menu finally function glutattachmenu button attache menu window parameter speciﬁes mouse button trigger menu possible value glutleftbutton glutmiddle button andglutrightbutton far tell mouse click used trigger popup menu mouse click notalso produce function note glutaddmenuentry doesn t mention menu menudoesn t mention menu window glutcreatemenu menu created current menu glut st ate entryis called add command current menu glutattachmenu called attache current menu current window se t glutcreatewindow opengl geometry consistent opengl state machine philo sophy function act modifying current state example suppose want let user set ground color display need function carry command add menu example deﬁne function domenu int commandid commandid glclearcolor black commandid glclearcolor white commandid glclearcolor dark blue commandid exit end program glutpostredisplay redraw display new ba ckground color function create menu funct ion called main calling glutcreatewindow function createmenu glutcreatemenu domenu domenu response nu command glutaddmenuentry black background glutaddmenuentry white background glutaddmenuentry blue background glutaddmenuentry exit glutattachmenu glut rightbutton menu s possible submenu menu won t discus p rocedure look sample program example using submenu addition window event handling glut includes function drawing basic shape sphere cone regular polyhedron h function shape solid version draw shape solid object wireframe version draw look like s wire mesh wirefr ame produced drawing just outline polygon make object exa mple function void glutsolidsphere double radius int slice int stack s draw solid sphere given radius centered igin remember just approximation sphere polygon appro ximation sphere divided line longitude like slice orange lin e latitude like stack disk parameter slicesandstackstell subdivision use typical value number need good approximation fo r sphere depends size sphere screen function glutwireframesphere parameter draw line latitude longitude function fo r cone cylinder torus doughnut similar void glutsolidcone double base double height int slice int stack void glutsolidtorus double innerradius double outerrad ius chapter opengl geometry int slice int ring void glutsolidcylinder double radius double height int slice int stack note cylinder available freeglut java original glut library torus innerradius size doughnut hole function void glutsolidcube double size draw cube speciﬁed size function ot regular polyhedron parameter draw object ﬁxed size glutsolidtetrahedron glutsolidoctahedron glutsoliddodecahedron glutsolidicosahedron glutsolidteapot size draw famous object used example h ere s teapot look like wireframe version shape available f example glutwireteapot size draw wireframe teapot note glut shape come mal vector required lighting calculation teapot come texture coordinate required applying texture ob jects glutalsoincludessomelimitedsupportfordrawingtextina nopengldrawingcontext won t discus possibility check api cumentation interested ﬁnd example sample program using jogl jogl framework using opengl java program l arge complex api support version opengl fairly easy use f basic application use jogl later program book tested wi th version sample program used starting point writing opengl program using jogl doesn t exc ept open window program contains framework needed opengl drawing including doing animation responding mouse keyboard event setting men source code contains comment tell use use jogl need ﬁles containing java cl ass jogl addition need native library ﬁles native library collection routine called java t written java routine native library work kind computer nee d diﬀerent native library forchapter opengl geometry type computer program used n ative library jogl stored additional ﬁles available se veral version diﬀerent computer example linux intel amd cpu need unfortunate diﬀerent version diﬀerent platform people don t know exactly wh ich using doubt version jogl wil l ﬁgure use jogl software http download jar ﬁles recent release near end list http click release click list jar ﬁles download corresponding native library ﬁles available b site native library common platform http jogl ﬁles freely redistributabl e according license jogl development create directory somewh ere computer hold jar ﬁles place jogl jar ﬁles director y native library jar ﬁles platform having extra native lib rary jar ﬁles doesn t hurt long one need possible jogl development command line tell javac command ﬁnd jogl jar ﬁles cl asspath option thejavaccommand example working linux macos d jar ﬁles happen directory working m ight say javac ava s similar window classpath us instead separate item list javac ava essential period end classpath whic h make possible java ﬁnd ﬁles current directory jar ﬁles current directory use path name relative path name ﬁles exampl e javac running program javacommand exactly similar example java myopenglprog note don t explicitly reference native l ibrary jar ﬁles just directory jogl jar ﬁles java development using eclipse ide http development jogl eclipse conﬁgure e clipse information jar ﬁles start eclipse want create user library contain jar ﬁles open eclipsepreferences window select java build path user library left click new button right enter jogl like user library make sure new user libra ry selected list library click add external jar button ﬁle selection box navigate directory contains jogl jar ﬁles select jar ﬁles needed jogl chapter opengl geometry need add native library jus t need directory jogl jar ﬁles click o pen selected jar added user library add t ime don t know select multiple ﬁles look like click user library created h ave use jogl project use opengl project create new java project ual eclipse asked want create ﬁle t project say don t create sample program textbook use java module r new project project explorer view select build path conﬁgu build path menu project property dialog java build path selected left access property command project menu select library tab window click cl as path library tab select click add library button right popup window select user library click window select y jogl user library click finally click apply close main prope rties window project set jogl development jogl er library listed project project explorer time want st art new jogl project setup add jogl user library th e build path project withallthatsetupoutoftheway stimetotalkaboutactu allywritingopenglprograms withjava withjogl wedon thavetotalkaboutmouseandkey boardhandlingoranimation way java swing progr need know class jogl api need gui component draw using ope ngl usegljpanel subclass jpanel gljpanel use program based swing api alternative glcanvas subclass older awt class canvas chapter opengl geometry class deﬁned package class need basic opengl programming package jogl us java s event framework manage opengl drawing ntexts deﬁnes custom event listener interface gleventlistener manage opengl event draw agljpanel opengl need create object implement gleventlistener interface register listener gljpanel thegleventlistener interface deﬁnes following method public void init glautodrawable drawable public void display glautodrawable drawable public void dispose glautodrawable drawable public void reshape glautodrawable drawable int x int y int width int height thedrawable parameter method tell opengl drawing surfa ce involved reference gljpanel glautodrawable interface implemented gljpanel opengl drawing surface init method place opengl initialization according documentation ac tually called time opengl context need recreated reason init used initialization shouldn t dispose method called chance cleanup opengl drawing c ontext destroyed reshape method called window ﬁrst open th e size gljpanel change opengl s glviewport function called automatically reshape called won t need usually won t need wr ite code dispose reshape satisfy deﬁnition gleventlistener interface thedisplay method actual drawing wil l work ordinarily clear drawing area mpletely redraw scene minute study outline minimal jogl program cre ate agljpanel serf gleventlistener import import import import public class joglprogram extends gljpanel implement glev entlistener public static void main string args jframe window new jframe jogl program joglprogram panel new joglprogram panel onclose true public joglprogram setpreferredsize new dimension addgleventlistener chapter opengl geometry method gleventlistener interfa ce public void init glautodrawable drawable called panel created gl add initialization code public void display glautodrawable drawable called panel need drawn gl add drawing code public void reshape glautodrawable drawable int x int y int width int height called user resizes window public void dispose glautodrawable drawable called panel disposed point thing need know e opengl function program jogl opengl function collected int o object type diﬀerent class diﬀerent version opengl opengl functionality later version compatible o bject type opengl graphic context way object type graphic context ordinary java drawing statement gl program obtains drawing context glautodrawable gljpanel program variable course glor conventional using opengl function jogl s c function method object gl example glclearcolor r g b r g b redundant little annoying used t o opengl constant gltriangles static member example gltriangles triangle jogl parameter list opengl function c api case exception function parameter jogl parameter s ordinary java array extra integer parameter added position th e data array example draw triangle jogl vertex coordinate array chapter opengl geometry float coords triangle coords vertex data start ndex coords second vertex data start index coords vertex data start ndex biggest change jogl api use nio buﬀers inst ead array function asglvertexpointer discussed subsection subsection texture image special treatment jogl jogl api includes class named glutthat make glut s function available java don t need glut s window eve nt function java shape function included class glutis deﬁned package draw shape using class need create object o f type glut s necessary make use program glut glut new glut method object include fun ctions glut c api name parameter example don t know instance method object rath er static method class logically need object glu library available class work similarly glut create object typ eglu glu function available method object encounte red glu function glulookat andgluperspective discussed section example glu glu new glu javascript library written accompany support textbook implement subset opengl discussed chapter andchapter display list subsection used demo appear version o f chapter sample program discus ed chapter available javascript version use like experiment opengl don t wan t trouble setting c java environment support opengl pro gramming consider notethat glsimismeantforexperimentation practice application opengl api implemented essentiall y c api detail semantics diﬀerent urse technique creating drawing surface opengl drawing context speciﬁc t o javascript diﬀer used glut opengl geometry use need create html document canvas element serve drawing surface html ﬁle import script directory html ﬁle script create opengl drawing context use javascript com mand glsimuse canvas wherecanvasis string giving idof canvas element javascript dom object corresponding canvas element created drawing context way opengl command apply c anvas run program just need open html document web browser su pports webgl easiest way started programming modify prog ram exists sample program fromsubsection minimal example sampleweb page canbeused asastartingpoint writing longer program use provides fra mework doing opengl drawing support animation mouse keyboard event th e code contains comment tell use documentation glsim j library ﬁles web site textbook d web site download folder named glsiminside opengl light material goal computer graphic physical realism making imag e look like photograph reality th e goal example scientiﬁc visualization goal use computer graphi c present information accurately clearly artist use computer graphic create ab tract realistic art realism major goal visible e computer graphic video game movie advertising important aspect physical realism lighting pl ay light shadow way light reﬂects diﬀerent material way ca n bend diﬀracted pass throughtranslucentobjects thetechniquesthatareusedt oproducethemostrealisticgraphics factor account goal computer graphic speed opengl particular designed graphic time available rendering image f raction second animated movie s ok take hour render frame video game expected render frame second e ven incredible speed modern computer graphic hardware compromise necess ary speed thirty year ago opengl new compromise l ot bigger inthischapter y ouwilllearnhowtoconﬁgure light source assign material property objec t material property determine object interact light learn apply image surface texture support light material texture op engl relatively crude incomplete today s standard concept u s serve foundation modern graphic signiﬁcant extent e ven realistic computer graphic introduction lighting lighting important consideration realistic graphic t goal simulate light source way light emit interacts object scene lighting calculation disabled default ope ngl mean opengl applies color vertex simply us current color va lue set function glcolor order opengl lighting calculation need enable lighting callingglenable gllighting s ﬁnd object completely black want turn s ome light property surface determine interacts l ight referred opengl light material material surface surface diﬀerent material property study opengl api light material ge neral idea light material property need understand idea s introduced section postpone discussion lighting actually op engl section light material light strike surface reﬂected exa ctly reﬂects depends complicated way nature surface callin g material property surface opengl complexity y general type reﬂection specular reﬂection anddiﬀuse reﬂection type reﬂection important graphic system section modern view material viewerincoming ray lightviewer see ection just point viewerincoming ray lightl om point surface reach viewer ection d e ection perfect specular reﬂection incomin g ray light reﬂected surface intact reﬂected ray make angle th e surface incoming ray viewer reﬂected ray viewer exactl y right position path reﬂected ray entire surface illuminated light source viewer reﬂection light source t hose point surface geometry right reﬂections referred specular highlight practice think ray light reﬂected single perfec t ray cone light b e f geiection jk m oiewer center conesp p s q r t u q r l rewet x u x y zincoming ray lightoiewer farther center see intense rewet x u x y z specular reﬂection shiny surface produce n arrow cone reﬂected light specular highlight material small sharp duller surface produce wider conesofreﬂectedlightandbigger fuzzierspecularhighli ghts inopengl thematerialproperty determines size sharpness specular highligh t called shininess shininess opengl number range number increase s specular highlight smaller image show sphere diﬀer th e value shininess material property chapter opengl light material sphere left shininess lead n ugly specular highlight cover entire hemisphere going left right shininess increase sphere pure diﬀuse reﬂection incoming ray light scatter ed direction equally viewer reﬂected light point surfac incoming light arrives parallel ray evenly illuminate surface s urface appear viewer evenly illuminated diﬀerent ray strike surface diﬀerent angle come nearby lamp surface curved t illumination point depends angle ray hit surface t point angle line point user light strike surface light absorbe d reﬂected diﬀusely reﬂected specularly reﬂection diﬀerent diﬀerent wavelength degree material reﬂect s light various wavelength constitutes color material m aterial diﬀerent diﬀuse color thattellshowthematerialreﬂectslightdiﬀusely anda specular color tell reﬂects light specularly diﬀuse color basic color object specular color determines color specular highlight diﬀuse specular color example true metallic surf ace diﬀerent example plastic surface white specular hi ghlights matter diﬀuse color demo version section let user experiment material property discus sed far demo opengl go fact color ssociated material color ambient color material tell surface reﬂects ambient light ambient light refers general level illumination tha t doe come directly light source consists light en reﬂected time longer coming particular directi ambient light shadow absolutely black fact ambient light cru approximation reality multiply reﬂected light better ignoring mult iple reﬂections entirely ambient color material determines reﬂect various wav elengths ambient light ambient color generally set diﬀuse color fourth color associated material emission color really color sense ﬁrst color property th surface reﬂects light emission color color th doe come external source emitted material elf doe mean object giving oﬀ light illuminate object doe mean object seen source light ambien t light presence light object brighter accounted li ght illuminates sense appears glow emission color usually b lack object emission material color property speciﬁed ter m number givingchapter opengl light material rgb red green blue component color real l ight contain inﬁnite number diﬀerent wavelength rgb color jus t component nature human color vision make pretty good appr oximation purpose seesubsection material color alpha component ly alpha component used opengl diﬀuse material color case red blue green component ambie nt diﬀuse specular color term color really mean reﬂectivity t red component color give proportion red light hitting surface reﬂec ted surface similarly green blue diﬀerent type reﬂecti ve color diﬀerent type light opengl material di ﬀerent reﬂectivity type light light property leaving aside ambient light light environment com e light source lamp sun fact lamp sun example e ssentially diﬀerent kind light source point light adirectional light point light source located point space emits light direction th point directional light light come direction ray o f light parallel sun considered directional light source far away light ray sun essentially parallel earth point light emits light light parallel light ray direction light color fact opengl light source h color ambient color diﬀuse color specular color just color material properly referred reﬂectivity color light properly referred intensity energy exactly color refers light s energy distr ibuted diﬀerent wavelength real light contain inﬁnite number diﬀerent wavelen gths wavelength separated spectrum rainbow containing contin uum color light usually modeled computer contains basic c olors red green blue just like material color light color speciﬁed giving t hree number representing red green blue intensity light diﬀuse intensity light aspect light interacts diﬀuse material color specular intensity light interact s specular material color common diﬀuse specular light intensity th e ambient intensity light work little diﬀerently r ecall ambient light light directly traceable light source come imagine turning light increase gen eral level ambient light environment ambient intensity light opengl s added general level ambient light global ambient light whic h associated thechapter opengl light material light source scene ambient light interacts th e ambient color material interaction dependence position lig ht source viewer light doesn t shine object object s ambient lor aﬀected light source light source just turned emphasize just approximati case basis physic real world real light source s separate ambient diﬀuse specular color computer graphic sys tems model light source using just color normal vector visual eﬀect light shining surface depends property surface light depends great extent angle light strike surface angle essential specular reﬂection al aﬀects diﬀuse reﬂection s curved lit surface look diﬀerent diﬀerent point surface uniform color calculate angle opengl need know direction n surface facing direction speciﬁed vector perpendicular surface word perpendicular normal vector p erpendicular surface given point called normal vector surface used lighting calculation norma l vector length equal normal vector lengt h called unit normal proper lighting calculation opengl unit normal mu st speciﬁed vertex given normal vector possible calculat e unit normal dividing vector length section discussion vector length surface curved face diﬀerent direction s diﬀerent point normal vector associated particular point surf ace opengl normal vector actually assigned vertex primitive th e normal vector vertex primitive used lighting calculation enti primitive note particular assign diﬀerent normal vecto r vertex polygon asking don t normal vect or polygon point direction polygon ﬂat perpendicu lar direction polygon doesn t change point point true objectiv e display polyhedral object side ﬂat polygon fact normal polygon point direction hand polyhedron used approximate curved surface sphere real objective make mething look like curved surface want use normal vector perpend icular actual surface polyhedron approximates look ex ample chapter opengl light material thetwoobjectsinthispicturearemadeupofbandsofrectang le thetwoobjectshaveexactly geometry look quite diﬀerent beca use diﬀerent normal vector used case object band rectangle s supposed approximate smoothsurface theverticesoftherectanglesarepointson thatsurface andireallydidn twant e oratleastagoodapproximation object speciﬁed normal vector eac h vertex used vector perpendicular surface perpend icular rectangle object hand thinking ob ject really isa band rectangle used normal vector actually p erpendicular rectangle s illustration show norma l vector used picture blue line represent rectangle seen arrow represent normal vector rectangle normal ea ch endpoint vertex rectangle normal vector speciﬁed e ach vertex half illustration rectangle m eet point diﬀerent normal vector point normal vector rectan gle actually perpendicular rectangle abrupt change direction yo u rectangle rectangle meet normal ve ctors rectangle diﬀerent visual eﬀect rendered image abr upt change shading perceived corner edge rectangle half hand vector perpendicu lar curved surface pass endpoint rectangle rec tangle share vertex share normal vertex visually elimina te abrupt change shading resulting look like smoothly curvi ng surface way assigning normal vector called ﬂat shading andsmooth shading flat shading make surface look like ﬂat side o r facet smooth shading make look like smooth surface demo help understand diﬀerence show polygonal mesh ed approximate sphere choice smooth ﬂat shading demo upshot make norma l vector suit purpose normal vector vertex say doe s literally perpendicular polygon normal vector cho ose depend object trying model issue choosing normal vector ar e possible unit normal vector point surface pointing opposite d irections polygon haschapter opengl light material face facing opposite direction opengl considers face face opengl tell apart th e order vertex speciﬁed subsection default rule order vertex counterclockwise looking face clock wise looking face polygon drawn screen rule let opengl tell face face shown specifying rmal vector polygon vector point face polygon t example rule curl ﬁngers right hand t direction vertex polygon speciﬁed normal vector poi nt direction thumb note looking face polygon t normal vector pointing looking face normal vector pointing away diﬃcult problem come correct normal v ectors object complex geometric model come necessary norm al vector included true example solid shape drawn glut libr ary opengl lighting equation doe actually mean say opengl performs light ing calculation goal calculation produce color r g b point surface opengl lighting calculation actually vertex prim itive color vertex computed color interior point primiti ve obtained interpolating vertex color alpha component vertex color easy s simply alpha component diﬀuse material color vertex calculation r g andbis fairly complex mathematical don t necessarily need understand short description s ignoring alpha component let s assume ambient d iﬀuse specular emission color material rgb component mar mag mab mdr mdg mdb msr msg msb mer meg meb respectively suppose global ambient intensity represents ambient light associated light source environment gar gag gab point directional light source wh ich refer light number light number light number setup red component vertex color r gar ri red component contribution color com e light number ri contribution light number similar e quation hold green blue component color equation say emission color mer simply added contribution color contri bution global ambient light obtained multiplying global ambient intensity gar material ambient color mar mathematical way saying material ambi ent color fraction ambient light reﬂected surface term r r represent contribution ﬁnal color th e various light source environment contribution th e light source complicated consider just light source note ﬁrst tha t light source disabled turned oﬀ contribution light source zero enabled light source look geometry color chapter opengl light material light source viewer surfacen l r v illustration ni normal vector point color want comput vector point direction l ight arrives surface vi vector point direction viewer ri direction reﬂected ray direction light ray source wou ld reﬂected specularly strike surface point question angle bet weennandlis angle nandr basic fact physic light vec tor unit vector length recall unit vector aandb inner product equal cosine angle vector inne r product occur point lighting equation way accounting ang le various vector let ssaythatthelighthasambient diﬀuse andspecul arcolorcomponents la r lag lab ldr ldg ldb l r lsg lsb let mhbe value shininess property material assuming light enabled contribution o f light source red component vertex color computed lar f ld r mdr l r msr max v mh similar equation green blue component th e ﬁrst term lar maraccounts contribution ambient light light sou rce color surface term added color surface facing light value fis surface facing away light s urface face light account fact light onl y illuminates surface test fis check dot product cosine angle landn angle greater degree mean normal vector opposite sid e surface light whenfis zero diﬀuse specular contribution light color vertex diﬀuse component color adjustment f given ldr mdr represents diﬀuse intensity light time d iﬀuse reﬂectivity material multiplied cosine angle landn angle involved larger angle energy light spre ad greater area chapter opengl light material normal vectorsthe light energy hit surface depends angle light hit sur face bigger angle light energy spread larger area direction surface facing expressed normal vector vector perpendicular surface angle increase degree cosine ngle decrease larger angle smaller value ldr mdr smaller contribution diﬀuse illumination color specular component recall light ray reﬂect ed specularly cone light reﬂection vector r center cone closer viewer ce nter cone intense specular reﬂection distance viewer center cone depends angle vandr appears equation dot product mathematically specular contribution color given lsr msr max v mh taking maximum specular contribution zero angle vandris greater degree assuming case max v equal note dot product raised exponent mh material s shininess property mhis mhis dependence angle case result sort huge undesirable spec ular highlight seen shininess equal zero positive value shininess t specular contribution maximal angle vandris zero decrease angle increase larger shininess value faster rate decrease re ult larger shininess value smaller sharper specular highlight remember calculation repeated ena bled light result combined ﬁnal vertex color s easy especi ally using light end color component larger end befo color used color pixel screen color component clamped t range zero value greater replaced make easy pro duce ugly picture large area uniform white color value n area exceeded information supposed conveyed light ing lost eﬀect similar photograph wo rk ﬁnd appropriate lighting level avoid kind discussion lighting section leaf fa ctors equation presented doesn t account fact eﬀect point li ght depend distance light doesn t account spotlight whic h emit just cone light conﬁgured opengl book doe cove r aspect light captured simple model used opengl obvious omission shadow object don t block l ight light shine right encounter extension model later chapter discus graphic system chapter opengl light material light material opengl section use light material opengl function tha t discussed section speciﬁc older version o f opengl carry directlytoothergraphicsapis butthegeneralideasthat theyimplement whichwerecovered previous section generally applicable opengl use light material enabled able gllighting lighting disabled color vertex simply t current color set glcolor lighting enabled color vertex computed u sing mathematical formula take account lighting o f scene material tie assigned vertex discussed th e previous section s time learn opengl command used conﬁgure lig hting assign material object common lighting turned rendering pa rts scene turned oﬀ part say object lit whi le aren t example wireframe object usually drawn lighting disabled scene solid object lit note illegal cal lglenable orgldisable call toglbeginandglend possible primitive lit primitive unlit note lighting enabled pplied point line primitive polygon rar ely make sense lighting enabled disabled calling glenable andgldisable parameter gllighting light material setting don t modiﬁed wh en lighting turned oﬀ simply ignored lighting disabled light scene addition enabling gllighting conﬁgure source light basic lighting suﬃces c glenable gl command turn directional light shine th e direction viewer scene note character zero shine direction viewer illuminate user light white specular component diﬀuse c olor object specular highlight later section change characteristic light source conﬁgure additional source ﬁrs t consider material normal vector working material material property vertex attribute way t hat color vertex attribute opengl state includes current value m aterial property vertex generated glvertex function copy current material property stored vertex coordinate wh en primitive contains vertex rendered material property associ ated vertex used information lighting compute color v ertex complicated fact polygon face face polygon diﬀerent material mean tha t fact set material property value stored vertex materi al material material isn t actually used unless turn ed lighting discussed chapter opengl light material mind look function setting th e current value material property setting ambient diﬀuse specular emission material color function void glmaterialfv int int property float valuearr ay ﬁrst parameter glfront andback glfront orglback tell setting material property value fro nt face face second parameter tell material property set glambient gldiffuse glspecular glemission orglambient anddiffuse note possible set ambient diﬀuse color value glmaterialfv using glambient anddiffuse property common case parameter glmaterialfv array containing ﬂoatnumbers number rgba color component value ra nge value outside range actually allowed used l ighting computation value unusual note alpha component required used case diﬀuse color vertex color computed alpha component set equal alpha component diﬀuse material color shininess material property single number th array diﬀerent function setting value v t end void glmaterialf int int property float value sidecan beglfront andback glfront orglback theproperty mustbeglshininess value ﬂoatin range compared large number version glcolor andglvertex option setting material limited particular possible se t material color deﬁning array contain color component value suppose e xample want set ambient diﬀuse color bluish green c b e float bgcolor glmaterialfv gl frontandback gl ambient anddiffuse bgcolor javascript simulator opengl look lik e let bgcolor glmaterialfv gl frontandback gl ambient anddiffuse bgcolor jogl api java method array paramet er additional parameter starting index data array float bgcolor frontandback ambient anddiffuse bgcolor c parameter actually pointer ﬂoat allows ﬂexibility storing value material property array sup pose example c array float gold ambient diffuse specular shininess ﬁrst number array specify ambient lor diﬀuse color specular color number shinin es exponent array used set material property chapter opengl light material glmaterialfv gl frontandback gl ambient gold glmaterialfv gl frontandback gl diffuse gold glmaterialfv gl frontandback gl specular gold glmaterialf gl frontandback gl shininess gold note function glmaterialf glmaterialfv parameter number pointer similar ne java float gold ambien t diffuse specular shininess frontandback ambient gold frontandback diffuse gold frontandback specular gold frontandback shininess gold function glmaterialfv andglmaterialf called time including call toglbeginandglend mean diﬀerent vertex primitive di ﬀerent material property maybe like glcolor better glmaterialfv use work material regular color glenable gl colormaterial material color property track col default setting color set current ambient diﬀuse m aterial property example calling lighting enabled eﬀect calling glmaterialfv gl frontandback gl ambient anddiffuse array wherearraycontains value change material pro perty track color using void glcolormaterial property wheresidecan beglfront andback glfront orglback andproperty glambient gldiffuse glspecular glemission orglambient anddiffuse neitherglenable norglcolormaterial called call glbeginandglend vertex primitive use setting recall gldrawarrays orgldrawelements used draw primitive color value vertex primitive taken lor array speciﬁed using glcolorpointer seesubsection similar array material property color array used lighting enabled nd ifglcolor material enabled color array used source f value material property tracking opengl light material deﬁning normal vector normal vector essential lighting calculation se esubsection like color material normal vectorsareattributes vertex op englstate includes acurrent normal vector set using function family glnormal vertex speciﬁed glvertex copy current normal vector saved attribute o f vertex used normal vector vertex color t vertex computed lighting equation note normal vector vertex m ust speciﬁed beforeglvertex called vertex function family glnormal usual v mean value array f mean s value ﬂoats d mean value double normal vector component example default value float normalarray normalarray polygon supposed look ﬂat normal vec tor used vertex polygon example draw cub e say facing direction positive point positive glbegin gl quad glend remember normal vector point face polygon face determined order vertice s generated think face determined direction w hich normal vector point nothow normal vector vertex point wron g direction lighting calculation correct color f vertex modeling smooth surface normal vector cho sen perpendicular surface polygon approximate su rface subsection suppose want draw cylinder radius height center cylinder axis lie th approximate surface using single triangle strip edg e cylinder circle vertex edge coordinate co sin vertex edge coordinate co sin ai angle normal vector point direction radius zero point directly cylinder normal vec tor cylinder point co sin looking cylinder look like chapter opengl light material athe point co sin b c d e f dthe vector co sin polygon approximating circle lying p lc n g h j draw cylinder triangle strip ha ve generate pair vertex alternating edge normal vector tw o vertex pair diﬀerent diﬀerent pair code glbegin gl triangle strip double angle circle double x co angle double y sin angle x y normal vertex angl x y vertex edge x y vertex glend whenwedrawthetopandbottomofthecylinder ontheotherha nd wewantaﬂatpolygon normal vector pointing direction direction glbegin gl triangle fan draw plane z double angle double x co angle double y sin angle x y glend glbegin gl triangle fan draw plane z double angle double x co angle double y sin angle x y glend note vertex generated opp osite order vertex account fact face opposite direction vertex need enumerated counterclockwise order s seen opengl light material drawing primitive gldrawarrays orgldrawelements possible provide diﬀerent normal vertex using normal array ho ld normal vector normal array work way color array ve rtex array use need enable use normal array calling glenableclientstate gl normalarray coordinate normal vector stored ar ray nio buﬀer jogl location data speciﬁed callin g glnormalpointer type stride data thetypespeciﬁes type value array glint glfloat gldouble thestrideis integer usually meaning ext ra data array normal vector datais array buﬀer hold normal vector number normal setup gldrawarrays orgldrawelements used draw primitive normal vector primitive pulled rray note glnormal array enabled normal vector primiti ve equal current normal vector s et byglnormal lighting equation assumes normal vector unit n ormals length equal default opengl use normal vec tor provided don t length incorrect result ho wever glenable gl normalize opengl automatically convert normal vector unit normal point direction note geometric transform applied normal vect or transformed vertex necessary transformation c change direction surface facing scaling transformation change l ength normal vector provided unit normal vector unit norma l scaling transformation enabled glnormalize transformed normal automatically converted unit normal recommendation alwaysenableglnormalize partofyouropenglinitialization theonlyexceptionwoul dbeifallofthenormalvectorsthat provide length apply scaling t ransformations translation rotation ok modify length working light opengl support light source dentiﬁed constant opengl implementation allow additional light light source conﬁgured directional light point light light diﬀuse specular ambient intensity subsection default light source disabled enable light glenable light lightis constant just enabling light doe illumination case light intensity zero default single exception diﬀuse color l ight number light light source need change property light property set using functionschapter opengl light material void gllightfv int light int property float valuearray ﬁrst parameter constant speciﬁes light conﬁgured second paramet er say property light set gldiffuse glspecular glambient orglposition parameter array contains ﬂoatnumbers giving value property color property number array speci fy red green blue alpha component color alpha component ac tually used value generally lie range lie outsi range fact value larger occasionally useful remember diﬀuse nd specular color light tell light interacts diﬀuse specular materia l color ambient color simply added global ambient light light ena bled example set light zero bluish light blue specular highlight dd bit blue ambient light turned use float float float gllightfv gl gl diffuse gllightfv gl gl specular gllightfv gl gl ambient likely experimentation ﬁgure exact ly value use array eﬀect want theglposition property light quite bit diﬀerent used s et light point light directional light set s position direction property value glposition array number x y z w fourth number w zero light directional point x y z speciﬁes direction light light ray shine t direction line fromthe point x y z origin related homogeneous coordinate source light considered point inﬁnity dire ction x y z hand fourth number w light point light located point usually wi value x y give point light x y z really homogeneous coordinate default position light represent ing directional light shining positive direction negative direction important potentially confusing fact light s position speciﬁed light transformed modelview transfo rmation eﬀect time position set usinggllightfv way saying position set eye coordinate world coordinate calling gllightfv property set glposition like calling glvertex light position transformed way vertex coordinate transformed f example float position gllightfv gl gl position position put light place gltranslatef float position gllightfv gl gl position position chapter opengl light material directional light direction light transf ormed rotational modelview transformation basic way use light position easies t think term potentially animated scene position set modelview transformation applied light ﬁxed respect viewer example default l ight position eﬀectively set modelview transform identity mean shine direction negative coordinate viewer negative point screen way saying th light shine direction viewer scene s like ligh t attached viewer viewer move world light move view er second position set viewing transform pplied modeling transform applied position ligh t ﬁxed world coordinate viewer object s scene s like light attached world position set modeling transform ap plied light subject modeling transformation used make light move scene modeling transformation change lig ht subject modeling transformation object light object attached object thesampleprogram usesmultiplemoving colored light let turn oﬀ eﬀect ima ge taken program live demo version progr let light various source combine produce visible color o bject source code provides example conﬁguring light using material propertie demo global lighting property addition property individual light source t opengl lighting us global property proper tie opengl global ambient light ambient light doe n t come ambient colorchapter opengl light material property light source global ambient light pr esent environment disabled default global ambient light bl ack rgb component zero value ch anged using function void gllightmodelfv int property float value property gllightmodel ambient valueis array containing number giving rgba color component global ambient light number range general global ambien t light level quite low example c float ambientlevel gllightmodelfv gl lightmodelambient ambientlevel alpha component color usually set n ot used jogl usual extra parameter specify starting index data array example float ambientlevel lightmodelambient ambientlevel light model property option e ither oﬀ property aregllightmodel twosideandgllightmodel local viewer set using function void gllightmodeli int property int value avalueequal indicate option oﬀ use symbolic constant glfalseandgltruefor value just name gllightmodel twosideis used turn lighting recall polygon set material property mat erial material lighting oﬀ default fron t material used used face face polygon furthermore normal vector used face vector sup posed face don t correct result face eﬀect face look like illuminated light source lie pol ygon face illuminated light lie polygon hand lighting mat erial used face direction normal vector reversed t used lighting calculation face use lighting fa ce visible scene case scene consist s solid object face hidden inside solid ligh ting option using material face specifying diﬀerent mater ials face example shiny purple material face duller yell ow material face gllightmodeli gl lightmodeltwoside turn lighting float purple float yellow float white specular highlight float black chapter opengl light material glmaterialfv gl gl ambient anddiffuse purple material glmaterialfv gl gl specular white glmaterialf gl gl shininess glmaterialfv gl gl ambient anddiffuse yellow material glmaterialfv gl gl specular black specular highlight picture show material look like cylind er face inside surface demo material property gllightmodel local viewer tant direction surface view er lighting equation default direction taken point directly ou t screen true orthographic projection accurate perspecti ve projection turn local viewer option true direction viewer used pr actice diﬀerence usually noticeable image texture uniformly colored object look nice little bland uniform color don t visual appeal say brick w plaid couch dimensional object look interesting realistic adding texture surface texture general sort vari ation pixel pixel single primitive consider kind t exture image texture image texture applied surface make color t surface vary point point like painting copy image su rface picture show object various image texture chapter opengl light material topographical earth image courtesy brick metal free texture downloaded web site longe r exists earthatnight image taken astronomy picture day web site image copy image folder named texture joglorglutfolder inside source folder web site download image f older used example book texture complicated opengl th ey survived complicated modern ve rsions vital eﬃcient creation realistic image section c over opengl texture api texture later chapter note image used texture width height power requirement n opengl requirement relaxed version s good idea use texture thing discussed section work non texture modern system image texture applied surface default beh avior multiply rgba color component pixel surface color compon ents image surface color modiﬁed light eﬀects lighting turned o n multiplied texture color common use white surface color diﬀerent color used surface add tint color texture ima ge texture coordinate texture applied surface point surfa ce correspond point texture way determine mappin g computed object need texture coordinate generally case opengl texture coordinate speciﬁed vertex primitive texture coordin ate point inside primitive calculated interpolating value vertice s primitive texture image come coordinate trad itionally si used horizontal coordinate image ti used vertical coordinate scoordinatechapter opengl light material real number range left image o n right tranges value sortoutside range inside image value valid texture coordin ate note texture coordinate based pixel matter size image valu e ofsandtbetween cover entire image draw textured primitive need pair number s t vertex texture coordinate vertex tell point n image mapped vertex example suppose want apply earthatnight image triangular primitive let s say area image ma pped primitive triangle shown outlined orange st vertex area s t coordinate thes e coordinate image used texture coor dinates vertex triangular primitive texture coordinate vertex attribute ve rtex just like color normal vector material property texture coordina te speciﬁed family function gltexcoord including function s t s t array array opengl state includes current set texture coordinate speciﬁed function y ou specify vertex glvertex current texture coordinate copied att ribute associated vertex usual mean texture coordinate fo r vertex speciﬁed glvertex called vertex primitive need diﬀerent set texture coordinate example apply triangular region image n triangle vertex say normal work verti ce glbegin gl triangle texture coords vertex texture coords vertex texture coords vertex glend note particular relationship x y coordinate vertex position space s t texture coordinate associated vertex fact chapter opengl light material case triangle drawing diﬀerent sha pe triangular area image piece image stretche d distorted ﬁt distortion occurs us texture image s diﬃcult decide texture coordinate use case s easy applying complete texture rectangle cod e segment draw square appropriate texture coordinate map ent ire image square glbegin gl triangle fan texture coords lower left corner texture coords lower right corne r texture coords upper right corne r texture coords upper left corner glend unfortunately standard shape glut library t come texture coordinate teapot doe writ set function drawing similar shape come texture coordinate function jogl plus corresponding header ﬁle course way applying texture given object use function stuck m y decision sample program let view diﬀerent texture image textured shape question happens supply texture coordi nates range turn value legal default opengl behave entire ﬁlled copy image example t exture coordinate square range direction instead copy image square copy horizont ally copy vertically todrawatexturedprimitiveusing gldrawarrays orgldrawelements youwillneedtosupply texture coordinate vertex array way tha t supply vertex coordinate color normal vector subsection detail similar enable use texture coordinate array calling glenableclientstate gl texture coordarray tell opengl location data using f unction void gltexcoordpointer int size int datatype int stride void array thesize opengl allows texture ordinate use datatype beglfloat gldouble orglint thestride ordinarily zero indicate extra da ta texture coordinate array parameter array pointer dat type indicated datatype jogl usual use nio buﬀer instead arr opengl light material mipmaps filtering texture applied surface pixel textu usually match pixel surface general textur e stretched shrunk mapped surface pixe l texture mapped pixel surface case color s applied surface pixel computed color texture pi xels map example ﬁltering particular us miniﬁcation ﬁlter texture shrunk pixel texture cover tha n pixel surface texture magniﬁed need magniﬁcation ﬁlter bit terminology proceed pixel text ure referred texels short texture pixel texture element e term deciding apply texture pixel surface op engl deal fact pixel actually contains inﬁnite number point point texture coordinate texture color t pixel computed easiest thing select point pixel say t point center pixel opengl know texture coordinate point t exture coordinate correspond point texture point lie te xture s texels color texel used texture color pixel called nearest texel fast doe usually good result doesn t account diﬀerence size pixel surface texels im age improvement nearest texel ﬁltering linear ﬁltering avera ge texel color compute color applied surface problem linear ﬁltering ineﬃc ient large texture applied smaller surface area case t exels map pixel computing average texels ineﬃcie nt neat solution mipmaps mipmap texture version textur complete set mipmaps consists texture version wh ich dimension divided version version s o dimension shrink single pixel reduced dimens ion continue cut half reach pixel case ﬁnal mipmap nsists single pixel ﬁrst image set mipmaps brick texture ll notice mipmaps small quickly th e total memory used set mipmaps memory used f original texture additional memory requirement big issue using m ipmaps mipmapsareusedonlyforminiﬁcationﬁltering theyareess bulk averaging required shrinking te xture ﬁt surface texturechapter opengl light material pixel opengl ﬁrst select mipmap texels c losely match size pixel linear ﬁltering mipmap comput e color average texels order newer version opengl opengl generate mi pmaps automatically opengl want use mipmaps load ea ch mipmap individually generate glu library metho d used generate set mipmaps texture howe ver sample program use mipmaps texture target texture parameter opengl actually use onal texture dimensional opengl function dealin g texture texture targetas parameter tell function applie d dimensional texture texture target b egltexture number option apply texture contr ol detail texture applied surface option set using t hegltexparameteri function including ﬁltering opengl support diﬀerent ﬁltering technique miniﬁcation magniﬁcation ﬁlters ca n set using gltexparameteri gltexparameteri gl texture gltexture magfilter magfilter gltexparameteri gl texture gltexture minfilter minfilter value magfilter andminfilter constant specify ﬁltering algorithm themagfilter option glnearest andgllinear giving nearest texel linear ﬁltering default mag ﬁlter gllinear rarely need change minfilter addition glnearest andgllinear option use mipmaps eﬃcient ﬁlte ring default min ﬁlter glnearest mipmap linear doe averaging mipmaps nearest texel ﬁltering mipmap better r esults cost greater ineﬃciency use gllinear mipmap linear doe averaging mipmaps option glnearest mipmap nearest gllinear mipmap nearest important note notusing mipmaps texture imperative change miniﬁcation ﬁlter texture gllinear likely glnearest default min ﬁlter requires mipmaps mipmaps available texture considered improperly formed o pengl ignores remember don t create mipmaps don t change mi niﬁcation ﬁlter texture simply ignored opengl pair texture parameter control te xture coordinate outside range treated mentioned default s repeat texture alternative clamp texture mean t exture coordinate outside range speciﬁed value forced ra nge value replaced value greater replaced value clamped separately s andtdirections using gltexparameteri gl texture gltexture wrap glclamp gltexparameteri gl texture gltexture wrapt glclamp chapter opengl light material passingglrepeat parameter restores default behavior cl amping eﬀect texture coordinate outside range return color texel lie outer edge image eﬀect look like textured square square image sandttexture coordinate range original image lie center square squar e left texture repeated right texture clamped texture transformation texture applied primitive texture coordin ate vertex determine point texture mapped vertex texture image opengl support texture texture mean texture coordinate restricted coordinate fac t set texture coordinate opengl represented internally form homogeneous coordinate referred s t r q used specify texture sandtcoordinates s t example really just shorthand s texture coordinate diﬀerent vertex coord inates transformed exactly way opengl maintains texture transformation state modelview projection transformation t current value transformation stored matrix texture s applied object texture coordinate speciﬁed vertex transfo rmed texture matrix transformed texture coordinate used pick p oint texture course default texture transform identity transform wh ich doesn t change coordinate texture matrix represent scaling rotation transl ation combination basic transforms specify texture transform t o useglmatrixmode set matrix mode gltexture mode eﬀect call method glrotate glscale andglloadidentity applied texture matrix example install te xture transform scale texture coordinate factor direction say glmatrixmode gl texture glloadidentity make sure starting iden tity matrix glscalef glmatrixmode gl modelview leave matrix mode set gl modelview image lie ﬁrst parameter glscalef matter rotation use axis rotation whi ch rotate image opengl light material doe actually mean appearance te xture surface example scaling transform multiplies texture coo rdinate example vertex assigned texture coordinate t texture transform applied vertex mapped point s t texture texture coordinate varytwice fast surface scaling transform region surface map square texture im age transform instead map square larg er piece image seen inside region word texture image wil l beshrunkby factor surface generally eﬀect texture transfor mation appearance texture inverse eﬀect texture coordinate exactly ana logous inverse relationship viewing transformation modeling transformation texture transform translation right text ure move left surface texture transform counterclockwise rotation th en texture rotates clockwise surface mention texture transforms opengl c use transformation context useful transform te xture make ﬁt better surface unusual eﬀect animate texture transform make texture image surface eﬀect texture transformation try demo loading texture memory s time looked process getting ima ge opengl used texture usually image start ﬁle op engl doe function loading image ﬁle assume ﬁle h loaded ﬁle computer s memory later section w ill explain s c java theopenglfunctionforloadingimagedatafromthecomputer take form target mipmaplevel internalformat widt h height border format datatype pixel thetargetshould gltexture themipmaplevel ordinarily value loading main texture larger value used loa d individual mipmap internalformat tell opengl want texture data stored openg l texture memory itcanbe nother possibility glrgba add alpha component widthandheightgive size image value power value bordershould possibility indicates bor der added image data reason discus param eters image data theformattells original image data represented compu ter s memory asglrgborglrgba thedatatype usually glunsigned byte indicating color component represented value th e range pixelsis pointer start actual color data pixel t pixel data certain format need concern usually taken care function used read image ﬁle jogl pointer wo uld replaced buﬀer look complicated practice generally take following form possibly glrgbreplaced opengl light material gl texture gl rgb width height glrgb gl unsigned byte pixel calling function load image texture b ut doe cause texture used glenable gl texture ifyouwanttousethetextureonsomeobjectsbutnotothers y oucanenable gltexture drawing object want textured disab le drawing untextured object youcanalsochangethetexturethatisbeingusedat anytimebycalling texture color buﬀer textureimagesforuseinanopenglprogramusuallycomefrom anexternalsource mostoften image ﬁle opengl powerful engine creating image instead loading image ﬁle s convenient open gl create image internally rendering possible opengl read textu data color buﬀer doe drawing create texture image using ope ngl just draw image using standard opengl drawing command load t hat image texture using method target mipmaplevel internalformat x y width height border method targetwill gltexture mipmaplevel zero internalformat willordinarilybe glrgborglrgba xandyspecifythelowerleftcornerof therectanglefromwhichthetexturewillberead widthandheightarethesizeofthatrectangle asusualwithtextures widthandheightshouldordinarilybepowers typically look like gl texture gl rgb x y width height end result speciﬁed rectangle color b uﬀer copied texture memory current texture work t way source image data example jogl program c version program draw scene fromsubsection us drawing texture object n image program showing texture cylinder demo chapter opengl light material texture animated animation new texture drawn frame work program s display function fu nction current frame scene ﬁrst drawn scene ligh ting disabled picture shown computer screen drawing nd image erased replaced image s shown scree function called copy scene current tex ture color buﬀer cleared lighting enabled projection set b efore ﬁnally drawing object seen computer screen texture object ve said far texture t rue opengl opengl introduced new feature called texture object make texture handling eﬃcient texture object used need work te xture image program usual method loading texture image transfer data program graphic card expensive ope ration switching multiple texture using method seriously degrad e program s performance texture object oﬀer possibility storing texture data mul tiple texture graphic card texture object switch texture object single fast opengl command just tell opengl texture ob ject want use course graphic card limited memory storing texture aren t guaranteed texture object actu ally stored graphic card texture object don t ﬁt graphic card s memory eﬃcient ordinary texture texture object managed opengl graphic hardw texture object identiﬁed integer id number use texture object yo u need obtain id number opengl glgentextures function void glgentextures int texturecount int array function generate multiple texture id singl e ﬁrst parameter speciﬁes id want second parameter say gen erated id stored array length texturecount example plan use texture object say int idlist glgentextures idlist use idlist idlist andidlist refer texture way pointer work c want single texture id c pas pointer integer variable second parameter glgentextures example int texid glgentextures texid new texture id stored variable texid texture object state includes va lues texture parameter asgltexture minfilter texture image work speciﬁc texture object ﬁrst glbindtexture gl texture texid chapter opengl light material wheretexidis texture id returned glgentextures use gltexparameteri applied texture object idtexid similarly textured primitive rendered textu used recently bound using glbindtexture typical pattern load conﬁgure number texture program initialization glgentextures n textureidlist n glbindtexture textureidlist load texture image number configure texture image number rendering scene glbindtexture time want switch texture image texture image b e eﬃcient time want switch texture opengl reserve texture id zero default texture ob ject bound initially texture object using glbindtexture mean write program use texture mentio ningglbindtexture note webgl longer tr ue small sample program show use texture object available c jogl way working texture object loading texture c seen load texture image data memory op engl problem remains image data memory ca possibility compute actually r program generate texture data ﬂy likely want load ﬁle section look probably want use library function free image processing library ava ilable discus freeimage work image ﬁle format freeimage obtained http able use linux simply installing make available program added include tothetopofmy cprogram andiaddedtheoption tothegcccommandtomakethe library available compiler sample program example us library instead discussing freeimage present function us load image data ﬁle void imgpixels pointer raw rgb data texture mem ory int imgwidth width texture image int imgheight height texture image void loadtexture char filename load texture image using freeimage library sto re required info global variable imgpixels imgwidth mgheight parameter filename string contains o f image file image loaded imagechapter opengl light material t loaded imgpixels set null poin ter imgpixels null pointer signal data read freeimageformat format freeimage getfiffromfilename filename free imageformat type defined freeimage library format determined file extension file format supported format fif unknown printf unknown file type texture image file fil ename return fibitmap bitmap freeimage load format filename fibitmap type defined freeimage library repre senting raw image data plus metadata width height format image data actually try read data specified file bitmap printf failed load image filename return fibitmap freeimage bitmap creates copy image data represented standard rgb bgr format use opengl freeimage unload bitmap finishing bitmap disposed finished bitmap continue use data imgpixels freeimage getbits data need imgwidth freeimage getwidth imgheight freeimage getheight imgpixels printf texture image loaded file s size dx filename imgwidth imgheight printf failed texture data filename end loadtexture afterthisfunctionhasbeencalled thedatathatweneedfor isintheglobal variable imgwidth imgheight andimgpixels orimgpixels indicate attempt load image failed complication freeim age store color component pixel order platform order platform second data format called glbgrin opengl use wrong format red blue component color rever sed tell diﬀerence use freeimage constant firgbared tell positionchapter opengl light material red color component pixel data constant b e format glrgband format glbgr use texture opengl say imgpixels image data exists int format format color data memory fi rgbared format gl rgb format gl bgr gl texture gl rgba imgwidth imgheight format glunsigned byte imgpixels glenable gl texture image data loaded don t attempt use texture gldisable gl texture careful check width height image power resize using function freeimage rescale freeimage library freeimage large complicated ea sily available computer make easier experiment te xtures c included small c utility reading texture ﬁle rgb ﬁle format fairly simple rgb ﬁles generally larger corre sponding ﬁles format widely supported included v ersions sample texture image folder small library loading texture header ﬁle library fromhttp sample program use library using texture jogl turn ﬁnally using texture image java jogl come wit h class make fairly easy use texture java nota bly class texture andtextureio package andawttextureio package example using texture jogl ple program object type texturerepresents texture loaded openg internally us texture object store texture conﬁguration data texis object type texture gl use texture image rendering object parame ter gl usual variable represents opengl drawing context function equivalent calling glbindtexture opengl texture object used java texture need enable gltexture calling texture equivalently gl chapter opengl light material set texture parameter usual way calling texture bound preferable use method thetextureclass set parameter gl parametername value automatically bind texture object sett ing texture parameter example gl texture minfilter mipmaplinear texture s pretty easy use remains problem creating texture object use static method textureio awttextureio class example ﬁlename image ﬁle path ﬁle say tex new file filename true load texture ﬁle textureobject tex thebooleanparameter method look tell jogl cr eate mipmaps texture passing true automatically set mipmaps important note java s texture creation function work ope ngl context true g method gleventlistener including init anddisplay method notbe true ordinary method constructor course java likely store image r esource program separate ﬁle resourcename path image resource load image texture url textureurl textureurl getclass resourcename texture textureurl true null parameter version newtexture speciﬁes image type given string containing ﬁle suﬃx png jpg value nulltells opengl autodetect image type work general way code discus throw exception ca tch handle way problem texture loaded way w ill upside happens java store image data row image opengl expects image data stored starting bott om row problem ﬂip image using create texture load image buﬀeredimage load texture using awttextureio class example assuming resourcename path image resource program url textureurl textureurl getclass resourcename bufferedimage img textureurl img texture t img true theimageutil class deﬁned package obtained buﬀeredimage reading resource read ﬁle draw using java opengl light material light camera action ascene computer graphic complex collection object attribute subsection saw scene graph used organize object scene rendering scene mean traversing scene graph rendering object graph encountered graphic sce ne graph deal larger variety object attribute transforms exampl e useful consider light camera object able include scen e graph section consider scene graph treat camera ligh t object designing scene graph option consi der example transforms property object node separate node represent transforms question asked attribute question attribute value apply node p roperty inherited child node fundamental choice shape graph general s cene graph directed acyclic graph dag structure exce pt node parent graph scene graph subsection dag advantage single node graph represent object scene dag node encountered time graph traversed o n hand representing object scene graph node lead lack ﬂexibility object value property encoded application scene graph required tree tree node unique parent node encountered tree traversed di stinction tree dag discus camera node scene graph attribute stack seen function glpushmatrix andglpopmatrix used manipulate transform stack function useful traversin g scene graph node contains transform encountered traversal th e graph glpushmatrix called applying transform node d escendants rendered glpopmatrix called restore previous modelview transformation similar attribute color d material assumed attribute value scene graph node inheri ted default value attribute child node opengl maintain s attribute stack manipulated using function glpushattrib andglpopattrib addition object attribute like current color attribute stack store global attribute like global ambient color enabled state depth test possible attribute glpushattrib doe simply save value attribute instead t save subset possible attribute subset saved speciﬁ ed parameter function example command glpushattrib gl enabled bit save copy opengl state variable enabled disabled includes current state gldepth test gllighting glnormalize similarly glpushattrib gl current bit chapter opengl light material save copy current color normal vector texture coordinate glpushattrib gl lighting bit savesattributesrelevanttolightingsuchasthevaluesofm aterialpropertiesandlightproperties global ambient color color material setting e nabled state lighting individual light constant used save set attribute opengl documentation detail possible toget constant combine set attribute example glpushattrib gl lighting bit gl enabled bit save attribute gllighting bitset glenabled bit set callingglpopattrib restore value saved correspo nding glpushattrib need parameter glpopattrib set attribute restored determined parameter passed t oglpushattrib easy glpushattrib andglpopattrib used traversing scene graph processing node changing attrib ute value glpushattrib save copy relevant set set attribute render t node descendant callglpopattrib restore saved value limit eﬀect chan ge apply node descendant alternative way save restore value openg l variety function reading value various state variable discus just example glgetfloatv gl current color floatarray retrieves current color value set glcolor theﬂoatarray parameter array ﬂoat length rgba color component t current color stored array note later simply c colorarray restore color function used diﬀeren t ﬁrst parameter read value diﬀerent state variable ﬁnd th e current value viewport use glgetintegerv gl viewport intarray set intarray andintarray xandycoordinates lower left corner current viewport intarray width intarray height read current value material property use glgetmaterialfv face property floatarray thefacemust glfront orglback property glambient gldiffuse glspecular glemission orglshininess current value property stored ﬂoatarray length color property orlengthatleastonefor glshininess glgetlightfv reading property light finally mention glisenabled used check status state variable gllighting andgldepth test parameter constant identiﬁes state variable funct ion return state variable disabled enabled example glisenabled gllighting test lighting enabled suppose node scene graph n attribute litto tell node descendant rendered ligh ting enabled code rendering node include like chapter opengl light material int savelit glisenabled gl lighting lit glenable gl lighting gldisable gl lighting render node descendant savelit glenable gl lighting gldisable gl lighting sinceglpushattrib used push large group attribute value migh t think eﬃcient use glisenabled theglget family command read value just state variable plannin g modify recall opengl queue number command batch sent graphic card command executed gpu time program continues run aglgetcommand require program communicate gra phics card wait response mean pending opengl com mands sent graphic card executed glgetcommand complete kind thing hurt performance contrast call glpushattrib andglpopattrib queued opengl command sent graphic ca rd batch executed eﬃciently graphic hardware fact generally prefer using glpushattrib instead glgetcommand possible moving camera let s turn aspect modeling suppose wan t implement viewer moved world like object s viewer thought moving camera camera used picture th e scene want able apply transformation camera just apply tra nsformations object position orientation camera determine sh ould visible scene rendered size camera aﬀecte d scaling transformation determines large ﬁeld view camera j ust object camera really represents viewing transformation want t o use recall modeling viewing transformation opposite eﬀects moving obje ct right modeling transform equivalent moving viewer left viewing transformation subsection apply modeling transformation camera reall y want apply viewing transformation scene view ing transformation inverse camera s modeling transformation following illustration show scene viewed movin g camera camera start default viewing position origin looking th e direction negative corresponds using identity viewing transf orm second image camera moved forward unit correspond applying modeling transformation gltranslatef camera moving negative direction implement movement change vie w want apply inverse operation viewing transformation viewing tran sform actually apply gltranslatef seen like modeling transfo rmation appliedchapter opengl light material otherobjects scene moving camera unit direc tion equivalent moving object unit opposite direc tion origin al view afer m oving forward unitsafter t urning degree right image camera rotated place degr ee clockwise rotation translated implemented transformation glrotatef counterclockwise rotation t beforethe translation remember inverse composition transformation composition inverse th e opposite order mathematically represent inverse transformation t r transformation rand image illustration demo try demo let scene accura tely course let change viewing transformation scene diﬀe rent viewpoint demo using scene graph useful include camera o bject graph want able include node graph represent s camera want able use camera view scene usefu l camera scene providing alternative point view impleme nt need able render scene point view given camera previ ous discussion know order need use viewing transformation th inverse modeling transformation applied camera object vie wing transform applied object scene rendered scene graph traversed modeling transformation c applied node modeling transform eﬀect given node en countered composition transforms applied node path t hat led given node node camera node don t want apply modeli ng transform want apply inverse viewing transform inverse start camera node follow path backwards applying inverse mo deling transform opengl light material r sk camera m o p q t q graph actually tree containing cameratw y qz td t represent modeling transformation applied node graph modeling transformation applied o viewing transfomation inverse t s r obtained following parent pointer camera node easily implement add parent pointer scene graph data structure parent pointer node link parent node graph note work graph tree tree node unique pa rent true general directed acyclic graph possible tree following parent pointer mind algorithm rendering scene th e point view camera go follows set modelview transform identi ty calling glloadidentity start camera node follow parent pointer yo u reach root tree node apply inverseof modeling transformation node example f modeling transform translation b c gltranslatef reaching root viewing transform corresponding camera established traverse scene graph render scene usual trav ersal camera node ignored note camera attached object sense th camera object subject modeling transformation unit modeling term camera object complex object example camera attached car view windshield car car move modeling transformation change camera moving light useful think light object par t complex object suppose scene includes model lamp lamp model clude geometry make visible going cast light objec t scene include source light mean lamp complex object opengl light source plus geometric object modeling transform ation applied lamp aﬀect light source geometry term s scene graph light represented node graph aﬀected mode ling transformation way object scene graph animated animated object include light head light car recall subsection alight source subject tothe modelviewtransform tha t eﬀect time position light source set gllightfv light represented node scene graph modelview transform w e need eﬀect node encountered traversal scene graph like just traverse graph set position l ight encounter opengl light material problem geometry rendered t light source aﬀect geometry conﬁgured enabled n particular light position set rendering geometry mean yo u t simply set position light source scene graph traverse graph n usual way objectsthataredrawnbeforethelightisencounteredwon t beproperlyilluminatedbythelight similarly light node contains value pr operties light including state light property set rendering geometry solution traversal scene graph ﬁr st set light second draw geometry light aﬀected m odelview transformation set modeling transform ﬁrst travers al exactly way second traversal encounter light ﬁrst traversal need set position light setting posit ion trigger application current modelview transformation light need set property light ﬁrst traversal geometric object t scene graph ignored second traversal geometry rendered ligh t node scene graph api chapter andchapter introduced graphic using opengl idea covered chapter remain relevant modern compute r graphic change improvement early day opengl inchapter andchapter using webgl modern version opengl used create graphic content web page chapter introduces webgpu newer graphic api web webgl low level opengl si nce webgl program handle lot implementation detail t hat handled internally original version opengl make webgl ﬂexib le diﬃcult use soon turn working directly webgl fore look api web graphic built o f weggl reason starting high level allo w thing learned used modern gr aphics package allow introduce new feature shadow environme nt mapping let work graphic library use real web applica tions break dealing mov e lower level probably follow discussion chapte r knowing javascript want programming webgl webgpu need know javascript basic language cover ed insection inappendix basic javascript library graphic source project originally created ricardo cabello g oes handle http contribution programmer popular javascript library web applicat ion popular option us concept familiar geo metric object transformation light material texture nd camera additional feature build power ﬂexibility weggl download read documentation main web site http download quite large includes example s port ﬁles book us release software ju ly aware material ﬁnd internet doe apply recent release current release modular javascript library older scene graph api form available deprecated schedule d removed release previous version textbook used ver sion version textbook updated use aside changed account minor diﬀerences notably signiﬁcantly increase specular component o f material color copy used textbook folder sourcefolder textbook s web site allows ﬁles freely redistributed plan wor k read documentation web site use deploy core feature deﬁned single large javascript ﬁle named builddirectory smaller miniﬁed version contains deﬁnitions format meant miniﬁ ed version usually used web page addition core directory containing example variety support ﬁles used exa mples example use feature folder named jsminside folder named example used textbook included folder javascript module term module refers general relatively independ ent component module interact limited way mportant tool building complex system javascript module script isolated script module export identiﬁers deﬁnes identiﬁers t hat exported script imported script module acces s identiﬁer moduleiftheidentiﬁerisexplicitlyexportedbyonemodule andimportedbytheother module access identiﬁers script witho ut having import javascript module export identiﬁer adding export modiﬁer declaration example export const export function setcolor c export class fancydraw alternatively list identiﬁers want ex port exportstatement example export red setcolor fancydraw theexportstatement option mostl y interested importing use modular need write modular script b page adding attribute module script element script module script use importstatements access identiﬁers module example chapter scene graph api script module import fancydraw setcolor use fancydraw setcolor usual assumes module export identiﬁers d eﬁned script named directory web page note path t script start current directory script st art use ﬁle directory named scriptin directory web page import everythin g ﬁle using import form importstatement get export make property new object named example exported identiﬁer meshis imported importstatement form covered example use main placed ﬁles use subdirectory script directory ﬁles come folder used subdirectory structure folder ﬁles refer ﬁles su bdirectories script control sub directory export class named orbitcontrols imported using import orbitcontrols module import resource main unfortunately don t know ﬁnd ﬁle rely c alled import map specify location import map deﬁned anothe r kind script importmap script example start like script importmap import script module import import orbitcontrols import gltfloader content importmap script json object imp ort map deﬁnes refer main deﬁnes refer script directory module refer main mapping necessary mapping actually needed example scene graph api given brief overview javascript modu hope let understand sample program write similar program complex project look say setting development environment installatio n section manual http scene renderer camera work html canvas element thing used graphic insection web browser addition graphic ap canvas support drawing using webgl used diﬀerent api scene graph api subsection basic procedure build scene graph render image scene represents animation implemented modifying prop erties scene graph frame large number class mo st basic actually renderer class available far common renderer webgpu available development need object type object stored global variable let scene renderer camera note constant use property object named name begin deﬁned importstatement import use diﬀerent refer class using p reﬁx usually used preﬁx included actu al program code asceneobject holder object make world ncluding light graphical object possibly camera act root scene graph camera special kind object represents viewpoint w hich image world represents combination viewing transfo rmation projection webglrenderer object create image scene graph scene simplest object scene c reated object type using constructor parameter scene new function item used add camera light graphical object scene probably scenefunction need function item remove item scene occasionally useful kind camera using orthographic projec tion using perspective projection represented class subclass constructor specify projection using parameter familiar ope ngl subsection camera new left right b ottom near far orchapter scene graph api camera new fieldofviewangle aspect near far parameter orthographic camera specify x y z limit view volume eye coordinate t camera looking direction negative pointing view nearand farparameters term distance ca mera orthographic projection nearcan negative putting near clipping plane camera parameter opengl function glortho reversing order parameter specify clippin g plane perspective camera common parameter perspective camera come function gluperspective opengl s glu library ﬁrst parameter determines vertical extent view volume given angle meas ured degree aspectis ratio horizontal vertical extent sh ould usually set width canvas divided height nearandfargive view volume distance camera perspective projection bo th positive nearless thanfar typical code creating perspective camera camera new wherecanvasholds reference canvas element image rendered near far value mean thing uni t camera included image remember using unnecessar ily large value faror unnecessarily small value nearcan interfere accuracy depth test camera like object added scene e scene graph used add scene graph yo u want parent child object graph case gen erally want apply modeling transformation camera set position orienta tion space cover later talk transformation generally renderer instance class constructor parameter javascript object containing setting s aﬀect renderer setting likely specify canvas tell renderer draw antialias asks renderer use antialiasing possible renderer new canvas thecanvas antialias true thecanvas reference canvas element renderer display image produce note technique havi ng javascript object parameter used make possible support large number option requiring long list parameter mu t speciﬁed particular order instead need specify option whic h want provide value specify option orde main thing want renderer render mage need scene camera render image given scenefrom point view givencamera scene camera chapter scene graph api really central command note example seen provide canvas renderer instead allow renderer create canvas obtained renderer added page furthermore canvas t ypically ﬁlls entire browser window sample program show example use existing canvas renderer c onstructor shown graph object type including object belong subclass class camera light vi sible object represented subclass fact subclass contains list child object type child list deﬁnethestructureofthescenegraph nodeandobjectareoftype thenthemethod object addsobjectto list child node method object used remove object list graph fact tree node graph unique parent node root node parent obj property point parent objin scene graph set property directly set automatically node dded child list node objalready parent added child node thenobjis ﬁrst removed child list current parent added child list node child obj stored property named ordinary javascript array add nd remove child objusing method make easy duplicate part structure scene g raph deﬁnes clone method method copy node including recurs ive copying child node make easy include multiple copy structure scene graph let node add child node node let modify maybe apply transformation let modify maybe apply transformation obj associated transformation given proper property represent modeling transformation b e applied object child object rend ered object ﬁrst scaled rotated translated according value se property transformation arechapter scene graph api actually complicated thing simple return topic later value object type represents vector point dimension similar class vector dimension constructed number coordinate vector let v new object property coordinate property set individually example set using method x y z method implementing vector operation addition dot product cross product property scaling object x y z direction defaul t value course calling mean object subjected uniform scaling f actor rendered setting shrink assumin g default value similarly property translation amount applied object x y z dir ections rendered example camera setting mean camera moved default position origin point positive modeling transformation camera viewing transformation camera used render scene object property represent rotation angle measured radian object rotated ﬁrst s possible change order value vector instead belongs similar type angle rotation called euler angle object geometry material visible object point line triangle individu al object corresponds opengl primitive glpoints gllines orgltriangles seesubsection ﬁve class represent possibility point triangle class line us gllinestripprimitive us gllinesprimitive us gllineloopprimitive avisibleobjectismadeupofsomegeometryplusamaterialth atdeterminestheappearance geometry geometry material visible object themselve s represented javascript class object type store vertex coordinate attribute fact vertex coordinate considered attribute geometry thesechapter scene graph api value stored form suitable use openg l function gldrawarrays gldrawelements seesubsection javascript mean stored typed array typed array similar normal javascri pt array length ﬁxed hold numerical value certain type example hold ﬂoating point number hold unsigned integer typed array created constructor speciﬁes len gth array example vertexcoords new space numb er alternatively constructor ordinary javasc ript array number parameter creates typed array hold num bers example data new case length datais contains copy number javascr ipt array specifying vertex buﬀergeometry multistep process need create typed array containing coordinate vertex n need wrap array inside object type finally add attribute geometry example let vertexcoords new let vertexattrib new vertexcoor d let geometry new position vertexattrib second parameter buﬀergeometry constructor integer tell number coordinate vertex recall vertex ca n speciﬁed coordinate need specify number pro vided array vertex turning setattribute function buﬀergeometry attribute specifying color normal vector texture coordinate o ther custom attribute ﬁrst parameter setattribute attribute position o f attribute speciﬁes coordinate position th e vertex similarly specify color vertex rgb component color use specify value buﬀergeometry attribute named color speciﬁc example suppose want represent pri mitive type glpoints using type let s say want point placed random inside unit sphere point rand om color code creates necessary buﬀergeometry let pointsbuffer new number pe r vertex let colorbuffer new let let x let y let z x x y y z z use point inside unit sphere pointsbuffer x pointsbuffer y pointsbuffer z colorbuffer chapter scene graph api colorbuffer colorbuffer let pointsgeom new position new color new make geometry visible object need ppropriate material example object type use material type subclass material material specify color size point property let pointsmat new color yellow size sizeattenuation false parameter constructor javascript object who e property used initialize material sizeattenuation property set false size given pixel true thensizerepresents size world coordinate point sca led reﬂect distance viewer coloris omitted default value white used default size sizeattenuation istrue parameter constructor omitted entirely use default pointsmaterial aﬀected lighting simply show color speciﬁed colorproperty possible assign value property mate rial object created example let pointsmat new new yellow false note color set value type constructed string yellow color property set material con tructor conversion string color automatically geometry material use c reate visible object add scene let sphereofpoints new pointsgeom point mat sphereofpoints cloud yellow point wanted poi nt color recall color point stored geometry material tell material use color geometry mate rial s color property setting value material property vertexcolors totrue create material usingchapter scene graph api let pointsmat new color white size sizeattenuation false vertexcolors true white used material color vertex lors actually multiplied material color simply substituted demo show animated point cloud user choose yellow point randomly colored point demo color parameter material speciﬁed string yellow color represented value type class represents rgb color colorobjectchas property red blue green color component ﬂoating point number range note alpha component transparency separately color way construct object constructor parameter giving rgb component real number r ange single string parameter giving color cs color strin g like used canvas graphic api example include white red rgb color constructor single integer parameter eac h color component given ﬁeld integer usually integer used represent color way written hexadecimal literal beginning example include red green blue d ark example using color constructor let new skyblue let new yellow let new pale green context constructor accept string integer color required string integer fed colorconstructor example webglrenderer object clear color property used background color renderer render scene pro perty set using following command new darkgray turning line object type represents line primitive type called gllinestripin opengl strip connected line segment plus line starting ver tex use object type outline triangle example provide abuﬀergeometry holding coordinate point use lineloop need material line material presented object type usual parameter constructor javascript object property include colorandlinewidth example chapter scene graph api let linemat new color purple default white linewidth pixel default thelinewidth property respected according speciﬁcat ion webgl implementation set maximum line width point possible specify diﬀerent color purpose adding color attribute geometry setting value vertexcolors material property true complete example make triangle vertice s colored red green blue let positionbuffer new coordinate vertex coordinate second vertex coordinate vertex let colorbuffer new color vertex red color second vertex green color vertex blue let linegeometry new position new color new let linematerial new linewidth vertexcolors true let triangle new linegeometry linemate rial triangle produce image basic linebasicmaterial indicates material us basic color require lighting visible aﬀected lightin generally want line scene graph api mesh object opengl primitive gltriangles geometry object mesh specify vertex pa rt triangle section class represent common mesh geometry sphere cylinder torus fo r class just need constructor create appropriate geo metry example class represents geometry cylinder constructor take form new radiustop radiusbottom ight radiussegments heightsegments openended thetastart thetalength geometry created constructor represents appr oximation cylinder axis lying extends axis radius circular radiustop radiusbottom radius don t diﬀerent truncated cone cylinder usingavalueof zerofor radiustop makesan actual cone parameter radiussegments andheightsegments number subdivision circumference cylinder length called slice d stack glut library opengl parameter openended boolean value indicates cylinder drawn use value trueto tube finally parameter allow make partial cylinder value given angle measured radian cylinder beginning thetastart ending thetastart plusthetalength rendered example thetalength large number parameter constructor give lot ﬂexibility parameter optional default value ﬁrst parameter default radiussegments give poor approximation smooth cylinder leaving parameter complete cylinder closed end standard mesh geometry similar nstructors listing parameter mind parameter o ptional new width height depth widthsegments heightsegments depthsegments new width height widthsegments h eightsegments new innerradius outerradius theta segment phisegments thetastart thetalength new radiusbottom height radiusseg ments heightsegments openended thetastart thetalength new radius widthsegments height segment phistart philength thetastart thetalength new radius tube radialsegments t ubularsegments arc class boxgeometry represents geometry rectangular box centered origin constructor parameter size b ox direction default value parameter number sub division direction default value greater cause face box subdivided smaller triangle class planegeometry represents geometry rectangle lying centeredattheorigin itsparametersaresimilartothosef oracube ringgeometry representschapter scene graph api annulus disk smaller disk removed s center ring lie center origin spec ify inner outer radius ring constructor conegeometry exactly form eﬀect constructor forcylindergeometry radiustop set zero construct cone axis centered origin forspheregeometry parameter optional constructor creates sph ere centered origin axis ﬁrst parameter give radius sphere default parameter number slice stack default value parameter allow make piece sphere default value complete sphere paramete r angle measured radian phistart andphilength measured angle equator extent longitude spherical shell generated exam ple new creates geometry western hemisphere spher parameter angle measured line latitude north pole o f sphere south pole example sphere s northern hemisphere new math fortorusgeometry constructor creates torus lying centered origin passing hole parameter radiusis distance center torus center torus s tube tubeis radius tube parameter number subdivision d irection parameter arc allows make just torus angle measured circle center tube therearealsogeometryclassesrepresentingtheregularpo lyhedra cube use boxgeometry constructor class paramete r ﬁrst speciﬁes size polyhedron default o f size given radius sphere contains polyhedron second param eter integer called default value give actual regular polyhedron l arger value add adding additional face increase polyhedron b ecomes better approximation sphere easier understand illustration image show mesh object use icosahedral geome try parameter equal create mesh object need material geomet ry kind material suitable mesh object includ chapter scene graph api mesh al including newer one implement technique associated physically base d rendering approach improved rendering popular cover ameshbasicmaterial represents color aﬀected lighting look t light scene shad ed giving ﬂat appearance class represent material th need lit seen implement model lighting known lambert shading andphong shading major diﬀerence meshphongmaterial specular color meshlambertmaterial doe diﬀuse emissive color mater ial class constructor parameter javascript object speciﬁes value property material example let mat new color reflectivity diffuse ambient li ght emissive emission color default black specular reflectivity specular light shininess control size specular highlight example show color parameter phong mate rial parameter meaning ﬁve material property opengl subsection lambert material lack specular andshininess basic mesh material colorparameter material property need set constructor ﬂatshading apply kind mesh material boolean property set trueto use vertex color geometry default false boolean value indicates mesh dr awn wireframe model showing outline face default false atruevalue work best meshbasicmaterial width line used draw wireframe pixel default value respected controlswhether theobject onwhichit isusedisrendered default true value default determines face mesh drawn depending face visible w ith default value face drawn viewed draw viewed bac k viewed closed object cube complete sphere default value make sense l east long viewer outside object plane open tube partial s phere value set part object view won t drawn abooleanvalue default false doe work meshbasicmaterial object supposed look faceted ﬂat si de important set property true case example cube cylinder small number scene graph api example let s make shiny open ed tube ﬂat side let mat new color specular shininess flatshading true side drawing inside tube let geom new true let obj new geom mat obj demo let view variety object diﬀerent material demo demo wireframe version object overlaid solid version wireframe solid version actually object th use geometry diﬀerent material drawing object exactly depth problem depth test remember subsection opengl us polygon oﬀset solve problem apply polygon oﬀset material demo solid material shown time wireframe material example mat new polygonoffset true polygonoffsetunits polygonoffsetfactor color yellow setting shown polygonoﬀset polygonoﬀsetunits andpolygonoﬀsetfactor increase depth object us material slig htly doesn t interfere wireframe version object ﬁnal note don t need make new material geometry make new object reuse material geometry m ultiple object light compared geometry material light easy class represent light light class subclass light object added scene illuminate object scene ll look d irectional light point light ambient light spotlight class represents light shine parallel ray given direction like light sun position property directional light give direction light shine position property type scene graph object meaning diﬀeren t directional light note light shine given position origin default position vector give light shining constructor class parameter new color intensity chapter scene graph api wherecolorspeciﬁes color light given object hexadecimal integer cs color string light separate diﬀuse specular color opengl intensity number control brightness light larger value making light brighter light intensity zero give light parameter optional default coloris white intensity intensity greater value usually preferable avoid having illumination scene suppose camera positive looking origin like light shine direction c amera looking use directional light position positive let light new default white light light class represents light shine direction point location point given light s position property constructor optional parameter new color intensity cutoff ﬁrst parameter directional ligh t default thecutoﬀis number value illumination light extends inﬁnity intensi ty doe decrease distance physically realistic generally work w ell practice cutoﬀis greater zero intensity fall maximum value th e light s position intensity zero distance cutoﬀfrom light light eﬀect object distance greater cutoﬀ falloﬀ light intensity distance referred asattenuation light source type light class exists add ambient light scene ambient light color new color adding ambient light object scene add ambient light o f speciﬁed color scene color component ambient light sma ll avoid washing color object example suppose like yellowish point lig ht illumination fall oﬀ distance point distance unit want add bit yellow ambient light scene let light new light new fourth type light new object type represents spotlight similar point light instead shi ning direction spotlight produce cone light ve rtex cone located position light default axis cone point location origin unless change direction axis sh ould position light away origin constructor add parameter t o point light chapter scene graph api new color intensity cutoff coneangle exponent theconeangle number determines size cone light angle axis cone cone default value theexponent number determines fast intens ity light decrease axis cone towar d default value give reasonable result exponent zero give falloﬀ object distance axis evenly illuminated technique setting direction little odd doe make easy control direction object spotof typespotlight property named target scene graph node cone light sp otlight pointed direction spotlight s position target s position spotlight ﬁrst created target new position set target object scene graph make spotlight shine object calculate spotlight direction target positi origin actually node scene grap example suppose want spotlight located point pointed tow ards point spotlight new spotlight modeling example rest chapter deeper know build model basic geometric object example s sample program show simple model car driving ed ge cylindrical base car rotating tire diskworl d shown picture left picture right show axle car tire end discus code used build mode l want experiment model use program starting point start simple let s look make tre e brown cylinder green cone use represent tree treat unit geometric object added child scene graph api let tree new let trunk new new new color base origin let leaf new new new color specular shininess cone trunk trunk leaf trunk cylinder height equal axis lie al ong centered origin plane diskworld lie want trunk plane setting value represents translation applied trunk remembe r object modeling coordinate property object specify transformation transform object coordinate ca e trunk larger compound object represents tree scene rendered trunk ﬁrst transformed modeling transformatio transformed modeling transformation applied tree w hole type hierarchical modeling ﬁrst covered subsection tree object added model rep resents diskworld program model object type nameddiskworldmodel model contain tree tree don t structed individually make additional tree cloning creat ed example add tree model diﬀerent size posi tions tree cloned clone get copy modeling transformation property position andscale changing value property original tree object doe aﬀect clone let turn complicated object axle wheel start creating wheel using torus tire using copy cylinder spoke case instead making new hold component wheel add cylinder child torus remember screen graph node child scene graph api let wheel new tire spoke added s child new new color let yellow new color specular shininess let cylinder new cylinder height diameter new yellow make ta ll use spoke add copy cylinder rotate secon d spoke rotate thir d spoke wheel model use cyl inder make axle axle use cylinder lying wheel lie facing correct direction lie center axle t o correct position end axle just translated axlemodel new model containing wheel axle scale cylinder f use axle rotate axi s cylinder wheel positioned end s axle wheel note second wheel add original wheel model clone need make extra copy axlemodel hand build car copy axle plus component diskworld animated implement animation p roperties appropriate scene graph node modiﬁed frame animat ion rendered example make wheel car rotate rotation axle increased frame change modeling transformation appli ed axle rendered coordinate central axis n axle lie rotation rotates axle attached tire ax detail sample program source code scene graph api building object visible object constructed geometry material seen create simple geometry suitable po int line primitive encountered variety standard mesh geometry suc h use gltriangles primitive section create new mesh geometry scratch ll al o look support working object material polygonal mesh ifss mesh called polygonal mesh section mesh polygon triangle way s draw polygonal mesh webgl us function gldrawarrays requires just list vertex us representation called indexed face set ifs drawn using function gldrawelements addition list vertex ifs us list face index specify triangle look method using th pyramid example note face pyramid square ha s divided triangle order pyramid represented mesh geometry vertex numbered triangular face speciﬁed number t hat vertex number vertex triangle usual vertex t riangle speciﬁed counterclockwise order viewed outside pyramid data need vertex coordinate face index vertex face vertex face vertex face vertex face vertex face face basic polygonal mesh representation doe use face indi ce instead speciﬁes triangle listing coordinate vertex quire number vertex triangle ve rtex shared triangle redundancy pyramid ordinate vertex repeated time object requires geometry material geometry object position attribute hold coordinate s vertex used mesh attribute us typed array hold thechapter scene graph api coordinate vertex triangle make mesh geometry pyramid created like let pyramidvertices new data pyramidgeom position attribute contains x y z coordinate vertex group number vertex group vertex face triangle base second triangle base face right face face left let pyramidgeom new position new geometry used lambert phong material n ormal vector required vertex geometry normal vector lamb ert phong material appear black normal vector mesh stored n attribute buﬀeredgeometry attribute normal hold normal v ector vertex position attribute created th e way position attribute created buﬀeredgeometry object includes method calculating normal vector pyramidgeom simply basic polygonal mesh create normal vector t hat perpendicular face face share vertex vertex diﬀ erent normal vector face produce face appropriate polyhedron side fact ﬂat appropriate polygonal mesh bei ng used approximate smooth surface case using normal vector perpendicular surface mean creating normal attribute hand s eesubsection geometry pyramid use object combining say yellow lambert material pyramid new pyramidgeom new color yellow pyramid look little boring just color possible use diﬀerent material diﬀerent face mesh work ve rtices geometry divided group addgroup method buﬀeredgeometry class used create group vertex geometry numbered according sequence position attribute numbering used addgroup method take parameter number ﬁrst vertex group number vertex group material index material ind ex integer determines material applied group using g roups important vertex group group created pyramid chapter scene graph api base triangle face right face face left face apply diﬀerent material diﬀerent group materia l array material index group index array array material use pyramid s material new color new color new color new color new color array passed second parameter constructor single material ordinarily used pyramid new pyramidgeom pyramidmaterialar ray note use single material mesh ev en mesh geometry us group come group make possible assign diﬀerent material face sample program us code section create pyramid display pyr amid cube using multiple material object s look like way assign diﬀerent color diﬀerent ve rtices buﬀeredgeometry attribute named color speciﬁes color eac h vertex color attribute us array containing set rgb component value f vertex vertex color ignored default use geometry combined material vertexcolors property set true vertex color used color side pyramid color new new base vertex white chapter scene graph api face vertex red right face vertex green face vertex blue left face vertex yellow pyramid new pyramidgeom new color white vertexcolors true color component vertex color geometry actually multiplied color component color lambert material mak e sense color white color component equal case ve rtex color modiﬁed material color example face pyramid solid color lot redundancy color array pyramid color speci ﬁed vertex vertex color given face fact s n ot required vertex face color assigned diﬀerent lors color interpolated vertex interior face example n image random vertex color speciﬁed vertex icosahedral approxi mation sphere demo image demoin online version section demo run som ewhat silly animation vertex color vertex position s animated thegldrawelements function used avoid redundancy basic polyg onal mesh representation us indexed face set pattern requires array face index specify vertex face mesh array vertex speciﬁed single number repeating coordinate oth er data vertex note given vertex number refers allof data vertex vertex coordinate normal vect vertex color data provided attribu te geometry suppose face share vertex vertex diﬀerent normal vector diﬀerent value attribute face vector need occur twice attribute array occurrence combined verte x identical property face ifs representation suitable poly gonal mesh used approximation smooth surface case ve rtex normal vectorchapter scene graph api vertex occurs appro priate object us meshbasicmaterial normal vector used type material use ifs pattern buﬀeredgeometry need provide face index array geometry array speciﬁed geometry s setindex method parameter ordinary javascript array integer pyramid example position attribute geometry contain vertex just f ace index array refer vertex position list vertex pyramidvertices new vertex number vertex number vertex number vertex number vertex number pyramidfaceindexarray triangle base second triangle base face right face face left face pyramidgeom new position new pyramidfaceindexarray thiswouldworkwitha meshbasicmaterial thesampleprogram variation us approach thecomputevertexnormals method used buﬀeredgeometry index array compute normal vector vertex ﬁnds ll face vertex occurs face computes vector p erpendicular face average vector vertex normal note tried pyramid look pretty bad s really appropriate sm ooth surface curve surface addition letting build indexed face set support working curve surface deﬁned mathematically po sibilities illustrated sample program discus parametric surface easiest work presented named parametricgeometry imported separately main sample program imported import parametricgeometry parametric surface deﬁned mathematical function parameter u v uandvare number value function point space surface consists point value function uandvin speciﬁed range function regular javascript function take thr ee parameter u v objectchapter scene graph api function modify vector represent point n space corresponds value uandvparameters parametric surface geometry created calling function grid u v point give collection point surface connected polygonal approx imation surface value uandvare range geometry created constructor new parametricgeometry func slice stack wherefuncis javascript function deﬁnes surface slicesandstacksdetermine number point grid slicesgives number subdivision interval udirection stack thevdirection geometry use make mesh usual way example t sample program surface deﬁned function function surfacefunction u v vector let x y z coordinate point surface calculated u v u v range x u x z range z v y z x y z represents surface created using let surfacegeometry new surf acefunction let surface new surfacegeometry material curvesaremorecomplicatedin theclass representstheabstractidea parametric curve dimension doe notrepresent parametric curve deﬁned function numeric vari ablet value returned function type curve curve object curve type method t return point curve corresponding value parameter curve consists point generated function value tranging curveclass getpoint undeﬁned actual curve deﬁne fo r example chapter scene graph api let helix new function t let s t t range s range pi pi return new s s s oncegetpoint deﬁned usable curve thing wi th create tube geometry deﬁnes surface tube w ith circular curve running center tube sampl e program us helixcurve deﬁned create tube geometry wider tube created new helix second parameter constructor number subd ivisions surface length curve radius circular cr tube fourth number subdivision circumferen ce make tube need curve way make surface curve way rotate curve line generat ing surface rotation surface consists point curve pass thro ugh rotates called lathing image sample program show surface genus ted lathing cosine curve image rotated degree horizontal curve shown surface chapter scene graph api surface created object lathegeometry constructed curve array point tha t lie curve point object type curve lie surface generated rotating curve lathegeometry constructor take form new point slice ﬁrst parameter array second number subdivision surface circle generated point rotated ab axis number stack surface given length point rray sample program create array point object cosine type curveby calling function creates array point curve usi ng value parameter range thing curve simply ﬁll inside curve giving ﬁlled shape use object type whichisasubclassof canvas api covered section object shapeof method used deﬁne path subsection detail function work example create teardrop shape let path new use path create ﬁlled shape need shapegeometry object let shapegeom new path shape created geometry shown left picture chapter scene graph api object picture created extruding shape extrusion ﬁlled shape moved path point s hape pass make solid case shape extruded line segment perpendicular shape common case basic extruded shap e shown right illustration middle object shape b eveled edge detail extrusion documentation source code sample program texture texture used add visual ob ject image texture represented object type talking web page image generally loaded web address image textur e usually created using loadfunction object type function take url web address usually relative addre s parameter return textureobject let loader new let texture imageurl advisable set display color correctly say png jpeg texture containing color information like u se closed domain srgb color space annotated srgb texture considered material apply texture m esh just assign textureobject mapproperty mesh material used mesh texture themapproperty set material constructor thr ee type mesh material basic lambert phong use texture ge neral material base color white material color multiplied color texture material color add tint texture color te xture coordinate needed map image mesh mesh geometry stan dard mesh geometry come texture coordinate deﬁned s basic texture object image u rl assign mapproperty material complication f irst image loading calling load function sta rts process loading image process complete function ret urn using texture object image ﬁnished loading doe cause error object rendered completely black image loaded scene h rendered image texture animation running happ en automatically image appear ﬁrst frame ﬁnished loading t animation need way render scene image loaded fact loadfunction textureloader optional parameter imageurl onload undefined onerror parameter given undeﬁned parameter longer used onloadandonerror parameter callback function onloadfunction deﬁned willchapter scene graph api called image successfully loaded onerror function called attempt load image fails example function render render scene renderitself used onloadfunction texture new r ender possible use onloadwould delay assigning texture material th e image ﬁnished loading add texture later sure set true make sure change eﬀect object redrawn exactly needsupdate need set various object clear updating resource section atexturehas number property set including propert y set miniﬁcation magniﬁcation ﬁlters texture pr operty control generation mipmaps automatically default prop erties likely want change wrap mode texture coordinate ou tside range texture transformation section information property foratextureobjecttex theproperties controlhow sandttexture coordinate outside range treated default clamp likely want make texture repeat direction s etting property value repeatwrapping work best seamless texture edge image match edge left edge right oﬀers interesting variation called mirrored repeat cop y repeated image ﬂipped eliminates seam copy image mir rored repetition use property texture property repeat oﬀset androtation control scaling translation rotation applied texture texture transfor mations value repeatand oﬀsetare type property xand aycomponent rotation number measured radian giving rotation t exture point center rotation actually given anoth er property named center texture tex component texture translation horizontal vertical direction oﬀset texture horizontal ly say remember positive horizontal oﬀset text ure lefton object oﬀset applied texture coordinate t o texture image component property texture scaling horizontal vertical direction example chapter scene graph api scale texture coordinate factor horizonta lly vertically eﬀect image inverse image shrunk fac tor horizontally vertically result copy image horizontal direction vertically explains t repeat note value limited integer demo show image texture applied variety demo suppose want use image texture pyramid tha t created beginning section order apply texture image t o object webgl need texture coordinate object build mesh scratc h supply texture coordinate mesh s geometry object let s pyramid example buﬀeredgeometry object pyramidgeom example attribute named uv hold texture coo rdinates uv refers coordinate object mapp ed sandtcoordinates texture texture coordinate surface referred uv thebuﬀerattribute uv attribute typed array containing pair texture coordinate vertex pyramid example triangular face total vertex need array containing vertex coordinate vertex coordin ate chosen map image reasonable way face choice coordin ate map entire texture image square base pyramid cut triang le image apply side take care come corr ect coordinate deﬁne texture coordinate pyramid geometry follows let pyramiduvs new uv coords triangle base uv coords second triangle base uv coords face uv coords right face uv coords face uv coords left face uv new thesampleprogram showsthepyramidwithabricktexture image program chapter scene graph api transforms order understand work object eﬀectively useful know implement transforms explain ed obj property specify modeling transformation local coordinate property t used directly object rendered instead combined compute pro perty represents transformation matrix default matrix computed automatically time scene rendered ineﬃcient trans formation change objhas property control computed automatically set tofalse update case youdowanttochangethemodelingtransformation youcanca tocompute matrix current value seen modify obj smodeling transformation directly changing value property change position calling function dx dy dz object speciﬁed direction ordinate axis function axis axisis number giving distance translate object object mo ved direction vector axis vector normalized length example translate objby unit direction vector sa y new ze function changing scaling transform b ut change object s rotation function angle angle angle rotate object coordinate ax remember angle measured radian angle adding angleonto value applies rotation ro tations applied function axis angle axisis function rotates object angle angleabout vector line origin point given axis theaxismust normalized vector rotation actually complicated rotation o f object obj actually represented property property mathematical object used computer gra phics alternative euler angle represent rotation change e property automatically updated make sure pr operties represent rotation don t need work directly quaternion emphasize translation rotation functi ons modify position rotation property object apply object coord inates world coordinate applied ﬁrst modeling trans formation object object rendered example rotation world coor dinates change position object positioned origin c hanging value rotation property object change position actual transformation applied object t rendered combination modeling transformation object combined wit h modeling transformation ancestor scene graph transformation stored property object named scene graph api useful method setting rotation vec rotates object facing given point paramet er vec expressed object s local coordinate f object parent ancestor modeling transformation wil l world coordinate object rotated direction equal value property default function used y object useful camera loading model possible create mesh object listing ir vertex face diﬃcult hand simple object s m uch easier example design object interactive modeling program b lender appendix b modeling program like blender export object using diﬀeren t ﬁle format utility function loading model ﬁles variety ﬁle mat utility javascript ﬁles deﬁne example folder preferred format model ﬁles gltf gltf model stored text ﬁle extension binary ﬁle extension binary ﬁles smaller eﬃcient gltf ﬁles deﬁned class gltfloader imported module copy script script model loader folder sourcefolder textbook folder note gltfloader object ifloaderis object type gltfloader use load method start process loading model loader new gltfloader url onload onprogress onerror ﬁrst parameter required url ﬁle tha t contains model parameter callback function onloadwill called loading complete parameter represents data ﬁle onprogress called periodically loading parameter contains information abou t size model loaded onerror called error occurs actually used onprogress note texture loading asyn chronously gltf ﬁle quite complicated contain entire d scene containing multiple object light thing data return ed gltfloader contains object deﬁned ﬁle scene graph f scene model ﬁles used textbook deﬁne meshobject ﬁrst child scene object object come complete geometry ma terial onloadcallback function add object scene look somet hing like function onload data parameter loaded model data let object maybe modify modeling transformation material object add loaded object scene render render scene new object chapter scene graph api sample program usesgltfloader load model us loader model format collada obj work way technique loading model actually l ittle general ve described source code example program f detail ll mention gltf model include animation class support animation including won t discus animation class used animate horse stork model demo demo feature finish chapter look additional feature process learn new aspect graphic instanced mesh class make possible quickly render object possib ly large number object use geometry diﬀe r transformation applied possibly material color e ach copy object called instance andtheprocessofcreatingallofthecopiesisc alledinstanceddrawingorinstancing webgl webgl extension possib le draw instance single function making eﬃcient instancedmesh fairly easy use geometry material fo r mesh constructor speciﬁes maximum number instance t support instance new geometry material count set transformation instance number matrix wherematrixis object type representing modeling transformation similarly set color instance number iwith color wherecoloris type instance color optional provided replace th e color property material class includes method make easy create transfor mation matrix constructor matrix new creates identity matrix modiﬁed ex ample method dx dy dz replaces current matrix transformation matri x translation vector dx dy dz function making scaling rotation matrix make complex transformation f unction multiplying matrix sample program us single instancedmesh make sphere arranged cube sph eres position diﬀerent translation applied instance instance colo r set scene graph api user input real program require kind user interaction fo r web application course program user input using html widget button text input box direct mouse interaction world natural ma ny program basic example using mouse rotate scene rotation implemented using class trackballcontrols class orbitcontrols note class support touchscreen mouse interaction t main diﬀerence class orbitcontrols rotation constrained positive direction view trackballcontrols hand allows completely free rotation diﬀerence trackballcontrols meant used scene continuously animated orbitcontrols used rotation sample program demo trackballcontrols used control class main javascript ﬁle imported module track folder sourcefolder textbook folder class used similar way discus orbitcontrols ﬁrst example create camera away origin usually ad d light object camera object light camera pro viding illumination visible camera orbitcontrols object used rotate camera scene constructor control object parameter camera canvas scene rendered typical set camera new new camera look s origin let light new light viewpoint light move camera camera control new orbitcontrols camera canvas constructor installs listener canvasso control respond mouse event animation running thing need chapter scene graph api rendering scene user able rotate th e scene dragging left mouse button control panning d ragging scene plane screen right mouse button zooming mov ing camera forward backward middle mouse button scroll wheel di sable zooming panning set false false return original view scene calling program running continuous animation ne ed way scene response user action user drag mou se thecontrolsobject generates change event add listener event re pond event redrawing scene just change callback wherecallback function called event occurs function render render scene simply pas renderas value callback unfortunately trackballcontrols object doe emit change event doe way use having animation run ning animation trackballcontrols used way orbitcontrols property panning zooming set trueto disable panning zooming nice feature trackballcontrols implement inertia user release mouse dragging th e motion scene slow stop instead stopping abruptly interesting form mouse interaction let th e user select object scene clicking problem determine o bject user clicking general procedure like follow ray t camera point screen user clicked ﬁnd ﬁrst object th e scene intersected ray s object visible point user clicked unfortunately procedure involves lot calculation fortunately class work araycaster used ﬁnd intersection ray object scen ray just half line stretching given starting point given direction inﬁnity make raycaster object use prog ram raycaster new tell ray use startingpoint direction parameter type value term world coordinate coordinate use scene direction normalized vector length equal exa mple suppose want ﬁre laser gun startingpoint location gun direction direction gun pointing conﬁgure raycaster w ith parameter use ﬁnd object struck laser beam alternatively conveniently processing user nput express ray term camera point screen chapter scene graph api screencoords camera thescreencoords given expressed clip coordinate mean horizontal coordinate range left edge viewport right vertical coordinate range clip coordinate called normalized device coordinate need convert pixel coordinate canvas clip coordinate s way given m ouse event evt let r let x convert mouse location va pixel coords let y let convert canvas pixel coords t o clip coords let b new b camer told raycaster ray use ready t o ﬁnd intersection ray object scene functi objectarray recursive ﬁrst parameter array raycaster search intersection current ray object array second paramete r istrue search descendant object scene graph falseor omitted object array searched example search inte rsections object scene use true return value intersectobjects array javascript object item array represents intersection ray function ﬁnds intersection just ﬁrst intersection foun d array array sorted increasing distance starting point ray just want ﬁrst intersection use ﬁrst element array element array object property conta information intersection suppose itemis array element useful property intersected ray point intersection given world coordinate information implement interesting user interaction demo us basic mouse interaction let user edit scene scene show number tapered yellow cylinder s tanding green base user drag cylinder add delete cylinder rotate scene set radio button let user select action performed m ouse s screenshot program demo chapter scene graph api let s look action implemented objec t base cylinder program base referred ground object child namedworld use worldobject make easy rotate set visible object moving camera light al l drag add delete action look intersection object ray exten d camera mouse position new b camer let intersects dren zero intersection d lookatintersects whichrepresentsanintersectionwiththeobjectthati svisibleatthemouse position intersects object user clicked intersects point intersection delete action simplest implement user click cylinder cylinder removed scene ﬁrst intersection ground deleted clicked object cylinder sh ould deleted intersects ground intersects render add action add cylinder user cli cked ground case point intersection tell cylinder added interesting issue point intersection world coordinate order add cylinder child world need know point intersection local coordin ate world coordinate system diﬀerent world rotated fortunately method worldtolocal v used transform v world coordinate local coordinate object thi s method doe return value modiﬁes coordinate vector localtoworld method add action implemented like item intersects ground let locationx world coords intersecti point let locationz let coords new locationx locationz y coords transform local coords addcylinder add cylinder cor rected location render drag action determine cylinder clicke d using test delete problem moving cylinder er drag mouse raise new issue know cylinder mouse m oves transform new mouse position new position c ylinder use raycaster ﬁrst thought create ray t camera new mouse position use ray ﬁnd intersection ground cylinder point intersection unfortunately thi s put baseof cylinder mouse position cylinder jump wrong position soon started moving mouse realized didn t want track tersection ground needed track intersection plane lie height original pointchapter scene graph api intersection implement add invisible plane height just dragging use intersection plane instead intersect ion ground invisible object set visibleproperty material false shadow thing missing image shadow ev en didn t notice lack consciously image look wrong shadow c add nice touch realism scene opengl including webgl generate sha dows automatically way compute shadow implemented opengl bu t tricky use completely realistic physically method w hich called shadow mapping implemented shadow mapping certainly trivial use easier trying thing scratch online demo show us shadow mapping light cast shadow animated watch shadow change light image demo demo basic idea shadow mapping fairly straightforward tell part scene shadow look scene point vi ew light source thing visible point view light illumi nated light thing visible light shadow ignoring th e possibility transparency indirect reﬂected light handled shadow mapping implement idea place camera light source picture fact don t need picture need depth buﬀer picture ndered value stored depth buﬀer given pixel contains essentially distance light object visible light point object il luminated light object greater depth value stored depth buﬀer t hen object shadow depth buﬀer shadow map point v iew camera consider point object rendered came ra s point view point shadow just transform point th e camera s viewing coordinate light s viewing coordinate check depth transformed point depth greater corresponding value shadow map th en point shadow note light light cast sha dows need shadow map light computationally expensive compute shadow map t o apply shadow disabled default shadow need thing need enable shadow computation webgl renderer sayingchapter scene graph api true onlydirectionallights andspotlights cast shadow shadow light enabling shadow renderer set li ght scastshadow property true true light cast shadow furthermore shadow enabled object cast receive shadow receiving shadow mean shadow visible th object casting receiving enabled separately object true object cast shadow true shadow object make shadow y look pretty bad problem usually conﬁgure came ra used make shadow map eachdirectionallight orspotlight shadow camera used create shadow map point view light directionallight property named shadow type turn property named cameraof hold shadow camera shadow camera directional light shadow camera directional light us orthographic project ion orthographic projection conﬁgured view volume limit xmin xmax ymin ymax near andfar subsection directional light dl limit correspond property value view coordinate shadow camera relative important make sure object scene cast shadow view volume shadow camera furthermore don t want limit t oo big scene occupies small camera s view volume smal l shadow map contains useful litt le information shadow shadow won t accurate default value assume v ery large scene relatively small scene set shadow camera spotlight type us perspective projection use camera limited v iew shadow fromspotlightsbutnotfrompointlights foraspotlight sl theshadowcameraisconﬁguredby property fov vertical ﬁeld view angle given degree rat radian default value forfovis probably ok change spotlight s cut oﬀ angle want change fovto match sure set appropriate value nearandfar include scene little extra practical nearandfarare distance accurate shadow want increase s ize shadow map shadow map kind texture image default pixel increasechapter scene graph api accuracy shadow using larger shadow map light light set value property example m sure value absolutely req uired commonly used texture cubemap texture skybox created viewed simple scene shown lored background nice scene environment interio r building nature scene public square s practical build representation s complex environment geometric primitive reasonably good eﬀe ct using texture technique used called skybox skybox large cube eﬀectively inﬁnitely large diﬀerent texture applied face cube texture image environment viewer inside cube texture im age cube ﬁt provide complete view environment directio texture image make called cubemap texture image match edge cube form seamless view environment cube map actual physical environment taki ng picture environment direction left right forwa rd realistically taking photograph cover direction overlap using software stitch image complete cub e map direction referred relation coordinate ax posi tive x negative x positive y negative y positive z negative z image listed order specify cube map example ﬁrst picture sho w image cube map laid positive y image t op negative y image negative x positive z positi ve x negative z image laid row second picture show image used textu cube viewed outside image match edge s cube thiscubemap andothersusedinthissection arebyemilpe rsson berofcubemapsavailablefordownloadat http scene graph api creative common license skybox conceptually large cube used t camera light object scene inside cub possible construct skybox hand just way make easy use skybox background scene class represent cube map enclose scene skybox simply assigning cubetexture value property value property normal textureor acolor acubetexture created cubetextureloader load image make cube map loader method named load work way theload method textureloader subsection ﬁrst parameter method array string giving url image cube map example let textureurls url face cube map note order w hich image list ed important loader new cubetexture textureurls onload undefine d onerror onloadis function called texture ﬁnishe d loading function example set equal cubetexture scene new background parameter onerror function called texture loaded ﬁrst parameter require sample program show webgl scene ﬁrst scene show cube image cube map applied normal text ures face cube second scene us cube map skybox rota te view second scene look part skybox m seamless environment completely encloses scene reﬂection refraction reﬂective surface shouldn t just reﬂect r eﬂect environment useenvironment mapping simulate reﬂection environment mapping called reﬂection environment mapping us cube map t exture given point surface ray cast camera position point ray reﬂected oﬀ surface point reﬂected ray hit cube termines point texture mapped point surface sim ulation perfect reﬂection surface point simply painted colo r texture note surface doe literally reﬂect object scene reﬂects content cube map texture cube map texture used skybox skybox object scene look like s urface mirror perfectly reﬂects environment type reﬂection easy need make mesh material set envmap property equal cubemap texture object example fcubetexturechapter scene graph api texture object obtained using skybox example make sphere perfectly reﬂects textur e saying let geometry new let material new color white color multiplied environme nt map envmap cubetexture cubetexture used environm ent let mirrorsphere new geometry material eﬀect look good want use textu scenebackground notethatnolightingwouldbenecessaryinthescene sincet hesphereusesa meshbasicmaterial colorsseen onthe spherecomeentirely fromthe environm ent map basiccolor ofthe sphere material environment map color multiplied basic color example basic colorof material white sphere color exactly equa l color texture diﬀerent base color environment map texture tinted color apply regular texture map s phere used place color reﬂection skybox combin ed texture sample program demonstrates environment mapping variety object variet y skybox texture option base color object image program left show reﬂective arrowhead shape white base color right object model horse taken base color pink similar program available demo ve rsion section demo refraction refraction occurs light pass transparent translucent object ray light bent pass inside object outside bending depends ed index refraction material outside material inside object mor e exactly depends ratio index perfectly transparent objec t visible distortion induced bending unless ratio aning bending light refraction implemented using environment map reﬂection refracting object doe actual environment r efracts cubemap texture thatchapter scene graph api used environment map refraction special ma pping used environment map texture mapping property texture tell texture mapped surface cubemap texture used refr action set default value property cubemap texture appropriate reﬂection refraction example loading cubemap texture setting mapping property use refrac tion cubetexture new textu reurls addition refractionratio property material applied refracting object set value number closer bending light default value close object wil l invisible example us value let material new color white envmap cubetexture refractionratio give strong refractive eﬀect set material color white look like tinted glass property set reﬂectivity refractive object value tell light t ransmitted object reﬂected surface default va lue give transmission light smaller value make object look like ou t cloudy glass block light sample program copy modiﬁed refraction instead reﬂection object l ook like glass instead mirror program checkbox make glass look cloudy increase refractionratio following image program perfectly transmissive arrowhead shown ﬁrst image cloudy sphere second notice sphere show inverted image object b ehind reﬂection refraction example environment skybox single object reﬂects refracts environment f scene includes onechapter scene graph api object object won t cubemap texture e cubemap texture object won t reﬂect refract complete solution problem webgl make object reﬂect fract object making environment map includes object objec t moving mean make new environment map frame recall environment map taking picture environment diﬀ erent direction kind camera just won t detail cubecamera picture scene g iven point view make cubemap texture image use camera hav e place location makethe object invisiblesoitdoesn t inthe picture snap picture apply environment map object animated scene frame need tive object scene obviously computationally expensive result isn t perfect thing won t multiple reﬂections object reﬂect bac k forth time need diﬀerent kind rendering th e used opengl return topic dynamic cubemaps subsection alternative rendering technique chapter introduction webgl chapter turn towebgl version opengl web covered previous chapter us webgl g raphics course diﬃcult use webgl directly doing give trol graphic hardware learning good introduction modern graphic s programming webgl diﬀerent opengl studied chapter andchapter turn learned previous chapter wi ll carry webgl intention cover webgl entirety ar e webgl feature mention important f advanced computer graphic cover core feature ne eded graphic advanced aspect bonus version webgl use web gl based opengl e version opengl designed use embedded syste m smart phone tablet opengl e original opengl embedded sys tems similar opengl version opengl e introduced major change actually asmaller simplerapithatputsmoreresponsibilityonthep rogrammer forexample function working transformation glrotatef andglpushmatrix eliminated api making programmer responsible keeping trac k transformation webgl doe use generate geometry doesn t use function glcolor orglnormal specify attribute vertex webgl supported web browser device webgl disabled o f hardware limitation webgl based opengl e supported device suport webgl program written webgl al work webgl learn version c arry newer version textbook concentrate webgl al o cover new feature webgl try make clear talking feature apply webgl side webgl program program s written javascript programming language web second writ glsl language writing shader program run gpu webgl u s glsl e opengl shader language embedded system version webgl use shader whichhassomesigniﬁcant diﬀerences new feature try cle ar language discussing introductory chapter webgl stick b asic graphic learn structure webgl program learn m ost javascript introduction webgl api learn write use simple shaders chapter graphic learn great deal abo ut glsl programmable pipeline opengl us pipeline graphic processing data provided program pass series processing stage th ultimately produce pixel color seen ﬁnal image program enable disa ble step process depth test lighting calculation b ut way change happens stage functionality ﬁxed programmable pipeline itbecamepossiblefortheprogrammer replace certain stage pipeline prog ram give programmer complete control happens stage opengl programmability optional complete pipeline av ailable program didn t need ﬂexibility programmability webgl us programmab le pipeline mandatory way use webgl writing program imple ment graphic processing pipeline program written pipeline edshaders webgl need write vertex shader called vertex primitive afragment shader called pixel primitive aside f rom programmable stage webgl pipeline contains s everal stage original pipeline example depth test stil l ﬁxed functionality enabled disabled webgl way open gl section cover basic structure webgl p rogram data ﬂows javascript program graphic pip eline vertex fragment shaders note later version opengl introduced n ew programmable stage addition vertex fragment shaders webgl covered book webgl graphic context tousewebgl youneedawebglgraphicscontext thegraphics contextisajavascriptobject method implement javascript webgl api webgl draw image html canvas kind canvas element used api covered section graphic context associated particular canvas graphic context webgl obtained calling function webgl wherecanvasis dom object representing canvas webgl wo uld simply instead return value getcontext nullif context created getting webgl graphic cont ext look like canvas webglcanvas gl webgl maybe ntext gl throw new error webgl supported t create graphic s context chapter introduction webgl ﬁrst line get reference html canvas bgl used program drawing glfor variable use glfor webgl graphic context discussion code assumes t hat html source web page includes canvas element webglcanvas s uch canvas webglcanvas nvas second line code webgl return nullif web browser doe support webgl parameter getcontext sincenullis considered befalsein javascript used booleancontext line test return value isnull case code throw error handled e lsewhere probably showing error message user furthermore cod e throw exception browser support canvas program use initialization function form function init try canvas webglcanvas gl webgl gl throw new error webgl supported catch e report error return initgl function initializes webgl graphic context javascript initialization inthisfunction canvasandglareglobalvariables initgl isafunction deﬁnedelsewhere script initializes graphic context includ ing creating installing shader program init function called page loaded arranged example assigning init scr ipt graphic context gl created used function webgl api example command enabling depth te st written glenable gldepth test opengl test note function constant api referen ced graphic context gl graphic context conventional r emember just ordinary javascript variable programmer old browser required create webgl context includes internet explorer t point using internet explorer chapter introduction webgl shader program drawing webgl requires shader program consist s vertex shader fragment shader shaders written version g lsl programming language webgl used glsl e webgl use gls l e glsl e discussion glsl e explai n change version later glsl based c programming language vertex shade r fragment shader separate program main function shaders compiled separately linked produce complete shader pr ogram javascript api webgl includes function compiling shaders t hen linking use function source code shaders javascrip t string let s work take step create vertex shader let vertexshader shader vertexshader vertexshadersource vertexshader function used webgl graphic s context gl parameter vertexshadersource string contains source code shader er rors source code cause compilation fail silently need check compilation error calling function vertexshader status return boolean value indicate compil ation succeeded event error occurred retrieve error message vertexshader return string containing result compilat ion exact format string speciﬁed webgl standard string meant b e fragment shader created similar way shaders hand create link program shaders need attached program object linking code take form let prog prog vertexshader prog fragmentshader prog shaders successfully compiled error occur linked complete program example vertex fragmen t shader share certain kind variable program declare variable diﬀerent type error occur link time checking link err or similar checking compilation error shaders code creating shader program pretty t convenient pack reusable function function use example chapter creates program use webgl context gl return s identifier program error occurs compi ling linking program exception type error thrown t error string contains compilation linking introduction webgl function createprogram gl vertexshadersource fragmen tshadersource let vsh shader vsh vertexshadersource vsh vsh status throw new error error vertex shader folog vsh let fsh shader fsh fragmentshadersource fsh fsh status throw new error error fragment shader infolog fsh let prog prog vsh prog fsh prog prog status throw new error link error program folog prog return prog step tell webgl context e program progis program identiﬁer returned function d calling prog possible create shader program n switch program time calling middle rendering image example us diﬀerent program type material advisable create shader program need initialization fast operation compiling linking slow s o s better avoid creating new program process drawin g image shaders program longer needed deleted free resource consume use function shader program data flow pipeline webgl graphic pipeline render image data d eﬁnes image come javascript pass pipeline process ed current vertex shader fragment shader stage pipeline need understand data placed javascript pipeline data processed pass pipeline basic operation webgl draw geometric primitive webgl us just seven opengl primitive introduced subsection primitive drawing quad polygon removed remaini ng primitive draw point line segment triangle weggl seven ty pe primitive identiﬁed constant strip loop strip fan whereglis webgl graphic introduction webgl webgl used draw primitive general c ategories data provided primitive kind data refer red attribute variable just attribute uniform variable just uniform primitive deﬁned type list vertex diﬀerence tribute uniform uniform variable single value en tire primitive value attribute variable diﬀerent diﬀerent vertex attribute speciﬁed coordina te vertex vertex coordinate attribute vertex primo tive set coordinate possible attribute color s een opengl allows specify diﬀerent color vertex primitive c thing webgl case color attribute ha nd maybe want entire primitive uniform color case lor uniform variable quantity attribute uniform dep ending need include normal vector material property texture coordinate t hey used certain attribute doesn t really make sense v ertices primitive texture coordinate geometric transform pplied primitive naturally represented uniform variable important understand webgl doe c ome anypredeﬁned attribute vertex coordinate prog rammable pipeline attribute uniform used entirely programmer far webgl concerned attribute just value passed vertex sh ader uniform passed vertex shader fragment shader webgl doe n ot assign meaning value meaning entirely determined shade r value set attribute uniform used drawing primitive determined source code shaders use primitive drawn understand need look happens pipe line drawing primitive javascript program speciﬁes value s attribute uniform shader program attribute specify ar ray value vertex uniform specify single value send value gpu drawing primitive primitive drawn cal ling single javascript function point gpu take executes shader pro gram drawing primitive gpu call vertex shader vert ex attribute value vertex processed passed input ver tex shader value uniform variable passed vertex shader way w orks attribute uniform represented global variable vertex s hader program calling shader given vertex gpu set value var iables appropriately speciﬁc vertex output vertex shader specify coor dinates vertex clip coordinate subsection doe assigning value special variable named glposition position computed applying transformatio n attribute represents coordinate object coordinate exactly position computed programmer position vertex primitive computed stage pipeline clip away part primitive wh ose coordinate outside range valid clip coordinate coordinate axis primitive rasterized determined pixel lie insid e primitive gpu call thefragmentshaderonceforeachpixelthatliesintheprimi tive thefragmentshaderhasaccesschapter introduction webgl uniform variable attribute use s pecial variable named glfragcoord contains clip coordinate pixel pixel coord inates computed interpolating value glposition speciﬁed vertex shader interpolation s stage come vertex s hader fragment shader quantity coordinate work s ame way vertex shader computes value quantity vertex pr imitive interpolator take value vertex computes value pixel primitive value given pixel input fragment shader s hader called process pixel example color opengl follows pattern th e color interior pixel primitive computed interpolating color ver tices glsl pattern implemented using varying variable varying variable declared vertex shader n fragment shader vertex shader responsible assigning value var ying variable vertex primitive assign diﬀerent value variable terpolator take value produced executing vertex shader vertex th e primitive interpolates value produce value pixel fragm ent shader executed given pixel value varying variable interpolated value pixel fragment shader use value computation varying variable exist communicate data vertex shader fragment shader deﬁned shader source code used referred javascript api note entirely programmer t o decide varying variable deﬁne gotten end pipeline tha t job fragment shader simply specify color pixel doe assigning value special variable named glfragcolor value used remaining stage pipeline summarize javascript program sends value s attribute uniform variable gpu issue command draw primit ive gpu executes vertex shader vertex vertex shader use value attribute uniform assigns value glposition varying variable exist shader clipping rasterization interpolation gpu executes fragment shader eachpixelintheprimitive thefragmentshadercanusethev aluesofvaryingvariables uniform variable glfragcoord computes value glfragcolor diagram summarizes ﬂow data chapter introduction webgl vertex shader fragment diagram complete special vari ables haven t mentioned important question texture used understand diagram good start understanding webgl glsl e diagram applies special va riable glfragcolor instead fragment shader deﬁne output vari able represent color glsl e word attribute varying used declaring variable intheactualshaderprogramsourcecode insourcecodefort attributevariables variable input vertex sh ader varying variable variable vertex shader variable th e fragment shader variable glfragcolor replaced variable fragment shader u se term areactuallymoreappropriatetosystemswithaddi tionalpipelinestages variable stage variable nex t stage case people use term attribute varying discussing webgl e ven using glsl e value uniform variable s time start looking actual webgl code c oncentrate javascript ﬁrst need know little glsl glsl familiar basic data type ﬂoat int andbool new predeﬁned data type represent ve ctors matrix example data type vector value variable list number similarl y data type represent vector global variable declaration vertex shader marke d asattribute varying uniform asin oruniform glsl e stick versionchapter introduction webgl time variable declaration thes e modiﬁers deﬁnes variable local vertex shader global variable fragment optionally uniform varying declared modiﬁer varying variabl e declared shaders type allows gls l compiler determine attribute uniform varying variable used shad er program javascript program need way refer icular attribute uniform variable function used reference uniform variable shader program glrefers webgl graphic context take parameter identiﬁer compiled program wa s returned uniform variable shader source code example progidentiﬁes shader program uniform variable named color location colorvariable obtained javascript statement coloruniformloc prog color location coloruniformloc used set value uniform variable example coloruniformloc function family function referred grou p similar family glvertex opengl represents suﬃx tell number type value provide d variable case take ﬂoating point value appropriate s etting value uniform variable type number value type f ﬂoating point integer boolean uniform use pas represent falseor represent true v added suﬃx value passed array example coloruniformloc family function setting value uniform matrix variable later value uniform variable set time sh ader program compiled value remains eﬀect changed b y string passed second parameter uniform variable shader program return value isnull return value nullif uniform variable declared shader source code active program variable declared actually u sed active doe location compiled program occasionall y caused problem commented shader program debugging purpos e accidentally variable inactive doing value attribute turning attribute situation complicate d attribute diﬀerent value vertex primitive basic ide complete set data attribute copied single operation j avascript array memory accessible gpu unfortunately setting thing t o make operation possible nontrivial regular javascript array suitable t purpose eﬃciency need data block memory holding numerical valu e successive memorychapter introduction webgl location regular javascript array don t fo rm ﬁx problem new kind array called typed array introduced javascri pt encountered typed array working chapter short introduction typed array subsection typed array ﬁxed length assigned c reated hold number speciﬁed type diﬀerent k inds typed array diﬀerent kind numerical data use hold ﬂoating point number typed array use like regular array assign value element value converted ﬂoating point number value interpreted number converted nan value data transferred javascript attri bute variable placed typed array possible eﬃciency w ork typed array directly working regular javascript array copying data typed array use webgl attribute data transferred vbo vertex buﬀer object vbos introduced opengl discussed brieﬂy insubsection vbo block memory accessible gpu use vbo ﬁrst function create example colorbuffer transferring data vbo bind vb o buffer colorbuffer ﬁrst parameter called speciﬁes vbo used target buffer used buﬀer used store value attribute vbo time bound given targ et function transfer data vbo doesn t mention t us vbo currently bound copy data buﬀer use example buffer colorarray draw ﬁrst parameter target data transfe rred vbo bound target second parameter typed array hol d data javascript element array copied buﬀer th e size array determines size buﬀer note straightforward tra nsfer raw data byte webgl doe remember data represents ﬂoats ints o r kind data parameter constant draw draw draw hint webgl data used help webgl manage data e ﬃcient way value drawmeans intend use data time chang ing example use data prog ram load buﬀer initialization using draw webgl probably store data graphic card accessed quickly graphic hardware second value draw data used time streamed card needed th e draw value meant dat used multiple time modiﬁcations introduction webgl getting attribute data vbos story yo u tell webgl use vbo source value attribute s o ﬁrst need know location attribute shader program y ou determine using example colorattribloc prog color assumes progisthe shader program color attribute variable inthevertexshader thisisentirelyanalogousto exceptthatthereturn value integer requested attribute doe exist active attribute usually take diﬀerent value diﬀe rent vertex possible use value vertex fact default havior single attribute value vertex set using family function work similarly usual case want value attribute vbo enable use vbo attribute s calling colorattribloc parameter location attribute sh ader program returned command particular vbo just turn use buﬀers speciﬁed attribute reasonable method just initialization use data th e vbo turned oﬀ calling colorattribloc finally draw primitive us attribute data vbo tell webgl buﬀer contains data bit th buﬀer interpreted vbo bound array buffer target function called example buffer colorbuffer colorattribloc fa lse assuming colorbuﬀer refers vbo colorattribloc location attribute tell webgl value attribute bu ﬀer just calling necessary desired buﬀer bound ﬁrst parameter attribute location second number value vertex example providin g value second parameter provide number verte x second parameter ﬂoat parameter speciﬁes type value indicates value ﬂoating point number o ther value byte short integer value note webgl attribute ﬂoating po int value provide integer value attribute converted ﬂoating po int parameter value match data type buﬀer example data came parameter parameter use false parameter add ﬂexibility won t need look documentation interested falseparameter integer value converted ﬂoating point value webgl attribute variable integer type used conﬁgure attribute value provided attribute converted ﬂoating point inappropriate attribute use introduction webgl attribute webgl introduces new function work correctly integer data lot using vbo provide value attribute requires separate command addition generating data placing typed array set command colorattribloc prog color colorbuffer colorattribloc buffer colorbuffer colorattribloc fa lse buffer colorarray draw command occur po int javascript code ﬁrst command initializat called data attribute need changed mi ght used just initialization used data need t o modiﬁed called establishes vbo used command remember d attribute used shader program drawing primitive shader program created value bee n set uniform variable attribute take just command draw primo tive way function primitivetype startvertex vertexcount ﬁrst parameter seven constant identif y webgl primitive type loop andglpoints second parameter integer determine subset available vertex used primitive placed attribute value number ver tices vbos primitive rendered attribu te value enabled attribute pulled vbos startvertex starting vertex number data vbos vertexcount number vertex primitive startvertex zero vertexcount total number vertex data available f example command drawing single triangle use word array buffer little confusing data stored vertex buﬀer object r ather javascript array whengldrawarrays ﬁrst introduced opengl used ordinary array ra ther vbos starting opengl gldrawarrays used ordinary array vbos webgl support ordinary array dropped work vbos refers array encountered original version gldrawarrays insubsection section introduced alternative function drawing primitive gldrawelements used drawing indexed face set function available webgl attributedataisnotusedintheorderinwhichitoccursint hevbos instead separate list index determines order data introduction webgl extra vbo required hold list index use d purpose vbo bound target array buffer buffer vbo hold integer value type short webgl int value loaded javascript typed array type byte short creating vbo ing data multistep process example elementbuffer arraybuffer elementbuffer let data new arraybuffer data draw assuming attribute data loaded vb o used draw primitive take form primitivetype count datatype startb yte vbo contains vertex index bound element array buffer target function called ﬁrst parameter primitive type datatype speciﬁes type data loaded vbo short byte thestartbyte starting point vbo data primitive usually zero note starting point given term byte vertex number typical example byte occasion use function later ﬁnd confusing review subsection situation webgl opengl webgl vertex array object large number function needed work attribute excessive situation worse program draw diﬀerent object ea ch object require buﬀers setting attribute pointer d rawing object necessary attribute typical graphic program use attribute vertex coordin ate normal vector material property texture coordinate lo t function call object help situation webgl introduced vertex array object vaos vao section memory typically stored graphic c ard hold setting used rendering function includes enabled state attribute reference buﬀers used attribute d ata value property set calling includes setting reference buﬀer used attribute divisor discussed subsection webgl default vao us vao selected use alternative vao ﬁrst create calling vao return value vao identiﬁer vao created new v ao property default value particular ve rtex attribute disabled associated buﬀers actually use vao need bind t chapter introduction webgl vao function aﬀect use attribute apply vao s currently bound example setting stored current vao get data need draw primitive c urrent vao program switch vao time simply b y calling using default vao program idea program draw object use diﬀerent vao object vao object bound setting f object conﬁgured drawing object program simply need bi nd vao object single function replaces potentially large num ber function call needed restore appropriate setting attribu te individually advantage just nicely organized muc h eﬃcient command need sent gpu conﬁgure attri butes sample webgl program us diﬀerent vao diﬀerent object program us technique t hat covered look drawmodel function us vaos vbos webgl instanced drawing s common scene contain multiple copy primitive using vertex coordinate diﬀerent transformatio n color property copy webgl make possible draw copie s single function called instanced drawing instancing individual copy primitive ar e called instance function use instanced drawing instanced property vary in tance thing likely uniform variable drawing in tance separately instance get just value property applies ll vertex instance property represented attribute variable shader program uniform variable conﬁgured attribute specify attribute instanced property ju st need specify divisor attribute calling attribid divisor attribid identiﬁer attribute returned divisoris integer passing zero divisor t urn oﬀ instancing attribute divisoris positive value attribute apply th instance example divisoris ﬁrst entry attribute value array applies ﬁrst second instance second value array applies fourth ﬁfth sixth instance practice value o fdivisoris usually meaning instance entry attribute value ar ray instanced property addition setting diviso r necessary enable attribute load data vbo conﬁgure wit course necessary draw primitive using sample webgl program example instanceddrawing thereisalotintheprogramthat youwon tunderstanduntilwehave covered webgl program draw colored disk w disk approximatedchapter introduction webgl primitive type fan attribute used attribute hold coordinate vertex instanced attribute tha t hold color disk instanced attribute hold diﬀerent translation fo r disk point program used vertex buﬀer object disk animated disk color don t change s ince color don t change color value disk loaded vbo p rogram initialization usage parameter set drawbecause data modiﬁed disk moving value tra nslations disk change frame new data loaded correspo nding vbo frame drawbecause data loaded used finally note vaos instancing require webg l functionality available implementation webg l optional extension webgl extension discussed section example ready start working ﬁrst webgl program section begin s detail webgl graphic context fol lowed short introduction glsl programming language webgl shaders th hand turn standard ﬁrst example rgb color triangle webgl context option saw subsection webgl graphic context created function wherecanvasis reference canvas element graphic context draw function take optional second pa rameter used set value certain option graphic context sec ond parameter needed want value option parameter javascript object property name option example context creation option let option alpha false depth false gl webgl option option discus mo t useful one determines drawing buﬀer alpha componen alpha component image canvas alpha component possible pixel canvas transparent translucent le tting background web page canvas default value true safe set value tofalse want canvas fully opaque setting false doe stop doing alpha blending drawing color image colo r rgb color component computed blending setting valu e false necessary program output pixel alpha component nd don t want image blend background canvas note tha t graphic context alpha component handled eﬃciently b page use rgba color display chapter introduction webgl determines depth buﬀer allocated default value istrue need depth buﬀer enable depth test depth buﬀer generally needed graphic application doesn t need elimin ating depth buﬀer save memory gpu antialias used request antialiasing applied image webgl implementation ignore request example ant ialiasing supported gpu default value true antialiasing improve quality image signiﬁcantly increase computation time preservedrawingbuﬀer determines content drawing buﬀer discarded image copied web page default value false drawing buﬀer internal webgl content visible screen web browser copy image web page default va lue forpreservedrawingbuﬀer mean happens webgl discard copy o f image allows gpu free resource operation long rendering function completely redraw image time called default ﬁne y ou set value true need image add t incrementally time bit glsl section cover glsl thoroughly wil l need know language understand example section thi s section discusses glsl e remember language used bgl webgl vertex fragment shader contain global variable decl arations type deﬁnitions function deﬁnitions function main entry point shader function called gpu process vertex fragment themain routine take parameter doe return value take form void main alternatively declared void main void control structure limited ifstatements form c java limitation placed forloop syntax whileanddo loop allowed data structure include array structs limitation cover section glsl s strength lie data type function s working vector matrix section need data type ﬂoat type represent respectively ﬂoating point nu mbers variable declaration similar example attribute coords vertex shader rgb float width height uniform u size varying v color attribute uniform andvarying variable discussed section used communication javascript shader program d vertex shaderchapter introduction webgl fragment shader example used pre ﬁxes u v name variable required common construct value vector individual number shorter vector glsl ﬂexible notation doing using th e variable declared example write rgb construct constant vcolor rgb construct nstant glposition coords constant assignment statement glposition special variable used vertex shader coordinate vertex glposition type requiring number coordinate speciﬁed homogeneo coordinate subsection special variable glfragcoord fragment shader giving coordinate pixel homogeneous coordinate glfragcolor giving rgba color component pixel vertex shader need minimum attribute c oordinates vertex drawing s natural attribute type assume value attribute expressed clip coordinate complete source code vertex shader simple attribute coords void main glposition coords corresponding minimal fragment shader simpl y draw yellow precision mediump float void main glfragcolor strange ﬁrst line fragment shader exp lained like required explained section rgb triangle webgl ready look ﬁrst webgl example draw usual rgb color triangle shown source code code includes usual init andcreateprogram function discussed subsection andsubsection chapter introduction webgl turned oﬀ alpha depth option n webgl context won t discus function example us attribute type specify coordinate vertex triangle coordinate range default webgl coordinate triangle vertex coordinate use range coordinate transformation needed color diﬀerent vertex tr iangle vertex color attribute use attribute type vertex color alpha component needed program color interior pixel triangle interpolated color vertex interpolation mean need varying variable repre sent color varying variable assigned value vertex shader value used fragment shader look like need color variable attribute v arying variable t use variable purpose attribute carry t vertex color javascript vertex shader varying variable carry color fr om vertex shader fragment shader case color value going vertex s hader value coming shader just copy value col attribute varying variable pattern actually fairly common th e vertex shader attribute coords attribute color varying v color void main glposition coords vcolor color fragment shader copy incoming color value varying variable glfragcolor speciﬁes outgoing color fragment precision mediump float varying v color void main glfragcolor v color order compile shader program source code th e shaders javascript string case construct string concatenating constant string representing individual line code example fragment shader source code included javascript script global variable const fragmentshadersource precision mediump float varying v color void main glfragcolor v color line feed character end line required allows gl sl compiler include meaningful line number error me sage generates javascript need global variable webgl context need provide value attribute variable mplicated process discussed insubsection need global variable represent location ttribute inchapter introduction webgl shader program represent vbos hold t attribute value use variable let gl webgl graphic context let attributecoords location attribute named coords let buffercoords vertex buffer object hold value s coords let attributecolor location attribute named color let buffercolor vertex buffer object hold value acolor graphic context created init function variable initialized function initgl called init function creates shader program using createprogram function subsection function initgl let prog createprogram gl vertexshadersource fragmen tshadersource prog attributecoords prog coords buffercoords attributecolor prog color buffercolor set value attribute need diﬀerent jav ascript command count placing attribute value typed array command getattriblocation andcreatebuﬀer likely called just attribute p ut initialization routine command draw function draw image program draw called just division code fun ctions really necessary general draw function ant called time particularly bad idea create new vbo time draw called drawing triangle draw function ﬁlls canvas black background using webgl function exactly functionality opengl function glclearcolor andglclear code function draw specify color used clearing bufferbit clear canvas black set value coords attribute let coords new buffer buffercoords buffer coords draw attributecoords f alse attributecoords set value color attribute let color new buffer buffercolor buffer color draw attributecolor fa lse attributecolor chapter introduction webgl draw triangle function variable coordscontains value attribute named coords vertex shader attribute represents xandycoordinates vertex attribute type number required vertex value coordsis created constructor take ordinary javascript array parameter value javascript array copied nto newly created typed array similarly variable colorcontains value color attribute vertex shader number vertex accounted piece rgb triangle pr ogram read complete source code ﬁts shape stamper example introduce new feature examp le simple interactive program user place shape canvas clickin g canvas mouse property shape taken set popup menu th e property include color degree transparency shape se veral possible shape drawn shape centered point user click sample program demo version program ﬁnd version section demo rgb triangle example coloris attribute diﬀerent color assigned vertex triangle primitive program vertex fact pixel primitive color mean lor uniform variable example allows transparency color need alph component rgb component convenient program treat alp ha rgb component separatequantities soirepresentthemastwoseparateuni formvariablesintheshaderprogram color alpha uniform used fragment shader t o assign fragment s color fact s thing fragment shader doe c omplete source code follows precision mediump float uniform u color uniform float u alpha void main glfragcolor u color u alpha work uniform variable javascript nee d know location shader program program get location uni form variable intigl function using command uniformcolor prog u color uniformalpha prog u alpha program popup menu let user select lor alpha used drawing primitive shape drawn value s menu determine value uniform chapter introduction webgl let colornumber number colo rchoice let alpha number opacitycho ice uniformcolor colorlist colornumber uniformalpha alpha value uniform variable set using family function case colorlist colornumber array number holding rgb color component s color function used set value mean ﬂoating point value provided v mean va lues array note ﬂoating point value required match type uniform variable shader value alphais single ﬂoating point number corresponding unifo rm variable set using order alpha component color eﬀect alpha blending enabled initialization c ommands alpha minussrcalpha ﬁrst line enables use alpha component second t ell alpha component used blendfunc used appropriate tr ansparency command used subsection opengl program start user see blank white canvas w hen user click canvas shape added user click second shape ﬁrst shape better default behavior webgl user click canvas function f mousedown event called shape drawn function functio n return webgl tell web browser image modiﬁed web browser c opies new image screen happens discussed earlier sect ion default behavior webgl discard image mean second mouse c lick drawing blank canvas shape ﬁrst mouse click era sed ﬁx problem preservedrawingbuﬀer option webgl graphic context set true program creates context let option need alpha channel depth buffer bu t need preserve image drawing buffer alpha false depth false preservedrawingbuffer true gl webgl option note program doe draw function redraws entire image drawing function domousedown thing diﬀerently program used data structur e store information shape drawn clicking canvas add item list entire image redrawn including new shape ctual program record s image image terminology section painting program drawing program introduction webgl webgl us default coordinate ordinate range course like use convenient coordin ate mean need apply coordinate transformation transform th e coordinate use default coordinate program natural coordinate pixel coordinate canvas pixel coordinate sys tem range left right yranges equation transforming pixel coordinat e default coordinate inwebgl thecoordinatetransformationisusuallyapplied inthevertexshader inthiscase implement transformation vertex shader just need know width height canvas program provides width height vert ex shader uniform variable original pixel coordinate vertex input vertex shader attribute shader applies coordinate transformation compute th e value glposition expressed default coordinate ve rtex shader source code attribute coords pixel coordinate uniform float u width width canvas uniform float u height height canvas void main float x u width float y u height glposition x y transformation complicated esp ecially general pattern hold transformation represented uniform variable applied vertex shader general transformation implemente d matrix later uniform variable matrix shader langua ge glsl good support matrix operation order draw shape need store pixel coordinate s shape load value array buﬀe r associated acoords attribute ﬁnally actual drawing coordinate shape computed based type o f shape drawn point user clicked example coordinat e array circle created following code xandyare pixel coordinate point clicked coords new k let let angle coords x angle vertex coords y angle vertex circle approximated regular polygon wi th radius pixel coordinate required vertex length th e array code shape similar array created shape drawn usingchapter introduction webgl buffer buffercoords buffer coords draw attributecoords f alse fan line number vertex shape array hold s number vertex note parameter draw appropriate data vbo used time discarded demo version sample program f unctionality implemented shape drawing diﬀerently version notice al l circle program just diﬀerent location possi ble draw circle object coordinate apply modeling transformati circle desired position scene approach d emo version program kind shape circle square triangle star demo version create separate vbo kind shape vbo shap e contains vertex coordinate shape object coordinate shape centere d object coordinate change vbo created d program initialization example vbo circle creat ed coords new let k index coords array let let angle coords angle vertex coords angle vertex buffercoordscircle buffer buffercoordscircle buffer coords draw note use drawin line appropriate data reused draw diﬀerent circle draw shape center x y translation applied coordinate vbo added translation vertex shader n ew uniform variable represent translation attribute coords uniform float u width uniform float u height uniform u translation void main float x uwidth float y uheight glposition x y probably ﬁnd worthwhile read source c ode demoas thesample program introduction webgl point primitive ﬁnal example section demonstrates primitive point primitive basically set disconnected vertex default eac h vertex rendered single pixel program specify larger size opengl t function glpointsize webgl function doe exist instead size control vertex shader working vertex point primitive vertex shader assign value special variable glpointsize variable type ﬂoat give size vertex pixel vertex rendere d square centered vertex position width height given glpointsize really mean fragment shader called pixel square note limit size point whic h fairly small size guaranteed exist pixel implementa tions support point size pixel possibly larger fragment shader called point primitive processing pixel square pixel surrounding vertex special fragme nt shader variable glpointcoord tell shader location pixel square value glpointcoord input shader type glpointcoord ﬂoating point component value component range ﬁrst comp onent left edge square right second com ponent square example th e value corner corner c enter square speciﬁcation say encountered implemen tations incorrectly left corner hopefully ﬁxed modern b browser fragment shader us glpointcoord computation color square vary pixel pixel simple example setting glfragcolor gl render vertex primitive square color gr adient color varies horizontally black left edge square red o n right edge sample program use glpointcoord render vertex disk instead square techniq ue us new glsl statement discard available fragment shader fragment shader executes statement discard fragment shader terminates processing pixel prevented particular color pixel image doe chang use discardif distance fromglpointcoord center greater discard pixel lie disk radius glsl function compu ting distance vector test fragment shader written float distancefromcenter distance gl pointcoord distancefromcenter discard don t draw pixel sample program show animation colored disk moving canvas bouncing oﬀ edge disk s drawn step single primitive type size disk implemented uniform variable chapter introduction webgl disk size uniform size c diﬀerent diﬀerent frame animation program user control size w ith popup menu demo version program version s ection demo program user select disk ran dom color colored red disk vertex single point primitive fact disk diﬀerent color mean color given attr ibute variable implement random color ﬁlled random number vertex valu e loaded vbo value color attribute taken vbo happens disk red ﬁll array wi th multiple copy use data attribute fact don t di sable vertexattribarray color attribute attribute v alue vertex value speciﬁed family function sample program code providing value color attribute randomcolors use attribute value color vbo filled initialization attributecolor turn vertexattribarray set constant attribute color attributecolor attributecolor thesource code detail example webgl error handling sad fact opengl programmer ﬁnd looking blank screen clear indication went wrong case programming logic error accidentally drawing region space contains geometry s error use api webgl nd opengl generally error illegal parameter value genus l crash program produce automatic notiﬁcation error instead webgl detects error ignores illegal function set value error give indication nature error program check current value error code function return integer error code return value error occurred return value mean error occu rred error code set stay set called correct webgl operation executed meantime calling retrieves value error code reset value twice row second return mean return error error actually generated instruction t hat executed time ago asanexample consideracallto primitive ﬁrst count ifprimitive isnotone ofthesevenlegalwebglprimitives thenwebglwillsetthee rrorcodeto enum ifﬁrstorcountis negative error code set value shader program installed error operation data haschapter introduction webgl speciﬁed enabled vertex attribute error ty state occurs error code fact common impractical ineﬃcient webgl function go wrong used debugg ing aid suspect error insert code error code point code numeric value zero value mean error occurred point moving output statement code narrow statemen t actually produced error note browser automatically output certain infor mation incorrect use webgl javascript console devel opment tool built browser console destination message written using s good idea check console running webgl pr ogram development glsl seen short simple example shader program written glsl n fact shader program fairly short alwa y simple understand complex shaders using rest b ook need know glsl section aim short introducti major feature language technical section rea d familiarity glsl use reference needed webgl shaders written version glsl e webgl use version version feature web gl available shaders written glsl e version s glsl similar major diﬀerences incompatibility unless o therwise noted discussion applies version vertex shader fragment shader shader program written using version glsl glsl e shader program begin line version e ﬁrst line shader source code ca nnot preceded blank line comment shader program doe start t line version shader version shader doe include declaration ve rsion number basic type variable glsl declared used glsl strictly typed language variable given type declared glsl type represent scalar singl e value vector matrix scalar type ﬂoat int andbool version add unsigned integer type uint gpu support integer booleans hardware le vel possible intandbooltypes actually represented ﬂoating point value type vector ﬂoats type represent vector ints andbools andchapter introduction webgl version unsigned integer glsl ﬂexible notation referring component vector way access array notation example vi vector component accessed v v v andv accessed using dot notation component name x y z andware appropriate vector hold coordinate vector used repr esent color component ofvcan alternatively referred finally referred name appropriate texture coordinate furthermore glsl allows use multiple component s dot name order repetition allowed thi s called swizzling example swizzler notation used expression vector example equivalent swizzlers used assignment long don t contain repeated component example coords point coords point notation referred constructor n ot constructor sense java glsl obje newoperator constructor glsl consists type follo wed list expression parenthesis anditrepresentsavalueofthetypespeciﬁedb ythetypename anytypenamecan used including scalar type value constructe d value expression parenthesis expression contribute v alue constructed value seen example v w v v w note expression swizzlers v w w extra value parameter dropped ma kes possible use constructortoshortenavector itisnotlegaltoh aveextraparametersthatcontribute value result rgba rgb rgba take item rgba rgb float r float rgba r v rgb rgba error value rgba use special case vector constructed single s calar value component vector set equal value black black constructing type type conversio n applied necessary purpose conversion boolean value convert numeric value zero direction zero convert falseand numeric value convert totrue far know constructor onlycontext glsl doe automatic type conversion example need use constructor t o assign intvalue ﬂoat variable illegal add intto aﬂoat chapter introduction webgl int k float x float k ok x k type mismatch error x x ok x x error t add value different type matrix type represent respectively matrix ﬂoat ing point number matrix integer booleans additio nal matrix type representing matrix element matrix access ed using array notation m single index used m result vector example mi type thenm array glsl opengl use order mean m column number mrather row number java andm element column row matrix constructed appropriate number va lues provided scalar vector matrix example constructed ﬂoator v v v v mind matrix ﬁlled order t hat ﬁrst number column column thr ee column special case matrix mi constructed single scalar value value diagonal element m m m element set equal zero example construct identity matrix type sampler typ e used accessing texture sampler type used limited way numeric type converted numeric type cove red section data structure glsl program deﬁne new type using structkeyword syntax c limitation struct sequence n amed member diﬀerent type type member type array type previously deﬁned struct type example struct lightproperties position color float intensity deﬁnes type named lightproperties type used declare variable lightproperties light member variable lightare referred struct type constructor constructor support type conversion constructor contain list value wh ose type exactly match type corresponding member struct example chapter introduction webgl light lightproperties glsl support array array allowed base type array basic type struct type th e size array speciﬁed variable declaration integer constant example int palette lightproperties light version array constructor t possible initialize array declaration version doe array constr uctors allows type name int representing array integer int b b array ints glsl e b int array constructor glsl e array indexing us usual syntax orpalette orlights glsl e strong limitation expres sion used array index exception expression used th e index array contain integer constant forloop variable variable used loop cont rol variable forloops example expression palette legal inside forof form int single exception arbitrary index expression c used array uniform vertex shader array doe contain sampler note restriction apply glsl e just c check array index bound err or programmer make sure array index valid qualiﬁers variable declaration modiﬁed various qualiﬁers seen example qualiﬁers attribute uniform andvarying called storage qualiﬁers qualiﬁers attribute andvaryingdo exist version instead attribute declar ed vertex shader using storage qualiﬁer varying variable declared using outin vertex shader inin fragment shader uniform qualiﬁer used version global variable local variable function deﬁnitio n attribute uniform varying variable theattribute qualiﬁer used glsl e vertex shader t applies ﬂoating point type ﬂoat matrix attribute supported directly javasc ript matrix attribute treated set vector attribute colum attribute location column successive integer webgl function return location ﬁrst column matrix attribute rare useful instanced drawing won t t hem glsl e inqualiﬁer vertex shader variable deﬁnes attrib ute variable applied integer unsigned integ er scalar vector ﬂoating point type glsl e outqualiﬁer used integer ﬂoating point scalar vector fragment shader version fragment s hader predeﬁned variable glfragcolor specify color pixel version fragment shader multiple output output necessari ly color output typechapter introduction webgl doe possible predeﬁned output variable n ow use fragment shader output representing lor version fragment shader outvariable type discus framebuﬀers section multiple output used vertex shader fragment shader use uniform variable variable occur shaders long type shaders uniform variable type including array str ucture type javascript function setting uniform value scala r variable vector matrix function setting value structs ar ray solution problem requires treating component struct array se parate uniform value example consider declaration struct lightproperties position color float intensity uniform lightproperties light variable lightcontains basic value type orﬂoat work lightuniform javascript need variable represen t location component uniform variable using location component need th e component glsl program example prog light natural store location array javascript object parallel s structure array structs glsl typical javascript code create th e structure use initialize uniform variable lightlocations new array lightlocations position prog light osition color prog light r intensity prog light intensity lightlocations lightlocations lightlocations uniform shader variable matrix javascr ipt function used set value uniform matrix value stored dimensional array value loaded array order example transform uniform shader javascript set value identity matrix transformloc prog transform transformloc false chapter introduction webgl version second parameter mustbefalse version second parameter betrueto indicate entry matrix provided row order note refers number row column matrix length array mu st way ok use typed array normal javascript array value uniform avaryingvariableshouldbedeclaredwiththesamenameandt ypeinboththevertexshader fragment shader version storage qualiﬁer f declaring varying variable varying used ﬂoating point type ﬂoat array type version varying variable integer u nsigned integer scalar vector complication doesn t make s ense apply interpolation integer value varying variable integer type b e declared additional qualiﬁer ﬂat mean interpolated instead value ﬁrst vertex triangle line segment used pixel fl oating point varying variable optionally declared ﬂat example flat glsl e fragment shader possible storage qualiﬁer const mean value variable changed initialized declaration aconstvariable include initialization variable declaration alsobe modiﬁed precision qualiﬁers possible precision qualiﬁersare highp mediump andlowp aprecisionqualiﬁersetstheminimumrangeofpossible value integer variable minimum range value number decimal place ﬂoating point variable glsl doesn t assign deﬁnite mean ing precision qualiﬁers mandate minimum requirement example ver sion lowpintegers able represent value range mediump integer range andhighpintegers range version highpvariables use bit requirement mediump andlowpare higher possible value value precision qualiﬁers real eﬀect gpus embedded system limited precision qualiﬁer used variable declaration including local variable function parameter variable storage qual iﬁer storage qualiﬁer come ﬁrst example lowp int n varying highp float v uniform mediump color varying variable diﬀerent precision verte x fragment shader default precision integer ﬂoats vertex shade r ishighp fragment shaders required support highp likely olde r mobile hardware fragment shader default precision integer mediump ﬂoats default precision mean ﬂoating p oint variable fragment shader explicitly assigned precision alternati vely possible set default precision ﬂoats statement precision mediump float chapter introduction webgl statement used start fragment sh aders previous section course fragment shader doe support highp restricts precision unnecessarily avoid using code start fragme nt shader ifdef gl fragment precision high precision highp float precision mediump float endif set default precision highpif available mediump line starting preprocessor aspect glsl don t want qualiﬁer invariant diﬃcult explain limited use invariance refers requirement expression used compute value variable possibly diﬀerent shaders value assigned variable exactly case automatically case example value diﬀerent compiler us diﬀere nt optimization evaluates operand diﬀerent order expression invariant qualiﬁer variable force compiler use exactly calculation t assignment statement qualiﬁer used declaration varying variabl e ﬁrst qualiﬁer declaration example invariant varying mediump color used make predeﬁned variable glposition andglfragcoord invariant using statement invariant gl position invariance important algorithm applies shader programsinsuccessiontocomputeanimage itisimportant forexample thatbothshadersget answer compute glposition vertex using expression vertex shaders making glposition invariant shaders ensure type qualiﬁer layout qualiﬁer avail able version used specify integer id attribute variable alternative using javascript function query id example layout location coords glsl e vertex shader kind layout qualiﬁer used outvariable glsl e fragment shader multiple output case speciﬁes w hich output destination used variable expression expression glsl use arithmetic operator integer ﬂoating point value version remainder operat left right shift bitwise logical operator available integ er type automatic type conversion expression xi type ﬂoat expression illegal say introduction webgl arithmetic operator extended various way work vector matrix use multiply matrix vector order multipl y linear algebra sense giving vector result t ypes operand match obvious way example multiplied result used matrix size doe matrix multiplication used vector scalar basic type operation performed element vector example vector vector operator applied vector type operation appl ied pair component result vector example value vector note particular usual vector ar ithmetic addition subtraction vector multiplication ve ctor scalar multiplication vector written natural way glsl relational operator applied integer ﬂoating point scalar type operand match exactly equality operator extended work type sampler type vector equal corresponding pair compone nt equal true matrix equality operator used arr ays work structs long structs don t contain array sampler gain pair member structs equal structs considered equ al glsl logical operator exclusive operation operand type bool finally assignment operator usual meaning glsl large number predeﬁned function tha n discus function mention require t value parameter function make sense integer value mostinteresting arefunctionsforvectoralgebr forthedeﬁnitions operation function simple formula provided function convenience eﬃcient hardwar e implementation gpu function dot x y computes dot product vector length return value ﬂoat cross x y computes cross product parameter return value type length x length vector xanddistance x y give distance vector normalize x return unit vector point direction function named reﬂectandrefractthat used compute direction reﬂected refracted light ray ver need use function mix x y t computes x iftis ﬂoat range return value linear mixture weighted average xandy function used example color fu nctionclamp x low high clamp xto range lowtohigh return value computed min max x low high rgbis vector representing color ensure t component vector lie range command rgb clamp rgb ifsandtare ﬂoats s t thensmoothstep s t x return xless sand return xgreater value xbetween sandt return value smoothlychapter introduction webgl interpolated example used fragment shader rendering primitive transparency enabled float dist distance gl pointcoord float alpha smoothstep dist alpha discard discard fully transparent pixel glfragcolor alpha render point red disk color fadin g smoothly opaque transparent edge disk distincreases note function mix clamp andsmoothstep thexandyparameters vector ﬂoats case operate component vector ind ividually usual mathematical function available glsl ludingsin co tan asin acos atan log exp pow sqrt ab ﬂoor ceil min andmax version ab min andmax apply integer type function param eters type ﬂoat return value type function appl ied component separately example value sqrt vector minandmax second version function ﬁrst parameter vector second parameter ﬂoat version component vector compared ﬂoat example max function mod x y computes modulus remainder xi divided return value computed ﬂoor minandmax ycan vector ﬂoat modfunction used substitute operator supported glsl e function working sampler variable discus section function deﬁnitions glsl program deﬁne new function syntax similar unlike c function name overloaded function s ame long diﬀerent number type parameter function d eclared used c declared giving deﬁnition fun ction prototype function parameter type return type f unction type array type struct type return type l ong structure doe include array array used formal parameter length array speciﬁed integer constant example float float float sum int sum return sum function parameter modiﬁed qualiﬁers orinout default qualiﬁer speciﬁed qualiﬁer indicates parameter used function output function input pa rameters value actualchapter introduction webgl parameter function copied formal para meter function deﬁnition interaction formal ac tual parameter output parameter value formal parameter copied th e actual parameter function return inoutparameter value copied direction type parameter passing referred note actual parameter anoutorinoutparameter value assigned variable swizzler parameter c java java cript input parameter passing pointer parameter eﬀect similar ninoutparameter glsl course pointer example void cumulativesum float float b b int b b note recursion supported function glsl control structure control structure glsl e webgl ifstatement restricted form forloop whileordo whileloop switch statement supported glsl e ifstatements supported syntax c includ ingelseandelse version syntax control structure prett y aforloop version shader loop control variable declared loop type intorﬂoat initial value loop control variable constant expression include operator operand literal constant constvariables code inside loop allowed change t value loop control variable test ending loop h ave form var op expression wherevaris loop control variable opis relational equality operator expression constant expression finally update expression mu st form var wherevaris loop control variable expression constant expression course typical form forloops language example legal ﬁrst line f orforloops int float x x x int k k k version restriction apply note ll loop include breakand continue statement limit webgl put limit certain resource used webgl glsl program number attribute variable size texture mage limit case hardware limit gpu depend dev ice program running implementation webgl device hardware limit canchapter introduction webgl lower mobile device tablet phone mod ern tablet phone pretty impressive gpus limit vary webgl imposes set minimum requirement implementation satisfy minimum webgl minimum webgl greater forexample ttributesinavertexshader actual limit particular implementation mo actual limit available glsl program value predeﬁne d constant glmaxvertexattribs conveniently available javascript value expression vertexattribs attribute variable type ﬂoat count attribute limit attribute column count separate attribute far limit go similarly limit varying variable separate limit uniform variable vertex fragment shaders limit ar e number packing separate variable nto single vector packing used doe optimal packing attribute variable limit satisfy glmaxvertexattribs glmaxvertexuniformvectors glmaxfragmentuniformvectors glmaxvaryingvectors limit glsl number texture unit w hich mean essentially number texture used simultaneously li mit satisfy glmaxtextureimageunits limit fragment shader glmaxvertextextureimageunits limit vertex shade r glmaxcombinedtextureimageunits total limit shaders texture usually used fragment shaders s ometimes useful vertex shaders note glmaxvertextextureimageunits zero mean implementation required allow texture unit b e used vertex shaders possibility webgl limit thing including viewport si ze texture image size line width line primitive point size point primitive limit queried javascript using end version section ﬁnd live demo show actual value resource limit device running demo show limit webgl graphic context use chec k capability various device want webgl program run gener al actual limit signiﬁcantly larger required minimum value demo image texture texture play essential role graphic support image texture built modern gpus hardware level section lo ok webgl api image texture image texture opengl covered section section relevant modern opengl including webgl c image texture webgl chapter introduction webgl material new o ne feature new opengl texture unit signiﬁcant diﬀerences webgl webgl increase support diﬀerent type texture diﬀerent way using texture access new feature requires using glsl e shader program stick webgl section discus th e new webgl feature ﬁnal subsection texture unit texture object texture unit called texture mapping unit tmu texture processing unit tpu hardware component gpu doe sampling sampling process computing color image texture texture coordinate mappi ng texture image surface fairly complex operation requires just returning color texel contains given texture coordinate requires pplying appropriate miniﬁcation magniﬁcation ﬁlter possibly using mipmaps available fast texture sampling key requirement good gpu performance texture unit confused texture object encountered texture object insubsection texture object data structure contains color data image texture possibly set mipmaps textu value texture property miniﬁcation magniﬁcation ﬁlters texture repeat mode texture unit access texture object work t exture unit processor texture object hold data processed way really careful throwing ar ound term gpu texture unit probably doe use actual hardware component gpu emulated slowly software hardware involved having texture unit doe necessarily m ean hardware component texture unit share time smaller n umber hardware component similarly said previously texture object store d memory gpu ormightnotbeliterallytrueinagivencase youwillprobablyﬁnditconceptually easier think texture unit piece hardware te xture object data structure gpu glsl texture lookup using sampler variable sampler variable variable inashaderprogram theonlysamplertypesar andsamplercube used lookup standard texture image samplercube used lookup cubemap texture subsection value sampler variable reference texture unit value tell texture unit invok ed sampler variable used texture lookup sampler variable declare d global uniform variable legal shader program assign value sampler variable value come javascript javascript available texture unit numb ered maximum value implementation dependent number determined value expression combined texture imageunits remember glhere javascript variable refers webgl context programmer chapter introduction webgl far javascript concerned value sampler vari able integer want sampler variable use texture unit number set t value sampler variable using function subsection example suppose shader program declares sampler variable uniform u texture set value javascript need location variable shader program ifprogis shader program location obtained calling utexture location prog u texture tell sampler variable use texture unit nu mber calling u texture location note integer value accessible glsl int eger tell sampler texture unit use way shader program ﬁnd number unit used use image texture need create texture obje ct need load image texture object want set prop erties texture object want create set mipmaps texture nd associate texture object texture unit javascript command creating texture object command opengl glgentextures webgl command easier use creates single texture object return reference example textureobj just allocates memory object order e ﬁrst bind texture object calling example textureobj ﬁrst parameter texture target target used working ordinary texture image diﬀerent target fo r cubemap texture function used load image currently bound texture object come subsection r emember command command apply currently bound textu object texture object mentioned command instead texture object mu st bound command called need tell texture unit use texture object need make texture unit active callus ng function parameter constant represent available texture unit value constant initially texture unit number active make texture u nit number active example use function really called activetexture unit maybe bindtextureunit work similarly various webgl bind functio n textureobj chapter introduction webgl bind texture object texture unit active texture object textureobj bound texture unit number binding just tell texture unit texture object use textu unit doe texture lookup using image setting ar e stored textureobj texture object bound texture unit time given texture unit bound texture time working texture image webgl involves working wi th texture object texture unit sampler variable relationship th ree illustrated picture uniform m ª ª te te texture object texture unitssampler variable fragment shader created association set association set xloc prog x xloc sampler variable us texture unit us texture o bject hold texture image javascript command setting chain shown illustration apply texture image primitive set ent ire chain course provide texture coordinate primitive y ou need use sampler variable shader program access texture suppose image like e diﬀerent primitive drawing primitive need change texture image used diﬀerent way manage ima ge webgl use single texture object single texture uni bound texture object active texture unit value sampler variabl e set changed change new image use load image texture object essentially thing opengl s ineﬃcient going use image just ce s texture object introduced use diﬀerent texture object image e just single texture unit active texture value sampler variable changed switch new texture image using bind texture object contains desired image use diﬀerent texture unit image woul d load image texture object bind object textu unit switch new texture image changing value sampler var introduction webgl don t know option compare term eﬃciency n ote forced use texture unit want apply texture image primitive need sampler var iables shader program diﬀerent value refer diﬀerent texture unit color pixel depend sample image picture show texture combined simple way compute color pixel textured square image left grayscale brick image multipl ied earth image red component pixel computed multiplying d component brick texture red component earth texture green blue right earth texture subtracted cloth te xture furthermore pattern distorted texture coordinate modiﬁed b efore used sample texture using formula sin s kind thing programmable shaders image taken demo try demo want view source code texture programmed texture unit used value uniform sampler var iables set initialization code location prog u location prog u u location u location value changed program us textu image texture object image javascript id texture object stored array textureobjects popup menu allow user select texture image s appliedtotheprimitive thisisimplementedinthedrawing routineby bindingthetwoselected texture object texture unit unit u sed sampler variable code let number texturec textureobjects let number texturec textureobjects chapter introduction webgl getting image texture object question turn working image image loaded texture object using functio use webgl function usually form target byte image target ordinary texture target loading cubemap texture second parameter mipmap level main image possible load individual mipmaps t hat rarely parameter format texture inside texture object original image thetwoformatparametersshouldhavethesameval ue sincewebimagesarestored rgba format probably eﬃcient choice rarely nee d use use don t need alpha component alpha convert image grayscale luminance weighted average red green blue approximates perceived brightness color fourth parameter going byte indicating color image stored using b yte color component value possible don t really make s ense web image parameter image ordinarily imagewill dom image element loaded asynchronously jav ascript imagecan canvas element mean draw canvas using ht ml canvas graphic api use canvas source tex ture image canvas visible web pa ge image loaded texture object currently bound targetin currently active texture unit default texture object tha t texture bound called error occurs active texture unit selected using texture unit called texture object bound active texture unit discussed earlier section using image webgl complicated fact image loaded asynchronously command loading image just start proc es loading image specify callback function executed th e loading completes image won t actually available use callback function called loading image use texture callback function load t image texture object rendering function draw scen e texture image sample program example using single texture triangle function used load texture mage program texture object created function called load texture image asynchronously parameter url image loaded second parameter texture object image loaded image finished loading draw function called draw triangle texture error occurs loading error message displayed page draw ed draw triangle texture introduction webgl function loadtexture url textureobject const img new image dom image element represent th e image function function called image load success fully bind texture object texture target loading image texture object textureobject try byte img create mipmaps change minification catch e probably security exception pa ge loaded file url headline sorry couldn t load br web browser won t use image local disk draw draw canvas texture function function called error occurs loadi ng headline p sorry texture image draw draw texture triangle black url start loading image setting onload note image texture webgl o texture width height image power su ch fact use texture t u se mipmaps texture texture repeat mode supported tex tures toedge webgl doe restriction thetry catch statement used function web browser throw security exception page attempt use image t local ﬁle texture mean attempt run program us textu re downloaded version book program use texture work parameter associated texture obje ct including texture repeat mode miniﬁcation magniﬁcation ﬁlters set using function setting applies currently bound texture object detail opengl subsection example miniﬁcation ﬁlter set linear using minfilter recall default miniﬁcation ﬁlter won t work withou t mipmaps working texture change miniﬁcation ﬁlter install set mipmaps fortunately webgl function generate mipmaps chapter introduction webgl texture repeat mode determine happens textur e coordinate lie outside range separate repeat mode d irection texture coordinate webgl possible value toedge repeat default mode clamp toedge called clamp opengl mirrored repeat new webgl mirrored repeat texture image repeated cover entire plane copy image reﬂected eliminate visib le seam copy set texture use mirrored repeat direction use wrap repeat wrapt repeat webgl texture coordinate usually input verte x shader attribute communicated fragment shader varying va riable vertex shader simply copy value attribute int o varying variable possibility apply aﬃne texture transformation th e coordinate vertex shader passing fragment shader fragmen t shader texture coordinate used sample texture glsl e function sam pling ordinary texture samplervariable texturecoordinates wheresamplervariable uniform variable type represents texture andtexturecoordinates texture coordinate return value rgba color represented value type minimal example fragment shader simply us sampled value texture color pixel precision mediump float uniform u texture varying v texcoords void main color u texture v texcoords glfragcolor color shader sample program texture used primitive type case s natural texture coordinate pixel special frag ment shader variable glpointcoord point rendered square coordinate glpointcoord range square using glpointcoord mean copy texture pasted point point primitive vertex copy texture location vertex easy way p ut image multiple copy image scene technique referre d point example textured primitive type circular cutout square point drawn picture dem o demo chapter introduction webgl pixel data texture image webgl stored memory starting row pixel image working wh en webgl creates texture reading data image assumes image e format image web browser stored opposite order star ting pixel row image working result mismatch t hat texture image appear upside account modifying textu coordinate tell webgl invert image unpacks flipywebgl generally youcandothisaspartofinitialization noteho weverthatfor primitive coordinate used glpointcoord upside increasing loading image use point primitive want set flipywebgl default value way make texture seen create texture image canvas ele ment using way make image texture webgl function target mipmaplevel internalformat x y width height border covered subsection exists webgl function copy data color buﬀer webgl render image curren tly bound texture object data taken rectangular region color buﬀer w ith speciﬁed widthandheight lower left corner x y theinternalformat usually webgl thebordermust zero example take texture data square bot tom left corner color buﬀer later chapter actually possible eﬃcient webgl render image directly texture object using somethin g called interesting ability textur e data directly array number number color component value pixel texture function used alternative version o chapter introduction webgl target mipmaplevel internalformat width height border dataformat datatype dataarray typical function form byte pixel comparedtotheoriginalversionof therearethreeextraparameters width height andborder thewidthandheightspecify size texture image webgl border zero webgl internalformat anddataformat parameter version typed array type depending dataformat texture example use texture format rgba texture color component value needed f pixel value given unsigned byte value ranging length array width height time number pixel image data row pixel come ﬁrst array foll owed row pixel given row running left ri ght data pixel red component come ﬁrst followed blue green alpha example making texture data scratch let s ma ke texture image image divided square colo red red white blue code us fact typed array created initial ly ﬁlled zero just change zero let pixel new byte pixe l let let j j let offset j starting index data pixe l pixel offset alpha value pixel j left quadrant red pixel offset set red component maximum j right quadrant blue pixel offset set blue component maximum quadrant white pixel offset set component maximum pixel offset pixel offset texture texture byte pixel minfilter line default miniﬁcation ﬁlter won t work mipmaps texture us default magniﬁcation ﬁlter al texture usedchapter introduction webgl leftmost square image shown image f rom sample program note blending edge color leftm ost square blending caused magniﬁcation ﬁlter second square us texture magniﬁcation ﬁlter eliminates blending sam e eﬀect seen square use ch eckerboard pattern magniﬁcation ﬁlter using texture repeated time horizontally vertically square ca e texture tiny image black white pixel example consider rightmost square ima ge gradient eﬀect square come texture texture size pixel color changing black white length texture copy o f texture mapped square gradient texture used texture format mean data consists byte pixel giving gray cale value pixel texture created using let pixel new byte pixel let pixel grayscale value pixel number byte pixel thesample program cubemap texture encountered cubemap texture subsection saw used skybox environment mapping webgl su pport cubemap texture instead representing ordinary image texture textur e object hold cubemap texture texture object bound texture unit s imultaneously holding ordinary texture holding cubemap texture t extures bound diﬀerent target cubemap texture object texobj bound cubemap target currently active texture unit calling cubemap texobj given texture object regular texture cub emap texture bound texture target rebound t o target cubemap texture consists image face cube texture object hold cubemap texture image slot identiﬁed b y constant cubemapnegative x cubemappositive x cubemapnegative ychapter introduction webgl cubemappositive y cubemapnegative z cubemappositive z constant used target place note target loading image cu bemap texture object target cubemap binding texture object texture unit cubemap texture stored set si x image loaded separately texture object course possi ble webgl create cubemap rendering image usual image web problem asynchr onous image loading dealt example function creates cubemap texture sample program function loadcubemaptexture const tex let imagect number image finished loadin load cubemapnegative x load cubemappositive x load cubemapnegative y load cubemappositive y load cubemapnegative z load cubemappositive z function load url target let img new image function cubemap tex try target byte img catch e headline t access texture note browser t use texture local file return imagect image loaded cubemap headline funny cubemap fisheye camera effect textureobject tex draw function headline sorry couldn t load texture url chapter introduction webgl image cubemap size square size usual power cubemap texture texture par ameters miniﬁcation ﬁlter set using target cubemap apply face cube example cubemap minfilter similarly generate mipmaps face ca lled image loaded shader program cube map texture represented uni form variable type samplercube thetextureissampledusingfunction texturecube forexample color texturecube u texture vector ﬁrst parameter samplercube variable represents texture second parameter cube map texture sampled using regular texture coo rdinates instead vector used goal pick point t texture texture lie surface cube use vector pick point t exture cast ray center cube direction given vector ch eck ray intersects cube starting point vector th e center cube point point cube texture sampled aren t doing graphic chapter t e cube map ordinary way sample program us cube map interesting useful way program us texture coordinate th e fragment shader transforms pair texture coordinate vector u sed sample cubemap texture eﬀect like photograph produced b y ﬁsheye camera s look like picture left imitates ﬁsheye camera gree ﬁeld view right ﬁeld view pixel near edge o f disk actually part cube lie camera picture program draw square texture coo rdinates ranging texture coordinate pixel distanc e greater point colored white disk radius e ach circle center mapped circle unit sphere point used s direction vector sampling cubemap texture point texture ppears center disk point cube intersects positive t hat center positivechapter introduction webgl z image cube map don t actually need underst information fragment shader doe work ifdef gl fragment precision high precision highp float precision mediump float endif uniform samplercube u texture uniform float u angle field view angle varying v texcoords void main float dist distance v texcoords dist glfragcolor white float x y coords relative center x y circ normalize x y unit circle float phi radian u dist latitude vector sin phi sin phi co phi glfragcolor texturecube u texture vector computational example gpu oﬀer immense processing power althoug h gpus originally designed apply power rendering image quic kly realized power harnessed general type programmi ng programming task advantage highly parallel architecture typical gpu task broken subtasks run parall el possible speed task signiﬁcantly adapting run gpu modern gpus computationally versatile gpus d esigned work color mean representing data computat ion color value trick involves representing data color texture accessing data using texture lookup function sample program simple example approach program implement john conway s game lif e really game life board consists grid cell aliv e dead set rule take current state generation board nd produce new generation initial state assigned cell game ca n play producing generation generation according rule rule compute state cell generation state cell neighbor ing cell current generation apply rule look neighboring cell nd count number neighbor alive process applied cell t highly parallelizable task easily adapted run gpu sample program life board canva s pixel representing cell living cell colored white dead cell bla ck program us webgl tochapter introduction webgl compute generation board current boa rd work fragment shader trigger computation single squar e drawn cover entire canvas cause fragment shader called eve ry pixel canvas fragment shader need access current color frag ment neighbor way query color directly sh ader access information program copy board texture object using function fragment shader information need s using glsl texture lookup function interesting point fragment shader need te xture coordinate just neighbor texture coordinate th e fragment passed fragment shader varying variable value ran ge coordinate texture coordinate neighbor adding oﬀset texture coordinate texture pixel texture coord inates neighbor need oﬀset complete glsl e fragment sha der program ifdef gl fragment precision high precision highp float precision mediump float endif varying v coords texture coordinate cell const float scale canvas size offset neighboring cell texture coords uniform source texture holding previo generation void main int alive cell alive source v coords alive alive count living neighbor check living just test red component color living cell dead cell int neighbor number neighbor live source v scale scale neighbor source v neighbor source v scale neighbor source v scale neighbor source v neighbor source v scale neighbor source v neighbor source v chapter introduction webgl neighbor output new color cell using rule life float color color dead cell alive neighbor neighbor color color living cell cell stay alive neighbor color color living cell cell come life glfragcolor color color color point program t webgl graphic context created turned oﬀ make sure y pixel perfectly black perfectly white antialiasing smear color averaging color nearby pixel similarly magniﬁcation miniﬁcation ﬁlters texture set avoid averaging color issue settin g initial conﬁguration s drawing board using sh ader program diﬀerent fragment shader computer easily compute generation second urge try fun watch general purpose programming gpus important modern gpus computation color u sing various numerical data type webgl ll moved bit directi accessing computational power gpus web require new ap currently development available experimental feature web browser attempt fulﬁll need unlike webgl based opengl texture webgl major change webgl greatly increased sup port texture large number new texture format added rgba color com ponents opengl represented ﬂoating point value range zero practice stored unsigned integer value range match format used displaying color screen fact n t really control color represented internally use display ther e computer display used bit pixel instead new hdr high dyn amic range display use bit pixel storing data textur e s really necessary match color format used physical display webgl introduced large number sized tex ture format programmer control data texture repres ented example format texture contains ﬂoating point number s pixel rgba color component format indicates unsigned integer pixel mean integer pixel corresponds usual format using unsigned teger color component sized format used internal format text ure theinternalformat parameter function like speciﬁes data actually stored thechapter introduction webgl texture use texture sized internal format image texture rendering bit color component encodes far diﬀerent color s distinguished visually data format particularly useful mputational application really need control kind data working eﬀectively compute data stored texture really need able write dat texture read texture need framebuﬀers won t c overed section just look aspect webgl api w orking texture various version function used initialize texture image array zero data source s provided webgl potentially eﬃcient function alloca ting storage texture initializing zero target level internalformat width height ﬁrst parameter cubemap second parameter speciﬁes number mipmap level generated generally widthandheightgive size texture course internalformat speciﬁes data format texture internalformat sized internal format webgl support texture hold data grid texels function depth texture store depth value like used depth test commonly used shadow mapping work compressed texture decrease data need transferred cpu gpu le ave explore capability need shaderprogramsusesamplervariablestoreaddatafromtext ures theshaderprogramming language glsl e introduces number new sampler type s deal new texture format webgl glsl e andsamplercube newer language add type texture sampling texture value signed integer sampling depth texture example sampling texture integer format declare sampler variable uniform highp datatexture precision qualiﬁer highp speciﬁed variable default precision using high precision ensures ca n read integer exactly type default precision lowp suﬃcient color component really integer want ﬂoatin g point data texture glsl e us function sample texture texturecube sampling cubemap texture separate func tion sampler type glsl e remove andtexturecube replaces single overloaded function texture used sample kind texture datatexture deﬁned sampled using highp data texture datatexture coords wherecoordsis texture coordinate fact want access texel value directly new texelfetch function fetch texel value texture treating texture array texels texels accessed using integer coordinate range size texture applied datatexture look likechapter introduction webgl highp data texelfetch datatexture j whereiranges width texture minus jranges height minus second parameter speciﬁes mipmap level accessed integer texture likely using mipmaps sample program fanciful example using texelfetch ordinary image texture data t exture lot said webgl texture need introductory textbook implementing transforms chapter us webgl drawing course real motivation using webgl graphic web w ill turn chapter webgl implementing transformation r esponsibility programmer add level complexity compared opengl b efore attempt deal complexity dimension short section sho w implement transforms hierarchical modeling context transforms glsl transforms covered section review basic transforms scaling rotation translation sequence transformati ons combined single aﬃne transform aﬃne transform map point point given formula form c e b d f wherea b c d e andfare constant explained subsection transform represented matrix ca e db f representation point x y vector x transformation implemented multiplication vector matrix apply transformation primitive vertex p rimitive multiplied transformation matrix glsl natural place d o vertex shader technically possible multiplication o n javascript glsl eﬃciently work multiple vertex n parallel likely gpu eﬃcient hardware support matrix math t way property aﬃne transformation suﬃces apply vertex primitive interpolation transformed vertex coordinate interior pixel o f primitive correct result give answer interpolating th e original vertex coordinate applying transformation fragment shader glsl type matrix vector applied multiplication operator computes product transform applied using simple glsl assi gnment statement aschapter introduction webgl transformedcoords transformmatrix originalcoords theoriginalcoordinatesarelikelytocomei ntothevertexshaderasanattribute need make attribute value adding transformation matrix likely uniform variable allow javascript specify transformation lead following min imal glsl e vertex shader working transforms glsl e version attribute qualiﬁer replaced ﬁrst line version e added attribute coords uniform u transform void main transformedcoords u transform glposition input coordinate given x y need x multiply matrix ﬁrst line main add line value forglposition point use transformedcoords javascript function used specify value uniform type subsection use element matrix stored array order loading aﬃne transformation matrix command like u transform location false b c d e f transforms javascript work transforms javascript need way t o represent transforms need track current transform product individual modeling transformation eﬀect current tra nsformation change transformation rotation translation applied need way save copy current transform drawing complex object re tore drawing typically stack transforms used purpose w ell familiar pattern graphic diﬀerence da ta structure operation need built standard api need som e extra javascript code implement example written javascript class represent aﬃne transforms minimal implementation data object type consists number b c d e andfin transform matrix method class multiplying transform sca ling rotation translation transforms method modify transform y applied multiplying right appropriate matrix descrip tion api transform object type new b c d e f creates matrix shown beginning section new creates representing identity introduction webgl new original original creates copy original r modiﬁes transform composing rotation matrix rotation rradians dx dy transform bycomposingitwiththetranslation matrix translation dx dy sx sy modiﬁes transform composing scaling matrix scaling factor sxhorizontally syvertically s doe uniform scaling s s return array number containing matrix transform order fact object doe represent aﬃne transformation matrix instead store coeﬃcients b c d e andfas property object representation scalemethod class deﬁned follows scale sx sy sx default value sy value sx sx sx sy sy return code multiplies transform represented ob ject scaling matrix right method similar deﬁnitions don t need understand code order use api primitive drawn current transform se nt vertex shader used transform vertex primitive method return transform array passed sends shader program implement stack transformation use arra y object type javascript array doe ﬁxed length com e push andpop method make possible use array stack fo r convenience deﬁne function pushtransform andpoptransform manipulate stack current transform stored global variable named transform let transform new initially dentity const transformstack array serve transfo rm stack push copy current transform transform stac function pushtransform new transform remove item transform stack set current transform stack error introduction webgl function poptransform transform code sample program demonstrates stack transforms implement hierarchical modeling screenshot object drawn program s code draw function square u transform loc false buffer squarecoordsvbo coordsloc false loop function nestedsquares u colorloc set color blue square let u colorloc mixture framenumber square function square draw square size centered object coordinate coordinate square ha ve stored buﬀer squarecoordsvbo andacoordslocis location attribute variable shader program variable transform hold current modeling transform applied square sent shader program calling u transform loc false second function nestedsquares draw square square modiﬁes modeling transform withchapter introduction webgl framenumber eﬀect command cumulative squar e little smaller previous rotated bit previous rotation depends frame number animation nested square compound object drawn program function draw nested square centered main draw routine wanted make little smaller drawn using pushtransform center square reduce size nestedsquares poptransform thepushtransform andpoptransform ensure change modeling transform drawing square eﬀect oth er object drawn later transforms applied object opposit e order appear code urge read source code look draw essential idea working transforms good und erstand graphic webgl previous chapter covered webgl context graphic work com plex transformation rely mainly javascript libra ry vector matrix math need implement lighting material w ill directly glsl begin chapter duplicating capability opengl covered chapter andchapter soon adding feature spotlight phong shading environment mapping transformation seen chapter draw primitive using webgl implement transformation drawing primitive sa coordinate vertex instead transformatio n similar transformation increase complexity com e dimension substantial section cover geometric gr aphics webgl section question lighting mater ials shader script begin working seriously webgl wil l nice better way include shader source code web page hav e created source code string concatenating bunch javascript string liter al line code format hard read hard edit technique used glsl shader source code inside script element example vertex shader script vshader attribute coords uniform modelviewprojection void main coords glposition modelviewprojection coords relies fact web browser recognize t hetypelisted script element try execute script doe store content graphic webgl script element dom data structure represents web pag content retrieved string using standard dom api won t ex plain api function used function take idof script element parameter return string containing text inside element function gettextcontent elementid let element elementid let node let str node text node str node return str sample program us technique idea deﬁne source code javascript template string subsection template string enclosed single backquote character span multiple line backquote called template string introduced javascript include value javascript expr essions don t need capability shader deﬁned template string const vertexshadersource attribute coords uniform modelviewprojection void main coords glposition modelviewprojection coords technique used sample program c hapter note deﬁne glsl e shader template string sure include required ﬁrst line version e immediately opening backquote line preceded blank line introducing glmatrix transformation essential computer graphic bgl api doe provide function working transformation section used simple javascript class represent modeling transformation thing mor e complex dimension graphic webgl javascript usually create modelview transformandaprojectiontransform anditwillhavetoapp lyrotation scaling andtranslation modelview matrix help webgl doing s o easier javascript library work commonly used library isglmatrix free javascript library vector matrix math written brandon jones nd colin mackenzie iv available http textbook us version library newer version available according lic ense ﬁle freely used distributed program use script ﬁnd copy source folder web site download book ﬁle min iﬁed javascript ﬁle ischapter graphic webgl meant read urce version readable form including comment ﬁle directory download book information c glmatrix web site theglmatrix api available use web page script ele ment script assumes directory web page theglmatrix library deﬁnes call class named working vector number deﬁnes working matrix matrix name confused th e glsl type name glmatrix entirely javascript glmatrix passed shader program specify value glsl similarly vector matrix type eachglmatrix class deﬁnes set function working vector m atrices fact documentation us term class glmatrix class really just javascript object func tions class called static method java vector matrix presented glmatrix array function class like operate array object type just array length respectively array s ordinary javascript array typed array type let glmatrix create array glmatrix function work kind array example glmatrix documentation say parameter type ok pas regular javascript array number value parameter note case kind array ed webgl function designed work function example array length hold element array order format used eachglmatrix class create function creates array appropriate length ﬁlls default value example transform setstransform tobeanew initializedtorepresenttheidentity matrix similarly vector creates length ﬁlled zero class function clone x creates copy parameter example savetransform modelview function notcreate new array instead modify content thei r ﬁrst parameter example b c modify aso hold matrix productof thatis thatalready exists ok array examp le b eﬀect multiplying atimesband modifying aso contains graphic webgl function multiplying matrix standard tra nsformations scaling rotation example b v makesaequal product band matrix represents translation vector practice use operation matrix th represents modelview transformation suppose hold current modelview transform apply translation vector dx dy dz say modelview modelview dx dy dz equivalent calling gltranslatef dx dy dz opengl draw geometry statement using modelview modelview transformation geometry ﬁrst translated dx dy dz transformed previous value modelview note use vector specify translation command separate parameter typ ical ofglmatrix apply scaling transformation scale factor sx sy andsz use modelview modelview sx sy sz rotation glmatrix function including common case r otation x y orzaxis fourth rotation function speciﬁes axis rota tion line point dx dy dz equivalent glrotatef angle dx dy dz unfortunately angle rotation function speciﬁed radia n degree modelview modelview radian modelview modelview radian modelview modelview radian modelview modelview radian dx dy dz function allow basic modeling view ing transformation need graphic hierarchical graphic need save restore transformation traverse scene graph n eed stack use regular javascript array pushandpopoperations create stack array const matrixstack push copy current modelview matrix th e stack saying modelview remove matrix stack set cur rent modelview matrix modelview operation equivalent glpushmatrix andglpopmatrix opengl starting point modelview transform usually v iewing transform opengl function glulookat used set viewing transformation subsection theglmatrix library lookat function thing modelview eyex eyey eyez refx refy r efz upx upy upz note function us sin place separate parameter glulookat place result ﬁrst parameter instead g lobal variable function actually equivalent opengl commandschapter graphic webgl glloadidentity glulookat eyex eyey eyez refx refy refz upx upy upz don t set modelview equal identity matrix calling usually opengl crea te themodelview matrix point using calling let modelview want set existing identity matrix function example modelview use starting point wanted compose view transformation basic scale rotate translate transformation similarly glmatrix function setting projection transformation t function equivalent glortho glfrustum andgluperspective subsection angle given radian degree projection left right near fa r projection left right near far projection fovyinradians aspect ne ar far modelview transformation need load projection identity calling function create projection array length transforming coordinate course point making projection modelview tr ansformation use transform coordinate drawing primitive webgl transformation usually vertex shader coordinate primitive spe ciﬁed object coordinate multiplied modelview transformation covert th em eye coordinate projection matrix covert ﬁnal clip coord inates actually used drawing primitive alternatively modelview pr ojection matrix multiplied matrix represents combined transf ormation object coordinate multiplied matrix transform directly clip coordinate shader program coordinate transforms usually presented glsl uniform variable type shader program use separate projection m odelview matrix combined matrix separa te modelview transform matrix required certain lighting calculation n eye coordinate minimal glsl e vertex shader us combined matrix attribute coords x y z object coordinate vertex uniform modelviewprojection combined transforma tion matrix void main coords add glposition modelviewprojection coords transform c oordinates chapter graphic webgl shader sample program program let user view colored cube using just basic color li ghting applied user select orthographic perspective projection r otate cube using keyboard rotation applied modeling transformation consis ting separate rotation transformation matrix javascript program us glmatrix library represent projection modelview combin ed transformation matrix const projection projection matrix const modelview modelview matrix const modelviewprojection combined ma trix variable constsince matrix object used program number object change modelviewprojection correspondstoashadervariable thelocationofthatvaria bleintheshaderprogramisobtained initialization using umodelviewprojection prog mod elviewprojection transformation matrix computed draw function using function glmatrix value modelviewprojection sent shader program using primitive make cube drawn code doe set value projection represent projection tr ansformation persproj projection projection set value modelview represent viewing transf orm modelview apply modeling transformation modelview modelview modelview rotatex modelview modelview rotatey modelview modelview rotatez multiply projection matrix time modelview matri x combined transformation matrix send shader program modelviewprojection projection modelv iew u modelviewprojection false modelviewprojection separate modelview projection matrix used th e shader program modelview matrix applied transform object coordin ate eye coordinate projection applied eye coordinate comp uteglposition minimal vertex shader doe attribute coords x y z object coordinate vertex uniform modelview modelview transformation uniform projection projection transformation void main chapter graphic webgl coords add eyecoords modelview coords apply modelview tran sform glposition projection eyecoords apply projection tran transforming normal normal vector essential lighting calculation subsection surface transformed way normal vector t hat surface change true transformation translat ion normal vector tell direction surface facing translating surface doe change direction surface facing normal vector remains rem ember vector doesn t position just length direction doesn t m ake sense talk moving translating vector ﬁrst guess normal vector tran sformed just transformation guess t hat correct transformation represented matrix obtained dropp ing right column x therightcolumnrepresentsthe translation transformation row s implementing translation matrix requires use homogeneous coor dinates represent vector normal vector translation issue use homogeneous coordinate t correct case consider example s hear transform illustration show normal vector object subjected shear transformation object resulting vector perpendicular t object µ º applied º º à ormed object correct normal object normal vector shown red possible correct transformat ion matrix normal vector coordinate transformation matrix turn need drop fourth row fourth column called invers e transpose resulting matrix don t need know mean wo rks glmatrix library compute function need deﬁned normalmatrix coordinatematrix function coordinatematrix represents transformation appliedtocoordinates normalmatrix thisfunctioncomputes inverse transpose coordinatematrix place answer normalmatrix need normal vector lighting calculation d lighting calculation eye coordinate coordinate transformation interested usually modelview graphic webgl normal matrix sent shader program needed transform normal vector use lighting calculation lighting r equires unit normal vector normal vector length normal matrix doe ge neral preserve length vector applied necessary norma lize transformed vector glsl function normalizing vector vertex sh ader implement lighting form attribute coords untransformed object coordinate attribute normal normal vector uniform projection projection transformation mat rix uniform modelview modelview transformation matri uniform normalmatrix transform matrix normal v ectors variable define light material property void main coords add eyecoords modelview coords transform eye coor dinates glposition projection eyecoords transform clip coor dinates transformednormal normalmatrix normal transfo rm normal vector unitnormal normalize transformednormal norma lize use eyecoords unitnormal light material property compute color vertex look speciﬁc example section note glsl e glsl e n function computing inverse transpose matrix making fairly ea sy compute normal matrix shader eﬃcient comp ute matrix javascript computing executio n vertex shader rotation mouse computer graphic lot interesting use r interaction experience enhanced considerably just letting user rotate scene view various direction unlit cube example let user rotate scene using keyboard bu t using mouse rotation give user better control h ave written javascript class simplerotator andtrackballrotator implement diﬀerent style thesimplerotator class deﬁned ﬁle use web page need include ﬁle script tag need create object type simplerotator rotator new simplerotator canvas callback viewdistan ce ﬁrst parameter dom canvas element canvas webgl render scene simplerotator constructor add listener mouse event canvas handle touch event touchscreen se cond parameter constructor optional deﬁned function functi called parameter time rotation change typically callback fun ction function render image canvas parameter optional deﬁned graphic webgl number give distance viewer center rotation default value zero ok orthographic projection ually correct asimplerotator keep track viewing transformation change u ser rotates scene important function function return array number representing matrix viewing t ransformation order matrix sent directly shader program u used function glmatrix library initial value modelview matrix sample program example using simplerotator program us perspective projection deﬁned glmatrix function projection theviewdistance rotator nearandfardistances projection nearis faris viewdistance set rotator created initialization using statement rotator new simplerotator canvas draw thedraw function viewing transformation obtained th e rotator drawing scene modeling transformation progr view matrix modelview matrix matrix multiplied proje ction matrix using glmatrix function combined transformation matrix sent shader program let modelview modelviewprojection projection modelv iew u modelviewprojection false modelviewprojection s really need know just want use simplerotator program written alternative rotator class trackballrotator deﬁned javascript ﬁle atrackballrotator used way simplerotator main diﬀerence trackballrotator allows completely free rotation simplerotator constraint remain vertical image sample program us atrackballrotator identical simplerotator example demo online version section let try kind r otator demo default center rotation type rotator origin origin center image change cen ter rotation point b c calling b c parameter array number typically b c point displayed center image p oint view reference point glulookat don t need understand mathematics used mplement rotator fact trackballrotator us advanced technique don t want explain simplerotator simple s nice know work explain view transformation computed simplerotator actually easier think term corresponding modeling transformation th e scene recall equivalence modeling viewing subsection modeling transformation includes rotation followed rotation size rotation change user drag mouse graphic webgl motion control rotation motion control rotation rotation restricted lie range degree note rotation followed rotation leaf pointing vertical direction projected t screen suppose center rotation tx ty tz instead implement doing rotation need translate scene th e point tx ty tz origin translation doing rotation need translate origin point tx ty tz finally viewdistance zero need push scene viewdistance unit away viewer translation ifdis view distance ryis rotation rxis rotation sequence modeling transformation need apply t o scene follows view center origin translate scene ryradians scene rxradians origin view center translate tx ty tz scene away viewer translate keeping mind modeling transformation applied t o object opposite orderinwhichtheyoccurinthecode theviewmatrixcouldbe createdbythefollowing glmatrix command viewmatrix viewmatrix viewmatrix viewmatrix viewmatrix tx ty tz viewmatrix viewmatrix rx viewmatrix viewmatrix ry viewmatrix viewmatrix fact code create view matrix directly based o n matrix individual transformation matrix rotation tran slation given subsection view matrix simplerotator matrix product ﬁve translation rotation matrix co ry sin ry ry co ry rx rx sin rx co rx tx ty tz translate viewdistance z directiontranslate origin toá âã ä ã å âæ ç è æ ã è á é âã ä ã è ê ë á ì radian í á ä æ îï ä ã èá âã ä ã å âæ ç è æ ã è á origin é âã ä ã è ê ë á ë radian s actually diﬃcult implement multiplicati javascript ﬁle curious lighting material section turn tinue use basic opengl model covered section andsection arechapter graphic webgl responsible implementing lighting equation o wn glsl shader program mean aware implementation detail al o mean pick choose part lighting equation implemen t given application goal lighting equation compute color po int surface input equation include material property surfa ce property light source illuminate surface angle light hit s surface play important role angle computed direction ligh t source normal vector surface computation specular reﬂection us direction viewer direction reﬂected ray vector used computation shown lighting diagram subsection light source viewer surfacen l r v vector l n r andvshould unit vector recall unit vector pro perty cosine angle unit vector given dot product vector lighting equation involves ambient emission lor depend direction vector shown diagram big picture mind work som e example use various aspect lighting model minimal lighting simple lighting make graphic look real istic minimal lighting use viewpoint light white light t hat shine direction viewer scene simplest case directional li ght used eye coordinate directional viewpoint light shine direction negative light direction vector lin diagram point light source thing minimal let s consider diﬀuse reﬂection onl case color light reﬂected surface product diﬀuse mat erial color surface color light cosine angle light hit s surface product computed separately red green blue component color assuming light white light color formula material color probably come javascript uniform attribute varia ble cosine angle light hit surface g iven dot product normal vector nwith light direction vector eye coordinate li dot product simply assumes ni given eye coordinate normal vector ordi narily come javascript expressed object coor dinates used lighting calculation transformed eye coo rdinate discussed subsection need normal transformation matrix der ived thechapter graphic webgl modelviewmatrix sincethenormalvectormustbeoflengtho ne theglslcodeforcomputing nwould like n normalize normalmatrix normal wherenormalis original normal vector object coordinate normalmatrix normal transformation matrix normalize glsl function return vector length pointing direction parameter complication dot product negative mean normal vector point away light source screen case ordinarily mean light doe illumina te surface case viewpoint light know visible surface s illuminated mean looking surface incorre ct normal speciﬁed let s assume want treat side surface sa correct normal vector negative normal vector f ront correct dot product handle case simply use ab ab ifcoloris diﬀuse color surface visible color computed visiblecolor ab color ifcoloris instead rgba color rgb component multi plied dot product visiblecolor ab sample program implement minimal lighting model lighting calculation vertex shad er scene drawn lighting vertex shader uniform boolvariable specify lighting applied vertex shader source code program attribute coords object coordinate vertex uniform modelviewprojection combined transforma tion matrix uniform bool lit lighting applied uniform normal normal vector object coordinate s uniform normalmatrix transformation matrix rmal vector uniform color basic diffuse color varying v color color sent fragment shader void main coords glposition modelviewprojection coords lit n normalize normalmatrix normal transformed u nit normal float dotproduct ab vcolor dotproduct vcolor color easy add ambient light model using uni form variable specify ambient light level emission color easy directional light used example technically ly correct orthographic projection generally acceptabl e result perspective graphic webgl correct viewpoint light perspective projectio n point light position eye eye coordinate point light li ttle diﬃcult directional light remember lighting calculation eye coordin ate vector lthat point surface light computed l normalize lightposition wherelightposition give position light eye coordinate eyecoords position surface point eye coordinate viewpoint light lightposition lcan computed simply normalize eye coordinate surface point computed applying modelview matrix object coordinate point mean shader program need know modelview matrix s suﬃcient know combined mod elview projection matrix vertex shader shown modiﬁed use point light follows attribute coords object coordinate vertex uniform modelview modelview transformation matri x uniform projection projection transformation mat rix uniform bool lit lighting applied uniform normal normal vector object coordinate s uniform normalmatrix transformation matrix rmal vector uniform color basic diffuse color varying v color color sent fragment shader void main coords eyecoords modelview coords glposition projection eyecoords lit l normalize point light n normalize normalmatrix normal transformed u nit normal float dotproduct ab dot n l vcolor dotproduct vcolor color note situation better m ove lighting calculation fragment shader soon specular reﬂection phong shading add specular lighting basic lighting model need work vector rand vin lighting diagram perfect specular reﬂection viewer see specular highlight ifris equal v unlikely lighting equation using specular reﬂection depends dot product represents cosine angle randv formula contribution specular reﬂection t visible color s specularmaterialcolor lightintensitychapter graphic webgl wheresis specular exponent material property called shi niness opengl formula valid greater zero specular contribution zero theunitvector rcanbecomputedfrom landn sometrigonometryshowsthat risgiven glsl function reﬂect n computes reﬂection vector ithrough unit normal vector n value reﬂect l n thanr glsl assumes light direction vector point light surface lvector doe reverse unit vector vpoints surface position viewer r emember thatwearedoingthecalculationsineyecoordinates foran orthographicprojection theviewer essentially inﬁnite distance vcan taken perspective projection viewer point eye coordinate vi given normalize whereeyecoords contains xyz coordinate surface point eye c oordinate putting assuming nandl glsl code computing color take form r l n v normalize assumes perspective p rojection color dot l n diffuse lightcolor dot r v color color pow dot r v specularexponent specularmaterialcolor specularlightcolor sample program implement lighting diﬀuse specular reﬂection program draw curve d surface normal vector given vertex attribute uniform variable t o add ﬂexibility lighting light position speciﬁed uniform variab le constant following opengl convention lightposition directional light eye coordinate light light point light eye coordinate division convention homogeneous coordinate pract ice usually zero program allows di ﬀerent diﬀuse specular material color light white wit h diﬀuse intensity specular intensity able understand cod e vertex shader attribute coords attribute normal uniform modelview uniform projection uniform normalmatrix uniform lightposition uniform diffusecolor uniform specularcolor uniform float specularexponent varying v color void main coords eyecoords modelview coords glposition projection eyecoords n l r v vector lighting equation n normalize normalmatrix normal directional graphic webgl l normalize point light l normalize eyeco r l n v normalize assumes perspective p rojection dot l n vcolor vertex color dot l n dot r v color pow dot r v specularexponent specularc olor vcolor color fragment shader just assigns value vcolortoglfragcolor approach imitates opengl doe lighting ca lculations vertex shader called lighting similar lambert shading lambert shading us diﬀuse reﬂection case vertex lighting doe good result saw subsection bad result spotlight tends produce bad speculum r highlight unless primitive small light source close primitive compared size primitive angle light make primitive vertex ha ve little relationship angle light interior point primitive lighting depends heavily angle li ghting good result case better result lighting lighting calculation vertex shader fragm ent shader lighting certain data available t vertex shader passed fragment shader varying variable includes fo r example object coordinate eye coordinate surface point appl y property diﬀuse color attribute uniform variable course uniform variable directly accessible fragment shader light properti e generally uniform material property course normal vector s o essential lighting normal vector uniform variable usually attribute pixel lighting generally us interpolated normal vector passed fragment shader varying variable phong shading just lightin g using interpolated normal interpolated normal vector general approximat ion geometrically correctchapter graphic webgl normal s usually good good result issue interpolated normalsarenotnecessarilyunitvectors evenifthenormal sinthevertexshaderareunitvectors s important normalize interpolated normal vec tor fragment shader original normal vector vertex shader n ormalized interpolation work properly sample program us lighting urge read shader source code program aside fact lighting calculation moved fragment shader id entical previous sample program demo let view object drawn using vertex lighting object drawn using pixel lighting us shader program sample program example t hat demo demo cylinder vertex bo ttom edge light source fairly close cylinder example lig hting miss specular highlight cylinder entirely hand torus s small triangle lighting demo give fairly good appro ximation correct specular highlight sample program port original webgl phong lighting program webgl sh ows shader program look like glsl e change minimal attribut e variable variable varying variable variable vertex shader variable fragment shader fragment shader var iableglfragcolor replaced custom variable javascript t o changed example modiﬁed use vertex array object ganize data various object drawn program adding complexity shader program getting complex add suppo rt multiple light additional light property lighting texture s feature useful use data structure function help manage compl exity glsl data structure introduced subsection function deﬁnitions subsection let s look brieﬂy used work light graphic webgl make sense deﬁne structto hold property light property usually include minimum position color l ight property added depending application detail li ghting model used example make possible turn light oﬀ boolvariable added say light enabled struct lightproperties bool enabled position color light represented variable type lightproperties likely uniform variable value speciﬁed javascript s ide multiple light represented array example allow light uniform lightproperties light material property represented struct detail vary application example allow diﬀuse specular color struct materialproperties diffusecolor specularcolor float specularexponent data type hand write function help w ith lighting calculation thefollowingfunctioncomputesthecontributionofonelig httothecolorofapointonasurface parameter global variable shad er program instead lightingequation lightproperties light materialproperties material eyecoords eye coordinate point n normal vector surface v direction l r light direction reflected light direction directional light l normalize point light l normalize eye coords dot l n light doe illuminate surfac e return reflection dot l n ecolor r l n dot r v ray reflected viewer float factor pow dot r v reflection factor return reflection chapter graphic webgl assuming light calculat ion lighting equation look like color start black color compon ents zero int add contribution light light light contribute color enabled color lightingequation light material eyecoords normal viewdirection lighting sample program us glsl data structure similar one just looking intro duce new feature program draw graph parametric surface x y z coordinate point surface given function variable uandv deﬁnitions function input user viewpoint light extra light added attempt provide illumination graph con idered side colored yellow blue program optionally sh ow grid line surface s default surface look like grid line example lighting subsection need material material drawing polygon material drawing polygon furthermore drawing face r everse direction normal vector normal vector assumed point face shader program doe lighting calculation doe know s drawing face face information come fr om outside shader program fragment shader boolean variable named glfrontfacing value set totruebefore fragment shader called shader workin g face polygon fragment shade r cancheck valueof thisvariable decide use material materi al lighting equation sample program uniform variable represent tw o material light normal vector eye coordinate point varyi ng variable normal transformation matrix applied fragment shade r uniform materialproperties frontmaterial uniform materialproperties backmaterial uniform lightproperties light uniform normalmatrix varying v normal varying v eyecoords chapter graphic webgl color fragment computed using variable d thelightingequation function shown normal normalize normalmatrix v normal viewdirection normalize eyecoords color int light glfrontfacing computing color face color lightingequation light frontmaterial v eyecoords normal viewdirection computing color face color lightingequation light backmaterial v eyecoords viewdirection glfragcolor note second lightequation normal vector given negative sign revers direction normal vector fo r use face want use lighting doing l ighting deal fact glfrontfacing available vertex shader option comput e color color vertex shader pa s value fragment shader varying variable fragment shader cide color use based value glfrontfacing webgl setting related lighting ordinarily webgl determines face triangle according rule face viewed vertex listed counterclockwise order tr iangle javascript command revers rule vertex listed clockwise o rder face viewed command restores default rule case sure face visible t happen object closed surface seen outside th e triangle face outside case wasted eﬀort draw face sure hidden face javascript command face tell webgl discard triangle drawing based th ey thecommands facing triangle discarded cullfaceis enabled default discard triangle sample program display set grid line surfa ce drawing object exactly depth cause problem depth test seen end subsection insubsection opengl us polygon oﬀset solve problem solution available webgl p olygon oﬀset turned command offsetfill chapter graphic webgl turned oﬀ offsetfill sample program polygon oﬀset turned drawi ng graph turned oﬀ drawing grid line moving light example far light ﬁxed respect t viewer light headlight car object nd street light stay position world change posi tion rendered scene point view change lighting calculation eye coordinate position light given object coordinate world coordinate position mu st transformed eye coordinate applying appropriate modelview transformation transformation t shader program modelview matrix sh ader program represents transformation object rendered th transformation light solution store li ght position eye coordinate shader s uniform variable represents posit ion light set position eye coordinate light ﬁxed respect viewer positi light expressed eye coordinate example position point light used viewpoint light location view er eye coordinate light appropriate modelview transformation ide ntity light ﬁxed position world coordinate th e appropriate modelview transformation viewing transformation viewing transformation applied light position transform ey e coordinate webgl transformation applied javascript d output transformation shouldbesenttotheuniformvariableintheshaderprogramt hatrepresentsthelightpositionin eye coordinate similarly light move world combined modeling viewing transform applied light positio n javascript glmatrix library subsection deﬁnes function transformedvector originalvector matrix used transformation matrixin function modelviewtransformationmatrix recall bytheway thatl ightpositionisgivenasa using homogeneous coordinate subsection multiplication modelview matrix work light directional point posi tion represented way javascript function used set position set position light eye coordinate param u position loc uniform variable location position property light param modelview modelview matrix transforms lig ht position eye coordinate param lightposition location light object coordinate function setlightposition u position loc modelview lightposition let transformedposition new chapter graphic webgl transformedposition lightpositio n modelview u position loc transformedposition appropriate modelview matrix identity light ﬁxed respect vi ewer just viewing transformation light ﬁxed p osition world combined viewing modeling transformation light move world remember light position like light properti e set rendering geometry illuminated light spotlight encountered spotlight fact didn t mention spotlight existed opengl instead emitti ng light direction spotlight emits cone light spotlight kind point light vertex cone located position light cone point directio n called spot direction spot direction speciﬁed vector size cone speciﬁed cutoﬀ angle light emitted light position direction ngle spot direction cutoﬀ angle furthermore angle c utoﬀ angle intensity light ray decrease angle ray spot di rection increase rate intensity decrease determined ve number called spot exponent intensity ray given cswhereiis basic intensity light ci cosine angle ray spot direction dsis spot exponent illustration show spotlight shining surfa ce image taken sample program cutoﬀ angle spotlight degree image left spot exponent zero mean falloﬀ intensity increasing angle spot direction middle image spot exponent image right suppose want apply lighting equation spotl ight consider point pon surface lighting equation us unit vector l point ptowards light source spotlight need vector point light source p use consider angle spot direction angle greater cutoﬀ angle pgets illumination spotlight compute cosine angle spot direction dot product wheredis unit vector point spot graphic webgl cutoﬀ angle spotdirectionspotlight pl ð ñ implement spotlight glsl add uniform variable s represent spot direction cutoﬀ angle spot exponent implementati actually us cosine cutoﬀ angle instead angle comp cutoﬀ value using dot product represents cosine angle light ra y spot direction lightproperties struct struct lightproperties bool enabled position color spotdirection float spotcosinecutoff float spotexponent zero light directional spotlig ht point light ifspotcosinecutoﬀ equal zero light regular point light spotlight spotlight need compute factor cethat multiplied basic light color eﬀective light intensity spotlight t point surface following code computation fragment shader sa mple program spotlight value ceis assigned spotfactor float spotfactor multiplier account spotlig ht l normalize l normalize v eyecoords light spotlig ht d float spotcosine dot d l spotcosine spotfactor pow spotcosine point outside cone light spotli ght spotfactor light add color light intensity multiplied spotfactorchapter graphic webgl try sample program read source code try demo version section similar sample progr added option animate spotlight demo thespotdirection uniform variable give direction spotlight eye coordinate moving spotlight addition transforming posi tion worry transforming direction spotlight facing spot direction vector transforms way normal vector s ame normal transformation matrix used transform normal vector used t o transform spot direction javascript function used apply model view transformation spot direction vector send output shader program set direction vector light eye coordinate param modelview matrix doe coord inate transforms param u direction loc uniform variable location spotdirection param lightdirection spot direction object coordi nates function setspotlightdirection u direction loc modelview lightdirection let normalmatrix normalmatrix modelview let transformeddirection new transformeddirection lightdirect ion normalmatrix u direction loc transformeddirection course position spotlight transf ormed moving light light attenuation general property light consider atte nuation refers fact illumination light source crease increasing distance light attenuation applies point light si nce directional light eﬀectively inﬁnite distance correct behavior according phy sics illumination proportional square distance doesn t usually good result computer graphic fact light sou rces far attenuation distance opengl support attenuation light intensity multiplied dis distance light source b andcare property light number b andcare called constant attenuation linear tion quadratic attenuation light source d efault ai bandcare zero mean attenuation course need implement exactly mode l application example quadratic attenuation rarely used ne xt sample program use formula d attenuation factor attenuation constant ai added property light source value zero mean attenuati lighting computation contribution light source lighting equation s multiplied attenuation factor graphic webgl diskworld sample program ﬁnal complex example lighting webgl basic scene subsection added lighting eﬀects scene show red car traveling edge disk new version sun rotates world sun turned oﬀ night sun disk shadow sun w ere left night shine disk illuminate object night headlight car turn implemented spotlight travel long car subject modelview transformation use d car night lamp center world turned light attenuatio n used lamp illumination weak object close lamp finally dim viewpoint light make sure s absolute darkness night scene program h eadlights illuminate road tree probably illumination lamp stronger closer lamp run program action read source code s diskworld example us lighting give m uch better result vertex lighting especially spotlight multiple light spotlight attenuation lighting requires lot uniform v ariables fragment shader possibly supported implementation seesubsection information limitation shader program s really sample program textbook really likely modern gpus just mean possibility example won t work browser s device application using complex lightin g alternative approach desirable hopefully better simply moving calcu lation vertex shader option use algorithm scene r endered time pas doing lighting calculation smaller number l ights subsection technique used implement idea graphic webgl texture webgl api working texture covered section section look example technique using texture texture transforms glmatrix insubsection saw apply texture transformation opengl open gl maintains texture transform matrix manipulate d apply scaling rotation translation texture coordinate used sample texture easy program operation webgl need compute th e texture transform matrix javascript transform matrix sent uniform matrix variable shader program applied texture coordi nates note long texture transformation aﬃne applied vert ex shader texture sampled fragment shader doing transfo rmation vertex shader interpolating transformed texture coordinate gi ve result interpolating original texture coordinate applying transformat ion interpolated coordinate fragment shader using glmatrix coordinate transformation make sense use texturetransformsaswell wecanimplementscaling rotation translation javascript using glmatrix function need return new matrix represented array leng th new matrix identity matrix setsato identity matrix ai b dx dy multiplies matrix bby matrix representing translation dx dy set ato resulting matrix aandbmust exist b sx sy multiplies bby matrix representing scaling sx sy set ato resulting matrix b angle multiplies bby matrix representing rotation angle radian origin set ato resulting matrix implementing texture transformation parameter aandbin function texture transform matrix example apply scalin g factor texture coordinate use code var texturetransform texturetransform texturetransform u texturetransform false texturetransform line assumes utexturetransform location uniform variable type shader program remember scaling textur e coordinate factor willshrinkthe texture surface applied sample webgl program us texture transformation animate texture program texture coordinate nput vertex shader attribute named atexcoords texture transformation uniform variablechapter graphic webgl namedtexturetransform transformed texture coordinate computed vertex shader glsl command texcoords texturetransform vtexcoords read source code used context o f complete program generated texture coordinate texture coordinate typically provided shader pr ogram attribute variable texture coordinate available p ossible generate shader program result usually look od using texture coordinate customized object rendered th ey acceptable case generated texture coordinate usually computed f rom object coordinate object rendered comput ed original vertex coordinate transformation applied t hen object transformed texture transformed object look like texture attached object texture coordinate alm ost function object coordinate aﬃne function used usually ca se texture coordinate computed vertex shader need s end object coordinate fragment shader varying variable computat ion simplest idea generated texture coordinate simp ly use xandycoordinates fromtheobjectcoordinatesystemasthetexturecoordinate ifthevertexcoordinatesaregiven value attribute variable acoords mean using texture coordinate eﬀect projecting texture surface direction positive perpendicular mapping work ok polygon facing direction positive z doesn t good result polygon s mapping look like cube texture project nicely face cube t work ok face cube visible image mirro face exactly just line color come pixel border texture image example c opy texture image exactly ﬁlls face cube doesn t happen automati cally need texture transform adapt texture image surface chapter graphic webgl course project direction map tex ture face cube decide direction use let s say want project direction coordinate ax want project pproximately direction surface facing normal vector th e surface tell direction project direction normal vector ha s greatest magnitude example normal vector s hould project direction positive normal vector equal tell project direction negative resulting cubical generated texture coordin ate perfect cube look pretty good object s seam direction projection change ex ample technique applied teapot using ﬂat shading normal polygon point direction computation vertex shader smooth shading normal diﬀerent vertex polygon point diﬀerent direction yo u project texture coordinate diﬀerent direction diﬀerent vertex interpolate t result result likely mess doing computation fragment shader saf er suppose interpolated normal vector object coordinate provided fr agment shader varying variable namedvnormalandvobjcoords following code used generate cubical texture coordinate ab v ab v ab ab v project texcoords v v v ab v ab v ab ab v project texcoords v v v project texcoords v v v projecting example yandzcoordinates vobjcoords used texture coordinate coordinate comput ed depending projection positive negativechapter graphic webgl direction order coordinate chosen texture mage projected directly surface versed experiment generated texture using demo version section demo show varie ty texture object using cubical generated texture coordinate discussed try texture coordinate projected just xyorzxplane cylindrical projection wrap textu image cylinder ﬁnal option use xandycoordinates eye coordinate texture coordinate option ﬁxes texture screen object texture doesn t rotate obj ect eﬀect interesting probably useful demo procedural texture texture image texture wi th image texture color computed sampling image based pair texture c oordinates image essentially deﬁnes function take texture coordinat e input return color output way deﬁne function s looking value image procedural texture deﬁned function value computed looked texture coordinate used input code segment output corresponding color value texture webgl procedural texture deﬁned fragment s hader idea simple set texture coordinate instead using look color use input mathematical computation computes representing color theory computation use d long component range extend idea texture texture use texture coordinate texture coordinate use instead mapping point plane color texture map point space color s possible ha ve texture similar image texture color value stored poin t grid texture sampled looking color grid grid color take lot memory hand procedural texture use memory resou rces use little computational resource procedural texture procedural texture fact quite lot large body theory practice related procedural texture wi ll look possibility s torus textured using diﬀerent procedural tex tures image demo mentioned end subsection torus left us procedural texture representi ng checkerboard pattern texture coordinate provided usual value s vertex attribute variable shader program checkerboard pattern regular gri d colored square texture pattern stretched dist orted mapped thechapter graphic webgl curved surface torus given texture coordinate th e varying variable vtexcoords color value checkerboard texture computed f ollows fragment shader color float floor v scale float b floor v scale mod odd color pink color light blue thescalein second line represents texture transform ation used adapt size texture object textured texture coordinate torus range scaling square n checkerboard pattern mapped torus torus picture scaleis ﬂoorfunction computes largest integer equal parameter aandbare integer value mod test fourth line test odd idea aorbincreases decrease change odd odd ensures neighboring square pattern diﬀerently colored second torus illustration us checkerboard p attern pattern grid cube alternate color d irections texture coordinate cube use object coordinate t texture coordinate point position space object coor dinate torus deﬁned eﬀect like carving torus solid bl ock colored inside checkerboard pattern note don t c olored square rectangle surface torus intersection surface colored cube intersection wide variety shape d isadvantage particular texture advantage stretching nd distortion texture code computing checkerboard d case using object coordinate instead texture coordinate texture element random ness t use actual randomness texture look diﬀerent y time drawn sort incorporated algo rithm computes texture don t want color texture look completely sort pattern pattern proced ural texture based type perlin noise namedafterkenperlinwhoinventedthealgorithmin torus illustration us text ure based directly perlin noise marble texture fourth torus us perlin noise component computation texture similar version possib le don t know algorithm perlin noise copied glsl code http code published open source license used freely project sample program perlin noise computed functi onsnoise v vi output function ﬂoatin range computation float value snoise scale v objcoords value value map range color chapter graphic webgl vobjcoords varying variable containing object coordinate o f point textured scaleis texture transformation adapts size textu torus output snoise varies valuevaries colorfor texture range pale magenta white color v ariation torus characteristic perlin noise pattern somewhat random regular similarly sized feature right scaling coloration basic perlin noise make decent cloud texture marble texture fourth torus illustration adding noise regular periodic pattern basic technique produc e wide variety useful texture starting point periodic function variable wi th value periodic pattern input function ca n computed texture coordinate diﬀerent function produce diﬀerent eﬀects pattern shown use function sin t ab sin t t respectively second image taking absolute value sin t produce narrower sharper dark band plain sinefunction ﬁrst image function used f marble texture illustration sharp discontinuity image interesting visual eﬀect pattern function f t variable use function v deﬁned f aandbare constant value aandbdetermine orientation spacing color band pattern pattern use f add noise pattern add perlin noise function input function pattern function f b c d snoise e v new constant dandedetermine size intensity perturbation pattern example code creates marble texture th e torus v v objcoords scale float t t snoise v float value ab sin t color sqrt value thesqrtat end added make color band sharper t hey demo version section let apply variety texture diﬀerent object procedural texture used demo just small sample possibility demo chapter graphic webgl bumpmaps sofar theonlytexturesthatwehaveencounteredhaveaﬀect edcolor whethertheywereimage texture environment map procedural texture eﬀect vary color surface applied generally texture refer variation property example bumpmapping property modiﬁed texture normal vector surface normal vector d etermines light reﬂected surface major visual clue direction t hat surface face modifying normal vector eﬀect modifying apparent ientation surface respect way reﬂects light add appear ance roughness bump surface eﬀect visually similar changing th e position point surface bumpmapping change appearance achieved wi thout actually changing surface geometry alternative approach modifying th e actual geometry called displacement mapping better result requir e lot computational memory resource typical way bumpmapping height map heigh t map grayscale image variation color used specify ount point surface appear displaced height map mappe d surface way image texture using texture coordinate s upplied attribute variable generated computationally instead used m odify color pixel color value height map used modify normal ve ctor go lighting equation computes color pixel height map th used way called bump map m sure implementation idea optimal produce pretty good result example example bumpmapped torus s shown height map applied torus ﬁrst example gray dot height map produce th e appearance bump torus darker color map greater appa rent displacement point surface black center dot map top bump second example dark curve height map produce dee p groove surface usual texture height map stretched ver torus distorts shape feature map bumpmapping implemented let s ﬁrst imagin e want apply consider normal vector point surface suppose height map texture applied surface t ake vector shown black following illustration point direction height map grayscale value graphic webgl ô õ ö ø ù ú û ü ô ö ù ý ó þ point direction height ßö à á â ã ã ecrease ä á å æ ù þ ó original normal vector ø à ã ô æ ç ô è õ want theß á å æ ù þ ó à â à à êù ß ô æ ô ë ß ôlted â ô êó ö ô ß ìo achieve e ﬀect ù ã ã ù íá â ô ú â ó à æ theý ó þ à å æ å à í height map ö ó è ó ü è ormal shown green wewantthesurfacetoappearasifitistilted asshowninthe middleoftheillustration m assuming darker color height map correspon d smaller height literally tilting surface change direction normal vector change normal vector adding multiple vector fro m height map original normal vector shown right changing numb er multiplied height map vector change degree tilting surfac increasing multiplier give stronger bump eﬀect using negative multiple tilt surface opposite direction transform bump dimple vice versa refer multiplier thebump strength thing lot complicated surfa ce space surface tilted left right surface inﬁ nitely direction tilt surface note vector point directio n tilt point surface perpendicular surface vector point surface called tangent vector surface bump mapping need tangent ve ctor point surface tangent vector provided wit h normal vector data surface version bumpmapping tang ent vector need coordinated texture coordinate surface tangent vector point direction scoordinate texture coordinate increasing fact properly account variation height map need second tangent vector second tangent vector perpendicular t normal ﬁrst tangent vector commonly called binormal vector c computed normal tangent binormal point direction ttexture coordinate increasing exactly true depe nd texture mapping long s far oﬀ result modify normal vector proceed follows sample height map point separated small diﬀerence scoordinate let abe diﬀerence value arepresents rate height value changing t direction tangent vector remember point sdirection surface sample height map point separated small diﬀerence thetcoordinate let bbe diﬀerence value brepresents rate height value changing direction binormal vector let dbe vector t b t tangent vector bi binormal add d multiple d original normal vector produce modiﬁed normal used lighting equation know multivariable calculus doing amou nt using approximation directional derivative gradient vector height function surface tried explain procedure following illust ration need visualize thechapter graphic webgl situation noting normal tangent binorm al vector perpendicular white arrow left actually multipl e binormal tangent vector length given change color tw o ï ðñ ò ó height mapô óðõ ö õ ø ù ú û ù ü ý wo neighboriü õ ï ðñ ò óþ ÿ ehe change color ö ò ï ðñ el vector shown tangent binormal e ö ò ù ü õ ent normal binormal vector piñ ò ó x ü öeþ s ø ù òthat corresponds piñ ò ó ð ü theb s ï ù ï ò ñ ö ò þ ù óó b óù ò areþ x ò sltiple x ö ò o ö ò x ø þ øom height ö ò ú ù ø ò ù ý ý ò ý normal vector x ï ø x ý s ò new normal vector shown green sample program demonstrates bumpmapping bumpmapped torus illustration p rogram run program pay attention specular highlight wil l help bumpmap texture diﬀers image texture eﬀect obvious change diﬀuse color white color specular c olor white program add tangent vector object chose cube cylinder tangent vector relatively easy compute honestly took tangent vector poi nting correct direction bumpmapping implemented fragment shader sample program essential problem modify normal vector let s e xamine glsl code doe work normal normalize v normal tangent normalize v tangent binormal cross normal tangent float bmup bmright sample bumpmap thre e texels bumpmap v texcoords bmup bumpmap v texcoords bmright bumpmap v texcoords bumpvector bmright tangent bmup bin ormal normal bumpmapstrength bumpvector normal normalize normalmatrix normal ﬁrst line compute normal tangent binorm al unit vector normal tangent come varying variable value interp olated attribute variable turn input shader program javasc ript binormal perpendicular normal tangent compu ted cross product normal tangent subsection line value height map pixe l corresponds surface point processed neighboring height map value current pixel coordinate texture given texture coordinate vtexcoords value red color component bumpmap texture texture grayscale color component th e value bmupis value pixel current pixel texture coo rdinates computed addingchapter graphic webgl current pixel bumpmapsize uniform variablethatgivesthesizeofthetextureimage inpixels sincetexturecoordinatesintheimage run diﬀerence pixel similarly bmright height map value pixel right curren t pixel bumpmap texture note miniﬁcation ﬁlte r bumpmap texture set need read actual value texture t value averaged pixel returned def ault miniﬁcation ﬁlter vector tangentand binormal white vector illustration sum bumpvector multiple sum added normal vector modiﬁed normal vector mult iplier bumpmapstrength uniform ﬂoatvariable calculation far object coo rdinate resulting normal depends original object coordinate transformation applied normal vector transformed nto eye coordinate used lighting equation transformation don e line code shown environment mapping subsection showed use environment mapping make look like surface object reﬂects environment environment ma pping us cubemap texture really just way mapping cubemap texture s urface doesn t make object reﬂect object environment make t look object reﬂecting environment adding large cube surrounding scene cubemap mapped interior object reﬂecting skybox object environment won t p art reﬂection sample program implement environment mapping webgl program show single fully reﬂective object in ide skybox lighting used scene color skybox objec t taken directly cubemap texture object look like perfect mirror thi s way using environment map example basic object color b e computed using lighting image enviro nment map blended basic color appearance shiny f ully reﬂective surface point sample program just use skyb ox environment map webgl shader program used actual ly quite short cubemap texture subsection showed load cubemap texture separate image access texture glsl u sing variable type samplercube remember cubemap texture sampled using vector point origin point cube textur e sampled s easy render skybox draw large cube centered origin enclosing scene camera position color pixel fragmen t shader sample cubemap texture using vector point origin th e point cube rendered color point cube color corresponding point cubemap note cube s object coordi nates used sample texture texture attached cube whe n rotate view shader program rendering skybox vertex shad er just need compute glposition usual pas object coordinate fragment sh ader varying variable vertex shader source code skybo x chapter graphic webgl uniform projection uniform modelview attribute coords varying v objcoords void main eyecoords modelview glposition projection eyecoords vobjcoords coords fragment shader simply us object coordinate t o fragment color sampling cubemap texture precision mediump float varying v objcoords uniform samplercube skybox void main glfragcolor texturecube skybox v objcoords note vector used sample cubemap texture d oes unit vector just point correct direction understand cube map texture applied objec t reﬂection map ask point texture visible p oint object think texture actual environment ray light wo uld come environment hit object reﬂected viewer just ha ve trace light ray viewer object environment direction light ray reﬂected determined normal vecto consider version geometry think ge ometry n vr viewerc t r object t t object illustration dotted box represents cubemap texture really think inﬁnite distance vi vector point object viewer ni normal vector surface ri reﬂection vthrough texel cubemap texture visible viewer t point surface vector needed sample cubemap texture pict ure show vector diﬀerent point surface glsl rcan computed v n graphic webgl cubemap texture applied skybox wil l look object reﬂecting onlyif transformation applied skybox cube reason transforming skybox doe automatical ly transform cubemap texture want able rotate view need able transform skybox want reﬂected object look like reﬂecting sk ybox transformed position original position viewing transformation c thought modeling transformation skybox object t scene ﬁgure make apply cubemap texture let s think happens case rotate view degree s rotating skybox object degree illustration ve drawn viewer t position rotated scene square fainter dotted ou tline skybox cubemap texture hasn t moved n vr viewer skybox rotated viewing transformationthe point ected t t t t t t t t t t t t t t object compute ra use sample cubemap texture w rong point texture viewer point rintersects skybox point whererintersects texture correct point texture p icked vector ti computed transforming rby inverse viewing transformation rwas rotated viewing transformation inverse viewing transfo rmation undoes transformation puttingtinto coordinate cube map case sincerwas rotated degree rotation degree applied compute just way understand geometry prefer think cubema p rotating skybox need apply texture transformation way saying need transform rbefore using sample texture sample program shader program used repr esent object diﬀerent used render skybox vertex shader ve ry typical note modelview transformation include modeling transforms applied object addition viewing transform applied enti scene source code uniform projection uniform modelview attribute coords attribute normal varying v eyecoords chapter graphic webgl varying v normal void main eyecoords modelview glposition projection eyecoords veyecoords vnormal normalize normal vertex shader pass eye coordinate fragment sha der varying variable eye coordinate viewer point v ectorvthat point surface viewer simply source code fragment shader implement algor ithm discussed sampling cubemap texture doing perfect reﬂ ection color fragment come directly texture precision mediump float varying vcoords varying v normal varying v eyecoords uniform samplercube skybox uniform normalmatrix uniform inverseviewtransform void main n normalize normalmatrix v normal v eyecoords r v n t inverseviewtransform r glfragcolor texturecube skybox t theinverseviewtransform computed javascript modelview matrix viewing transform applied ddition modeling transformation applied using command inverseviewtransform modelview inverseviewtransform inverseviewtransfo rm need transform vector ﬁrst line discard translatio n modelview matrix putting result inverseviewtransform translation doesn t aﬀect vector translation zero case th e viewing transformation program just rotation second line convert inverseviewtransform inverse framebuﬀers term frame buffer traditionally refers region memory hold color data image displayed computer screen bgl aframebuﬀer data structure organizes memory resource need ed render image webgl graphic context default framebuﬀer used image appears screen default framebuﬀer created creates graphic context property depend option passed function changed created additional f ramebuﬀers created property controlled webgl program used rendering required certain advanced rendering algorithm graphic webgl framebuﬀer use color buﬀer hold color data image depth buﬀer hold depth value pixel called sten cil buﬀer covered textbook buﬀers said attached framebuﬀer framebuﬀer buﬀers attached detached webgl program time framebuﬀer doesn t need set buﬀers ne ed color buﬀer depth buﬀer able use framebuﬀer rendering d epth test enabled rendering framebuﬀer depth buﬀer needed nd rendering algorithm shadow mapping subsection use framebuﬀer depth buﬀer color buﬀer webgl possible attach col buﬀers framebuﬀer useful certain advanced algorithm comp utational application subsection rendering function aﬀect current buﬀer initially default framebuﬀer curre nt framebuﬀer changed calling framebufferobject ﬁrst parameter function second parameter benullto select default framebuﬀer drawing framebuﬀer created function discussed framebuﬀer operation example using framebuﬀers look webgl setting aﬀect rendering whichever framebuﬀer current example seen include clear color used ﬁll color bu ﬀer called enabled state depth test example aﬀects use depth buﬀer depth mask boolean value control value written depth b uﬀer rendering enabled state depth test determines value fr om depth buﬀer used rendering depth mask determines new val ues arewritten depth buﬀer writing depth buﬀer turned oﬀ mmand false turned calling true default value true example using depth mask rendering transluc ent geometry object scene translucent opaque object rendered ﬁrst followed translucent object suppose rende red translucent object rendered opaque object lie translucent o bject depth test cause opaque object hidden translucent object translucent mean opaque object visible translucent obj ect s important render opaque object ﬁrst s important turn oﬀ writin g depth buﬀer calling false rendering translucent object reason th translucent object drawn translucent object shou ld visible object note depth test enab led translucent object rendered translucent object hidden opaque object alpha blending rendering translucent object forfullycorrectrenderingoftranslucentobjects thetra nslucentprimitivesshouldbesorted order rendering painte r s algorithm subsection graphic webgl diﬃcult implement acceptable sults obtained rendering translucent primitive arbitr ary order opaque primitive fact demo fromsubsection fromsubsection possible control writing color buﬀer usi ng thecolor mask color buﬀer channel corresponding red green b lue alpha component color channel controlled separately example allow writing red alpha color channel blocking writing t green blue channel command true false false true thecolormask function take parameter color channel atruevalue allows writing channel falsevalue block writing writing blocked channel rendering value corresponding color comp onent simply ignored use color mask anaglyph stereo rendering subsection anaglyph stereo image contains image scene intended f left eye right eye image drawn using shade red t us combination green blue image drawn slightly diﬀe rent viewpoint corresponding view left right eye algorithm f anaglyph stereo form bufferbit bufferbit true false false false write red ch annel set view left eye render scene bufferbit clear depth buffer false true true false write green nd blue channel set view right eye render scene way set view left right eye simpl y rotate view degree note depth buﬀer color buﬀer mu t cleared drawing second image depth t est prevent part second image written finally like look blending blen ding refers fragment color fragment shader combined current c olor fragment color buﬀer default assuming fragment pass pth test replace current color fragment color blending enabled current color replaced combination current color fragment c olor previously discussed turning alpha blending transparency t command alpha minussrcalpha function determines new color computed current c olor fragment color parameter shown f ormula new color using glsl syntax src dest chapter graphic webgl wheresrcis source color color writte n fragment color anddestis destination color color currently t color buﬀer destination rendering operation alpha component source color parameter determine formula default coeﬃcients blend function given speciﬁes formula src dest new color equal source color blending note blending applies alpha component t rgb component color probably want drawing translucent color mean color written color buﬀer lpha component rendering canvas web page make canvas tself translucent allowing background canvas assumes webgl context created alpha channel default avoid y ou set blend function alternative command alpha minussrcalpha extra parameter specify separate coeﬃcients u sed alpha component formula ﬁrst parameter used t rgb component new color color buﬀer computed using formul d formula alpha component destination t color buﬀer remains original value blend function set used pas algorithm algorithm scene rendered time result combined produce ﬁnal image anaglyph st ereo rendering example simply want add result various pass ﬁll color buﬀer zero enable blending set blend function rendering simple example sample program us algorithm implement blurring scene example just texture image applied rectangle eﬀect blur texture image t echnique involves drawing scene time fragment shader color divide d blending used add fragment color pass ﬁnal col color buﬀer average color pass passe s scene oﬀset slightly original position color pixel ﬁnal image average color pixel surrounding pixel original sc ene render texture previous subsection applies framebuﬀer ha ven t used framebuﬀer turn topic use framebuﬀer render directly texture memory occupied texture image attached fram ebuﬀer color buﬀer sochapter graphic webgl rendering operation send output text ure image technique used sample program texture memory normally allocated image loaded texture using function seesection version used allocate memory loading image nto memory example sample program texture texture byte null nullparameter end line tell allocate new memory loading existing image data ﬁll memor instead new memory ﬁlled zero ﬁrst parameter texture target target normal texture value used working wi th cubemap texture fourth ﬁfth parameter specify height width image power parameter usually th e value shown meaning version discussed subsection note texture object ﬁrst created bound applies texture currently bound active texture unit webgl thing accomplished using function discussed subsection attach texture framebuﬀer need create fra mebuﬀer object make object current framebuﬀer binding exampl e framebuffer framebuffer thenthefunction canbeusedtoattachthetexturetotheframebuﬀer texture ﬁrst parameter second parameter say color buﬀer attached character zero allows possibility having color buﬀer attached framebuﬀer standard webgl color buﬀer allowed parame ter texture target used fourth texture object parameter t mipmap level usually zero mean rendering texture image mipmap image setup ready bind framebuﬀer draw texture drawing texture null start drawing default framebuﬀer poi nt texture ready use subsequent rendering operation texture object bound texture unit variable used shader program read tex ture likely use diﬀerent shader program drawi ng texture drawing screen recall function used specify shader program thesample program texture animated animation new ima ge drawn texture frame animation te xture image depth test disabled rendering mean fram ebuﬀer doesn t need depth buﬀer outline form rendering function sample progra m formchapter graphic webgl function draw draw image texture attached framebuffer framebuffer prog texture shader program texture bufferbit clear texture white use transparency drawing image test framebuffer doesn t depth buffer viewport set automati cally draw texture image change frame draw main scene using texture null draw def ault framebuffer prog shader program mage bufferbit bufferbit test reset viewport draw scene note viewport set hand drawing frame buﬀer reset drawing image match size canvas image rendered note texture object used program bound initia lization case necessary draw function example implemented using framebuﬀe r example subsection example texture image drawn default framebuﬀer copied texture object version section eﬃcient doe need copy image rende ring renderbuﬀers convenient use memory texture object t color buﬀer framebuﬀer appropriate create separate memory buﬀer associated texture depth buﬀer typical case case memory created renderbuﬀer renderbuﬀer represents memory attached framebuﬀer use color buﬀer depth buﬀer stencil buﬀer use need create renderbuﬀer allocate mory memory allocated using function renderbuﬀer bound allocating memory example crea te renderbuﬀer use depth buﬀer chapter graphic webgl let depthbuffer depthbuffer ﬁrst parameter second parameter speciﬁes derbuﬀer used value depth buﬀer bit pixel sixteen bit option webgl color buﬀer holding rgba color value pixel second parameter value possible us bit pixel bit red color channel bit green bit blue s tencil buﬀer value parameter width height buﬀer function used attach renderbuﬀfer used buﬀers framebuﬀer take form attachment renderbuffer framebuﬀer bound calling function called ﬁrst parameter shown parameter renderbuﬀer second parameter speciﬁe s renderbuﬀer used example attachment attachment dynamic cubemap texture render scene framebuﬀer need color buﬀer depth buﬀer example sample program example us cubemap texture cubemap textu used environment map reﬂective surface addition environment ma p program us cubemap texture skybox subsection s image program chapter graphic webgl environment case includes background skybox includes colored cube skybox texture reﬂective s phere center image reﬂects cube skybox mean e nvironment map texture t skybox include cube furthermore scene animated cube reﬂection spher e change cube mean environment map texture created frame use framebuﬀer render cubemap texture cubemap texture consists image po itive negative direction thex y andzaxes image associated diﬀerent texture targe t similar render cubemap need allocate storage side s code sample program cubemaptargets store texture target array convenience cubemappositive x cubemapnegative x cubemappositive y cubemapnegative y cubemappositive z cubemapnegative z dynamiccubemap create textur e object cubemap dynamiccubemap bind cubemap cubemaptargets byte null need create framebuﬀer renderbuﬀer f use depth buﬀer need attach depth buﬀer framebuﬀer f ramebuﬀer used render image texture changing color buﬀ er attachment framebuﬀer needed attach cubemap image color buﬀer just specify corresponding cubemap texture target example command cubemapnegative z dynamiccubemap attache negative z image texture object dynamiccubemap used color buﬀer currently bound framebuﬀer texture image rendered cubemap texture ready used aside fact image rendered instead image similar example earlier th section question remains render image sce ne needed cubemap texture make environment map reﬂective o bject want image environment surround object image ma camera placed center object basic idea point camera direction positive negative coordinate ax snap picture e ach direction s tricky detail correct note apply resu lt point surface approximation correct reﬂection fo r geometrically correct reﬂection point need view point t view center object t realistically make diﬀerent envir onment map point thechapter graphic webgl surface approximation look ok long obje ct scene close reﬂective surface camera really mean projection transformation vi ewing transformation projection need ﬁeld view cover s ide cube aspect ratio side cube square make t projection matrix glmatrix command projection parameter near far clipping dist ances chosen include object scene apply viewing transform ation camera origin pointing direction negative reﬂective object origin sample program use camera vie wing transformation image cubemap texture detail image stored fo r cubemap texture turn need apply transformation let s look th e layout image cubemap texture side cube shown black side t cube opened laid ﬂat marked corresponding coor dinate axis direction duplicate copy plus minus y side shown gray h ow side attach negative z image make cubemap ﬁ t way side layout side layout viewed outside cube camera taking picture insideof cube correct view need ﬂip picture camera horizontally experimentation need ﬂip vertically w eb image stored upside respect opengl convention ﬂips wit h scaling transformation putting code making cubemap s negative z image framebuffer dr aw offscreen buffer match size texture ima ge set projection modelview matrix virtual c amera projection modelview modelview modelview attach cubemap negative z image color buffer t framebuffer picture rendering image cubemapnegative z dynamiccubemap renderskyboxandcubes chapter graphic webgl function line render scene th e central reﬂective object responsible sending projection modelview mat rice shader program ﬁve image need aim camera diﬀeren t direction taking picture adding appropriate rotati viewing transformation example positive x image need rotate ca mera degree viewing transform need command modelview modelview easier think modeling transformati rotates positive x cube view camera thesample program cubemap image created function iccubemap read source code function detail dynamic cubemap program nice example make s use concept technique covered run program think going implemented demo webgl extension webgl designed run wide variety device including mobile device relatively limited graphical capability o f minimal set feature required webgl implementation webgl ha s mechanism activating additional optional feature optional feature d eﬁned webgl extension web page requires webgl extension guaranteed work implementation webgl case fairly easy write p age work extension missing fea ture extension available dozen extension deﬁnit ion standardized standard extension documented http standard opengl extension mechanism historica lly feature extension version opengl required fea tures later version true webgl extension webgl exten sion incorporated required feature webgl section cover webgl extension mechanism di scusses standard extension anisotropic filtering start simple extension improve appeara nce texture scene thestandardﬁlteringmethodsforsamplinganimagetexture givepoorresultswhenthetexture viewed oblique angle case pixel surf ace corresponds trapezoidal region texture standard miniﬁcation magn iﬁcation ﬁlter rule don t handle case filtering covered subsection better result obtained cost additional comp utation using called anisotropic ﬁltering sample texture taking trapezoidal shape int o account manygpuscandoanisotropicﬁltering itisnotarequiredfe atureinwebglimplementations commonly available extension anisotropi c ﬁltering extension used webgl webgl way sample program show use anisotropic ﬁltering extension show large plane textured br ick image viewedchapter graphic webgl sharp oblique angle extension available t hen user turn anisotropic ﬁltering oﬀ available program st ill draw scene using standard ﬁltering image program ani sotropic ﬁltering used image right left anisotropic ﬁlterin g texture blurred moderate distanced viewer webgl extension function used activate extension nameis string containing extension return v alue function nullif extension available chec k return value attempting use extension return v alue null javascript object object contain example c onstants meant passed webgl function order make use capabili tie extension contain completely new function anisotropic ﬁltering extension ext test availability extension activate pr ogram use statement anisotropyextension ext texture filteranisotropic ifanisotropyextension isnull extension available null t object property named texture maxanisotropy extthat used parameter set level anisotropic ﬁltering wil l applied texture example creating bind ing texture program say maxanisotropy ext parameter anisotropic ﬁltering level sett ing level turn oﬀ anisotropic ﬁltering higher value better result t maximum level asking level greater maximu m simply maximum level ﬁnd maximum u se max texture maxanisotropy ext recommended use mipmap linear miniﬁcation ﬁlter magniﬁcation ﬁlter using anisotropic ﬁltering texture typically conﬁgured using code similar following chapter graphic webgl need mipmaps minification filter minfilter mipmaplinear magfilter anisotropyextension null turn anisotropic filtering available max texture maxanisotropy ext maxanisotropy ext max extension available texture look good work observant user likely tice color second example consider pair extension named oes textureﬂoat webgl colorbuﬀerﬂoat ﬁrst make possible use texture color component value number stead integer second make possible render texture using t color buﬀer framebuﬀer extension webgl th ere similar webgl extension ext colorbuﬀerﬂoat want integer ﬁne representing color visually don t precision doing acc urate calculation application signiﬁcant numerical processing color compone nt value essential example consider ﬁnding average color value mage requires adding color value large number pixel thing speeded using parallel processing power gpu technique fo r doing us framebuﬀers texture serving color buﬀers assume mage width height power start drawing image ﬁrst texture think o f image divided half horizontally vertically givingfour angle aﬁrst step compute image average rectangle t color pixel image average color pixel origin al averaged image computed drawing rectangle second fram ebuﬀer using multiple sample image ﬁrst texture fragment shader t hat doe work ifdef gl fragment precision high precision highp float precision mediump float endif varying v coords texture coordinate object coords uniform texture texture containing orig inal image uniform float offset size square texture coordinat e space void main texture v coords b texture v coords c texture v coords offset d texture v coords offset offset glfragcolor b c d color average sampl e chapter graphic webgl ﬁrst pas square vertex rendered oﬀsetis drawing coordinate square vertex cover entire drawing area coordinate t square vertex cover lower left quarter drawing area ﬁrst sample fragment shader come quarter texture image o ther sample come corresponding point quarter imag second pas role framebuﬀers swapped square vertex drawn using fragment sh ader oﬀsetequal framebuﬀers swapped second pas sampl ing image produced ﬁrst pas result mage average rectangle cover o f rectangle cover original image thiscanberepeated withsmallerandsmallersquare s untiltheresultingimageissmall color eﬃciently read cpu averaged result color value average pixel o riginal image expect lot work parallel gpu g et answer faster using technique simply comput ations cpu thepointhereisthatforanaccurateresult wewantthecolo rcomponentstoberepresented ﬂoating point value gpu integer use technique sample program program problem ﬁnd average diﬀerence color image start drawing image texture render diﬀerence image n color pixel absolute value diﬀerence color pixel texture shader program apply averaging process diﬀerence image actual point sample program try evolve approximation given image using genetic inspired s tudents fall class felix taschbach pieter schaap worked similar pr ogram ﬁnal project didn t use gpu program average d iﬀerence original image approximation used measure good approximation used simple grayscale image goal approximatio n small square don t need know genetic algorithm especially program practical purpose source code heavil y commented want try understand screenshot particularly su ccessful run program showing original image best approximation produced afte r running genetic algorithm generation chapter graphic webgl interest program us webgl ﬂo color extension program attempt activate extension s initialization using following code let extcbf webgl colorbufferfloat let exttf oes texture float extcbf exttf throw new error program requires webgl extension webglcolorbufferfloat available browser program requires extension exception thro wn t activated extension object extcbf andexttf don t property needed program necessary activate extension program creates texture att ached framebuﬀers use color buﬀers subsection code creates texture null theparameter inthelastlinespeciﬁesthatthedatatypeforthecolorcomp onentsin texture ﬂoat data type error extension bee n activated gpu doe averaging computation textu re doing point calculation program computes series smalle r smaller averaged image stopping pixel image read pixel color texture using following code let data new pixel number p er pixel data read color data pixel array data parameter speciﬁes data type parameter value s legal extension graphic webgl instanced drawing webgl subsection andsubsection discussed feature webgl vertex array object instanced drawing feature standard webgl available optional webgl extension vaos ar e enabled extension oesvertexarrayobject instanced drawing enabled angle instanced array example look brieﬂy instanced drawing webgl sample webgl program us instanced drawing extension copy sample webgl progra m subsection modiﬁed use version exactly functio nality use instanced drawing webgl appropriate extension enabled instanceddrawext angle instanced array instanceddrawext throw new error webgl instanced array extension quired extension object instanceddrawext contains function equivalent bgl function instanced drawing function property extension o bject graphic context gl name word angle appended command fan disk count original webgl program replaced lefan disk count webgl program note general webgl program doe notuse extension work webgl program modiﬁcations th e webgl program us extension longer available longer needed n webgl work required convert program webgl deferred shading discus webgl extension usefu l important rendering technique called deferred shading don t sample program deferred rendering discus general term deferred shading used optimization rendering c omplex scene used speed rendering video game closely ssociated lighting used render scene large number light sourc e useful eﬀects recall number light represented op engl webgl shader limited scene light rendered using algorithm pas computes contribution light small numbe r light result pass added complete scene pro blem rendering inchapter graphic webgl pas normal way lot g recomputed exactly way pas example assuming t hat lighting used includes computing material property unit norm al vector pixel image deferred shading aim avoid duplicated eﬀort deferred shading ﬁrst pas used compute material p roperties normal vector data needed pixel image al l data saved used additional pass compute lighting possibl y eﬀects given pixel data object actually visible pi xel saved data hidden surface needed render scene ﬁrst pas us geometry attribute object scene later pass nee d know geometry attribute saved data saved data stored texture object floating po int texture ideal data used calculation case value texture don t necessarily represent image example rgb color mponents texture represent x y z coordinate normal vector f depth value needed later pass stored alpha color component texture texture hold diﬀuse color hold specular colo r rgb component shininess value alpha component shader program free interpret data texture like webgl shader write data texture using framebuﬀer standard webgl write framebuﬀer time po sible use separate pas texture need compute involve lot redundant calculation trying avoid need webgl ext ension make possible shader write framebuﬀers simult aneously extension need named webgl drawbuﬀers extension activated possi ble attach texture renderbuﬀers framebuﬀe r possible shader write data attached shaders simultane ously extension relatively complicated use activated usual sta tement form extdb webgl drawbuffers assuming extension available maximum numbe r color buﬀers beused shader given drawbuffers webgl extension place attach multiple texture s color buﬀers framebuﬀer using code form framebuffer webgl webgl using constant webgl extension object specify attachment point usually fragment shader color output c olor buﬀer speciﬁed assigning value special variable glfragcolor change multiple color buﬀers used case instead glfragcolor fragment shader special variable glfragdata array possible color buﬀer color output color buﬀers assigning value glfragdata glfragdata achapter graphic webgl change legal syntax shader extension lso activated fragment shader source code adding line extension gl extdrawbuffers require beginning code suppose example wa nt store normal vector diﬀuse color specular color object coordinate th e color buﬀers let s say value input fragment shader varying variable uniform variable diﬀuse color sampled texture fr agment shader form extension gl extdrawbuffers require precision highp float varying v normal v objectcoords varying v texcoords uniform u specular uniform float u shininess uniform texture void main glfragdata normalize v normal glfragdata v objectcoords glfragdata texture v texcoords glfragdata u specular u shininess ﬁnal requirement using extension specify th e correspondence index used glfragdata color buﬀers attached framebuﬀer like correspondence b e automatic s specify using javascript function extension object function take array pa rameter value array chosen constant webgl webgl constant used specify color buﬀer attachment point framebuﬀer example reason wanted fragment shader output color buﬀers tha t attached attachment point webgl webgl setup ready ﬁrst pas defe rred shading subsequent pass use diﬀerent shader si ngle color buﬀer pass want run fragment shader pixe l image fragment shader use pixel data saved ﬁrst pas information light property compute output color pixel trigger fragment shader pixel simply drawing single rectangle cover image theory deferred shading complicat ed lot detail right implementation deferred shading just trick used video game programmer improve rendering speed graphic webgl multiple draw buﬀers webgl ability write multiple draw buﬀers standard par t webgl sample program simple demonstration program take sample image break separate imag e red green blue color component original image doe b y attaching texture framebuﬀer writing color component te xtures image texture copied screen grayscale image program create allocate storage text ure object bind frame buﬀer color buﬀers code doe framebuffer framebuffer texture created format store unsigned integer pixel suﬃcient grayscale image form integer considered scaled represent color value range function called enable writing multiple draw buﬀers d specify output destination destination sp eciﬁed array attachment point framebuﬀer shader program example written glsl e us outvariables fragment shader send output draw buﬀers single outvariable automatically sends output ﬁrst draw buﬀer draw buﬀe r number zero outvariable destination number speciﬁed outvariable using alayoutqualiﬁer locationspeciﬁed outvariable fragment shader index array attachment point passed example fragment shader sample program version e precision mediump float uniform u picture texture containing original image v coords layout location float red write draw buffer layout location float green write draw buffer graphic webgl layout location float blue write draw buffer void main color texture u picture v coords red green blue fragment shader sends separate rgb color component s original image texture attached framebuﬀer fairly simple example using multiple draw buﬀers doe illustrate step required basic graphic seven chapter textbook coveredbasic graphi c graphic system image generated n fraction second typical case video game new frame rendered time second complex scene ndered real time using technique covered book immense processing power mode rn gpus plus trick advanced algorithm gpus begun addin g somedirecthardware support ray tracing global illumination grap hics t match realism highest quality computer graphic movie fact cgi computer generated imagery today s movie metimes indistinguishable reality getting graphic quality require hour computing time render single frame chapter brief look technique b e used high quality graphic discussion general term won t giving sample code detailed discussion mathematics technique hope provide basic conceptual understanding ﬁrst thing understand mo st leaned far applies scene composed using geomet ric primitive transformation material texture light source u sing advanced material property lighting encountered far th e graphic designer working cgi movie real time preview work ar e rendered using technique covered ﬁnal scene movie s just rendered using diﬀerent technique ray tracing ray tracing probably best known technique higher quality graphic idea complicated ﬁnd l ook given direction consider ray light arrives location tha t direction follow light ray backwards came usually ph rased cast ray location given direction hit s wh look direction operation determining hit ray called ray casting fundamental ray tracing advanced graphic te chniques basic graphic ray casting seen ray casting used object type subsection araycaster take initial point direction given vector point vector determine ray lin e extends starting point direction inﬁnity raycaster ﬁnd intersection ray given set object sorted order distance ray s starting p oint chapter interested ﬁrst intersection th e closest starting point apply ray casting rendering let s say sce ne consisting object space using point light direction al light illumination want render image scene given point view s nvenient imagine image kind rectangular window scene bei ng viewed given point image need know color point compute col point begin casting ray position viewer poin t scene want ﬁnd ﬁrst intersection ray object sce ne viewerimagea b d light illustration scene contains red sphere s point light ray cast viewpoint point b image ra y intersects sphere interested intersection point c closest viewpoint s point visible b image need compute color viewer point b just opengl need normal vector point c need mate rial property surface data computable scene de cription visible color depends light illuminating surface c onsider light source let l vector point c direction light angle land normal vector greater degree light sour ce lie surface doe add illumination use ray cast ing cast ray c direction ray hit object get light th object block light source reaching s case li ght illustration ray c direction light intersects object poin t e get light hand point c illuminated light ray fro m point surface direction light source called shadow ray used determine surface point lie shadow object withallthisinformation wecancolorpointbintheimageus ingthesamelightingequation used opengl subsection ray casting solves hidden surface problem withchapter basic graphic need depth buﬀer bonus shadow whic h hard opengl ray viewpoint b doesn t hit objec t scene b assigned background color sky color varies wi th diﬀerent direction maybe entire scene surrounded skybox ray doe n t hit object hit skybox ray casting conceptually simple implementation det ail tricky sphere actually fairly easy formula ﬁnding inter section line sphere normal vector point sphere direction line center sphere point assuming sphere uniform m aterial data need surface given triangular mesh wit h property speciﬁed vertex triangle suppose intersectio n point ray caster lie triangle compute propert y intersection point interpolating property value speciﬁed vertex triangle interpolation algorithm typically us edbarycentric coordinate triangle b c vertex triangle p point triangle p written uniquely form b c b andcare number range zero coeﬃcients b andcare called barycentric coordinate point p triangle quantity h value v v b v c vertex triangle use barycentr ic coordinate p interpolated value p v p v b v b c v c quantity example diﬀuse color texture ordinate normal vector course m leaving lot math test line intersects triangleandhowtoﬁndbarycentriccoordinatesofthepoint ofintersection thereareformulas conceptually wouldn t add discussion recursive ray tracing basic ray casting used compute render ing addition shadow ray implement shadow feature implemented casting ray improved algorithm called ray tracing consider specular reﬂection opengl specular reﬂectio n make object look shiny sense specular highlight seen ob ject reﬂects light light source viewer reality object surface doesn t just reﬂect light source reﬂects object ar e trying compute color point surface need consider contribut ion color reﬂection object cast reﬂecte d ray direction reﬂected ray determined normal vector sur face ataand direction fromato viewer illustration show version think situation chapter basic graphic viewer imagea bcd reﬂected ray point ahits purple square point b viewer reﬂection point bata remember ray tracing follow path light ra y backwards viewer ﬁnd came ﬁnd reﬂection blooks like need know color ray arrives afromb ﬁnding color bi sort problem ﬁnding color solve way applying acing algorithm b use material property surface b cast shadow ray btowards light source determine bi illuminated purple square s cast reﬂected ray bto ﬁnd reﬂects illustration reﬂected ray frombhits pentagon point c square reﬂects image pentagon disk reﬂects image square including reﬂection pentagon handle multiple reﬂections object scene applying algorithm point involve applying algorithm additional point ray tracing recursive lgorithm distinguish simple ray casting ray tracing referred recu rsive ray ray tracing extended similar way handle transpa rency properly translucency computing color point translu cent object need account light arrives point object cast ray point time intothe object light ray pass medium air medium glass path lig ht ray bend bending called refraction ray cast translu cent object called refracted illustration show refracted ray po intapassing object emerging object ﬁnd color ray need ﬁnd hit need apply ray trac ing recursively point intersection degree bending light ray pass medi um depends property medium called index exactly depends ratio index refraction practice th e index refraction outside object taken equal bending depends o nly index refraction object index refraction material pro perty translucent object abbreviated ior look computation little th e goal compute color point image cast ray viewpoint throug h image thechapter basic graphic scene determine ﬁrst intersection point ray w ith object color point computed adding contribution diﬀere nt source diﬀuse specular possibly ambient reﬂe ction light various light source contribution based diﬀuse specu lar ambient color object normal vector object propert y light source note color property object usually ambient diﬀuse color come texture specular contribution produce specular hi ghlights essentially reﬂections light source shadow ray used determi ne directional point light illuminate object aside t calculation similar opengl surface reﬂection reﬂec ted ray cast ray tracing applied recursively ﬁnd color ray contri bution ray combined contribution color surface depend ing strength mirror reﬂection perfect mirror reﬂected ray contribut e color general contribution mirror reﬂectivity new materi al property responsible reﬂectionsofoneobjectonthesurfaceofanother whilespe cularcolorisresponsibleforspecular highlight finally object translucent refracted ray s cast ray tracing used ﬁnd color contribution ray color object depends degree transparency object light ab orbed transmitted degree transparency depend wavelength th e doe example colored glass course calculation need thre e time red green blue component color ray tracing algorithm recursive progra mmer know recursion need base case come time instead c alling algorithm simply return value base case occurs casted r ay doe intersect object kind base case occur determ ined casting ray contribute signiﬁcant color mage example ray reﬂected ray absorbed reﬂe cted depending color object reﬂected reﬂecting ti me ray little color left contribute ﬁnal result ray los e energy attenuation light distance algorithm account addition ray tracing algorithm run maximum recurs ion depth absolute limit number time algorithm limitation ray tracing ray tracing produce realistic image thing t example ray tracing work point light d directional light t handle area light area light area n object emits light entire surface area single point urse real light area light ﬂuorescent light emits light surface cylinder brightly lit window considered kind area light light bulb doe t really radiate light single point ray tracing us shadow ray tell l ight source illuminates object shadow ray cast direction hit point area light implement area light exactly diﬀerent shadow ray b e needed point surface basic graphic ray tracer handle area light approximate way r eplacing area light grid point light cast shadow ray ea ch point grid using point light grid better approximation course casting shadow ray add signiﬁcantly computation time problem lighting ray tracing doesn t account illumination reﬂected light example light light source sho uld reﬂect oﬀ mirror reﬂected light illuminate object ray tracin g us shadow ray tell light source illuminates object won t work r eﬂected light algorithm doesn t know aim shadow light coul d come direction just problem mirror reﬂected light e ven diﬀuse reﬂection illuminate nearby object example light s reﬂected diﬀusely green object add green tint nearby object eﬀect s called color reality light reﬂected time c ontributing bit color object hit area light approximate method s added ray tracing simulate eﬀect example photon mapping add pr phase ray tracing simulates emission large number light ray photon light source track path scene add lor object hit information photon map used th e ray tracing phase produce realistic color opengl us ambient light approximation light reﬂected reﬂected time ambient light assumed illuminate object equally poor approximation better approximation us ambient occlusion idea ambient light heading surface blocked o ccluded nearby object like ambient light ambient occlusion physically rea listic practice make lighting look realistic object look mensional technique estimating ambient occlusion us ray casting assume th ambient light come background scene estimate ambient occlusion t point cast number ray point random direction count ray blocked geometry scene reach sky ray blocked greater degree ambient occlusion point algorithm attempt account inter action light object scene said use global illumination approximate method mentioned added ray tracing increase realism t cost signiﬁcantly increased complexity potentially large extra computin begin realistic image long compute sect ion look method attempt handle global illumination exactly path tracing seen ray tracing extended approximate variety eﬀects th handled basic algorithm look algorit hm account eﬀects fairly straightforward uniﬁed way path tracing like ray tracing path tracing computes color point image tracin g path light ray backwards viewer point image scene path tracing idea account allpossible path light followed course literally possible following large number path ca n good get better number path increased forwar d path tracing path ofchapter basic graphic light ray emitted light source traced forward t ime used bsdf s inordertomodelawidevarietyofphysicalphenomena patht racingusesageneralizationofthe idea material property opengl material combina tion ambient diﬀuse specular emission color plus shininess property exc ept emission color model surface interacts light material property vary point point surface s example texture opengl material rough approximation reality path tracing general notion used capable accurately representi ng property real physical surface volume replacement material s absdf bidirectional scattering distribution function think light arrives point aﬀecte d physical property substance exists point light absorbed pas point aﬀected scattered sent oﬀ direction fact consider passing th rough point special case scattering bsdf describes light scattered e ach point surface volume think single ray photon light arrives point happens depend direction arrives general suming absorbed light likely scattered direction n specular reﬂection example bsdf point give probability tha t ray leave point heading given direction bidirectional functi answer function direction direction light arrives nd outgoing direction asking distribution function sen se mathematical theory continuous probability distribution don t need t o understand general idea s understand function say s light coming given direction distributed possible outgoing dir ections note bsdf function point talking gen erally function wavelength light point space assigned bsdf space bsdf trivial simply say light arriving point probability c ontinuing direction light passing fog dusty air dirty water s ome probability absorbed probability scattered random directio similar remark apply light passing interior translucent solid object traditionally computer graphic c oncerned happens light surface object light absorbed r eﬂected object translucent transmitted surface functio n describes reﬂection light surface called brdf bidirectional reﬂ ectance distribution function formula transmission light btdf bidirect ional transmission distribution function bsdf surface combination let s consider opengl material term bsdfs basic o pengl light reﬂected absorbed diﬀuse reﬂection light equ al probability reﬂected direction make angle degree normal vector surface dependence direction whi ch light arrives specular reﬂection incoming light direction matter opengl possible outgoing direction specularly reﬂected light form cone angle tween axis cone thechapter basic graphic normal vector equal angle normal vector incoming light direction axis cone likely direction outgoing light probability fall oﬀ angle outgoing direction direct ion axis increase rate falloﬀ speciﬁed shininess property ma terial brfd surface combine diﬀuse specular reﬂection ambient ma terial property doesn t ﬁt bsdf framework physically th ing ambient light diﬀerent regular light ray tracing add new possibility interaction light surface perfect reﬂection outgoing light make exac tly angle normal vector incoming light transmission light translucent object outgoing angle determined index refraction ou tside inside object bsdfs provide realistic model inter action light surface example distinction reﬂectio n object specular reﬂection light source artiﬁcial perfect mirror reﬂec t light source object way shiny rough surface specular reﬂection send light cone direction giving fuzzy image object light s alike bsfd handle case shouldn t distinguish light ligh t source light reﬂected oﬀ object bsdfs correctly handle phenomenon called subsurface scattering important visual eﬀect material just bit translucent milk jade skin scattering light hit surface c transmitted object scattered time internally inside object emerge surface point light behaves inside object determined bsdf material interior object bsdf case simi lar fog probability scattering larger point just physically realistic materi al modeled correctly chosen bsdf path tracing algorithm path tracing based formula known rendering equ formula say light energy leaving given point given dir ection equal light energy emitted point direction plus mount light energy arriving point source scattered di rection emitted light mean light created light source rendering equation object emitter light opengl ter m s object emission color actually emits light illuminate o ther object area light just extended object emits light point s common illuminate scene large object fact typical pa th tracing setup point light directional light assigned area make work correctly algorithm forward path tracing used scattered light bsdf point determines lig ht arriving point scattered light general arrive direction originate point scene rendering equation hold everypoint relates light arriving departing point light arriving d eparting point describes word immensely complicated syst em unlikely able ﬁnd exact solution rendering algorithm thought attempt ﬁnd good approximate solution rendering basic graphic path tracing probabilistic rendering algorithm loo k possible path followed light arriving position vi ewer possible path certain probability path tracing generates random sampl e possible path choosing path sample according probability us tho e path create image approximates solution rendering equation shown size random sample increase image generated ap proach true solution good quality image algorithm trace thousa nd path pixel image result shocking level reali sm let s think work consider ca e light emitted reﬂected surface ray tracing start position viewer cast ray direction point image scene s eesubsection ﬁnd ﬁrst intersection ray object scene goal trace possible path ray followed point origin unti l arrives viewer want probability select given path prob ability light actually followed path mean time light sca ttered surface choose direction segment path based t bsdf surface direction chosen random using probability distribution encoded bsdf construct segment path casting ra y selected direction continue trace path backwards time possibly th rough multiple reﬂections encounter object emits light object s erves original source light color path contributes image det ermined color intensity emitter color surface light hit long way angle light hit surface path escape scene hit light emitting object doe contribute color image desirable background like sky emits lig ht large area note possible object emitter reﬂector l ight case path continue get light source course trace path color pix el image computed average color obtained path pa s pixel algorithm extended handle case light c scattered arbitrary point space just surface light travelin g medium space question far light travel scatte red bsdf medium determine probability distribution possible travel di stance scattering light enters medium probability distribution use d select random distance light travel scattered unless hit surface enters new medium traveled distance scatter point medium new direction length chosen random segment pat h according bsdf medium light fog average distance sca tterings quite large dense medium like milk quite short great deal computation required trace light path image path tracing invented recently practical general use hour high quality rendering fact path tracing desktop computer using m odeling program blender discussed appendix b blender rendering engine called cycle us path tracing appendix information blende introduction webgpu chapter introduces webgpu thenew graphic api web webgpu development year rece ntly begun included standard feature web browser browser m ight ﬁnd available experimental feature explicitly enabled fore used browser support webgpu replace webgl continue browser foreseeable future webgl like t opengl api based likely development webgpu hand inspired similar modern graphic apis vulkan direct metal likely evolve apis webgpu thought o f web graphic api future webgpu similar webgl way example ve rtex shaders fragment shaders lot programmer s work involve s managing ﬂow data rendering pipeline webgpu low er level api webgl verbose put responsibility progr ammer managing detail rendering process time give pr ogrammer control access powerful capability modern gpus possibil ity eﬃcient code webgpu speciﬁcation http ful learning simpler useful api reference mozilla opernetwork http chapter information start ed webgpu chapter written july oﬃcial webg pu documentation describes working detail need ﬁlled minor change api unlikely change ﬁn al version aﬀect textbook t guaranteed webgpu basic webgpu new api computer graphic web webgl based opengl webgpu completely designed scratch t similar modern computer graphic apis vulkan metal webgpu api make programmer work oﬀers mo power eﬃciency hand ﬁnd webgpu cleaner logical api webgl ﬁlled strange remnant old opengl feature introduction webgpu begin chapter overview webgpu wi ll stick basic graphic transformation lighting w ill make reference webgl iwilltrytomakethediscussionaccessibleevenforsomeone whohasnotalreadystudiedwebgl opengl familiar older pi need refer earlier section book background information webgpu example programmed javascript shor t introduction javascript section appendix webgpu mak e extensive use typed array notation creating object using array using us async function promise advanced javasc ript feature discussed section appendix environment webgpu application part javascript gpu javascript executed c pu central processing unit computer webgpu computational rende ring operation executed gpu graphical processing unit cpu gpu h ave dedicated memory shared memory used sharing data sending message communication javascript th e gpu application relatively slow ineﬃcient lot design webgpu cumbersome little strange explained need manage c ommunication eﬃciently possible webgpu fact implemented way diﬀerent system emulated entirely software physical gpu involved design eﬃcient case case ke ep mind trying understand design separate cpu gpu ha ve access shared memory inthissectionwewillmostlybelookingatonesampleprogra m simply draw colored triangle source code exa mple extensively commented encouraged read run test whethe r browser support webgpu demo version available like code comment read source code demo version demo adapter device canvas webgpu application begin obtaining webgpu dev ice represents programmer s interface webgpu feature pr oduce visible graphic image web page webgpu render html canvas element p age application need webgpu context canvas webg pu thing render canvas stick code obtaining device context application async function initwebgpu throw error webgpu supported browser let adapter await adapter throw error webgpu supported couldn t webgpu dapter device await let canvas webgpucanvas chapter introduction webgpu context webgpu device device format alphamode premultiplied alternative opaque device andcontext global variable navigator predeﬁned variable representing web browser variable adapter andcanvas probably needed outside initialization function refer ence canvas needed available function return promise function declared asyncbecause us awaitto wait result promise async function s used way function account part program theory run awaitis waiting result thing want change initializatio n thealphamode context value premultiplied allows alpha value pixel canvas determine degree transparency pixel canvas dr awn web page alternative value opaque mean alpha value pixel ignored pixel opaque initialization code doe error checking th row error problem encountered presumably program catch erro r report user webgpu developer aware tha t webgpu doe extensive validity check program report error warni ng web browser console good idea console open testing work shader module like webgl opengl webgpu draw primitive point lin e triangle deﬁned vertex rendering process involves com putation vertex primitive computation pixel fragmen t primitive webgpuprogrammermustdeﬁnefunctionstospecifythosecom putations thosefunctionsare shaders render image webgpu program provide v ertex shader main function fragment shader main function documentation t hose function referred vertex shader entry point fragment shader entr y point shader function supporting code webgpu written wgsl webgpu shader language shader source code given ordinary javascript string method webgpu device object used compile urce code check syntax error package shader module ed rendering pipeline shader code shadersource parameter object example just o ne property named code shadersource string contains shader source code turn value shader represents compiled source code used late r conﬁguring render pipeline syntax error source code throw e xception compilationchapter introduction webgpu error warning reported web console s hould check console webgpu message development look wgsl section wgsl similar way glsl shading language webgl variable fu nction declaration diﬀerent just short discussion help yo u understand relationship javascript wgsl webgpu appl ication short shader source code ﬁrst webgpu example deﬁned javascript template string extend multiple line const shadersource group binding var uniform color vertex fn vertexmain location coords builtin po sition return coords fragment fn fragmentmain location return color syntax function deﬁnition wgsl type used vector ﬂoating point number variable declaratio n form example code form var uniform declares global variable uniform address spac e discussed variable uniform address space get value th e javascript word beginning annotation modiﬁers fo r example vertex mean following function used vertex shader ent ry point fragment mean following function used fragment sh ader entry point builtin position annotation say return value vertexmain give coordinate vertex standard webgpu coordinate location group binding example used specify connection data shader data javascript discus ed vertex fragment shader function used simple vertex shader simply take x y coordinate paramete r come javascript uscoordinatesforthevertex expression return value construct vector ﬂoats value parameter list th e fragment shader output rgba color pixel processing simple us rgb component uniform colorvariable come javascript add f alpha component introduction webgpu render pipeline webgpu image produced output series pro cessing stage make render vertex shader fragment shader programmable stage pipeline ﬁxed function stage b uilt webgpu input pipeline come data structure gpu data iginates javascript application copied gpu b e used pipeline illustration general structure render pipelin e fragment shadervertex buﬀers bind group e f g ﬀers color attachmentsvertex shader diagram show type input pipeline vertex buﬀers andbind group recall primitive drawn vertex shader ca lled vertex primitive invocation vertex shader diﬀe rent value parameter vertex shader entry point function value come fr om vertex buﬀers buﬀers loaded value parameter verte ﬁxed function stage pipeline shown dot vertex buﬀers vertex shader call vertex shader vertex pulling appropriate set p arameter value vertex buﬀers vertex buﬀers hold data instanced draw ing covered section vertex shader output value include th e coordinate vertex include value color texture coor dinates normal vector vertex intermediate stage pipeline vertex shader fragment shader process value various way example c oordinates vertex used determine pixel lie primitive coordin ate pixel computed interpolating vertex coordinate value like color d texture coordinate generally interpolated diﬀerent value pixel thes e value available input fragment shader called pixel primitive appropriate value parameter vertex buﬀers special way use d supply vertex shader parameter kind input stored data struc tures called bind group value bind group available vertex fragment sh aders global variable shader program fragment shader output value destinat ion value lie outside pipeline referred color attachment f pipeline common case just output represents col assigned pixel associated color attachment image ndered block ofchapter introduction webgpu memory hold color data image multiple ou tputs used advanced application deferred shading subsection webgpu program responsible creating pipeline p roviding detail conﬁguration fortunately lot handl ed method let s look relatively simple exampl e ﬁrst sample program goal create render pipeline ﬁnal step foll owing code excerpt program creates object specify pipeline ﬁguration let vertexbufferlayout array vertex buffer speci fications attribute format floa arraystride stepmode vertex let uniformbindgrouplayout entry array resource specification binding visibility buffer type uniform let pipelinedescriptor vertex configuration vertex shader module shader entrypoint vertexmain buffer vertexbufferlayout fragment configuration fragment shader module shader entrypoint fragmentmain target format primitive topology layout bindgrouplayouts uniformbindgrouplayout pipeline pipelinedescri ptor read code comment source program lot going vertexandfragment property pipeline descriptor shaders used pipeline moduleproperty compiled shaderchapter introduction webgpu module contains shader function entrypoint property give used shader entry point function shader source code buffer andtargets property concerned input vertex shader function output fragment shader function vertex buﬀer bind group layout specify input s required pipeline specify structure input y basically create attachment point actual input source plugged later th allows pipeline draw diﬀerent thing providing diﬀerent input note use array speciﬁcation exam ple pipeline conﬁgured use multiple vertex buﬀers input verte x buﬀer layout array element array speciﬁes input buﬀer index element array important identiﬁes attachment point th e corresponding buﬀer index used later attaching actual buﬀer similarly pipeline input multiple bind gro ups case index bind group come bindgrouplayouts property pipelinedescriptor index required attaching actual bind group pipeline index used shader program example look th e shader source code ll uniform variable declaration annotat ed group mean value variable bind group ndex bindgrouplayouts array furthermore eachbindgroupcanholdalistofresources wh icharespeciﬁedbythe entry property bind group layout bind group entr y provide value global variable shader case confusingly index entry entry array important instead entry binding property identify sample program double annotation group binding uniform variable declaration say value variable come speci ﬁcally entry binding number bind group index pipeline output come fragment s hader entry point function pipeline need attachment point destinatio n output target property pipelinedescriptor array entry attachment point shader source code deﬁnes fragment shader fn fragmentmain location annotation location output say output sent color attachment number corresponding el ement index target array value formatproperty element speciﬁes output t appropriate format color canvas utomatically translate shader output us ﬂoat color component canvas format us unsigned integer component thatleavesthe primitive propertyofthe pipelinedescriptor tobeexplained itspeciﬁes thekindofgeometricprimitivethatthepipelinecandraw t hetopology speciﬁestheprimitive type example whe n pipeline executed group vertex deﬁne triangle webgpu ﬁve p rimitive type triang corresponding point line linestrip triangle andtriangle stripin webgl opengl illustration show howthesamesixverticeswouldbeinterpretedineachtopolo gy exceptthatoutlinesoftriangles endpoint line segment actual output chapter introduction webgpu ab cd efab cd efab cd efab cd efab cd efj k l m n o p q m s o j topology j q m n u p q m s o j topology j q m n u p s o v m k j topology j o v m w n x q u p q m s o j topology j o v m w n x q u p s o v m k j topology seesubsection discussion primitive rendered don t create pipeline time draw imag pipeline used anynumberoftimes itcanbeusedtodrawdiﬀerentthingsbya ttachingdiﬀerentinputsources drawing single image require pipeline eac h executed time common program create pipeline nitialization store global variable buﬀers input pipeline come vertex buﬀers general purpose buﬀers resource bind group possible resource rel ate texture encounter section need know create buﬀer ﬁll data attach pipeline function used creating buﬀers take parameter speciﬁes size buﬀer byte buﬀer w ill used example sample program creates vertex buﬀer vertexbuffer size usage dst purpose vertex buﬀer hold input vertex sha der gpu program data come typed array related javascript data type arraybuﬀer case vertexcoords hold vertex triangle give number byte array alternatively size speciﬁed constant theusageproperty example say buﬀer vertex buﬀer used destination copying data value usagecan given usage constant bitwise orof constant program us buﬀer hold value uniform colorvariable shader color value consists ﬂoats nd buﬀer created uniformbuffer size usage dst vertex buﬀers attached directly pipeline othe r buﬀers bind group attached pipeline sample program cr eates bind group hold uniformbuffer chapter introduction webgpu uniformbindgroup layout uniformbindgrouplayout entry binding corresponds binding layout resource buffer uniformbuffer offset size recall uniformbindgrouplayout created specify structure bind group bind group layout entry specify resource corresponding bind group entry provide actual resource resource case s abuffer theoffset andsizeproperties resource make possible use just segment buﬀer offset starting byte number segment sizeis number byte segment useful buﬀer loaded data buﬀer exists o n gpu program data originates javascri pt function easiest way copy data gpu buﬀer example function vertexbuffer vertexcoord s copy entire content vertexcoords array vertexbuffer starting byte number buﬀer possible copy subarray ty ped array position buﬀer general form wherecountgives number element arrayto copied buffer data source typed array data source s tarting position source size data copied measured byte sample program buﬀers bind group created j ust initialization vertexbuffer anduniformbuffer global vertexbuffer attached pipeline time pipe line used draw triangle uniformbuffer data stored changed new value written uniformbuffer time color triangle changed similar ly uniformbindgroup global variable attached pipeli ne time triangle drawn interesting think writebuffer function method object queue question queue operation performe d gpu whenwritebuffer return necessarily true data wri tten buﬀer operation doe copying added queue guaranteed data copied buﬀer bef ore needed operation come later queue include drawing operat ion use buﬀer possible queue contains operation pend previous value buﬀer new data t copied buﬀer tho se operation completed called immediately copy data intermediate staging buﬀer exists memory s hared javascript gpu side mean free reuse array imme diately don t wait data copied ﬁnal destination inst ead calling writebuffer schapter introduction webgpu possible work staging buﬀer cop y data staging buﬀer enqueue command copy data staging buﬀer th e destination writebuffer make process easier drawing pipeline set input buﬀers ready s time actually draw triangle drawing command speciﬁed javascript executed gpu command encoder used javascript create l ist command form added queue command processing gpu command encoder created webgpu device let commandencoder drawing need encode render pas w e need render pas descriptor let renderpassdescriptor colorattachments clearvalue r g b gray background loadop clear alternative load storeop store alternative discard view draw thecolorattachments property renderpassdescriptor corresponds output target pipeline element colorattachments array speciﬁes destination corresponding element array output target case want draw canvas web page value loadopproperty clear canvas ﬁlled clear color drawing load y ou want draw previous content canvas clearvalue give rgba component clear color ﬂoating point value range storeop store viewproperty speciﬁes image drawn case ultimate destination canvas actual destination texture copied canvas content web page refreshed function called time canvas redrawn t simply mak e render pas descriptor use unchanged render drawing command encoded render pas encoder obtained command encoder pas encoder example as embles resource required drawing pipeline vertex buﬀer bind group d issue command actually doe drawing terminates render pas let passencoder rende rpassdescriptor pipeline specify pipeline vertexbuffer attac h vertex buffer uniformbindgroup atta ch bind group generate vertex draw command case simply generate vertex executed pipeline us ist topology vertex form triangle vertex shader function speciﬁed pipeline called time input pulled vertex buﬀe output threechapter introduction webgpu invocation vertex shader specify position th e vertex triangle fragment shader function called pixel triangle fragment shader get color pixel uniform buﬀer t bind group set earlier program ﬁnally used pro duce image simple example generally render pas involve opt ion multiple draw command command note actually draw ing just encoded command needed drawing added command encoder ﬁnal step list encoded command mmand encoder submit gpu execution let commandbuffer commandbuffer parameter array command buﬀers case command encoder reused want submit multiple command buﬀers need create new command encoder note command submitted device queue submit function return immediately enqueueing command exe cuted separate process gpu application multiple vertex input ending section look variation b asic example instead drawing solid colored triangle program s draw triangle vertex diﬀerent color colo r interior pixel interpolated vertex color standard r gb triangle example vertex diﬀerent color color vertex ttribute passed parameter vertex shader entry point new exa mples function parameter vertex coordinate vertex rgb col interpolated version value used fragment shader vertex shad er need output function return value output hav e combined single data structure wgsl glsl data structure struct seesubsection shader source code used new ex amples struct vertexoutput type return value vertex shad er builtin position position location color vertex fn vertexmain location coords location color vertexoutput var output vertexoutput coords color return output fragmentchapter introduction webgpu fn fragmentmain location fragcolor locat ion return thefragcolor parameter fragment shader function interpolat ed version thecoloroutput vertex shader fact name don t matter association tw o value speciﬁed location modiﬁer vertex shader output color fragment shader parameter fragcolor note meaning location diﬀerent location annotation vertex shader parameter coords recall location annotation vertex shader parameter corresponds shaderlocation vertex buﬀer layout javascript speciﬁes valu e parameter come note position output vertex shader used explicitly fragment shader function example used implicitly vertex shader function required builtin position output javascript application provide nputs vertex shader function ﬁrst variation input provided separate vertex buﬀers new vertex buﬀer layout reﬂects array elem ents corresponding vertex buﬀers let vertexbufferlayout vertex buffer coords float ve rtex attribute format floa arraystride byte value buffer stepmode vertex second vertex buffer color float pe r vertex attribute format floa arraystride byte value buffer stepmode vertex second variation doe interesting e just vertex buﬀer contains value parameter value c olors interleaved value coordinate data look like o n javascript const vertexdata new coords color data vertex data second vertex data vertex array copied single vertex buﬀer ve rtex buﬀer layout reﬂects layout data buﬀer let vertexbufferlayout vertex buffer containing value attribute attribute format format chapter introduction webgpu arraystride stepmode vertex note data buﬀer take byte ﬁve ﬂoats arraystride layout give distance byte va lues vertex value vertex offsetproperty attribute tell ﬁnd value attribute block data giv en vertex oﬀset coords start data oﬀset coloris byte start data diﬀerences ﬁrst example t wo new variation encourage look source code new progra m read comment new feature program commented auto bind group layout oneﬁnalnote abindgrouplayoutcontainsinformationabou teachbindinginthegroup kind resource binding refers shader stage used general information deduced shader program shader program assembled pipeline created pipeline automatic ally construct bind group layout us ask pipeline create bi nd group layout setting layoutproperty pipeline descriptor auto pipelinedescriptor layout auto pipeline pipelinedescri ptor use function n n bind group number layout pipeline layout needed create actual bind group bndgroup layout entry use auto bind group layout example w occasionally specify layout look like vari ous kind resource instance index previous section showed draw primitive webgpu section draw primitive image cover new option drawing instanced drawing indexed dra introduction webgpu section looking variation o ne example app show randomly colored disk moving canvas va riation add antialiasing example using technique called multisampling o nline demo show basic version multisampling version image demo shown left following image magniﬁed image basic multisampling version diﬀerenc demo instanced drawing instanced drawing make possible draw multiple copy instance primitive single function instanced drawing webgl covered subsection sample program show webgpu urge read comment source c ode sample program various instance primitive look diﬀerent t rendered image provided thattheyhavediﬀerentvaluesforsomeattributes forexam ple theinstancescanhavediﬀerent color color instance used render pas encoder method draw n draw primitive n vertex vertex pull attribute va lues vertex buﬀers vertex pas parameter vertex shader e ntry point instance property work way value instance attri bute vertex given instance instanced drawing us draw method regular drawing second parameter draw n m draw m instance primitive n vertex eﬀect similar following pseudocode m instance attribute value instance v v n vertex attribute value vertex v vertex shader function passing attribute value s thedraw method optional parameter specifyin g start index vertex start index instance vertex attribute value come vertex buﬀers insta nce attribute value diﬀerence small change vertex buﬀer layout speciﬁ cation s time look example sample program draw ﬁfty colored disk single draw basic primitive disk centered coordinate vertex disk given vertex attribute colored disk instance c olor disk instance attribute instance attribute offset speciﬁes translation transformation ischapter introduction webgpu applied primitive shader source code vert ex coordinate color oﬀset parameter vertex shader function vertex fn vertexmain location coords location offset location color vertexoutput var output vertexoutput struct position col field coords offset return output recall location attribute parameter list used associate pa rameters value coming javascript program t association shaderlocation property vertex buﬀer layout javascript layout sample program speciﬁes source fo r parameter let vertexbufferlayout vertex buffer vertex coord attribute format arraystride stepmode vertex vertex attribute second vertex buffer instance offset attribute format arraystride stepmode instance instance attribute vertex buffer instance color attribute format arraystride stepmode instance instance diﬀerence vertex instanc e attribute value stepmode property step mode vertex tell pull value vertex buﬀer vertex primitive step mode instance mean pull value instance thedisksinthesampleprogramcanbeanimated todrawthene xtframeintheanimation program simply computes new value oﬀset attribu te disk writes new value vertex buﬀer hold oﬀsets gpu sid e image technical point animation botheri ng javascript theprogramsimplyenqueuescommandsthatwillbeexecutedl ateronthegpuside side synchronized make sure don t start drawing new imagechapter introduction webgpu old image computed displayed web page synchronization taken care requestanimationframe method used implement animation method start new frame pr evious frame complete related instanced drawing int eresting point sample program draw disk disk approximated po lygon webgl draw disk triangle fan webgpu lack primitive type disk drawn using primitive requires careful ordering vertex yz disk approximated polygon polygon rendered webgpu primitive topology picture polygon divided triangle making triangle strip number required order vertex dedning triangle strip indexed drawing way draw disk primitive wi th disk divided like slice ofapie theverticesforoneofthetriangleswouldbethecen terofthediskplustwoconsecutive vertex circumference note given vertex b e used diﬀerent triangle mean disk implemented eﬃciently indexed face set data indexed face set consists list vertex coordinat e plus corresponding list value vertex attribute needed list vertex dice subsection detail webgpu render pas encoder drawindexed n method implement type drawing addition vertex buﬀers method requir e anindex buﬀer hold vertex index value index buﬀer unsigned integer unsigned integer eﬀect drawindexed n n let v index number index buffer attribute value vertex v vertex buffer vertex shader function passing attribute va lues sample program draw single disk primitive using drawindexed add little draw circumference disk primitive using basic draw method program show render primitive render pas program vertexcountis number vertex polygon used approximate disk vertex numbered counterc lockwise order disk vertex number repeated end vertex used order draw outline disk draw ing interior disk need center disk list th e center added vertex number render interior need draw vertex vertex triangle data index buﬀer lo aded javascript length vertex count chapter introduction webgpu diskindices vertex index vertex count triangle make disk triangle us cent er disk consecutive vertex outline let vertex count diskindices vertex center disk diskindices vertex number diskindices vertex number buﬀer created hold index gpu v alues indiskindices written buﬀer indexbuffer size usage dst indexbuffer diskindices indicatesthatthebuﬀerwillbeusedasanindexbuﬀer wise creating vertex buﬀer unlike vertex buﬀers index buﬀer attached pipeline instead speciﬁed creatin g render pas indexbuffer second parameter say index unsign ed integer alternative integer worthwhile look code rendering th e disk interior outline interior outline use diﬀerent primitive topolog y primitive topology property render pipeline need use separate p ipelines interior outline pipeline aspect rendering pa s need encode render pass function draw let commandencoder let renderpassdescriptor colorattachments clearvalue r g b white background loadop assigned later storeop store view render pas draw disk using topology cl ear let passencoder rende rpassdescriptor pipelinefordisk us tri vertexbuffer indexbuffer vertex count vertex triangle second render pas draw outline using topology lo ad don t clear chapter introduction webgpu passencoder renderpa ssdescriptor pipelineforoutline us vertexbuffer vertex let commandbuffer commandbuffer note ﬁrst render pas loadopis clear want ﬁll image background color rendering disk second render pas want draw outline existing image loadopmust load renderpassdescriptor used pass just loadopproperty changed drawing multiple primitive like draw outline colored disk mov ing disk example t simply use instanced drawing draw disk th en use draw outline complete outline y disk part outline hidden disk actually add depth test program subsection solution abandon instanced drawing draw disk separately s sample program program introduces new webgpu feature disk new program drawn way sing le disk problem disk diﬀerent color oﬀset color oﬀset instance property came vertex buﬀers value passed parameter vertex shader function new program moved uniform variable shader program struct diskinfo color interior color disk offset translation applied disk group binding var uniform diskinfo diskinfo value uniform variable stored uniform bu ﬀer drawing disk color oﬀset disk copied unifo rm buﬀer basic idea simple disk copy offset color disk uniform buffer render pas draw disk interior render pas draw disk outline previously used copy data javascript buﬀer gpu work provided use new command encoder iteration loop fact s alt ernative version program multiple comment program information decided complicate hopefully make program little using single command encoder drawi ng make impossible use writebuffer let s command encoder doesn t executechapter introduction webgpu command just make list command submit ted device queue batchafterthelistiscomplete similarly writebuffer iscalled itdoesn timmediately write buﬀer doe immediately add command th e device queue writing call writebuffer middle collecting draw command command encoder submit draw command batch end write command queue allof write command actually executed anythe draw command ﬁnal write eﬀect t drawing solution replace writebuffer copy command encoded added list command produced command encoder t hen list command executed gpu copy just fore draw command us copying gpu data copied gpu buﬀer command want implement program copy color value al l disk gpu buﬀer copy oﬀset value gpu buﬀer using buﬀers value similar did instanced drawing buﬀers case vertex buﬀers instead storage buﬀers kind general purpose gpu buﬀer used lik e uniform buﬀers fewer restriction lit tle eﬃcient storage buﬀer disk color created ﬁlled da ta program initialization diskcolorbuffer size usage src dst diskcolorbuffer diskcolo r theusagepropertyincludes storage becausethebuﬀerisastoragebuﬀer itincludes copysrc buﬀer used source buﬀer copybuffertobuffer includes copydstso buﬀer used destination buﬀer writebuffer storage buﬀer used shader program par t bind group program storage buﬀers used shad er thing bind group small uniform buﬀer hold color oﬀset disk time command copying color disk number st orage buﬀer uniform buﬀer diskcolorbuffer uniformbuffer color data diskcolorbuffer disk take byte ﬂoats starting byte color disk number inuniformbuffer color start byte number byte count number byte copied disk oﬀset handled similar way mor e issue deal alignment rule wgsl alignment refers restriction va lue located memory restriction make memory access eﬃcien example alignment rule address memory multiple byte th e uniform variable diskinfo struct contains color followed oﬀset byte memory alignment rule thatchapter introduction webgpu start multiple byte extra byte padd ing added color moving starting byte number offsetto oﬀset copied storage buﬀer uniform buﬀer starting byte r ather expected diskoffsetbuffer uniformbuffer say alignment subsection able understand rest program source read comment using index shaders webgl point primitive type point si ze point rendered square given size square come text ure coordinate subsection webgpu similar idea point size primit ives topology point just individual pixel limit usefulness webgpu easily use instanced drawing rend er multiple copy square similar webgl point prim itive like use diﬀerent approach illustrate new webgpu featur e using vertex instance index shaders sample program show moving disk ﬁrst example sectio n doe diﬀerent way seen parameter value vertex shader functio n come vertex buﬀers certain builtin value used parameter includes vertex index instance index verte x processed example deﬁnition vertex shader function s ample program vertex fn vertmain builtin vertex index vertexnuminpoint builtin instance index pointnum vertexoutput function invoked draw vertexct instancect render pas encoder eﬀect similar pseudocode instance index instance index instancect instance vertex index vertex index vertexct vertex vertmain instance index vertex index note example parameter input v ertex buﬀers job function output coordinate possibly d ata vertex number vertexindex instance number instance index need create output shader access data source s buﬀers bind group example provide necessary data s torage buﬀers storage buﬀer contains color square contains c oordinates center point square size square constant sha der program output vertex consists coordinate texture coordinate c olor vertex instance square generated primitive tri angle number vertex instance coordinate texture coordinat e vertex computed center point size square chapter introduction webgpu g j krl p q r vertex num coords texcoordsf gu w ju w k l fl il kf gy w ju w k il kp qf gy w jy w k fz iz kf gu w jy w k rfl iz k instance vertex shader function invoked time vertex index ranging invocation shader function computes output appropriate value just vertex won t coding detail read sample program source code point program really wa nted draw disk square wanted use texture coordin ate square fragment shader function us texture coordinate pixel discard pixel lie outside disk similar webgl fo r thedemoinsubsection multisampling ﬁnal example section add multisampling basic moving disk example ordinarily fragment shader entry point function evaluated pixel center point pixel wi th multisampling evaluated point pixel color pi xel obtained averaging color sample kind antialias ing example geometric edge primitive cut pixel samp led point lie inside primitive outside color pixel b e blend primitive color background color texture applied t exture color pixel blend texture color sampled point webgl antialiasing automatically webgpu yo u work fortunately s hard just change program need texture multisampling view tha t texture admit don t understand needed code pr eview creating texture texture view textureformultisampling size samplecount currently possible va lues format usage attachment textureviewformultisampling textureformultisampling drawing image multisampling texture view ed viewproperty color attachment render pas descriptor usua l value viewproperty represents ﬁnal image moved new resolvetarget property renderpassdescriptor colorattachments clearvalue r g b loadop clear storeop store view textureviewformultisampling render multisam pling texture resolvetarget w final introduction webgpu ﬁnally new multisample property added render pipeline descriptor specify pipeline doe multisampled rendering pipelinedescriptor multisample set number sample multisampling count currently possible value s later ll multisampling pplied program us depth test small change necessary dep th buﬀer conﬁguration wgsl wgslis shader programming language webgpu control structure similar c javascript chang e addition data type large set built function simil ar glsl seen previous section signiﬁcantly diﬀeren t variable function declaration technical section cover major aspect sy ntax semantics wgsl note part language deal texture ar e covered postponed section detail wor king compute shaders postponed section assume familiar language l ike c javascript appendix need refresher familiarity glsl section useful essential c omplete speciﬁcation wgsl language try cover important feature long complete speciﬁcation http address space alignment avoid lot frustration working wgsl data valu e need understand aspect wgsl common programming l anguages address space alignment memory accessible gpu divided address spa ce diﬀerent accessibility rule physically accessed diﬀerent way variable life particular address space address space s variable s type example wehaveseenhowaglobalvariablecanbedeclaredus ingvar uniform thatvariable life uniform address space hold value generally come t javascript program available address space function addressspaceisforlocalvariablesandparameters function basically function stack si ngle processor gpu stored dedicated local memory proces sor local variable declared using var function function address space possibility local variable declared using simply var address space privateaddress space used global variable shader program gpu processor copy varia ble stored thechapter introduction webgpu dedicated local memory processor global varia ble variable declared usingvar private used function shader program given c opy variable shared function call vocation shader address space uniform address space hold global variable shared gpu processor uniform variable ly variable declaration usingvar uniform include initial value variable shade r assign new value variable value uniform var iable resource come bind group uniform variable declarati groupand binding annotation used specify source resour ce address space storageaddress space similar uniform space storage variable require groupand binding annotation assigned initial value shader program storage variable fault write access possible storage variable read access used fragment compute shaders vertex shaders s torage variable write access declared using var storage read write address space address space used compute shaders covered later value uniform storage variable come bind grou p javascript program provides value using buﬀers bind grou p bind group layout subsection certain requirement uniform variable th eusageproperty buﬀer include buﬀer bind group layout typeproperty set uniform default bind group offsetproperty entry multiple example alignment rule example t uniform variable shader program group binding var uniform x group binding var uniform y buﬀer used hold variable buﬀer byte bind group like bindgroup layout bindgrouplayout entry binding resource buffer buffer offset size binding resource buffer buffer offset size storage variable alignment rule usagewhen creating buﬀer typein bind group layout introduction webgpu default storage variable storage storage variable addition alignment rule uniform storage bin ding glsl alignment rule data type alignment value data type c alignment power alignment possible ﬂoating point type used language extension enabled ﬂoats covered textbook alignment data type n memory address o f value type multiple value data structure t oﬀset value start data structure multiple ordinarily need worry alignment d ata structure uniform storage address space case knowing align ment essential account javascript writing da ta buﬀers basic scalar data type wgsl integer ﬂoats alignment wgsl vector scalar value whi ch size alignment s expect size legal alignment alig nment address memory ﬁrst byte mu ltiple array data structure element array aligned array mean array element st art multiple byte start array occupies byte extra byte padding inserted element padding needed array array just memory array number element alignment array type equal alignment element structs element struct satisfy alig nment rule data type element require padding el ements alignment struct maximum alignment element size struct multiple alignment require padd ing end let s look example appear shader program doe graphic section syntax covered able follow struct lightproperties position size offset color size offset byte float spotdirection size offset byte float spotcosinecutoff size offset byte float spotexponent size offset byte float enabled size offset byte float group binding var uniform light array lightp ﬁrst struct color end byte number spotdirection t start byte alignment rule say t start fourbytesofpaddingareadded spotdirection startsatbytenumber end byte number element ﬂoatspotcosinecutoff alignment start byte number note padding afterspotdirection alignment rule followedchapter introduction webgpu byte padding alignment rule restriction o n variable start yes example did trip ﬁrst time tried array example light array structs type lightproperties alignment lightproperties struct maximum alignment element size multiple alignment wit h byte padding end size array byte ﬂoat javascript data wgsl array come length storing value careful data alignment account wgsl data type matrix ﬂoating point value matrix wgsl essentially array column vector follows sa alignment rule particular matrix row array byte padding column important work normal transformati metric graphic data type basic scalar type wgsl include boolean typ e bool value trueand false unsigned integer type signed integer type ﬂoating point type note particular t numeric type ﬂoating point type available language extension thebooltype host sharable mean variable ty peboolcannot storage uniform address space t v alue javascript mean data structure includes boolcannot storage uniform address space literal integer type written usual decimal f orm hexadecimal form leading integer literal type written u suﬃx suﬃx example int eger literal suﬃxes possible considered abstrac t curiously abstract integer automatically converted wgsl automatic conversion regular type ni variable type expression legal abstract integer automatically converted expression illegal automatically converted main point abstract integer make possibl e write expression involving constant natural way floating point literal include decimal point n exponent f ﬂoating point literal f suﬃx type suﬃx abstract ﬂoat automatically converted type example include hexadecimal ﬂoating point liter al covered wgsl vector type element element n vector scalar type bool vector type oﬃcial name like vector bool vector bools type name numeric vector alias commonly ed instead oﬃcial name alias alias alias vector similar array element vector ca n referred using array notation example vi element v v v andv element referred using swizzlers using multiplechapter introduction webgpu letter dot construct vector se lected element example ﬁrst element vin reversed order copy element letter rgbacan used instead xyzw similar glsl subsection wgsl matrix type matrix ﬂoating p oint value type matrix n m equal oﬃc ial name like type simpler alias like element array stored order th e element ﬁrst column followed element second column column vector column vector accessed using array notation exa mple ifmis thenm second column m andm ﬁrst element vector building data structure wgsl array structs t data type array element type tand length nisarray t n array length constant array type length possible stor age address space array element referred usual example struct data type contains list member declaration wh ich diﬀerent type example deﬁnition lightproperties type member scalar vector matrix array struct member accessed using usual dot notation example li type lightproperties thecolormember ofl note individual member struct nnotations example struct vertexoutput builtin position position location color wgsl pointer type far tell b e used type formal parameter function deﬁnitions pointer type na take form ptr t whereais address space ti type example ptr function ptr private array pointer type ptr t point value type t address space ifpis pointer pi value point vi variable vi pointer tov pointer type used implement t o function example fn ptr function array var sum var sum return sum note use ato array apoints parenthesis required precedence rule function called nums wherenumsis variable type array function address space numsmust local variable introduction webgpu scalar type vector matrix array structs nstructible value given type constructed appropriate list value notation look like function function ty pe example var var b b var c abstract ints converte d var d contributes value th e var e construct identity matrix var f c c c column f c var g array construct array leng th var h mystruct mystruct struct var repeated declaration annotation wehaveseenhowtodeclarevariablesusing var whereaisanaddressspace localvariables function declared using var function simply var global variable address uniform storage required global variable follow diﬀerent rule type variable speciﬁed declaration foll owing variable colon type example var private sum declaration variable function private addr es space include initial value variable initial value constant variable expression initial value included declaration type t variable generally doe speciﬁed glsl compiler determine ty pe initial value variable initialized using abstract int type s speciﬁed type taken function body identiﬁer declared using letinstead var result named value variable letdeclaration include initial value value changed initialization declaration ca n optionally include type usually necessary address space speciﬁed usingletmakes clear expect value change make impossible ch ange value accidentally named value declared using const initial value constdeclaration constant known compile time initial v alue given expression long expression contains constan t letcan used function constdeclarations used declaration declare identiﬁer l ike var b legal applies constandlet var seen annotation like location used variable declaration function deﬁnitions function formal parameter r eturn type function wgsl documentation call attribute prefer save term attribute vertex attribute textbook cover comm annotation encountered previous section come l ater discus compute shaders common annotation include chapter introduction webgpu n binding m n m integer used vardeclarations uniform storage address space specify source resource association speciﬁed bind group layout subsection vertex fragment compute used function deﬁnition specify function used entry point function vertex fragment compute shader seesubsection location n n integer used input output ver tex shader fragment shader entry point function applied formal parameter return type member structs used spe cify type formal parameter return type meaning depends c ontext input vertex shader entry point speciﬁes source nput vertex buﬀer subsection return type fragment shader entry point functio n speciﬁes color attachment destination tha t output subsection used vertex shader output fragment shader associate particular output ofthevertexshader withthecorrespondi nginput tothefragment shader subsection interpolate flat applied output vertex shader entry point function corresponding input fragment shader program applied applied usually value fr agment shader input interpolated output value vertex shader ll vertex triangle line drawn interpolate flat annotation turn oﬀ interpolation instead thevaluefromtheﬁrstvertexisusedforallfragme nt thisannotationisrequired value integer boolean type applied t o ﬂoating point value builtin vertex index builtin instance index used input vertex shader entry point function specify vertex number nstance number processed subsection builtin position used output vertex shader entry point functi speciﬁes output x y z w coordinate vertex clip coordinate vertex shader entry point function require d output annotation used input fragment shader progra m speciﬁes input isthe interpolatedposition thefragment beingpro cessed inviewportcoordinates seesubsection discussion coordinate system webgpu builtin facing used input type boolto fragment shader program value true fragment processed facing triangle useful example doing ded lighting graphic subsection expression function wgsl familiar arithmetic logical bitwise comparison tor doe conditional operator equivalent function select false case true case boolean note assignment tor bi statement expression doe value like c introduction webgpu interesting thing operator extended way work vector matrix scalar example ai matrix bi matrix bcomputes matrix product vi vector m ﬂoats thena vi vector linear algebra product matrix vector arithmetic operator applied vector numeric type operation applied numeric vector numeric type combined using comparison operator result aboolvector length interesting arithmetic operator appl ied vector scalar operation applies component vector expression course include call function wgsl function mathematical funct ion ab co atan exp log andsqrt logis natural logarithm ab parameter ﬂoating point type parameter scalar v ector vector function applied sqrt function doing linear algeb ra operation vector including length v length vector v normalize v unit vector pointing direction v dot v w dot product vandw cross v w cross product distance v w distance vandw case function work vector ﬂoats f unction operation common computer graphic value min max clamp value range min max return value value min max return min value min return max value max b blend factor return weighted average b return blendfactor blend factor b edge x return x edge x edge low edge high edge x return x lowedge return x highedge return value increase smoothly x ncreases lowedge high edge l n l n unit vector computes vector l reﬂecte d surface normal vector subsection l illustration inthat sectionpoints fromthesurfacetowards thelight sou rce thelin reflect l n point light source surface l n ior l n unit vector ior ratio index refraction computes refracted vector light d irection l hit surface normal vector n separating region diﬀerent index refraction statement control statement wgsl large similar c restriction introduction webgpu basic statement wgsl include assignment using compound assignment using increment using decrement using functioncallstatements return statement break continue anddiscard increment decrement postﬁx allowed assignment decrement statement expression don t va lue used larger expression discard statement used fragment shader entry point function stop output fragment shader bei ng written destination asforcontrolstructures forloops whileloops ifstatementsinwgslhavethesame form c java javascript brace required body loop statement inside ifstatement brace enclose just single statement breakandcontinue used loop usual note statement label labeled breakor labeled continue statement additional looping statement wgsl take t form loop kind loop exited breakorreturnstatement basically true loop theswitchstatement wgsl signiﬁcantly changed usual case combined case colon case optional code case mu t enclosed brace fallthrough case t o absence breakstatement breakstatements optional case breakandreturncan used end case early default case required switch expression type case constant type abstract integer example switchstatement shader source code wgsl doe concept exception try catch statement function deﬁnitions wehaveseenexamplesoffunctiondeﬁnitionsin alloftheexamples section shader entry point function annota ted vertex fragment possible deﬁne additional function shader th ose function called usual way note notlegal entry point function called pipeline remark vertex shader fragment shader f pipeline deﬁned diﬀerent shader module shader module contai n number shader entry point entry point function used pipeline speciﬁed pipeline descriptor subsection function deﬁned using fnfollowed function formal parameter list followed optionally return type ﬁnally function body enclosed brace function en try point function called shader module restriction function recursion direc t indirect allowed nesting function deﬁnition inside function deﬁnition array parameter speciﬁed size pointer type para meter function private namespace function name t overloaded tha t t functionschapter introduction webgpu diﬀerent parameter list function overloaded function global variable ﬁnish section function fn invertedcolor color return inve rted color return fn grayify color ptr function modify color n place let c color let gray color gray gray gray fn array parameter passed value var min var min min return min fn simplelighting n l v diffuse ve n unit surface normal vector l unit vector pointing light v unit vector pointing viewer dot n l wrong surface illuminated return return zero vector black var color diffuse dot n l let r l n reflected ray dot r v add specular lighting specular color gray specular exponent color pow dot r v return color graphic webgpu far webgpu example course main computer graphic rendering sce ne mean using coordinate system geometric transformation lighting mate rial look section note use basic opengl light ing model realistic physically based rendering common example section port simple webgl diskworld hierarchical modeling example demo chapter introduction webgpu depth test enter need know implement depth t est webgpu depth test used make sure object lie ob jects actually hidden foreground object subsection unlike opengl simply matter enabling test provide depth buﬀer used hold depth information pixel image attach buﬀer rendering pipeline sample program us depth test scene draw ﬁfty colored disk black outline disk d rawn outline shader program apply diﬀerent depth disk eac h outline ensure disk outline seen follow correct ont order drawn order source code detail note part source code depth test commented depth buﬀer webgpu actually kind texture t size image created using function depthtexture size size canvas format usage attachment depthtexture global variable texture created initialization used time image drawn formatof texture describes data stored pixel value used m eans texture hold bit depth information pixel usagemeans texture attached render pipeline pipeline created depth test enabled n pipeline adding depthstencil property pipeline descriptor used function depthstencil enable depth test pipeline depthwriteenabled true depthcompare format theformathere match formatthat speciﬁed creating texture value depthwriteenabled anddepthcompare probably shown depth test work comparing depth value new fragment pth value currently stored depth buﬀer fragment comparison false new fragment discarded thedepthcompare property speciﬁes comparison operator applied using property mean fragment used depth l es current depth item lower depth considered closer user case better value property setting depthwriteenabled property truemeans new fragment pass depth test depth valu e written depth buﬀer application s necessary apply depth test saving new depth value example drawing transluce nt object subsection finally drawing image depth buﬀer atta ched pipeline render pas descriptor chapter introduction webgpu let renderpassdescriptor colorattachments clearvalue r g b loadop clear storeop store view depthstencilattachment add depth buffer colora ttachment view depthclearvalue depthloadop clear depthstoreop store note viewin thedepthstencilattachment view depthtexture created previously depthclearvalue say depth fragment initialized depth buﬀer cleared maximum possible depth value representing depth imag stencil way refers stencil test covered textb ook memory stencil test generally combined memory depth test web gpu texture clear property renderpassdescriptor mean color depth buﬀers ﬁlled clear value rendere appropriate ﬁrst render pas additional render pass clear h changed load order avoid erasing drawn example th e sample program make change second render pas adop load lo ad sample program actually us multisampling subsection requires small change creating depth texture depthtexture size format samplecount required multisampling used usage attachment coordinate system using default webgpu coordinate w hich x range left right y range depth range point coordin ate outside range image coordinate referred normalized device coordinate ndc opengl us term clip coordinate defa ult coordinate webgpu us term refer homogeneous coordinate x y z w default transformation clip coordinate ndc given mapp ing x y z w chapter introduction webgpu normalized device coordinate mapped viewport coord inates rasterization viewport coordinate pixel device coordinate rectangular region rendered left corner pixel hav ing height width equal viewport coordinate include untransformed d epth value fragment shader us builtin position input value given viewport coordinate ordinarily xy coordinate pixel th e fragment shader center pixel coordinate pixel upper left corner viewport multisampling point pixel used want able use coordinate choic e drawing brings new coordinate system object coordinat e coordinate vertex originally speciﬁed world coordinate rbitrary coordinate scene eye coordinate represent world fr om point view user viewer stretching left t o right pointing pointing screen coordinate system transformation discussed extensively section illustration repeated section object orld ransform webgpu identify clip coordinate malized device coordinate device coordinate viewport coordinate itisimportanttounderstandthatonlynormalizeddeviceco ordinate viewportcoordinates viewport transformation built webgpu o ther coordinate system transformation implemented code java cript shader program modeling transform viewing transform usually mbined modelview transform shown reason explained subsection program generally need work modelview projection transforms important transformation shown diagr normal vector surface play important role lighting subsection object transformed themodelviewtransformation itsnormalvectorsmustalso betransformed thetransformation normal vector modelview transform ation derived transformation implemented matrix t modelview projection transformation matrix transformation m atrix normal vector matrix sample program ﬁrst example ic webgpu program functionality identical t webgl version display object time illuminated single white light source user control wha t object shown material property object user rotate object b y dragging image object deﬁned indexed face set rendered usin g indexed drawing variouspropertiesareprovided javascriptside th eprogram used shader program collected single struct shader program chapter introduction webgpu struct uniformdata modelview size offset projection size offset measured te float normalmatrix size offset lightposition size offset diffusecolor size offset specularcolor size offset specularexponent size offset group binding var uniform uniformdata uniform data backed javascript userdata length value written array uniform buﬀer hold struct gpu oﬀsets listed member struct correspond ndices array example set diﬀuse color red say uniformbuffer uniform data typed array method array index copy element arrayinto userdata starting speciﬁed index writebuffer note second parameter give byte oﬀset data buﬀer time oﬀset measured ﬂoats fourth parameter starting index ty ped array data copied ﬁfth parameter give number byte array copied program actually organized example ab copying various data item javascript gpu shader program modelview projection matrice s used vertex shader member struct used fragment sh ader probably best practice combine data vertex shader fragment s hader struct input vertex shader coo rdinates normal vector vertex vector coordinate given objec t coordinate vertex shader output position vertex clip coordin ate required output normal vector position vertex eye ordinate struct vertexout builtin position position location normal location eyecoords vertex fn vmain location coords location normal vertexout let eyecoords var output vertexout eyecoords normalize normal make sure s unit vector conver t x y z coords return output tounderstandthiscode youneedtounderstandthevariousc oordinatesystemsandthesupport wgsl matrix vector math eye coordinate vertex obtained bychapter introduction webgpu multiplying homogeneous object coordinate vector th e modelview matrix give homogeneous x y z w eye coordinate converte d ordinary x y z coordinate dividing theposition output given clip coordinate obtained multi plying eye coordinate vector projection matrix unit normal eye coordinate output vertex sh ader input fragment shader used lighting calcula tion value fragment course interpolated vertex triang le contains fragment phong lighting refers doing lighting calculation fragm ent shader using interpolated normal vectorsandthebasicopengllightingmodel lighting example section need work matrix vector javascript si program convenient use javascript library support matrix vector math webgl used glmatrix subsection webgpu need diﬀerent library reason reason range z clip coordinate wgsl s glsl range mean projection matrix wil l diﬀerent shading language second reason matrix wgsl tains ﬂoats alignment issue subsection glsl matrix contains ﬂoats example use library gregg tavares distributed mit open source license load documentation link web page http example use smaller miniﬁed version library javascript ﬁles dist folder atrix download modelview transformation matrix computed j avascript starting identity matrix multiplying viewing modeling transformation given scaling rotation translation s everal familiar way construct orthographic perspective projection matrix subsection easily implemented using matrix math function proper tie object matrix vector represented appropriate length created directly calling function library examp le matrix function create array ﬁlled zero matrix vector operation produce matrix vector output usually p as existing matrix vector ﬁnal parameter function receive output ho wever parameter optional library create new matrix vector outp ut provided case output return value function exam ple ifmodelview current modelview matrix want apply translation say modelview modelvi ew modelview modelview chapter introduction webgpu ﬁrst version course eﬃcient let look important function include function used example creatin g projection matrix common approach projmatrix fovy aspect n ear far wherefovyis vertical ﬁeld view angle given radian aspectis ratio width image height nearis distance near clipping plane viewer dfar distance far clipping plane essentiall y gluperspective function opengl subsection measuring angle radian instead degree equivalent glortho andglfrustum available modelview matrix usual start viewing t ransformation equivalent glulookat convenient modelview eye viewref viewup parameter speciﬁed regul ar javascript array construct view matrix viewer positioned eye looking direction viewref vector viewuppointing upwards view course view matrix lso created starting identity matrix applying t ranslation rotation example modelview modelview modelv iew modelview modelvi ew modelview modelvi ew note sample program sec tion view matrix actually come trackball rotator used webgl se esubsection applying modeling transformation modelview mat rix following function including optional ﬁnal parameter showing vector parameter array modelview sx sy sz modelview scale factor sxin x direction syin y direction szin z direction modelview ax ay az angl e modelview tate angleradians line ax ay az note rotation use rule modelview angle modelview rotates angleradians modelview angle modelview rotates angleradians modelview angle modelview rotates angleradians modelview tx ty tz model view translates distance txin x direction tyin y direction tzin z direction normal matrix used transform normal vector matrix derived modelview matrix taking t submatrix modelview matrix taking inverse transpo se matrix follows chapter introduction webgpu normalmatrix modelview normalmatrix normalmatrix normalmatrix normalmatrix modelview matrix doe include scaling operat ion taking inverse transpose unnecessary function multiplying vector v matrix matrix transformedv v m similarly matrix diskworld section covered implementation lighting ma terials webgl including diﬀuse specular emissive material propert y directional point light spotlight light attenuation diskworld examp le end section illustrated property sample program functionally identical port diskworld example webgpu vertex shader webgp u version essentially phong lighting example discussed fragment shader essentially webgl version s yntax variable function declaration renaming type javascript sid e program us hierarchical modeling create scene subsection transformation implemented using library basic object cylinder nd sphere created indexed face set object associated buﬀers vertex buﬀer containing vertex coordinate vertex buﬀer containing normal vector index buﬀer object rendered buﬀers attached render pipeline program us depth test obviously multisampling worth looking s ource code discus look brieﬂy fragment shader implement lighting equation light material property normal m atrix uniform variable fragment shader struct materialproperties diffusecolor alpha component alpha f fragment specularcolor emissivecolor specularexponent struct lightproperties position color spotdirection note point light spo tlight spotcosinecutoff spotlight spotexponent attenuation linear attenuation factor point light enabled group binding var uniform material materialpr operties group binding var uniform light array lightp group binding var uniform normalmatrix f chapter introduction webgpu value uniform buﬀer note cause alignment requirement uniform subsection light property oﬀset byte buﬀer d normal matrix oﬀset s information fo r javascript lighting equation implemented following funct ion called fragment shader entry point function enabled light fn lightingequation light lightproperties material m aterialproperties eyecoords n v n normal vector v direction viewer unit v ectors var l unit vector pointing light var r reflected light direction reflection n var spotfactor multiplier account spotlight var attenuationfactor multiplier account li ght attenuation directional light l normalize point light spotlight attenuation possible point li ghts l normalize eye coords light spotlig ht var d var spotcosine dot d l spotcosine spotfactor pow spotcosine point outside cone light spotli ght spotfactor light add color var dist distance eyecoords attenuationfactor dist dot l n light doe illuminate return var reflection dot l n r l n dot r v add specular reflection let factor pow dot r v reflection factor return spotfactor attenuationfactor reflection return value represents contribution light color fragment possible light actually shining si primitive rendered dot l n case contribution color wise contribution computed sum diﬀuse spec ular reﬂection multiplied factor account spotlight light attenuation light spotlight corresponding factor eﬀect return val ue spotlight factor depends cone spotlight fragment l ocated light attenuationchapter introduction webgpu factor used called linear ph ysically realistic used better visual result physically alistic attenuation encourage read code example wgsl programming sultsection question lighting model texture atexture simply property varies point point primitive texture variation color point point common type color texture image te xture kind texture variation reﬂectivity normal vector possible image texture covered section opengl section andsection webgl basic idea carry webgpu t hough coding detail diﬀerent webgpu image texture s plus cubemap texture mostofthissection texture coordinate image texture applied surface texture col point obtained sampling texture based texture coordinate point sa mpling gpu webgpu program using wgsl variable type sampler image texture come standard u v coordinate sys tem coordinate range image happens texture coordinate outside range depends sampler used sample texture texture u coordinate used texture coordinate syst em referred u v w applying texture image surface texture coordinate point surface map surface point point u v coor dinate sampling process us u v coordinate look color image process nontrivial referred ﬁltering involv e looking color multiple texels image mipmaps remember pixel texture referred texels convention texture coordinate refe r corner image u increasing right left v increasing f rom really just convention corresponds way data image web usually stored data pixel stored ﬁrst th e data stored image note texture coordinate opengl us r s nd t coordinate name instead u v convention opengl t point upward texture coordinate referring t corner image mind subsection discussion texture coordinate ho w used sample program ﬁrst example using texture webgpu simple program just draw square di ﬀerent texture chapter introduction webgpu texture coordinate square range p left corner square right corner square left pi cture texture coordinate point square used red green componen t color point texture image trivial example proc edural texture subsection square right us image texture mona lisa image come ﬁle middle square us image texture case color image come array pixel color program mage tiny image row pixel column original texture coordinate square multiplied sampling texture c opies texture downthesquare thisisaverysimpleexampleofatexturetr ansformation spend section basic exam ple look applies texture shape take image texture canvas page samplingisdoneinthefragmentshader thetexturecoordin atesthatareusedforsampling couldcomefromanywhere butmostoften texturecoordinat esareinputtotheshaderprogram vertex attribute interpolated texture coordina te passed fragment shader used sample texture sample program square drawn p vertex vertex attribute giving coordinate textu coordinate vertex attribute stored interleaved single vertex buﬀ er seesubsection data come array const vertexdata new coords texcoords data left corner data right corner data left corner data right corner note texture coordinate left corner right corner check corresponds t o color ﬁrst square illustration used map image texture th e square texture transformation square copy im age usual orientation opengl convention texture coordinate used t square texture coordinate assigned left corner squar e image appear account image opengl ﬂipped vertically loadingchapter introduction webgpu image data texture end subsection use geometric model come texture coordinate texture ordinate designed opengl ﬁnd need ﬂip image apply correctly model true example textured object example texture sampler texture sampler created javascript webgpu program used gpu used fragment shader th mean shader resource like resource declared globa l variable shader program value passed shader bind group samp ler texture variable declared groupand binding annotation example declaration variable tex represents image texture resource look like group binding var tex texture type texture refers texture sample type color returned sampling texture type vec texture ﬂoating point sample use type texture similar name cube texture integer texture typ e name like texture andtexture used sampler discussed late r section note texture variable declared using varwith address space like var uniform variable uniform address space true sampler variable texture sampler considered sp ecial handle address space used shader program sampler variable declared using type sampler unfortunately mean t use sampler variable exampl e group binding var samp sampler sampler simple data structure speciﬁes certain pects sampling process miniﬁcation ﬁlter use anisotropic ﬁlte ring value texture sampler variable constructed javascript shader program direct access internal structure te xture sampler fact thing wgsl pas paramete r function function working texture obscure covered main function sampling texture texturesample parameter texture sampler texture coordinate example let texturecolor texturesample tex samp texcoords function used sampling cube tex tures texture texcoords parameter texture cube texture s return value representing rgba colo return value texture doe actually store lor component example texture store just color component samp led using texturesample color value texture used red component color green blue color component set alpha component w ill able understand fragment shader sour ce code sample program work javascript sha der code quite simple chapter introduction webgpu group binding var samp sampler sampler resour ce javascript group binding var tex texture image texture resource group binding var uniform textureselect value tell fragment shader texture use fragment fn fragmentmain location texcoords locat ion textureselect trivial procedural texture use texcoords color component return texcoords textureselect checkerboard textur apply texture transform multiply texcoords return texturesample tex samp texcoords mona lisa texture texture transform return texturesample tex samp texcoords limited option texture sampler fa irly simple use shader program work javascript purpose sampler webgpu set option sam pling process sampler arecreatedusingthejavascriptfunction thefollowingcodecreates typical sampler sampling texture let sampler addressmodeu repeat default addressmodev repeat possible value mi minfilter linear magfilter linear default filter nearest mipmapfilter linear maxanisotropy default maximum theaddressmodeu property speciﬁes treat value u texture coordi nate outside range addressmodev doe v coordinate texture addressmodew opengl webgl called wrapping subsection meaning filtering account fact image usually b e stretched shrunk applied surface magfilter magniﬁcation ﬁlter used stretching image theminfilter miniﬁcation ﬁlter used shrinking mipmaps ar e copy image make ﬁltering eﬃcient text ures don t automatically come mipmaps mipmapfilter ignored mipmaps available similar opengl subsection themaxanisotropy property control anisotropic ﬁltering explaine d tion default value say anisotropic ﬁltering used higher value better quality texture viewed max imum value depends device s ok specify value larger maximum case maximum value introduction webgpu texture created javascript using important understand function allocates t memory gpu hold texture data actual data stored l ater similar creating gpu buﬀer checkerboard texture created n sample program let checkerboardtexture size pixel wide pixel high format unsigned int col component usage binding dst texture default sizeproperty speciﬁes width height texture array object width height texture format speciﬁed common image fou r rgba color component pixel bit color component uno rm mean bit represent unsigned integer range wh ich scaled range color value scaling s referred normalizing meaning overworked term norm usageproperty texture binding mean texture sampled shader program dcopydst mean data copied texture possible ﬁll texture data attaching texture pipeline render target requires usage attachment possible usage copysrc allows texture used source copied data thesize format andusageproperties required optional propertie themiplevelcount property speciﬁes number mipmaps provid e texture default value mean main image provided dimension property default th esamplecount property default value set create multisampled t exture used create special purpose texture used multisampling depth test ex ample texture used render attachment data texture created drawing image data image texture come javascript program data come arraybuﬀer typed array data copied texture using function sample program data tiny checkerboard texture come copied texture texture checkerboardtexture texture data w ill written texturedata containing data writt en bytesperrow byte row texels size texture width height ﬁrst parameter writetexture object addition texture property object miplevel property copy data texture s mipmaps nd anoriginproperty copy data rectangular subregion withi n texture origincan given array integer size pa rameter function determines rectangular region parameter object bytesperrow property distance byte start row o f texels start nextchapter introduction webgpu row texels padding row som etimes necessary satisfy alignment requirement offsetproperty giving starting point byte data data source overly complicated texture mages complex function work option data source texture image ﬁle webgpu ca nnot data directly image ﬁle fetch ﬁle extract dat imagebitmap object fetch api us promise discussed section example function textured used load texture image ﬁles async function loadtexture url standard method using fetch api texture u lr let response await fetch url let blob await image data blob let imagebitmap await createimagebitmap blob let texture size format usage binding dst attachment source imagebitmap flipy true texture texture return texture texture s usageproperty required copyexternalmagetotexture theflipy urecoordinatesontheobjectsthat display sourceproperty canvas thisloadtexture function called asyncfunction using await good idea catch error occur let texture try texture await loadtexture url catch e discus sample prog ram example sampler texture created javascript sid e passed shader program bind group resource bind group resou rce sampler sampler resource texture view textu example bind group checkerboard texture chapter introduction webgpu checkerboardbindgroup layout bindgrouplayout entry sampler note resource sampler binding resource checkerboardsampler texture note resource view textur binding resource resource buffer containing uniform variab le binding resource buffer uniformbuffer offset size mipmaps mipmaps important quality eﬃciency textur e miniﬁed ﬁt surface working mipmaps mip level origi nal image mip level copy mip level copy exact widthis width original image width mip level iismax width similarly theheight set mipmaps process continues di mensions reduced webgpu method automatically generating mipmaps hard write webgpu program create gpu sample program show deﬁnes function used create texture set mipmaps imagebitmap program serf example rendering texture using texture view creating texture number mipmaps speciﬁ ed easy count number mipmaps needed set given image bitma p used level let mipmapcount let size ht size size size let texture size miplevelcount mipmapcount number mipmaps format usage binding dst attachment function copyexternalimagetotexture used copy bitmap level texture usual way remaining mipma p image generated turn making copy previous level image t idea attach mipmap render target pipeline use previous mipmap level texture resource forchapter introduction webgpu pipeline draw square just cover output texture coordinate map entire resource image output recall texture resource render target actual ly view texture using parameter create texture view result view includes mipmaps texture possible create view contains just subset available mipmaps passing parameter createview speciﬁes ﬁrst mipmap number mipmaps include view create view contains mip level textureview basemiplevel mip level included view miplevelcount include mip level let use single mipmap texture texture resource render target example loop sample program creates mipmap image let mipmap mipmap mipmapcount let inputview used bind group r esource basemiplevel mipmap miplevelcount let outputview used render tar basemiplevel mipmap miplevelcount let renderpassdescriptor colorattachments loadop load storeop store view outputview render let bindgroup layout entry binding resource sampler binding resource inputview let passencoder rende rpassdescriptor pipeline vertexbuffer coord s texcoords bindgroup includes pre vious mipmap level draw square cubemap texture cubemap texture consists image cube image square size cubemap texture u sed example make skybox subsection environment mapping called reﬂection mappi ng subsection sample program show create cubemap texture webgpu use skybox environment mapping functionally identical webgl example addition image texture webgpu te xtures texture just array image element array called layer notchapter introduction webgpu cover array texture textbook need know l ittle purpose cubemap texture treated array la yers image index side cube order particular cubemap texture treated array creating tex ture loading image side edited code sample prog ram loading texture let url link image cube let texture let let response await fetch url image number let blob await let imagebitmap await createimagebitmap blob need know image size create text ure texture size end mean image dimension default texture dimension format usage binding dst attachment source imagebitmap texture texture origin end put image number cube texture dimension element sizeproperty make texture intoanarraytexture forum texture thethirdelement wouldbethesizeinthezdirection similarly copying image texture element originproperty speciﬁes array layer image copied ﬁrst wrote program using code envi ronment mapping looked reallybad comparedtothewebglversion thiswasmostappa rentonsharplycurvedsurfaces handle teapot eventually realized diﬀerence webgl version us mipmaps added code webgpu version t o produce mipmaps cubemap texture added option turn use mipm aps oﬀ diﬀerence wgsl shader program cubemap texture used similarl y texture data type cubemap texture texture cube sampling texture texturesample function used texture parameter give texture coordinate sample obtained b y casting ray origin direction seeing intersects cube skybox basically show view box inside textu coordinate just objectchapter introduction webgpu coordinate point box fragment shader drawing skybox background simply group binding var samp sampler group binding var cubetex texture cube fragment fn fmain location objcoords loc ation return texturesample cubetex samp objcoords environment mapping idea cast ray vie wer point reﬂective object use reﬂection ray surface t texture coordinate vector point reﬂected ray hit skybox point t hat seen user reﬂective object skybox sample program rotated direction ray adjusted rotation account seesubsection discussion math fragment shader drawi ng reﬂected object group binding var samp sampler group binding var cubetex texture cube group binding var uniform normalmatrix f group binding var uniform inverseviewtransfor m fragment fn fmain location eyecoords direction viewer surface location normal untransformed normal surf location let n normalize normalmatrix normal normal vector t o surface let r reflect eyecoords n reflected direction towa rds skybox let t inverseviewtransform r multiplying inverse view transform account rotation skybox return texturesample cubetex samp t use reflected r ay javascript cubemap texture used sim ilarly texture sampler used cubemap texture th ose used texture view cubemap texture passed shader program s bind group resource diﬀerence creating view need specify th want view texture cube texture dimension cube default viewed array texture crea ting mipmaps texture needed view texture represent single mipmap lev el single cube example let outputview dimension basemiplevel mipmap miplevelcount basearraylayer arraylayercount wheremipmapis desired mipmap level sideis array index desired cube dimension explicitly speciﬁed al l help understand diﬀerence texture view texture chapter introduction webgpu texture format format texture speciﬁes kind data stored fo r texel format speciﬁes number color channel type data ca e data interpreted common image format lor channel r g b data texel consists bit color chan nel value color channel unsigned integer u range whi ch divided ﬂoat value range norm format m similar order r g b value reversed mat depending platform format html canvas function return correct platform using th e wrong format stop program working webgpu doe format version automatically reading writing texture webgpu support large number texture format format color channel r color channel rg color cha nnels rgba number bit color channel data type ﬂ oat unsigned integer signed integer integer format normalized compressed texture format covered te xtbook example format unsigned integer format color channel storing unsi gned integer texel signed integer texel format int format us number texel texture passed shader program resource bind group texture sampled using texturesample includes normalized integer format standard wgsl function textureload used read texel data texture work integer fo r texture function treat texture like array instead using t exture coordinate sample texture use integer texel coordinate access val ue speciﬁed texel example read texel row column texture tex use let texelvalue textureload tex parameter mipmap level required bu t usually zero return value textureload vector texture color channel missing color channel ﬁlled g b channel channel notethatth eterm color isusedforinteger texture value texture probably don t represent color texture store data color possible shader program write texel data texture using function texturestore texture passed shader called storage texture work certain texture f ormats lot rule various texture format rule s summarized table texture format capability section webgpu speciﬁcation shader storage texture type texture storage write ﬁrst type parameter texture format second write speciﬁes access mode currently writeis possibility texture passed shad er bind group resource resource type storagetexture texture example bind group layout shader program us texture reading textureload writing texturestore chapter introduction webgpu let bindgrouplayout entry texture variable fragment shader binding visibility texture sampletype uint texel value unsigned integer yes s called sampletype t sample texture storage write fragment shader binding visibility storagetexture format access possible value viewdimension note storage texture just mean texture bee n passed shader bind group resource type texturestorage texture used regular texture storage texture diﬀerent time thetexturestore function take parameter texture texel coo rdinates texel value set value value lways vector texture fewer color channel mi ssing channel speciﬁed g b channel channel e xample set single integer value row column storage textu use texturestore tex sample program john conway s game life subsection game board array cell cell live dead program state board stored texture type representing dead cell representing living cell t game board displayed canvas pixel canvas cell size t texture size canvas action game involves computing new generation cell current generation program actually us texture regul ar texture containing current generation board storage texture used s tore generation computed program doe work draw function function draw square completely cover canvas fragment shad er called pixel canvas fragment shader us textureload read current state cell processing cell alive return white color fragment cell dead return black time fragment shader computes state cell generation writes state storag e texture using texturestore draw role texture swapped t hat generation current introduction webgpu fragment shader leaving comput e new state cell us new function texturedimensions get size texture dimension value required new state mputation group binding var inputboard texture group binding var outputboard texture storage write fragment fn fragmentmain builtin position position location let boardsize texturedimensions inputboard let cell integer pixel coords th fragment let alive textureload inputboard cell curr ent state note state r color component compute newalive state cell gener ation texturestore outputboard cell store new state let c alive return c c white cell alive black f theprogramcreatestwotextures andloads withtheinitial state board bind group assigns toinputboard shader tooutputboard us sample bind group layout shown bindgroupa bind group using input outp ut layout bindgrouplayout entry binding resource binding resource second bind group bindgroupb revers role texture program us bindgroupa ﬁrst time draw called bindgroupb second time bindgroupa time second version life program us diﬀerent approach us texture format represent current state state board texture format used sampling shader program value read input board using texturesample instead textureload texture output target render pipeline fragment shader output going canvas going r texture second output fragment shader pipelin e descriptor specify target chapter introduction webgpu let pipelinedescriptor fragment module shader entrypoint fragmentmain target format format render pas descriptor us view output text ure second color attachment let renderpassdescriptor colorattachments clearvalue r g b loadop clear storeop store view second color attachment texture loadop load ok content entirely repl aced storeop store view output type fragment shader structthat contains output value detail course look source code f sample life program texture complex covered part api bu t tried overview includes information ar e likely need compute shaders major difference webgl webgpu addition compute shaders compute shader performs purely computational task directly image rendering task produce result tha t used later rendering vertex fragment shaders used render pipeli ne compute shaders used type pipeline called compute pipelin section discusses create use compute shaders compute pipeline workgroups dispatch image rendering draw ordrawindexed function used render pas encoder start processing render pipeline processing invol f multiple invocation vertex shader function multiple invocation fragment shader compute pipeline compute pas encoder used pr ocessing started callchapter introduction webgpu function dispatchworkgroups discus javascript wgsl code subsection need basic understanding workgroups mean dispatch job performed compute shader thought tw way organize work based structure th e data processed job work image likely job process array likely invocation compu te shader arranged logically grid invocation global invocation id consisting integer position gr id complicate thing invocation broken small er group called workgroups invocation workgroup work closely toge ther example workgroup address space contains data shared invoca tions workgroup visible invocation workgroups invocat ion workgroup arranged grid dimension overall job inv ocation local invocation id give position workgroup workgroup s size consisting integer giving size dimensi workgroups job size invocation job visualized s omething like glocal invocation id local invocation id tiny yellow square individual invocation mpute shader workgroup size workgroup consists grid loc al invocation id invocation pair number range workgroups orga nized grid global invocation id pair x y x range y range structure invocation job determined tw o thing size individual workgroup speciﬁed wgsl source code f shader number workgroups dimension overall job gri d speciﬁed dispatchworkgroups javascript example shown illustra tion workgroup size job created ca ll todispatchworkgroups number invocation workgroup limited wo rkgroups small single invocation allowed recommended s reasonable workgroup size case use value example wonder workgroups exist t o physical structure gpus processor typical gpu physic ally divided group processorsinagrouparenotindependent theyallrunthesa mecode andtheysharesomelocal memory access quickly possible using webgpu workgroup size physical size processor group gpu leave processor group performance program s optimized making use physical structure gpu suspect tha t optimization really need tuned particular gpu structure webgpu progra m designed run multiple platform m sure optimization ca n case suchchapter introduction webgpu optimization expertise example use workgroups signiﬁcant way compute shaders ﬁrst compute shader example compute modiﬁcation earlier program showed colored disk moving va bouncing oﬀ edge earlier program position disk upda ted javascript written buﬀer gpu new version move c omputation compute shader run gpu increase eﬃciency bec ause gpu parallelizes computation new value copied t o gpu working compute pipeline similar working nder pipeline create wgsl source code shader create compute pipeline process shader create bind group resource used pipeline use comm encoder compute pas encoder assemble command needed run t pipeline submit command webgpu device queue wgsl source code function compute s hader marked annotation compute way vertex shader annotate d vertex compute shader requires ann otation specify workgroup size example annotation workgroup size speciﬁes dimensional workgroup size x direction y direction builtin value available parameter comp ute shader function useful probably builtin global invocation id give global invocation id current invocation dimensional task y z component vector pro blem z component far wgsl concerned problem nal size missing dimension set example start ent function ﬁrst sample program compute workgroup size fn main builtin global invocation id global id builtins compute shader include builtin local invocation id local invocation id current invocation workgroup builtin num workgroups number workgroups direction value just parameter dispatchworkgroups started current job builtin workgroup id position grid workgroups workgroup contains current invocation type value missing dimens ion set compute shader input javascript b ind group like vertex buﬀer provide parameter value compu te shader entry point function parameter builtins function n o return type compute shader produce output writing storage buﬀer storage te xture bind group sample program data animation consists position moving disk velocity compute shader run betwee n frame animation update position disk bounce oﬀ edge rever s direction casechapter introduction webgpu velocity disk change x y component o f position velocity updated computation compo nents task invocation compute shader update position d velocity disk x y direction ndisks need ninvocations shader position velocity stored storage buﬀer s represented shader program variable type array initial value written buﬀers javascript program buﬀers ar e used entirely gpu additional storage buﬀer hold array ﬂoats giv ing data needed computation number disk radius disk d change time previous update shader variable declared group binding var storage read write diskoffsets array group binding var storage read write diskvelocities array group binding var storage params array ﬁrst array need readwriteaccess content updated shader pipeline bind group needed pipeli ne descriptor compute shader fairly simple layoutproperty compute property specify shader module shader entry point function pipeline created function sample program creates compute pipeline bind group attached pipelin e function createcomputepipelineconfig let pipelinedescriptor compute module computeshader entrypoint main layout auto computepipeline pipelinedescriptor computebindgroup layout entry position disk binding resource buffer offsetbuffer velocity disk binding resource buffer velocitybuffer data computation binding resource buffer paramsbuffer chapter introduction webgpu pipeline run javascript function called tween frame animation compute pas encoder method dispatchworkgroups used invoke shader parameter speciﬁes number workgroups need diskcountinvocations shader size workgroup need disk count workgroups number workgroups integer need r ound number integer value using use compute pas update disk position based ir velocity change time previous animat ion frame velocity change parameter dt chang e time function update dt write change time position params buffer new rray dt encode compute pas work let commandencoder let passencoder commandencoder begincomputepass computepipeline computebindgroup let workgroupcount disk count passencoder dispatchworkgroups workgroupcount submit work gpu device queue similar working rend er pipeline render pass second compute shader example implement conway s game life modiﬁcation original version computed new generation board fragment shad er time displaying current generation new version move th computation compute shader compute shader version lesseﬃcient original taken reminder fragment shaders c omputational work sinceeachinv dimensional board workgroup size component nddispatchworkgroups need parameter use workgroup size givin g invocation workgroup example show particular compute shaders work texture current state board stored texture new stat e written second texture texture resource compute pipeli ne ﬁrst used input resource type texture second use d output resource type storage texture compute shader use textureload read texture resource use texturestore write storage texture resource subsection information storage texture textureload andtexturestore note compute shader use texturesample source code compute shader omitting d etails computation chapter introduction webgpu group binding var currentgen texture group binding var nextgen texture storage write compute workgroup size fn main builtin global invocation id id let boardsize texturedimensions currentgen let cell row column cell pr ocessed return assigned cell outside let alive textureload currentgen cell compute new alive value cell texturestore nextgen cell dispatching workgroups number invocation tha t need depends size board size canvas w e divide number invocation workgroup size round integer v alue compute generation copy currentgener ation texture currentgenertion used render shader function computenextgeneration let commandencoder let passencoder computepipeline computebindgroup let workgroupcountx let workgroupcounty workgroupcountx work groupcounty copy result n extgeneration texture nextgeneration texture currentgeneration let commandbuffer commandbuffer note new function function take parameter giving source texture dest ination texture size region copied ﬁrst parameter object wit h optional parameter specify themiplevel corner origin region copied ﬁrst compute shader example shader read value f rom buﬀer writes new value buﬀer second texture used input output wonder didn t use texture let shader update value texture fact couldn t text ures way use textureload andtexturestore texture solve problem bychapter introduction webgpu using storage buﬀer instead texture hold state board life game shader invocation read state cell s n eighbors problem invocation writing new state neighbor t hey writing new value resource old value stored way e nsure invocation read old value neighbor new value nice force read writes webgp u way sort thing single workgroup way compute job moving disk example doesn t problem nvocation shader work single element data array doe depend val ues written invocation simulation computer used physical simulation man y simulation beneﬁt parallelism gpu sample program fairly simple example program show large number white d ots moving randomly dot pixel motion random walk time step particle chooses random left move pixel th direction yellow cyan particle don t initially l ine yellow particle left line cyan particle right white particl e hit yellow cyan particle change color match stop moving result bui ldup colored particle interesting branching pattern process interestin g watch example program produce run idea simulation original read bout similar simulation time ago t remember point use number t compute shader random number generator wgsl shading langu age number produced language using simple mathem atical formula starting initial seed value formula produce sequenc e number sequence completely determined initial seed value lo ok statistically random mychapter introduction webgpu program take formula number gen erator used java programming language particle run ndom number generator starting diﬀerent seed value seed value created javascript using javascript s function program us storage buﬀers holding informatio n particle holding color information pixel canvas icle information includes current seed value particle s random number generator x y coordinate particle particle s color color encoded integer representing white yellow cyan color buﬀer represents color integer c ode number adding code black background color compute shaders shaders invoca tion process particle ﬁrst shader doe yellow cyan particle fo r white particle update data particle buﬀer moving particle random d irection try pixel contains colored particle th e particle change color doe shader need access color buﬀer check pixel white particle want contains c olored particle ﬁrst shader run color buﬀer cleared second comp ute shader update color buﬀer particle set color pixel c ontains particle match color particle program render shader invoked fo r pixel consults color buﬀer determine color assigned pi xel discus detail example encourag e look source code retrieving output example far compute shaders used proces s data used render shader task purely computational wit h visible component way retrieve output computational ta sk used javascript program compute shader output data storage buﬀer storage buﬀer typically stored gpu memory accessible javascript need way copy content buﬀer memory javascript access soluti use second buﬀer usageproperty includes mapreadandcopydst buﬀers referred staging gpu copy data staging buﬀer java cript map staging buﬀer reading javascript retrieved th e data staging buﬀer unmap buﬀer gpu access buﬀ er mapped sample program performs simple computation gpu output array ﬂoating point number s peciﬁc computation important program us storage buﬀer stagi ng buﬀer created like buffer size interval usage src stagingbuffer size interval usage read dstchapter introduction webgpu compute shader output buffer bufferis copied stagingbuffer wonder don t just add mapreadusage storage buﬀer mapreadcan combined copydst storage buﬀers meant live gpu memory staging buﬀers meant live shared memory general bu ﬀer t compute job submitted gpu output won t available job completed javascript wait happ en mapping staging buﬀer type synchroniztion handled webgpu usin g promise section staging buﬀer mapped using method mapasync return promise promise resolve buﬀer ready mapped mapasync typically called using await example sample program await inter vals ﬁrst parameter parameter specify starting point size byte region buﬀer mapped mapping ready staging buﬀer method getmappedrange used view mapped region arraybuﬀer anarraybuﬀer just container byte sample program byte actually array ﬂoats access data array ﬂoats wrap arraybuﬀer sample program doe addes number array ﬁna l answer side computation following function async function compute run compute shader copy output staging bu ffer let commandencoder let passencoder pipeline bindgroup buffer stagingb uffer interval map staging buffer interpret fi nd sum await inter vals let data new e interval let sum let sum sum data unmap staging buffer return sum return sum chapter introduction webgpu note particular use end buﬀer unmapped reused gpu processing data nontrivial time good idea make copy data map buﬀer doing processing possible map buﬀer writing provide inpu t gpu staging buﬀer created mapwriteandcopydstusage javascript map buﬀer writing copy data mapped buﬀer unmap bu ﬀer submit webgpu job includes copying data staging bu ﬀer gpu memory using copy data javascript gpu memory function complete task using staging buﬀer alth ough actually work webgpu speciﬁcation add program added implementatio n important parallel algorithm called computation discussed ab ove array copied javascript program array added ing loop operation take n step array size number add ed gpu using reduce order log n step basic idea add number second ha lf array partner ﬁrst half pseudocode rrayaof length n index index index index loop replaced application simple compu te shader result sum number original array equal sum number ﬁrst element modiﬁed array consider eleme nt new shorter array apply process original sum centrated element continue like original sum concentrated single element point compute shader applied just log n time really work stated size arr ay power thing little complicated point work w ith array length odd number sample program handle case look source code detail finish introduction webgpu ll look brieﬂy useful thing know didn t make earlier section ﬁnd sever al new sample program subsection lost device start writing application b e aware s possible webgpu device happens devic e stop working try device ignored resource s uch buﬀers pipeline created device longer valid ordinar ily rare happen example longer need device happen user unplugs external display disturb ing webgpu speciﬁcation say device lost shader execution doe t end reasonable ofchapter introduction webgpu time determined user user agent th e web browser running program doe deﬁnite guidance expect thefunction returnsapromisethatresolvesifandwhenthedevicebecome s lost used set function called devi ce lost used like just creating device info destroyed possibly try recover possible value destroyed meaning called reason destroyed try create new device reinitialize risk t thing wrong hopefully behavior better deﬁned future error handling ﬁrst thing remember webgpu error wi ll reported web browser s console webgpu error message info rmative hint ﬁx problem second thing know webgpu validates program according tightly speciﬁed criterion progr pass validity check platform likely platform th ing webgpu ﬁnds validity error doe automatically stop processing mark object caused problem invalid try continue attempt u se invalid object produce error message program produce series error message concentrate ﬁrst improve error message generated webgpu lab eling object label just webgpu object text string yo ur choosing adding label property object webgpu ﬁnds validation error t object include label error message example program us bind group cause problem adding label bind group h elp track error bindgroupa label bind group outline layout instead relying web browser console possible program check error thing complicated fact error ar e detected gpu program error report javasc ript use add error check gpu later retrieve result calling take parameter indicating type errorthat want todetect parameter validation internal validation common poperrorscope return promise resolve operation submitted gpu c orresponding push beenchapter introduction webgpu completed value returned promise nullif error detected object message property describes error example developing program like check fo r compilation error shader code pushing validation error s cope attempting compilation validation shader code shadersource let error await error throw error compilation error shader e error check removed program working webgpu encounter error captured err scope generates uncapturederror event add event handler t device respond uncaptured error function event remember watching web browser console ually good limit feature webgpu device subject certain limit ma ximum number vertex buﬀers attached render pipeline maximum size o f compute workgroup create device calling parameter device returned default set limit guaranteed t o supported webgpu implementation example default maximum size workgroup application default limit ﬁne ab solutely need workgroup size try requesting device limit device await requiredlimits maxcomputeinvocationsperworkgroup webgpu adapter doesn t support requested limit t throw exception succeeds web browser mean writing program fail run platform doesn t support creased limit object contains actual limit supported adapter list write object console requesting n increased limit check object adapter support webgpu deﬁnes set feature represent opti onal device capability example feature make t possible use certain type compressed texture compressed texture covere d book feature used unless requested device created device await requiredfeatures array o f feature name chapter introduction webgpu throw exception feature avai lable feature request limit device program run bool function used test adapter support feature wih given list possible feature webgpu documentati render pas option render pas encoder used add drawing command comm encoder speciﬁes pipeline resource bind group required pipeline option ll look viewport rectangular region canvas nder target rendered image displayed default viewport ent ire render target setviewport function render pas encoder used select small er viewport standard webgpu ndc coordinate x y rangi ng minus depth ranging zero mapped smaller viewport drawing take place outside viewport passencoder render pas encoder function take form left width height depth min depthmax whereleft width andheightaregiveninpixelcoordinates depthmin anddepthmax range depthmin depthmax usually depthmin zero depthmax example drawing pixel canvas map scene right half canvas using addition restrict drawing smaller rectangle viewport using setscissorrect form left width height left width andheightare given pixel coordinate diﬀerence viewport scissor rect scissor rect doe aﬀect coordinate mapping viewport show entire rendered scene scissor r ect prevents scene drawn thesampleprogram usesbothviewportandscissorrect moving disk animation showing colored dis k black outline diﬀerent viewports used draw copy scene quadrant canvas viewports scissor rect applied just disk interior outline render pipeline option pipeline descriptor used create render pipeline descriptor number option aﬀect h ow pipeline render primitive wehaveseen forexample howthe multisample propertyisusedformultisampling antialiasing subsection detpthstencil used conﬁgure depth test subsection look render pipeline option color blending default color output fragment shader repl ace current color fragment possible c olors blended new color fragment combination sou rce color shader destination color current color fragment n render target oftenchapter introduction webgpu used implement translucent color alpha compo nent source color determines degree transparency example sample pr conﬁguration color blending nested inside fragment property pipeline descriptor functionality similar webgl funct discussed subsection typical conﬁguration translucency fragment module shader entrypoint fragmentmainfordisk target format blend configure formula used color blendi ng color rgb color component operation add add default srcfactor default dstfactor default zero alpha alpha component operation add srcfactor zero dstfactor blending red green blue color component ﬁgured separately alpha component value used colorproperty say new rgb color value weighted average fragment shader output curr ent fragment color value used foralphasay alpha component destination remain u nchanged general formula using add operation newcolor shader output srcfactor current color dstfactor common conﬁguration set operation add srcfactor dstfactor meaning shader output simply added th e current color used build color target using multiple pass add little color value color masking thewritemask property fragment target let control color component fragment shader output writt en render target functionality called color masking opengl subsection discusses used anaglyph stereo example restrict wr iting red component red component current fragment color ch anged green blue alpha component left unchanged woul d render pipeline descriptor fragment module shader entrypoint fragmentmain target format writemask write red compone nt chapter introduction webgpu othervaluesforthe writemask propertyinclude combine constant operator write component example writemask default value mean color component written sample program let experiment writing combination red green blue color component note write just red component black background shade d green blue component zero writing write white background shade green blue component wi ll equal write red component depth bias depth test enabled drawing thing e xactly depth problem object visib le pixel object visible pixel end subsection solution add small bias depth object t called polygon oﬀset opengl end subsection sample program let user view polyhedron drawn white face b lack edge us depth bias ensure edge fully visible conﬁguration depthstencil property pipeline descriptor used drawing face depthstencil depthwriteenabled true depthcompare format depthbias depthbiasslopescale thedepthbias anddepthbiasslopescale property used modify depth fragment rendered pipeline default value s zero leaf depth unchanged positive value increase fragment s pth moving bit away user value depthbias anddepthbiasslopescale shown work case value depthbias multiplied smallest positive diﬀerence depth represented depth buﬀer work case triangle user viewing close t o thedepthbiasslopescale add additional bias depends angle tri angle make view direction note depth bias work triangle primitive line point depth bias sample progra m applied face polyhedron edge face culling face polyhedron example us pipeline option cullmode andfrontface option primitive property render pipeline descriptor polyhedron program closed object inte rior completely hidden exterior need render polygon s lie polygon cullmode property used turn oﬀ rendering ing triangle default value t riangles culled polyhedron program set cullmode avoid expense rendering tri angle visible ﬁnal introduction webgpu make change usual convention s face triangle determined rule looking fr ont face vertex given counterclockwise order polyhedron model program use opposite convention clockwise ordering set frontface option primitive cw specify clockwise vertex ordering primitive topology cullmode value frontface cw value ccw counterclockwi se change eﬀect appearance scene t eﬃciency wondering yes just set cullmode left example frontface programming language appendix contains brief introduction programming language used textbook java c javascript v ery familiar language reading textbook thr ee language common knowing make easier learn ot somewhat familiar class object oriented programming appendix meant help started languag e don t know basic information language giv hopefully let understand example book write prog ram use graphic technique covered able wo rk sample program accompany textbook java obligatory section material opengl chapter chapter java c used prefer javascript yo u use subsection javascript library simulates large opengl case need somewhat familiar c f ollow discussion shader programming language used webgl based c knowledge c useful writing webgl shaders y ou need know confusing aspect c detail t us pointer javascript essential webgl programming chapter andchapter programming chapter webgpu chapter used html canvas graphic section java programming language java taught ﬁrst programming language college high school mputer science program large complex language fe atures make suitable large complex programming project feature make little verbose overly strict make possible programmin g environment provide excellent support writing debugging program going write java code consider using programming environment su ch aseclipse http subsection explains set eclipse programming jogl java api opengl book come starter program writing graphical java program java jogl section doesn t tell let writ e java program scratch programming language information let ﬁll blank starter program modify sample program come book w ant learn java consider free java textbook http java graphic apis awt swing javafx swing built awt javafx completely new api javafx used textbook reference swing awt basic language structure java java program class contain variable deﬁnitions method deﬁnitions method oriented term function subroutine class deﬁned ﬁle match class class named myclass ﬁle b class occur nested class class nested c lass course doesn t ﬁle basic syntax deﬁning class public class myclass variable method nested class definition variation syntax example deﬁne c lass subclass existing class need say new class extends exis ting class public class myclass extends existingclass class java extend class additio n instead extending class new class implement interface interface java speciﬁes method deﬁned class implemen t interface option class deﬁnition look like t public class mygui extends jpanel implement keylistener mouselistener fact class exactly like used gui pro gram class contain main method class make program contain method main method program execution begin parameter type string representing array argument confusing distinction java variable method ignore main method static graphical program mainis theonlything static distinction impo rtant gui program mainmethod usually just creates window make visible t screen window take care method deﬁnition class actually deﬁnes thod object created class inside method deﬁnition sp ecial variable thiscan used refer object method f amiliar special variable javascript unlike javascript use ofthisis optional java variable object referr ed method called class dosomething variable method nested class marked private public orprotected private thing used class deﬁned pub lic thing accessed protected thing accessed class subclass programming language program book use main class deﬁnes wind ow graphical display seen class contains main routine particularly good style work small program ca e program depends class written ﬁles class shoul d folder ﬁle deﬁnes main class program compiled command line working folder command javac run program main class myclass use java myclass program use jogl require extra option n command need know explained subsection eclipse ide simple command running program standard class available use program standard class mathandsystem automatically available program imported source code ﬁle used ﬁle class package collection class exa mple class deﬁned package class imported source code ﬁle adding th e line import beginning ﬁle deﬁnition class alternatively class imported import possible class package add complication compilingandusingthem mysampleprogramsinthisbookare notdeﬁnedinnamedpackages oﬃcially said default recen t version java module collection package using module complicates thing used textbook java strongly typed language variable type hold value type variable declared declar ation speciﬁes type variable declaration include initial value example string declares variable value b e string int x x variable value int initi al value g g variable value object typ e java primitive type value objec t int long short byte double ﬂoat char andboolean ﬁrst integer type diﬀerent number bit real number type doubleandﬂoat constant type double constant type ﬂoat need add f come programming jogl method require parameter type ﬂoat constant charvalues enclosed single quote example double q uotes used string primitive value java addition primitive type class deﬁnes t ype type variable class possible value variable object belonging class interface deﬁnes type possible value object im plement interface object unlike primitive value contains variable method f example pointis class anappendix programming language object type pointcontains intvariables xandy astringis object contains method working string including named length return length named charat return character string variable method object accessed using period operato r ifptis variable type point referring object type point name instance variable object stris variable type string method thestringobject strrefers method deﬁnition speciﬁes type value returne d method type parameter usually marked publicorprivate example public int countchars string str char ch int count int ch return count countchars method take parameter type stringandchar return value type int method doe return value return type intin example speciﬁed void method java used class ﬁned deﬁnition come point used contrast c function declared used similar javascript t true global variable declared outside method programming code assignment statement control structure inside method deﬁnitions java set basic control structure c java script ifstatements anddo whileloops forloops switchstatements essentially form language assignment statement similarly language pretty set operator including basic arithmetic operator increment decrement operator logical operator ternary operator bitwise operator peculiarity java arithmetic c divis ion operator applied integer operand produce integer result used concatenate string hello world value helloworld just operand string operand automatically converted string java s standard function deﬁned class exampl e mathematical function x x x x y raising xto return random number range including including method str output string command line graphical program useful mainly debugging output item use string concatenation value x x y y formatted output method similar c s printf programming language object data structure addition primitive type java object type t hat represent value object variable object type doesn t hold object hold pointer object s said java doen t use pointer s correct say force use class interface s object type object created class using newoperator example point pt declare variable type point pt new point create object type point class point act type used create variable variable type pointcan refer object belonging class pointor subclass class expression new point assignment statement call special kind routine pointclass known constructor purpose constructor initialize object case parameter c onstructor value variable new object eﬀect code value ptis pointer newly created object say pt refers object instead referring object ptcould special value null value variable null variable doe refer object value ptisnull variable t exist attempt use error error s called anullpointerexception string way special object created th enewoperator instead string created literal value enclosed d ouble quote example string greeting hello world array special object type java deﬁnes ar ray type array type object type type int example array type int fromstringand point type string andpoint value variable type int array ofints value null value variable type point array point array created version newoperator int intlist declare variable refer arr ay ints intlist new int create array hold t array ﬁxed length set time created nd changed intlistrefers array length array given th e variable element array intlist intlist attempt useintlist whereiis outside range generates error typearrayindexoutofboundsexception initial value array element binary zero s numeric value falsefor boolean andnullfor object array created initialized hold arbitrary val ues time created using syntax intlist new int version newoperator creates array intsof length initially hold speciﬁed value initialization array ne variable declaration list value enclosed required string command new open close save save appendix programming language java come standard class deﬁne common d ata structure including linked list stack queue tree hash table deﬁned class package class deﬁne generic parameterized type work variety element type example object type linkedlist string list item type string unfortunately possible use class primitive type linked list int linkedlist integer object type integeris wrapper primitive intvalue commonly used generic data structure s thearraylist like array arraylist contains numbered sequence item arraylist grow shrink example create arraylist hold object type point arraylist point pointlist pointlist new arraylist point creates initially list method pt used add point end list increasing length value number item currently list method return element list pt replaces element pt similarly remove element decreasing length list method error occurs ifiis range possible build linked data structure directly remembering value variable type given class nullor pointer object example linked list integer value created using object d eﬁned simple class class listnode int item integer list listnode pointer node list null end useful data structure course scene graph like one discussed insubsection implemented sample program api node scene graph represented object belonging class scenegraphnode subclass class example compoundobject represents graphical object subobjects need store po inters subobjects conveniently stored arraylist drawing compoundobject just mean drawing subobjects class deﬁned follows class compoundobject extends scenegraphnode arraylist scenegraphnode subobjects new arraylist sc enegraphnode compoundobject add scenegraphnode node node return void dodraw g scenegraphnode node subobjects g theforloop class speciﬁc java iterates utomatically object list appendix programming language window event java come set standard class working win dows event mention common try tell unders tand work sample program book writing program scratch require knowledge class discus sw ing gui api contained package program begin following importdirectives make class contain available import import import window represented object class jframe jframe hold menu bar large content area known content c ontent pane belongs subclass jpanel ajpanelcan used way drawing surface container component button text input box n ested panel panel used drawing surface deﬁned subclass includes paintcomponent method paintcomponent method called panel ﬁrst appears screen need redrawn task com pletely redraw panel parameter type graphic graphic context used drawing take form public void paintcomponent graphic g thepaintcomponent method discussed section general alldrawing method paintcomponent called redrawingisnecessary acallto paintcomponent canbetriggeredbycallingthepanel s repaint method opengl programming chapter andchapter use gljpanel subclass jpanel case drawing display method instead paintcomponent repaint trigger redraw subsection panel used container component component usually created added panel constructor s pecial routine called initialize object object created newoperator constructor routine recognized fact class contains return type size position component panel gene rally set layout manager object implement policy laying component container example borderlayout layout manager put large component center panel space additional c omponents north south east west edge panel gridlayout lay component row column component having size addition nest ed panel possible component type include typical interface component jbutton jcheckbox andjradiobutton example thing sample program gui program able respond event including event generated user manipulates mouse keyboard high level event generated user selects item menu click o n button respond event program deﬁnes method wil l called event occurs java object includes method s aid listen programming language example basic handler speciﬁed interface named mouselistener object implement interface respond mous e event deﬁne method asmousepressed called user press button m ouse mouselistener deﬁnes ﬁve method class implement interf ace form class mousehandler implement mouselisterner public void mousepressed mouseevent evt respond user press mouse button public void mouseclicked mouseevent evt public void mousereleased mouseevent evt public void mouseentered mouseevent evt public void mouseexited mouseevent evt themouseevent parameter method object cont ain information event example called method ﬁnd xandycoordinates mouse event usually associated component called t target event example mouse press event associated componen t contained mouse user pressed mouse button button click event as ociated button clicked receive event component program r egister object component example want respond mo use click jpanelnamed panel need create mouselistener object register panel mousehandler handler new mousehandler create li stener handler register panel case create class nested class deﬁne event listener need class implement interface sometim e let main class implement listener interface public class mypanel extends jpanel implement mouseliste ner inside class panel listener ob ject special variable refers object register panel listen mouse event say statement shortened simply addmouselistener event type work similarly mouse event type ne ed object implement listener interface event type need r egister object listener component target event themousemotionlistener interface deﬁnes method handle event genus ted user move drag mouse separate mouselistener interface sake eﬃciency responding action usua lly requires object act mouse listener mouse motion listener thekeylistener interface used handling keyboard event event g enerated user press key user release key ke yboard kind event generated user type character typing charac ter upper case generate event ll programming language theactionlistener interface used respond variety user action actionevent generated example user click button sel ect command menu change setting checkbox used conte xt event doesn t come user timeris object generate sequence actionevents regularly spaced interval actionlistener respond event implement animation sample program finally note jogl us event listener type gleventlistener working opengl use explained subsection c programming language ci oldest programming languagethatwewillencounterinthisbook itsbasicsynta x adopted language including java ja vascript opengl shader language c basis o language c diﬀerent java larg e c familiar reader book really master c need know mething familiar part experience c limited using linux use gcccommand compile c program want use gccon window consider installing linux subsystem window http orcygwin http formacos youcanwritecprogramsusingapple sxcode development tool using cygwin xcode tool opengl pr ogramming brieﬂy covered insubsection language basic c program consists collection function global v ariables spread multiple ﬁles subroutine c referred s function return value exactly function main routine deﬁnition generally take form int main int argc char argv main program code execution program begin main function java parameter main containinformationaboutcommandlineargumentsfromthec ommandthatwasusedtoexecute program c s implementation po inters array discus later parameter omitted deﬁni tion ofmainif program need return value main sent operating indicate program succeeded value indicates success value indicates error occurred c make distinction deﬁning variable functi declaring variable function deﬁnition declared number time variable function declared used doe deﬁned used deﬁnition declaration c com piler look ahead search declaration precisely enc ounters undeclared variable assume type int encounter undeclared function try deduce declaration want appendix programming language function deﬁnition take form similar method deﬁniti java return type function speciﬁed return type voidis used function doe return value type parameter speciﬁe example int square int x return x x deﬁnition declaration declares square declare function deﬁning leave body function called prototype function int square int x variable typical variable declaration int x deﬁnition variable variable declaration deﬁnition add word extern example extern int x probably won t need know reason distinction declaration deﬁn ition c program consist ﬁles ﬁle compiled dependently c compiling ﬁle look ﬁle true ﬁles compiled single command ﬁle want use function variable t hat isdeﬁnedin ﬁle b ﬁle include declaration function variable type referen ce usually handled using header ﬁles include directive include directive ﬁle tell compiler include copy text cluded ﬁle code compiles header ﬁle typically end contains declaration example c source ﬁle want use standard utput use following directive beginning ﬁle include ﬁle standard header ﬁles installed c compiler standard header include common mathematical function string manipulation function miscellaneous function including memory management function compiler look current directory head er ﬁles include directive header ﬁle enclosed quotation m ark instead angle bracket example include write ﬁle contains function meant use o ther ﬁles usually write matching ﬁle containing declaration fun ctions ﬁles make program compiled t hey linked complete program gcccompiler doe linking automatically default evenifalloftheﬁleshavecompiledsuccessfully therecan stillbelinkerrors alinkerroroccurs deﬁnition variable function en declared deﬁnitions thing diﬀerent ﬁles function d eﬁned standard library need link program appropriate librarie s using option gcc compiler example program us function th ﬁle linked library named m like gcc diﬃcult know library need linked mo t sample c program comment tell compile link program programming language note compiling gcc default o f compiled program option gcccommand used specify diﬀerent compiled program example gcc compiled program compiled program used like command linux macos run program command line using command needed run command current directory use path command c basic type java char short int long ﬂoat double noboolean type integer used booleans representi ngfalseand value representing true byte data type chari essentially integer type used place byte guarantee number bit used numerical data type usually intmeans integer long mean integer type including char marked signed unsigned unsigned type positive value example signed char value range unsigned char value range charthe default integer type signed forchar default speciﬁed standard c proﬂigate converting numeric type anot don t worry note avoid ambiguity c data type opengl deﬁnes set data type glﬂoatandglint completely correct use opengl program place c s usual type name operatorsandexpressionsaresimilarinc java andjavasc ript asinjava integerdivision c produce integer result c doe e string concatenation operator fact c operator string string concatenation using function strcat ﬁle operator used pointer c way analog java java cript header ﬁle c s standard function mention function printf output text command line useful writing debugging message essentially func tion java example printf square root d x sqrt x function sqrt x way deﬁned header ﬁle mathematical function sin x co x ab x c ab x int absolute value use fabs x control structure c similar java java cript exception theswitchstatement c work integer character value t try catch statement depending c compiler abl e declare variable loop int original version c type comment start ing ending modern c allows single line comment starting compiler accept comment programming language pointer array programmer experience java javascript hardest thing used c use explicit pointer purpos e need know little unary operator used pointer want use dynamic data structure c need know quite bit m c data type int represents pointer value type int memory address memory location address sumed hold value type int ifptris variable type int ptrrepresents integer stored address whichptrpoints ptrworks like variable type int use expression fetch value integer memory assign valu e change value memory example ptr conversely numis variable type int numrepresents pointer point num value numis address memory numis stored note numis expression type int numis num expression numcan read pointer num address course operator work type just w ithint data type named void represents untyped pointer value type void pointer point memory regardless stor ed location pointer type used function parameter po inter memory location passed function parameter function c hange value stored memory location example consider void swap int int b int temp b b temp parameter aandbare type int actual value passed function type suppose xandyare variable type int int x y xand yare pointer int passed parameter swap swap x y inside function ai pointer x make aanother similarly bi example statement b copy value yintox net result swap interchange value stored xand iny java javascript impossible write similar method swap value integer variable note way declaration int associated arather int intent declaration say arepresents int make aa pointer int legal misleading write declaration asint misleading int b declares ato pointer int b int declare pointer say int b array pointer closely related t possible use array worrying pointer example create rray ints sayappendix programming language int note associated variable type int declaration use array element s integer variable array c automatically initialized t content new array unknown provide initial value array declare example statement int b creates array length containing number listed tween provide initial value array specify ar ray size taken list value array doe remember length protection trying access array element actually lie outside array address operator applied array element fo r example bi array declaration b address location memory b stored value b andb swapped calling swap b b array variable considered pointer array t hat value array variablebis address array memory mean band b furthermore pointer variable used arra example pi type int thenp integer memory integer ppoints deﬁne int p b thenp b p b expression form wherepis pointer ni integer represents pointer value pointer point item pin memory type item referred type ppoints example pi point integer integer prefers value integer note integer referred p fact p n considered shorthand probably take farther c want ll mention operator applied pointer variable eﬀect advance pointer item forwa rds backwards memory string c essentially array charbut usually thought type char pointer char convention string end null character scii code mark end string necessary becaus e array deﬁned length null character inserted automatically st ring literal initialize variable type char string literal char greet hello world character string given greet greet greet value greet zero mark end string string manipulation using function deﬁned standard header ﬁle example test string equal u sestrcmp copying string function strcpy working string c quite tricky string represented pointer arra y c doe error checking null pointer bad pointer array index programming language way explain parameter main routine int argc char argv parameter argvof typechar array string mean array mean string array hold command wa s used run program withargv holding program rest array ho lding command line argument value ﬁrst parameter argc length array data structure c doe class object doe way represent complex data type struct struct similar class contains variable method way grouping variable unit exampl e struct color float r float g float b deﬁnition struct color type used declare variable parameter return type function example struct color bg declaration bgis struct ﬂoatvariables referred avoid having word struct type s truct datatype declared using typedef typedef struct float r float g float b color deﬁnes color struct color type variable declared color bg useful work pointer structs e xample make pointer struct bg color ptr bg deﬁnition ptris bg variable struct referred ptr ptr ptr parenthesis necessary operator higher precedence variable b e referred r g b used access variable struct operator used instead period operator implement dynamic data structure c need able allocate memory dynamically java javascript using t henewoperator c doe usenew instead function malloc n declared standard header ﬁle parameter mallocis integer speciﬁes number byte memory allocated return value pointer type void point newly allocated block memory void pointer assigned pointer variable furthermo appendix programming language c doe garbage collection responsi ble freeing memory allocate using malloc using free ptr ptris pointer block memory freed discus dynamic da ta structure present short program used program us linked list represent stack integer include printf function include malloc free function typedef struct node listnode predeclare listnode ty pe used type struct node int item item list listnode pointer item list listnode list pointer head list initially null void push int item add item head list listnode newnode pointer new node hold item newnode malloc sizeof listnode allocate memory fo r node sizeof listnode number byte value typ e listnode item item list list newnode make list point new int pop remove return item list int item item item returned listnode oldnode list save pointer node deleted list advance list pointer item free oldnode free memory used deleted node return item int main int push power list push list pop print list item reverse order printf pop complex data structure scene graph conta diﬀerent kind node structure need advanced te chniques approach design struct includes following data common ll node data structure integer code number say possible ki nd node void pointer link extra data needed node type using avoid pointer mean point kind data structure code number tell interpret data point better alternative using void pointer learn union appendix programming language similar struct useful representi ng multiple data type real solution want work complex data struc tures use instead javascript programming language javascript programming language created use web page recently aversionknownas am general programming javascript ﬁrst devel oped netscape predecessor firefox web browser time java wa s introduced javascript chosen ride tide java s increasing p opularity spite similar name language quite diﬀerent actually ther e standardized language named javascript standardized language oﬃcially called e cmascript widely used practice version javascript actua l web browser don t necessarily implement standard exactly traditionally diﬃcult programmer deal w ith diﬀerences javascript implementation diﬀerent web browser lmost modern browser implement feature discussed section speciﬁed ecmascript known notable exception internet explorer predecessor microsoft s edge browser really longer used page short overview javascript really wan t learn javascript consider book javascript deﬁnitive guide seventh edition david flanagan core language javascript closely associated web page general purpose language used place core language n othing web page particular begin looking core javascript looser syntax java exam ple use semicolon required end statement unless anoth er statement follows line like case loose syntax rule lead s ome unexpected bug line legal statement considered complete statemen t line start new meant line continu ation statement burned fact code form return long string return ﬁrst line legal statement valu e line considered statement result function turned returning value depends fact javascript accept expression string second line statement evaluating expre ssion doesn t eﬀect variable javascript typed decl variable don t declare type variable refer data ny type variable usually declared using keyword let optionally initialized declar ed let x y let david variable value changed initial ized declared using const instead var appendix programming language const david variable declared keywor dvar var x y possible declare variable using var butletandconstare preferred peculiarity using varis ok javascript use declare vari able declaration just say variable exists javascript allows use variable declari ng doing good idea prevent use undeclared variable certain unsafe practice including following statement begi nning program use strict variable don t type value value b e number string boolean object function couple exotic thing variable assigned value special value undeﬁned fact function used data value surprise later d etermine type value using typeofoperator expression typeof x return string tell type value ofx string undeﬁned number string boolea n object function bigint symbol bigints symbol discus ed section note typeof return object object type including array typeof null object javascript string considered primitive data type object type string compared using operator content string compared chartype represent char use string length string ca n concatenated operator like java string literal enclosed double quote single quote starting thereisalsoakindofstringliteralknownasa templatestr atemplatestringisenclosedin single backquote character template string includ e javascript expression value expression inserted string fo r example xi y statement result product x y x y assigns string product result furthermore template string include line feed provide easy way make long m ultiline string backquote backtick key left corner keyboa rd strict distinction integer real n umber type number javascript unlike java c division inte gers produce real number javascript java boolean type literal value trueandfalse actually use type value boolean context t est javascript x value xas boolean considered false xi number zero string nullor isundeﬁned eﬀectively type value converted implicitly t o boolean fact javascript doe implicit conversion expect example comparing number string using operator java script try convert string number value istrue value alsotrue case javascript convert operand bool ean behavior want javascript operator th similar programming language type conversion operand example isfalse general preferred operator equal ity test javascript try convert string number multiply divide subtract string add ca e interprets operator string concatenation convert number string javascript doe exists java h owever use number string andboolean conversion function example x number y attempt convert yto number apply example yi string conversion fails value xwill benan special number value indicating number function convert string zero mathematical function javascript deﬁned mathobject similar mathclass java example function x x x x mathematical constant function return random number range including excluding javascript control structure similar java o r c including andswitch javascript try catchstatement handling exception similar java s variable untyped catchblock doe declare type exception say catch e catch exception e example init function sample program error generated using throwstatement type value thrown example throw st ring represents error message throw sorry value illegal preferable throw object belonging classerroror subclass throw new error sorry value illegal function javascript deﬁned using function keyword variable untyped return type declared parameter hav e declared type typical function deﬁnition function square x return x x function return type value return nothi ng like voidmethod java fact function return value good style javascript doe require numb er parameter function match number parameter deﬁnition function provide parameter function extra paramete r function deﬁnition value undeﬁned check function testing typeofthe parameter undeﬁned good reason doing make s possible optional parameter example consider function multiple str count typeof count undefined count appendix programming language let copy let count copy str return copy value provided count function multiple boo countwill set note way declaring variable function ingletorconstmakes local function generally block d eclared declaring using var make local function block d eclared possible provide default value parameter used function doe include value parameter f value provided undeﬁned example function written function multiple str count default value count let copy let count copy str return copy provide extra value function using mething called rest parameter parameter parameter list p receded dot function f x y z extra parameter gathered array value rest parameter inside function example make possible write sumfunction take number input value function sum rest let total let total rest return total deﬁnition sum sum sum value function zero older technique dealing variable number par ameters use special variablearguments function deﬁnition argument object contains value parameter passed functi possible deﬁne function inside function t nested function local function nested used insi function let deﬁne helper function inside function us nstead adding helper function global namespace function javascript ﬁrst class mean s function treated regular data value sort thing m data assign variable store array pas paramet er function return function fact common th ings appendix programming language deﬁne function using deﬁnition like one th e example shown s assigning function variable exa mple given deﬁnition function sum assign sumto variable pas parameter assigning passing function value var iable function use variable just use function t function let f sum f calling sum diﬀerence deﬁning function assigning variable function deﬁned function deﬁnition used program th e function deﬁnition start executing program computer read entire program ﬁnd function deﬁnitions contains assignment statement hand executed computer get executing program javascript like function th way writing function data value just point need witho ut giving deﬁning standard function deﬁnition function ed anonymous syntax anonymous function older syntax l ooks like function deﬁnition example anonymous function c reated passed ﬁrst parameter function named settimeout settimeout function alert time s thing anonymous function requi deﬁning standard named function going used function alertfunc alert time s settimeout alertfunc second syntax anonymous function new arrow function take form deﬁnition example alert time x y return exactly parameter parenthesis par ameter list omitted statement brace deﬁnition omitted single statement returnstatement word return omitted arrow function x x x arrow function like function assigned variable passed parameter returned r eturn value function example settimeout alert time functionscanbeassignedtovariablesandpassedaspar ameterstofunctions anonymous function similar rrow function added java form lambda appendix programming language array object array javascript object includes m ethods working array element array type fact diﬀerent e lements array diﬀerent type array value created list value enclosed square bracket example let let b foo bar let c line example creates array itially length zero array created using constructor speciﬁes ini tial size array let d new array space element initially element dall value undeﬁned length array ﬁxed make javascript arr ays similar java arraylists java c array ai array current length thepushmethod used add new element end array creasing length popmethod remove return item fact legal assign value array element doe ex ist let e e length e e length example value assigned e length array increased make large hold new element modern javascript alternative version forloop particularly useful array take form let v whereais array vi loop control variable body loop loop control variable t akes value element ofain turn add value array number y ou say let total let num total total num num item array ﬂexibility standard javascript array ar e eﬃcient working array number modern web browser deﬁne typed arra y numerical application example array type hold value integer typed array used extensively webgl covered thi s book needed javascript object class class ar e exactly equivalent java thing possible object wi thout class object essentially just collection pair ke y like instance variable method java associated value ter m instance variable usually used javascript preferred term property value property object ordinary data val ue function just type data value javascript possi ble create object list pair enclosed example appendix programming language let pt x y let ajaxdata url http data onsuccess function alert worked onfailure function error alert sorry failed e rror deﬁnitions ptis object property value value ajaxdata object property including value function created anonymous function function object referred method object ajaxdata contains method onsuccess andonfailure object open sense add new property existing object time just assigning value example given object ptdeﬁned say add zas new property object initial value object created using constructor construct function called using newoperator create object example let new date call constructor date standard javascript dateis class new date creates object type date called parameter new date construct object represents current date ti new class created using classkeyword class deﬁnition contains list function deﬁnitions declared function keyword class deﬁnition include special function named constructor serf constructor class constructor function actually called th enewoperator used class function deﬁnition property t object referred using special variable property added object assigning value t o constructor class constructor x y construct object type property x y parameter x y constructor default val ue typeof x number typeof y number throw new typeerror coordinate point numb er x y dx dy defines method property object dx dy deﬁnition possible create object type object property named xandy method named example appendix programming language let p new let q new add new property new class extend existing class s ubclass class option covered foll owing simple example class extends constructor x y z typeof z number throw new typeerror coordinate point numb er super x y constructor creates x z add property z dx dy dz override definition thod dx dy superclass typeof dz undefined allows called just parameter dz foramoreextensiveexampleofclassesandsubclasses theclasskeyword new javascript class h owever earlier version javascript class simply deﬁned constr uctor function constructor function function called new operato kind class used worthwhile look work constructor function written like ordinary function convention constructor function begin upper case letter structor function deﬁnes class whosenameisthenameofthefunction forexample let ssee howtouseaconstructorfunction instead classkeyword deﬁne class function x y typeof x number x typeof y number y function dx dy dx dy appendix programming language called newoperator new function create s object property x y andmove property created assigning value constructor function object created e sentially object created using class deﬁned note movemethod couldnotbe deﬁned using arrow function special var iable appropriately deﬁned body arrow function deﬁnition movemethod example best way possible problem object type get copy code deﬁnes moveis duplicated object created solution s use called prototype function farther detail javascript tha n really need work object prototype object property prototype considered property object unless object given property object prototype object share property prototype object creat ed constructor function prototype constructor prototype ne w object creates mean property added prototype structor function shared object created function inst ead assigning value constructor function following outside deﬁnition function function dx dy dx dy property prototype shared object t case single copy movein prototype used object resul t class essentially class deﬁned using t heclasskeyword javascript web page way include javascript code web page html ﬁles include inside script element form script javascript code go typeattribute ﬁrst line script attribute speciﬁes programming language used th e script value default typeattribute required javascript script script module indicating modular javascript program module new feature make possible bre ak large program component control sharing variable com ponents module used graphic library covered brieﬂy chapter used textbook second way use javascript code separate ﬁle usually ending import ﬁle web page jav ascript ﬁle imported using variation script tag formappendix programming language script replaced url relative o r absolute javascript ﬁle closing tag required mark end script isnot permitted code inside script element ignored importing javascript code ﬁle way eﬀect typ ing code ﬁle directly web page script element type included head section html ﬁle actually occur point ﬁle use num ber script element page script include statement function c alls assignment statement variable function declaration way use javascript web page event handle r occur inside html element example consider doclick web page onclickattribute deﬁnes event handler executed user click text element value event handler attribute onclickcan javascript code include multiple statement se parated semicolon extend line code doclick clicking element cause javascript function doclick called note way attach event handler element considered best style alternative mention later thing way important understand javascript code script element including code imported ﬁles read executed page bein g loaded usually code script consists variable initialization nd deﬁnitions function meant called page loaded response ev ents furthermore script page program example deﬁ ne variable function script imported ﬁle use script javascript web page standard function tha t allow interact user using dialog box simplest alert message display message user popup dialog box ok button u ser click dismiss message function prompt question display question dialog box input ﬁeld user enter response promptfunction return user s response return value type dialog box come ok bu tton cancel button user hit cancel return value promptisnull user hit ok return value content input ﬁeld string function conﬁrm question display question dialog box ok cancel button return value trueorfalse depending user hit ok cancel example simple guessing game us f unction user interaction alert pick number try guess let number appendix programming language let guess let guess number prompt s guess guess number isnan guess guess guess guess number prompt enter range guess number guess number prompt low try guess number prompt high try alert got guess guess confirm play program us number convert user s response number response parsed number value number value nan function isnan guess used check value guessis special value s possible saying guess nan th e expression nan nan evaluates false way true value jav try javascript code javascript console th available web browser chrome browser example access console menu tool developer tool click console t ab developer tool web console chrome window w ith javascript input prompt console detached separate wind ow type line javascript press return executed value output console code evaluated context current web page enter command aﬀect page web console show javascript error s occur code current web page executed javascript code write message console calling message make console useful debugging bro wser tool include sophisticated javascript program debugger browser similar developer tool javasc ript console firefox look web developer tool web developer menu safari browser use javascript console develop menu note th develop menu enabled safari preference advanced t ab edge browser access developer tool hitting key error occurs web page don t notiﬁcati output console script doesn t working ﬁrst thing open console look error message ing javascript development want console open interacting page javascript code web page manipulate content t style page dom document object model web pa ge loaded everythingappendix programming language page encoded data structure deﬁned dom accessed javascript collection object way s reference object discus element web page anidattribute example img pic mainhead page id unique page element unique ly identiﬁed id element represented dom object element id obtain reference corresponding dom object passing id funct example let image pic let heading mainhead dom object use manipulate ele ment represents example content element given innerhtml property object value string containing text html code exam ple value string page furthermore assign value t o property doing change content element example best page doe just change value property obje ct actually change text displayed web page odd mayb e little creepy programmer new javascript s assignment st atement eﬀect s way dom work change dom data struc ture represents web page actually modify page change display web browser attribute element property object s represent true srcattribute image element example coul d say change source image element live assignment assignment statement executed image web page c hanges reader know cs note dom object eleme nt property namedstylethat object representing cs style ob ject styleobject property color backgroundcolor andfontsize representing cs property assigning value property change app earance element page example red command make text element red larger usual value style property string legal value corresponding cs style interesting line propertie s input element make possible program interaction user suppo se html source web page haveappendix programming language input text textin select sel option option option option option option input checkbox cbox javascript let textin textin let sel sel let checkbox cbox value property boolean tested determine checkbox checked value trueorfalsecan assigned check uncheck box programmatically value boolean tell checkbox disabled th e user t change value disabled checkbox test set val ue property thing select menu text input box property represent current value element value text input text currently box value select element value currently selected option example comple te source code web page implement guessing game using text input box button doctype html html head title guessing game script use strict let number let guesscount let guessmessage guess far function guess let usernumber number guess guess isnan usernumber usernumber usernumber question bad input br try integer range usernumber number question got guesscount usernumber br picked number make guess number guesscount guessmessage guess far message usernumber number appendix programming language question usernumber br try guessmessage usernumber message guessm essage question usernumber br try guessmessage usernumber message guessm essage body p question pick number br try guess guess p input text guess button guess make guess p message s problem discussion suppose script us function dom object html element script executed page ﬁnished loading element th trying access exist remember script executed p age loading course solution function executed response event occur page loaded s w hat did previous example want assign dom object global vari able possibility script end pag probably work common technique assignment function arrange function run page ﬁnished loading b rowser ﬁnished loading page building dom representation ﬁres loadevent arrange javascript code called response event comm way doing add body tag body init function named init page loaded function include initialization code program need deﬁne similar element example input select element supply onchange executed user change value associated element ows respond user check unchecks checkbox selects new option se lect menu s possible include event handler element th e html tag creates element did body onload event s preferred way set event handling thing mixing javascript code ht ml code considered bad style alternatively way inst event handler using programming language suppose checkbox dom object representing check box element probably ob tained object property named onchange represents checkbox s onchange event set event handling assigning function property checkboxchanged function want user check unchecks box use javascript mmand checkboxchanged use anonymous function function alert checkbox changed note value function string javascript code way set event handling javascript th eaddeventlistener function technique ﬂexible allows set event handler event function method dom element ob ject using checkbox example change checkboxchanged false ﬁrst parameter addeventlistener string give event event attribute html wit h stripped oﬀ onchange change second parameter function called event occurs given function anonymous function parameter harder explain pur pose false remove event listener element calling parameter used theloadevent associated predeﬁned object named window instead attaching event body tag say init load init false similarly onmousedown event deﬁned element handler event attached dom element elem assigning function calling mousedown handler false common event include onmouseup onmousemove onclick andonkeydown anonkeydown event handler responds user press key keyb oard handler attached document object dokeypressed function parameter contain s information event example mouse event using evtas parameter location mouse browser window hand ler theonkeydown event numeric code key pressed event handling complicated subject given onl y short introduction ﬁrst step learning event javascript yo u look html source code sample web page programming language javascript promise async function section introduces new feature javascript promise andasync function feature increasingly common javasc ript apis particular used webgpu covered chapter note used textbook javascript promise represents result avail able time result available promise fulﬁlled said happens result returned case t result simply knowledge promise waiting occurred mething happens mean promise fulﬁlled promise said reje programmer provide function called promise resolve reject promise replacement callback function callba ck function function provided programmer called later happens example standard javascript function settimeout callbackfunction timetowait thecallbackfunction called timetowait millisecond settimeout function executed important point settimeout return immediately simply set callback function ca lled future thing applies promise program doe wait promi se resolve reject simply arranges happen later thi ng occurs typical programmer likely use promise created api create directly likely use promise theawaitoperator async function use directly cover ca e ﬁrst async function await theawaitoperator used retrieve result promise promise resolved instead promise reject awaitoperator throw exception syntax anawaitexpression simply promise promise resolve result t value expression example webgpu api subsection let adapter await return value promise promise resolve result promise value awaitexpression value assigned adapter important thing understand awaitdoes actually stop wait doe bring javascript program halt waiting instead function contains awaitexpression suspended result available whil e part program continue run theawaitoperator used inside async function o ne deﬁnition marked async async function await used appendix programming language async function called immediately executed ﬁrst occurrence await function deﬁnition point execution su spended promise resolve reject resolve execution resume contin ues await point promise reject instead resolving exception thrown caught handled usual way function doe ret urn promise awaitexpressions resolved exception cause f unction exit note necessarily function called async function suspended function async amount await expression li ke ordinary expression async function like ordinary function w ritten used way make promise easier use callback function usage big advantage fact async function su spended introduces new source potential problem remember unre lated thing happen middle async function let s look speciﬁc example fetch api api ret rieving ﬁles internet extra work fetch ﬁles fro m source web page used urlis url ﬁle function fetch url return promisethatresolveswhentheﬁlehasbeenlocatedorreject swhentheﬁlecannotbefound expression await fetch url wait ﬁle located return result curiou sly ﬁle located necessarily downloaded response object returned await fetch url function return promise resolve content ﬁle available value await ﬁle content function retrieve text ﬁle place c ontent element web page written like async function loadtextfile textfileurl let response await fetch textfileurl let text await textdisplay te xt work throw exception example ccess ﬁle allowed ﬁle exists want catch exception furthermore time ﬁle thing happen pro gram function waiting particular user generate t maybe event causesloadtextfile called diﬀerent url ﬁle s downloaded appear web page shouldappear web page sort mess doing pa rallel programming fair similar sort mess using callbac k function harder untangle mess let ssaythataﬁledownloadistriggeredwhentheuserclick sacertainbutton onesolution mess disable button w hile download progress prevent download started impro ved version program like async function loadtextfile textfileurl downloadbutton true textdisplay l oading try let response await fetch textfileurl appendix programming language let text await textdisplay te xt catch e textdisplay t fetch textfileurl error e finally downloadbutton false nice thing async function look essentially th e regular javascript function potential trap ﬂow control pr ogram us async function diﬀerent regular ﬂow control regular function run beginning end interruption using promise directly theawaitoperator make promise fairly easy use alwa y appropriate javascript promise object belonging class named promise method class make possible respond promise resolve s reject somepromise promise onresolve function onresolve schedule onresolve called promise resolve parameter t hat passed onresolve result promise note essentiall y using callback function return immediately onresolve called indeterminate future time parameter t othen anonymous function example assuming textpromise promise eventually produce string str alert hey just got str technically return value onresolve callback onresolve promise wrap retu rn value promise immediately resolve value promise r eturned onresolve return value mean chain return value example let s rewrite loadtextfile example using basic version function loadtextfilewiththen textfileurl fetch textfileurl response text textdisplay innerhtml text fetch textfileurl return promise attach promise anonymous function response called value parameter response result produced fetch textfileurl resolve return promise promise return value t ﬁrstappendix programming language second attached promise callback function th e secondthen called parameter result produced promise note loadtextfilewiththen async function doe use await called return immediately waiting th e text arrive wonder happens promise reject th e rejection cause exception exception thrown indetermina te future time promise reject fact take optional second parameter callback functi called promise reject lik ely respond rejection using method promiseclass onreject parameter onreject function called promise reje ct whencatch attached chain call promise chain reject parameter onreject error message produced promise reject catch catch kind exception generated promise finally method promiseclass schedule callback function called end chain callback functio n parameter finally take parameter improve exampl e follows function loadtextfilewiththen textfileurl downloadbutton true fetch textfileurl response text textdisplay innerhtml text e textdisplay nerhtml t fetch textfileurl error e downloadbutto n false generally try use async function awaitwhen possible occasionally use andcatch ﬁnd using apis probably need create y promise topic covered b blender modeling program blender free graphic program large community user isaverycomplexandsophisticated program advanced modeling rendering tool c used produce professional graphic animation appendix look just small s ubset feature blender downloaded site includes great deal information use including detailed user manual included work blender computer g raphics course supplement graphic programming main t opic course use small blender s capability believe t useful student experience interactive modeling help deve lop ability visualize dimension let role fundamental ncepts transformation lighting material texture play real applicatio n people intimidated ﬁrst blender s complex interface s actually diﬃcult learn use basic task relevant textbook m y student enjoyed using gone learn use ﬁnal pr oject appendix written blender st ill valid blender current version july blender add new feature improved performance user interface basic feature discussed t appendix changed blender basic blender unique interface consistent window macos linux work best fairly large display m ouse scroll wheel mouse work mouse button numeric keypad useful recent version blender functionality usable wit h just left mouse button basic keyboard knowing shortcut make easier work eﬃciently section discusses fundamental aspect gr aphics work blender including geometric object transformation light mat erial texture section basic introduction concept al ready read relevant chapter book blender start ﬁrst time chance sel ect customizations assume using default include u sing left mouse button selecting thing blender view blender window divided section s called area contains area changed editor using menu shown left area illustration d rag corner area vertically horizontally split area join neighbo ring area dividing line area select split j oin command popup menu area turn divided cust omized layout central area window large view editor show view world working startup contains simple default scen s look like reduced typical size annotation s content area rotate ª ª drag click x y z view axis camera selected object point light cursor drag zoom view drag translate view click view camera click toggle orthogonal perspective viewmanipulators drag rotate zoom tool click drag select object cursor tool click menu adding object scene select editor type view make rendered image scene image won t point view thing view visible rendered scene cube camera represents point view rendered image poi nt light provides illumination scene thing view help edit scene help understand seeing hide various part view example pressing t key toggle visibility toolbar left n k ey toggle control panel appears right shown illustration pa nel example let enter position scale rotation selected object num erically important note blender key press sent editor contains t mouse cursor typing text input box mean t hat mouse cursor view key press sent editor pr essing key doesn t expect check position mouse cursor change view world view b y clicking dragging control right edge view shown illustration way control view rolling mo use s scroll wheel mouse view zoom view dragging middle mouseappendix blender button usually mean pressing holding sc roll wheel dragging rotate view middle mouse butto n translate view number key keyboard s numpad aﬀect view select view coordinate ax rotate view selects v iew camera toggle perspective orthographic projection n zoom selected object object using numpad make sure t hat numlock enabled keyboard keyboard trick lost view just hit home key bring object view want clear away visual clutter just work object select object object want work hit key view zoom selection oth er object hidden hit key return usual view toolbar left edge view determines l eft mouse button used default tool select tool click object select click drag draw box select object intersect box hold t shift key selecting add current selection note area right blender window contai n scene graph view current scene called outliner editor blender select object clicking name scene graph view nvenient object want select hidden view using second tool cursor tool click s et position cursor set position ng tool cursor discussed later section tool used selecting object bu t add manipulator selected object group object manipulator used transform object manipulator translating rotating sca ling object look like cube example using translation manipulator dra g arrowhead translate object direction coordinate ax y ou drag white circle translate object plane view b lender interface element hover mouse manipulator doe comfortable keyboard shortcut ar e way transform object changing tool using selec t object object want transform apply transformation follows g key g stand grab mouse holding mouse button object plane screen click theappendix blender left mouse button ﬁnish click right mouse button abort hitting return ﬁnish hitting escape abort hitt ing g key hit x y z constrain motion axis note particula r cannotsimply object s key holding mouse key th e mouse away object change size size change al l dimension end operation way g key hitting s hit x y z scale object direction axis hi t scale direction perpendicular axis r key holding mouse key th e mouse rotate object line perpendicular screen click left mouse button ﬁnish end operation way g key hit r second time freely rotate object hitting r hit x y z rotate object speciﬁed axis real confused don t remember pr es left right mouse button complete transformation operation t operation completed rotating scaling translating hold control key limit change integral amount translating multiple degree rotating use arrow key make small adjus tments operation applied camera just y applied object rotate camera view th e world want render image apply transformati ons camera camera view numpad long camera selected o bject good way exact view want rendered image adding object scene changing view doe modify content world t o need editing operation adding object world cursor come cursor labeled image view editor newly added object added world position cursor prefer just leave cursor origin object position add position cursor beforeadding object clicking view select cursor tool tool bar left edge view use position cursor cur sor exists space t tell looking world j ust point view typically check position cursor vie wpoints rotating view using numpad key switch view way position cursor snap menu pressing mouse cursor vew win dow remember mouse view keystroke sent ed itor blender s strange circular menu pop position mou se cursor option select press left mou se button ﬁnd normal snap menu submenu popup menu g et view snap menu contains command positioning cursor forappendix blender positioning object example use cursor world orig cursor point cursor position use add menu dd object world pop add menu mouse position hitt ing ﬁnd header view add menu subm enus adding type object suggest stick mesh object t ﬁrst mesh surface polygon curve line segment various sh object available mesh submenu add menu example uvsphere sphere divided segment line latitude longitude icosphere divided triangle plane actually just rectangle ﬁrst start blender t object default scene mesh cube adding certain type object option change add object panel containing option appears t lower left region view just panel click entire panel following image show panel mesh uvsphere change n umber segment ring number subdivision equat sphere number north pole south pole chance t hat set property note set position rotation newly ad ded object typing value thenumericalinputwidgetsinthispanelareexamplesofble nder sfunnyinputbuttons s use button click button type val ue press return click arrow end button se value drag mouse button chang e value note generate uv checkbox uv refers textur e coordinate object need want apply texture object uv sense uv uvsphere refe r u v parameter used input parametric surface todeletethe selected object object just hit x key del ete key x key asked conﬁrm deletion remember t hat mouse cursor window keyboard command l ast time say asyoumodifytheworld youcanundomostoperationsbypress adding deleting editing object redo blender edit mode ordinary transformation operation pplied object want work vertex edge face object use edit enter edit mode selected object press tab edit mode press tab exit edit mode edit mode select individual verti ce group vertex select face selecting vertex face y ou select edge selecting vertex edge scale rotate transl ate selected element usual way s r g key using manipulator d elete thing x key pop large menu action ca n selected element edit mode selected vertex face orange pic ture left show cube edit mode vertex selected second pi cture vertex face selected easier work edit mode using wireframe view instead default solid view hit z key bring circular nu possible view select wireframe default view picture show cube wireframe selection vertex edit mode work way seletion object usual object mode hit key select vertex mac deselect vertex ﬁrst enter edit mode mesh object vertex selected easier select set o f vertex wireframe mode change point view time sel ecting vertex performing operation lot thing t edit mode don t forget press tab key mode way z key used outside edit mode selec t object rendered view used outside edit m ode selecting set object light material texture seen z key used select object rendered view set small button header used select view style default solid view wireframe view lighti ng material don t aﬀect material preview view object mat erials lighting eﬀects rendered view applies lighting point light default scene plus b ackground add like ambient light select transform light jus t like object easyappendix blender way sure lighting visible object place lig ht position camera add additional light using light submenu add menu probably need add light light scene kind light light submenu po int light give oﬀ light direction light initial scene point ligh sun directional light shine parallel ray direction indicated l ine drawn light position view spot spotlight give oﬀ cone ligh need aim sun spotlight object want illuminate yellow dot drag change direction apply rotation sun spot usual way default color object gray change hav e add material object set property material cube t world material new object add don t work material use property editor ﬁnd lower right area window property e ditor allows set kind property object left edge col umn button select group property want work button appe ar depend kind object currently selected pres ent button shown selected object mesh µ roperties select se setting rendering º µ se set global àº áabient ã ä µroperties ã ä å æ e transform µroperties add modi ﬁers ã ä å å º µ roperties º è é å ê ã ä ë æ å erial â se set ê format property rendered aints î se add constraint ã ä µ å àº î se add particle ê ï î ed animation picture material button clicked material button selected rest editor panel right button ﬁlled control setting material property selected object control don t appear material beenappendix blender added object material ne w button property editor click new button add new material obj ect click icon left new select material exists m enu set control appear s just click set material enter material exiting material list ð ñ ò ó ô õ ö õ share tha mø ö ôù ú ø û ü ýþ û ú õß àere delete material û ú õß öo r ô á ôø û ø âù ô áú ô ã mat ôù ú ø û û ä ä ß ú ße û ú õß öä öå ùn node option o ﬀ use basic setting select shader basic material type used click select input color image texture degree subsurface scattering degree material metallic opposed like plastic cloth degree surface set color subsurface scattered light blender s material complex defa ult type material principled bsdf complex prin cipled bsdf try implement physically based rendering using physically realistic ma terials lighting approximation like diﬀuse specular reﬂection prop erties used opengl just use basic setting principled b sdf information material general blender manual cover light material little section input labeled base color just basic color o f material click rbg color chooser pop set color al ternatively color texture discussed thenextmostimportantinputus theinputisanum determines degree material interacts l ight like metal basically metal shiny specular reﬂection color met al specular reﬂection white specular input determines amo unt specular reﬂection note specular color principled bsdf don t fooled specularappendix blender tint sort vi ible eﬀect roughness input tell rough surface si milar opengl s shininess property rougher surface larger specular hig hlights sharp reﬂections labeled control relevant subsurface scatter ing refers fact light enter object bounce emerge diﬀe rent point important eﬀect material like skin milk jade enab le setting subsurface control value greater texture make color property object v ary point point type texture copy color image eﬀectively p ainting image surface object called image texture alternativel y color computed algorithmically coordinate point c alled procedural texture blender type texture s hard use texture base color principl ed bsfd click yellow dot base color select image texture popup note item popup useful click open browse image ﬁle probably need set projection type box sphere accept default setting unfortunately way apply texture transformation using advanced material conﬁguration look like property editor te xture shown cube click yellow dot base color search sæ ç æ è é ê ë ì í î æ ï exture ð ñ ð ò ð ó ô ou clickê õð æ öê browser select selecting image shown setting texture added base color input select image prñ ùæ è é æ ú suface box work best general sphere good sphere similar shape someoftheotherentriesinthepopupareproceduraltexture youmighttrythe checker voronoi noise texture wave procedural textu used make like texture limited grayscale seesection learn add color example using setting shown appendix blender saving work window show position size color obje ct fully rendered scene point view camera hit key return main window hit escape just close render window al o command render menu blender menu thing r emember need render image aspect scene render image image created sav ed save use save command image menu r ender window size image set property editor output property selected ﬁle format set ﬁle browser window s ave image save need choose ﬁle ﬁle syst em blender file browser window fil e browser like rest blender us interface d iﬃcult use shortcut directory listed left edge window saving ﬁle type ﬁle input ﬁeld window save entire blender session use save command n file menu main blender window blender session stored ﬁle e xtension opening ﬁle restore saved state program yo u use save startup file command default submenu file menu blende r save current state program ﬁle home director start blender open ﬁle starting point s ession instead usual initial scene feature allows customize startup env ironment feature covered lot basic ground blender befor e looking advanced modeling animation little background formation useful render engine render engine produce image world blender render engine produce image eevee cycle eevee renderer selected default select cycle s renderer render engine menu render property property editor th e selected render engine usedappendix blender make ﬁnal render scene key e rendered view style view workbench render engine menu used view style view meant pro ducing image eevee fast renderer us opengl includi ng lot trick fancy shader program advanced eﬀects cycle us path tracing whi ch slower produce highly realistic physically accurate rendering section use cycle ﬁnal rendered image expect cycle used rendered view style view doe work produce noisier imag path tracing progressive algorithm mean produce fast noisy imag e add time longer run physically accurate control render properities conﬁguring render process t uning process diﬃcult requires lot knowledge active object object selected object s select object turn active object clicked active object shown lighter oran ge outline selected object selected object m ake active object use property editor view modify property o bject active object working press tab key acti ve object go edit mode parenting object parent allows cr eate hierarchical model drag rotate scale parent chil d object transformed group parent child object transformation group furthermore child object parent o f object hierarchical graphic want group s everal object obvious parent consider parenting objec t object command add menu create parent rela tionship select object object want parent th e active object hit c onﬁrm want make parent select object popup menu dotted line wi ll join child parent view delete parent relationship select ch ild hit select clear parent popup menu duplicating duplicate selected object object hit shif ﬁnd corresponding command menu king view copy exact place original grab mode immediately away original moving mous e clicking moving position smooth shading default mesh object faceted appearance polygon make mesh look ﬂat eﬀect called ﬂa t shading correct want use mesh approximatio n smooth object sphere case want use smooth shading instead select ﬂat shading smooth shading mesh object select object righ view select shade smooth shade ﬂat popup menu setting m esh object use smooth shading doe change geometry object just e diﬀerent normal vector subsection naming inblender object material scene allhave name blenderautomatically assigns generic name create d uplicate object need know s example text c urve feature beappendix blender discussed section make easier identify n object want use meaningful name generally displayed edi table box just click box enter new object displaye d object property property editor click change ﬁ nd object scene graph view upper right area blender window double change screen screen blender customized layout blender wi ndow appropriate editing task middle menu bar blender window set button selecting current screen working small window menu bar default screen talking layout screen default blender start look screen later technique mentioned textbook sign th e right end used add new customized screen scene scene blender world scene conta unique object possible scene share object popup menu blender window use create new scene swi tch scene scene control near right end menu bar set view layer control discus click icon left end control pop menu select scene click center control enter new curr ent scene click icon right add new scene wi ll option popup menu new copy setting create sce ne linked copy create scene contains object current scene w ith transforms object scene move add new object later scene use e xample want set common static background world make scene s diﬀerent actor doing diﬀerent thing diﬀerent scene e nvironment copy make new copy current scene scene lo ok originally really shared data common blender modeling blender wide variety basic shape tool making complex object section discus just possibility modeling shape text blender work text render ﬂat shape shape added blender add text object scene use text command th e add menu text object edit mode pressing tab key wh ile selected use keyboard including backspace arrow key edi t text contains certainly want initial text just word text text object selected button selecting o bject data property property editor show clicking reveals var iou useful control shown picture example button control e text right left center justiﬁed numeric input control character word line spacing shown look paragraph section ob ject data property select font used text blender ly pretty basic font select font ﬁle ﬁle use d instead blender work postscript type true type open type font sel ect font ﬁle click small folder icon font section shown s et separate font regular bold italic bolditalic style menu c ommands available editing text object selecting style default regular style font used way download lot free font google font interesting feature lay text shape curve need curve object create described s ubsection need know curve object want change meaningful select text object object data control text shown box labeled text curve transform section f ont click icon left end box select curve popup menu avai lable curve baseline text curve match shape curve chan ge shape curve scale text follow new shape likely h ave scale text theappendix blender curve ﬁt nicely note text doe jump curve just us curve object s shape curve located cur ve visible rendered image don t want curve vie w turn oﬀ visibility curve scene graph display right area blender window following sample image used bezier circle text curve feature background using circle circle deleted t center used checker texture material background text extrude bevel exactly described subsection curve nice appearance text n image extruded beveled shadow text object background curve blender type curve bezier curve nurbs curv e path just kind nurbs curve add curve sce ne use add curve bezier curve control point handle adjusted change shape curve nurbs curve similar curv e determined entirely control point isn t constrained pas par ticular point nurbs curve known making nice smooth shape nurbs su rfaces default curve doesn t lie p lane usually want curve constrained lie plane make cu rve object data control curve property editor curve selected button object data look like curve connecting point clic k button interior curve ﬁlled point curve set mode object data property curve edit mode control po ints nurbs curve lie alongside curve bezier curve control point end handle attached point curve select contr ol point drag using g key transform bezier curve yo u select point onappendix blender curve drag default end handle li ne making straight line end end move actua lly type handle auto vector aligned free select vertex edi t mode hit v change type handle selected vertex particular fre e allows make sharp corner curve important extend curve adding n ew point start basic bezier nurbs curve circle yo u want curve s best set adding point change t o later forced plane curve edit mode curve edi t mode add new point bezier curve select endpoint curve cking near nurbs curve select end control point add new point ntrol click right mouse button location want new point locat ed new point add connected selected endpoint selec tion point just added make easy add point seq uence time curve closed want close tha t connect end beginning just hit curve edit mo hitting key curve curve actually consist disconnected segmen t add curve curve edit mode add new segment exist ing curve separate curve example add bezier circle scene edit mode add bezier circle inside ﬁrst disk hole removed s background image trans form just segment curve curve edit mode select vertic e segment want transform apply transformation closed curve bound region shown ﬂat s urface render scene curve disco nnected segment s completely clear mean inside curve rule based winding number point mean number time curve encircles p oint curve circle point odd number time point inside curv e curve encircles number time point outside extend region inside closed curve t hird dimension extruding curve look curve s object data control nu merical input labeled extrude geometry increasing value box extend s curve object perpendicularly plane lie bevel section geometry ﬁnd depth box resolution box increase va lue depth box cut edge oﬀ shape extruded curve value resolution box determines rounded edge object right foll owing picture bezier circle inside closed bezier curve edit mod e set extrude depth resolution positive value appendix blender s possible transform text object curve just se lect text object menu select curve convert submenu popup menu note won t able convert curve text object ve converted text curve edit character ou tlines curve furthermore add curve segment text curve lef t object picture created text converted curve edit mo added bezier circle manipulated vertex circle circle sur rounded text inside text eﬀectively subtracted interior circ le proportional editing rest section deal mesh modeling cover small portion option available default transform selected vertex edge o r face mesh object edit mode selected item aﬀected lead ugly spikey object turn proportional editing vertex exerts kind force neighboring vertex example drag vertex nearby vertex p ulled small button header panel view turn o n proportional editing edit mode inthe picture thesmall blue button beenclickedtoenab leproportional editing popup menu right blue button let select kind o f inﬂuence transformed vertex vertex proportional editing turned transform ing vertex circle appears window radius inﬂuence tha t distance force exerted vertex extends change size radius inﬂuence using scroll wheel mouse pageup pagedown k eys following image icosphere edit mode group vertex dr agged white circle show radius inﬂuence vertex t hat radius shifted somewhat direction dragged vertex shape result edit nicer selected vertex blender try selecting vertex equator uv sphere s caling selection proportional editing enabled make like ﬂying saucer shape extruding mesh extrusion powerful method adding geometry mesh extrusion duplicate geometry element vertex edge face th e duplicate attached original mesh new edge face way qu ick extrude doesn t oﬀer control use mesh object edit mode select geometry element want duplicate common ly mean face mesh multiple face sin gle edge selecting face mean selecting vertex face d o point selected face duplicated point note way extend curve original face lected new duplicate face selected instead making easy scale ro tate new face add face location control select geometry want duplic ate press e key extrude using e key duplicated geometry s location original visible selected gra b mode easily away location simply moving mouse press ing arrow key remember constrain possible translation holding control key dragging remember press return exit grab m ode example started mesh cube extruded various face scaling extruded face way looked like blender d window edit mode appendix blender mesh modiﬁers modiﬁers powerful feature aﬀect rendered v iew mesh object actually modifying underlying geometry apply modi ﬁer object ﬁrst select object modiﬁer property control p roperties editor button selecting modiﬁers control look like monkey wrench click add modiﬁer button choose large selection modiﬁers added object mention fact understand picture modiﬁer control adding modiﬁers apply modiﬁers mesh applie d order listed modiﬁer result previo modiﬁer starting point click add modiﬁer popup menu containing th e available modiﬁers popup menu heading gene rate subdivision surface modiﬁer modiﬁer useful m odeling shape particularly used extrusion make smoother shape us o riginal shape outline sort like control point nurbs curve try adding subdivision surface modiﬁer cube extruded time small panel appear add modiﬁer button control modiﬁer shown level viewport render input important control su increasing level increase number polygon hen ce smoothness render control selects number level used image object rendered level viewport control selects level window want make smaller render level speed drawing window remember want really smooth appearance mesh sho uld set mesh use smooth shading instead flat x icon right end header modiﬁer s cont rol panel used delete modiﬁer object popup menu just t left x ﬁnd apply command select command original mesh object discarded replaced modiﬁed version surface ma kes modiﬁcation permanent modiﬁer disappear modiﬁer control panel y ou want toappendix blender start editing won t able t o original undo modiﬁer array modiﬁer make duplicate o f object arrange line just add modiﬁer object adjust distan ce object x y z direction use count control specify m object want advanced way arranging duplicate won t cover picture shown started single monkey m esh object material us noise texture base color applied threearray modiﬁers ﬁrst modiﬁer turned monkey line monkey x d irection setting add little space copy second modiﬁer duplicated line th e y direction grid duplicated grid z direction formation monkey asanexampleofsomethingdiﬀerentthatyoucandowithatext ure welookatdisplacement mapping vertex mesh moved displaced depends texture displacement mapping displace modiﬁer displacement mapping work icosphere t add rough surface terrain apply displace modiﬁer sh grid object grid just subdivided rectangle nice terrain need l ot vertex change x re y re grid higher create alternatively use mesh plane subdivide time subdivide edit mode make sure vertex selected use subdivide popu p menu similarly want apply displace modiﬁer ico sphere incre ase number subdivision add use texture displacement map selected mesh obj ect modiﬁer control add displace modiﬁer ﬁnd tow ards deform sectionofthepopupmenu youwillseethemeshjump thedefaultdisplacementisone use texture displacement map need add texture displacement control edit texture click new button displacementappendix blender modiﬁer control add new texture select existing t exture using popup menu left new texture property tab th e property editor button texture property e select type texture example cloud procedural texture w orks use image texture open image used height map displacement height map used make terrain ca n interesting eﬀect using image base color material displacement map mesh eﬀect mesh immediately alm ost certainly want modiﬁer property decrease strength modiﬁer make displacement eﬀect extreme probably wan t use smooth shading mesh make mesh smoother add subdivi sion surface modiﬁer mesh displace modiﬁer note drag mod iﬁers modiﬁer property panel example displace modiﬁer applied grid ed cloud texture grid produce brown terrain make blue water added plane location grid gave blue material way texture texture property calle d legacy used material older version blender haven t way current version fact t hey used displacement mapping example section rendered image wi th transparent background blender use transparent background rendered mage need render propreties property editor enable th e transparency checkbox film section save image sure use rgba fo rmat save png image jpeg blender animation blender used create animation video look basic keyframe animation blender couple kind animation th t simpleappendix blender keyframes end section explain ren der animation blender keyframe animation blender us keyframe set valu e property location scale key frame animation blend er compute value frame interpolating value key frame exactly interpolation determined set edi t completely control interpolation extrapolation key frame timeline area default blender wi ndow contains information animation let control timeline show starting frame number end frame current frame animation picture current frame n umber speciﬁes frame displayed view numerical input button t hat edit left frame number input set playback control r animation view window start stop playing animation p ressing spacebar start end frame determine range frame display ed animation played determine frame included ren der animation note default frame make short animation vie wed typical frame rate frame second frame number input playback control ti meline frame number running axis left right blue tab m ark current frame timeline drag blue tab click timeline set current frame orange white diamond shape mark frame se t key frame object currently selected view dra g diamond key diﬀerent frame select group diamond orange one one selected timeline pop menu interpolation mode submenu used set interpolation sele cted orange key computed try elastic dynamic eﬀect animate object need enter value o f property key frame select frame number want e nter key value clicking timeline entering value current frame inp ut select object hit key insert key value object current fra mouse cursor view work popup menu allow t o select property property want insert key value examp le store value current location current rotation object sel ect location rotation menu inserting key frame change current frame numb er rotate scale object value want new keyframe e key drag blue tab timeline forth se e object animates delete key object frame wa nt delete value select object hit asked conﬁrm tha t want delete blender animate property property edito r panel example animate color object set frame number point t mouse base color material property hit key change curren t frame number repeat insert key frame prop erty property editor selecting insert keyframe popup key frame al ready exists popup entry deleting keyframe animation ﬁnd nee d control control using timeline popup menu interpol ation keyframes ultimately controlled function called ca n edit graph editor shown default way use animation screen clicking animation button t blender window screen dope sheet show keyframe marker animated property dope sheet view menu toggle graph editor c ommand replace dope sheet graph editor alternatively chang e editor area window graph editor selecting popup menu corner area graph editor show object select ed view graph editor showing animated objec t key frame value location rotation curve control animated property plotting val ue property vertical axis frame number horizontal axis cur f bezier curve default picture rotation curve hidden clic king eye curve name visible curve bezier han dle selected hitting key mouse graph dot curve mark key frame value select d using g key hit y key g key force dot sta y frame anyappendix blender change make immediately aﬀect view select control point bezier curve handle change shap e curve change scale graph using scroll wheel o n mouse drag graph drag vertical ly change vertical scale horizontally change horizontal scale ntrol key dragging middle mouse button translate graph easy way nicely ﬁt scale graph hit home key mouse graph let s say want object rotate comple te rotation frame number go start n unrotated object frame insert rotation keyframe using key mo ve frame want rotation frame degree mean object look exactly did beginning set value rotation keyframe frame hit n key mouse vi ew reveal transform control including numerical input location rot ation scale applied object use input set value numerica lly change value use key insert keyframe frame change objec t complete rotation click playback button starting frame notice rotation start slow speed slows end t reasonable object start rest go rotat ion stop end suppose really want constant speed rotation question interpolation keyframes issue happens fore ﬁrst keyframe keyframe question extrapolation constant speed rotation want linear interpol ation select start end key dop e sheet timeline choose linear interpolation mode ﬁ nd key menu popup menu control extrapolation selected property d ope sheet graph editor use extrapolation mode submenu channel nu constant extrapolation default mean property doe change keyframe linear extrapolationmeansthatthepropertycontinuestochangea fterthelastkeyframewiththesame rate change make cyclic mean entire animatio n loop forever keyframe forourrotationexample makecyclic extrapolationwill repeatforever ookslikewith linear interpolation make cyclic extrapolation appendix blender perpetual rotation constant speed admi ttedly complicated hopefully work exer cise idea used tracking recall parent object subsection tracking kind parenting object track rotation o f ﬁrst object set face object tracking set tracki ng relation click object want tracking object want track track submenu object menu view selec t damped track constraint track ﬁrst damped track constrain t work general track constraint work better s cam era s doing tracking clear tracking selecting object doing tracking using clear track command menu tracking fact constraint set ﬁnd listed constraint property property editor t racking object selected constraint property set axis trackin g object point object tracked tracking kind constra use constraint controlsinthepropertieseditorpaneltosetandclearvari ousconstraintsinadditiontotracking stretch interesting look follow path later section tracking work especially camera spotlight make track moving object camera light pointed o bject place using object make sense point camera s potlight location having actual object making track yo u direct spotlight animating make ca mera spotlight pan scene camera light animated set track stationary pointed location move path animation path animation used object curve bezier nurbs curve work example circular motion moving ob ject bezier circle forappendix blender path animation want motion restricted dimension remember set curve subsection curve type path used path animation pa th blender kind nurbs curve endpoint curve constrai ned lie ﬁrst control point curve make easier control w curve begin end add path scene use add curve path path b e invisible straight line suggest going immediately edit m ode hitting tab key better probably want edit mode case initially path straight line control point recall extend path going edit mode selecting endpoint u sing add point add point middle curve se lecting pair consecutive control point hitting subdivide view popup m enu close path hitting key edit mode course ca n select control point scale rotate way make object follow curve easies t way treat path animation kind parenting click object cur ve hit select follow path popup menu notice object doe s actually jump curve make select object follow ing path clear submenu object menu select clear origin c ommand path animation object move path betw een frame number frame number linear extrapolation frame ch ange number frame object property curve property edito r change value frame path remember frame abo ut second make sure path animation checked won t ani mation checking clamp checkbox change extrapolation mode constant object stop end path follow checkbox make object rotat e constant heading move curve case control need control path animation using follow path constraint ma ke sure know curve want use select object wa nt curve constraint property property editor cl ick add object constraint button select follow path relationship se ction popup menu add constraint set control conﬁ guring appendix blender need use target menu select curve want object follow object actually jump c urve need clear s location origin select object use o r use location command clear submenu object menu use forward axis setting constraint control say axis object point curve need check follow curve c heckbox actually happen makesure upaxis isdiﬀerentfrom forwardaxis oryouwillgetstrangebehavior leave fixed position unchecked click anim ate path exactly kind path animation discussed previousl instead check fixed position able completely control animation animating oﬀset factor control maybe editing oﬀset factor value oﬀset factor speciﬁes distance traveled curve fraction length curve value greater corresp ond extrapolated position curve curve curve clo sed example insert keyframe oﬀset factor value frame keyframe value frame object traverse entire cu rve ﬁrst frame continue moving value oﬀset f actor greater nice thing start end animation y time choose interpolation extrapolation mode edit control animation path example vary sp eed make backwards note path animation just visible object camera light path combine path animation tracking f example set spotlight track path tell spo tlight point thing camera rendering animation command rendering animation blender s r ender menu shouldn t simply jump using dump hund red individual image ﬁles name like h ard drive rendering animation use output property pro perty editor set image size ﬁle format output location rendered animat ion note s s possibleappendix blender render animation saving result don t kind dialog box use render animation command just automatic ally us setting output property relevant property select output destination click ûle folder þ ÿ ý e ý þ c c þ typical ûle format saving animation menu selecting common size sure set frame start end saving animation default setting encoding selected scene output setting output property control rendering individual imag e animation resolution section control size image wil l produced specify x y dimension pixel percentage stat ed dimension multiplied percentage actual image size presumably ma ke easy make small size test run frame range duplicate animation start end frame timeline blender window note frame step l ets render just subset frame example set render fr ame used speed thing test run important section labeled output near output property shown right image section cont rolling output destination ﬁle format animation set default ﬁle fo rmat single image select ﬁle type save rendered image wh en render animation frame rendered screen f rame rendered saved disk set output destination format beforerendering animation set output destination enter ﬁle path box just word output destination directory ending slash blende r make ﬁle using frame number appropriate ﬁle extension n o slash end slash ﬁle possibly added ﬁl e extension needed default format output png good sin gle image used animation use format n animation blender save frame separate ﬁle ﬁle name include fr ame number allow processing proba bly want use video ﬁle format avi jpeg suggest using sinc e widely supported used web page web browser y ou set ﬁle format ffmpeg video add encoding section ou tput property canappendix blender select menu write web p age example html code include embed animation web page video control source b color red sorry browser t th time render animation frame rendered separate image experimentation suggest using shor t animation small image size eevee renderer cycle renderer generally t ake longer frame rendered abort rendering wit h escape key control aﬀect rendering e add menu add extra camera scene just like add object t scene property select camera used rendering image render image scene rendered point view camera currently selecte d scene property useful making image animation sc ene diﬀerent point view change rendering camera selectin g camera view hitting finally ll note set clip range projectio n type property camera object data property camera like ope ngl blender render object certain range distance camera limit given clip start end camera property defaul t object farther camera camera s end clipping v alue closer start clipping value object seen camera y ou problem faraway object disappearing check camera clipping range light material blender extensive support light material scratched surface insubsection section little depth urse introduction particular look shad er editor oﬀers complete control design material lighting add lighting scene adding object type light f rom light submenu add menu note correct lighting eﬀects shown view set use rendered view style light object selected view view edit property light property tab property editor lower r ight corner default screen actually change basic type light point sun s pot area light color property determines color light power strength property determines bright default lig hts cast shadow checkbox light property turn oﬀ wa nt add light scene adding shadow make object doesn t cast shadow setting shadow mode property material setting section object s material properites appendix blender area light shape size larger area light produce softer shadow point spot light size m ake produce soft shadow increasing size sun make soft shadow f spot light set angle cone light spot shape section light property furthermore add emission color material object example emission input default material set emis sion color unlike opengl object emission color doe just look brighter actually emits light aﬀects light scene lighting blender aﬀected background t scene set background world property tab property edi tor default background dark gray color add like bit ambien t light scene implementation case background actual ly considered emit light given color note background visible default n rendered image rendering includes actual object scen e turning transparent option film section render property background color doe constant gi ven texture usually want use image texture wrap nicely sph ere like earth image used example textbook wan t fairly large image nicely detailed background use image background world property set color environment texture click yell ow dot left color input select environment texture texture section popup menu click open button select image appropriate background image possible ligh t scene entirely background light object emissive object scene example rendered scene lit background image appendix blender background image scene pixel mage source fully free hdr image model real istic texture image detailed color information usual peg depending software able open image ﬁle com puter blender use light scene come bright wind ows background image scene show platform sev eral object standing ﬂoating object left highly reﬂe ctive sphere metalic proprety set roughness property set material property sphere reﬂects background sphere doe use envi ronment map like did subsection background scene blender lighting ca n handle reﬂections correctly background ﬁle sourcefolder web site download textbook compressed archi ve ﬁle contains blender project produced image project archiv e us jpg version larger hdr background image ﬁle give poorer rendere d image make ﬁle size reasonable eevee versus cycle image rendered cycle renderer tw o realistic renderers available blender select renderer render proper tie tab property editor blender s default renderer eevee produce similar bu t identical image default setting eevee image lack certain esse ntial feature lens won t refract light object scene won t reﬂections othe r object cycle us physically correct global illumination algor ithm called path tracing section eevee faster renderer need use trick s imulate eﬀects happen automatically cycle t rick signiﬁcantly increase rendering time enabled default e nabled render property tab propeties editor certain kind mater ial need change setting material property object use ma terials note property available using cycle change need make cover example used textbook render property turn refraction property turn refraction y o t need increase refraction d epth value greater zero o o b material property g g o og g og o g s ha appendix blender note thing work e renderers shader editor far conﬁguring material looked usin g principled shader material property fact s possible ma terial conﬁguration propreties editor material complex s muc h easier use editor let visualize relationship various aspe ct conﬁguration blender shader editor called node ed itor let visually manipulate node represent step computation th deﬁnes material change area blender window shader editor usin g popup menu corner area click shader button th e window window change shader screen shader editor nd view shader editor material node ob ject currently selected view note selection menu lef t corner shader editor set object true menu shader editor used edit thing material se lected object doe assigned material new button header shader editor shader editor visualizes material network rectum ngular node node input left output right output connected input node input node network r epresents computation used create material connection represent da ta ﬂow computation input output color coded type data tha t represent gray number yellow color green shaders blue v ectors general output connected input color s ome exception example connect color output numerical input gr ayscale equivalent color value used numerical input material output node represents ﬁnal material applied object surface input material o utput represents appearance surface object surface input atta ched output node computes material surface v olume input discus displacement input look brieﬂy add menu shader editor used dd new node hit mouse shader editor ca ll add menu set connection node dragging outp ut node input node delete connection clicking o utput connected dragging away output releasing mouse drag diﬀerent input change destination data example node network fairly simple materi al combination diﬀuse glossy sort thing make basic material principled shader existed lot blender make material started new material dele ted principled shader added default new material wanted use diﬀerent shader compute surface inputforthe materialoutput node shadern odescanbefoundinthe shader submenu add menu just used diﬀuse bsdf shader node produced fully diﬀuse color just used glossy bsdf produced shiny material wanted mi xture type color added mix shader combine output shaders added diﬀuse bsdf glossy bsdf connected outpu t input mix shader fac factor input mix shader termines shader input go mix set mean th mix shader output come diﬀuse bsdf come glossy bsdf set color diﬀuse glossy shaders clicking color sampl e word color material look like added picture toru s us illustration notsomething shown actual shader editor numerical input like fac input mix shader se t hand value come node connect input output f rom node value varies surface example degree mixing color come texture giving colo r varies point point blender example using mix shader decided use default principled shader connect base color input color mixer node node doe color mixing type mixrgb color submenu add menu color mix set s constant value fac input come wave texture node text ure submenu add menu setting shown wave texture giv e pattern color tried connecting output wave texture directly fac input wanted band red color material narrower make t hat happen inserted math node converter submenu add menu betwee n wave texture node mix node math node selection menu say whic h mathematical operation performs input selected power math node computes output wave texture raised power use d fac output wave texture color output fac output ju st give grayscale level color output thing connect color output numerical input output actually equivalent example example base color material come image texture sample render shown following illustration t texture applied shaded isosphere texture represented image te xture node texture submenu add menu saw subsection apply texture object problem default mapping texture isosphere isn t correct needed add node change mapping vector input image texture node set texture coordinate mapping added texture coordinate node input submenu add menu connected generated output thetexturecoordinatenodetothevectorinputoftheimaget exturenode ialsohadtochange center selection menu image texture node d efault flat gave correct mapping blender turn texture work ﬁne uvsphere extra node default texture mapping us uv texture coordinate objec uvsphere come texture coordinate map texture sp wanted exactly result adding texture coor dinate node connecting uv output node vector input image textu node icosphere default uv coordinate correct generated output texture coordinate node mean s output value given object coordinate object mat erial applied generated texture coordinate discussed subsection central select menu image texturenode whichissettosphereintheexample determin esanextrafunctionthatisapplied vector input map coordinate space t image default flat mean component vector input simply d ropped way want apply texture transformation t o texture coordinate ﬁt texture better object subsection insert computation texture coordinate node tex ture image node use vector math node converter submenu add menu add oﬀset texture coordinate multiply scaling facto r want use vector math node mapping node th e vector submenu apply combined scale rotate translate look example us displacement inpu t material output node saw subsection displace constraint used blender displacement mapping turn displ acement mapping shader editor using displacement node attached displacem ent input material output node height input displacement node give mount displacement ordinarily come texture node insubsection looked bump mapping make look orien tation surface changing point point adjusting n ormal vector bump mapping basically cheap version displacement mapping y ou use displacement material eevee renderer actually bump mapping cycle rendered bump mapping displacement mapping bump mapping default cycle actual displacement mapping based material setting section material property change displace ment input bump displacement note actual displacement onlyin renderedappendix blender view sample render example us displacement mapping o n icosphere actual geometry modiﬁed displacement mapping work surface ﬁnely s ubdivided icosphere example used subdivision created th en added subdivision surface modiﬁer level subdivision divide mo ﬁnely transparent material refract light like glass b e modeled easily blender lens image start section entirel y principled shader simply setting transmission value roughnes s value set ior shader physically realis tic liked looked remember eﬀect using eevee renderer need adjust render material property shown illustration earlier section note lens transmits light n ot simply invisible bend light pass simple transparency bending light alpha blending alpha component lor determines degree opaqueness principled shader alpha input represents alpha value material color setting value zerowould make o bject completely invisible setting value make object translucent want eﬀect eevee need change blend mode mate rial setting refer illustration control transparency using transparent shade r shader editor good reason decided make material alpha component varies point point degree transparency coming wave t exture sample render material used cylinder orange inside c ylinder transparency speak shadow th e opaque part orange node setup used appendix blender appendix c gimp inkscape graphic gimp inkscape free program creating manipulating image gimp painting program primarily concerned setting color individual pixel image inkscap e drawing program represents image data structure contains inform ation object scene diﬀerence painting drawing discus sed insection main focus book programming t graphic useful experience image manipula tion program program illustrate important concept color manipulation transparency shape creation editing bezier curve drawing progra m grouping graphical object hierarchical structure program useful graphic working texture image appendix oﬀers just brief troduction gimp inkscape maybe let start experimenting prog ram inspire learn source taught computer graphic included lab o n gimp inkscape material appendix adapted lab gimp inkscape quite equivalent commercial program photoshop ill ustrator free used graphic project far f eatures covered couple lab gimp painting program gimp gnu image manipulation program free program capability commercial pro gram adobe photoshop gimp used creating image scratch modi fying existing image book cover limited subset gimp s feature s easy ﬁnd documentation tutorial gimp starting help menu gimpcanbedownloadedfrom http itisavailableforlinux macos window linux consider installing distr ibution s software repository section us gimp current version july ve rsion development user manual available http recommend changing gimp s interface preference open preference dialog edit menu gimp menu mac look interface section list left toolbox section recommend turning oﬀ use tool group option let tool onc e similar shown gimp inkscape image hiding group theme interface section prefer light theme theme prefer color legacy gimp screen capture sectio n use color icon light theme gimp start mode default option mode window menu pre fer mode easy accidently change conﬁguration gimp w indow happens reset conﬁguration look preference w indow management click restore saved window position default value gimp s file menu new command let create n ew image scratch able set size image properti e background color open command let open existing mage editing saving little problematic save command save ﬁle gimp s format xcf ﬁle image opened gimp save gimp editing environment need mplex project want able return editing later save image ﬁle use export export command file menu opened image ﬁle editing export com mand overwrite command used replace original image ed ited version command let save image wide variety format general y ou save image jpeg png format painting tool strongly suggest gimp experiment read experiment remember use action mac gimp wide variety tool ﬁnd tool box upper left corner window discussion assumes ar e working mode window original conﬁguration hover mouse tool button ﬁnd tool click button select tool click drag mouse image window apply selected tool toolbox al o button controlling foreground background color illustration toolbox annotation appearance toolbox computer depend version gimp theme using tool shown shou ld available appendix gimp inkscape c foreground g color erasing c swap color c default elliptical area gradient brush tool path tool toolbox tool option dialog contai n option drawing tool currently selected content dialog chang e select new tool example option brush tool used painting image usual sense brush probably basic useful t ool want draw set size brush pixel click select type dynamic e ﬀect drawing brush click select gradient used dyamics color gradient gradient e ﬀect repeat continue opacity draw translucent brush click reveal option dynamic fast color fade gradient color change try turning jitter setting value selecting dialog ll notice gimp doe tool drawing shape s rectangle circle possible draw shape using selection selection tool used select region image fo r example click rectangle tool drag mouse image select rectangular r egion setting theappendix gimp inkscape tool option dialog rectangle select tool allows y ou round oﬀ corner rectangle ellipse select tool used select oval region free select lasso tool ellipse imag e used select polygonal region just click sequence point select vertic e polygon click initial point close polygon drag l asso tool draw outline region freehand selection t hings important fact selection o nly draw inside area outside selection completely unaﬀected pa inting tool try image forget b e confused try apply painting tool outside selection eﬀ ect bucket tool look like spilling paint bucke t especially useful selection selecting bucket tool set aﬀect ed area tool option dialog selection setting clicking insi selected area ﬁll area color useful option type al low ﬁll region foreground color background color pattern change pattern used click image pattern just pattern ﬁll option drawing straight line gimp little strange draw l ine click image immediately release mouse button press shift k ey mouse holding shift key holding button mou se click mouse line drawn original click ﬁnal clic apply technique brush tool tool eraser gradient tool allows paint gradient gradi ent sequence color arranged pattern diﬀerent gradient available gimp selecting gradient tool click image gra dient tool option dialog select gradient like use note interesting gradient include transparent color create region s gradient transparent translucent lineargradients radialgradientsandothershapescanbes electedusingthe shape setting gradient tool option ooking gradient turning adaptive supersampling option apply gradient image press left mouse button point want color sequence start drag mouse holding dow n button release button point want color sequence end fter draw gradient line remains screen dot line showing t gradient s color stop edit gradient dragging dot click dot dialog edit color press return ﬁnish editing t annoying don t actually want edit gradient turn instant mo tool option gradient tool editing option y ou draw gradient example gradient imag e created entirely application gradient tool appendix gimp inkscape picture background selecting gr adient named land sea setting gradient shape set linear dragging mouse image frame edge using square wood frame gradient shape option set square s quare wood frame gradient transparent frame dragging mouse center image edge opaque gradient near edge eye using radial eyeball gradient shape set radi al rainbow used radial rainbow hoop gradient shape set radial rectangular selection used creating rainbow selection rainbow circle circle inside sele ction drawn want try tool smudge tool eraser clone tool help using tool look mess age image window using tool consult user manual wa nt learn addition painting tool gimp wide variety c olor manipulation tool apply entire image just selected o f image selection look color menu filter menu se tool used modify color photograph apply eﬀects image example brightness contrast command c olor menu open dialog used adjust brightness contrast n image color balance dialog menu b e used adjust color remember selection change ap ply pixel selected area example used dialog change t color ﬂowers image purple pink appendix gimp inkscape original image left wikimedia common http good source image experimentation im age public domain note color ﬂowers modiﬁed leaf branch make possible select ﬂowers changing color color change limited selection selection usi ng select color tool click image using tool pixel si milar color clicked pixel selected holding shift key click y ou add new pixel pixel selected easier selection wanted change threshold option tool option determines similar color click time ing undo accidently added selection selection ready selected color menu changed hue increased th e lightness saturation color wanted way modify image ﬁlter filter gimp general better called example ﬁlte r blurring image making image look like old photograph make t look like s cloth ﬁlters gimp generate image complicated thing ﬁnd gimp s ﬁlters filter menu wil l discus interesting ﬁlters try include s d selection path selection important gimp lot learn mostimportantthingstounderstandaboutthemisthatapixe lcanbe selection necessarily just collection pixel s s really assignment degree selectedness pixel example cut command mac deletes content selection set fully selec ted pixel transparent image alpha component background color s alpha component partially selected pixel partially cut alpha component pixel translucent current color pixel s blended background color similarly ﬁll selection current color pa rtially selected pixel blended ﬁll color like alpha blending degree selectedness playing roleof alphacomponent subsection adiscussion alpha color component alpha blending way partially selected pixel feather sel ection selection feathered say pixel sharp boundary s election replaced gimp inkscape wide border degree selectedness decreasing fro m zero width border use feather command select menu feather current selection alternatively selection tool rectangle sele ct tool tool option automatically feather border selection c reate tool example feathered elliptical selection used make image o n right starting image left original image image wik imedia common started elliptical selection ﬂowers original im age tool option elliptical selection tool feather edge option s et applied invert command select menu inverted selectio n outside ellipse selected instead inside finally used cut d elete selected region leaving just ﬂowers border ﬂowers fa background note add visual image applied artis tic oilify ﬁlter original doing selection gimp user great deal work creating selec tion way control selection path tool discu ssed quick mask give complete control degree sele ctedness individual pixel use toggle quick mask command select menu turn t quick mask oﬀ quick mask current selection represent ed translucent pink overlay image degree transparency overlay corresp onds degree selectedness pixel overlay completely transparent y selected pixel quick mask painting tool aﬀect mask mage example drawing black add mask subtract t selection drawing subtract mask therefor e add selection editing quick mask consider using pencil tool inste ad bursh tool pencil tool brush tool doe y transparency antialiasing path gimp bezier curve subsection path visible actual image stroke path make visible p aths selection closely related convert path selection selection path path created using path tool create path clic k sequence point path tool optionally make closed path contr ﬁrst point mac give polygonal path drag side polygon change straight line curve usual bezier control handle appear endpoint s curve drag theappendix gimp inkscape end control handle ﬁner control shape point segment curve join control handle hold dow n shift key dragging end handle handle constra ined straight line length make curve smooth p oint path ordinarily visible e dited path tool path create saved path dialog path dialog group tabbed dialog ﬁnd right edge gimp window illustration layer dialog later section nitially hidden layer dialog click path tab path dialog path d ialog contains list path path list popup menu fr om popup menu choose path tool make path visible image s witch path tool path edited choose path selection t popup menu convert path selection pixel lie inside pa th selected choose stroke path draw line drag paint tool path dialo g box open let set property stroke command sel ection path convert current selection path command available popup menu click path dialog example using path illustration explains heart shape using path tool click point cont thearst point m ake rough outline shape d e f g h j e center line turn curve handle appear drag thk j f l n o k p qk l n t u v l h p w u ea l k e n u l h e u o xshape curve dragging curve handle click point handle shif force handle heart alledz converting selection usin g buc ket tool stroked using h e u k ath layer gimp image composed stack eac h layer image ﬁnal image composed starting blank canvas c opying layer canvas layer doesn t necessarily th e size canvas layer translucent transparent part adva ntage layer edit layer changing lay er tool stuﬀ lower layer laye r used advanced application important feature lead confusion don t know tool command s add new layer image automatically important understand layer edite d given time layer called active layer annoying l ose track layer gimp inkscape especially annoying active layer hidden visible image completely transparent layer listed layer dialog tabbed dialo g lower right corner gimp window list layer active layer h ighlighted click diﬀerent layer list make active dia log popup menu command working layer command duplicated layer menu layer list popup menu include command apply individual layer illustration laye r dialog project us layer b d f h j b k p bl m j b kp q br l du v fw frl fx w b d f fx z r f l l u fl m f entire layer translucent b kw fl m s iu q l s u u prevent change layer color b kw fl m s iu q l s u u prevent change alpha s bl l w b d f jm fl l l u u w bz l u bl s r bw w d f b w b d f s iw b d f h brl s dl m f brl s fw b d f hr b k f u x s w s r l m f f d fl u im u hide layer new image layer add new layer wit h command layer menu popup menu ng layer dialog new layer added automatically case text tool particular creates new layer text layer special contain text t hey edited text tool exactly edit text layer ot tool converted regular layer longer edit text paste command create new layer case t layer special ﬂoating layer pasting image gimp windo w use tool drag ﬂoating layer desired position aside moving layer need anchor layer mak e active layer convert new regular layer anchor just click o utside pasted layer convert regular layer right click entry layer d ialog use new layer command popup menu anchor com mand menu behavior annoying don t know gimp inkscape inkscape drawing program section brief introduction inkscape free program creating editing vector graphic image used inkscape create t illustration textbook vector graphic program instead storing color pi xels inkskape store list object scene attribute save image svg scalable vector graphic format covered section svg image opened standard image viewer used web inkscape add ex tra data svg ﬁles creates data ignored progra inkscape downloaded web site available window mac o linux latest version july t section written based inkscape valid version inkscape window large central drawing area se veral toolbars edge dialog box setting stroke nd ﬁll property open right edge window layout conﬁgurable e xample toolbars hidden dialog box moved main window ndependent window discussion assumes standard layout new window opened drawing area probably show view prefer work size drawing ﬁrst thing usu ally hit key unscaled view detailed work magniﬁed view eful zoom typing zoom typing zoom submenu n view menu toolbar contains inkscape drawing tool run alon g left edge window exactly set tool shown depending inkscape version using tool likely use labeled illustration select tool rectangle tool bezier point ool description tool hovering mouse icon true interface element s good idea learn o f keyboard equivalent s select gimp inkscape drawing tool create shape rectangle e llipse spiral bezier text tool selecting tool use mouse add shape image tool easy use som e discussed select tool fundamental used select shape fo r editing selected shape useful ve drawn item clic k item select tool select select multiple item dragging box t hem select tool add item selection o r group item multiple item selected manipulate group example use select tool drag group new position y ou resize group use group command object menu permanently group selected item compound item break compou nd item using ungroup command group command allows hierarchical g raphics section group compound object higher level compoun d object select item group item handle appear aro und item drag handle transform selection hold ntrol key constrain transformation example resizing item holdin g control key preserve aspect ratio shape actually set h andles possibility modifying shape dragging control using rectangle example click shape select tool resizing handle draggeg scale shape handle used rotate apply shear shape control point dragged modify shape change tool rectangle small round control point dragge d make rounded corner control point appear ﬁrst draw shape ma ke away switch select tool shape inkscape stroked ﬁlled dia log box setting stroke ﬁll property open selecting stroke object menu dialog box applies currently selected object ob jects tab setting stroke color ﬁll color stroke style tab set stroke width attribute shortcut setting c olors using color palette near window appendix gimp inkscape color palette click color patch set color remove color hold shift ª instead region information ª selected µ ª µ ª µ status bar color palette shown illust ration contains information currently selected shape currently selected learn lot use inkscape paying attention help text stat bar drawing area ﬁnd tool option bar c ontent change depending tool selected option select tool example ll ﬁnd icon rotating ﬂipping current selection rais ing lowering selection shape hover mouse n icon ﬁnd doe paying attention option toolbar help l earn use inkscape example tool option bar wh ich appears tool used applies shape edited click icon set shape polygon number side polygon number point star º ﬀect â ã á ä ºå á probably s possible use tool eﬀe ctively unless aware option change using option yo u t change shape default polygon n tool produce wide variety interesting shape changing rounded random ized option mostversatileshapetool isthe beziertool letsy ou drawstraight line polygonal path bezier curve straight line segment click ﬁrst endpoint line second endpoint polygonal pa th just click series point ﬁnal point inkscape refers endp oints vertex path general curved shape easi est start polygonal shape edited turn straight side int o curve polygonal path switch control point editing tool n key modify shape need click shape begin e diting tool drag middle line segment make curve yo u drag path s node click node end curved segment ha ndles appear drag control point end handle adjus t shape veryappendix gimp inkscape like editing bezier path gimp note thes e button icon tool option bar control point editing tool click button node selected set t handle node work left button allows freely adjust handle se parately default setting setting sharp point corne second button force control point node lie line giving shape tha t smooth node button make smoother shape forcing c ontrol handle length hopefully given information sta rted inkscape lot learn mention just feature symbol command object menu open dialog box right window set symbol adde d image symbol inkscape just predeﬁned image example se t word balloon set logic symbol use circuit diagram popup menu n dialog box selects symbol set note default selection popup nu probably symbol drag image symbol set drawing rea window s drawing resize edit just like shape remember advantage vector graphic shape resiz ed loss quality nice looking symbol size general yo u change stroke ﬁll property symbol fact add arbitrary image scene using import command file menu simply drag image inksca pe window add scene image scene scaled r otated just like object s example shape make diﬀerence shape shape square subtracted circle added blue ctangle shape s actually square hole circle simply white square red circle diﬀerence command path menu combining shape various way operation include union intersec tion exclusion division division used cut shape independent piec e make shape includin g note new technique draw square inside circle perfect cir cles square instead ovalsappendix gimp inkscape rectangle hold control key creating shape align shape square perfectly centered circle selec t shape use align distribute command object menu brin g dialog box containing icon click align distribute selected object various way finally subtract shape select shape u se diﬀerence command path menu note upper shape subtracted lower mean draw square draw circle s et stroke ﬁll property combined shape filling shape ﬁll regio n square circle shown picture draw blue rectangle t point shape shape select t rectangle use lower command object menu suggestion want investigate th e command filter extension menu s interesting apply blur ﬁlter shape edit property shape ﬁlter stor ed attribute svg ﬁle applied shape rendered appendix d listing sample program appendix contains list program used example book downloaded web site version book ﬁnd t source code example folder named source page contain list live demo use d book web site download folder nameddemos web site download available book s web page http note example demo html canvas graphic s webgl webgpu html ﬁles opened web browser s ource code open ﬁle plain text editor open web browse r use browser s view source command html program load graphical mo dels ﬁles browser program use resource work html ﬁles loaded local hard drive fail web br owsers run source ordemofolder web site download book program sho uld work ok loaded web server possible run web server locally possible conﬁgure web browser use resource local ﬁles b ut generally recommended browse web setting java example example section andsection us graphic api java s swing gui toolkit web site download th e source code example folder named sourcefolder example single ﬁle compiled produce application additiona l java ﬁles needed show simple animated scene moving cart rotating windmill us hierarchical modeling th version program hierarchy implemented procedurally using subroutine draw object scene show scene previous example time implemented using scene graph data structure scene gr aph implemented using static nested class main class draw simple static animated scene respectively meant used framework expe rimenting java graphic similar framework working mouse key event graphic program draw polygon ﬁlled gradient te xture image let adjust property just mo java paint image listing sample program program location compiled java class ﬁles progra m run demo manipulates color individual pixel abuﬀeredimage user draw simple picture load image ﬁle smudge tool smear pixel color ﬁlters modify th e image performing averaging operation pixel color image html canvas example canvas api discussed section example mentioned section canvas example written web page ca n look web page browser doe meant rea d source code ﬁrst example meant used basis e xperimentation note live demo chapter use canvas api necessarily meant understand source code demo web site load book ﬁnd example folder inside sourcefolder minimal framework drawing html canvas inclu de example drawing text various shape add convenience function previous example including function setting coordinate th e canvas function draw shape line oval included th e basic api includes example using transforms add animation previous example includes simple example using hierarchical modeling minimal framework using keyboard mouse event wi th canvas example basic event handling letstheuserdrawusingsimpleshapes thereisalsoa smudg e tool let user smudge drawing drawn w et paint example pixel manipulation html canvas api program sho w use screen demo program version program us overlay canvas instead canvas scalable vector graphic example discussessvg aphics severalexamples werediscussedinthatsection theseexamplescanbeopened inawebbrowsertoseetheimages produce view source code web page p rogram produce image open ﬁles text editor read urce example produce animated image svg image work al l modern web browser example svgfolder inside sourcefolder short ﬁrst example just draw basic shape show basic document structure svg image include s example basic shape lot comment explai n going simple ﬁrst example listing sample program example hierarchical modeling make model wheel model cart us wheel component im age show wheel copy cart wheel cart model use d animation end list contains example simple animation keyframe animation transform animation show simple animated hierarchical model complex example hierarchical modeling svg scene animation show cart moving roa d windmill turn background animation im plemented java example javascript demo opengl example opengl topic chapter andchapter example chapter primarily use c api opengl java api jogl d iscussed program example available c java apis jog l version directory named joglinside sourcedirectory c version use glut library create manage opengl window t directory named glutinside source program use camera api deﬁned java opengl demo book written using javascript library implement small subset c api opengl w ebgl information glsim program example available html version use glsimlibrary glsimdirectory inside thesourcedirectory c java javascript version ﬁrst opengl example trian gle vertex assigned color red green blue use exa mple starting point trying basic drawing command section c java javascript version program draw cube using mode ling transformation applied square lighting program us basic orthographic projection image realistic section c java javascript version example hierarchical modeling animation dimension opengl illustrates graphic opengl use glpushmatrix andglpopmatrix hierarchical modeling animation t implemented java example html canvas graphic demo fromsection corresponding header ﬁle c jogl implement camera api use opengl th library use program complete program corres ponding api javascriptappendix listing sample program glsim library camera used following example discussed section c java version program let user view polyhedron deﬁned indexed face set polyhedron model deﬁned java program requires camera api discussed previous item section javascript demonstrate drawing using gldrawarrays andgldrawelements fromsection draw large number sphere using variety rendering method ti take render image point compare render time diﬀerent rend ering method including display list gldrawarrays vertex buﬀer object reader expected understand code program section starter ﬁles writing opengl application using c java jav ascript opengl simulator program don t draw method stub drawing mouse keyboard interaction animation discussed section example using light source material property program demonstrates multiple m oving light source let user turn light oﬀ eﬀect demo javascript version program section ac program show variety texture variety o bjects depends ﬁles contains texture image used program jav version requires image folder fromsection demonstrate technique copying image color buﬀer using f unction draw animated scene us texture v arious object requires textured shape library mentioned previous item tion small program demonstrate use texture object t o handle multiple texture available c section example javascript library graphic web page using bgl html canvas discussed chapter example folder named threejs inside sourcefolder web site download example use ja vascript ﬁle miniﬁed version library meant hu man reader isalsoavailable theexamplesalsouseother script scriptfolder inside threejs folder version release project downloaded listing sample program typically used write program ﬁll browser window continually run animation examp le show example follow pattern anim ation show colored ball bouncing inside translucent box user rotat e scene mouse fromsection starter program experimenting building animating scene graph model user rotate model using keyboard includes simple example section show animated model simple car driving edge disk tree cylinder cone based previous sample program section show use array material cube pyramid geometry constructed hand us vertex group feature version represents pyramid using indexed face set pattern f romsection witha texture show deﬁne texture coordinate section creates surface using parametric surface tube geometry lathing extrusion section display model loaded ﬁles various format loader model download demo animated version model section object make possible draw large number instance o f basic geometry diﬀerent transformation optionally diﬀerent c olors copy section demonstrates using cubemap texture make skybox section demonstration using environment map simulate reﬂection object environment environment s skybox section thisexampleisa lmost identical previous example using refract ion reﬂection section webgl example webgl version opengl use web page discu ssed inchapter chapter sample program folder named webgl inside source folder web site download sample program webg l html ﬁles run program opening web browser view source code text editor using view source command web browser webgl program written javascript consists vertex shader f ragment shader written glsl example rely script webgldirectory particular example use glmatrix library subsection program work webgl require webgl listing sample program demonstrates use vertex array object tioned subsection us technique covered later textbook program requires webgl demonstrates use instanced drawing mentioned subsection us technique covered later textbook program requires webg l standard opengl example rendered using webgl triangle vertex red green blue color interior pixel computed interpolating color vertex demon trates use attribute varying variable section user stamp shape canvas clicking mouse property shape determined se t menu demonstrates use uniform variable preservedrawingbuﬀer option webgl context simple coordinate transformation th e vertex shader section set circle move canvas bouncing oﬀ edge show use point primitive webgl introduces discard statement fragment shader section minimal texture example just applies texture image triangle section pixel color component value texture demo nstrates diﬀerence magniﬁcation ﬁlter section load cubemap texture us context imitate picture taken ﬁsheye lens texture coordi nates ﬁrst mapped sphere direction vector used sample cubemap section s gameoflive webgl basic example gpus used perform c omputational task fromsection silly demo program us glsl e function texelfetch color texture image program requires webgl section demonstrates using modeling transformation webgl glsl simple animated hierarchical obje ct transforms implemented javascript object type deﬁned ﬁle fromsection ﬁrst example doing graphic directly webgl lighting section demonstrates use simplerotator deﬁned mouse rotation section demonstrates use trackballrotator deﬁned mouse rotation identical previous example section listing sample program ﬁrst example implementing lighting directly webgl add lighting lighting case us diﬀuse color directional light direction viewer section ﬁrst implementation specular reﬂection section second implementation specular tion using phong shading lighting calculation n fragment shader aside moving calculation fragment shader exa mple identical previous example section version ported webgl glsl e required change minimal let user graph parametric surface given equation x u v y u v z u v entered user relatively complex program illustrates glsl data structure li ghting polygon oﬀset section demo spotlight colored spotlight er change cutoﬀ angle spot exponent section relatively complex program hierarchical modeling nd kind lighting including moving light spotli ghts light attenuation scene added lighting feature section animated texture image using glmatrix implement texture transformation section successful attempt implement bumpmapping fro m section us cubemap texture make skybox environment map section applies blur ﬁlter image simple demo using blending transparency simple example pas algorithm section us webgl framebuﬀer draw image directly texture section port webgl us vertex array object show skybox moving cube reﬂected surface object us dynamic cubemap texture environment m ap reﬂective object image cubemap texture redrawn fo r frame animation section demonstrates use webgl anisotropic ﬁltering extension show large textured rectangle exten ding distance let user turn anisotropic ﬁltering oﬀ section demonstrates use webgl colorbuﬀerﬂoat webgl extension application simple genetic algorithm th try approximate given image ﬂoating point color buﬀer used computat ion ﬁnding average color value image computing image rep resents diﬀerence image section listing sample program demonstrates use extension instanced drawing webgl copy modiﬁed work webgl section demonstrates drawing multiple texture attached draw buﬀers framebuﬀer requires web gl similar webgl extension section webgpu example webgpuisanewapiforgraphicsontheweb ithasbeendesigne dfromscratchtoincorporate feature modern apis vulkan direc metal covered inchapter program require web browser support webgpu july webgpu enabled default chrome edge browser o n window macos browser experimental feature ca n enabled user download web site directory n amedwebgpuin thesource directory example use subsection script resource directory ﬁrst webgpu example just draw colored triangle source code extensive comment explain webgpu section variation previous example draw triangle diﬀerent colored vertex requires adding second parameter vertex shader program ﬁrst pro gram doe using vertex buﬀers second using single vertex buﬀer interleaved value input parameter subsection us instanced drawing draw multiple colored disk using single draw show use instance attribute vertex buﬀers fromsubsection us drawindexed method draw single disk indexed face set using primitive dr aws disk outline using primitive show use render pa s command buﬀer fromsubsection draw multiple outlined disk using diﬀerent rendering pass disk illustrates using copybuffertobuffer set value uniform variable rendering pass multiple variation program doe thing using writebuffer requires separate command encoder drawing disk subsection example using vertex index instance index vertex shader function application case imitate webgl point primitive setting point siz webgpu doe implement point size primitive rendered individual pixel fromsubsection demonstrates add multisampling webgpu program adding multisampling kind antialiasing subsection listing sample program show enable depth test webgpu program duplicate functionality doe instanced drawing add multisampling comment n code depth test subsection webgpu display object time user trol material light property subsection direct port webgpu example implementation hierarchical gra phics opengl lighting model subsection ﬁrst example using texture webgpu user select diﬀerent kind texture applied sq uare section withbasiclighting fromsection take image texture canvas page applies shape user som e simple drawing canvas aside grabbing texture canvas new program section deﬁnes test function creates image texture set mipmaps imagebitmap subsection load cubemap texture us skybox reﬂection mapping functionally identical t webgl example fromsubsection conway s game life using t tures wgsl function textureload andtexturestore program task doe using textu re used sampling shader used color attachm ent render pipeline fromsubsection us compute shaders run simulation brownian motion white particle randomly hit yellow cyan particle change color stop moving time interesting ike pattern form subsection illustrates reading data gpu buﬀer javascript program application s really point exercise use trapezoid rule approximate deﬁnite integral subsection showingfourcopies scene diﬀerent viewports scissor rect app lied viewports fromsubsection us alpha blending draw translucent color strates blendproperty target render pipeline subsection demonstrates writemask property target render pipeline letting user select color chan nels write subsection listing sample program let user view polyhedron demonstrates depth bias render pipeline drawing face polyhedr depth bias make sure part edge hidden face u s face culling subsection live demo web site version book includes live interac tive demo embedded web page demo small program written web pag e using javascript html canvas graphic webgl designed run small application insideotherwebpages theycanalsoberunasindependentwe bpages inthewebsitedownload book ﬁnd demo folder named demo organized chapter number run directly folder note th e demo requires certain ﬁles contained demosfolder copy demo diﬀerent location sure copy ﬁles depends demo chapter use canvas graphic api work modern web browser demo chapter use webg l work modern web browser webgl problem browser machine demo program use webgl work webgl demo chapter require web browser support web gpu demo chapter andchapter javascript library wrote simulate subset opengl information g lsim demo reader expected understan d program code demo point demo occurs book note t javascipt code demo notbeen updated use modern version javasctipt tha t covered section fromsection magniﬁes small square pixel image user text line shape ma pixel including antialiasing fromsection let user modify color rgb hsv color space dragging slider fromsection show oval approximated polygon diﬀerent number side section let user modify cubic bezier curve dragging endpoint control point section let user modify quadratic bezier curve dragging endpoint control point section let user apply sequence rotation scaling translation transforms shape sults section attempt demonstrate equivalence modeling transform viewpor t transform section show simple animated scene constructed using hierarchical listing sample program fromsection let user draw canvas using basic shape smudge tool illustrates pixel manipulati demo pretty sample program section let user apply variety ﬁlters image ﬁlter term used replaces th e color pixel weighted average color pixel nei ghbors section show usual ﬁrst example opengl triangle diﬀerently colored vertex th demo change color vertex fromsection draw cube diﬀerent color side lighting eﬀects default orthographic projection user turn depth test oﬀ eﬀect user use b igger cube eﬀects clipping part cube extend outside th e visible range fromsection show set coordinate ax user drag mouse rotate view fromsection illustrates rotation axis cube spin axis rotation user select axis section attempt demonstrate equivalence modeling viewing user dra g slider modify transform see transform applied object s modeling transform view volume viewing transform content view volume image produced interpretation section let user view variety polyhedron deﬁned program indexed face set user rotate polyhedron control rendering option section let user change diﬀuse specular shininess property object result fromsection let user diﬀerence using normal vector model smooth surface versus modeling ﬂa polyhedron section demonstrates eﬀect multiple diﬀerently colored moving light section little demo illustrates lighting diﬀerent material section show texture various object texture transformation user control using sli ders fromsection simple demo function draw animated scene us textur e object section let user world clicking button demonstrating idea moving viewer camera fromsection ﬁrst example using modeling api us pointcloud object animated cloud point section let user view basic geometry variety listing sample program section us coloring create multicolored sphere color d position vertex animated section demonstrates texture variety object section show animated model horse stork using model morph target class model fromsection let user edit scene using mouse us object type mouse input user fromsection demonstrates support shadow section demonstrates environment mapping simulate reﬂection environment environment th case skybox demo similar sample program fromsection demo version sample webgl program user click canvas stamp shape canvas property determined set popup menu demo functionality sample program shape draw n using diﬀerent technique fromsection demo version sample webgl program identical functionality us single primitive display set moving colored disk section display list value certain resource limit webgl number attribute shader p rogram size viewport value diﬀerent diﬀerent device nd diﬀerent web browser section show texture image used primitive similar point textured instead colored section us texture object sampler variable shader program represent texture unit used apply texture fromsection demonstrates diﬀerence tor trackballrotator ting user rotate cube using rotators section let user compare lighting lighting applying techni ques identical object identical lighting setting section colored spotlight shine square user control cutoﬀ angle spot exponent dem o version sample program added animation fun section us texture coordinate generated object eye coordinate instead providing tex ture coordinate shader program attribute section demonstrates procedural listing sample program fromsection essentially copy sample webgl program show skybox moving cube reﬂected surface teapot object us dynamic cubemap te xture redrawn frame section webgpu demo just draw colored triangle meant test check browser support webgpu section show animation moving randomly colored disk disk drawn using instanced drawing demo us multisampling antialiasing let user turn mult isampling oﬀ eﬀect section illustrates hierarchical graphic webgpu functionality code identica l sample program change turn demo us webgpu compute shaders implement simulation diﬀusion white particle brownian motion white particle hit yellow cyan particle change col match stop moving result build interesting patte rn demo version sample program e glossary abstract class programming class meant used basis subclass object created subcl ass abstract class purpose abstract class deﬁne property behavior subclass common address space wgsl wgsl memory divided address space wgsl speciﬁcation address space unique properti e determining mutability visibility value contain use variabl e aﬃne transform transform preserve parallel line th e transform applied pair line parallel resul ting transformed line parallel aﬃne transform t property th e transform line segment point point lin e point t t eﬀectively transform line s egment computed just transforming endpoint make aﬃne tran sforms eﬃcient computergraphics anyaﬃnetransformcanberepresentedas acompositionofrotations translation scaling alignment wgsl restriction legal location value memory dep ending data type example address variable wgsl multiple alpha blending using alpha component color blend color background color color drawn background color tha t new color pixel obtained blending drawing color curr ent color degree blending depending alpha component drawing c olor alpha blending commonly used simulate transparency alpha color component extra component number used specify color color model actual color speciﬁcation alpha component extra information used t o specify degree transparency color ambient color material property represents proportion ambi ent light environment reﬂected surface ambient light directionless light exists environment doe come particular source environment approximati light reﬂected time original source t identiﬁed ambient light illuminates object scene equally glossary ambient occlusion rendering technique take account fact ambient light illuminate diﬀerent surface varying extent depe nding degree ambient light blocked occluded reaching surface geometry scene ambient occlusion improvement basic bient lighting like ambient light actual physical phenomeno anaglyph stereo technique combining stereographic image scene left eye right eye single image typically image left eye drawn using shade red image right e ye contains blue green color component eﬀect seen viewin g combined image glass allow eye th e image intended eye animation asequenceofimagesthat whendisplayedquicklyoneafter theother willproduce impression continuous motion change term anim ation refers process creating image sequence anisotropic ﬁltering technique accurate sampling texture image n case whereapixelonthesurfacethatisbeingtexturedcorrespon texture anisotropic ﬁltering available opti onal extension webgl antialiasing technique used reduce jagged staircase appear ance diagonal line text shape drawn using pixel wh en pixel partly covered geometric shape color pixel b lend color shape color background degree blen ding depending fraction pixel covered geometric shape api application programming interface collection relat ed class function constant performing task api interface th e sense used understanding functionality actually im plemented aspect ratio ratio width w rectangle height h th e rectangle expressed ratio w h fraction async function javascript async function use awai t statement wait result promise await statement executed execution async function suspended promise eith er fulﬁlled rejected giving javascript code chance run meantime attenuation refers way illumination point light spo t light decrease distance light physically illumination sho uld decrease square distance computer graphic us linear atte nuation distance attenuation attribute property color graphical object image ca n speciﬁed geometric shape contains attr ibutes attribute variable variable represent input vertex shader pro grammable graphic pipeline attribute variable diﬀer ent value vertex primitive axis rotation rotation space rotation line calle d axis rotation axis rotation remains ﬁxed everythi ng move circle axis face side polygon polygon side taken face face opengl th e diﬀerence determinedappendix glossary order vertex polygon enumerat ed default seen vertex enumerated clockwise order polygon barycentric coordinate coordinate triangle point written linear combination vertex triangle c b c vertex b c number point t triangle written form coeﬃcients b c valu e range equal bezier curve smooth curve point deﬁned parametric poly nomial equation cubic bezier curve segment deﬁned e ndpoints control point tangent curve t direction speed given line tangent vector th e curve given line quadratic bezier curve deﬁned endpoint single control point tangent endpoint l ine endpoint bind group webgpu tex tures sample input pipeline blender free open source modeling animation program bresenham s line algorithm speciﬁc algorithm deciding pixel color represent geometric line segment using integer arit hmetic algorithm implemented eﬃciently computer hardware bsdf bidirectional scattering distribution function gener alization idea material graphic bsdf give probability light ray arrives point space direction leave point hea ding direction probability function direction poin t wavelength light kind scattering reﬂection light sur face case term brdf bidirectional reﬂectance distribution function used bumpmapping using texture modify normal vector surface appearanceofvariationsinheightwithoutactuallymodify ingthegeometryofthesurface camera computer graphic object combine projec tion viewing transforms abstraction imitates physical cam era eye clip coordinate default coordinate opengl projection tr ansform map scene clip coordinate rendered image sho w content cube clip coordinate contains x y z value range outside range clipped away color buﬀer opengl region memory hold color data image act drawing surface image rendered color component number used color model specify color fo r example rgb color model color speciﬁed color comp onents representing amount red green blue color color gamut color gamut display device printer comp uter screen set color displayed device color mask webgl setting determines channel color buﬀer written rendering channel rgba color mponents red green blue alpha color mask consists boolean value f channel falseappendix glossary value prevents change correspondi ng color component color buﬀer color model way specifying color numerically color represented color model assigned numerical component valu e example rgb color model color speciﬁed number gi ving red green blue component color order ordering element ional matrix ordering start element ﬁrst column followed element second column der used matrix opengl glsl compute shader stage gpu pipeline doe purely computational wor k participating directly graphical rendering constructor programming subroutine used create object constructor class creates initializes object bel onging class control point point doe lie curve used help c ontrol shape curve example control point bezier c urve segment used specify tangent vector direction speed curv e endpoint convex convex geometric shape property point contained shape line segment point s entirely contained shape coordinate way assigning numerical coordinate geometric poin t dimension point corresponds pair number t hree dimension point corresponds triple number cpu central processing unit computer component th actually executes program cpu read machine language instruction computer s memory carry cross product vector product vector cross product v w vector perpendicular v w length equal t o absolute value sine angle v x y z b c cross product vector cs cascading style sheet language used specify ing style presentation content web page cs control thing like color s background font shadow border size position element th e page cubemap texture texture image direction s positive x negative x positive y negative y positive z negati ve image intended include seen given point cub emap texture used environment mapping skybox deferred shading rendering technique ﬁrst pas process e geometry save relevant information transformed coordin ate normal vector material property data stored texture whi ch called geometry buﬀers inthiscontext lightingandothereﬀ ectscanthenbecomputedin additional pass using information fro m geometry buﬀers instead pas depth buﬀer region memory store information needed th e depth test graphic depth value pixel image lso called appendix glossary depth mask webgl setting control depth value w ritten depth buﬀer rendering depth mask set false t depth value discarded depth buﬀer unchanged depth test solution hidden surface problem involves ing track depth distance viewer object currently visible pixel image new object drawn pixel depth new objec t compared depth current object decide closer th e viewer advantage depth test object rendered order d isadvantage limited range depth represented image device coordinate coordinate used display device rendered mage using pixel unit measure diﬀuse color material property represents proportion inci dent light reﬂected diﬀusely surface diﬀuse reﬂection reﬂection incident light direction surfac e diﬀuse illumination surface visible viewer indepen dent viewer s position microsoft s proprietary api graphic window operating directed acyclic graph called linked data structure cycle possible ﬁnd sequence node w node link node link ﬁrst directional light light source light ray parallel arriving f rom direction considered light source eﬀecti vely inﬁnite distance called sun sun example directional li ght source displacement mapping technique used modify polygonal mesh moving displacing vertex mesh display list list graphic primitive attribute tr aversed create image display list used early vector hardware available traditional opengl dom document object model speciﬁcation representing w eb page kind structured document data structure lso refer data structure dom web web page modi ﬁed dynamically manipulating dom using javascript programming lan guage dot product dot product vector sum product rresponding coordinate vector x y z b c t product v w x dot product equal cosine ang le vector divided product length double buﬀering graphic technique image drawn n region memory called buﬀer im age drawn copied buﬀer represents content scree n known true double buﬀering image doesn t copied instead buﬀers swapped buﬀer buﬀer buﬀer buﬀer drawing program computer program creating image using graphic user creates image specifying shape ma ke image glossary eclipse integrated development environment writing progra m java programming language eclipse free program b e downloaded http emission color material property represents color intrinsi c surface coming light source reﬂected surface emission color make object look like glowing doe n ot illuminate object emission color called emissive environment mapping way simulating reﬂection surface object environment reﬂected surfa ce represented cubemap texture determine point texture vi sible given point object ray viewpoint reﬂected surf ace point reﬂected ray intersected texture cube environment mappi ng called reﬂection mapping version javascript implemented modern b browser formally known ecmascript ecmascript introduced la rge number new feature euclidean transform transform preserve distance angle euclide transformrepresentsa thatis thetransfo rmofanobjectisanexactcopy object size shape euclidean tra nsform represented composition rotation translation euler angle express rotation object coordinate syst em given individual rotation x y z ax coordi nate cumulative eﬀect rotation coordinate ax depends o n order rotation applied extrusion technique producing solid shape moving th e shape curve solid set point sh ape pass move curve common case moving shape alon g line segment perpendicular plane contains shape pra ctice computer graphic object produced extrusion just surface o f extruded solid eye coordinate iney ecoordinates opengl viewer located origin looking direction negative positive pointing upwards p ositive pointing right modelview transformation map object e ye coordinate projection transform map eye coordinate clip coord inates ﬁlling shape drawing interior shape coloring pixel lie inside shape filling doe apply shape line h ave interior pipeline graphic processing pipeline ﬁxed set processin g stage thatcannotbemodiﬁedbyaprogrammer dataforanimagepass esthroughasequenceof processing stage image end product seq uence called pipeline programmer enable d disable stage set option control processing add fun ctionality ﬂat shading lighting computation face polygon polygon al mesh us normal vector point polygon giving th e polygon ﬂat faceted glossary fragment shader shader program executed pixel primitive fragment shader compute color pixel disca rd fragment shaders called pixel shaders framebuﬀer webgl data structure organizes buﬀers ren dering image possibly including color buﬀer depth buﬀer stenci l buﬀer webgl graphic context default framebuﬀer rendering nd additional framebuﬀers created rendering frame buﬀer region memory contains color data digital ima ge refers memory containing image appears computer s screen face side polygon polygon side taken face face opengl th e diﬀerence determined order vertex polygon enumerat ed default seen vertex enumerated counterc lockwise order polygon frustum truncated pyramid pyramid cut oﬀ opengl view volume perspective projection frustum geometric modeling creating scene specifying geometric object conta ined scene geometric transforms applied t hem attribute determine appearance geometric primitive geometric object graphic opengl tha t simpler object example opengl include point s line triangle set available primitive depends graphic s ystem note term used opengl single primitive man y point line segment triangle geometric transform coordinate transformation function b e applied point geometric object produce new obj ect common transforms include scaling rotation translation glmatrix javascript library vector matrix ma th dimension global ambient intensity opengl ambient light present environment independent light source total ambient light s um global ambient light plus ambient light intensity enabled light source global illumination goal rendering algorithm account al l interaction light scene including indirect illumi nation light bounce oﬀ object glsl opengl shader language programming language u sed write shader program use opengl agltfﬁlecan scene including object material light ani mations gltf speciﬁcation come khronos group responsible o pengl webgl vulkan glu opengl utility library deﬁnes function u se older version opengl including gluperspective glulookat c onfused glut glu standard glossary glut opengl utility toolkit libra ry writing opengl application opengl doe include support window o r event glut add support function drawing shape s pheres polyhedron mention teapot glut written c programming lan guage used c api opengl glut function av ailable jogl java api opengl newer somewhat improved version toolkit named freeglut commonly used place original version gpu graphic processing unit computer hardware component t hat performs graphical computation create manipulate image operation s drawing line screen rendering image gpu optimized perform operation quickly gradient pattern color produced assigning color certain r eference point computing color point interpolating extrap olating color reference point eﬀect color progression lin e segment reference point diﬀerent rule extending color tho e line produce diﬀerent type gradient linear gradient radial gradient grayscale refers color scheme image color shad e gray term shade gray includes black white typical ly shade gray used grayscale called gui graphical user interface user interface program user interacts program using component window menu button s box hdr image high dynamic range image hdr image color infor mation usual bit color channel pixel make t suitable us require calculation color value height map image grayscale value represents height elevation height map used displacement mapping specify amoun t displacement hidden surface problem problem graphic deciding object visib le pixel image object obje ct point view viewer object appear imag rendering algorithm graphic satisfy constraint algorithm th solve hidden surface problem include painter s algorithm depth test lgorithm hierarchical modeling creating complex geometric model hierarchical fashio n starting geometric primitive combining component combined complex component homogeneous coordinate way representing vector dimensional vector vector represent s ame vector theydiﬀerbyascalarmultiple forexample ifwisnot zero thenthehomogeneous coordinate x y z w equivalent homogeneous coord inates diﬀer multiplication scalar set coo rdinates represent vector hsl color color speciﬁed number giving hue saturatio n lightness component hsl color model similar hsv color mod el main diﬀerence hsl pure spectral color occur n hsv occur hsv color color speciﬁed number giving hue saturatio n value component hue represents basic color saturati purity color appendix glossary saturation value zero producing shade gray tha t color actual hue value represents brightness color value zero giving black value called brightness hsb s ometimes used instead hsv html hypertext markup language language used spec ifying content web page html document text ele ments adding content image deﬁning structure document nesting element document represented t data structure html canvas canvas element web page canvas appears rectan gular area page javascript programming language use canv element drawing surface html language specifying content b page javascript programming language web page canvas element supp orts graphic api browser support graphic api webgl identity matrix identity matrix matrix s diagonal zero multiplication matrix b identity matrix order leaf b unchanged multiplication dimensional vector identity matrix leaf vector unchanged identity matrix matrix identity transformation identity transform atransform eﬀect argument example t identity transform given formula x y x y ide ntity transform property t transform followed t t t followed image texture image applied surface texture l ooks image painted surface index buﬀer webgpu index buﬀer gpu buﬀer hold vertex ind ice use drawindexed vertex index give positio n vertex list vertex primitive indexed color color scheme color selected limited pa lette color example palette contains color color speciﬁed integer giving position index list color indexed drawing webgpu drawing primitive using drawindexed fun ction function vertex generated order whi ch listed instead list vertex index index buﬀer determines orde r vertex indexed drawing used render indexed face set indexed face set ifs data structure represents polyhedron pol ygonal mesh data structure includes numbered list vertex list face face speciﬁed listing index vertex face t hat face given list number number index list verti ce instanced drawing ability render multiple version primitive single function copy value certain ttributes color transformation intensity light source light source emits light various wavelength inte nsity light given wavelength energy l ight wavelength total intensity light total energy wav elengths color light determined intensity glossary interpolation given value quantity certain reference point computing value quantity point kind averaging ap plied value reference point invariant qualiﬁer glsl modiﬁer ensures expressio n used compute value variable diﬀerent shaders th e value shaders important algori thm shader program applied succession render image inverse transform given transform t inverse transform t transfor m revers operation example transform r inverse t mean r t x y x y scaling inverse scaling translation inverse translation t ransform inverse example scaling factor zero inverse ior index refraction property medium air gl as transmits light refraction bending light ray pas m edium depends ratio iors medium index refracti medium depends speed light medium javascript programming language web page javascript code w eb page executed web browser display page teract content web page user javascript apis fo r graphic jogl java implementation opengl jogl complicated attempt support version opengl programming jo gl integrates seamlessly java s swing awt graphic json javascript object notation syntax representing j avascript object string similar object literal syntax used javascri pt json object contain function contain string number nd booleans json popular standard storage transmission st ructured data keyframe animation animation technique value quantity s given explicitly certain time animation t imes quantity speciﬁed called keyframes keyframes valu e quantity obtained interpolating value speciﬁed keyfra me lambert shading technique computing pixel color primitive using lighting equation take account ambient diﬀuse reﬂecti lambert shading lighting equation applied vertex prim itive color value pixel primitive calculated interpolating value computed vertex lambert shading named johann lambert wh o developed theory based eighteenth century lathing technique producing surface rotating planar cur ve line lie plane curve point rotates line generates circle surface union circle generated po ints curve lathing imitates shape produced mechanical lathe length vector vector deﬁned length direction length fundamental property vector represented arr ow length just length arrow vector given coordinate x y length square root x vector given x y z l ength square root x glossary lighting using light source scene appearance o bjects scene computed based interaction light object s material property lighting equation equation used opengl compute visible lor point surface material property surfac e normal vector point direction viewer ambient light level direction intensity light source linear algebra ﬁeld mathematics study vector space line ar transformation linear algebra essential mathem atical foundation computer graphic linear gradient color gradient pattern color variation certain line constant color line perpendicular line linear transformation function vector space preserve v ector addition multiplication constant linear transfor mations represented matrix computer graphic used implement g eometric operation rotation translation lossless data compression scheme reducing size dataset losing y information dataset original data r ecovered exactly compressed data image format gif png use lossless d ata compression reduce size image ﬁle lossy data compression scheme reducing size dataset th e information dataset lost data recov ered compressed datacandiﬀerfromtheoriginaldata theimageformatjpegu selossydatacompression reduce size image ﬁle luminance quantity representing perceived brightness colo rgb color weighted average red green blue component s color usual formula red green blue magniﬁcation ﬁlter operation used applying texture objec t texture stretched ﬁt object image t exture magniﬁcation ﬁlter applied compute color pixel pixe l cover just fraction pixel image material property object determine object nteracts light environment material property opengl include example diﬀuse color specular color shininess matrix rectangular array number matrix represented array number arranged row column m atrix represents linear transformation space matrix mode opengl state variable determines transformation matrix aﬀected function s glrotatef glfrustum matrix mode set function glmatrixmode possi ble value include glmodelview gl projection gl texture metal apple s proprietary api graphic computation macos computer io device miniﬁcation ﬁlter operation used applying texture objec t texture shrunk ﬁt object image texture miniﬁcation ﬁlter applied compute color pixel pixel cover pixel glossary mipmap series copy texture image decreasing width height starting original image mipmap obt ained dividing width height previous image unless ﬁnal mipmap single pixel mipmaps used eﬃcient mapping t texture image surface image shrunk ﬁt surface modeling transformation transformation applied object map obj ect intotheworldcoordinatesystemorintotheobjectcoordina tesystemforamorecomplex hierarchical object modelview transformation opengl transform combine modeling transformwiththeviewingtransform thatis itisthecomp ositionofthetransformation object coordinate world coordinate transf ormation world coordinate eye coordinate equivalence modeling viewing transformation world coordinate really meaning ful opengl combined transformation tracked algorithm rendering algorithm draw scene time c ombines result compute ﬁnal image simple examp le anaglyph stereo image scene rendere d separately combined multisampling akindofantialiasingwherethefragment shader isevaluat edatseveralpoints pixel result averaged color pixel ndc normalized device coordinate webgpu refers fault xyz coordinate x y range z range x y ndc map linearly device pixel coordinate view port nio buﬀer java object belonging class o f subclass nio buﬀers similar array optimized inpu operation nio buﬀers used instead array certain purpose jav s jogl api opengl normalized vector itslength givin gaunit vector vector length note normalized vecto r normal vector confusingly unrelated term normal vector normal vector surface point surface vec tor perpendicular surface point normal vector t o curve deﬁned similarly normal vector important lighting calculation norm vector term length vector vector giv en x y z norm square root x object coordinate coordinate coordinate point n object originally speciﬁed transformed modeling transform applied object canvas term segment computer s memory use d drawing surface drawing image visible screen method exist copying image canvas o nto screen java example canvas implemented object type buﬀeredimage opengl family computer graphic apis implemented ma ny graphic hardware device version api implementation binding diﬀerent programming language version opengl embedded system mobile phone known opengl e webgl versionappendix glossary use web page opengl used g raphics commonly associated orthographic projection projection simply discard nate project object line orthogonal perpen dicular opengl view volume orthographic projection s rectangular solid painter s algorithm solution hidden surface algorithm involves dr awing object scene order decr easing order distance viewer disadvantage order usually n ot unless object decomposed smaller anot issue order drawing change object point vi ew change painting program graphic user creates image controlling color p ixel path tracing rendering algorithm based idea computing path light followed arrive position viewer direction literally impossible algorithm trace random samp le path average result number sample increase average verge image pattern ﬁll using copy image ﬁll interior onal shape image repeated horizontally vertically necess ary cover shape pbr physically based rendering general term encompassing variety technique rendering material look physically realistic th material traditionally used opengl similar graphic apis idea imple ment actual physic light material directly pbr common graphic video game perlin noise technique invented ken perlin used computation procedural texture perlin noise fun ction numerical input usually produce output number range output regularity feature th similarly sized regularly distributed variation scale lighting doing lighting calculation pixel primitive w hich give better result case lighting phong shadi ng us lighting normal vector interpolated vertex perspective projection projection project object line radiating viewpoint perspective projection tempts simulate realistic viewing perspective projection preserve perspective object farther viewpoint smaller projection opengl view volume perspective projection frustum truncated pyramid lighting doing lighting calculation vertex primo tive interpolating result color interior pixe l lighting standard traditional opengl lighting wi thout specular reﬂection lambert shading phong shading technique computing pixel color primitive using lighting equation take account ambient diﬀuse specu lar reﬂection phong shading lighting equation applied pixel mal vector speciﬁed vertex primitive normal vector ed lighting equationappendix glossary pixel obtained interpolating normal vector fo r vertex phong shading named bui tuong phong developed theory th e pipeline sequence computational stage gpu applied incoming data produce result stage programmable s haders vertex shaders fragment shaders compute shaders graphi c rendering pipeline output color pixel image pixel digital image row column small rectang le called pixel specify digital image color assigned pixel t image point light light source light ray emanate single point called lamp lamp approximates point source light calle d positional light polygon shape lying plane speciﬁed list point called vertex line segment point t list point list plus line segment point list ﬁrst point point required lie plane te rm polygon includes interior shape boundary polygonal mesh collection polygon polygon joined t ogether edge polygonal mesh represent polyhedr used approximation curved surface polygonal mesh r epresented indexed face set polygon oﬀset graphic technique slightly increase decreas e depth pixel primitive rendered polygon oﬀset u sed avoid having object exactly depth situation han dled depth test polyhedron closed ﬁgure face side polygon usual ly assumed face polyhedron intersect edge texture texture image width height power s ome graphic system requirement image t o used texture precision qualiﬁer glsl following modiﬁers numeric variable declaration lowp mediump highp precision modiﬁer speciﬁes mi nimum number bit range value variable procedural texture texture value given set texture coordi nates computed mathematical function coordinate o pposed image texture value obtained sampling image programmable pipeline graphic processing pipeline process ing stage implemented program data ima ge pass sequence processing stage image end pro duct sequence called programmable pipeline used mod ern gpus provide ﬂexibility control programmer program programmable pipeline known shaders written shader programming l anguage glsl projection transformation map coordinate coordinate s projection used convert scene nsional image projection transformation graphic transformation map scene spac e image opengl projection map view vo lume region space visible image clip coordi nates value x y z range mapped image z coordinate provides depth glossary promise javascript javascript programming promise represents result t hat available immediately time future programmer provide afunctiontobecalledifandwhenthepromiseisfulﬁlled th atiswhentheresultbecomes available programmer provide function ca lled promise rejected forexample ifsomeerroroccurs promisesarea synchronoussincethefunction handle success failure called unpred ictable time quad quadrilateral ﬁgure plane op engl primitive glquads gl quadstrip drawing quad assumes checking vertex provided fact planar deﬁ ne quadrilateral convex quaternion vector quaternion algebra dimensio nal vector space vector addition added multipl ied computer graphic quaternion length used represent rotati ons advantage quaternion representation possible smoothl y interpolate rotation radial gradient color gradient pattern concentric circ le ellipsis constant color color variation th e radius circle raster graphic graphic image speciﬁed assig ning color pixel grid pixel rasterization process creating raster image pi xels data speciﬁes content image example ve ctor graphic image rasterized order displayed computer screen ray casting process following ray half inﬁnite li ne starting given point extending given direction order ﬁnd poin t intersection ray object scene usually intersection poin t closest starting point ray ray tracing recursive rendering algorithm us ray casting ra y cast viewpoint point image scene d etermine seen point determine color seen point ray cast point including reﬂected ray object specul ar reﬂections refracted ray object translucent shadow ray light source determine object illuminated light finding color reﬂected refracted ray use recursive application ray tracing algorithm graphic type computer graphic needed computer imation application image rendered quic kly time viewed computer animation graphic gen erally requires ability render scene time second reﬂection mapping environment mapping reﬂectivity proportion fraction incident light reﬂect ed object object diﬀerent reﬂectivities diﬀerent wavelen gths color object determined reﬂectivities wavelength refraction bending light pass transparent tra nslucent medium regular polygon polygon side length t angle consecutive side equal usually term re tricted simple polygon appendix glossary side intersect endpoi nt regular polyhedron polyhedron face regular polygon face angle identical ﬁve regular polyhed ra tetrahedron triangular face cube square face octahedr triangular face dodecahedron pentagonal face icosahedron triangular face renderbuﬀer webgl buﬀer region memory att ached framebuﬀer use color buﬀer depth buﬀer stencil b uﬀer rendering process producing image scene descripti technique output rendering operation w ritten directly texture webgl im plemented attaching texture buﬀers framebuﬀer rgba color rgb red green blue component val alpha component alpha component tak e specify degree transparency color maximal alpha value givi ng fully opaque color rgb color color speciﬁed number giving red g reen blue color coordinate coordinate space x y satisfy property point thumb r ight hand direction positive ﬁngers curl po sitive positive rule rule used determine positive direction ro tation axis space point thumb right hand th e direction axis ﬁngers curl direction positive angle s rotation note assumes axis direction opengl axis ro tation determined point point x y z directi axis x y z rotation geometric transform rotates point speciﬁed angle point axis sampler variable glsl variable shader program used l ookup image texture value sampler variable speciﬁes texture unit used lookup webgl sampler variable ty pe sampling operation mapping texture coordinate color fro m texture including using mipmaps available applying miniﬁcation mag niﬁcation ﬁlter necessary scalar product product number vector scalar product n umber s vector v vector obtained multiplying coord inate v s number x y z scalar product s time v vector sx sy sz scaling geometric transform multiplies coordinate point number called scaling factor scaling increase decrease size object move point closer farther origin scaling diﬀerent scaling factor n coordinate direction negative scaling factor used apply reﬂection scene description language language used specify graphic image stating s image scene created claratively statingappendix glossary contains opposed created procedurally program document written scene description language used genus te scene graph scene scene graph data structure represents object scene tog ether attribute object modeling transformation app lied object image scene created traversing scene graph da ta structure scene graph exist conceptually actual data s tructure program shader program executed stage rendering pipel ine opengl shaders written glsl programming language webgl ly vertex shaders fragment shaders supported webgpu compute sha ders used compute pipeline shadow mapping technique determining part scene illum inated shadow given light source technique nvolves rendering scene point view light source us o nly depth buﬀer rendering depth buﬀer shadow g iven direction light source object illuminated light t closest light distance object essentially encoded depth buﬀer object greater distance shadow shadow ray ray tracing algorithm ray cast point o n object direction light source determine point s illuminated light source shadow shear transform shear transformation leaf line l ﬁxed l ines perpendicular l tilted relative l angl description line parallel l mapped moved proportional distance shear transformation leaf s ome plane p ﬁxed map plane parallel p moved pro portional distance shininess material property determines size sharpness specular highlight called specular exponent way u sed lighting calculation opengl shininess number range single buﬀering opposed double buﬀering graphic technique whic h image drawn directly screen buﬀer serve s source screen image disadvantage single buﬀering mplex image user observe process drawing image skybox large cube surround scene textured imag e form background scene direction smooth shading lighting computation face polygon polygon al mesh us diﬀerent normal vector vertex polygon w hen polygon share vertex polygon use normal vector ver tex resulting smooth appearance vertex smooth shading appropriate wh en polygonal mesh used approximation smooth surface specular color material property represents proportion inci dent light reﬂected specularly surface specular exponent material property determines size sharpness specular highlight called shininess glossary specular highlight illumination surface produced specular reﬂection specular highlight seen point surface angle fro m surface viewer approximately equal angle surface ligh t source specular reﬂection reﬂection light ray surface ray light reﬂected ray direction make angle reﬂe ction equal angle incidence specular reﬂection seen viewer w hose position lie path reﬂected ray spotlight light emits cone illumination spotlight sim ilar point light position space light radiates tha t position light aﬀects object spotlight s cone illumination stack data structure operation push pop push ing item stack just add item stack popping stack r emove return item recently pushed stack storage buﬀer webgpu general purpose buﬀer gpu ed compute shaders vertex fragment shaders storage qualiﬁer glsl following modiﬁers variable declara tion uniform attribute varying const stroking shape drawing outline shape pen dragged th e boundary shape shape interior line segme nt stroking shape simply mean dragging pen shape subsurface scattering lighting eﬀect light enters slightly transluce nt object reﬂected internally time exit o bject diﬀerent point subsurface scattering contributes appearance mat erials jade milk skin svg scalable vector graphic xml language specifying d vector graphic svg scene description language designed integrate web page swizzler glsl wgsl notation v vector represents vector y z d x component technically use dot notation vector con idered swizzler texel pixel texture image texture variation property objec common type image texture image texture applied surfac e surface color varies point point texture coordinate refers coordinate texture image s imilar coordinate system texture texture coordina te typically range vertically horizontally lowe r left corner image term refers coordinate given surface nd used specify texture image mapped surface texture object data structure potentially stored graph ic card hold texture image set mipmaps conﬁgura tion data current setting miniﬁcation magniﬁcation ﬁlter using texture object make possible switch rapidly texture havi ng reload data graphic card texture repeat mode determines texture coordinate outside range t o treated sampling image texture texture imag e verticalappendix glossary horizontal coordinate range coord inates outside range texture repeat mode clamp clamp toedge example clamp coordinate range essentially extendi ng color edge image indeﬁnitely direction repeat mod e include repeat mirrored repeat texture target opengl kind texture image t exture texture cube map texture texture target speciﬁed b y constant gltexture gl texture cubemappositive texture target parameter opengl function work textur e texture transformation transformation applied texture coordinate fore used sample data texture eﬀect transla te rotate scale texture surface applied texture unit hardware component gpu doe texture lookup refer abstraction component ac tually implemented hardware map texture coordinate color fr om image texture operation called sampling texture unit asso ciated sampler variable glsl shader program javascript library graphic library implemen t scene graph api used primarily webgl render scene using canvas graphic api tmu texture mapping unit texture unit perha p stronger implication actual hardware support called tpu texture processing unit torus geometric object having shape doughnut bage l translation geometric transform add given translation coordinate point translation used object chang ing size orientation lighting option opengl allows face polygon h ave diﬀerent material property face whe n option normal vector used lighting calculation fac e taken negative vector face negative vector point s opposite direction typed array javascript array type limited holding nume rical value single type example type represents array hold ﬂoating point value array hold bit integer value array eﬃcient general javascript array n umerical calculation introduced javascript html canvas grap hics webgl uniform scaling scaling transformation scaling factor al l direction uniform scaling change size object witho ut distorting shape uniform variable variable represent input shader program prog rammable graphic pipeline uniform variable value e vertex pixel primitive unit normal normal vector length unit vector p erpendicular curve surface given point curve surface unit vector vector length unsigned byte data type representing integer value s taking value range glossary url uniform resource locator address resource th e world wide web example http vao vertex array object webgl region memory typic ally graphic card hold collection attribute setting enable d state value vertex attribute pointer setting selected simply binding vao varying variable variable used communicate value verte x shader fragment shader webgl opengl e graphic p ipeline varying variable assigned value vertex shader value o f variable fragment shader pixel primitive obtained interpolat ing value vertex primitive newer version glsl support dditional shader stage term varying variable replaced general t erms variable variable refer variable used input t o output shader vbo vertex buﬀer object block memory hold coor dinates attribute set vertex vbo stored gpu v bos make possible send data gpu reuse time opengl vbos used function gldrawarrays gldrawelement vector element vector space element vector space b e added multiplied constant computer graphic vector just list array containing number vector sense u sed represent point space properly vector represents quantity length direction vector used way visualized arrow vector graphic graphic image speciﬁed list shape object appear image vertex point deﬁne geometric primitive t endpoint line segment vertex triangle plural vertex speciﬁed coordinate giving x y coordi nates graphic x y z coordinate graphic vertex array opengl array used store coordinate othe r attribute value vertex used function gldrawarrays gldrawelements vertex array exists client opengl tra nsmitted gpu used java s jogl api opengl nio buﬀers used in tead array vertex buﬀer webgpu vertex buﬀer gpu data structure hold v alues used input vertex shader vertex shader shader program executed vertex n primitive vertex shader compute vertex coordinate cl ip coordinate compute property color viewing setting position orientation viewer wo rld determine visible image world rendered viewing transformation transformation graphic map world coordina te eye coordinate viewing transform establishes po ition orientation scale viewer world viewport rectangular area image graphic displayed coordinate viewport pixel coordinate properly called device coordinate actual physical coordinate t device image glossary viewport transformation opengl ﬁnal transformation clip coordinat e device coordinate viewport transformation map c lipping cube cube given x y z coordinate range viewport rectangle drawing surface image rendered view volume opengl region space visible ndered image orthographic projection view volume rectangu lar solid perspective projection view volume frustum truncated pyramid view window used book window view window graph ic rectangle contains portion pl ane displayed image corresponding term graphic view vo vulkan api graphic comp utation designed modern eﬃcient replacement opengl webgl graphic api use web page webgl program wri tten javascript programming language display image n html canvas element webgl based opengl e version opengl embedde d system change adapt javascript language web environment webgl extension optional capability webgl available implementation webgl api function checking w hether given extension available activating webgpu new javascript graphic api similar webgl design ed let web program access modern gpu capability compute sha ders wgsl webgpu shader language programming language wh ich shaders use webgpu written winding number winding number path point doe lie path number time path wind point unting rotation positive direction point turn negative direction minus compute winding numb er draw ray extending point inﬁnity crossing ray path count cross ray going positive direction negative cro ss negative direction wireframe style drawing polyhedron polygonal mesh ly edge drawn resulting image line segment world coordinate coordinate scene deﬁned image t hat producedofthescenewillshowthecontentsoftheworldcoor dinatesystemthatliewithin view volume view window object deﬁned object coordinate modeling transformation th en applied place object scene transform object coordinate t o world coordinate xml extensible markup language single language class language follow certain syntax rule example svg xml l anguage follows rule restriction synt ax make appropriate specifying graphic xml document like html docume nt structure deﬁned html xml l anguage doe follow syntax rule xhtml alternative lang uage web page similar html follows xml syntax rule