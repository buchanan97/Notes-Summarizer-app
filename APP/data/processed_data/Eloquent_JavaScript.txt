eloquentjavascript marijn haverbekecopyright marijn haverbeke work licensed creative common license http code bookmayalsobeconsideredlicensedunderanmitlicense http illustration contributed various artist cover péchane chapter illustration madalina tantareanu pixel art chapter antonio perdomo pastor regular expression diagram chapter generated jeff avallone game concept chapter bythomas palef buy print version book extra bonus chapter included printed starch press http icontents introduction programming language matter javascript code overview book typographic convention value type andoperators value number string unary operator boolean value value automatic type conversion summary programstructure expression statement binding binding name environment function function return value control flow conditional execution loop indenting code loop breaking loop iiupdating binding succinctly dispatching value switch capitalization comment summary exercise function defining function binding scope nested scope function value declaration notation arrow function stack optional argument closure recursion growing function function effect summary exercise datastructures objectsandarrays weresquirrel datasets property method object mutability lycanthrope s log computing correlation array loop final analysis arrayology string property rest parameter math object destructuring optional property access iiijson summary exercise abstraction abstracting repetition function script dataset filtering array transforming map summarizing reduce composability string character code recognizing text summary exercise thesecretlifeofobjects abstract data type method prototype class private property overriding derived property map polymorphism getters setter static symbol iterator interface inheritance instanceof operator summary exercise project arobot meadowfield task persistent data simulation ivthe mail truck s route pathfinding exercise bugsanderrors language strict mode type testing debugging error propagation exception cleaning exception selective catching assertion summary exercise regularexpressions creating regular expression testing match set character international character repeating part pattern grouping subexpressions match group date class boundary choice pattern mechanic matching backtracking replace method greed dynamically creating regexp object search method lastindex property parsing ini file code unit character summary exercise module modular program e module package commonjs module building bundling module design summary exercise asynchronousprogramming asynchronicity callback promise failure carla breaking async function generator corvid art project event loop asynchronous bug summary exercise project aprogramminglanguage parsing evaluator special form environment function compilation cheating exercise javascriptandthebrowser network internet web html html javascript viin sandbox compatibility browser war thedocumentobjectmodel document structure tree standard moving tree finding element changing document creating node attribute layout styling cascading style query selector positioning animating summary exercise handlingevents event handler event dom node event object propagation default action key event pointer event scroll event focus event load event event event loop timer debouncing summary exercise project aplatformgame game technology viilevels reading level actor drawing motion collision actor update tracking key running game exercise drawingoncanvas svg canvas element line surface path curve drawing pie chart text image transformation storing clearing transformation game choosing graphic interface summary exercise httpandforms protocol browser http fetch http sandboxing appreciating http security http form field focus disabled field form text field checkboxes radio button select field viiifile field storing data summary exercise project apixelarteditor component state dom building canvas application drawing tool saving loading undo history let s draw hard exercise background node command module installing npm filesystem module http module stream file server summary exercise project design long polling http interface server client exercise exercisehints program structure ixfunctions data structure object array function secret life object project robot bug error regular expression module asynchronous programming project programming language document object model handling event project platform game drawing canvas http form project pixel art editor project website x w e think creating purpose w e believe making image computer real ly like projection slim portion devoted logic order rule clarity ullman close machine technophilia discontent introduction book instructing computer computer common screwdriver today quite bit complex making want isn t easy task computer common showing email acting like calculator open appropriate application work unique task appropriate application programming come programming act structinga computer dumb pedantic beast programming fundamentally tedious frustrating fortunately maybe enjoy rigor thinking term dumb machine deal rewarding allows thing second foreverby hand way make computer tool thing couldn t make wonderful game puzzle solving abstract thinking programming programming language programming language artificially constructed language used instruct computer interesting effective way ve communicate computer borrows heavily way communicate like human language computer language allow word phrase combined new way making possible express new concept atonepoint suchasthebasicanddosprompts main method interacting computer routine computer use largely replaced visual face easier learn offer freedom know look language javascript built modern web available device book try make familiar language useful amusing thing explaining javascript introduce basic principle ming programming turn hard fundamental rule simple clear program built rule tend complex introduce rule complexity building maze way easily lost time reading book feel terribly frustrating new programming lot new material digest material combined way require make additional connection make necessary effort struggling follow book jump conclusion capability just need break reread material make sure read understand example program exercise learning hard work learn make learning easier action grows unprofitable gather information mation grows unprofitable sleep le guin left hand darkness program thing piece text typed programmer directing force make computer doe data computer s memory time control action performed memory analogy try compare program familiar object tend fall short superficially fitting compare program separate part tend involved make thing tick consider way part interconnect contribute operation computer physical machine act host immaterial machine computer stupidly straightforward thing reason useful thing incredibly high speed program ingeniously combine enormous number simple action complicated thing program building thought costless build weightless grows easily typing hand program grows doe complexity skill programming skill building program don t confuse programmer best program manage interesting easy understand programmer believe complexity best managed using small set technique program composed strict rule best practice prescribing form program carefully stay safe little zone ineffective new problem require new solution field programming young developing rapidly varied room wildly different approach terrible mistake make program design ahead make understand sense good program look like developed practice learned list rule whylanguagematters beginning birth computing programming guages program looked like program add number print result run simple hypothetical machine program early computer necessary set large array switch right position punch hole strip cardboard feed computer imagine tedious error prone procedure writing simple program required cleverness discipline complex one nearly inconceivable course manually entering arcane pattern bit one zero did programmer profound sense mighty wizard worth term job satisfaction line previous program contains single instruction written english like number memory location number memory location value memory location memory location number value memory location value memory location number continue tion value memory location memory location number value memory location instruction value memory location readable soup bit obscure using name instead number instruction memory location help set total set count loop set compare count subtract compare compare continue end add count total add count continue loop end output total program work point line memory location starting value totalwill used build result computation countwill track number currently looking line using compareare probably confusing one program want countis equal decide stop running hypothetical machine primitive test number zero make decision based us memory location labeled compare compute value ofcount make decision based value line add value countto result increment countby time program decides countis program javascript total count count total count count total version give improvement importantly need specify way want program jump forth whileconstruct take care continues executing block wrapped brace long condition given hold condition count mean count equal longer create temporary value compare zero just uninteresting power programming language care uninteresting detail attheendoftheprogram afterthe whileconstructhasfinished console used write result finally program look like happened convenient operation rangeand sumavailable respectively create collection number range compute sum collection number sum range moral story program expressed long short unreadable readable way version program extremely obscure english logthesumof rangeof number later chapter define operation like sumand range good programming language help programmer allowing talk action computer perform higher level help omit detail provides convenient building block whileand allows define building block sumand range make block easy compose whatisjavascript netscape navigator browser language adopted majorgraphicalwebbrowsers application interact directly doing page reload action javascript used traditional website provide various form interactivity cleverness important note javascript programming language named java similar inspired keting consideration good judgment javascript introduced java language heavily marketed gaining popularity thought good idea try ride success stuck adoption outside netscape standard document written way javascriptlanguage workso various piece software claimed support javascript make sure actually provided language called ecmascript standard ecma international organization conducted standardization practice term ecmascript javascript used name language say terriblethings javascript thing true required write javascript time quickly came despise accept typed interpret way completely different meant lot fact did clue doing course real issue javascript ridiculously liberal allows idea design make programming javascript easier beginner actuality make finding problem program harder point flexibility advantage leaf room technique impossible rigid language make pleasant informal style programming learning language properly working come actually likejavascript version javascript ecmascript version widely supported version javascript s ascent dominance roughly time work underway ambitious version planned number radical improvement extension language changing living widely used language radical way turned politically diﬀicult work version abandoned ambitious version uncontroversial improvement came version came major update included idea planned version ve new small update year fact javascript evolving mean browser constantly using older browser support feature language designer careful make change break existing program new browser run old program book m using version javascript web browser platform javascript used database mongodb couchdb use javascript scripting query language platform desktop server programming notably project subject chapter provide ronment programming javascript outside browser code andwhattodowithit codeis text make program chapter book contain quite lot code believe reading code writing code indispensable part learning program try just glance attentively understand slow confusing promise ll quickly hang go exercise don t assume understand ve actually written working solution recommend try solution exercise actual javascript interpreter way ll immediate feedback doing working hope ll tempted experiment exercise easiest way run example code experiment http click code example edit run output produce work exercise http code provides starting code coding exercise allows look solution running program defined book outside book s website requires care example stand work javascript environment code later chapter written specific environment browser run addition chapter define bigger program piece code appear depend external file sandbox website provides link zip file containing script data file necessary run code given chapter book contains roughly part chapter discus javascript language seven chapter web browser way javascript used program finally chapter devoted environment program javascript project chapter book larger example program taste actual programming language book start chapter introduce basic structure javascript language discus control structure whileword saw introduction function writing building block data structure able write basic program chapter technique use function object write abstract code complexity control afirst project chapter build crude delivery robot language book continues chapter error handling bug fixing regular expression important tool working text modularity defense complexity asynchronous programming dealing event time second project chapter implement programming language concludes book second book chapter describes tool browser javascript access ll learn display thing screen chapter respond user input chapter communicate network chapter project chapter building platform game apixel paint program chapter describes chapter build small website using tool typographicconventions book text written monospaced font represent element gram fragment just refer nearby program program seen written follows function factorial n n return return factorial n n output program produce expected output written slash arrow factorial good luck surface machine program move effort expands contract great harmony electron scatter regroup form monitor ripple water essence stay invisibly book programming value type andoperators computer s world data read data modify data create new isn t data mentioned data stored long sequence bit fundamentally alike bitsare kind thing usually described zero one inside computer form high low electrical charge strong weak signal shiny dull spot surface cd piece discrete information reduced sequence zero one represented bit example express number bit work way decimal number instead different digit weight increase factor right left bit make number weight digit shown s binary number nonzero digit stand add value imagine sea ocean typical modern computer billion bit volatile data storage working memory nonvolatile storage theharddiskorequivalent tendstohaveyetafewordersofmagnitude able work quantity bit getting lost separate chunk represent piece information javascript environment thosechunksarecalled value thoughallvaluesaremadeofbits play different role value type determines role value number value piece text value function create value merely invoke convenient don t gather building material value pay just whoosh course value really created air stored want use gigantic number time run computer memory fortunately problem need simultaneously soon longer use value dissipate leaving bit recycled building material generation value remainder chapter introduces atomic element javascript program simple value type operator act value number value numbertype unsurprisingly numeric value javascript program written follows using program cause bit pattern number come existence inside computer s memory javascript us fixed number bit store single number value pattern make bit limit number different number represented ndecimal digit represent similarly given binary digit represent number quintillion zero s lot computer memory used smaller people tended use group bit represent number easy accidentally overflow small end number did fit given number bit today computer fit pocket plenty memory free use chunk need worry overflow dealing truly astronomical number number quintillion fit javascript number bit store negative number bit indicates sign number bigger issue representing nonwhole number bit used store position decimal point actual maximum number stored range quadrillion zero pleasantly huge fractional number written using dot big small number use scientific notation adding e exponent followed exponent number s calculation number called integer smaller aforementioned quadrillion guaranteed precise tunately calculation fractional number generally just π pi precisely expressed finite number decimal digit bers lose precision bit available store shame cause practical problem specific situation important thing aware treat fractional digital number approximation precise value arithmetic main thing number arithmetic arithmetic operation asadditionormultiplicationtaketwonumbervaluesandproduceanewnumber look like javascript symbol called operator stand addition second stand multiplication putting operator value apply value produce new value doe example mean add multiply result multiplication adding guessed multiplication happens mathematics change wrapping addition parenthesis subtraction division operator operator appear parenthesis order applied determined precedence operator example show multiplication come addition precedence likewise precedence multiple precedence appear applied left right don t worry precedence rule doubt just add parenthesis arithmetic operator immediately recognize symbol used represent remainder operation x y remainder dividing xbyy example produce give remainder operator s precedence multiplication division ll operator referred modulo specialnumbers special value javascript considered number don t behave like normal number infinity represent positive negative infinity infinity infinity don t trust computation isn t mathematically sound quickly lead special number nan nanstands number isa value number type llgetthisresultwhenyou forexample trytocalculate zerodivided byzero infinity infinity oranynumberofothernumericoperationsthat don t yield meaningful result string basic data type string string used represent text written enclosing content quote sea lie ocean ocean use single quote double quote backticks mark string long quote start end string match quote javascript make string value character diﬀicult imagine putting quote quote hard look like end string newlines character press enter included string quoted backticks make possible include character string following notation used backslash inside quoted text indicates character special meaning called escaping character quote preceded backslash end string anncharacter occurs backslash interpreted newline similarly atafter backslash mean tab character following string second actual text string line second thereare ofcourse situationswhereyouwantabackslashinastringtobejust backslash special code backslashes follow collapse left resulting string value string newline character written like expressed newline character written like string modeled series bit able exist inside computer way javascript doe based unicodestandard standard assigns number virtually character need including character greek arabic japanese armenian number character string described sequence number s javascript doe s complication javascript s representation us bit string element character unicode defines character twice point character emoji character position javascript string ll come chapter string divided multiplied subtracted canbe used add concatenate glue string following line produce string concatenate cat e nate string value number associated function method used perform operation ll say chapter string written single double quote behave difference lie type quote need escape inside string usually called template literal trick apart able span line embed value half write inside template literal result computed converted string included position example produce string half unaryoperators operator symbol written word example typeofoperator produce string value naming type value typeof number typeof x string use example code indicate want result evaluating chapter operator shown far chapter operated value typeoftakes operator use value called binary operator called unaryoperators minus operator used binary operator unary operator booleanvalues useful value distinguishes tie like yes purpose javascript booleantype just value true false written word comparison way produce boolean value true false sign traditional symbol greater respectively binary operator applying result boolean value indicates hold true case string compared way aardvark zoroaster true way string ordered roughly alphabetic really d expect dictionary uppercase letter lowercase one z nonalphabetic character included ordering comparing string javascript go character left right comparing unicode code similar operator greater equal equal equal equal garnet ruby true pearl amethyst false value javascript equal nan number nan nan false nanis supposed denote result nonsensical computation isn t equal result othernonsensical computation logicaloperators operation applied boolean value self javascript support logical operator used reason booleans operator represents logical binary operator result true value given true true false false true true true denotes logical produce true value given true false true true false false false notis written exclamation mark unary operator flip value given trueproduces falseand falsegives true mixing boolean operator arithmetic operator obvious parenthesis needed practice usually knowing operator seen far lowest precedence come comparison operator rest order chosen typical expression like following parenthesis possible necessary logical operator look unary binary ternary operating value written question mark colon like true false called conditional operator just ternary atorsince operator language operator us value left question mark decide value pick write b c result bwhen ai true c emptyvalues special value written nulland undefined used denote absence meaningful value value carry information operation language don t produce meaningful value yield undefined simply yield somevalue difference meaning undefined nullis accident javascript s design doesn t matter time case actually concern value recommend treating interchangeable automatictypeconversion theintroduction mentioned javascript go way accept program program odd thing nicely demonstrated following expression null nan false true operator applied wrong type value javascript quietly convert value type need using set rule aren t want expect called type coercion nullin firstexpressionbecomes inthesecondexpressionbecomes string number expression string concatenation numeric addition converted number string doesn t map number obvious way orundefined converted number value nan arithmetic operation nankeep producing nan getting unexpected place look accidental type conversion comparing value type using outcome easy predict true value case nan type differ javascript us complicated confusing set rule determine case just try convert value value s type nullor undefined occurs operator produce true side nullorundefined null undefined true null false behavior useful want test value real value instead nullorundefined compare nullwith whatifyouwanttotestwhethersomethingreferstotheprecisevalue false expressionslike false false arealsotruebecauseofautomatic type conversion notwant type conversion happen additional operator test value precisely equal second test precisely equal false false expected recommend using comparison operator defensively prevent unexpected type conversion tripping certain type side problem using shorter operator logical operator value different type peculiar way convert value left boolean type order decide depending operator result conversion return original value hand value example return value left value converted true return value right expected effect value boolean doe analogous value type null user user agnes user agnes use functionality way fall default value value replacement value initial value converted false ll replacement instead rule converting string number boolean value state nan string count false value count true mean produce yield operator resembles return value right left nullorundefined value converted false preferable behavior null operator work similarly way value left convert false return value return value right important property operator right evaluated necessary case true x matter s piece program doe result true xi evaluated go false x false ignore called evaluation conditional operator work similar way second value selected evaluated summary looked type javascript value chapter number string booleans undefined value value created typing true null value abc combine transform value operator saw binary erators arithmetic string concatenation comparison logic unary operator negate number negate logically typeofto value s type ternary operator pick value based value give information use javascript pocket calculator butnotmuchmore nextchapter willstarttyingtheseexpressionstogether basic program heart glow bright red filmy translucent skin administer javascript come respond wel l toxin blood man stuff wil l kick peach right gil l s poignant guide ruby programstructure chapter start thing actually called ming expand command javascript language noun sentence fragment ve seen far point express meaningful prose expressionsandstatements inchapter value applied operator new value creating value like main substance javascript program substance framed larger structure useful s ll cover chapter fragment code produce value called expression value written literally psychoanalysis expression expression parenthesis expression binary operator applied expression unary operator applied show beauty interface expression contain expression way similar subsentences human language subsentence contain subsentences allows build expression arbitrarily complex computation expression corresponds sentence fragment javascript statement corresponds sentence program list statement simplest kind statement expression semicolon program false useless program expression content just produce value used enclosing code statement stand doesn t affect world s useless display screen change state chine way affect statement come change called effect statement previous example just produce value trueand immediately throw away leaf impression world run program observable happens case javascript allows omit semicolon end statement case line treated statement rule safely omitted somewhat complex error prone book statement need semicolon recommend ve learned subtlety missing semicolon binding doe program internal state doe remember thing seen produce new value old value doe change old value new value used immediately dissipate catch hold value javascript provides thing called binding variable let caught give second kind statement special word keyword let indicates sentence going define binding followed binding want immediately value operator expression example creates binding called caughtand us grab hold number produced multiplying binding defined used expression value expression value binding currently hold s example let binding point value doe mean tied value forever used time existing binding connect current value point new let mood light mood light mood dark mood dark imagine binding tentacle box containvalues binding refer value program access value reference need remember grow tentacle hold reattach existing tentacle let s look example remember number dollar luigi owes create binding pay binding new value let luigisdebt luigisdebt luigisdebt luigisdebt define binding giving value tentacle grasp end air ask value binding ll value undefined single letstatement define multiple binding definition separated comma let word varand constcan used create binding similar fashion let var ayda const greeting hello greeting hello ayda var short variable way binding declared javascript letdidn t exist ll precise way differs letin thenext chapter remember doe thing ll rarely use book behaves oddly situation word conststands constant defines constant binding value long life useful binding just value easily refer later bindingnames binding name sequence letter digit binding valid start digit binding include dollar sign underscore punctuation special character word special meaning let keywords used binding name number word reserved use future version javascript t used binding name list keywords reserved word long break case catch class const continue debugger default delete enum export extends false finally function implement import interface instanceof let new package private protected public return static super switch throw true try typeof var void yield don t worry memorizing list creating binding produce unexpected syntax error check trying define reserved word theenvironment collection binding value exist given time called environment program start environment alwayscontainsbindingsthatarepartofthelanguagestandard andmostofthe time binding provide way interact surrounding example browser function interact currently loaded website read mouse keyboard input function lot value provided default environment type function function piece program wrapped value value applied order run wrapped program example browser environment binding promptholds function show little dialog asking user input used like enter passcode executing function called invoking cal ling applying function putting parenthesis expression produce function value usually ll directly use binding hold function value parenthesis given program inside function example promptfunction us string text dialog box value given function called argument differentfunctionsmightneed adifferentnumberordifferent type argument promptfunction isn t used modern web programming control way resulting dialog look helpful toy program experiment example used output value javascript tems including modern web browser provide function writes argument sometext output device browser output land javascript console browser interface hidden default browser open press mac command doe work search menu item named developer tool similar binding name contain period character doe isn t simple binding expression retrieves logproperty value held console binding ll exactly mean chapter returnvalues showing dialog box writing text screen effect function useful effect produce function produce value case don t need effect useful example function take number argument give greatest whenafunctionproducesavalue itissaidto returnthatvalue anythingthat produce value expression javascript mean function call used larger expression following code opposite used plus expression chapter explain write function controlflow program contains statement statement executed story example following program statement asks user number second executed show square number let thenumber number prompt pick number number square root thenumber thenumber function numberconverts value number need conversion result promptis string value want number similar function called stringand boolean convert value type trivial schematic representation control flow conditionalexecution program straight road example want create branching road program take proper branch based situation hand called conditional execution execution created ifkeyword javascript simplecase wewantsomecodetobeexecutedif andonlyif acertaincondition hold example want square input input actually number let thenumber number prompt pick number thenumber number square root thenumber thenumber modification enter parrot output shown ifkeyword executes skip statement depending value boolean expression deciding expression written keyword parenthesis followed statement execute function standard javascript function return trueonly argument given nan numberfunction happens return nanwhen string doesn t represent valid number condition translates unless thenumber statement ifis wrapped brace example brace used group number statement single ment called block omitted case hold single statement avoid having think needed javascript programmer use wrapped ment like ll follow convention book occasional true true won t just code executes condition hold true code handle case alternate path represented second arrow diagram use elsekeyword create separate alternative execution path let thenumber number prompt pick number thenumber number square root thenumber thenumber hey did number path choose chain multiple s example let num number prompt pick number num small num medium large program check numis chooses branch show small isn t take elsebranch contains second second condition hold mean number medium shown doesn t second elsebranch chosen schema program look like whileanddoloops consider program output number way write follows work idea writing program make lesswork needed number approach unworkable need way run piece code multiple time form control flow called loop looping control flow allows point program repeat current program state combine binding count like let number number number number number etcetera statement starting keyword whilecreates loop word followed expression parenthesis statement like loop keep entering statement long expression produce value give truewhen converted boolean numberbinding demonstrates way binding track progress program time loop repeat numbergets value previous value beginning repetition compared number decide program s work finished example actually doe useful write program calculates show value power use binding track result count multiplied result loop test second binding reached update binding let result let counter counter result result counter counter result counter started checked reason itisagoodideatogetusedtocounting note javascript operator exponentiation use compute real ruined example adoloop control structure similar whileloop differs point doloop executes body start testing stop execution reflect test appears body loop let yourname yourname prompt yourname hello yourname program force enter ask get string applying operator convert value boolean type negating string convert true mean loop continues going round provide indentingcode example ve adding space statement larger statement space computer accept program just fine fact line break program optional write program single long line felt like role indentation inside block make structure code stand human reader code new block opened inside block hard block end begin proper indentation visual shape program corresponds shape block inside like use space open block taste people use space people use tab character important thing new block add space false true make sense surprise code editor program help automatically indenting new line proper forloops loop follow pattern shown whileexamples counter binding created track progress loop come whileloop usually test expression check counter reached end value end loop body counter updated track progress pattern common javascript similar language provide slightly shorter comprehensive form forloop let number number number number number etcetera thisprogramisexactlyequivalenttothe change statement related state loop grouped parenthesis forkeyword contain semicolon semicolon initializes loop usually defining binding second expression checkswhether loop continue final updatesthe state loop iteration case shorter clearer whileconstruct code computes forinstead let result let counter counter counter counter result result result having looping condition produce falseis way loop finish breakstatement effect immediately jumping enclosing loop use demonstrated following program find number greater equal divisible let current current current current current break using remainder operator easy way test number divisible number remainder division zero forconstruct example doe check end loop mean loop stop unless break statement inside executed remove breakstatement accidentally write end condition produce true program stuck infinite loop program stuck infinite loop finish running usually bad thing continue keyword similar breakin influence progress loop continue encountered loop body control jump body continues loop s iteration updatingbindingssuccinctly especially looping program need update binding hold value based binding s previous value counter counter javascript provides shortcut counter similarshortcutsworkformanyotheroperators suchas result todouble resultorcounter count downward allows shorten counting example let number number number number forcounter andcounter thereareevenshorterequivalents counter counter dispatchingonavaluewithswitch uncommon code look like x x x defaultaction construct called switchthat intended express patch direct way unfortunately syntax javascript us inherited line programming language somewhat chain ifstatements look better example switch prompt weather like case rainy remember bring umbrella break case sunny dress lightly case cloudy outside break default unknown weather type break number caselabels inside block opened switch program start executing label corresponds value switchwas given default matching value continue executing label reach breakstatement case sunny case example used share code case recommends going outside sunny cloudy weather careful easy forget break cause program execute code want executed binding name contain space helpful use multiple word clearly binding represents pretty choice writing binding word fuzzylittleturtle fuzzylittleturtle fuzzylittleturtle style hard read like look underscore style little painful type standard javascript function javascript programmer follow final capitalize word hard used little thing like code mixed naming style jarring read follow convention case numberfunction letter binding capitalized mark function constructor clear constructor chapter important thing bothered apparent lack consistency comment raw code doe convey information want program convey human reader conveys cryptic way people understand time just want include related thought program comment comment piece text program completely ignored computer javascript way writing comment write comment use slash character comment text let accountbalance calculatebalance account green hollow river sings madly catching white tatter grass let report new report sun proud mountain ring addtoreport accountbalance report little valley foaming like light glass go end line section text ignored entirety regardless contains line break useful adding block information file chunk program number scrawled old notebook dropped showing phone number serial number product bought obviously like decided const mynumber summary know program built statement contain statement statement tend contain expression built smaller expression putting statement give program executed introduce disturbance flow control using conditional switch looping statement binding used file piece data useful tracking state program environment set binding defined javascript system number useful standard binding environment function special value encapsulate piece program invoke writing functionname function expression produce value exercise unsure test solution exercise refer duction exercise start problem description read description try solve exercise run problem consider reading hint theend book solution exercise online http want learn exercise recommend looking solution ve solved ve attacked long hard slight headache loopingatriangle write loop make seven call output following triangle useful know length string writing let abc abc fizzbuzz write program us print number exception number divisible print fizz instead number number divisible print buzz instead working modify program print fizzbuzz number divisible print fizz buzz number divisible actually interview question claimed weed significant percentage programmer candidate solved labor market value just went chessboard usingnewline character separate line position grid space character character form chessboard passing string like program generates pattern define binding size change program work size outputting grid given width height people think computer science art genius actual reality opposite just people doing thing build like wal l mini stone knuth function function central tool javascript programming concept wrapping piece program value us give way structure larger program reduce repetition associate name subprogram isolate subprogram obvious application function defining new vocabulary ating new word prose usually bad style programming pensable typical adult english speaker word vocabulary programming language come command built vocabulary isavailable tends precisely defined flexible human language haveto introduce new word avoid excessive verbosity definingafunction function definition regular binding value binding function example code defines squareto refer function produce square given number const square function x return x x square function created expression start keyword function function set parameter case x body contains statement executed function called body function created way wrapped brace consists single statement function multiple parameter parameter lowingexample makenoise doesnotlistanyparameternames roundto round nto nearest multiple step list const makenoise function pling makenoise pling const roundto function n step let remainder n step return n remainder remainder step step roundto function roundtoand square produce value don t makenoise result effect returnstatement determines value function return control come statement immediately jump current function give returned value code called function returnkeyword expression cause function return undefined function don t returnstatement makenoise similarly return undefined parameter function behave like regular binding initial value given cal lerof function code function bindingsandscopes binding scope program binding visible binding defined outside function block module chapter scope refer binding want called global binding created function parameter declared inside function referenced function known localbindings ery time function called new instance binding created provides isolation function act little world local environment understood knowing lot s going global environment declared letand constare fact local blockin declared create inside loop code loop javascript function created new scope binding created varkeyword visible function global scope function let x global true let y local block var z global scope look scope xi visible inside block example exception multiple binding case code innermost example code inside halvefunction refers n seeing n global const halve function n return n let n halve n nestedscope javascript distinguishes just global local binding block tions created inside block function producing multiple grees locality example output ingredient needed make batch function inside const hummus function factor const ingredient function unit let ingredientamount factor ingredientamount unit s ingredientamount unit ingredient chickpea ingredient cup tahini ingredient cup lemon juice ingredient clove garlic ingredient tablespoon olive oil ingredient teaspoon cumin code inside ingredient function factorbinding outer function local binding unitoringredientamount visible outer function set binding visible inside block determined place blockintheprogramtext eachlocalscopecanalsoseeallthelocalscopesthat contain scope global scope approach binding visibility called lexical scoping functionsasvalues function binding usually simply act specific piece program binding defined changed make easy confuse function different function value thing value use arbitrary expression just possible store function value new binding pas argument function similarly binding hold function just regular binding constant assigned new value like let launchmissiles function safemode launchmissiles function inchapter ll discus interesting thing passing function value function slightly shorter way create function binding function keyword used start statement work differently function square x return x x function declaration statement defines binding squareand point given function slightly easier write doesn t require semicolon function subtlety form function definition future say future function future return flying car preceding code work function defined belowthe code us function declaration regular flow control conceptually moved scope used code scope useful offer freedom order code way clearest worrying having define function used arrowfunctions s notation function look different instead function keyword us arrow equal sign character confused operator written const roundto n step let remainder n step return n remainder remainder step step arrow come afterthe list parameter followed function s body express like input parameter produce result body parameter omit parenthesis parameter list body single expression brace expression returned function definition squaredo thing const x return x x const x x x arrow function parameter parameter list just set parenthesis const horn toot s deep reason arrow function function expression language apart minor ll discus chapter thing arrow function added make possible write small function expression verbose way ll use chapter thecallstack way control flow function somewhat involved let s closer look simple program make function call function greet hello greet harry bye run program go roughly like greetcauses control jump start function line function call console whichtakescontrol doesitsjob reach end greetfunction return place called line call return program reach end flow control schematically like function greet greet function function function jump place called return computer remember context happened case return greetfunction case return end program place computer store context cal l stack time function called current context stored stack function return remove context stack us context continue execution storing stack requires space computer s memory stack grows big computer fail message like stack space recursion following code illustrates asking computer really hard question cause infinite function wouldbe infinite computer infinite stack run space blow stack function chicken return egg function egg return chicken chicken came optionalarguments following code allowed executes problem function square x return x x square true hedgehog defined squarewith parameter language doesn t complain ignores extra argument computes square javascript extremely number argument pas function pas extra one ignored pas missing parameter assigned value undefined downside ll tallypassthewrongnumberofargumentstofunctions andnoonewilltellyou upside use behavior allow function called different number argument example minusfunction try imitate acting argument function minus b b undefined return return b minus minus write parameter followed expression value expression replace argument given example version roundto make second argument optional don t provide pas value undefined default function roundto n step let remainder n step return n remainder remainder step step roundto roundto thenext chapter introduce way function body list argument passed helpful allows function accept number argument example doe outputting value given c o c o closure ability treat function value combined fact local binding time function called brings interesting question happens local binding function created longer active itdefinesafunction wrapvalue thatcreatesalocalbinding itthenreturnsafunctionthataccessesandreturns local binding function wrapvalue n let local n return local let wrapvalue let wrapvalue allowed work d instance binding accessed situation good demonstration fact local binding created anew different call don t affect s local binding able reference specific instance local binding enclosing called closure function reference binding local scope called aclosure behavior free having worry lifetime binding make possible use function value creative way slight change turn previous example way create function multiply arbitrary function multiplier factor return number number factor let twice multiplier twice theexplicit localbindingfromthe wrapvalue exampleisn treallyneededsince parameter local binding thinkingaboutprogramslikethistakessomepractice agoodmentalmodel think function value containing code body environment created called function body see environment created environment called previous example multiplier called creates environment factorparameter bound function value return stored twice remembers environment called multiplies argument recursion perfectly okay function long doesn t overflow stack function call called recursive recursion allows function written different style example powerfunction doe exponentiation operator function power base exponent exponent return return base power base exponent power close way mathematician define exponentiation guably describes concept clearly loop used chapter function call multiple time smaller exponent achieve repeated multiplication implementation problem typical javascript plementations s time slower version using forloop running simple loop generally cheaper calling function multiple time dilemma speed versus elegance interesting kind continuum mostanyprogramcanbemadefasterbymakingitbiggerandmoreconvoluted programmer appropriate balance case powerfunction inelegant looping version fairly simple easy read doesn t make sense replace sive function program deal complex concept giving eﬀiciency order make program straightforward helpful worrying eﬀiciency distraction s factor program design doing s diﬀicult extra thing worry paralyzing generally start writing s correct easy understand worried s usually isn t code simply isn t executed significant measure afterward improve necessary recursion just ineﬀicient alternative looping lem really easier solve recursion loop problem require exploring processing branch branch branch consider puzzle starting number repeatedly adding multiplying infinite set number produced write function given number try sequence addition multiplication produce number example number reached multiplying adding twice number reached recursive solution function findsolution target function current history current target return history current target return null return current history current history return findsolution note program doesn t necessarily shortest sequence ations satisfied find sequence s okay don t code work right away let s work make great exercise recursive thinking inner function finddoes actual recursing take argument current number string record reached number find solution return string show target solution starting number return null function performs action current number target number current history way reach target returned current number greater target s sense exploring branch adding multiplying make number bigger return null finally targetnumber thefunctiontriesbothpossiblepathsthatstartfromthecurrent number calling twice addition multiplication return null returned second returned regardless produce string null better understand function produce effect looking let s look call findthat searching solution number big big big indentation indicates depth stack time findis called function start calling explore solution start recurse explore everycontinued solution yield number equal target number doesn t hit target return nullback operator cause explores happen search recursive anotherrecursive hit target number innermost return string operator intermediate call pass string ultimately returning solution natural way function introduced program occurs writing similar code multiple time dprefernottodothat ashavingmorecodemeansmorespaceformistakes hide material read people trying understand program repeated functionality good function thesecondwayisthatyoufindyouneedsomefunctionalitythatyouhaven t written sound like deserves function start naming function write body start writing code us function actually define function diﬀicult good function good indication clear concept trying wrap let s example want write program print number number cow chicken farm word cowsand chicken zero padded number digit long cow chicken asks function number cow number chicken let s coding function printfarminventory cow chicken let cowstring string cow cowstring cowstring cowstring cow let chickenstring string chicken chickenstring chickenstring chickenstring chicken printfarminventory writing string expression length string whileloops adding zero number string character long accomplished just send farmer code hefty invoice call tell s started keeping pig couldn t extend software print pig sure just process copying pasting line time stop reconsider better way s attempt function printzeropaddedwithlabel number label let numberstring string number numberstring numberstring numberstring label function printfarminventory cow chicken pig printzeropaddedwithlabel cow cow printzeropaddedwithlabel chicken chicken printzeropaddedwithlabel pig pig printfarminventory work printzeropaddedwithlabel little awkward conflates adding gle function instead lifting repeated program wholesale let s try pick single concept function zeropad number width let string string number width string string return string function printfarminventory cow chicken pig zeropad cow cow zeropad chicken chicken zeropad pig pig printfarminventory function nice obvious like zeropadmakes easier read code figure doe function useful situation just specific program example use help print nicely aligned table number smart versatile shouldour function write terribly simple function pad number ters wide complicated generalized handle fractional number negative number alignment decimal dot padding different character useful principle refrain adding cleverness unless solutely sure going need tempting write general framework bit functionality come resist urge won t real work ll busy writing code use functionsandsideeffects function roughly divided called effect called return value possible effect return value helper function farm example printzeropaddedwithlabel called effect print line second version zeropad called return value coincidence second useful situation function create value easier combine new way function directly perform effect purefunction specific kind function effect doesn t rely effect example doesn t read global binding value change pure function pleasant property called argument produce value doesn t function substituted return value changing meaning code sure pure function working correctly test simply calling know work context work context nonpure function tend require scaffolding test s need feel bad writing function pure effect useful s way write pure version console example good operation easier express eﬀicient way use effect chapter taught write function function word used expression create function value used statement used declare binding function value arrow function way create function define f hold function value const f function declare g function function g b return b verbose function value let h key understanding function understanding scope block creates new scope parameter binding declared given scope local visible outside binding declared varbehave end nearest function scope global scope separating task program performs different function ful won t repeat function help organize program grouping code piece specific thing exercise minimum theprevious chapter introduced standard function return smallest argument write function like define function minthat take argument return minimum recursion veseenthatwecanuse theremainderoperator totestwhetheranumber odd using s divisible s way define positive number odd odd number n evenness define recursive function isevencorresponding description functionshouldacceptasingleparameter apositive wholenumber andreturn boolean test behaves think way fix beancounting nth character letter string writing n string example string resulting value string containing character example b character position cause position word string length character position write function called countbsthat take string argument return number indicates uppercase b character string write function called countchar behaves like countbs take second argument indicates character counted counting uppercase b character rewrite countbsto make use new function occasion asked pray babbage machine wrong figure wil l right answer come able rightly apprehend kind confusion idea provoke question babbage passage life philosopher datastructures objectsandarrays number booleans string atom data structure built type information require atom jectsallow group build complex structure program built far limited fact operating simple data type learning basic data structure chapter ll know start writing useful program chapter work realistic programming example introducing concept apply problem hand example code build function binding introduced earlier book theonlinecodingsandboxforthebook http provides way run code context particular chapter decide toworkthroughtheexamplesinanotherenvironment besuretofirstdownload code chapter sandbox page theweresquirrel usually jacques find transforming small furry rodent bushy tail hand jacques quite glad doesn t classic lycanthropy turning squirrel doe cause fewer problem turning wolf instead having worry accidentally eating neighbor thatwould awkward worry eaten neighbor s cat occasion waking precariously branch crown oak naked disoriented taken locking door window room night putting walnut floor busy jacques prefer rid condition entirely irregular occurrence transformation make suspect gered believed happened day near oak tree avoiding oak tree did solve problem switching scientific approach jacques started keeping daily log doe given day changed form data hope narrow condition trigger tions thing need data structure store information datasets work chunk digital data way represent machine s memory say example want represent collection number creative string length asourrepresentation butthisisawkward dhavetosomehowextractthedigitsandconvertthem number access fortunately javascriptprovidesadatatypespecificallyforstoringsequences value called arrayand written list value square bracket separated comma let listofnumbers listofnumbers listofnumbers listofnumbers notation getting element inside array us square ets pair square bracket immediately expression expression inside look element expression corresponds indexgiven expression bracket index array zero element retrieved listofnumbers counting long tradition technology certain way make lot sense take getting used think index number item skip counting start array veseenafewexpressionslike togetthelengthofastring maximum function past chapter expression access property value case access lengthproperty value mystring second access property named maxin mathobject collection constant function javascript value property exception nulland undefined try access property nonvalues error typeerror null property main way access property javascript dot square bracket value x access property necessarily property difference xi interpreted using dot word dot literal property using square bracket expression bracket evaluated property fetch property value named x value x take value variable named xand us converted string property know property interested called color say want extract property named value held binding say value property name string string dot notation work name look like valid binding letter underscore containing letter number underscore want access property named john doe use square bracket value orvalue john doe element array stored array s property using number property name t use dot notation number usually want use binding hold index use bracket notation just like string array lengthproperty tell ments array method string array value contain addition lengthproperty number property hold function value doh doh typeof function doh string touppercase property called return copy string letter converted uppercase tolowercase going way interestingly touppercase doe pas ments function access string doh value property called ll work chapter property contain function generally called method value belong touppercase method string example demonstrates method use manipulate array let sequence sequence sequence pushmethod add value end array popmethod doe opposite removing value array returning somewhat silly name traditional term operation stack stack programming data structure allows push value pop opposite order thing added removed stack common remember function stack previous chapter instance idea object weresquirrel set daily log entry represented array entry consist just number entry need store list activity boolean value indicates jacques turned squirrel ideally like group single value grouped value array entry value type objectare arbitrary collection property way create object using brace expression let squirrel false event work touched tree pizza running false undefined false false inside brace write list property separated comma property followed colon value object written multiple line indenting shown example help readability property name aren t valid binding name valid number quoted let description work went work touched tree touched tree mean brace twomeanings javascript start statement begin block statement position object fortunately rarely useful start statement object brace ambiguity problem case doe come want return object shorthand arrow t write n prop n brace interpreted function body instead set parenthesis object make clear expression reading property doesn t exist value undefined possible assign value property expression replace property s value existed create new property object didn t briefly return tentacle model binding similar graspvalues binding property holding value think object octopus number tentacle written deleteoperator cut tentacle octopus unary operator applied object property remove named property object common thing possible let anobject left right delete undefined left anobject false right anobject true binary inoperator applied string object tell object property difference setting property undefined actually deleting case object hasthe property just doesn t interesting value second case property longer present inwill return false property object use function function object return array object s property name x y z x y z s function copy property object let objecta b objecta b c objecta b c array arejustakindofobjectspecializedforstoringsequencesofthings evaluate typeof produce object visualize array long flat octopus tentacle neat row labeled number jacques represent journal jacques keep array object let journal event work touched tree pizza running television squirrel false event work ice cream cauliflower lasagna touched tree brushed teeth squirrel false event weekend cycling break peanut beer squirrel true mutability actual programming soon s piece theory understand saw object value modified type value discussed earlier chapter number string booleans immutable impossible change value type combine derive new value specific string value value remain text inside changed string contains cat possible code change character string make spell rat object work differently canchange property causing single object value different content different time number consider precisely number refer physical bit object difference having reference object having different object contain property consider following code let value let let value true false grasp sameobject change value said identity binding different object initially contains property life separate life binding changeable constant separate way value behave number value don t change use letbinding track changing number changing value binding point similarly constbinding object changed continue point object content object change const score visitor home okay allowed score visitor home compare object javascript s compare tity produce trueonly object precisely value comparing different object return false identical erties deep comparison operation built javascript compare object content possible write exercise end chapter jacques start javascript interpreter set environment need journal let journal function addentry event squirrel event squirrel notethattheobjectaddedtothejournallooksalittleodd insteadofdeclaring property like event event just give property event shorthand mean property brace notation isn t followed value value taken binding evening morning climbing shelf record day work touched tree pizza running television false addentry work ice cream cauliflower lasagna touched tree brushed teeth false addentry weekend cycling break peanut beer true data point intends use statistic event related squirrelifications correlation measure dependence statistical variable tistical variable quite programming variable statistic typically set measurement variable measured measurement correlation variable usually expressed value range zero correlation mean variable related correlation indicates perfectly know know negative mean variable perfectly related true false compute measure correlation boolean variable use phi coeﬀicient φ formula input frequency table containing number time different combination variable observed output formula number describes correlation event eating pizza frequency table like number indicates number time combination occurred measurement squirrel pizza squirrel pizza squirrel pizza squirrel pizza table n compute φusing following formula point putting book focus terrible flashback grade math intend torture endless cryptic s just formula turn javascript notation number measurement able squirrelness false second variable pizza true pizza table value sum measurement variable true example table likewise sum measurement second variable false pizza table division line dividend divisor square root come tiny eating pizza doe appear influence transformation computingcorrelation represent table javascript array wecouldalsouseotherrepresentations oranobjectwithproperty name like flat array simple make sion access table pleasantly short ll interpret index array binary number leftmost significant digit refers squirrel variable rightmost significant digit refers event variable example binary number case jacques did turn squirrel event say pizza didn t cur happened time binary decimal notation store number index array function computes φcoeﬀicient array function phi table return table table table table table table table table table table table table phi direct translation φformula javascript square root function provided mathobject standard javascript add field table field like sum row column stored directly data ture jacques keep journal month resulting dataset available thecoding sandbox chapter http stored journal binding downloadable file extract table specific event journal loop entry tally time event occurs relation squirrel transformation function tablefor event journal let table let let entry journal index event index index table index return table tablefor pizza journal array includes method check given value exists array function us determine event interested event list given day body loop tablefor figure box table journalentryfallsintobycheckingwhethertheentrycontainsthespecificevent s interested event happens alongside squirrel incident loop add correct box table tool need compute individual correlation step remaining correlation type event recorded stand arrayloops tablefor function s loop like let let entry journal entry kind loop common classical array element time come lot d run counter length array pick element turn simpler way write loop modern javascript let entry journal forloop us word ofafter variable definition loop element value given work array string data structure ll discus howit work chapter thefinalanalysis need compute correlation type event occurs dataset need findevery type event function journalevents journal let event let entry journal let event event event return event journalevents journal carrot exercise weekend bread adding event name aren t eventsarray function collect type event using function correlation let event journalevents journal event phi tablefor event journal carrot exercise weekend bread pudding correlation lie close zero eating carrot bread pudding apparently doe trigger transformation doseem occur somewhat weekend let s filter result correlation greater let event journalevents journal let correlation phi tablefor event journal correlation correlation event correlation weekend brushed teeth candy work spaghetti reading peanut aha factor correlation clearly stronger eating peanut strong positive effect chance turning squirrel brushing teeth significant negative effect interesting let s try let entry journal peanut brushed teeth peanut teeth phi tablefor peanut teeth journal s strong result phenomenon occurs precisely jacques eats peanut fails brush teeth weren t slob dental hygiene d noticed affliction knowing jacques stop eating peanut altogether find transformation stop take month notice missing entirely human way living feral adventure jacques hardly feel alive decides d wild animal building beautiful little tree house forest equipping peanut butter dispenser supply peanut butter change form time life short energetic life squirrel furtherarrayology finishing chapter want introduce related concept ll start generally useful array method saw pushand pop add remove element end array earlierin chapter corresponding method adding removing thing start array called unshift shift let todolist function remember task task function gettask return function rememberurgently task task program manages queue task add task end queue calling remember grocery ready gettask remove item queue rememberurgently function add task add instead queue tosearchforaspecificvalue arraysprovidean indexofmethod themethod search array start end return index requested value wasn t search end instead start s similar method called lastindexof indexofand lastindexof takeanoptionalsecondargumentthatindicates start searching fundamental array method slice take start end dice return array element start index inclusive end index exclusive end index given slicewill element start index omit start index copy entire array concatmethod used append array create new array similar doe string following example show concatand slicein action take array index return new array copy original array element given index removed function remove array index return index index remove b c d e b d e pas concatan argument array value added new array array stringsandtheirproperties read property like lengthand touppercase string value try add new property doesn t stick let kim kim undefined valuesoftypestring number andbooleanarenotobjects guage doesn t complain try set new property doesn t tually store property mentioned earlier value immutable changed type property string value number method useful one sliceand indexof resemble array method coconut nut coconut u difference string s indexofcan search string containing character corresponding array method look single element ee trimmethod remove whitespace space newlines tab similar acters start end string okay okay zeropad function previous chapter exists method called padstart take desired length padding character ments string split string occurrence string splitand join join let sentence secretarybirds specialize stomping let word word secretarybirds specialize stomping secretarybirds specialize stomping string repeated repeatmethod creates new string containing multiple copy original string glued la lalala seen string type s lengthproperty accessing ual character string look like accessing array element tion ll discus chapter let string abc string b itcanbeusefulforafunctiontoacceptanynumberofarguments forexample computes maximum al lthe argument given write function dot function s parameter like function max number let result let number number number result result number return result max function called rest parameter bound array taining argument parameter value aren t array max parameter hold argument use similar notation cal la function array argument let number max number spread array function passing element separate argument possible include array like argument max number square bracket array notation similarly allows operator spread array new array let word fully word understand fully understand thisworksevenincurlybraceobjects whereitaddsallpropertiesfromanother object property added multiple time value added win let coordinate x y coordinate y z x y z ve seen mathis grab bag utility function maximum minimum square root mathobject used container group bunch related ality mathobject useful value provides namespace function value global binding havingtoomanyglobalbindings pollutes thenamespace themorenames taken likely accidentally overwrite value existing binding example s unlikely ll want thing maxin program javascript s maxfunction tucked safely inside mathobject don t worry overwriting language stop warn defining binding taken javascript doe binding declared standard binding binding declared varorfunction mathobject need trigonometry mathcan help contains co cosine sin sine tan tangent inverse function acos asin atan respectively number π pi closest approximation fit javascript available math old programming tradition writing name constant value cap function randompointoncircle radius let angle return x radius angle y radius angle randompointoncircle x y familiar sine cosine don t worry ll explain used chapter previous example used function return new pseudorandom number inclusive exclusive time given possible produce number pear random machine keep hidden value ask new random number performs complicated computation hidden value create new value store new value return number derived way produce new number way seemsrandom want random number instead fractional use round nearest number result multiplying random number give number greater equal round expression produce equal chance number function ceiling round number nearest number take absolute value number meaning negates negative value leaf positive one destructuring let s return phifunction moment function phi table return table table table table table table table table table table table table reason function awkward read binding pointing array d prefer binding element let table fortunately succinct way javascript phi return work binding created let var orconst know value binding array use square bracket look inside value binding content similar trick work object using brace instead square bracket let faraji age faraji note try destructure nullorundefined error directly try access property value optionalpropertyaccess aren t sure given value produce object want read property doe use variant dot notation object function city object return city address city toronto toronto city vera undefined expression aisn t null undefined evaluates undefined convenient example aren t sure given property exists variable hold undefined value similar notation used square bracket access function call putting parenthesis bracket string undefined undefined property grasp value contain object ray stored computer s memory sequence bit holding address place content array ray inside consists memory region inner array outer array containing thing number represents address inner array want save data file later send computer network convert tangle memory address description stored sent couldsend entire computer memory address value interested suppose doesn t like best approach serialize data mean converted flat description popular serialization format called json pronounced jason stand javascript object notation widely used data storage communication format web language javascript json look similar javascript s way writing array object restriction property name surrounded double quote simple data expression function call binding involves actual computation comment allowed json journal entry look like represented json data squirrel false event work touched tree pizza running javascript give function convert data format take javascript value return string second take string convert value encodes let string squirrel false event weekend string squirrel false event weekend string weekend object array provide way group value single value allows bunch related thing bag run bag instead wrapping arm individual thing trying hold separately value javascript property exception null undefined property accessed using orvalue prop object tend use name property store fixed set array hand usually contain varying amount conceptually identical value use number starting name property aresome named property array lengthand number method method function live property usually act value property iterate array using special kind forloop let element array exercise thesumofarange theintroduction book alluded following nice way compute sum range number sum range write rangefunction take argument startand end return array containing number startup including end write sumfunction take array number return sum number run example program doe return bonus assignment modify rangefunction optional argument indicates step value used building array step given element increment corresponding old behavior function range return make sure work negative step value range produce array reversemethod change array inverting order element appear exercise write function reversearray reversearrayinplace reversearray array argument produce newarray element inverse order second reversearrayinplace reversemethod doe modifythe array given argument reversing element use standard reverse method thinking note effect pure function previous chapter variant expect useful situation run faster alist generic blob value object used build sort data tures common data structure list confused array list nested set object object holding reference second second let list value rest value rest value rest null resulting object form chain shown following diagram value rest value rest value rest null nice thing list share part structure example create new value value rest list value rest list listreferring binding defined earlier independent list share structure make element original list valid list write function arraytolist build list structure like given argument write listtoarray function produce array list add helper function prepend take element list creates new list add element input list nth take list number return element given position list zero referring element undefined element haven t write recursive version nth deepcomparison compare object identity d prefer compare value actual property write function deepequal take value return trueonly value object property value property equal compared recursive deepequal value compared directly using erator property compared use typeof operator produce object value deep parison silly exception account historical accident typeof null produce object function useful need erties object compare way constructing software design way make simple obviously deficiency way make complicated obvious deficiency hoare acm turing award lecture large program costly program just time take build size involves complexity complexity confuses programmer confused programmer turn introduce mistake bug program large program provides lot space bug hide making hard let s briefly final example program introduction self contained line long let total count count total count count total second relies external function line long sum range likely contain bug count size definition sumand range second program bigger d argue likely correct solution expressed vocabulary corresponds problem solved summing range number isn t loop counter range sum definition vocabulary function sumand range involve loop counter incidental detail expressing simpler concept program easier right context programming kind vocabulary usually called abstraction abstractionsgiveustheabilitytotalkaboutproblemsatahigher abstract level getting sidetracked uninteresting detail analogy compare recipe pea soup go like cup dried pea person container add water pea covered leave pea water hour pea water cooking pan add cup water person cover pan pea simmering hour half onion person cut piece knife add pea stalk celery person cut piece knife add pea carrot person cut piece knife add pea cook minute second recipe person cup dried split pea cup water half chopped onion stalk celery carrot soak pea hour simmer hour chop add etables cook minute second shorter easier interpret need understand word soak simmer chop guess vegetable programming t rely word need waiting dictionary fall pattern work precise step computer perform blind concept express useful skill programming notice working low level abstraction abstractingrepetition plain function ve seen far good way build abstraction fall short common program given number time write forloop like let abstract doing ntimes function s easy write function call ntimes function repeatlog n let n want logging number doing represented function function just value pas action function value function repeat n action let n action repeat don t pas predefined function repeat easier create function value spot instead let label repeat unit label unit unit unit unit unit structured little like describes kind loop provides body body written function value wrapped parenthesis repeat closed closing brace andclosing parenthesis case like example body single small expression omit brace write loop single line function operate function taking argument returning called function seen function regular value particularly remarkable fact function exist term come ic distinction function value taken seriously function allow abstract action just value come form example function create new function function greaterthan n return m m n let greaterthan true function change function function noisy f return args calling args let result f args called args returned result return result noisy calling called returned write function provide new type control flow function unless test test repeat n unless n n array method foreach provides like function b l l b scriptdataset area function shine data processing process data ll need actual example data chapter use dataset system latin cyrillic arabic remember unicode assigns number character written language chapter character associated specific script standard contains different script use today historic fluently read latin character appreciate fact people writing text writing system wouldn t recognize example s sample tamil handwriting example dataset contains piece information script defined unicode available coding sandbox chapter http script binding binding contains array object describes script coptic range direction ltr year living false link http object tell script unicode range assigned direction written approximate origin time use link information direction ltr left right rtl right left way arabic hebrew text written ttb mongolian writing rangesproperty contains array unicode character range array containing lower bound upper bound character code range assigned script lower bound inclusive code coptic character upper bound noninclusive code isn t filteringarrays want script dataset use following function helpful filter element array don t pas test function filter array test let passed let element array test element element return passed filter script script adlam function us argument named test function value gap process deciding element collect note filterfunction deleting element isting array build new array element pas test function pure doe modify array given like foreach filteris standard array method example defined function doe internally ll use like instead s ttb mongolian say array object representing script produced filtering script array want array name instead easier inspect mapmethod transforms array applying function element building new array returned value new array length input array content mappedto new form function function map array transform let mapped let element array transform element return mapped let rtlscripts s rtl map rtlscripts s adlam arabic imperial aramaic like foreach filter mapis standard array method summarizingwithreduce common thing array compute single value recurring example summing collection number instance example finding script character reduce time called fold build value repeatedly taking single element array combining current value summing bers d start number zero element add sum parameter reduceare apart array combining function start value function little straightforward filterand map close look function reduce array combine start let current start let element array current combine current element current reduce b b standard array method reduce course corresponds tion added convenience array contains element allowed leave startargument method element array start value start reducing second element b b use reduce twice script character write like function charactercount script return count return count b return charactercount charactercount b b han charactercount function reduces range assigned script ming size note use destructuring parameter list reducer function second reducethen us largest script repeatedly comparing script returning larger han script character assigned unicode standard making far biggest writing dataset han scriptsometimesusedforchinese japanese andkoreantext thoselanguages share lot character tend write differently based unicode consortium decided treat single writing save character code called han unification make people angry composability consider written previous example finding biggest script function code worse biggest null let script script biggest null charactercount biggest charactercount script biggest script biggest han binding program line longer readable abstraction function provide really shine need poseoperations example let s write code find average year origin living dead script dataset function average array return b b average s s average s s dead script unicode average older living one terribly meaningful surprising statistic hope ll agree code used compute isn t hard read pipeline start script filter living dead one year average round result definitely write computation big loop let total count let script script total count total count harder computed result aren t represented coherent value d lot work extract like average separate function term computer actually doing approach quite different build new array running filter map second computes number doing work usually afford readable approach processing huge array doing time abstract style worth extra speed stringsandcharactercodes interesting use dataset figuring script piece text using let s program doe remember script array character code range associated given character code use function like corresponding script function characterscript code let script script return code code return script return null characterscript latin somemethod function take test function tell function return true element array character code string inchapter mentioned javascript string encoded sequence number called code unit unicode character code initially supposed fit unit give little character clear wasn t going people balked need use memory character address concern format used javascript string invented describes common character using single code unit us pair unit generally considered bad idea today tionally designed invite mistake s easy write program pretend code unit character thing language doesn t use character appear work just fine soon try use program common chinese character break fortunately advent emoji everybody started ing character burden dealing problem fairly distributed unfortunately obviousoperationsonjavascriptstrings suchasgettingtheir length lengthproperty accessing content using square bracket deal code unit emoji character horse shoe let horseshoe horseshoe invalid code actual code horse emoji javascript s charcodeat methodgivesyouacodeunit notafullcharactercode codepointat method added later doe unicode character use character string argument passed codepointat index sequence code unit run character string d need deal question character take code unit theprevious chapter mentioned used string like codepointat type loop introduced time people acutely aware problem use loop string give real character code unit let rosedragon let char rosedragon char character string code unit use codepointat code characterscript function way correctly loop ters step count character belong script following counting abstraction useful function countby item groupname let count let item item let groupname item let known c known count return count countby n n false count true count countbyfunction expects collection loop function computes group given element return array object name group tell number element group us array method go element array return function return true return undefined find element using countby write function tell script used piece text function textscripts text let script countby text char let script characterscript return script let total n count n count total return script return count return count total textscripts 英国的狗说 woof 俄罗斯的狗说 тяв han latin cyrillic function count character using characterscript assign falling string character aren t script filtercall drop entry resulting array aren t interested character able compute percentage need total number ters belong script compute reduce character function return specific string transforms counting entry readable string mapand combine join summary able pas function value function deeply useful aspect javascript allows write function model computation gap code call function gap providing function value array provide number useful method use foreach loop element array filtermethod return new array containing element pas predicate function transform array putting element function using map use reduceto combine element array single value somemethod test element match given predicate function findfinds element match predicate exercise flattening use reducemethod combination concatmethod flatten array array single array element original array yourownloop write function loopthat provides like forloop statement value test function update function body function iteration run test function current loop value stop return false body function giving current value finally update function create new value start beginning defining function use regular loop actual looping array everymethod analogous somemethod method return truewhenthegivenfunctionreturns truefor everyelementinthearray way someis version act array everyis like operator implement everyas function take array predicate function parameter write version using loop using method dominantwritingdirection write function computes dominant writing direction string text remember script object direction property ltr left right rtl right left ttb dominant direction direction majority character script associated characterscript countby tions defined earlier chapter probably useful abstract data type realized writing special kind program defines type term operation performed liskov programming abstract data type thesecretlifeofobjects chapter introduced javascript s object container hold data inprogrammingculture programming isasetoftechniquesthat use object central principle program organization really agrees precise definition programming shaped thedesign manyprogramming language including javascript chapter describes way idea applied javascript abstractdatatypes main idea programming use object typesof object unit program organization setting program number strictly separated object type provides way think structure enforce kind discipline preventing entangled way think object somewhat like d think tric mixer consumer appliance people design assemble mixer specialized work requiring material science understanding electricity cover smooth plastic shell people want mix pancake batter don t worry understand knob mixer operated similarly abstract data type object class subprogram contain arbitrarily complicated code expose limited set method property people working supposed use allows large program built number appliance type limiting degree different part entangled requiring interact specific way problem object class repaired completely rewritten impacting rest program better possible use object class multiple different program avoiding need recreate functionality scratch think javascript s data structure array string reusable abstract data type abstract data type interface collection operation external code perform detail interface sulated treated internal type concern rest program basic thing like number thought abstract data type interface allows add multiply compare fact fixation single objectsas main unit organization classical programming somewhat unfortunate useful piece functionality involve group different object class working closely method javascript method property hold function value simple method function speak line rabbit say line let whiterabbit type white speak let hungryrabbit type hungry speak oh fur whisker white rabbit say fur whisker got carrot hungry rabbit say carrot typically method need object called function called property immediately called binding called thisin body automatically point object called think thisas extra parameter passed function different way regular parameter want provide explicitly use function s callmethod take thisvalue argument treat argument normal parameter whiterabbit hurry white rabbit say function thisbinding value depends way called refer thisof wrapping scope regular defined function keyword arrow function bind thisbut thethisbinding scope like following code reference thisfrom inside local function let finder array return v v value true property like array object expression shorthand way defining method creates property called findand give function value written argument someusing function keyword code wouldn t work prototype way create rabbit object type speakmethod create helper function rabbit type parameter return object holding typeproperty speak function speakproperty allrabbitssharethatsamemethod especiallyfortypeswithmanymethods nice way type s method single place adding object individually javascript prototype way object linked object magically property object plain old object created notation linked object called object prototype let function tostring object object look like just pulled property object fact tostring method stored meaning available object object get request property doesn t type searched property doesn t prototype s prototype searched object prototype reached object true null d guess return prototype object object don t directly prototype instead object provides different set default tie function derive array derive array true true prototype object prototype indirectly provides method like tostring use create object specific prototype let protorabbit speak line rabbit say line let blackrabbit protorabbit black fear darkness black rabbit say fear darkness proto rabbit act container property shared rabbit individual rabbit object like black rabbit contains property apply case derives shared property prototype javascript s prototype interpreted somewhat abstract data type class classdefines shape type method property object called instance class prototype useful defining property instance class share value property differ instance rabbit typeproperty need stored directly object create instance given class make object derives proper prototype alsohave make sure property instance class supposed constructor function doe function makerabbit type let rabbit protorabbit type return rabbit javascript s class notation make easier define type function prototype object class rabbit constructor type type speak line rabbit say line classkeyword start class declaration allows define structorandasetofmethodstogether anynumberofmethodsmaybewritten inside declaration s brace code effect defining binding called rabbit hold function run code constructor prototype property hold speakmethod function called like normal function constructor javascript called putting keyword newin doing creates fresh instance object prototype object function s prototype property run function thisbound new object finally return object let killerrabbit new rabbit killer fact classwas introduced edition javascript function used constructor way define class write regular function manipulate prototype property function archaicrabbit type type function line rabbit say line let oldschoolrabbit new archaicrabbit old school forthisreason prototype propertyholding object convention name constructor capitalized easily distinguished function important understand distinction way prototype associated constructor prototype property way object havea prototype actual prototype constructor tor function constructor function s prototype property hold prototype used instance created rabbit true killerrabbit true constructor typically add property possible declare property directly class declaration unlike method property added instance object prototype class particle speed constructor position position like function classcan used statement expression used expression doesn t define binding just produce structorasavalue youareallowedtoomittheclassnameinaclassexpression object new class getword return hello hello privateproperties common class define property method internal use interface called privateproperties opposed publicones object s external interface declare private method sign method called inside classdeclaration defines class secretiveobject getsecret return ate plum interrogate let shallisayit getsecret return class doe declare constructor automatically try getsecret outside class error existence entirely hidden inside class declaration use private instance property declare regular tie created just assigning private property mustbe declared class declaration available thisclassimplementsanapplianceforgettingarandomwholenumberbelow given maximum number public property getnumber class randomsource max constructor max max max getnumber return max add property object present prototype property added object property prototype property longer affect object hidden object s property small small long sharp bloody long sharp bloody new rabbit basic small small following diagram sketch situation code run rabbitand objectprototypes lie killerrabbit kind backdrop property object looked tostring function teeth small speak function killerrabbit teeth long sharp type killer rabbit prototype object create function prototype overriding property exist prototype useful thing rabbit teeth example show overriding used express exceptional property instance generic class object letting nonexceptional object standard value prototype overriding used standard function array prototype different tostring method basic object prototype false calling tostring array give result similar calling put comma value array directly calling object array produce different string function doesn t know array simply put word objectand type square bracket object array map saw word mapused previous chapter operation form data structure applying function element confusing programming word used related different thing amap noun data structure associate value key value example want map name age possible use object let age boris liang júlia júlia age júlia júlia jack age known jack age jack age known false tostring age known tostring age tostring age known true object s property name people s name property value age certainly didn t list anybody named tostring map plain object derive look like property reason using plain object map dangerous possible way avoid problem create object prototype pas resulting object derive safely used map tostring null false object property name string need map key t converted use object map fortunately javascript come class called mapthat written exact purpose store mapping allows type key let age new map boris liang júlia júlia júlia júlia jack age known jack jack age known false tostring false method set hasare interface mapobject writing data structure quickly update search large set value isn t easy don t worry did simple interface use work plain object need treat map reason useful know return object s ownkeys prototype alternative inoperator use function ignores object s prototype x x true x tostring false polymorphism stringfunction convert value string object tostring method object try create ingful string mentioned standard prototype define version tostring create string contains useful information object object function return rabbit string killerrabbit killer rabbit simple instance powerful idea piece code written work object certain case tostring kind object happens support interface plugged code able work technique called polymorphism polymorphic code work value different shape long support interface expects example widely used interface object alengthproperty holding number numbered property element array string support interface various object ll later chapter browser implementation foreach fromchapter work provides interface fact doe length b elt elt b getters setter andstatics interface contain plain property just method example map object sizeproperty tell key stored necessary object compute store property directly instance property accessed directly hide method method called gettersand defined writing getin method object expression class declaration let varyingsize size return wheneversomeonereadsfromthisobject s sizeproperty theassociatedmethod called similar thing property written using setter class temperature constructor celsius celsius fahrenheit return set fahrenheit value value static fromfahrenheit value return new temperature value let temp new temperature temperature class allows read write temperature degree celsius degree fahrenheit internally store celsius automatically convert celsius fahrenheit getter setter want attach property directly constructor function prototype method won t access class instance example used provide additional way create instance inside class declaration method property staticwritten stored constructor example temperature class allows write create perature using degree fahrenheit let boil mentioned chapter loop kind data structure case loop expect data structure expose specific interface array string add interface object need briefly look symbol type possible multiple interface use property ferent thing example object lengthrefers number element collection object interface describing hiking route use lengthto provide length route meter possible object conform interface object trying route maybe enumerate point somewhat kind problem isn t common practice thing like iteration protocol language designer needed type property real lydoesn t conflict symbolswere added language property including seen far named string possible use symbol property name symbol value created symbolfunction unlike string newly created symbol create symbol twice let sym symbol sym symbol false sym killerrabbit sym string pas symbolis included convert string make easier recognize symbol example showing console meaning symbol unique usable property name make symbol suitable defining interface peacefully live alongside property matter name const length symbol length length length possible include symbol property object expression class using square bracket property cause expression bracket evaluated produce property analogous square bracket property access notation let mytrip length lankwitz babelsberg length mytrip length theiteratorinterface object given expected iterable mean method named symbol symbol value defined language stored property symbolfunction called method return object provides second interface iterator actual thing iterates nextmethod return result result object value property provides value doneproperty true result false note value doneproperty name plain string symbol likely added lotof different object actual symbol directly use interface let okiterator ok value o false value k false value undefined true let s implement iterable data structure similar linked list exercise chapter ll write list class time list constructor value rest value rest length return static fromarray array let result null let result new array result return result note static method point constructor class instance static method called iterating list return list s element start end ll write separate class iterator class listiterator constructor list list null return true let value return value false class track progress iterating list updating list property list object value returned report list null let s set listclass iterable book ll sionally use prototype manipulation add method class individual piece code remain small self contained program need split code small piece d declare method directly class instead function return new listiterator loop list let list let element list element syntax array notation function call similarly work iterable object example use value create array taining element arbitrary iterable object pci p c inheritance imagine need list type like listclass saw asking length time don t want scan restevery time instead want store length instance eﬀicient access javascript s prototype make possible create newclass like old class new definition property prototype new class derives old prototype add new definition say lengthgetter programming term called inheritance new class inherits property behavior old class class lengthlist extends list length constructor value rest super value rest length length return length use word extends indicates class shouldn t directly based default objectprototype class called superclass derived class subclass initialize lengthlist instance constructor call constructor superclass superkeyword necessary new object behave roughly like list going need instance property list constructor store list s length private property written class s getter called doesn t work length hasn t filled use super method getters superclass s prototype useful inheritance allows build slightly different data type existing data type relatively little work fundamental tradition alongside encapsulation polymorphism arenowgenerallyregardedaswonderfulideas inheritanceismorecontroversial encapsulation polymorphism used separate piece code reducing tangledness overall program inheritance fundamentally tie class creating moretangle inheriting class usually know work simply using inheritance useful tool make type program succinct shouldn t tool reach probably shouldn t actively looking opportunity construct class hierarchy family tree class theinstanceofoperator occasionally useful know object derived specific class javascript provides binary operator called instanceof new lengthlist null instanceof lengthlist true new lengthlist null instanceof list true new list null instanceof lengthlist false instanceof array true operator inherited type lengthlist instance oflist operator applied standard constructor like array object instance object summary object just hold property prototype object ll act property don t long prototype property simple object object prototype prototype constructor function name usually start capital letter used newoperator create new object new object s prototype object prototype property constructor make good use putting property value given type share prototype s classnotation provides clear way define constructor prototype define getters setter secretly method time object s property accessed static method method stored class s constructor prototype instanceof operator given object constructor tell object instance constructor useful thing object specify interface tell everybody supposed talk object interface therestofthedetailsthatmakeupyourobjectarenow encapsulated hidden interface use private property hide object outside world type implement interface code written use interface automatically know work number different object provide interface called polymorphism implementing multiple class differ detail helpful write new class subclass existing class inheriting behavior avectortype write class vecthat represents vector space take x yparameters number save property vecprototype method plusand minus vector parameter return new vector sum difference vector thisand parameter xand yvalues add getter property lengthto prototype computes length distance point x y origin group standard javascript environment provides data structure called set like instance map set hold collection value unlike map doe associate value just track value set value set doesn t effect write class called group setis taken like set add delete hasmethods constructor creates group addadds value group isn t member deleteremoves argument group member hasreturns boolean value indicating argument member group use equivalent indexof determine value class static frommethod take iterable object gument creates group contains value produced iterating iterablegroups make groupclass previous exercise iterable refer section iterator interface earlier chapter aren t clear exact form interface anymore used array represent group s member don t just return iterator created calling method array work defeat purpose exercise itisokayifyouriteratorbehavesstrangelywhenthegroupismodifiedduring iteration question machine think relevant question submarine swim dijkstra threat computing science project arobot project chapter ll stop pummeling new theory brief ment instead ll work program theory necessary learn program reading understanding actual program just important project chapter build automaton little program performs task virtual world automaton robot picking dropping parcel meadowfield village meadowfield isn t big consists place road described array road const road alice house alice alice office bob hall daria house daria hall ernie house grete grete office hall hall network road village form graph graph collection point place village line road graph world robot move array string isn t easy work interested destination reach given place let s convert list road data structure place tell reached function buildgraph edge let graph null function addedge graph graph graph let r addedge addedge return graph const roadgraph buildgraph road given array edge buildgraph creates map object node store array connected node us splitmethod road form array containing start end separate string thetask robot moving village parcel various place addressed place robot pick parcel come delivers arrives destination automaton decide point finished task parcel delivered able simulate process define virtual world model tell robot parcel robot decided need update model reflect new situation ifyou yourfirstimpulse start defining object various element world class robot parcel maybe place hold property current state pile parcel location change updating world wrong usually fact sound like object doe automatically mean object program reflexively writing class concept application tends leave collection interconnected object internal changing state program hard understand easy break instead let s condense village s state minimal set value define s robot s current location collection livered parcel current location destination address s let s make don t changethis state robot move compute newstate situation class villagestate constructor place parcel place parcel destination roadgraph destination return let parcel p return p return place destination address p return new villagestate destination parcel movemethod action happens check road going current place destination return old state valid method creates new state destination robot s new place need create new set robot carrying robot s current place need moved new place parcel addressed new place need need removed set undelivered parcel maptakes care moving filterdoes delivering parcel object aren t changed moved method give new village state leaf old entirely intact let new villagestate post office place post office address alice house let alice house alice house post office cause parcel delivered reflected state initial state describes situation robot post oﬀice parcel undelivered data structure don t change called immutable persistent behave lot like string number stay way containing different thing different time javascript just canbe changed working value supposed persistent requires restraint function called change object writing property ignored use make sure object aren t changed want careful freezing doe require computer extra work having update ignored just likely confuse having wrong thing usually prefer just tell people given object shouldn t messed hope remember let object value going way change object language obviouslyexpectingmeto becauseithelpsmeunderstandmyprograms complexity management object fixed stable thing consider operation alice s house given start state produce new state whenobjectschangeovertime thataddsawholenewdimensionofcomplexity kind reasoning small like building chapter handle bit extra complexity important limit kind system build understand make code easier understand make possible build ambitious unfortunately understanding built persistent data structure easier designing especially programming language isn t helping little harder ll look opportunity use tent data structure book ll using changeable one simulation delivery robot look world decides direction want say robot function take villagestate object return nearby place want robot able remember thing make execute plan pas memory allow return new memory thing robot return object containing direction want memory value given time called function runrobot state robot memory let turn turn turn break let action robot state memory state memory moved consider robot solve given state pick parcel visiting location parcel deliver visiting location parcel addressed picking parcel dumbest strategy possibly work robot just walk random direction turn mean great likelihood eventually run parcel point reach place delivered s look like function randompick array let choice return array choice function randomrobot state return direction randompick roadgraph remember return number multiplyingsuchanumberbythelengthofanarrayandthenapplying give random index array robot doe need remember ignores second argument remember javascript function called extra ments ill effect omits memoryproperty returned object sophisticated robot work ll need way create new state parcel static method written directly adding property constructor good place functionality function parcelcount let parcel let parcelcount let address randompick roadgraph let place place randompick roadgraph place address place address return new villagestate post office parcel don t want parcel sent place dressed reason doloop keep picking new place get s equal address let s start virtual world runrobot randomrobot moved marketplace moved town hall turn take robot lot turn deliver parcel isn t planning ahead ll address soon able lot better random robot easy ment hint way mail delivery work route pass place village robot run route twice point guaranteed route starting post oﬀice const mailroute alice house cabin alice house bob house town hall daria house ernie house grete house shop grete house farm marketplace post office implement robot ll need make use robot ory robot keep rest route memory drop element turn function routerobot state memory memory mailroute return direction memory memory robot lot faster ll maximum turn twice route usually pathfinding wouldn t really blindly following fixed route intelligent behavior robot work eﬀiciently adjusted behavior actual work need able deliberately given parcel location parcel delivered doing goal away require kind function problem finding route graph typical search problem tell given solution route valid t directly compute solution way instead creating potential solution work number possible route graph infinite ing route ato b interested one start don t care route visit place definitely eﬀicient route cut number route route finder consider fact interested shortestroute want make sure look short route look longer one good approach grow route starting point exploring reachable place hasn t visited route reach goal way ll explore route potentially interesting know route shortest route shortest route function doe function findroute graph let work route let let route work let place graph place return place w place place route place exploring right place reached explored t immediately explore place soon reach mean place reached explored immediately shorter path haven t explored function keep work list array place explored route got start just start position route search operates taking item list exploring mean look road going place goal finished route returned haven t looked place new item added list looked looking short route ve longer route place precisely long existing don t need explore visualize web known route crawling start location growing evenly side tangling soon thread reach goal location thread traced start giving route code doesn t handle situation work item work list know graph connected meaning location reached location ll able route point search t fail function goalorientedrobot place parcel route let parcel parcel place findroute roadgraph place route findroute roadgraph place return direction route memory robot us memory value list direction just like robot list figure take undelivered parcel set parcel hasn t picked plot route parcel hasbeen picked need delivered robot creates route delivery address instead robot usually finish task delivering parcel turn s slightly better routerobot definitely optimal ll continue refining exercise exercise measuringarobot s hard objectively compare robot just letting solve narios maybe robot just happened easier task kind task good didn t write function comparerobots take robot starting memory generate task let robot solve task output average number step robot took task sake fairness make sure task robot generating different task robot robotefficiency canyouwritearobotthatfinishesthedeliverytaskfasterthan goalorientedrobot observe robot s behavior obviously stupid thing doe improved ifyousolvedthepreviousexercise youmightwanttouseyour comparerobots function verify improved robot data structure provided standard javascript environment aren t suited persistent use array sliceand concatmethods allow easily create new array damaging old set example method creating new set item added removed write new class pgroup similar groupclass chapter store set value like group add delete hasmethods add method return new pgroupinstance given member added leave old unchanged similarly deleteshould create new instance given member class work value type just string doe eﬀicient used large number value constructor shouldn t class s interface ll initely want use internally instead instance pgroup used starting value need value having function creates new map time debugging twice hard writing code place write code cleverly possible definition smart debug kernighan plauger element programming style bugsanderrors flaw computer program usually called bug make programmer feel good imagine little thing just happen crawl work reality course program crystallized thought roughly categorize bug caused thought confused caused mistake introduced converting thought code type generally harder diagnose fix language mistake pointed automatically computer knew trying javascript s looseness hindrance concept binding property vague rarely catch typo actually running program allows clearly nonsensical thing complaint computing true monkey thing javascript doe complain writing gram doe follow language s grammar immediately make computer complain thing calling s tion looking property undefined value cause error reported program try perform action nonsense computation merely produce nan number undefined value program happily continues convinced s doing meaningful mistake manifest later bogus value traveled function trigger error silently cause program s output wrong finding source problem diﬀicult process finding program called debugging javascript littlestricter enabling strict mode putting string use strict file function body s example function canyouspottheproblem use strict counter counter happy happy canyouspottheproblem referenceerror counter defined code inside class module discus chapter tomatically strict old nonstrict behavior exists old code depend language designer work hard avoid breaking existing program normally forget letin binding counter example javascript quietly creates global binding us instrictmode anerrorisreportedinstead thisisveryhelpful itshould noted doesn t work binding question exists scope case loop quietly overwrite value binding change strict mode thisbinding hold value undefined function called method making outside strict mode thisrefers global scope object object property global binding accidentally method constructor incorrectly strict mode javascript produce error soon try read happily writing global scope example consider following code call constructor function newkeyword thiswill notrefer newly constructed object function person let ferdinand person ferdinand oops ferdinand bogus personsucceeded returned undefined value global binding strict mode result different use strict function person let ferdinand person ferdinand forgot new typeerror set property undefined immediately told wrong helpful fortunately constructor created classnotation plain called new making problem nonstrict mode strict mode doe thing disallows giving function multiple parameter remove certain problematic language feature entirely withstatement wrong discussed book short putting use strict program rarely hurt help spot problem type language want know type binding expression running program tell right away type used inconsistent way javascript considers type actually running program try implicitly convert value type expects s help type provide useful framework talking program lot mistake come confused kind value go come function information written likely confused add comment like following findroute function previous chapter type graph object string string string function findroute graph thereareanumberofdifferentconventionsforannotatingjavascriptprograms type thing type need introduce complexity able code useful think type randompick function return random element d need introduce type variable t stand type randompick type like t t function array t t type program known possible computer checkthem pointing mistake program run javascript dialect add type language check popular called typescript interested adding rigor program recommend try book continue using raw dangerous untyped javascript code testing language going help mistake ll hard way running program seeing doe right thing doing hand really bad idea annoying tends ineffective take time exhaustively test time make change computer good repetitive task testing ideal repetitive task automated testing process writing program test program writing test bit work testing manually ve gain kind superpower take second verify program behaves properly situation wrote test break ll immediately notice randomly running later time test usually form little labeled program verify aspect code example set test standard probably tested touppercase method look like function test label body body failed label test convert latin text uppercase return hello hello test convert greek text uppercase return χαίρετε χαίρετε test convert character writing test like tends produce repetitive awkward code tunately exist piece software help build run collection test test suite providing language form function method suited expressing test outputting informative information test fails usually called test runner code easier test code generally external object code interacts harder set context test style programming shown previous chapter us persistent value changing object tends easy test debugging notice wrong program behaves produce error step figure whatthe problem obvious error message point specific line program look error description line code problem line triggered problem simply place flaky value produced get used invalid way solving exercise earlier chapter probably experienced situation following example program try convert number string given base decimal binary repeatedly picking digit dividing number rid digit strange output currently produce suggests bug function numbertostring n base let result sign n sign n result string n base result n base n return sign result numbertostring problem pretend moment don t know program malfunctioning want resist urge start making random change code make better instead think analyze happening come theory happening make additional observation test don t theory make additional observation help come putting strategic call program good way additional information program doing case want nto value let s write value start loop right dividing doe produce number instead n base actually want n n base number properly shifted right analternativetousing topeekintotheprogram sbehavioristo use debugger capability browser browser come ability set breakpoint specific line code execution program reach line breakpoint paused inspect value binding point won t detail debugger differ browser browser look browser s developer tool search web instruction way set breakpoint include debugger statement sisting simply keyword program developer tool browser active program pause reach statement errorpropagation problem prevented programmer unfortunately program communicates outside world way possible input overloaded work network fail programming afford just ignore problem occur build going used anybody usually want program better just crash right thing bad input stride continue running case better report user went wrong situation program actively response problem say function promptnumber asks user number return return user input orange option make return special value common choice value null undefined function promptnumber question let result number prompt question result return null return result promptnumber tree code call promptnumber check actual number read failing asking filling default value return special value itscaller indicate failed asked situation error common caller explicitly taking account returning special value good way indicate error doe downside function return possible kind value function ll like wrap result object abletodistinguishsuccessfromfailure thewaythe nextmethodontheiterator interface doe function lastelement array return failed true return value array second issue returning special value lead awkward code piece code call promptnumber time check time nullwas returned response finding nullis simply return nullitself caller function turn check exception function proceed normally liketo just stop doing immediately jump place know handle problem exception handling doe exception mechanism make possible code run problem raise throw exception exception value raising somewhat resembles return function jump just current function caller way started current execution called unwinding stack remember stack function call mentioned chapter exception zoom stack throwing away context encounter exception zoomed right stack use d just provide novel way blow program power lie fact set obstacle stack catchthe exception zooming ve caught exception address problem continue run program s example function promptdirection question let result prompt question left return l right return r throw new error invalid direction result function look promptdirection way l return house return angry bear try look catch error went wrong error throwkeyword used raise exception catching wrapping piece code tryblock followed keyword catch code tryblock cause exception raised catchblock evaluated parenthesis bound exception value thecatchblock tryblock finish program proceeds beneath entire statement case used errorconstructor create exception value standard javascript constructor creates object message property instance erroralso gather information stack existed exception created stack trace information stored stackproperty helpful trying debug problem tell function problem occurred function failing notethatthe lookfunctioncompletelyignoresthepossibilitythat promptdirection wrong big advantage exception code necessary point error occurs point handled function forget cleaningupafterexceptions effect exception kind control flow action mightcauseanexception whichisprettymucheveryfunctioncallandproperty access cause control suddenly leave code mean code effect regular control flow look like ll happen exception prevent taking place really bad banking code const account b c function getaccount let accountname prompt enter account account accountname throw new error account accountname return accountname function transfer account return account account getaccount transfer function transfer sum money given account asking account process given invalid account getaccount throw exception transfer firstremoves money account thencalls getaccount add account broken exception point ll just make money disappear code written little intelligently example calling getaccount start moving money problem like occur subtle way function don t look like throw exception exceptional circumstance contain programmer mistake way address use fewer effect programming style computes new value instead changing existing data help piece code stop running middle creating new value existing data structure damaged making easier recover isn t practical trystatements feature followed finallyblock instead addition catch block finally block say matter whathappens run code trying run code function transfer account return let progress try account progress account getaccount progress finally progress account version function track progress leaving notice aborted point created inconsistent program state repair damage did note finallycode run exception thrown tryblock doe interfere exception finally block run stack continues unwinding writing program operate reliably exception pop expected place hard people simply don t bother ceptions typically reserved exceptional circumstance problem occur rarely noticed good thing really bad thing depends damage software fails selectivecatching exception make way stack caught get handled environment mean differs environment browser description error typically get written javascript console reachable browser s tool developer menu browserless javascript environment discus chapter careful data corruption abort process unhandled exception occurs programmer mistake just letting error best unhandled exception reasonable way signal broken program javascript console modern browser provide information function call stack problem occurred problem expected happen routine use crashing unhandled exception terrible strategy invalid us language referencing nonexistent binding ing property null calling s function result exception raised exception caught catchbody entered know try body caused exception don t know whatdid whichexception caused javascript glaring omission doesn t provide direct support selectively catching exception catch don t catch make tempting assumethat exception thinking wrote catchblock assumption violated introduced bug causing exception example attempt calling promptdirection get valid answer try let dir promtdirection typo chose dir break catch e valid direction try construct way intentionally create loop doesn t terminate break loop valid direction given unfortunately misspelled promptdirection result undefined variable error catchblock completely ignores exception value e assuming know problem wrongly treat binding error indicating bad input doe cause infinite loop buries useful error message misspelled binding general rule don t exception unless purpose routing example network tell program crashed think carefully hiding information want catch specifickind exception checking catchblock exception got interested rethrow recognize exception compare messageproperty error message happen expect s shaky way write d using information s intended human consumption message make programmatic decision soon change translates message code stop working let s define new type error use instanceof identify class inputerror extends error function promptdirection question let result prompt question left return l right return r new inputerror invalid direction result new error class extends error doesn t define constructor mean inherits errorconstructor expects string message argument fact doesn t define class inputerror object behave like errorobjects different class recognize loop catch carefully try let dir promptdirection chose dir break catch e e instanceof inputerror valid direction try throw e thiswillcatchonlyinstancesof inputerror andletunrelatedexceptionsthrough reintroduce typo undefined binding error properly ported assertion assertion check inside program verify way supposed used handle situation come normal operation programmer mistake example firstelement described function called array write like function firstelement array throw new error firstelement called return array instead silently returning undefined reading property doe exist loudly blow program soon misuse make likely mistake unnoticed easier cause occur recommend trying write assertion possible kind bad input d lot work lead noisy code ll want reserve mistake easy make making summary important programming finding diagnosing fixing bug problem easier notice automated test suite add assertion program problem caused factor outside program s control usually actively planned problem handled locally special return value good way track exception preferable throwing exception cause stack unwound enclosing block stack exception value given catchblock catch verify actually expected kind exception help address unpredictable control flow caused exception finally block used ensure piece code alwaysruns block finish exercise retry say function primitivemultiply percent case tiplies number percent case raise exception type multiplicatorunitfailure write function wrap clunky function just keep trying succeeds return result make sure handle exception trying handle thelockedbox consider following contrived object box new class locked true content unlock false lock true content throw new error locked return content box lock array box box unlocked write function called withboxunlocked take function value gument unlocks box run function ensures box locked returning regardless argument function returned normally threw exception extra point make sure withboxunlocked box unlocked box stay unlocked people confronted problem think know l l use regular expression problem zawinski regularexpressions programmingtoolsandtechniquessurviveandspreadinachaotic evolutionary way s best brilliant one win one function right niche happen integrated successful piece technology chapter discus tool regular expression regular expression way pattern string data form small separate language javascript language system regular expression terribly awkward extremely useful syntax cryptic programming interface javascript provides clumsy powerful tool inspecting processing string properly understanding regular expression make effective grammer creatingaregularexpression regular expression type object constructed theregexpconstructor written literal value enclosing pattern forward slash character let new regexp abc let regular expression object represent pattern character followed bfollowed whenusingthe regexpconstructor patterniswritten asanormal string usual rule apply backslashes second notation pattern appears slash character treat backslashes somewhat differently forward slash end pattern need backslash forward slash want partof pattern addition backslashes aren t special code like preserved ignored string change meaning pattern character questionmarksandplussigns havespecialmeaningsinregularexpressionsand preceded backslash meant represent character let aplus testingformatches regular expression object number method simplest test pas string return boolean telling string contains match pattern expression abcde true abxde false regular expression consisting nonspecial character simply represents sequence character abcoccurs string testing just start testwill return true setsofcharacters finding string contains abccould just toindexof regular expression useful allow complicated pattern say want match number regular expression putting set character square bracket make expression match character bracket following expression match string contain digit true true square bracket hyphen character used indicate range character ordering determined character s unicode number character sit right ordering code cover match digit number common character group shortcut digit thing digit character alphanumeric character word character whitespace character space tab newline similar character nota digit nonalphanumeric character nonwhitespace character character newline match date time format like following expression let datetime true false regular expression look completely awful doesn t half slash producing background noise make hard spot actual pattern expressed ll slightly improved version expression later backslash code used inside square bracket example mean digit period character period square bracket loses special meaning go special character plus sign inverta set express want match character exceptthe one write caret character opening bracket let nonbinary false true internationalcharacters javascript s initial simplistic implementation fact simplistic approach later set stone standard behavior javascript s expression dumb character appear english language example far javascript s regular expression concerned word character character latin alphabet uppercase lowercase decimal digit reason underscore character thing like éor ß definitely word acters match wil lmatch uppercase nonword category strange historical accident whitespace doe problem match character unicode standard considers whitespace including thing like nonbreaking space mongolian vowel separator itispossibletouse unicode standard assigns given property allows match thing like letter cosmopolitan way compatibility original language standard recognized aucharacter unicode regular expression l letter n numeric character p punctuation character l nonletter uppercase p inverts character given script chapter using text processing need handle text english text borrowed word like cliché liability won t treat character like é letter tend bit verbose group robust l α true l false α true α false hand matching number order want digit converting arbitrary numeric charactersintoajavascriptnumberisnotsomethingthatafunctionlike number know match single digit want match sequence digit plus sign regular expression indicates element repeated match digit character true false true true star similar meaning allows pattern match zero time star prevents pattern ll just match zero instance t suitable text match question mark make pattern optional meaning occur zero time time following example ucharacter allowed occur pattern match missing let neighbor neighbour true neighbor true indicate pattern occur precise number time use brace putting element example requires occur exactly time possible specify range way mean element occur twice time version date time pattern allows day month hour slightly easier decipher let datetime true specify range using brace omitting number comma example mean time use operator like element time use parenthesis regular expression enclosed parenthesis count single element far operator following concerned let cartooncrying boohoooohoohooo true second apply second oinbooand hoo respectively group matching sequence like iat end expression example make regular sion case insensitive allowing match uppercase bin input string pattern lowercase matchesandgroups testmethod absolute simplest way match regular expression tell matched regular expression exec execute method return nullif match return object information match let match match object returned exechas indexproperty tell string successful match begin object look like fact array string element string matched previous example sequence digit looking string value matchmethod behaves similarly whentheregularexpressioncontainssubexpressionsgroupedwithparentheses text matched group array match element element matched group opening parenthesis come expression second group let quotedtext said hello whenagroupdoesnotendupbeingmatchedatall forexample whenfollowed byaquestionmark itspositionintheoutputarraywillhold undefined group matched multiple time example followed match end array ly bad bad undefined want use parenthesis purely grouping having array match opening parenthesis na banana nana group useful extracting part string don t just want verify string contains date extract construct object represents wrap parenthesis digit pattern directly pick date result exec ll brief detour discus way represent date time value javascript thedateclass javascript standard dateclass representing date point time simply create date object using new current date time new date fri feb cet create object specific time new date wed dec cet new date wed dec cet us convention month number start zero december day number start confusing silly careful argument hour minute second millisecond tional taken zero given timestamps stored number millisecond start utc time zone follows convention set unix time invented time use negative number time gettime method date object return number big imagine new date new date thu dec cet dateconstructor single argument argument treated millisecond count current millisecond count creating new dateobject calling gettimeon calling function dateobjectsprovidemethodssuchas getfullyear getmonth getdate gethours getminutes getseconds toextracttheircomponents getfullyear s getyear give year minus useless putting parenthesis part expression interested create date object string function getdate string let month day year string return new date year month day getdate thu jan cet underscore binding ignored used skip match element array returned exec unfortunately getdatewillalsohappilyextractadatefromthestring match happen string case ll just start second character end character want enforce match span string add marker caret match start input string dollar sign match end match string consisting entirely digit string start exclamation mark match string x start string match word boundary position word character nonword character nately use simplistic concept word character reliable note boundary marker don t match actual character just enforce given condition hold place appears pattern testsdosomethingsimilar theyprovideapatternandwillmake match fail input doesn t match pattern don t actually match position forward written braeburn b null ein example necessary match matched string notation express negative match pattern parenthesis doesn tmatch causing second example match acharacters don t space choicepatterns say want know piece text contains number number followed word pig cow chicken plural form write regular expression test turn nicer way pipe character denotes choice pattern left pattern right use expression like let animalcount s pig true pug false parenthesis used limit pattern pipe applies multiple operator express choice alternative themechanicsofmatching conceptually use execortest regular expression engine look match string trying match expression start string second character find match reach end string ll return match fail match actual matching engine treat regular expression like flow diagram diagram livestock expression previous example digit group pig cow chicken s path left diagram right expression match current position string time box verify string current position match box backtracking regular expression match binary number followed b hexadecimal number base letter atofstanding digit followed h regular decimal number suﬀix character corresponding diagram linegroup b digit f h digitend linewhenmatchingthisexpression thetop binary branchwill oftenbe entered input doe actually contain binary number matching string example clear wrong branch string doesmatch expression just branch currently matcher backtracks entering branch remembers current position case start string just past boundary box diagram try branch current doe work string encountering matcher start trying branch hexadecimal number fails becausethereisno hafterthenumber itthentriesthedecimalnumberbranch fit match reported matcher stop soon find match mean multiple branch potentially match string ordered branch appear regular expression used backtracking happens repetition operator like match abcxe try consume string engine realize need xto match pattern xpast end string star operator try match character matcher doesn t xafter abcxeither backtracks matching star operator just find x need report successful match position possible write regular expression lotof backtracking problem occurs pattern match piece input ferent way example confused writing regular expression accidentally write like b group try match long series zero one trailing b character matcher go inner loop run digit notice b backtracks position go outer loop give trying backtrack inner loop continue try possible route loop mean work doubleswith additional character just dozen character resulting match practically forever thereplacemethod string value replace method used replace string string papa p m mapa argument regular expression case match regular expression replaced goption global added regular expression al lmatches string replaced just borobudur ou barobudur borobudur ou barabadar real power using regular expression replace come fact refer matched group replacement string example say big string containing name people line format lastname firstname want swap name remove comma firstname lastname format use following code liskov robin l l barbara liskov john mccarthy robin milner replacement string refer parenthesized group pattern replaced text matched group second match referred possible pas second ment replace replacement function called matched group match argument return value inserted new string s example let stock lemon cabbage egg function minusone match unit number left remove unit return unit l minusone lemon cabbage egg code take string find occurrence number followed alphanumericword andreturnsastringthathasonelessofeverysuchquantity group end amountargument function p l group get bound unit function convert amountto work matched make adjustment case zero left greed use replaceto write function remove comment piece javascript code attempt function stripcomments code stripcomments stripcomments x x stripcomments b match slash character followed number character multiline comment involved use character set character way match character just use period block comment continue new line period character doe match newline character output line appears gone wrong partoftheexpression asidescribedinthesectiononbacktracking match cause pattern fail matcher move character try example matcher try match rest string move occurrence going character match intention match single comment way end code end block comment behavior say repetition operator greedy meaning match backtrack question mark nongreedy start bymatchingas little possible matchingmore remaining pattern doe fit smaller match exactly want case having star match smallest stretch character brings consume block comment function stripcomments code return stripcomments b lot bug regular expression program traced unintentionally using greedy operator nongreedy work better using repetition operator prefer nongreedy variant case know exact pattern need match writing code say want test user s piece text build string use regexpconstructor let harry let regexp new regexp gi harry dodgy character true creating string use backslashes writing normal string regular expression second argument regexpconstructor contains option regular case gi global case insensitive rd user nerdy teenager thatwouldresultinanonsensical regularexpressionthatwon tactually match user s work add backslashes character special meaning let rd let escaped let regexp new regexp escaped gi let text rd guy super annoying text true thesearchmethod whilethe indexofmethodonstringscannotbecalledwitharegularexpression method search doe expect regular expression like indexof return index expression wasn t word unfortunately way indicate match start offset like second argument indexof useful thelastindexproperty execmethod similarly doe provide convenient way start searching given position string doe provide inconvenient way regular expression object property property source contains string expression created property islastindex control limited circumstance match start circumstance regular expression global g sticky y option enabled match happen exec method confusing solution just allow extra argument passed exec confusion essential feature javascript s regular expression interface let pattern let match xyzzy ifthematchwassuccessful thecallto execautomaticallyupdatesthe lastindex propertytopointafterthematch ifnomatchwasfound lastindex issetback value newly constructed regular expression object thedifferencebetweentheglobalandthestickyoptionsisthatwhenstickyis enabled match succeed start directly lastindex global search ahead position match start let global xyz abc abc let sticky xyz abc null using shared regular expression value multiple execcalls automaticupdatestothe lastindex propertycancauseproblems yourregular expression accidentally starting index left previous let digit null interesting effect global option change way matchmethod string work called global expression instead returning array similar returned exec matchwill al l matchesofthepatterninthestringandreturnanarraycontainingthematched string banana cautious global regular expression case replaceandplaceswhereyouwanttoexplicitlyuse lastindex typically situation want use common thing match regular expression string using matchall method let input string number let match let match match match method return array match array regular expression given tomatchall musthave genabled parsinganinifile conclude chapter ll look problem call regular sion imagine writing program automatically collect information enemy internet actually write program just read configuration file sorry configuration file look like comment preceded semicolon section concern individual enemy larry doe bully davaeorn wizard exact rule widely used file format usually called follows line line starting semicolon ignored wrapped start new section containing alphanumeric identifier followed add setting current section invalid task convert string like object property hold string setting written section header subobjects section subobjects holding section s setting format processed line line splitting file separate line good start saw splitmethod chapter operating system use just newline character separate line carriage return character followed newline given thesplitmethod allows regular expression argument use regular expression like split way allows line function parseini string start object hold field let result let section result let line let match match section match match match section result match line throw new error line line valid return result parseini address vasilis address city tessaloniki code go file s line build object property stored directly object property section stored separate section object section binding point object current section kind significant header property line line regular property stored current section section header new section object created sectionis set point note recurring use make sure expression match line just leaving result code work behaves strangely input diﬀicult bug track pattern match make use fact value assignment expression assigned value aren t sure matchwill succeed access resulting object inside ifstatement test break pleasant chain form assign result match binding immediately use assignment test ifstatement line section header property function check comment line using expression match line contain whitespace whitespace followed semicolon making rest line comment line doesn t match expected form function throw exception design mistake s standardized javascript regular sion default operator like work code unit discussed inchapter actual character mean character composed code unit behave strangely false false true problem line treated code unit applied second unit similarly dot match single code unit make rose emoji add u unicode option regular expression make treat character properly true summary regular expression object represent pattern string use language express pattern sequence character abc character set character character notin set character character range character occurrence pattern x occurrence nongreedy zero occurrence zero occurrence occurrence abc group pattern digit character alphanumeric character word character whitespace character character newlines l letter character start input end input test regular expression method testto test given string match method execthat match return array containing matched group array indexproperty indicates match started string matchmethod match regular expression searchmethod search returning starting position match replace method replace match pattern replacement string function regular expression option written closing slash ioption make match case insensitive goption make expression global thing cause replace method replaceallinstancesinsteadofjustthefirst yoptionmakesandexpression sticky mean search ahead skip string looking match uoption turn unicode mode enables fix number problem handling character code unit regular expression sharp tool awkward handle simplify task tremendously quickly unmanageable applied complex problem knowing use resisting urge try shoehorn thing cleanly express unavoidable course working exercise confused frustrated regular expression s inexplicable behavior help enter expression online tool like visualization corresponds intended experiment way responds various input string regexpgolf code golf term used game trying express particular program character possible similarly regexp golf practice writing tiny regular expression possible match given pattern onlythat pattern following item write regular expression test given pattern occurs string regular expression match string containing pattern expression work make smaller carand cat popand prop ferret ferry ferrari word ending iou whitespace character followed period comma colon semicolon word longer letter word letter e e refer table chapter summary help test solution test string quotingstyle imagine written story used single quotation mark mark piece dialogue want replace dialogue quote double quote keeping single quote used contraction like aren t think pattern distinguishes kind quote usage craft replace method doe proper replacement write expression match number port optional minus orplus sign number decimal dot exponent optional sign exponent note necessary digit dot number dot valid javascript number lone dot isn t w rite code easy delete easy extend programming terrible module ideally program clear straightforward structure way work easy explain play role practice program grow organically piece functionality added programmer identifies new need keeping program structured requires constant attention work work pay future nexttime work program s tempting neglect allow various part program deeply entangled cause practical issue understanding entangled hard touch diﬀicult look given piece isolation forced build holistic understanding entire thing second want use functionality program situation rewriting easier trying disentangle context phrase big ball mud used large structureless gram stick try pick piece thing come apart succeed making mess modularprograms module areanattempttoavoidtheseproblems amoduleisapieceofprogram specifies piece relies functionality provides module use interface module interface lot common object interface saw chapter make module available outside world rest private interface module provides use half story good module requires module specify code use module relation called dependency module us functionality module b said dependon module clearly specified module used figure module need present able use given module automatically load dependency way module interact explicit like lego piece interact connector like mud mix esmodules original javascript language did concept module script ran scope accessing function defined script referencing global binding created script actively encouraged accidental entanglement code invited problem like unrelated script trying use binding ecmascript javascript support different type gram scriptsbehave old way binding defined global scope way directly reference script module separate scope support importand exportkeywords aren t available script declare dependency interface module usually called e module esstands mascript amodularprogramiscomposedofanumberofsuchmodules wiredtogether import export following example module convert day name number returned date sgetdaymethod defines constant interface function dependency const name sunday monday tuesday wednesday thursday friday saturday export function dayname number return name number export function daynumber return exportkeywordcanbeputinfrontofafunction class orbindingdefinition indicate binding module s interface make possible module use binding importing import dayname let new date today dayname today monday importkeyword followed list binding name brace make binding module available current module module identified quoted string howsuchamodulenameisresolvedtoanactualprogramdiffersbyplatform browser treat web address resolve file run module module depends module thosedepend loaded exported binding available module import import export declaration appear inside function loop block immediately resolved module loaded regardless code module executes reflect appear outer module body module s interface consists collection named binding module depend module access imported binding renamed new local using asafter import dayname nomdejour nomdejour wednesday module special export named default used module export single binding define default export write export default expression function declaration class declaration export default winter spring summer autumn binding imported omitting brace import import seasonnames import binding module time use import provide bound object holding module s export useful using lot different export import dayname wednesday advantage building program separate piece able run piece able use piece different program set say want use parseini function chapter program clear function depends case just copy module new project use mistake code ll probably fix whichever program m working time forget fix program start duplicating code ll quickly wasting time energy moving copy keeping date s package come package chunk code distributed copied installed contain module information package depends package usually come umentation explaining doe people didn t write able use problem package new feature added package updated program depend package copy new version improvement code workinginthiswayrequiresinfrastructure weneedaplacetostoreandfind package convenient way install upgrade javascript world infrastructure provided npm http npm thing online service download upload package program bundled help install manage time writing million different package available npm large portion rubbish fair useful publicly available javascript package npm example ini file parser similar built chapter available package ini chapter install package locally using npm command line program having quality package available download extremely valuable mean avoid reinventing program people written solid implementation press key software cheap copy written distributing people eﬀicient process writing place iswork responding people problem code want propose new feature work default copyright code write ple use permission people just nice publishing good software help make little bit mous programmer package published license explicitly allows people use code npm licensed way license require publish code build package license demanding requiring license code distribute javascript community us type license using people s package make sure aware license instead writing ini file parser use npm import parse ini parse x x y commonjsmodules javascriptlanguage module ple building large system javascript make workable neededmodules community designed improvised module system language use function create local scope module regular object represent module interface initially people just manually wrapped entire module ately invoked function expression create module s scope assigned interface object single global variable const weekday function const name sunday monday tuesday wednesday thursday friday saturday return number return name number number return sunday sunday style module provides isolation certain degree doe declare dependency instead just put interface global scope expects dependency ideal implement module loader better widely used approach javascript module called commonjs module used module start know load e module module used package npm commonjs module look like regular script access binding us interact module function called require module dependency make sure module loaded return interface second object named export interface object module start add property define exported value commonjs example module provides function us package ordinal convert number string like st english name weekday month export single function formatdate take dateobject template string template string contain code direct format yyyy year dofor ordinal day month string like mmmm yyyy output like november const ordinal require ordinal const day month require function date format return mmm tag tag yyyy return tag m return tag mmmm return month tag d return tag return ordinal tag dddd return day interface ordinal single function export object containing multiple daysand monthsare array name structuring convenient creating binding imported interface module add interface function export module depend access use module like const formatdate require formatdate new date dddd friday commonjs implemented module loader loading module wrap code function giving local scope pass require export binding function argument assume access readfile function read file give content define simplified form require like function require let code readfile let export let wrapper function require export code wrapper require export return null function javascript function take list argument string string containing function body return function value argument body ing allows program create new piece program string dangerous trick program putting string provide function make program want standard javascript provides function readfile different javascript environment browser provide way accessing file example just pretend readfile exists avoid loading module multiple time require keep store cache loaded module called check requested module loaded load involves reading module s code wrapping function calling defining require export parameter generated wrapper function passing appropriate value calling loader make sure binding available module s scope ule import happen module s script start running requireis normal function invoked module running unlike import declaration require call canappear inside function dependency expression evaluates string import allows plain quoted string transition javascript community commonjs style e module slow somewhat rough fortunately point popular package npm provide code e module allows e module import commonjs module commonjs code run real reason write new program style anymore buildingandbundling javascript package aren t technically written javascript language extension typescript type checking dialect mentioned chapter widely used people start using planned new language feature long added platform actually run javascript make possible compiletheir code translating sen javascript dialect plain old past version browser run including modular program consists different file web page produce problem fetching single file network take millisecond loading program take second maybe half load file simultaneously s lot wasted time fetching single big file tends faster fetching lot tiny one web programmer started using tool combine program painstakingly split module single big file publish web tool called bundlers apart number file sizeof file determines fast transferred network javascript community invented minifiers tool javascript program make smaller automatically removing ments whitespace renaming binding replacing piece code equivalent code space uncommon code npm package run web page gone multiple stage converting modern javascript historic javascript combining single file minifying code won t detail tool book lar change regularly just aware thing exist look need moduledesign structuring program subtler aspect programming trivial piece functionality organized various way good program design involved ters taste best way learn value design read work lot program notice work doesn t don t assume painful mess just way improve structure putting thought aspect module design ease use designing intended used multiple month longer remember specific helpful interface simple predictable mean following existing convention good example ini package module imitates standard jsonobject providing parse stringify write ini file function like json convert string plain object interface small familiar ve worked likely remember use s standard function widely used package imitate module predictable using simple data structure doing single focused thing parsing module npm provide function directly read file hard disk parses example make impossible use module browser don t direct filesystem access add complexity better addressed composing module function point helpful aspect module ease composed code focused module compute value applicable wider range program bigger module perform complicated action effect ini file reader insists reading file disk useless scenario file s content come source relatedly stateful object useful necessary function use function ini file npm provide interface style requires create object load file object finally use specialized method result type thing common tradition s terrible instead making single function moving perform ritual moving object various state data wrapped specialized object type code interacts know type creating unnecessary interdependency defining new data structure t basic one provided language standard type data complex array map array suﬀices use array example slightly complex data structure graph chapter single obvious way represent graph javascript chapter used object property hold array node reachable node different pathfinding package npm us graph format usually allow graph s edge weight cost distance associated isn t possible representation example s dijkstrajs package approach pathfinding quite similar findroute function called dijkstra s rithm edsger dijkstra wrote jssuﬀix addedtopackagenamestoindicatethefactthattheyarewritteninjavascript dijkstrajs package us graph format similar instead array us object property value weight edge wanted use package d make sure graph stored format expects edge weight simplified model treat road having cost turn const require dijkstrajs let graph let node roadgraph let edge graph node let dest roadgraph node edge dest graph post office cabin post office alice house cabin data structure similar thing combining diﬀicult fore want design composability data structure people using possible follow example designing fitting module structure program diﬀicult phase exploring problem trying different thing work want worry keeping organized big distraction feel solid s good time step organize summary modulesprovidestructuretobiggerprogramsbyseparatingthecodeintopieces clear interface dependency interface module s visible module dependency module make use javascript historically did provide module monjs built point didget coexists uneasily commonjs package chunk code distributed npm repository javascript package download kind useful useless package exercise amodularrobot binding project chapter creates road buildgraph roadgraph villagestate runrobot randompick randomrobot mailroute routerobot findroute write project modular program module create module depend module interface look like piece likely available prewritten npm prefer use npm package write roadsmodule write e module based example chapter contains array road export graph data structure representing asroadgraph depends module export function buildgraph used build graph function expects array element array start end point road circulardependencies circular dependency situation module depends b b directly indirectly depends module system simply forbid whichever order choose loading module make sure module s dependency loaded run commonjs module allow limited form cyclic dependency long module don t access s interface finish loading cyclic dependency okay require function given earlier chapter support type pendency cycle handle cycle wait quietly mud settle remain stil l moment action tao te ching asynchronousprogramming central computer carry individual step make program called processor program seen far processor busy finished work speed like loop manipulates number executeddependsprettymuchentirelyonthespeedofthecomputer sprocessor memory program interact thing outside processor ample communicate computer network request data hard lot slower getting memory thing happening shame let processor sit work meantime handled operating switch processor multiple running program doesn t help want singleprogram able make progress waiting network request asynchronicity synchronous programming model thing happen time function performs action return action finished return result stop program time action take asynchronous model allows multiple thing happen time start action program continues run action finish program informed get access result example data read disk compare synchronous asynchronous programming using small example program make request network bine result synchronous environment request function return work easiest way perform task make request drawback second request started finished total time taken sum response time solution problem synchronous start additional thread control threadis running program execution interleaved program operating ern computer contain multiple processor multiple thread run time different processor second thread start second request thread wait result come resynchronize combine result following diagram line represent time program spends running normally line represent time spent waiting work synchronous model time taken network partof timeline given thread control asynchronous model ing network action allows program continue running network communication happens alongside notifying program finished synchronous single thread control synchronous thread control asynchronous way difference waiting action finish implicitin synchronous model asynchronous asynchronicity cut way make expressing program fit model control easier make expressing program follow straight line awkward ll way reduce awkwardness later chapter make operation asynchronous relying thread programming thread notoriously hard understanding program doe diﬀicult s doing multiple thing generally considered good thing approach asynchronous programming make function need wait extra argument cal lback function chronous function start process set thing callback function called process finish return example settimeout function available browser wait given number millisecond call function settimeout tick waiting generally important work useful need arrange happen certain time check action taking longer expected example common asynchronous operation reading file device s storage imagine function readtextfile read file s content string pass callback function readtextfile content shopping list content shopping list peanut butter banana readtextfile function standard javascript read file browser later chapter performing multiple asynchronous action row using callback mean passing new function handle continuation computation action asynchronous function compare file produce boolean indicating content look like function comparefiles filea fileb callback readtextfile filea contenta readtextfile fileb contentb callback contenta contentb style programming workable indentation level increase asynchronous action end function doing complicated thing wrapping asynchronous action loop way asynchronicity contagious function call function work asynchronously asynchronous using callback similar mechanism deliver result calling callback somewhat involved error prone simply returning value needing structure large part program way great promise slightly different way build asynchronous program chronous function return object represents future result instead passing callback function way function actually return meaningful shape program closely resembles synchronous program standard class promiseis promiseis receipt senting value available provides thenmethod allowsyoutoregisterafunctionthatshouldbecalledwhentheactionforwhich waiting finish promise resolved meaning value available suchfunctions therecanbemultiple arecalledwiththeresultvalue possible thenon promise function called easiest way create promise calling function ensures value wrapped promise s promise simply returned new promise immediately resolve value result let value got value got create promise doe immediately resolve use promise constructor somewhat odd interface constructor expects function argument immediately call passing function use resolve promise example create interface readtextfile function function textfile filename return new promise resolve readtextfile filename text resolve text note contrast function asynchronous function return meaningful promise content file point future ausefulthingaboutthe thenmethodisthatititselfreturnsanotherpromise resolve value returned callback function returned value promise value promise resolve chain multiplecalls thentogether set sequence asynchronous action function read file filename return content random file list show kind asynchronous promise pipeline function randomfile listfile return textfile listfile content l l filename textfile filename function return result chain thencalls initial promise fetch list file string thencall transforms string array line producing new promise second thencall pick random line producing promise yield single filename final thencall read file result function promise return content random file code function used thencalls return regular value immediately passed promise returned thenwhen function return thencall return promise textfile filename making actual asynchronous step possible perform step inside single thencallback step actually asynchronous kind ofthenwrappers synchronous data transformation useful want return promise produce processed version asynchronous result function jsonfile filename return textfile filename jsonfile useful think promise device let code ignore question value going arrive normal value actually exist reference promised value value mightalready appear point future computation defined term promise wiring thencalls executed asynchronously input available failure regular javascript computation fail throwing exception chronous computation need like network request fail file exist code asynchronous computation throw exception pressing problem callback style asynchronous programming make extremely diﬀicult ensure failure erly reported callback common convention use argument callback indicate action failed second pas value produced action successful someasyncfunction error value error handleerror error processvalue value callback function check received exception make sure problem cause including exception thrown function caught given right function promise make easier resolved action finished successfully rejected failed resolve handler registered called action successful rejection propagated new promise returned handler throw exception automatically cause promise produced thencall rejected element chain asynchronous action fails outcome chain marked rejected success handler called point failed like resolving promise provides value rejecting provides value usually called reasonof rejection exception handler function cause rejection exception value used reason similarly ahandler returnsa promisethatis rejected thatrejection flow promise s function creates new rejected promise explicitly handle rejection promise catchmethod register handler called promise rejected similar thenhandlers handle normal resolution s like thenin return new promise resolve original promise s value resolve normally result catchhandler catchhandler throw error new promise rejected shorthand thenalso accepts rejection handler second ment install type handler single method accepthandler rejecthandler function passed promise constructor receives second argument alongside resolve function use reject new promise readtextfile function encounter problem pass error callback function second argument textfile wrapper actually check argument failure cause promise return rejected function textfile filename return new promise resolve reject readtextfile filename text error error reject error resolve text chain promise value created call thenand catchthus form pipeline asynchronous value failure chain created registering handler link success handler rejection handler associated handler don t match type outcome success failure ignored handler match called outcome determines kind value come return value rejection throw exception outcome promise return promise new promise reject reject new error fail value handler value reason caught failure reason return value handler value caught failure error fail handler thenhandler function isn t called point pipeline promise hold rejection catchhandler handle rejection return value given second thenhandler function like uncaught exception handled environment javascript environment detect promise rejection isn t handled report error carla s sunny day berlin runway old decommissioned airport teeming cyclist inline skater grass near garbage container flock crow noisily mill trying convince group tourist sandwich crow stand large scruffy female white feather right wing baiting people skill confidence suggest s doing long time elderly man distracted antic crow casually swoop snatch bun hand sail away contrary rest group look like happy spend day goofing large crow look purposeful carrying loot fly straight roof hangar building disappearing air vent inside building hear odd tapping persistent come narrow space roof unfinished stairwell crowis sitting surrounded byher stolen snack half dozen smartphones turned mess cable rapidly tap screen phone beak word appearing didn t know better d think typing crow known peer sound poorly suited human vocal chord ll refer carla carla somewhat peculiar crow youth fascinated human language eavesdropping people good grasp saying later life shifted human technology started stealing phone study current project learning program text typing hidden lab fact piece asynchronous javascript code carla love internet annoyingly phone working run prepaid data building wireless network requires code access fortunately wireless router building year old poorly secured doing research carla find network authentication mechanism flaw use joining network device send correct passcode access point reply success failure message depending right code provided sending partial code say digit response different based digit correct start code sending incorrect number immediately return failure message sending correct one access point wait digit make possible greatly speed guessing number carla digit trying number turn find doesn t immediately return failure having digit second digit way know entire passcode assume carla joinwifi function given network passcode string function try join network returning promise resolve successful reject authentication failed thing need way wrap promise automatically reject take time allow program quickly access point doesn t respond function withtimeout promise time return new promise resolve reject resolve reject settimeout reject timed time make use fact promise resolved rejected promise given argument resolve reject result result promise returned withtimeout hand settimeout fire rejecting promise resolve reject call ignored passcode program need repeatedly look digit trying digit authentication succeeds know looking immediately fails know digit wrong try digit request time correct digit continue adding digit wait promise inside forloop carla us sive function drive process function get code know far digit try depending happens return finished code start cracking position code try digit function crackpasscode networkid function nextdigit code digit let newcode code digit return withtimeout joinwifi networkid newcode newcode failure failure timed return nextdigit newcode digit return nextdigit code digit throw failure return nextdigit access point tends respond bad authentication request millisecond safe function wait millisecond timing request crackpasscode hangar carla tilt head sigh satisfying code bit harder guess asyncfunctions promise kind asynchronous code annoying write promise need tied verbose way create asynchronous loop carla forced introduce recursive function thing cracking function actually doe completely wait previous action complete starting programming model d straightforward express good news javascript allows write pseudosynchronous code asynchronous computation asyncfunction implicitly turn promise body awaitother promise way look synchronous rewrite crackpasscode like async function crackpasscode networkid let code let digit let newcode code digit try await withtimeout joinwifi networkid newcode return newcode catch failure failure timed code newcode break digit throw failure version clearly show double loop structure function inner loop try digit outer loop add digit passcode anasyncfunctionis markedbythe word asyncbefore function keyword method asyncby writing asyncbefore function method called return promise soon function return promise resolved body throw exception promise rejected inside asyncfunction word awaitcan expression wait promise resolve continue execution function promise reject exception raised point await function longer run start completion like regular javascript function instead frozenat point awaitand resumed later time asynchronous code notation convenient directly using promise need understanding promise case ll interact directly wiring asyncfunctions generally pleasant write chain thencalls ability function paused resumed exclusive toasyncfunctions javascript feature called generator function similar promise define function function placing asterisk word function generator generator return iterator saw chapter function power n let current n current n yield current let power power power break power initially power function frozen start time nexton iterator function run hit yieldexpression pause cause yielded value value produced iterator function return example doe iterator writing iterators easier use generator function iterator groupclass exercise chapter written generator function let yield s longer need create object hold iteration generator automatically save local state time yield yieldexpressions occur directly generator function inner function define inside state generator save yielding localenvironment position yielded special type generator produce promise called resolved return finish rejected throw exception yield awaits promise result promise value thrown exception result awaitexpression acorvidartproject morning carla wake unfamiliar noise tarmac outside hangar hopping edge roof see human setting s lot electric cabling stage kind big black wall built curious crow carla take closer look wall appears consist number large device wired cable device say ledtec quick internet search turn user manual device appear traﬀic sign programmable matrix amber led light intent human probably display kind information event interestingly screen programmed wireless network connected building s local network device network get ip address device use send message talk chapter carla notice phone address like worth trying send message address responds interface described manual sign chapter show make real request real network ter ll use simplified dummy function called requestfor network cation function take network address message sent return promise resolve response machine given address reject problem according manual change displayed sign sending message content like command display data dataholds number led dot providing mean mean maximum brightness sign light wide light high update command send number code sends display update message address local work stick number ip address data sends activates number light corresponding network address s number let addr addr let data let n n n addr let ip addr request ip command display data request ip accepted address won t exist accept message catchcall make sure network error don t crash program request sent immediately waiting request finish order waste time machine don t answer having fired network scan carla head outside result toherdelight left corner areon local network doaccept command quickly note number shown screen screen arrangedthreehighandthreewide theyhavethefollowingnetworkaddresses const screenaddresses open possibility kind shenanigan crow rule human drool wall giant letter feel bit crude instead plan video flying crow covering screen night carla find fitting video clip second half footage repeated create looping video showing crow s wingbeat fit screen pixel carla cut resizes video series image second cut rectangle processed dark spot video crow bright light light spot crow left dark create effect amber crow flying black background set clipimages variable hold array frame frame represented array set format sign expect display single frame video carla need send request screen need wait result request order start sending frame current properly sent order notice request failing promise static method allthat used convert array promisesintoasingle promisethatresolvestoanarrayofresults provides convenient way asynchronous action happen alongside wait finish result wait make sure don t fail function displayframe frame return data return request screenaddresses command display data map image frame array display data array create array request promise return promise combine order able stop playing video process wrapped class class asynchronous playmethod return promise resolve playback stopped stopmethod function wait time return new promise accept settimeout accept time class videoplayer constructor frame frametime frame frametime true async play false let let nextframe wait await displayframe await nextframe stop true waitfunction wrap settimeout promise resolve given number millisecond useful controlling speed playback let video new videoplayer clipimages e playback failed e settimeout entire week screen wall stand evening dark huge glowing orange bird mysteriously appears theeventloop asynchronous program start running main script set callback called later main script callback run completion piece uninterrupted program sit idle waiting happen callback directly called code scheduled callsettimeout function function returned time callback function called callback return control doe function scheduled asynchronous behavior happens function stack reason promise managing exception chronous code hard callback start stack catchhandlers won t stack throw exception try settimeout throw new error woosh catch e run caught e happen javascript environment run program time think running big loop aroundyour program called event loop s loop paused event come added queue code executed thing run time code delay handling event example set timeout dallies timeout s tended point time causing timeout late let start settimeout timeout ran start start wasted time start wasted time timeout ran promise resolve reject new event promise resolved waiting cause callback run current script finish right away later chapter ll various type event run event loop asynchronousbugs program run synchronously single state change happening program make chronous program gapsin execution code run let s look example function try report size file array file making sure read time sequence async function filesizes file let list async filename list filename await textfile filename return list async filename partshowshowarrowfunctionscanalsobemade async putting word asyncin code doesn t immediately look suspicious map asyncarrow function array name creating array promise us wait returning list build program entirely broken ll return single line output listing file took longest read work problem lie take currentvalue list time statement start executing awaitfinishes set listbinding value plus added string time statement start executing time finish s asynchronous gap mapexpression run added list start string end storage retrieval finish setting listto result adding line string easily avoided returning line mapped promise calling joinon result instead building list changing binding usual computing new value error prone changing existing value async function filesizes file let line async filename return filename await textfile filename return await line mistakeslikethisareeasytomake especiallywhenusing await andyoushould aware gap code occur advantage javascript s explicitasynchronicity callback promise await spotting gap relatively easy asynchronous programming make possible express waiting running action freezing program javascript environment typically implement style programming using callback function called action complete event loop schedule callback called appropriate execution doe overlap programming asynchronously easier promise object resent action complete future asyncfunctions allow write asynchronous program synchronous exercise quiettimes s security camera near carla s lab s activated motion sensor connected network start sending video stream active d discovered carla set notice kind wireless network traﬀic turn light lair activity outside know quiet s logging time camera tripped want use information visualize time average week tend quiet tend busy log stored file holding time stamp number returned line file hold list logfiles write asynchronous function activitytable day given day week return array number hour day hold number camera network traﬀic observation seen hour day day identified numberusingthesystemusedby activitygraph function provided sandbox summarizes table string read file use textfile function defined filename return promise resolve file s content remember new date timestamp creates dateobject time getdayand method returning day week hour day type list logfiles logfiles piece data line separated newline character realpromises rewrite function previous exercise using plain promise method style using convenient trying model loop logfiles asyncfunction just using awaitin loop simpler reading file take time approach time run file listed file list typo reading fails doe failure end promise object function return saw given array promise return promise wait promise array finish succeeds yielding array result value promise array fails promise returned byallfails passing failure reason failing promise implementsomethinglikethisyourselfasaregularfunctioncalled remember promise succeeded failed t succeed fail call function resolve ignored simplify way handle failure promise evaluator determines meaning expression programming language just program abelson gerald sussman structure interpretation computer program project aprogramminglanguage building programming language surprisingly easy long aim high enlightening main thing want chapter s magic involved building programming language ve felt human invention immensely clever complicated d able understand little reading experimenting turn quite mundane build programming language called egg tiny simple powerful express computation think allow simple abstraction based function parsing immediately visible programming language syntax notation parseris program read piece text produce data structure reflects structure program contained text text doe form valid program parser point error language simple uniform syntax egg expression expression binding number string application application used function call construct iforwhile parser simple string egg support like slash escape string simply sequence character double quote wrapped double quote number sequence digit binding name consist character whitespace doe special meaning syntax application written way javascript putting thesis expression having number argument parenthesis separated comma define x x print large print small uniformity egg language mean thing operator javascript normal binding language applied just like function syntax concept block need construct represent doing multiple thing sequence data structure parser use program consists expression object typeproperty indicating kind expression property content expression type value represent literal string number value property contains string number value represent expression type word used identifier name object erty hold identifier s string finally apply expression represent application operator property refers pression applied argsproperty hold array argument expression x previous program represented like type apply operator type word args type word x type value value data structure called syntax tree imagine object dot link line dot shown following diagram structure treelike shape fact expression contain expression turn contain expression similar way tree branch split split deﬁne x x print large print small contrast parser wrote configuration file format chapter simple structure split input line handled line time simple form line allowed different approach expression separated line recursive structure application expression contain expression fortunately thisproblemcanbesolvedverywellbywritingaparserfunction recursive way reflects recursive nature language define function parseexpression take string input return object containing data structure expression start string string left parsing expression parsing subexpressions argument application example function called yielding argument expression text remains text turn contain argument closing parenthesis end list argument parser function parseexpression program program skipspace program let match expr match program expr type value value match match program expr type value value number match match program expr type word match new syntaxerror unexpected syntax program return parseapply expr match function skipspace string let return return egg like javascript allows whitespace element repeatedly cut whitespace start program string skipspace function help skipping leading space parseexpression us regular sion spot atomic element egg support string number word parser construct different kind data structure depending expression match input doe match form valid expression parser throw error use thesyntaxerror constructor exception class defined standard like error specific cut matched program string pas object expression parseapply check expression application parses parenthesized list argument function parseapply expr program program skipspace program program return expr expr rest program program skipspace expr type apply operator expr args program let arg parseexpression program program skipspace program program skipspace program throw new syntaxerror expected return parseapply expr character program opening parenthesis application parseapply return expression given skip opening parenthesis creates syntax tree object application expression recursively call parseexpression parse argumentuntilaclosingparenthesisisfound therecursionisindirect parseapply parseexpression calling becauseanapplicationexpressioncanitselfbeapplied suchasin multiplier parseapply parsed application check pair parenthesis follows need parse egg wrap convenient tion verifies reached end input string parsing expression egg program single expression give program s data structure function parse program let expr rest parseexpression program skipspace rest throw new syntaxerror unexpected text program return expr parse type apply operator type word args type word type value value work doesn t helpful information fails doesn t store line column expression start helpful reporting error later s good purpose theevaluator syntax tree program run course evaluator doe syntax tree scope object associate name value evaluate expression tree represents return value produce specialforms null function evaluate expr scope value return word scope return scope throw new referenceerror undefined binding apply let operator args expr word specialforms return specialforms scope let op evaluate operator scope typeof op function return op arg evaluate arg scope throw new typeerror applying evaluator code expression type literal value pression produce value example expression number binding check actually defined scope fetch binding s value application involved special form like evaluate just pas argument expression scope function handle form normal evaluate operator verify function evaluated argument use plain javascript function value represent egg s function value come later special form funis defined recursive structure evaluate resembles structure parser mirror structure language possible combine parser evaluator function evaluate parsing splitting way make program clearer flexible sneededtointerpretegg sthatsimple butwithout defining special form adding useful value environment t language specialforms specialforms object used define special syntax egg associate word function evaluate form currently let s add args scope throw new syntaxerror wrong number args evaluate args scope false return evaluate args scope return evaluate args scope egg s ifconstruct expects exactly argument evaluate result isn t value false evaluate second get evaluated ifform similar javascript s ternary operator javascript s expression statement produce result second argument egg differs javascript handle condition value treat value falseas false thing like zero string reason need represent ifas special form regular function argument function evaluated function called ifshould evaluate eitherits second argument depending value whileform similar args scope throw new syntaxerror wrong number args evaluate args scope false evaluate args scope undefined doe exist egg return false lack meaningful result return false basic building block executes argument value value produced argument args scope let value false let arg args value evaluate arg scope return value able create binding new value create form called define expects word argument expression producing value assign word second argument define like expression return value ll make return value assigned just like javascript s args scope args word throw new syntaxerror incorrect use define let value evaluate args scope scope args value return value theenvironment scope accepted evaluate object property name correspond binding name value correspond value binding bound let s define object represent global scope able use ifconstruct just defined access boolean value boolean value need special syntax simply bind name value trueand falseand use const topscope null true false evaluate simple expression negates boolean value let prog parse true false true evaluate prog topscope false supply basic arithmetic comparison operator add function value scope keeping code short ll usefunction synthesize bunch operator function loop instead defining individually let op topscope op function b return op b useful way output value ll wrap function print value value return value give elementary tool write simple program following function provides convenient way parse program run fresh scope function run program return evaluate parse program topscope lluseobjectprototypechainstorepresentnestedscopessothattheprogram add binding local scope changing scope run define total define count count define total total count define count count print total program ve seen time computes sum number expressed egg clearly uglier equivalent javascript bad language implemented fewer line code function programming language function poor programming language fortunately isn t hard add funconstruct treat argument function s body us argument name function s parameter args scope throw new syntaxerror function need body let body args let params expr word throw new syntaxerror parameter name word return return function args throw new typeerror wrong number argument let localscope scope let localscope params args return evaluate body localscope function egg local scope function produced fun form creates local scope add argument binding evaluates function body scope return result run define plusone fun print plusone run define pow fun base exp exp base pow base exp print pow compilation built interpreter evaluation act directly representation program produced parser compilation process adding step parsing running program transforms program evaluated eﬀiciently doing work possible advance example language obvious use binding binding referred actually running program used avoid looking binding time accessed instead directly fetching predetermined memory location traditionally compilation involves converting program machine code raw format computer s processor execute process convert program different representation thought compilation possible write alternative evaluation strategy egg convert program javascript program us function invoke javascript compiler run result right make egg run fast quite simple implement interested topic willing spend time encourage try implement compiler exercise cheating defined ifand probably noticed trivial wrapper javascript s ifand similarly value egg just regular old javascript value bridging gap primitive machine code processor understands take way work resembles doing toy language chapter doesn t couldn t bedonebetterinjavascript aresituationswherewritingsmalllanguages help real work language doe resemble typical programming language javascript didn t come equipped regular expression example write parser evaluator regular expression imagine building program make possible quickly create parser providing logical description language need parse define specific notation compiler compiles parser program expr number string application number string application expr expr expr usually called language language tailored expressa narrowdomain ofknowledge suchalanguage expressive language designed exactly thing need described domain exercise array add support array egg adding following function scope array value construct array containing argument value length array array s length element array n fetch nth element array closure way defined funallows function egg reference ing scope allowing function s body use local value visible time function defined just like javascript function following program illustrates function freturns function add argument f s argument meaning need access local scope inside fto able use binding run define f fun fun b b f definition funform explain mechanism cause work comment nice write comment egg example hash sign treat rest line comment ignore similar javascript make big change parser support cansimplychange skipspace toskipcommentsasiftheyarewhitespacesothat point skipspace called skip comment make change fixingscope currently way assign binding value define construct act way define new binding existing one new value ambiguity cause problem try nonlocal binding new value end defining local instead language work like design ve awkward way handle scope add special form set similar define give binding new value updating binding outer scope doesn t exist inner scope binding defined throw referenceerror standard error type technique representing scope simple object thing convenient far way little point want use function return prototype object remember use given object property dream web common information space communicate sharing information universality essential fact hypertext link point personal local global draft highly polished world wide web short personal history javascriptandthebrowser chapter book discus web browser browser paid attention web technology decentralized start just technically term way evolved various browser vendor added new functionality ad hoc poorly way finally set standard blessing curse hand empowering central party control improved various party working loose collaboration occasionally open hostility hand haphazard way web developed mean resulting exactly shining example internal consistency part downright confusing badly designed networksandtheinternet computer network cable tween computer allow send data forth cable kind wonderful thing connecting machine building allows wonderful thing connecting machine planet better technology start implementing vision developed resulting network called internet lived promise computer use network shoot bit computer effective communication arise computer end know bit supposed represent meaning given sequence bit depends entirely kind thing trying express encoding mechanism used anetwork protocol describes style communication network protocol sending email fetching email sharing file controlling computer happen infected malicious software hypert ext t ransfer protocol http protocol retrieving named resource chunk information web page picture specifies making request start line like naming resource version protocol trying use rule way requester include mation request way return resource package content ll look http little chapter protocol built protocol http treat network streamlike device bit arrive correct destination correct order providing guarantee primitive network give tricky problem t ransmission control protocol tcp protocol address problem device speak communication internet built tcp connection work follows computer waiting listening computer start talking able listen different kind communication time single machine listener number called port associated protocol specify port used default example want send email using smtp protocol machine send expected listening port computer establish connection connecting machine using correct port number target machine reached listening port connection successfully created listening computer called server connecting computer called client connection act pipe bit machine end data bit successfully transmitted read machine convenient model say tcp provides abstraction network w orld wide w eb confused internet set protocol format allow visit web page browser word w ebrefers fact page easily link connecting huge mesh user web need connect machine internet listen port http protocol computer ask document document web named uniform resource locator url look like http protocol server path tell url us http protocol opposed example encrypted http http come identifies server requesting document path string identifies document resource interested machine connected internet ip address number usedtosendmessagestothatmachine andlookssomethinglike list random number hard remember awkward type instead register domain address set address registered point ip address machine control use domain serve web page type url browser s address bar browser try retrieve display document url browser address refers using http protocol make connection server address ask resource go server sends document browser display screen html html whichstandsfor hypertextmarkup language isthe documentformat used web page html document contains text tagsthat structure text describing thing link paragraph heading short html document look like doctype html html head meta title home page body home page p hello marijn home p wrote book read http document look like browser tag wrapped angle bracket symbol greater provide information structure document text just plain text document start doctype html tell browser terpret page modernhtml opposed obsolete style used past html document head body head contains information aboutthe document body contains document case head declares title document home page whichisawaytoencodeunicodetextasbinarydata document s body contains heading meaning heading produce subheading paragraph p tag come form element body paragraph link started opening tag like p ended closing tag like opening tag link contain extra information form value pair called attribute case destination link indicated http hrefstands hypertext reference somekindsoftagsdonotencloseanythingandthusdonotneedtobeclosed metadata tag meta example able include angle bracket text document special meaning html form special notation introduced plain opening angle bracket written lt closing bracket written gt greater html ampersand character followed character code semicolon called entityand replaced character encodes thisisanalogoustothewaybackslashesareusedinjavascriptstrings mechanism give ampersand character special meaning need escaped amp inside attribute value wrapped double quote quot used insert literal quote character html parsed remarkably way tag missing browser automatically add way standardized rely modern browser way following document treated just like shown previously doctype html meta title home page home page p hello marijn home page p wrote book read html head body tag completely gone browser know meta title belong head mean body started furthermore longer explicitly closing paragraph opening new paragraph ending document close implicitly quote attribute value gone book usually omit html head body tag ples short free clutter wil lclose tag include quote attribute usually omit doctype charset declaration don t encouragement drop html document browser ridiculous thing forget consider doctype thecharsetmetadata implicitly present example actually shown text context book important html tag script allows include piece javascript document testing alert script alert hello script run soon script tag encountered browser read html page pop dialog alertfunction resembles prompt pop little window show message asking input including large program directly html document impractical script tag given srcattribute fetch script file text file containing javascript program url testing alert script file included contains alert hello html page reference url image file script web browser retrieve immediately include page script tag closed refers script file doesn t contain code forget rest page interpreted script load e module chapter browser giving script tag module attribute module depend ules using url relative module name tions attribute contain javascript program button tag show button support onclick attribute attribute s value run button clicked button alert press note use single quote string onclick attribute double quote used quote attribute used quot escape inner quote running program downloaded internet potentially dangerous don t know people site visit necessarily mean running program malicious actor computer infected virus data stolen account hacked attraction web browse necessarily trusting page visit browser severely limit thing javascript program t look file computer modify related web page embedded isolating programming environment way called sandboxing idea program harmlessly playingin sandbox imagine particular kind sandbox having cage steel bar program playing t actually hard sandboxing allowing program room useful restricting doing dangerous lot useful tionality communicating server reading content clipboard used problematic purpose come new way circumvent limitation browser harmful ranging leaking minor private information taking machine browser running browser developer respond fixing hole problem discovered hopefully publicized secretly exploited government agency criminal organization compatibilityandthebrowserwars early stage web browser called mosaic dominated ket year balance shifted netscape turn largely supplanted microsoft s internet explorer point single browser dominant browser s vendor feel entitled laterally invent new feature web user used ular browser website simply start using mind browser dark age compatibility called browser war web developer left unified web incompatible platform make thing worse browser use bug course bug different browser life hard people writing web page mozilla firefox offshoot netscape challenged internet explorer s position late microsoft particularly interested staying competitive time firefox took lot market share away time google introduced chrome browser andapple ssafaribrowsergainedpopularity leadingtoasituationwherethere major player new player attitude standard better engineering practice giving incompatibility fewer bug microsoft seeing market share crumble came adopted attitude edge browser replaced internet explorer starting learn web development today consider lucky latest version major browser behave quite uniformly relatively bug unfortunately firefox s market share getting smaller edge just wrapper chrome s core uniformity form single control browser market push idea web look like rest world worth long chain historical event accident produced web platform today chapter going write program t oo bad old story ve finished building house notice ve accidental ly learned real ly started nietzsche good evil thedocumentobjectmodel open web page browser retrieves page s html text parses like parser chapter parsed program browser build model document s structure us model draw page screen representation document toy javascript program available sandbox data structure read modify act livedata structure s modified page screen updated reflect change documentstructure imagine html document nested set box tag body enclose tag turn contain tag text s example document previous chapter doctype html html head title home page body home page p hello marijn home p wrote book read http page following structure wrote book read itphello marijn pmy home home pagetitleheadhtmlthe data structure browser us represent document follows shape box object interact thing html tag represents box text contains representation called document object model dom short theglobalbinding document givesusaccesstotheseobjects documentelement property refers object representing html tag html document head body headand bodyproperties pointing element tree think syntax tree chapter moment structure strikingly similar structure browser s document nodemay refer node child turn child shape typical nested structure element contain subelements similar data structure treewhen branching structure cycle node contain directly indirectly single root case dom serf root tree come lot computer science addition representing sive structure html document program used maintain sorted set data element usually inserted eﬀiciently tree flat array typical tree different kind node syntax tree egg language identifier value application node application node child identifier value leaf node child go dom node element represent html tag determine structure document child node example node child leaf node piece text comment node dom node object nodetype property contains code number identifies type node element code defined constant property text node representing section text document code comment code way visualize document tree follows html head title home page body home page p hello p wrote leaf text node arrow indicate relationship node thestandard using cryptic numeric code represent node type like thing later chapter ll part dom interface feel cumbersome alien dom interface wasn t designed javascript try interface used system just html xml generic data format syntax unfortunate standard useful case tage consistency isn t compelling having interface properly integrated language using save time having familiar interface language example poor integration consider childnodes property element node dom property hold object lengthproperty property labeled number access child node instance nodelist type real array doe method sliceand map issue simply caused poor design ple way create new node immediately add child attribute instead create add child attribute using effect code interacts heavily dom tends long repetitive ugly flaw aren t fatal javascript allows create abstraction possible design improved way express operation performing library intended browser programming come tool movingthroughthetree dom node contain wealth link nearby node following diagram illustrates wrote book phello marijn pmy home firstchild lastchildprevioussibling nextsiblingparentnode diagram show link type node parentnode property point node likewise element node node type childnodes property point object holding child theory tree using just parent child link javascript give access number additional convenience link firstchild lastchild property point child element value nullfor node child similarly previoussibling nextsibling point adjacent node node parent appear immediately node child previoussibling null child nextsibling null s child property like childnodes contains element type child type child node useful aren t interested text node dealing nested data structure like recursive function useful following function scan document text node taining given string return truewhen function talksabout node string let child talksabout child string return true return false return string talksabout book true nodevalue propertyofatextnodeholdsthestringoftextthatitrepresents findingelements navigating link parent child sibling useful want specific node document reaching ing following fixed path property bad idea doing bakes assumption program precise structure structure want change later cating factor text node created whitespace node example document s body tag just child p element seven plus space want hrefattribute link document don t want say like second child sixth child document body d better say link let link element node getelementsbytagname method collect mentswiththegiventagnamethataredescendants directorindirectchildren node return object tofindaspecific singlenode youcangiveitan idattributeanduse document instead p ostrich gertrude p img gertrude script let ostrich gertrude athird similarmethodis getelementsbyclassname like getelementsbytagname search content element node retrieves element given string classattribute changingthedocument dom data structure changed shape document tree modified changing relationship node removemethod remove current parent node add child node element node use appendchild put end list child insertbefore insert node given argument node given second argument p p p script let paragraph p paragraph paragraph node exist document place inserting graph threein paragraph onewill remove end document insert resulting insert node effect cause removed current position replacechild method used replace child node take argument node new node node replaced replaced node child element method called note replacechild insertbefore expect newnode argument creatingnodes say want write script replaces image img tag ument text held altattributes specifies alternative textualrepresentationoftheimage thisinvolvesnotonlyremovingtheimages adding new text node replace p img cat img hat p button replaceimages replace script function replaceimages let image img let let image image let text text image given string createtextnode give text node insert document make screen loop go image start end list essary node list returned method like getelementsbytagname property like childnodes live updated document change started removing image cause list lose element second time loop repeat stop length collection want solidcollection node opposed live collection real array calling let arrayish length let array arrayish s create element node use method method take tag return new node given type following example defines utility elt creates element node treat rest argument child node function used add attribution quote blockquote quote book finished working learn just immature moment turn away script function elt type child let node type let child child typeof child string child child return node quote elt footer elt strong karl popper preface second edition elt em open society enemy resulting document look like element attribute hreffor link accessed property element s dom object case commonly used standard attribute html allows set attribute want node useful allows store extra information document read orchangecustomattributes whicharen tavailableasregularobjectproperties use getattribute setattribute method p secret launch code p unclassified script let para p let para para secret recommended prefix name attribute ensure conflict attribute commonly used attribute class keyword javascript language historical old javascript tions handle property name matched property used access attribute called classname access real class getattribute setattribute method layout noticed different type element laid differently paragraph p heading width document rendered separate line called block element link strong element rendered line surrounding text element called inline element given document browser able compute layout give element size position based type content layout used actually draw document size position element accessed javascript offsetheight property space element take pixel pixel basic unit measurement browser traditionally corresponds smallest dot screen draw modern display draw verysmall dot longer case browser pixel span multiple display dot similarly clientwidth clientheight size space inside element ignoring border width p border solid red boxed script let para p clientheight offsetheight giving paragraph border cause rectangle drawn effective way precise position element screen getboundingclientrect method return object left rightproperties indicating pixel position side element relative upper left screen want pixel position relative document add current scroll position pagexoffset pageyoffset binding laying document quite lot work speed browser engine immediately document time change wait long doing javascript program changed document finish running browser compute new layout draw changed document screen program asksfor position size reading property asoffsetheight calling getboundingclientrect providing information requires computing layout program repeatedly alternate reading dom layout mation changing dom force lot layout computation happen consequently run slowly following code example contains different program build line xcharacters pixel wide measure time take p span p span script function time action let start current time millisecond action took start m time naive let target x naive took m time clever function let target xxxxx let total x total clever took m styling seen different html element drawn differently displayed block inline add strong make tent bold make blue underline way img tag show image tag cause link lowed clicked strongly tied element type change styling associated element text color underline example us styleproperty p normal link p color green green link second link green instead default link color style attribute contain declaration property color followed colon value green declaration separated semicolon color red border lot aspect document influenced styling example thedisplayproperty control element displayed block inline element text displayed strong inline strong display block block strong display blocktagwillenduponitsownline sinceblockelementsarenotdisplayed inline text tag displayed display noneprevents element showing screen way hide element preferable removing document entirely make easy reveal later javascript code directly manipulate style element element s styleproperty property hold object property possible style property value property string write order change particular aspect element s style p para color purple nice text script let para para magenta style property name contain hyphen property name awkward work javascript d saystyle property name styleobject property hyphen removed letter capitalized cascadingstyles styling html called cs cascading style sheet style sheetis set rule style element document given inside style tag style strong italic color gray p strong strong text italic cascading refers fact multiple rule bined produce final style element example default styling strong tag give bold overlaid rule style tag add color multiple rule define value property recently read rule get higher precedence win example rule style tag included normal contradicting default weightrule text normal notbold style styleattribute applied directly node highest precedence win possible target thing tag name cs rule rule element abc classattribute rule xyz applies element idattribute xyz unique document color gray header background blue color white p element id main class b p precedence rule favoring recently defined rule applies rule specificity rule s specificity measure precisely describes matching element determined number kind tag class id element aspect requires example rule target specific rule target por just precedence notation p applies given style tag direct child p tag similarly p applies tag inside p tag direct indirect child queryselectors won t using style sheet book understanding helpful programming browser complicated warrant separate book main reason introduced notation used style sheet determine element set style apply use effective way dom element queryselectorall method defined document object element node take selector string return nodelist containing element match p chasing span animal rabbit p know going fall p tell span character hookah smoking span animal caterpillar p given script function count selector return selector count p p element count class animal count p animal inside p count p direct child p getelementsbytagname theobjectreturnedby queryselectorall isnotlive won t change change document real array need want treat like queryselector method allpart work similar way useful want specific single element return matching element nullwhen element match positioningandanimating position style property influence layout powerful way default value static meaning element sits normal place document set relative element take space document topand leftstyle property used relative normal place position set absolute element removed normal document longer take space overlap element topand leftproperties used element position property isn t static relative document enclosing element exists use create animation following document display picture cat move ellipse p center img position relative script let cat img let angle function animate time lasttime lasttime null angle time lasttime angle px angle px requestanimationframe newtime animate newtime time requestanimationframe animate gray arrow show path image move picture centered page given position ofrelative ll repeatedly update picture s topand leftstyles script us requestanimationframe schedule animate function run browser ready repaint screen animatefunction call requestanimationframe schedule update browser window tab active cause update happen rate second tends produce animation just updated dom loop page freeze screen browser update display javascript program running allowany interactionwith page need requestanimationframe let browser know ahead thing browser updating screen responding user action theanimationfunctionispassedthecurrenttimeasanargument toensure motion cat millisecond stable base speed angle change difference current time time function ran just moved angle fixed step motion stutter example heavy task running computer prevented function running fraction second moving circle using trigonometry function aren t familiar ll briefly introduce occasionally use book areusefulforfindingpointsthatlieonacirclearound point radius function interpret argument position circle denoting point far right circle going clockwise π taken circle tell point corresponds given position yield position angle greater πor rotation repeat angle unit measuring angle called circle πradians similar degree measuring degree constant πis available javascript sin co sin sin cat animation code keep counter angle current angle animation increment time animate function called use angle compute current position image element topstyle computed multiplied vertical radius ellipse leftstyle based multiplied ellipse wider high note style usually need unit case append px number tell browser counting pixel opposed centimeter em unit easy forget using number unit result style number mean thing regardless unit summary javascript program inspect interfere document browser displaying data structure called dom data structure represents browser s model document javascript program modify change visible document dom organized like tree element arranged hierarchically according structure document object representing element property parentnode childnodes used navigate tree way document displayed influenced styling taching style node directly defining rule match certain node different style property colorordisplay javascript code manipulate element s style directly styleproperty exercise buildatable html table built following tag structure table tr th th height th place tr td kilimanjaro td td tanzania row table tag contains tr tag inside tr tag cell element heading cell th regular cell td given dataset mountain array object height placeproperties generate dom structure table enumerates object column key row object plus header row th element listing column name write column automatically derived object taking property name object data resulting table document appending element idattribute mountain working cell contain number value setting property right elementsbytagname method return child element given tag implement version function take node string tag argument return array containing descendant element node given tag function document use method like queryselectorall work tag element use nodename property note return tag uppercase use tolowercase touppercase string method compensate extend cat animation defined earlierso cat hat img orbit opposite side ellipse make hat circle cat alter animation interesting way make positioning multiple object easier ll probably want switch absolute positioning mean topand leftare counted relative upper left document avoid using negative coordinate cause image outside visible page add fixed number pixel position value y ou power outside event realize wil l strength aurelius meditation handlingevents program work direct user input mouse keyboard tions kind input isn t available ahead time data come piece piece real time program respond happens eventhandlers imagine interface way key keyboard pressed read current state key able react keypresses constantly read key s state catch released dangerous perform computation miss keypress primitive machine handle input like step hardware operating notice keypress queue program periodically check queue new event react find course program remember look queue oftenbecauseanytimebetweenthekeybeingpressedandtheprogramnoticing event cause software feel unresponsive approach called pol ling programmer prefer avoid better mechanism actively notify code event occurs browser allowing register function handler specific event p click document activate script click knocked sentsthebrowserwindowthatcontainsthedocument callingits addeventlistener method register second argument called event scribed argument occurs eventsanddomnodes browser event handler registered context previous example called addeventlistener windowobject register handler window method dom element type object event listener called event happens context object registered button click p handler script let button button click button clicked example attache handler button node click button cause handler run click rest document giving node onclickattribute similar effect work type attach handler attribute event onin node onclick attribute register handler node way addeventlistener method allows add number handler meaning s safe add handler handler element removeeventlistener method calledwithargumentssimilarto addeventlistener remove handler button button script let button button function click click function given removeeventlistener function value given addeventlistener youneed unregister handler ll want handler function example able pas function value method eventobjects ignored far event handler function passed gument event object object hold additional information event example want know whichmouse button pressed look event object s buttonproperty button click way want script let button button mousedown event left button middle button right button information stored event object differs type event ll discus different type later chapter object s typeproperty hold string identifying event click mousedown propagation event type handler registered node child ceive event happen child button inside paragraph clicked event handler paragraph click event paragraph button handler specific event said propagate outward node happened node s parent node root document finally handler registered specific node turn handler registered window chance respond event point event handler stoppropagation method event object prevent handler receiving event useful example button inside clickable element don t want click button activate outer element s click behavior following example register mousedown handler button paragraph clicked right mouse button dler button call stoppropagation prevent handler paragraph running button clicked mouse button handler run p paragraph button button script let para p let button button mousedown handler paragraph mousedown event handler button event object targetproperty refers node originated use property ensure accidentally handlingsomethingthatpropagatedupfromanodeyoudonotwanttohandle possible use targetproperty cast wide net specific type event example node containing long list button convenient register single click handler outer node use targetproperty figure button clicked registering individual handler button button button b button c script click event button clicked event default action click link taken link s target press arrow browser scroll page ll context menu type event javascript event handler called beforethe default behavior take place handler doesn t want normal behavior happen typically taken care handling event preventdefault method event object used implement keyboard shortcut context menu used obnoxiously interfere behavior user expect example link followed http mdn script let link click event nope try thing really good reason ll unpleasant people use page expected behavior broken depending browser event t intercepted chrome example keyboard shortcut close current tab command handled javascript keyevents key keyboard pressed browser fire keydown event released keyup event p page turn violet hold v script keydown event v violet keyup event v despite keydown fire key physically pushed key pressed held event fire time key repeat careful example add button dom key pressed remove key released accidentally add hundred button key held longer previous example look keyproperty event object key event property hold string key corresponds thing pressing key type special key enter hold string name key enter case hold shiftwhile pressing key influence v v pressing produce keyboard modifier key shift ctrl alt meta command mac generate key event just like normal key looking key combination key held looking shiftkey ctrlkey altkey metakey property keyboard mouse event p press script keydown event continuing dom node key event originates depends element focus key pressed node focus unless tabindex attribute thing like link button form field ll come form field chapter particular focus act target node key event user typing text using key event figure typed problematic platform notably virtual keyboard androidphones don tfirekeyevents keyboard type text input don t match keypresses straightforward way input method editor ime software used people script t fit keyboard multiple keystroke combined create character notice typed element type input textarea tag input event user change content actual content typed best directly read focused field discus chapter pointerevents currently widely used way point thing screen mouse including device act like mouse touchpads trackball touchscreen produce different kind event mouseclicks pressing mouse button cause number event mousedown mouseup event similar keydown keyup button pressed released happen dom node immediately mouse pointer event occurs mouseup event click event fire specific node contained press release button example press mouse button paragraph pointer paragraph release button click event happen element contains paragraph click happen close dblclick event fire second click event precise information place mouse event happened look clientx clienty property contain event s coordinate pixel relative corner window pagex pagey relative corner document different window scrolled following program implement primitive drawing application time click document add dot mouse pointer style body height background beige height width round corner background teal position absolute script click event let dot div dot px px dot ll create primitive drawing application chapter mousemotion time mouse pointer move mousemove event fire event used track position mouse common situation useful implementing form functionality example following program display bar set event dlers dragging left right bar make narrower wider p drag bar change width div background orange width height script let lastx track observed mouse x position let bar div mousedown event lastx mousemove moved prevent selection function moved event mousemove moved let dist lastx newwidth dist newwidth px lastx resulting page look like note mousemove handler registered window mouse go outside bar resizing long button held want update size stop resizing bar mouse button released use button property note plural tell button currently held button button held value button property sum code left button code right button middle left right button held example value ofbuttons note order code different used button middle button came right mentioned consistency isn t strong point browser s programming interface touchevents style graphical browser use designed mouse interface mind time touchscreen rare make web work early touchscreen phone browser device pretended certain extent touch event mouse event tap screen ll mousedown mouseup click event illusion isn t robust touchscreen doesn t work like mouse doesn t multiple button t track finger isn t screen simulate mousemove allows multiple finger screen time mouse event cover touch interaction straightforward add click handler button touch user able use like resizeable bar previous example doe work touchscreen whenafingerstarts touching screen touchstart event moved touching touchmove event finally stop touching screen ll touchend event touchscreen detect multiple finger time theseeventsdon thaveasinglesetofcoordinatesassociatedwiththem event object touchesproperty hold object point eachofwhichhasitsown clientx clienty pagex pageyproperties like red circle touching finger style dot position absolute display block border solid red height width p touch page script function update event let dot dot dot let let pagex pagey let dot dot pagex px pagey px dot touchstart update touchmove update touchend update ll want preventdefault touch event handler override browser s default behavior include scrolling page swiping prevent mouse event fired alsohave handler element scrolled scroll event fired iou us knowing user currently looking disabling animation sending spy report evil headquarters ing indication progress highlighting table content showing page number thefollowingexampledrawsaprogressbarabovethedocumentandupdates scroll style progress solid blue width position fixed left div progress script create content supercalifragilisticexpialidocious let bar progress scroll let max innerheight pageyoffset max giving element position offixedacts like absolute position prevents scrolling rest document effect make progress bar stay width changed indicate current progress use px unit setting width element sized relative page width global innerheight binding give height window subtract total scrollable t scrolling youhitthebottomofthedocument salsoan innerwidth forthewindow width dividing pageyoffset current scroll position maximum scroll position multiplying percentage progress bar calling preventdefault scroll event doe prevent scrolling fact event handler called afterthe scrolling take place focusevents element gain focus browser fire focus event loses focus element get blur event unlike event discussed earlier event propagate handler parent element notified child element gain loses focus following example display help text text field currently focus p input text p age input text age year p help script let help help let field input let field field focus event let text text blur event screenshot show help text age field window object receive focus blur event user move browser tab window document shown page finish loading load event fire window documentbodyobjects thisisoftenusedtoscheduleinitializationactionsthat require document built remember content script tag run immediately tag encountered soon example script need part document appear script tag element image script tag load external file load event indicates file reference loaded like event loading event propagate close page navigate away example following link beforeunload event fire main use event prevent user accidentally losing work closing document prevent default behavior event andset returnvalue property event object string browser user dialog asking really want leave page dialog include string malicious site try use dialog confuse people staying page look dodgy ad browser longer display eventsandtheeventloop context event loop discussed chapter browser event handler behave like asynchronous notification scheduled event occurs wait script running finish chance run fact event processed running mean event loop tied work interaction page happens event delayed s time process schedule work event handler lot one page slow cumbersome use case real lydo want thing background freezing page browser provide called web worker worker javascript process run alongside main script timeline imagine squaring number heavy computation want perform separate thread write file called thatrespondstomessagesbycomputingasquareandsending message addeventlistener message event postmessage toavoidtheproblemsofhavingmultiplethreadstouchingthesamedata er share global scope data main script s environment instead communicate sending sage forth code spawn worker running script sends message output response let squareworker new worker message event worker responded postmessage function sends message cause message event receiver script created worker sends receives message workerobject worker talk script created sending listening directly global scope value represented json sent receive copyof value timer settimeout function saw chapter schedule function called later given number millisecond need cancel function scheduled storing value returned settimeout calling cleartimeout let bombtimer settimeout boom chance defused cleartimeout bombtimer cancelanimationframe function work way cleartimeout calling value returned requestanimationframe cancel frame assuming hasn t called similar set function setinterval clearinterval used set timer repeat xmilliseconds let tick let clock setinterval tick tick clearinterval clock stop debouncing type event potential rapidly time row mousemove scroll event handling event careful handler time interaction document start feel slow need nontrivial handler use settimeout make sure doing usually called debouncing event slightly different approach example suppose want react user typed don t want immediately input event typing quickly just want wait pause occurs instead diately performing action event handler set timeout clear previous timeout event occur close closer timeout delay timeout previous event canceled textarea type script let textarea textarea let timeout input cleartimeout timeout timeout settimeout typed undefined value cleartimeout calling timeout fired effect don t careful simply event use slightly different pattern want space response separated certain length time want duringa series event just afterward example want respond mousemove event showing current coordinate mouse millisecond script let scheduled null mousemove event scheduled settimeout mouse scheduled null scheduled event summary event handler make possible detect react event happening web page addeventlistener method used register handler event type keydown focus identifies event called specific dom element propagate element s ancestor allowing handler associated element handle event handler called s passed event object additional information event object method allow stop propagation stoppropagation prevent browser s default handling event preventdefault pressing key fire keydown keyup event pressing mouse button fire mousedown mouseup click event moving mouse fire mousemove event touchscreen interaction result touchstart touchmove touchend event scrolling detected scroll event focus change detected focus blur event document finish load event fire window exercise balloon write page display balloon using balloon emoji press arrow inflate grow percent press arrow deflate shrink percent control size text emoji text setting cs property parent element remember include unit example pixel key name arrow key arrowup arrowdown make sure key change balloon scrolling page working add feature blow balloon past certain size explodes case exploding mean replaced event handler removed t inflate deflate explosion mousetrail javascript s early day high time gaudy home page lot animated image people came truly inspiring way use language mouse trail series element follow mouse pointer moved page exercise want implement mouse trail use absolutely positioned div element fixed size background color refer codein mouse click section example create bunch element mouse move display wake mouse pointer various possible approach make trail simple complex want simple solution start fixed number trail element cycle moving mouse s current position time mousemove event occurs tab tabbed panel common user interface allow select interface panel choosing number tab sticking element simple tabbed interface write function astabs take dom node creates tabbed interface showing child element node insert list button element node child element containing text retrieved attribute child original child hidden given display style currently visible node selected clicking button work extend style button currently selected tab differently obvious tab selected al l reality game bank player game project aplatformgame initial fascination computer like nerdy kid computer game drawn tiny simulated world manipulate story sort pose way projected imagination possibility actually offered don t wish career game programming music industry discrepancy number eager young people wanting work actual demand people creates unhealthy environment writing game fun amusing chapter walk implementation small platform game platform game jump run game game expect player figure world usually viewed jumping thing thegame ourgamewillberoughlybasedon darkblue thomas palef chosethat game entertaining minimalist built code look like dark box represents player task collect yellow box coin avoiding red stuff lava level completed coin collected player walk left right arrow key jump arrow jumping game character s specialty reach time height change direction midair entirely realistic help player feeling direct control avatar thegameconsistsofastaticbackground laidoutlikeagrid withthemoving element overlaid background field grid solid lava moving element player coin certain piece lava position element constrained coordinate fractional allowing smooth motion thetechnology use browser dom display game ll read user input handling key event code small work need build game look like colored box ing uncomplicated create dom element use styling background color size position represent background table unchanging grid square element overlaid using absolutely positioned element game program animate graphic respond user input noticeable delay eﬀiciency important dom originally designed graphic actually better expect saw animation chapter modern machine simple game like performs don t worry optimization inthenextchapter wewillexploreanotherbrowsertechnology canvas tag provides traditional way draw graphic working term shape pixel dom element level ll want way specify level okay start grid use big string character represents background grid moving element plan small level look like let simplelevelplan period space hash character wall plus sign lava player s starting position sign o character coin equal sign block lava move forth horizontally ll support additional kind moving lava pipe character creates vertically moving blob vindicates dripping ing lava doesn t bounce forth move jumping start position hit floor game consists multiple level player complete level completed coin collected player touch lava current level restored starting position player try readingalevel following class store level object argument string defines level class level constructor plan let row l l row row y return ch x let type levelchars ch typeof type string let po new vec x y po ch type return type trimmethod used remove whitespace start end plan string allows example plan start newline line directly remaining string split newline character line spread array producing array character sorowsholds array array character row plan derive level s width height separate moving element background grid ll moving element actor ll stored array object background array array string holding field type wall lava create array map row content rememberthat mappassesthearrayindexasasecondargumenttothemapping function tell given character position game stored pair coordinate upper left background square unit high wide interpret character plan levelconstructor us levelchars object character used level description hold string background type class produce actor typeis actor class static createmethod used create ject added startactors mapping function return background square position actor stored vecobject vector object xand yproperties seen exercise chapter game run actor end different place disappear entirely coin collected ll use stateclass track state running game class state constructor level actor status level actor status static start level return new state level playing player return player statusproperty switch lost won game ended persistent data game state creates new state leaf old intact actor actorobjectsrepresentthecurrentpositionandstateofagivenmovingelement player coin mobile lava game actor object conform interface sizeand posproperties holding size coordinate corner rectangle representing actor updatemethod updatemethod used compute new state position given time step simulates thing actor response arrow key player bouncing forth return new updated actor object atypeproperty contains string identifies type player coin lava useful drawing look rectangle drawn actor based type actor class static createmethod used structor create actor character level plan given coordinate character character necessary thelavaclass handle different character vecclass ll use value position size actor class vec constructor x y x y plus return new vec time factor return new vec factor factor timesmethod scale vector given number useful need multiply speed vector time interval distance traveled time different type actor class behavior different let s define class ll updatemethods later theplayerclasshasa speedpropertythatstoresitscurrentspeedtosimulate momentum gravity class player constructor po speed po speed type return player static create po return new player new vec new vec new vec player square high initial position set half square position character appeared way aligns square appeared sizeproperty instance player store prototype instance used getter like type create return new vecobject time property read wasteful string immutable don t time evaluated constructing lavaactor need initialize object differently depending character based dynamic lava move current speed hit obstacle point resetproperty jump start position dripping doe invert speed continue direction bouncing createmethod look character levelconstructor pass creates appropriate lava actor class lava constructor po speed reset po speed reset type return lava static create po ch ch return new lava po new vec ch return new lava po new vec ch v return new lava po new vec po new vec coinactors relatively simple just sit place liven game little given wobble slight vertical motion track coin object store base position wobbleproperty track phase bouncing motion determine coin s actual position stored posproperty class coin constructor po basepos wobble po basepos wobble type return coin static create po let basepos new vec return new coin basepos basepos new vec inchapter saw give point circle coordinate go forth smooth waveform circle make sine function useful modeling wavy motion avoid situation coin synchronously starting phase coin randomized period s wave width wave produce multiply value returned math number coin random starting position wave define levelchars object map plan character background grid type actor class const levelchars wall lava player o coin lava lava v lava give part needed create levelinstance let simplelevel new level simplelevelplan task ahead display level screen model time motion inside drawing thenext chapter ll display game different way make possible drawing logic interface pas game argument way use game program different new display module game display object draw given level state pas constructor game allow replaced display class define chapter called domdisplay us dom element level ll using style sheet set actual color fixed property element make game possible directly element styleproperty create produce verbose program following helper function provides succinct way create element attribute child node function elt attrs child let dom let attr attrs attr attrs attr let child child child return dom display created giving parent element append level object class domdisplay constructor parent level elt div class game drawgrid level null clear level s background grid change drawn actor redrawn time display updated given state actorlayer property used track element hold actor easily removed replaced coordinate size tracked grid unit size distance mean grid block setting pixel size scale coordinate game ridiculously small single pixel square scaleconstant give number pixel single unit take screen const scale function drawgrid level return elt table class background style width scale px row elt tr style height scale px type elt td class type table element s form nicely corresponds structure row property row grid turned table row tr element string grid used class name table cell td element code us spread triple dot operator pas array child node eltas separate argument following cs make table look like background want background rgb fixed td padding background rgb background white padding used press unwanted default behavior don t want layout table depend content cell don t want space table cell padding inside background rule set background color cs allows color ified word white format rgb r g b red green blue component color separated number rgb red component green blue blue component largest resulting color bluish number red largest draw actor creating dom element setting element s position size based actor s property value multiplied scaleto game unit pixel function drawactors actor return elt div actor let rect elt div class actor scale px scale px scale px scale px return rect element class separate class name space following cs code actorclass give actor absolute tion type used extra class color don t define lavaclass reusing class lava grid square defined earlier position absolute background rgb background rgb syncstate method used make display given state remove old actor graphic redraws actor new position tempting try reuse dom element actor make work need lot additional bookkeeping associate actor dom element make sure remove element actor vanish typically handful actor game redrawing expensive function state drawactors game state adding level s current status class wrapper styletheplayeractorslightlydifferentlywhenthegameiswonorlostbyadding cs rule take effect player ancestor element given class background rgb white white touching lava player turn dark red suggesting scorching coin collected add blurred white upper left upper create white halo effect t assume level fit viewport element draw game need scrollplayerintoview ensures level protruding outside viewport scroll viewport make sure player near center following cs give game s wrapping dom element maximum size ensures stick element s box visible relative position actor inside positioned relative level s corner overflow hidden position relative scrollplayerintoview method player s position update wrapping element s scroll position change scroll position ulating element s scrollleft scrolltop property player close edge function state let width let height let margin width viewport let left right left width let height let player let center scale left margin margin right margin margin width margin margin margin margin height way player s center show method vectype allow computation object written relatively readable way actor s center add position corner half size center level coordinate need pixel coordinate multiply resulting vector display scale series check verifies player position isn t outside allowed range note set nonsense scroll coordinate zero element s scrollable area dom constrain acceptable value setting scrollleft cause slightly simpler try scroll player center viewport creates jarring effect jumping view constantly shift s pleasant neutral area middle screen causing scrolling able display tiny level link stylesheet script let simplelevel new level simplelevelplan let display new domdisplay simplelevel simplelevel link tag used stylesheet way load cs file page file contains style necessary game motionandcollision point start adding motion basic approach taken game like split time small step step actor distance corresponding speed multiplied size time step ll measure time second speed expressed unit second moving thing easy diﬀicult dealing interaction element player hit wall floor simply game notice given motion cause object hit object respond accordingly wall motion stopped hitting coin coin collected touching lava game lost solving general case major task library ally called physic engine simulate interaction physical object dimension ll modest approach chapter handling collision rectangular object handling simplistic way beforemovingtheplayerorablockoflava wetestwhetherthemotionwould inside wall doe simply cancel motion altogether response collision depends type player stop lava block bounce approach requires time step small cause motion stop object actually touch time step motion step big player end hovering noticeable distance ground approach arguably better plicated exact collision spot simple approach hide problem ensuring animation proceeds small step method tell rectangle specified position size touch grid element given type function po size type let xstart let xend let ystart let yend let y ystart y yend let x xstart x xend let isoutside x x y y let isoutside wall y x type return true return false method computes set grid square body overlap using coordinate remember grid square unit size rounding side box range background square box touch loop block grid square rounding coordinate return truewhen matching square square outside level treated wall ensure player t leave world won t accidentally try read outside bound row array state updatemethod us touch figure player touching lava function time key let actor actor time key let newstate new state actor playing return newstate let player lava return new state actor lost let actor actor actor player overlap actor player newstate newstate return newstate method passed time step data structure tell key held thing doe updatemethod actor producing array updated actor actor time step key state base update player actually read key s actor s controlled keyboard game processing game t won lost vice versa method test player touching background lava game lost finally game really going see actor overlap player overlap actor detected overlap function take actor object return truewhen case overlap function overlap return actor doe overlap collidemethod get chance update state touching lava actor set game status lost coin vanish touch set status won coin level function state return new state lost function state let filtered let status coin status won return new state filtered status actorupdates actor object updatemethods argument time step state ject keysobject lavaactor type ignores key object function time state let newpos time newpos wall return new lava newpos return new lava return new lava updatemethodcomputesanewpositionbyaddingtheproductofthetime step current speed old position obstacle block new position move obstacle behavior depends type lava lava resetposition jump hit bouncing lava inverts speed multiplying start moving opposite direction coin use updatemethod wobble ignore collision grid simply wobbling inside square const wobblespeed wobbledist function time let wobble time wobblespeed let wobblepos wobble wobbledist return new coin new vec wobblepos wobble wobblepropertyisincrementedtotracktimeandthenusedasanargument new position wave coin s current position computed base position offset based wave leaf player player motion handled separately axis hitting floor prevent horizontal motion hitting wall stop falling jumping motion const playerxspeed const gravity const jumpspeed function time state key let xspeed xspeed playerxspeed xspeed playerxspeed let po let movedx new vec xspeed time movedx wall po movedx let yspeed time gravity movedy new vec yspeed time movedy wall po movedy yspeed yspeed yspeed return new player po new vec xspeed yspeed horizontal motion computed based state left right arrow key s wall blocking new position created motion used old position kept vertical motion work similar way simulate jumping gravity player s vertical speed yspeed accelerated account gravity check wall don t hit new position used isa wall possible outcome arrow pressed andwe moving meaning thing hit speed set relatively large negative value cause player jump case player simply bumped speed set zero gravity strength jumping speed constant game determinedbysimplytryingoutsomenumbersandseeingwhichonesfeltright try experimenting trackingkeys game like want key effect keypress want effect moving player figure stay active long held need set key handler store current state left right arrow key want preventdefault key don t end scrolling page following function given array key name return object track current position key register event handler keydown keyup eventsand whenthekeycodeintheeventispresent set code tracking update object function trackkeys key let null track event keydown keydown track keyup track return const arrowkeys trackkeys arrowleft arrowright arrowup handler function used event type look event object s typeproperty determine key state updated true keydown false keyup runningthegame requestanimationframe function saw chapter provides good way animate game interface quite requires track time function called time requestanimationframe frame let s define helper function wrap convenient interface allows simply runanimation giving function expects time difference argument draw single frame frame function return value false animation stop function runanimation framefunc let lasttime null function frame time lasttime null let timestep time lasttime framefunc timestep false return lasttime time requestanimationframe frame requestanimationframe frame set maximum frame step millisecond second whenthebrowsertaborwindowwithourpageishidden requestanimationframe suspended tab window shown case difference lasttime timewill entire time page hidden advancing game single step look silly cause weird effect player falling floor function convert time step second easier quantity think millisecond runlevel function take levelobject display constructor return promise display level let user play level finished lost won runlevel wait second let user happens clear display stop animation resolve promise game s end status function runlevel level display let display new display level let state level let ending return new promise resolve runanimation time state time arrowkeys state playing return true ending ending time return true resolve return false game sequence level player dy current level restarted level completed level expressed following function take array level plan string display constructor async function rungame plan display let level level let status await runlevel new level plan level display status won won runlevel return promise rungamecan written using asyncfunction shown chapter return promise resolve player finish game set level plan available binding chapter s sandbox http page feed rungame starting actual game link stylesheet body script rungame domdisplay exercise gameover s traditional platform game player start limited ber livesand subtract life time die player life game restarts beginning adjust rungameto implement life player start output current number life using time level start pausingthegame make possible pause suspend unpause game pressing esc changing runlevel function set keyboard event handler interrupt resume animation escis hit runanimation interface look like suitable glance rearrange way runlevel call working s try way ve registering keyboard event handler somewhat problematic arrowkeys object currently global binding event handler kept game running say leakout extend trackkeys provide way unregister handler runlevel register handler start unregister finished amonster traditional platform game enemy defeat jumping exercise asks add actor type game ll actor monster monster horizontally make direction player bounce forth like horizontal lava movement pattern want class doesn t handle falling make sure monster doesn t walk wall monster touch player effect depends player jumping approximate checking player s near monster s case monster disappears game lost drawing deception escher cited bruno ernst magic mirror escher drawingoncanvas browser way display graphic simplest way use style position color regular dom element quite far game previous chapter showed adding partially transparent background image node make look exactly way want possible rotate skew node transform style d using dom wasn t originally designed task drawing line arbitrary point extremely awkward regular html element alternative dom based utilizes scalable v ector graphic svg html think svg markup dialect focus shape text embed svg document directly html document include img tag second alternative called canvas canvas single dom element encapsulates picture provides programming interface drawing shape space taken node main difference canvas svg picture svg original description shape preserved moved resized time canvas hand convert shape pixel colored dot raster soon drawn doe remember pixel represent way shape canvas clear canvas canvas shape redraw shape new position svg book won t svg ll briefly explain work theend chapter ll come consider deciding drawing mechanism appropriate given application html document simple svg picture p normal html svg http circle red rect blue xmlnsattribute change element child different xml namespace namespace identified url specifies dialect currently speaking circle rect tag exist html meaning draw shape using style position specified attribute document displayed like tag create dom element just like html tag script interact example change circle element colored cyan instead let circle circle cyan thecanvaselement canvas graphic drawn canvas element element widthand heightattributes determine size pixel new canvas meaning entirely transparent show space document canvas tag intended allow different style drawing access actual drawing interface need create context object method provide drawing interface currently widely supported drawing style graphic webgl graphic opengl interface webgpu modern flexible alternative webgl book won t discus webgl ll stick dimension interested graphic encourage look webgpu provides direct interface graphic hardware allows render complicated scene eﬀiciently using javascript create context getcontext method canvas dom element p canvas p script let canvas canvas let context red creating context object example draw red rectangle pixel wide pixel high corner coordinate just like html svg coordinate canvas us put corner positive go mean pixel right corner linesandsurfaces canvas interface shape fil led meaning area given certain color pattern stroked mean line drawn edge svg us terminology fillrect method fill rectangle take rectangle s corner width height similar method called strokerect draw outline rectangle method take parameter color thickness stroke determined argument method reasonably expect property context object fillstyle property control way shape filled set string specifies color using color notation used cs strokestyle property work similarly determines color used stroked line width line determined linewidth property contain positive number canvas script let cx canvas blue code draw blue square using thicker line second widthorheightattribute specified example canvas element get default width pixel height pixel path apathisasequenceoflines describing path entirely effect path value stored passed instead want path make sequence method call shape canvas script let cx canvas let y y y y y example creates path number horizontal line segment stroke using strokemethod segment created lineto start path s currentposition position usually end segment unless movetowas called case segment start position passed moveto path described previous program look like filling path using fillmethod shape filled separately path contain multiple movetomotion start new path need closed meaning start end position filled path closed line added end start shape enclosed completed path filled canvas script let cx canvas example draw filled triangle note triangle s side explicitly drawn corner implied wouldn t stroked path use closepath method explicitly close path adding actual line segment path s start segment isdrawn stroking path curve path contain curved line unfortunately bit involved draw quadraticcurveto method draw curve given point determine curvature line method given control point point imagine control point attracting line giving curve line won t control point direction start end point straight line direction point control point following example illustrates canvas script let cx canvas produce path look like draw quadratic curve left right control point draw line segment going control point start line result somewhat resembles star t rekinsignia effect control point line leaving lower corner start direction control point curve target beziercurveto method draw similar kind curve instead single control point method line s end point similar sketch illustrate behavior curve canvas script let cx canvas control point specify direction end curve farther away corresponding point curve bulge direction curve hard work s clear control point provide shape looking compute ll just suitable value trial error arcmethod way draw line curve edge circle take pair coordinate arc s center radius start angle end angle parameter make possible draw circle angle measured radian degree mean circle angle π angle start counting point right circle s center go clockwise use start end bigger π say draw circle canvas script let cx canvas resulting picture contains line right circle toarc right second method line drawn arcis connected previous path movetoor start new path avoid drawingapiechart imagine ve just taken job economicorp assignment draw pie chart customer satisfaction survey result result binding contains array object represent survey response const result satisfied count color lightblue neutral count color lightgreen unsatisfied count color pink comment count color silver draw pie chart draw number pie slice arc pair line center arc compute angle taken arc dividing circle π total number response multiplying number angle response number people picked given choice canvas script let cx canvas let total result sum count sum count start let currentangle let result result let sliceangle total current angle clockwise slice angle currentangle currentangle sliceangle currentangle sliceangle draw following chart chart doesn t tell slice mean isn t helpful need way draw text canvas text canvas drawing context provides method filltext stroketext useful outlining letter usually filltext need outline given text current fillstyle canvas script let cx canvas georgia fuchsia draw text specify size style font text fontproperty example just give font size family possible add italicorboldto start string select style argument filltext stroketext provide position font drawn default indicate position start text s alphabetic baseline line letter stand counting hanging part letter jor change horizontal positionbysettingthe textalign propertyto end center andthevertical position setting textbaseline middle ll come pie chart problem labeling slice theexercises end chapter computer graphic distinction vectorgraphics bitmapgraphics doing far specifying picture giving logical description shape bitmap graphic hand don t specify actual shape work pixel data raster colored dot drawimage method allows draw pixel data canvas pixel data originate img element canvas following example creates detached img element load image file method immediately start drawing picture browser loaded deal register load event handler drawing image loaded canvas script let cx canvas let img img load let x x x img x default drawimage draw image original size additional argument specify width height drawn image aren t origin image drawimage given ninearguments used draw ment image second fifth argument indicate rectangle x y width height source image copied sixth ninth argument rectangle canvas copied used pack multiple sprite image element single image file draw need example picture contains game character multiple pose alternating pose draw animation look like walking character animate picture canvas clearrect method useful bles fillrect instead coloring rectangle make transparent removing previously drawn pixel know sprite subpicture pixel wide pixel high following code load image set interval repeated timer draw frame canvas script let cx canvas let img img let spritew spriteh load let cycle setinterval spritew spriteh img source rectangle cycle spritew spritew spriteh destination rectangle spritew spriteh cycle cycle cyclebinding track position animation frame incremented clipped range using remainder operator binding used compute sprite current pose picture transformation want character walk left instead right draw set sprite course instruct canvas draw picture way round calling scalemethod cause drawn scaled method take parameter set horizontal scale set vertical scale canvas script cx canvas scale circle drawn time wide half high scaling cause drawn image including line width stretched squeezed specified scaling negative flip picture flipping happens point mean flip direction coordinate tem horizontal scaling applied shape drawn xposition end used position turn picture t simply add drawimage picture outside canvas won t visible adjust coordinate given drawimage pensate drawing image xposition instead solution doesn t require code doing drawing know scale change adjust axis scaling happens method scalethat influence coordinate systemforacanvas youcanrotatesubsequentlydrawnshapeswiththe rotate method translate method transformation stack meaning happens relative previous transformation translate horizontal pixel twice drawn pixel right center coordinate rotate degree πradians rotation happen aroundpoint translate rotate rotate translate firstrotate degree thentranslate translation happen rotated coordinate produce different orientation order transformation applied matter flip picture vertical line given xposition following function fliphorizontally context want mirror apply mirroring finally proper place mirrored universe following picture explains work mirror show coordinate system mirroring central line triangle numbered illustrate step draw triangle positive xposition default place triangle fliphorizontally doe translation right get triangle scale flipping triangle position mirrored given line second translate fix cancel initial translation make triangle appear exactly draw mirrored character position flipping world character s vertical center canvas script let cx canvas let img img let spritew spriteh load fliphorizontally cx spritew img spritew spriteh spritew spriteh storingandclearingtransformations transformation stick draw drawing mirrored character mirrored inconvenient possible save current transformation drawing forming restore old transformation usually proper thing function need temporarily transform coordinate save transformation code called tion using function doe thing adding transformation current transformation finally revert transformation started saveand restore method canvas context mation management conceptually stack transformation state save current state pushed stack callrestore state stack taken used context s current transformation resettransform fully reset transformation branchfunction following example illustrates function change transformation call function case continues drawing given transformation function draw treelike shape drawing line moving center coordinate end line calling rotated left rotated right reduces length branch drawn recursion stop length drop canvas script let cx canvas function branch length angle scale length length return length branch length scale angle scale angle length scale angle scale branch result simple fractal call saveand restore second recursive branchwould end position rotation created connected current branch innermost rightmost branch drawn resulting shape interesting definitely tree backtothegame know canvas drawing start working display game previous chapter new display longer showing just colored box instead ll use drawimage draw picture represent game s element define display object type called canvasdisplay supporting sameinterfaceas domdisplay themethods syncstate clear object keep little information domdisplay using scroll position dom element track viewport tell level currently looking finally keep aflipplayer property player standing keep facing direction moved class canvasdisplay constructor parent level canvas scale scale false left width scale height scale clear syncstate method computes new viewport draw game scene appropriate position function state state contrary domdisplay display style doeshave redraw background update shape canvas just pixel draw good way remove way update canvas display clear redraw scene scrolled requires background different position updateviewport methodissimilarto domdisplay sscrollplayerintoview method check player close edge screen move viewport case function state let view margin let player let center margin margin margin margin margin margin margin margin call ensure viewport doe end showing space outside level x make sure resulting number zero similarly guarantee value stay given bound clearing display ll use slightly different color depending game won brighter lost darker function status status won rgb status lost rgb rgb draw background run tile visible current viewport using trick used touch method previous chapter let othersprites img function level let left width height let xstart left let xend left width let ystart let yend height let y ystart y yend let x xstart x xend let tile y x tile continue let screenx x left scale let screeny y scale let tilex tile lava scale othersprites tilex scale scale screenx screeny scale scale tile drawn drawimage othersprites image contains picture used element player contains left right wall tile lava tile sprite coin background tile pixel ll use scale domdisplay offset lava tile value scalebinding offset wall don t bother waiting sprite image load calling drawimage image hasn t loaded simply fail draw game properly frame image loading isn t problem updating screen correct scene appear soon loading finish walking character shown earlier used represent player code draw need pick right sprite direction based player s current motion sprite contain walking animation player moving floor cycle based current time want switch frame millisecond time divided player standing draw ninth sprite jump recognized fact vertical speed zero use tenth rightmost sprite sprite slightly wider player instead pixel allow space foot method adjust width given playerxoverlap let playersprites img const playerxoverlap function player x y width height width playerxoverlap x playerxoverlap let tile tile tile fliphorizontally x width let tilex tile width playersprites tilex width height x y width height drawplayer method called drawactors responsible ing actor game function actor let actor actor let width scale let height scale let x scale let y scale player actor x y width height let tilex coin scale othersprites tilex width height x y width height drawing player look type offset correct sprite lava tile offset coin sprite time scale subtract viewport s position computing actor s position canvas corresponds left viewport left level used translate way work concludes new display resulting game look like choosingagraphicsinterface need generate graphic browser choose plain html svg canvas single bestapproach work situation option strength weakness plain html advantage simple integrates text svg canvas allow draw text won t help position text wrap take line picture easier include block text svg used produce crisp graphic look good zoom level unlike html designed drawing suitable purpose svg html build data structure dom represents picture make possible modify element drawn need repeatedly change small big picture response user doing animation doing canvas needlessly expensive dom allows register mouse event handler element picture shape drawn svg t canvas canvas s approach advantage drawing huge number tiny element fact doe build data structure repeatedly draw pixel surface give canvas lower cost shape effect practical canvas element rendering scene pixel time example using ray tracer postprocessing image javascript blurring distorting case want combine technique example draw graph svg canvas textual mation positioning html element picture nondemanding application really doesn t matter face choose display built game chapter implemented using graphic technology doe need draw text handle mouse interaction work narily large number element summary chapter discussed technique drawing graphic browser focusing canvas element canvas node represents area document program draw drawing drawing context object created getcontext method text s fillstyle property determines shape filled strokestyle linewidth property control way line drawn rectangle piece text drawn single method fillrect strokerect method draw rectangle filltext stroketext method draw text create custom shape build path calling beginpath start new path number method add line curve current path example linetocan add straight line path finished filled fillmethod stroked thestrokemethod moving pixel image canvas canvas thedrawimage method default method draw source image giving parameter copy specific area image used game copying individual pose game character image contained pose allow draw shape multiple orientation drawing context current transformation changed translate scale rotatemethods affect subsequent ing operation transformation state saved savemethod restored restore method showing animation canvas clearrect method used clear canvas redrawing exercise shape write program draw following shape canvas trapezoid rectangle wider red diamond rectangle rotated degree πradians zigzagging line spiral straight line segment yellow star drawing shape want refer explanation whichdescribeshowtogetcoordinates circle using function recommend creating function shape pas position optionally property size number point eters alternative hardcode number code tends make code needlessly hard read modify thepiechart earlierin chapter saw example program drew pie chart modify program category shown slice represents try way automatically text work datasets assume category big leave room label youmightneed whicharedescribedin chapter abouncingball usethe requestanimationframe techniquethatwesawin ter draw box bouncing ball ball move constant speed bounce box s side hit precomputedmirroring unfortunate thing transformation slow ing bitmap position size pixel transformed possible browser cleverer transformation future currently cause measurable increase time take draw bitmap game like drawing single transformed sprite nonissue imagine need draw hundred character thousand rotating particle explosion think way draw inverted character loading additional image file having make transformed drawimage call frame diﬀicult people understand design url http html central computer control ling web single network protocol worked organisation ran w eb w eb physical thing existed certain place space information exist httpandforms hypertext transfer protocol introduced chapter mechanism data requested provided world wide web chapter describes protocol explains way browser javascript access theprotocol type browser s address bar browser look address server associated try open tcp connection port default port http traﬀic server exists accepts connection browser send like host browser server responds connection ok fri oct gmt doctype html rest document browser take response blank line body confused html body tag display html document information sent client called request start line word methodof request getmeans want getthe specified resource common method deleteto delete resource create replace postto send information note server obliged carry request get walk random website tell deleteits main page ll probably refuse method path resource request applies simplest case resource simply file server protocol doesn t require resource transferred ifit file server generate response produce fly example open http server look database user named marijnh find generate profile page user resource path line request mention indicate version http protocol using practice site use http version support cepts version lot complicated faster browser automatically switch appropriate protocol version talking given server outcome request regardless version used version straightforward easier play ll use illustrate protocol server s response start version followed status response status code string ok status code starting indicate request succeeded code starting mean wrong request famous http status code probably mean resource code start mean error happened server request blame line request response followed number header line form value specify extra tion request response header example response fri oct gmt tell size type response document case html document byte tell document client server free decide header include request response necessary thing work example header response browser won t know display document header request response include blank line followed body contains actual document sent getand deleterequests don t send data putand postrequests response type error response don t require body browsersandhttp saw browser make request enter url address bar resulting html page reference file image javascript file retrieve moderately complicated website easily include resource able fetch quickly browser make request simultaneously waiting response time html page include form allow user information send server example form form p input text p message br textarea message p button submit send code describes form field small asking larger write message click send button form submitted meaning content field packed http request browser navigates result request form element s methodattribute omitted formation form added end actionurl query string browser make request url question mark indicates end path url start query followed pair name value corresponding nameattribute form field element content element respectively ampersand character used separate pair actual message encoded url yes question mark replaced strange code character query string escaped question mark represented unwritten rule format need way escaping character called url encoding us percent sign followed hexadecimal base digit encode character code case decimal notation code question mark character javascript provides encodeuricomponent decodeuricomponent function encode decode format encodeuricomponent yes yes decodeuricomponent yes yes change methodattribute html form example saw earlier post http request submit form use post method query string body request adding url post getrequests used request effect simply ask information request change server example creating new account posting message expressed method post software browser know shouldn t blindly make postrequests implicitly make prefetch resource belief user soon need example ll come form interact javascript later chapter fetch interface browser javascript make http request called fetch fetch response calling fetchreturnsapromisethatresolvestoa response mation server s response status code header header wrapped object treat key header name case insensitive header name supposed case sensitive mean return value note promise returned fetchresolves successfully server responded error code rejected network error server request addressed t argument fetchis url requested url doesn t start protocol http treated relative mean interpreted relative current document start slash replaces current path server doe current path including slash character relative url actual content response use textmethod initial promise resolved soon response s header received reading response body longer return promise fetch resp text text content similar method called json return promise resolve value parsing body json reject s valid json default fetchuses getmethod make request doe include request body configure differently passing object extra option second argument example request try delete fetch method delete resp status code mean method allowed http server s way saying m afraid t add request body putorpostrequest include body option set header s header option example request includes rangeheader instructs server return document fetch header range resp content browser automatically add request header host needed server figure size body adding header useful include thing authentication information tell server file format d like receive httpsandboxing making http request web page script raise concern security person control script interest person computer running specifically visit want script able make request using identifying information browser instruction transfer away money reason browser protect disallowing script make http request domain name annoying problem building system want cess domain legitimate reason fortunately server include header like response explicitly indicate browser okay request come domain appreciatinghttp building requires communication javascript program running browser program server different way model communication commonly used model remote procedure cal l model communication follows pattern normal function call function actually running machine calling involves making server includes function s argument response request contains returned value thinking term remote procedure call http just vehicle communication likely write abstraction layer hide entirely approach build communication concept resource http method instead remote procedure called adduser use putrequest instead encoding user s erties function argument define json document format use existing format represents user body putrequest create new resource document resource fetched making getrequest resource s url example return document representing resource second approach make easier use feature http provides support caching resource keeping copy resource client fast access concept used http designed provide helpful set principle design server interface securityandhttps data traveling internet tends follow long dangerous road destination hop coffee shop hotspot network controlled various company state point route inspected modified important remain secret password email account arrive destination unmodified account number transfer money bank s website plain http good secure http protocol used url starting http wrap http traﬀic way make harder read tamper exchanging data client verifies server claim asking prove cryptographic certificate issued certificate authority browser recognizes data going connection encrypted way prevent eavesdropping tampering whenitworksright httpspreventsotherpeoplefromimpersonating thewebsiteyouaretryingtotalkto andfromsnoopingonyourcommunication s perfect various incident http failed forged stolen certificate broken software lotsafer plain http form originally designed web allow website send information http request design assumes interaction server happens navigating new page form element dom like rest page dom element represent form field support number tie event present element make possible inspect control input field javascript program thing adding new functionality form using form field building block javascript application web form consists number input field grouped form tag html allows different style field ranging simple checkboxes menu field text input book won t try comprehensively discus field type ll start rough overview lot field type use input tag tag s typeattribute used select field s style commonly used input type text text field password textbut hide text typed checkbox switch color color date calendar date radio field file allows user choose file computer form field necessarily appear form tag page field submitted form responding input javascript don t want submit field normally p input text abc text p input password abc password p input checkbox checked checkbox p input color orange color p input date date p input radio choice input radio b choice checked input radio c choice radio p input file file field created html code look like javascript interface element differs type ment multiline text field tag textarea using attribute specify multiline starting value awkward textarea tag requires matching closing tag us text instead valueattribute starting text textarea finally select tag used create field allows user select number predefined option select option pancake option pudding option ice cream field look like value form field change change event focus unlike element html document form field keyboard focus clicked moved tab activated way currently active element recipient keyboard input type text field focused field respond differently keyboard event example select menu try option contains text user typed responds arrow key moving selection control focus javascript focusand blurmethods move focus dom element called second remove focus value corresponds currently cused element input text script input input input body page user expected want interact form field immediately javascript used focus field document loaded html provides autofocus attribute produce effect letting browser know trying achieve give browser option disable behavior appropriate user focus browser allow user focus document pressing tabto focusable element previous element default element visited order appear document possible use tabindex attribute change order following example document let focus jump text input ok button going help link input text help button ok default type html element focused add tabindex attribute element make focusable tabindex make element focusable affecting focus order disabledfields form field disabled disabled attribute tribute specified fact present element button right button disabled disabled field focused changed browser make look gray faded program process handling action caused button control require communication server good idea disable control action finish way user get impatient click don t accidentally repeat action theformasawhole field contained form element dom element formproperty linking form s dom element form element turn property called element contains collection field inside nameattribute form field determines way value fied form submitted used property accessing form s element property act object accessible number map accessible form input text br password input password password br button submit log script let form form password password form true button typeattribute submitwill pressed cause form submitted pressing enterwhen form field focused submitting form normally mean browser navigates page indicated form s actionattribute using getor postrequest happens submit event fired handle event javascript prevent default behavior calling preventdefault event object form value input text value button submit save script let form form submit event saving value intercepting submit event javascript various us write code verify value user entered make sense immediately error message instead submitting form disable regular way submitting form entirely example program handle input possibly using fetchto send server reloading page textfields field created textarea tag input tag type textor password share common interface dom element erty hold current content string value setting property string change field s content selectionstart selectionend property text field mation cursor selection text selected property hold number indicating position sor example indicates start text indicates cursor field selected property differ giving start end selected text like value property written imagine writing article khasekhemwy pharaoh second dynasty trouble spelling following code wire textarea tag event handler press string khasekhemwy textarea script let textarea textarea keydown event replaceselection textarea khasekhemwy function replaceselection field word let word cursor word replaceselection function replaces currently selected text field s content given word move cursor word user continue typing change event text field doe time typed fire field loses focus content changed respond immediately change text field register handler input event instead fire time user type character deletes text manipulates field s content following example show text field counter displaying current length text field input text length span length script let text input let output length input checkbox field binary toggle value extracted changed checked property hold boolean value label input checkbox purple make page purple script let checkbox purple change mediumpurple label tag associate piece document input field clicking label activate field focus toggle value checkbox radio button radio button similar checkbox s implicitly linked radio button nameattribute active time color label input radio color orange orange label input radio color lightgreen green label input radio color lightblue blue script let button let button button change square bracket cs query given queryselectorall used match attribute selects element nameattribute color select field conceptually similar radio allow user choose set option radio button put layout option control appearance select tag determined browser select field variant akin list checkboxes radio box given multiple attribute select tag allow user select number option just single option regular select field drawn control show inactive option open field multiple enabled show multiple option time allowing user enable disable individually option tag value value defined value attribute given text inside option count value valueproperty select element reflects currently selected option multiple field property doesn t mean value oneof currently selected option option tag select field accessed ject field s option property option property called selected indicates option currently selected erty written select deselect option example extract selected value multiple select field us compose binary number individual bit hold ctrl command mac select multiple option select multiple option option option option span output script let select select let output output change let number let option number number number filefields file field originally designed way upload file user s machine form modern browser provide way read file javascript program field act kind gatekeeper script simply start reading private file user s computer user selects file field browser interprets action mean script read file file field usually look like button labeled like choose file browse information chosen file input file script let input input change let file chose type filesproperty file field element object real array containing file chosen field initially reason isn t simply fileproperty file field support multiple attribute make possible select multiple file time object fileshave property filename size file s size byte chunk bit type medium type file doe property contains content file getting little involved reading file disk time interface asynchronous avoid freezing window input file multiple script let input input change let file let reader new filereader load file start file reading file creating filereader object registering load event handler calling readastext method giving file want read loading finish reader s resultproperty contains file s content filereader s error event reading file fails reason error object end reader s errorproperty interface designed promise language wrap promise like function readfiletext file return new promise resolve reject let reader new filereader load resolve error reject file simple html page bit javascript great format mini application helper program automate basic task ing form field event handler converting centimeter inch computing password master word website application need remember session use javascript thrown away time page closed set server connect internet application store ll chapter s lot extra work complexity s just data browser localstorage object used store data way survives page reloads object allows file string value name username marijn username marijn username value localstorage stick overwritten removed removeitem user clear local data sitesfromdifferentdomainsgetdifferentstoragecompartments thatmeans data stored localstorage given website principle read overwritten script site browser enforce limit size data site store localstorage restriction fact filling people s hard drive junk really profitable prevents feature eating space following code implement crude application keep set named note allows user edit note create new one note select button add br textarea width script let list select let note textarea let state function setstate newstate let let option option true option note newstate state newstate note note shopping list selected shopping list change setstate note selected change let selected state setstate note selected selected button click let prompt note setstate note selected script get starting state note value stored localstorage s missing creates example state shopping list reading field doe exist localstorage yield null passing make parse string null return null operator used provide default value situation like setstate method make sure dom showing given state store new state localstorage event handler function new state syntax example used create new object clone old property added overwritten us spread syntax add property old object set new property square bracket notation object literal used create property based dynamic value thereisanotherobject similarto localstorage called sessionstorage difference content sessionstorage forgotten end session browser mean browser closed chapter discussed http protocol work clientsends request contains method usually path identifies resource serverthen decides request responds status code response body request response contain header provide additional information interface browser javascript make http request called fetch making request look like fetch r text page start browser make getrequests fetch resource needed display web page page contain form allow information entered user sent request new page form submitted html represent various type form field text field box field file picker field inspected manipulated javascript change event changed input event text typed receive keyboard event keyboard focus property like value text select field checked checkboxes radio button used read set field s content form submitted submit event fired javascript handler preventdefault event disable browser s default behavior form field element occur outside form tag user selected file local filesystem file picker field filereader interface used access content file javascript program localstorage sessionstorage object used save tion way survives page reloads object save data forever user decides clear second save browser closed exercise contentnegotiation thing http called content negotiation accept request header used tell server type document client like server ignore header server know various way encode resource look header send client prefers theurl http isconfiguredtorespondwith eitherplaintext html orjson dependingonwhattheclientasksfor format identified standardized medium type send request fetch format resource use header property option object passed fetchto set header named accept desired medium type finally try asking medium type status code produce ajavascriptworkbench build interface allows user type run piece javascript code putabuttonnexttoa textarea fieldthat whenpressed usesthe function constructor saw chapter wrap text function convert return value function error raise string display text field conway s game life simple simulation creates artificial life grid cell alive generation turn following rule applied live cell fewer live neighbor dy live cell live neighbor life ation dead cell exactly live neighbor live cell aneighbor isdefinedasanyadjacentcell includingdiagonallyadjacentones note rule applied grid square time mean counting neighbor based situation start generation change happening neighbor cell generation influence new state given cell implement game using whichever data structure appropriate use populate grid random pattern initially display grid checkbox field button advance generation user check unchecks checkboxes change included computing generation look color look blank canvas try apply color like word shape poem like note shape music miró project apixelarteditor material previous chapter give element need build basic web application chapter just application program allows modify picture pixel pixel manipulating view shown grid colored square use program open image file scribble mouse pointer device save look like painting computer great don t need worry material skill talent just start smearing end component interface application show big canvas element number form field user draw picture selecting tool select field clicking touching dragging canvas tool drawing single pixel rectangle filling area picking color picture wewillstructuretheeditorinterfaceasanumberof component objectsthat responsible piece dom contain component inside state application consists current picture selected tool selected color ll set thing state life value interface component base way look current state important let s consider piece state interface certain point easier program just color field read value need know current color add color tool let click picture select color given pixel color field showing correct color tool know color field exists update pick new color add place make color visible maybe mouse cursor update code synchronized effect creates problem interface need know part modular small application like chapter problem bigger project turn real nightmare avoid nightmare principle going strict data flow state interface drawn based state interface component respond user action updating state point component chance synchronize new state practice component set given new state notifies child component insofar need updated setting bit hassle making convenient main selling point browser programming library small application like infrastructure update state represented object ll action componentsmaycreatesuchactionsand dispatch statemanagementfunction thatfunctioncomputesthenextstate afterwhich interface component update new state taking messy task running user interface applying ture piece effect held conceptually simple backbone state update cycle state determines dom look like way dom event change state dispatching action state manyvariants approach benefit problem central idea state change single channel happen place ourcomponentswillbeclassesconformingtoaninterface theirconstructor given application state smaller value doesn t need access us build dom dom element represents component constructor value won t change time function use dispatch action component syncstate method used synchronize new state value method take argument state type argument constructor thestate application state object picture tool erties picture object store width height pixel content picture pixel stored single array row row class picture constructor width height pixel width height pixel static width height color let pixel new array width height color return new picture width height pixel pixel x y return x y draw pixel let copy let x y color pixel copy x y color return new picture copy want able treat picture immutable value reason ll later chapter need update bunch pixel time able class draw method expects array updated x y color creates new picture pixel overwritten method us slicewithout argument copy entire pixel start slice default end default array s length emptymethod us piece array functionality haven t seen arrayconstructor called number create array given length fillmethod used array given value used create array pixel color color stored string containing traditional cs color code hash sign followed hexadecimal red component green component blue component somewhat cryptic inconvenient way write color format html color input field us used fillstyle property canvas drawing context way ll use color program practical black component zero written bright pink look like red blue component maximum value written ffin hexadecimal digit use ato fto represent digit ll allow interface dispatch action object property overwrite property previous state color field user change dispatch object like color update function compute new state function updatestate state action return state action pattern object spread used add property existing object override common javascript code us immutable object dombuilding main thing interface component create dom structure don t want directly use verbose dom method s slightly expanded version eltfunction function elt type prop child let dom type prop dom prop let child child typeof child string child child dom main difference version used chapter assigns property dom node attribute mean t use set arbitrary attribute canuse set property value isn t string onclick set function register click event handler allows convenient style registering event handler body script elt button onclick click button thecanvas component ll define interface display picture grid colored box component responsible thing showing picture communicating pointer event picture rest application wecandefineitasacomponentthatonlyknowsaboutthecurrent picture application state doesn t know application work directly dispatch action responding pointer event call callback function provided code created handle part const scale class picturecanvas constructor picture pointerdown elt canvas onmousedown event event pointerdown ontouchstart event event pointerdown picture syncstate picture picture return picture scale draw pixel square determined scaleconstant avoid unnecessary work component keep track current picture doe redraw syncstate given new picture actual drawing function set size canvas based scale picture size fill series square pixel function drawpicture picture canvas scale scale scale let cx let y y let x x x y x scale y scale scale scale left mouse button pressed mouse picture va component call pointerdown callback giving position pixel picture coordinate used implement mouse interaction picture callback return callback function notified pointer moved different pixel button held function downevent ondown return let po pointerposition downevent let onmove ondown po onmove return let moveevent mousemove let newpos pointerposition moveevent return po newpos onmove newpos mousemove function pointerposition po domnode let rect return x scale y scale know size pixel use getboundingclientrect position canvas screen possible mouse event coordinate clientx clienty picture coordinate rounded refer specific pixel touch event similar using different event making sure preventdefault touchstart event prevent panning function startevent ondown let po pointerposition let onmove ondown po onmove return let moveevent let newpos pointerposition return po newpos onmove newpos let end touchmove touchend end touchmove touchend end touch event clientx clienty aren t available directly event object use coordinate touch object touch property make possible build application piece piece ll implement main component shell picture canvas dynamic set tool control pas constructor controlsaretheinterfaceelementsthatappearbelowthepicture ll provided array component constructor toolsdo thing like drawing pixel filling area application show set available tool select field currently selected tool determines happens user interacts picture pointer device set available tool provided object map name appear field function implement tool function picture position current application state adispatch function argument return handler function get called new position current state pointer move different pixel class pixeleditor constructor state config let tool control dispatch config state new picturecanvas po let tool tool let onmove tool po dispatch onmove return po onmove po control new control state config elt div elt br c syncstate state state let ctrl state pointer handler given picturecanvas call currently selected tool appropriate argument return handler adapts receive state control constructed stored updated application state change reduceintroduces space control dom element way don t look pressed control tool selection menu creates select element option tool set change event handler update application state user selects different tool class toolselect constructor state tool dispatch elt select onchange dispatch tool tool elt option selected elt label null syncstate state wrapping label text field label element tell browser label belongs field example click label focus field need able change color let s add control html input element typeattribute colorgives form field specialized selecting color field s value cs color code rrggbb format red green blue component digit color browser color picker interface user interacts depending browser color picker look like control creates field wire stay synchronized application state s colorproperty class colorselect constructor state dispatch elt input type color value onchange dispatch color elt label null syncstate state drawingtools draw need implement tool control functionality mouse touch event canvas basic tool draw tool change pixel click tap currently selected color dispatch action update picture version pixel given currently selected color function draw po state dispatch function drawpixel x y state let drawn x y color dispatch picture drawn po state return drawpixel function immediately call drawpixel function return s called newly touched pixel user drag swipe picture draw larger shape useful quickly create rectangle rectangle tool draw rectangle point start dragging point drag function rectangle start state dispatch function drawrectangle po let xstart let ystart let xend let yend let drawn let y ystart y yend let x xstart x xend x y color dispatch picture drawn drawrectangle start return drawrectangle animportantdetailinthisimplementationisthatwhendragging therectangle redrawn picture originalstate way make rectangle larger smaller creating intermediate rectangle sticking final picture reason immutable picture object ll reason later implementing flood somewhat involved tool fill pixel pointer adjacent pixel color adjacent mean directly horizontally vertically adjacent diagonally picture illustrates set pixel colored flood tool used marked pixel way ll look bit like pathfinding code chapter code searched graph route code search grid connected pixel problem keeping track branching set possible route similar const dx dy dx dy dx dy dx dy function x y state dispatch let targetcolor x y let drawn x y color let visited new set let let dx dy let x drawn dx y drawn dy x x y y x y x y targetcolor x y color x y dispatch picture drawn array drawn pixel double function s work list pixel reached adjacent pixel color haven t painted loop counter lag length thedrawnarray new pixel added pixel ahead need explored catch length unexplored pixel remain function final tool color picker allows point color picture use current drawing color function pick po state dispatch dispatch color savingandloading ve drawn masterpiece ll want save later add button downloading current picture image file control provides button class savebutton constructor state elt button onclick save let canvas elt canvas drawpicture canvas let link elt href download link syncstate state component keep track current picture access saving create image file us canvas element draw picture scale pixel pixel todataurl method canvas element creates url us data scheme unlike http http url data url contain resource url usually long allow create working link arbitrary picture right browser actually browser download picture create link element point url download attribute link clicked make browser file save dialog add link document simulate click remove lot browser technology way odd get worse ll want able load existing image file application define button component class loadbutton constructor dispatch elt button onclick startload dispatch syncstate function startload dispatch let input elt input type file onchange finishload dispatch input access file user s computer need user select file file input field don t want load button look like file input field create file input button clicked pretend file input clicked user selected file use filereader access content data url url used create img element t direct access pixel image t create picture object function finishload file dispatch file null return let reader new filereader load let image elt img onload dispatch picture picturefromimage image src file togetaccesstothepixels wemustfirstdrawthepicturetoa canvas element canvas context getimagedata method allows script read pixel picture canvas access construct picture object function picturefromimage image let width let height let canvas elt canvas width height let cx image let pixel let data width height function hex n return let let r g b hex r hex g hex b return new picture width height pixel ll limit size image pixel bigger look hugeon display slow interface dataproperty object returned getimagedata array color component pixel rectangle specified argument itcontainsfourvaluesthatrepresentthered green blue alphacomponents pixel s color number alpha represents pixel fully transparent fully opaque purpose ignore hexadecimal digit component used color notation correspond precisely digit express different number tostring method number given base argument produce string representation base make sure number take digit hexhelper function call padstart add leading necessary load save leaf just feature half process editing making little mistake correcting important feature drawing program undo history able undo change need store previous version ture picture immutable value s easy doe require additional field application state ll add donearray previous version picture maintaining property requires complicated state update function add picture array wedon t want store everychange change certain time apart able ll need second property doneat track time stored picture history function historyupdatestate state action true return state return state picture doneat return state action doneat return state action action undo action function take recent picture history make current picture set doneatto zero change guaranteed store picture history allowing revert time want action contains new picture time stored second millisecond ago doneand doneat property updated store previous picture undo button component doesn t dispatch undo action clicked disables undo class undobutton constructor state dispatch elt button onclick dispatch undo true disabled syncstate state set application need create state set tool set control dispatch function pas pixeleditor constructor create main component ll need create editor exercise define binding const startstate tool draw color picture doneat const basetools draw rectangle pick const basecontrols toolselect colorselect savebutton loadbutton undobutton function startpixeleditor state startstate tool basetools control basecontrols let app new pixeleditor state tool control dispatch action state historyupdatestate state action state return destructuring object array use binding binding default value used property missing hold undefined startpixeleditor function make use accept object number optional property argument don t provide toolsproperty example toolswill bound basetools actual editor screen div script div startpixeleditor whyisthissohard browser technology amazing provides powerful set interface building block way style manipulate tool inspect debug application thesoftwareyouwriteforthebrowsercanberunonalmostevery computer phone planet time browser technology ridiculous learn large number silly trick obscure fact master default programmingmodelitprovidesissoproblematicthatmostprogrammersprefer cover layer abstraction deal directly situation definitely improving doe form element added address complexity feature used million website t really replaced hard decide replaced technology exists constrained tool social economic historical factor produced annoying generally productive try build good standing existingtechnical reality way rage hold reality new abstraction canbe helpful component model data flow vention used chapter crude form mentioned library try make user interface programming pleasant time writing reactandsvelteare popular choice s cottage industry framework interested programming web application recommend investigating understand work benefit provide exercise room improvement program let s add feature exercise keyboardbindings add keyboard shortcut application letter tool s selects tool command activates undo modifying pixeleditor component add tabindex property wrapping div element receive keyboard focus note property corresponding tabindex attribute called tabindex capital eltfunction expects property name register key event handler directly element mean click touch tab application interact keyboard remember keyboard event ctrlkey metakey command mac property use key held efficientdrawing drawing majority work application doe happens drawpicture creating new state updating rest dom isn t expensive repainting pixel canvas quite bit work way make syncstate method picturecanvas faster drawing pixel actually changed remember drawpicture used save button change make sure change don t break old use create new version different note changing size canvas element setting width orheightproperties clear making entirely transparent define tool called circlethat draw filled circle drag center circle lie point drag touch gesture start radius determined distance dragged properlines advanced exercise preceding require design solution nontrivial problem make sure plenty time patience starting work exercise don t discouraged initial failure browser select drawtool quickly drag picture don t closed line dot gap tween mousemove touchmove event did quickly hit pixel improve drawtool make draw line mean make motion handler function remember previous position connect current pixel arbitrary distance apart ll write general line drawing function line pixel connected chain pixel straight sible going start end diagonally adjacent pixel count connected slanted line look like picture left picture right finally code draw line arbitrary point use define linetool draw straight line start end drag student asked programmer old used simple machine programming language beautiful program use complicated machine programming language f zu replied builder old used stick clay beautiful hut book programming sofar veusedthejavascriptlanguageinasingleenvironment thebrowser chapter briefly introduce program allows apply javascript skill outside browser build small command line tool http server power dynamic website chapter aim teach main concept us information write useful program try complete thorough treatment platform want follow run code chapter ll need install version higher http follow installation instruction operating documentation background building system communicate network way age input reading writing data network hard make big difference quickly responds user network request program asynchronous programming helpful allows program send receive data multiple device time complicated thread management synchronization node initially conceived purpose making asynchronous gramming easy convenient javascript lends like node programming language doe way input output javascript fit node s eccentric approach network filesystem programming ending inconsistent interface node designed people doing programming browser community language used asynchronous programming thenodecommand installed provides program called node used run javascript file say file containing code let message hello world message run nodefrom command line like execute program node hello world method node doe similar doe browser print piece text node text process s standard output stream browser s javascript console running nodefrom command line mean logged value terminal run nodewithout giving file provides prompt type javascript code immediately result node process binding just like console binding available globally node provides various way inspect manipulate current program exitmethod end process given exit status code tell program started node case command line shell program completed successfully code zero encountered error code command line argument given script read array string note includes nodecommand script actual argument start index contains statement run like node node standard javascript global binding array math json present node s environment functionality document orprompt module binding mentioned console process node put additional binding global scope want access functionality ask module node started using commonjs module based require function saw chapter use default load today node support modern e module script s filename end considered module use importand exportin require use e module chapter importing require resolve given string actual file load name start resolved file relative current module s path current directory directory root filesystem ask file node try load file string doe look like relative absolute path imported assumed refer module module installed directory example importing node f node s filesystem module importing robot try load library s common install library using npm ll return moment let s set small project consisting file called main defines script called command line reverse string import reverse index hold actual command line argument let argument reverse argument file defines library reversing string used command line tool script need direct access function export function reverse string return string remember exportis used declare binding module s interface allows import use function tool like node javascript tpircsavaj installingwithnpm npm introduced chapter online repository javascript module specifically written node install node computer npmcommand use interact repository npm s main use downloading package saw inipackage ter use npm fetch install package computer npm install ini added package node const parse require ini parse x x y afterrunning npm install npmwillhavecreatedadirectorycalled inside directory inidirectory contains library open look code import ini library loaded parseproperty parse configuration file default npm installs package current directory central place used package manager unusual put application control package installs make easier manage version clean removing application running npm install install package directory file called current rectory recommended file project create manually run npm init file contains information project version list dependency robot simulation chapter modularized exercise chapter file like author marijn haverbeke description simulation robot version main dependency dijkstrajs license isc run npm install naming package install npm install dependency listed install specific package listed dependency npm add package version file list program s version version dependency version way deal fact package evolve separately code written work package existed point work later modified version package npm demand package follow schema called semantic versioning encodes information version compatible don t break old interface version number semantic version consists number separated period time new tionality added middle number incremented time compatibility broken existing code us package work new version number incremented caret character version number dependency indicates version compatible given number installed example mean version greater equal allowed npmcommand used publish new package new version package run npm publish directory file publish package version listed json file registry publish package package isn t use wouldn t good random people update existing package book won t delve detail npm usage refer http documentation way search package thefilesystemmodule commonly used module node node ule stand filesystem export function working file directory example function called readfile read file call file s content import readfile node f readfile error text error throw error file contains text second argument readfile indicates character encoding used decode file string way text encoded binary data modern system use unless reason believe encoding used pas reading text file pas encoding node assume interested binary data bufferobject instead string object contains number representing byte chunk data file import readfile node f readfile error buffer error throw error file contained byte byte buffer similar function writefile used write file disk writefile node f writefile node err err failed write file err file written necessary specify writefile assume given string write bufferobject write text using default character encoding node fsmodule contains useful function readdirwill file directory array string statwill retrieve information file renamewill rename file unlinkwill remove documentation http specific callback function parameter eitherwithanerror thefirstargument orwithasuccessfulresult thesecond aswesawin biggest error handling verbose error prone node module export function old node f module us promise callback function import readfile node readfile text file contains text don t need asynchronicity just get way function node f synchronous variant syncadded end example synchronous version readfile called readfilesync import readfilesync node f file contains readfilesync notethatwhilesuchasynchronousoperationisbeingperformed yourprogram stopped entirely responding user machine network stuck synchronous action produce annoying delay thehttpmodule central module called node http provides functionality ning http server take start http server createserver node http let server createserver request response hello p asked code listening port run script machine point web browser http lo make request server respond small html page function passed argument createserver called time client connects server request response binding object representing incoming outgoing data contains information request urlproperty tell url request open page browser sends request computer cause server function run send response browser send client method response object writehead write response header chapter status code ok case object contains header value example set header inform client ll sending html document actual response body document sent response allowed method multiple time want send response piece example stream data client available finally signal end response cause server start waiting connection port connect speak server just localhost use default port run script process just sits wait script listening case network nodewill automatically exit reach end script close press real web server usually doe look request s method methodproperty action client trying perform look request s url resource action performed ll advanced server later chapter node http module provides request function used make http request lot cumbersome use fetch saw chapter fortunately fetchis available node global binding unless want specific processing response document piece piece data come network recommend sticking fetch stream response object http server write example writable stream object widely used concept node object writemethod passed string bufferobject write stream endmethod close stream optionally take value write stream closing method given callback additional argument writing closing finished possible create writable stream point file createwritestream function node f module use writemethod resulting object write file piece time shot writefile readable stream little involved request argument http server s callback readable stream reading stream using event handler method object emit event node method called onthat similar theaddeventlistener method browser event function register function called given event occurs readable stream data end event fired time data come second called stream end model suited streaming data immediately processed document isn t available file read readable stream using createreadstream function node f code creates server read request body stream client text import createserver node http createserver request response data chunk end chunkvalue passed data handler binary buffer convert string decoding encoded character tostring method following piece code run uppercasing server active send request server write response get fetch http method post body hello server resp hello server afileserver let s combine newfound knowledge http server working filesystem create bridge http server allows remote access filesystem server kind allows web application store share data group people shared access bunch file treat file http resource http method deletecan used read write delete file respectively interpret path request path file request refers weprobablydon twanttoshareourwholefilesystem sowe llinterpretthese path starting server s working directory directory started ran server orc window request refer txt orc ll build program piece piece using object called method store function handle various http method method handler areasyncfunctions request object argument return promise resolve object describes response import createserver node http const method null request response let handler method notallowed handler request error null return error return body string error status body status type status type body response body async function notallowed request return status body method start server just return error response code used indicate server refuse handle given method request handler s promise rejected catchcall translates error response object isn t server send error response inform client failed handle request statusfield response description omitted case default ok content type typeproperty left case response assumed plain text value bodyis readable stream pipemethod use forward content readable stream writable stream assumed null body string buffer passed directly response s endmethod figure file path corresponds request url urlpath function us urlclass exists browser parse url constructor expects url just starting slash dummy domain extract pathname like decodes rid escape code resolve relative program s working directory import resolve sep node path const basedirectory urlpath url let pathname new url url http let path resolve decodeuricomponent pathname path basedirectory basedirectory sep throw status body forbidden return path soon set program accept network request start worrying security case aren t careful likely ll accidentally expose filesystem network file path string node map string actual file s anontrivialamountofinterpretationgoingon pathsmay forexample include refer parent directory obvious source problem request path like avoid problem urlpath us resolve function node pathmodule resolve relative path verifies result belowthe working directory function cwdstands current working directory used working directory sepbinding node path package s path backslash window forward slash system pathdoesn tstartwiththebasedirectory thefunctionthrowsanerrorresponse object using http status code indicating access resource forbidden ll set getmethod return list file reading directory return file s content reading regular file tricky question kind header set returning file s content file server t simply return content type npm help package content type indicator like called mime type know correct type large number file extension following npmcommand directory server script life installs specific version mime npm install requested file doe exist correct http status code return ll use statfunction look information file file exists directory createreadstream node f import stat readdir node import lookup async function request let path urlpath let stats try stats await stat path catch error enoent throw error return status body file return body await readdir path return body createreadstream path type lookup path touch disk statis chronous using promise callback style imported node instead directly node f file doe exist statwill throw error object code property enoent somewhat obscure code recognize error type node statsobject returned stattells number thing file size sizeproperty modification date mtimeproperty interested question directory regular file isdirectory method tell use readdir read array file directory return client normal file create readable stream createreadstream return body content type mimepackage give file s code handle deleterequests slightly simpler import rmdir unlink node async function request let path urlpath let stats try stats await stat path catch error enoent throw error return status await rmdir path await unlink path return status http response doe contain data status code content used indicate response deletion doesn t need transmit information operation succeeded sensible thing return wondering trying delete nonexistent file return success status code error file deleted say request s objective fulfilled http standard encourages make request idempotent mean making request multiple time produce result making way try delete s gone effect trying create thing longer handler putrequests import createwritestream node f function pipestream return new promise resolve reject error reject error reject finish resolve async function request let path urlpath await pipestream request createwritestream path return status don t need check file exists doe ll just overwrite use pipeto data readable stream writable case request file pipeisn t written return promise write wrapper pipestream creates promise outcome calling pipe go wrong opening file createwritestream return stream stream error event stream request example network go wire stream error event reject promise pipeis close output stream cause finish event s point successfully resolve promise returning script server available http download installing dencies run node start file server course modify extend solve chapter s exercise experiment command line tool curl widely available system macos linux used make http request following session briefly test server used set request s method used include request body curl http file curl content http curl http content curl delete http curl http file request fails file doe exist request creates file behold request successfully retrieves deleting deleterequest file missing summary nodeisanice smallsystemthatletsusrunjavascriptinanonbrowsercontext originally designed network task play role node network lends kind scripting task writing javascript enjoy automating task node work npm provides package think quite thing d probably think allows fetch install package npmprogram node come number module including node fsmodule working filesystem node http module running http server input output node asynchronously unless explicitly synchronous variant function readfilesync node nally used callback asynchronous functionality node package provides interface filesystem exercise searchtool unix system command line tool called grepthat used quickly search file regular expression write node script run command line act whatlike grep ittreatsitsfirstcommandlineargumentasaregularexpression treat argument file search output name file content match regular expression work extend argument directory search file directory subdirectory use asynchronous synchronous filesystem function fit setting thing multiple asynchronous action requested time speed thing little huge filesystems read thing time directorycreation deletemethod file server able delete directory using rmdir server currently doe provide way createa directory add support mkcolmethod make collection create directory calling mkdirfrom node f module mkcolis widely used http method doe exist purpose w ebda v standard specifies set convention http make suitable creating document apublicspaceontheweb sincethefileserverservesupanykindoffileandevenincludestheright content use serve website given server allows everybody delete replace file make interesting kind website modified improved vandalized everybody take time make right http request write basic html page includes simple javascript file file directory served file server open browser advanced exercise weekend project combine knowledge gained book build interface modifying insidethe website use html form edit content file make website allowing user update server using http request described chapter start making single file editable make user select file edit use fact file server return list file reading directory don t work directly code exposed file server make mistake likely damage file instead work outside publicly accessible directory copy testing knowledge let light candle fuller project skil meeting event people shared come small informal presentation thing know gardening meeting explain cultivate celery programming group drop tell people final project chapter goal set website managing talk given meeting imagine small group people meeting regularly oﬀice member talk unicycling previous organizer meeting moved town stepped forward task want let participant propose discus talk active organizer thefullcodefortheprojectcanbedownloadedfrom http design serverpart project written clientpart written browser server store s data provides client serf file implement server keep list talk proposed meeting client show list talk presenter title summary array comment associated client allowsusers propose new talk adding list delete talk comment existing talk user make change client make http request tell server application set liveview current proposed talk comment submits new talk add comment people page open browser immediately change pose bit way web server open connection client good way know client currently looking given website common solution problem called long pol ling happens motivation node s design longpolling able immediately notify client changed need connection client web browser traditionally accept nections client router block connection having server initiate connection practical arrange client open connection server use send information need http request allows simple flow information client sends request server come single response s nology called w ebsockets make possible open connection arbitrary data exchange using socket properly somewhat tricky chapter use simpler technique long polling client tinuously ask server new information using regular http request server stall answer new report long client make sure constantly polling request open receive information server quickly available example fatma application open browser browser request update waiting response request iman submits talk extreme downhill unicycling server notice fatma waiting update send response containing new talk pending request fatma s browser receive data update screen talk prevent connection timing aborted lack activity long polling technique usually set maximum time request server respond report client start new request periodically restarting request make technique robust allowing client recover temporary connection failure server problem busy server using long polling thousand waiting request tcp connection open node make easy manage connection creating separate thread control good fit httpinterface start designing server client let s think point touch http interface communicate use json format request response body like file server chapter ll try make good use http method header interface centered path start used serving static html javascript code agetrequest json document like title unituning presenter jamal summary modifying cycle extra style comment creating new talk making putrequest url like unituning second slash title talk s body contain json object presenter summary property sincetalktitlesmaycontainspacesandothercharactersthatmaynotappear normally url title string encoded encodeuricomponent function building url encodeuricomponent idle request create talk idling look like presenter maureen summary standing unicycle url support getrequests retrieve json representation talk deleterequests delete talk adding comment talk postrequest url like json body authorand message property post author iman message talk raising cycle support long polling getrequests include extra header inform server delay response new information available ll use pair header normally intended manage caching etagand server include etag entity tag header response value string identifies current version resource client later request resource make conditional request including header value hold string resource hasn t changed server respond status code mean modified telling client cached version current tag doe match server responds normal weneedsomethinglikethis wheretheclientcantelltheserverwhichversion list talk server responds list instead immediately returning response server stall response return new available given time elapsed distinguish long polling request normal conditional request header prefer tell server client willing wait second response server version number update time talk change use etagvalue client make request like notified talk change prefer time pass ok etag protocol described doesn t access control everybody comment modify talk delete internet hooligan putting online protection probably wouldn t end theserver let s start building program code section run routing server use node s createserver start http server function handle new request distinguish various kind request determined method path support long chain ifstatements s nicer way routeris component help dispatch request function handle tell router example putrequests path match regular expression talk title handled given function addition help extract meaningful part path case talk title wrapped parenthesis regular expression pas handler function number good router package npm ll write illustrate principle later importfrom server module export class router constructor add method url handler method url handler async resolve request context let pathname new url http let method url handler let match pathname match method continue let part decodeuricomponent return handler context part request module export routerclass router object allows register handler specific method url pattern addmethod request resolved resolvemethod router call handler method url match request return result handler function called context value given resolve use access server state additionally receive match string group defined regular expression request object string raw url contain code servingfiles request match request type defined router server interpret request file publicdirectory possible use file server defined chapter serve file need want support putand deleterequests file like advanced feature support caching let s use static file server npm instead opted isn t server npm work fit purpose package export function called root directory produce request handler function handler function accepts requestand response argument provided server node http argument function file match request want server check request handle specially defined router wrap function import createserver node http import servestatic function notfound request response class skillshareserver constructor talk talk let fileserver servestatic createserver request response servefromrouter request response fileserver request response notfound request response start port port stop servefromrouter function interface fileserver taking request response argument use chain quest handler allowing handle request pas responsibility handler final handler notfound simply responds error servefromrouter function us similar convention file server fromthe previouschapter resolve object describing response import router const router new router const defaultheaders async function servefromrouter server request response let resolved await request server error null return error return body string err status resolved return let body status header defaultheaders await resolved status header body talksasresources talk proposed stored talksproperty server object property name talk title ll add handler router expose http resource title handler request geta single talk look talk respond talk s json data error response const talkpath talkpath async server title title return body title header return status body talk title talk removing talksobject delete talkpath async server title title delete title return status updated method define later notifies waiting long polling request change handler need read request body puthandler used create new talk check data given presenter summary property string data coming outside nonsense don t want corrupt internal data model crash bad request come data look valid handler store object represents new talk talksobject possibly overwriting existing talk title call updated read body request stream use jsonfunction node collect data stream parses json similar export called text read content string buffer read binary data package json generic import renames readjson avoid confusion import json readjson node talkpath async server title request let talk await readjson request talk typeof string typeof string return status body bad talk data title title presenter summary comment return status adding comment talk work similarly use readjson content request validate resulting data store comment look valid post async server title request let comment await readjson request comment typeof string typeof string return status body bad comment data title title comment return status return status body talk title trying add comment nonexistent talk return error longpollingsupport interesting aspect server handle long polling getrequest come regular request long polling request multiple place send array talk client define helper method build array includes etagheader response function let talk title title return body talk header etag handler need look request header preferheaders present node store header name specified case insensitive lowercase name async server request let tag let wait prefer tag tag return wait return status return number wait tag given tag given doesn t match server s current version handler responds list talk request conditional talk did change consult preferheader delay response respond right away callback function delayed request stored server s ray notified happens waitforchanges method immediately set timer respond status request waited long function time return new promise resolve resolve settimeout resolve return r r resolve resolve status time registering change updated increase version property wake waiting request function let response resolve resolve response concludes server code create instance skillshareserver theresultinghttpserverservesfilesfromthe public subdirectory alongside interface new skillshareserver theclient website consists file tiny html page style sheet javascript file html widely used convention web server try serve file named index request directly path corresponds directory file server module use support convention request path server look file root gave return file want page browser pointed server index file doctype html meta title skill sharing link stylesheet skill sharing script defines document title includes style sheet defines style thing make sure space talk add heading page load script contains application action application state consists list talk user ll store talk user object don t allow user interface directly manipulate state send http request emit actionsthat user trying handleaction function take action make happen cause state update simple state change handled function handleaction state action setuser username return state user settalks return state talk newtalk fetchok talkurl method header body presenter summary reporterror deletetalk fetchok talkurl method delete reporterror newcomment fetchok talkurl method post header body author message reporterror return state ll store user s localstorage restored page loaded action need involve server make network request using fetch http interface described earlier use wrapper function fetchok make sure returned promise rejected server return error code function fetchok url option return fetch url option response return response throw new error helper function used build url talk given title function talkurl title return encodeuricomponent title request fails don t want page just sit doing explanation function called reporterror used catchhandler show user crude dialog tell went wrong function reporterror error alert string error renderingcomponents ll use approach similar saw chapter splitting application component component need update fully redrawn updated ll define class function directly return dom node example component show field user enter function renderuserfield dispatch return elt label elt input type text value onchange event dispatch type setuser user eltfunctionusedtoconstructdomelementsistheoneweusedin chapter similar function used render talk include list comment form adding new comment function rendertalk talk dispatch return elt section classname talk elt null elt button type button dispatch type deletetalk talk delete elt div null elt strong null elt p null rendercomment elt form onsubmit event let form dispatch type newcomment talk message elt input type text comment elt button type submit add comment submit event handler call clear form s content creating newcomment action creating moderately complex piece dom style ming start look messy avoid people use templating language allows write interface html file special marker indicate dynamic element use jsx nonstandard javascript dialect allows write close html tag program javascript expression approach use additional tool preprocess code run avoid chapter comment simple render function rendercomment comment return elt p classname comment elt strong null finally form user use create new talk rendered like function rendertalkform dispatch let title elt input type text let summary elt input type text elt form onsubmit event dispatch type newtalk title summary elt null submit talk elt label null title title elt label null summary summary elt button type submit submit polling tostarttheapp weneedthecurrentlistoftalks sincetheinitialloadisclosely related long polling etagfrom load used ll write function keep polling server call callback function new set talk available async function polltalks update let tag undefined let response try response await fetchok header tag tag prefer catch e request failed e await new promise resolve settimeout resolve continue continue tag etag update await asyncfunction looping waiting request easier run infinite loop iteration retrieves list normally isn t request header included make long polling request request fails function wait moment try way network connection go away come application recover continue updating promise resolved settimeout way force asyncfunction wait server give response mean long polling request timed function just immediately start request response normal response body read json passed callback etagheader value stored iteration theapplication following component tie user interface class skillshareapp constructor state dispatch dispatch elt div classname talk elt div null renderuserfield dispatch rendertalkform dispatch state syncstate state let talk rendertalk talk talk change component redraws simple wasteful ll exercise start application like function runapp let user username anon let state app function dispatch action handleaction state action state polltalks talk app state user talk app new skillshareapp state dispatch dispatch type settalks talk reporterror runapp run server open browser window http action perform window immediately visible exercise following exercise involve modifying defined ter toworkonthem makesureyou vedownloadedthecode http installed node http installed project s dependency npm install diskpersistence thismeansthatwhen crash restarted reason talk comment lost extend server store talk data disk automatically reloads data restarted don t worry simplest thing work commentfieldresets wholesale redrawing talk work pretty usually t tell difference dom node identical replacement exception start typing comment field talk browser window add comment talk field window redrawn removing content focus multiple people adding comment time annoying come way solve hint help stuck exercise book don t away entire solution try help programstructure loopingatriangle start program print number derive making modification number printing example given earlier chapter forloop introduced consider equivalence number string hash ters adding adding character solution closely follow program fizzbuzz going number clearly looping job selecting print matter conditional execution remember trick using remainder operator checking number divisible number remainder zero version possible outcome number ll create thesecondversionoftheprogramhasastraightforwardsolutionandaclever simple solution add conditional branch precisely test given condition clever solution build string containing word word output print word number word potentially making good use build string starting repeatedly adding character newline character written work dimension need loop inside loop brace body loop make easy start end try properly indent body order loop follow order build string line line left right outer loop handle line inner loop handle character line ll need binding track progress know space hash sign given position test sum counter terminating line adding newline character happen line built inner loop inside outer loop function minimum trouble putting brace parenthesis right place valid function definition start copying example chapter modifying function contain multiple returnstatements recursion yourfunctionwilllikelylooksomewhatsimilartotheinner findfunctioninthe recursive findsolution example inthischapter withan test case applies final corresponding case make recursive branch contain areturnstatement way arrange specific value returned given negative number function recurse passing negative number getting away returning result eventually run stack space abort function need loop look character string run index zero length character current position function looking add counter variable loop finished counter returned care make binding used function localto function properly declaring letorconstkeyword datastructures objectsandarrays thesumofarange building array easily initializing binding fresh array repeatedly calling pushmethod add value don t forget return array end function end boundary inclusive ll need use check end loop step parameter optional parameter default using operator having rangeunderstand negative step value probably best ing separate counting counting comparison check loop finished need counting downward worthwhile use different default step end range smaller start way range return somethingmeaningfulratherthangettingstuckinaninfiniteloop itispossible refer previous parameter default value parameter reversinganarray obvious way implement reversearray ply input array use unshift method new array insert element start second loop input array backward use pushmethod iterating array backward requires somewhat awkward forspecification like let reversingthearrayinplaceisharder youhavetobecarefulnottooverwrite element later need using reversearray copying array good way copy array work cheating trick swapthe element second looping half length array use round don t need touch middle element array odd number element swapping element position iwith position use local binding briefly hold element overwrite mirror image value local binding place mirror image used alist building list easier arraytolist ate array backward previous exercise element add object list use local binding hold list built far use assignment like list value x rest list add element run list listtoarray nth aforloop specification like used let node list node node work iteration loop nodepoints current sublist body read valueproperty current element end iteration nodemoves sublist isnull reached end list loop finished recursive version nthwill similarly look smaller tail list time count index reach zero point return valueproperty node looking zeroth element list simply valueproperty head node element nth element list s list s restproperty deepcomparison test dealing real object look like typeof x object x null careful compare property botharguments object case just immediately return result applying property need test object set property name property identical value way ensure object number property length property list looping object s property compare make sure actually property number property property exist set property name returning correct value function best immediately returning falsewhen mismatch returning trueat end function like operator everymethod stop evaluating element soon doesn t match version jump soon run element predicate function return false loop run end finding element know element matched return true build everyon apply morgan s law state bequals b generalized array element array match element array doe match dominantwritingdirection solution look lot like half textscripts example count character criterion based characterscript filter result refers uninteresting character finding direction highest character count reduce s clear refer example earlier chapter reducewas used script character avectortype look rabbitclass example unsure classdeclarations look adding getter property constructor putting word getbefore method tocompute distance x y use pythagorean theorem say square distance looking equal square plus square number want way compute square root javascript x used square number group easiest way store array group member instance property includes orindexof method used check given value array class s constructor set member collection array addis called check given value array add possibly using push deleting element array delete straightforward use filterto create new array value don t forget overwrite property holding member newly filtered version array frommethod use value iterable object addto newly created group iterablegroups probably worthwhile define new class groupiterator iterator stance property track current position group time nextis called check move past current value return groupclass get method named called return new instance iterator class group arobot measuringarobot ll write variant runrobot function instead ging event console return number step robot took complete task measurement function loop generate new state count step robot take generated surements use output average robot total number step taken divided number measurement robotefficiency main limitation goalorientedrobot considers parcel time walk forth village parcel happens looking happens map closer possible solution compute route package shortest better result obtained multiple shortest route preferring one pick package instead delivering package persistentgroup convenient way represent set member value array array easy copy value added group create new group copy original array value added example using concat value deleted filter array class s constructor array argument store instance s property array updated add emptyproperty constructor declare static property need emptyinstance group instance class don t change create different group single group affecting retry primitivemultiply definitely happen tryblock corresponding catchblock rethrow exception instance multiplicatorunitfailure ensure retried retrying use loop stop lookexample earlier use recursion hope don t string failure long overflow stack pretty safe bet thelockedbox exercise call finally block function unlock box argument function inside trybody finally block lock box make sure don t lock box wasn t locked check lock start function unlock lock started locked regularexpressions quotingstyle obvious solution replace quote nonletter character like l l start end line account addition ensure replacement includes ters matched l pattern dropped wrapping parenthesis including group replacement string group matched placed numbersagain forget backslash period matching optional sign number exponent plus minus complicated exercise problem matching matching good solution use separate digit optionally followed dot zero digit os dot followed digit finally make ecase insensitive add ioption regular expression use ee module amodularrobot s single rightway design given module code used build road graph life module d use dijkstrajs npm pathfinding code ll make build kind graph data dijkstrajs expects module export single function buildgraph d buildgraph accept array array string containing hyphen make module dependent input format module contains raw road data roadsarray roadgraph binding module depends export road graph villagestate class life module depends module need able verify given road exists need randompick function just module internal helper function randomrobot need d duplicate module function happens exist npm package reasonable solution just make module depend add therunrobot function module s small closely related state management module export villagestate class therunrobot function finally robot value depend mailroute module depends export robot function make possible goalorientedrobot module depends dijkstrajs offloading work npm module code little smaller individual module doe simple read dividing code module suggests improvement program s design case little odd villagestate robot depend specific road graph better idea graph argument state s constructor make robot read state reduces dependency good make possible run simulation different map better good idea use npm module thing written principle nontrivial thing like pathfinding function likely make mistake waste time writing tiny function like writing easy adding need doe tend clutter module underestimate work involved findingan appropriate npm package work missing feature need depending npm packagesmeansyouhavetomakesuretheyareinstalled youhavetodistribute program periodically upgrade decide way depending given package actually help roadsmodule e module use importto access graph module described exporting buildgraph function pick interface object destructuring constdeclaration export roadgraph keyword exportbefore definition cause buildgraph take data structure doesn t precisely match road splitting road string happen module circulardependencies trick require add interface object module cache beforeit start loading module way require running try load known current interface returned starting load module eventually overflow stack asynchronousprogramming quiettimes need convert content file array easiest way use splitmethod string produced textfile logfiles array string convert number passing new date summarizing time point table hour creating table array hold number hour day loop timestamps logfiles number logfile happened correct day hour occurred add corresponding number table makesureyouuse awaitontheresult ofasynchronousfunctionsbefore doing ll end promisewhere expected string realpromises straightforward approach writing function use chain thencalls promise produced reading list logfiles callback split list map textfile array promise pas return object returned return result return value promise return array logfiles logic like function activitytable day return textfile file return textfile log analyze better work scheduling analysis file inside work started file come disk file come function activitytable day let table init return textfile file return return textfile log analyze table show way structure promise real effect way work scheduled simple loop awaitin make process completely wait file load proceeding make possible multiple task conceptually worked time allowing make progress file loaded faster make order thing happen predictable case going incrementing number table isn t hard safe way kind problem lot diﬀicult file list doesn t exist promise returned textfile rejected reject promise given fail return value callback given thenwill rejected promise make promise returned thenfail callback given second thenisn t called rejected promise returned function function passed promise constructor thenon promise given array succeeds thing need happen resulting value need stored correct position result array check pending promise finish promise counter initialized length input array subtract time promise succeeds reach make sure account situation input array promise resolve handling failure requires thought turn extremely simple just pas rejectfunction wrapping promise promise array catchhandler second argument thenso failure trigger rejection wrapper promise project aprogramminglanguage array easiest way represent egg array javascript array value added scope function using rest ment notation definition arraycan verysimple riding javascript mechanism equivalent feature egg special form passed local scope evaluated evaluate subforms scope function returnedby funhasaccesstothe scopeargumentgiventoitsenclosingfunction us create function s local scope called mean prototype local scope scope function created make possible access binding scope function implementing closure compile way actually eﬀicient d need work comment make sure solution handle multiple comment row whitespace potentially regular expression probably easiest way solve write thing match whitespace comment zero time use execormatchmethod look length element returned array match character slice fixingscope youwillhavetoloopthroughonescopeatatime using outer scope scope use binding indicated nameproperty argument set exists scope doe set result evaluating second argument setand return value outermost scope reached return null haven t binding doesn t exist error thrown thedocumentobjectmodel buildatable use create new element node document createtextnode tocreatetextnodes andthe appendchild methodtoputnodes node ll want loop key name row object array construct data row array key name object useful toaddthetabletothecorrectparentnode youcanuse mountain node elementsbytagname solution easily expressed recursive function similar talksabout function defined earlier chapter bytagname recursively concatenating resulting array produce output create inner function call recursivelyandthathasaccesstoanarraybindingdefinedintheouterfunction add matching element find don t forget inner function outer function start process recursive function check node type interested node type node loop child child child match query doing recursive inspect child measure angle radian circle given angle opposite angle adding half useful putting hat opposite orbit handlingevents balloon ll want register handler keydown event look figure arrow key pressed currentsize keptin binding youcan base new size ll helpful define function update binding style balloon event handler possibly starting set initial size change balloon explosion replacing text node using replacechild setting textcontent property parent node new string creating element best loop append document tomakethemshowup tobeabletoaccessthemlatertochangetheirposition ll want store element array cycling keeping counter variable adding time mousemove event fire remainder operator used valid array index pick element want position given event interesting effect achieved modeling simple physic use mousemove event update pair binding track mouse position use requestanimationframe simulate trailing element attracted position mouse pointer animation step update position based position relative pointer optionally speed stored element figuring good way tab onepitfallyoumightrunintoisthatyoucan tdirectlyusethenode s childnodes propertyasacollectionoftabnodes foronething whenyouaddthebuttons child node end object live data structure text node created whitespace node childnodes tab usechildren instead childnodes ignore text node start building array tab easy access implement styling button store object contain tab panel button recommend writing separate function changing tab store previously selected tab change style needed hide new just update style tab time new tab selected want function immediately make interface start tab visible project aplatformgame pausingthegame animation interrupted returning falsefrom function given torunanimation continued calling runanimation need communicate fact pausing game function given runanimation use binding event handler function access finding way unregister handler registered trackkeys memberthatthe exactsamefunctionvaluethatwaspassedto addeventlistener passed removeeventlistener successfully remove handler handlerfunction value created trackkeys available code unregisters handler add property object returned trackkeys containing function value method handle unregistering directly amonster want implement type motion stateful bouncing make sure store necessary state actor constructor argument add property remember updatereturns newobject changing old handling collision player compare position monster s position bottomof player add vertical size vertical position creation updated state resemble coin scollidemethod removing actor lava s changing status lost depending player position drawingoncanvas shape trapezoid easiest draw using path pick suitable center nates add corner center diamond drawn straightforward way path interesting way rotatetransformation use rotation apply trick similar did fliphorizontally function youwanttorotatearoundthecenterofyourrectangleandnotaroundthepoint translate rotate translate make sure reset transformation drawing shape creates zigzag impractical write new linetofor line segment instead use loop iteration draw line segment right left case use evenness loop index determine left right ll need loop spiral draw series point point moving farther circle spiral s center circle loop vary radius circle putting current point result spiral star depicted built quadraticcurveto line draw straight line divide circle piece star point piece want draw line tween point making curve center star quadraticcurveto use center control point thepiechart youwillneedtocall filltext andsetthecontext s textalign andtextbaseline property way text end want sensible way position label text line going center pie middle slice don t want text directly pie text pie given number pixel angle line currentangle sliceangle following code find position line pixel center let middleangle currentangle sliceangle let textx middleangle centerx let texty middleangle centery fortextbaseline value middle probably appropriate using approach use textalign depends circle left right right left text positioned away pie sure circle given angle look explanation inchapter cosine angle tell corresponds turn tell exactly circle abouncingball box easy draw strokerect define binding hold size define binding box s width height differ create round ball start path arc x y radius whichcreates arc going zero circle path model ball s position speed use vecclass giveitastartingspeed preferablyonethatisnotpurelyverticalor horizontal frame multiply speed time elapsed ball get close vertical wall invert xcomponent speed likewise invert ycomponent hit horizontal wall finding ball s new position speed use clearrect delete scene redraw using new position precomputedmirroring key solution fact use canvas element source imagewhenusing drawimage itispossibletocreateanextra canvas element adding document draw inverted sprite drawing actual frame just copy inverted sprite main canvas care required image load instantly inverted drawing image load won t draw load handler image used draw inverted image extra canvas canvas used drawing source immediately ll simply blank draw character httpandforms contentnegotiation base code fetchexamples earlier chapter asking bogus medium type return response code acceptable code server return t fulfill acceptheader ajavascriptworkbench use access element defined html event handler click mousedown event button valueproperty text field function make sure wrap function result tryblock catch exception produce case really don t know type exception looking catch textcontent property output element used string message want old content create new text node using append element remember add newline character end output appears single line solve problem having change conceptually happen time try computation generation pure function take grid produce new grid represents turn representing matrix single array width height element storing value row row example element fifth row using indexing stored position count live neighbor nested loop looping adjacent coordinate dimension care count cell outside field ignore cell center neighbor counting ensuring change checkboxes effect generation way event handler notice change update current grid reflect generate fresh grid value checkboxes computing turn choose event handler want attach attribute identify position checkbox corresponds easy cell change draw grid checkboxes use table element chapter simply element br line break element row project apixelarteditor keyboardbindings keyproperty event letter key lowercase letter shiftisn t held interested key event shifthere keydown handler inspect event object match shortcut automatically list letter toolsobject don t write key event match shortcut preventdefault patch appropriate action exercise good example immutable data structure make code faster old new picture compare redraw pixel changed color saving percent drawing work case write new function updatepicture drawpicture extra argument undefined previous picture pixel function check previous picture passed color position skip pixel case canvas get cleared change size avoid touching widthand heightproperties old picture new picture size different happen new picture loaded set binding holding old picture tonullafter changing canvas size shouldn t skip pixel ve changed canvas size circle inspiration rectangle tool tool ll want drawing starting picture current picture pointer move figure pixel color use pythagorean theorem figure distance current pointer position start position taking square root sum square x difference square difference loop square pixel start position side twice radius color circle s radius using pythagorean formula figure distance center make sure don t try color pixel outside picture s boundary properlines thing problem drawing pixelated line really similar slightly different problem drawing horizontal line left right loop color pixel step line slight slope degree πradians interpolate slope need pixel xposition yposition pixel determined slope soon slope go degree need switch way treat coordinate need pixel yposition line go go left cross degree looping right left don t actually write loop drawing line ato bi drawing line bto swap start end position line going right left treat going left right need different loop thing line drawing function check difference larger difference horizontalish line verticalish make sure compare absolute value xand ydifference know axis looping check start point higher coordinate axis endpoint swap necessary succinct way swap value binding javascript us destructuring assignment like start end end start compute slope line determines coordinate axis change step main axis run loop main axis tracking corresponding position axis draw pixel iteration make sure round nonmain axis coordinate likely fractional drawmethod doesn t respond fractional coordinate searchtool command line argument regular expression input file come use regexp constructor string regular expression object doing synchronously readfilesync straightforward use node function write asyncfunction code look similar figure directory use stat statsync stats object s isdirectory method directory branching process using recursive function keeping array work file need explored file directory readdirorreaddirsync note strange s filesystem function naming loosely based standard unix function readdir lowercase add syncwith capital letter filename read readdir path combine directory putting sepfrom node path using joinfunction package directorycreation use function implement deletemethod blueprint mkcolmethod file try create directory mkdir directory exists path return response directory creation request idempotent nondirectory file exists return error code code bad request appropriate apublicspaceontheweb create textarea element hold content file edited getrequest using fetch retrieve current content file use relative url like instead http refer file server running script user click button use form element submit event make putrequest url content textarea request body save file add select element contains file server s directory adding option element containing line returned getrequest url user selects file change event field script fetch display file saving file use currently selected filename project diskpersistence simplest solution come encode talksobject jsonanddumpittoafilewith writefile thereisalreadyamethod updated called time server s data change extended write new data disk pick filename example server start try read file readfile succeeds server use file s content starting data commentfieldresets best way probably make talk component object asyncstate method updated modified version talk normal operation way talk changed adding comment syncstate method relatively simple diﬀicult changed list talk come reconcile existing list dom component talk new deleting component talk deleted updating component talk changed helpful data structure store talk component talk title easily figure component exists given talk loop new array talk synchronize existing component create new delete component deleted talk ll loop component check corresponding talk exist operator operator operator operator operator operator operator operator operator operator operator operator operator operator operator operator operator expression default value operator operator operator operator operator operator array subscript operator operator operator block object http status code http status code canvas context http status code http status code http status code http status code http status code http status code http status code html tag abelson hal absolute positioning absolute value abstract data type abstract syntax tree seesyntax tree abstraction network function acceleration accept header access control activeelement property add method addentry function addeventlistener method addition address address bar adoption age example alert function alphanumeric character alt attribute alt altkey property ambiguity american english ampersand character analysis ancestor element android angle bracket animation bouncing ball platform game spinning cat appendchild method appliance application arc method argument argv property arithmetic matrix table counting creation filtering flattening indexing iteration length method notation rest argument random element regexp match representation searching array constructor array prototype object function array egg exercise arrow function arrow key artificial intelligence artificial life assert function assertion assignment asterisk async function asynchronousprogramming reading file attribute autofocus attribute automatic semicolon insertion automation automaton average function await keyword babbage charles background background cs backslash character path separator regular expression string backtick backtracking balloon balloon exercise banking example bank iain basecontrols constant basetools constant bean counting exercise event behavior benchmark tim best practice beziercurveto method big ball mud binary data binary number binary operator binding state assignment compilation definition destructuring parameter model naming scope undefined visibility bitmap graphic block comment block element blocking blur event method body html tag body http body property book programming boolean conversion boolean function border cs cs bouncing boundary box shadow cs br html tag brace function body regular expression branching branching recursion break keyword breakpoint british english browser environment security window browser war browser bubbling seeevent propagationbuffer class building exercise bundler button html tag button property button property method stack callbackfunction camel case cancelanimationframefunction context canvas html tag canvasdisplay class capitalization capture group caret character carla crow carriage return cascading cascading style sheet seecss case conversion case keyword sensitivity casual computing cat s hat exercise catch keyword catch method centering certificate changeevent character character category character encoding charactercount function characterscript function charcodeat method checkbox checked attribute chess board exercise chessboard exercise child node childnodes property child property chinese character chrome circle svg tag circle exercise circular dependency class attribute class declaration class hierarchy classname property clearing clearinterval function clearrect method cleartimeout function click event clientheight property clientwidth property clientx property clienty property clipboard clipping closepath method closing tag closure egg exercise structure code golf code unit codepointat method coin class collaboration collection collisiondetection colon character color cs color code color component color field color picker color property colorselect class comma character command key line comment comment field reset exercise code comment egg exercise commonjs commonjs module communication community comparerobots function comparison number object string undefined value compatibility compilation complexity component composability computed property computer concat method concatenation conditional execution conditional operator conditional request configuration connected graph connection consistency keyword constant constructor content negotiation exercise header header context context menu continuation continue keyword control flow asynchronous conditional exception function control key control point convention conway s game life coordinate programming copyright correlation countby function counter variable createelementmethod createreadstreamfunction createserver function createtextnode method request cryptography ctrlkey property curl program curly brace seebraces cwd function dark blue game data attribute data event data flow data format data loss data structure collection immutable data url dataset date class package function dblclick event morgan s law debouncing statement debugging decentralization decimal number declaration decodeuricomponentfunction deep comparison deep comparison exercise default behavior default keyword default value defineproperty function deletemethod delete method delete operator dependence dependency deserialization destructuring destructuring assignment destructuring binding developer tool diamond dijkstra s algorithm dijkstra edsger dijkstrajs package dimension direct child node writing directory directorycreation exercise disabled attribute discretization dispatch display cs distance division division zero loop doctype document document format document object model seedom documentation documentelement property dollar sign attribute component construction graphic interface modification querying dom property domain domdisplay class dominantdirection exercise property property dot character seeperiod character double click download download attribute draggable bar example dragging draw function drawimage method drawing drawing program example drawpicture function menu duplication ecmascript ecmascript economic factor eﬀiciency eﬀicient drawing exercise egg language electronic life elegance element code element property keyword elt function set encapsulation encodeuricomponentfunction encoding encryption end event end method enemy example engineering enoent status code enter key enum reserved word environment equality error event error handling error message error recovery error response error tolerance error type e module escape key escaping html regexps string url escher etag header evaluate function evaluation number handling event loop event object eventpropagation event type method exercise evolution exception handling exception safety exec method execution order exercise exit method expectation experiment exponent exponentiation export keyword export object expression expressivity extraction factorial function fahrenheit fallthrough farm example fetch function fielding roy resource file extension file field file format file reading file server fileserverexample file size file type filereader class file property filesizes function filesystem function method fillrect method fillstyle property filltext method filter method finally keyword method findinstorage function findroute function finish event firstchild property fixed positioning fixing scope exercise fizzbuzz exercise flattening exercise flexibility fliphorizontally function fliphorizontally method flipping seemirroring number flow diagram focus event focus method fold seereduce method cs cs cs attribute loop loop foreach method form html tag form property formatdate module fractal example fractional number framework frequency table function application property value callback seecallback function declaration definition naming function constructor function keyword function prototype screenshot canvas game life exercise dataset garbage collection garble example gardening gaudy home page generation generator method method getattribute method getboundingclientrectmethod getcontext method getdate method getelementbyid method getelementsbyclassnamemethod getelementsbytagnamemethod getfullyear method gethours method getimagedata method getitem method getminutes method getmonth method getseconds method gettime method getyear method github global object global scope goalorientedrobot function grammar graphic grave accent seebacktick greater group class groupby function grouping group exercise html tag handleaction function hard disk hard drive hardcoding method hash character hash sign hasown function head html tag head property header property height property help text example hexadecimal number hidden element function seefunction historyupdatestate function hooligan href attribute notation structure html html tag http human language hypertextmarkuplanguage seehtml hypertexttransferprotocol seehttp hyphen character id attribute idempotence idempotency identifier identity keyword chaining header imagination img htmltag immutable implement reserved word import keyword operator includes method indentation index property indexof method infinite loop infrastructure inheritance ini ini package initialization inline element inner function inner loop innerheight property innerwidth property input html tag input event insertbefore method installation instance instanceof operator instruction integration interface module interface reserved word internationalization internet internet explorer interpolation interpretation interview question inversion ip address isdirectory method iseven exercise isolation iterable interface iterator iterator interface jacques javascript availability flexibility history html us version weakness javascript console javascriptobjectnotation seejson join method journal dataset function json method function function game jumping kernighan brian key code key property keyboard keyboardbindings exercise keyboard focus seefocus keydown event keyup event keyword khasekhemwy kill process knuth donald label html tag labeling landscape example header lastchild property lastindex property lastindexof method lava class layering laziness le guin ursula leaf node learning left cs length property array string lengthlist class let keyword level class lexical scoping line break line comment line drawing line width line code lineto method linewidth property link html tag linked list liskov barbara list exercise listen method listening tcp listiterator class literal expression live data structure live view life exercise load event loadbutton class local binding local scope localhost localstorage object locked box exercise logical logical operator logical long polling termination loop body lycanthropy machine code mailroute array maintenance malicious script map data structure map class map method marcus aurelius match method matching algorithm math object function function function function function function function function constant function function function function mathematics max example cs cs maximum meadowfield measuring robot exercise medium type meetup memory organization persistence structure sharing message event meta key metakey property method method attribute method method property method object microsoft mime type package mini application minifier minimalism minimum minimum exercise mirroring miró joan mixer example mkcol method mkdir function modification date modifier key modular robot exercise modularity resolution module loader module object module modulo operator mongolian vowel separator monster exercise mouse button cursor mouse trail exercise mousedownevent mousemoveevent mouseup event moveto method mozilla multiple attribute multiple choice multiplication multiplier function mutability attribute namespace naming negation neighbor nesting regexps array expression function loop object scope netscape network abstraction protocol security new operator character method nextsibling property node program node f package node package node http package node path package node directory nodelist type nodename property nodetype property nodevalue property nonbreaking space number example notification npm program number conversion notation precision representation special value number function number puzzle example function module creation identity mutability property representation object prototype function obstacle offsetheight property offsetwidth property method onclick attribute onclick property opengl opening tag operator application optimization option html tag optional optional argument optional chaining option property ordering ordinal package organic growth organization overflow overflow cs overriding p html tag package package reserved word package manager padding cs page reload pagex property pagexoffset property pagey property pageyoffset property palef thomas panning paragraph parallelism parameter parent node parenthesis argument expression regular expression statement parentnode property parse function parseapply function parseexpression function parseini function parser generator parsing password password field path filesystem pathfinding patience pattern pausing exercise pea soup peanut percent sign percentage performance period character persistence persistent data structure persistent group exercise persistent map exercise pgroup class phi coeﬀicient phi function physic engine pi constant pick function picture class picture property picturecanvas class picturefromimage function piechartexample pipe character method pipeline pixel art pixeleditor class platform game plauger player class plus character poignant guide pointer event pointerposition function polltalks function polymorphism pop method popper karl position position cs post method postmessage method power example precedence predicate function prefer header premature optimization preventdefaultmethod previoussibling property primitivemultiply exercise private reserved word private property process object processor profiling program nature program size programming diﬀiculty history joy programminglanguage power programming style progress bar project chapter promise promise class function function function promptdirection function promptnumber function propagation seeevent propagation proper line exercise property assignment definition deletion inheritance model naming testing protected reserved word protocol prototype diagram prototype property pseudorandom number public reserved word public space exercise publishing punch card pure function push method pushing data method pythagoras pythagorean theorem quadratic curve quadraticcurveto method query string queryselector method queryselectorall method question mark quiet time exercise quotation mark quoting json object property quoting style exercise rabbit example button raising exception random number package randompick function randomrobot function range function range header ray tracer loop readability readable stream readasdataurl method readastext method readdir function readdirsync function readfile function readfilesync function reading code readtextfile function real promise exercise reasoning recipe analogy rect svg tag rectangle rectangle function recursion reduce method referenceerror type regexp class regexp golf exercise regularexpression alternative backtracking boundary creation escaping grouping internationalization matching method repetition rejecting promise relative path relative positioning relative url remainderoperator remote access remote procedure removechild method removeeventlistenermethod removeitem method rename function rendering rendertalk function rendertalkform function renderuserfield function repeat method repeating key repetition replace method replacechild method replaceselection function reporterror function function requestanimationframefunction require function reserved word resolution resolve function resolving promise resource response response class responsiveness rest parameter restore method result property returnkeyword return value reverse method reversing exercise rgb cs rmdir function roadgraph object road array road module exercise robot eﬀiciency exercise robustness rotate method rotation rounding roundto example router class routerobot function rule cs run function error runanimation function rungame function runlevel function running code runrobot function sandbox save method savebutton class scale constant scale method scheduling scientific notation script html tag script dataset scroll event scrolling search method search problem search tool exercise secure http seehttps security security camera select html tag selected attribute selection selectionend property property selector tag semantic versioning semicolon sep binding sequence serialization package sessionstorage object set data structure set class set method setattribute method setinterval function setitem method settimeout function shape exercise shared property shift key shift method shiftkey property evaluation effect sign bit simplicity character singleton project skillshareapp class skipspace function slashcharacter slice method sloppy programming smooth animation social factor method source property special form special return value specialforms object specificity split method spread operator square bracket square bracket square example root src attribute stack seecall stack stack overflow stack trace standard standard environment standard output standard star trek startpixeleditor function startstate constant startswith method stat function binding iterator object ofapplication canvas persistence transition statement static reserved word static file static method static property stats type statsync function status code status property stoicism stoppropagation method strict mode indexing method notation property representation searching string function stroke method strokerect method strokestyle property stroketext method stroking strong html tag structure structure sharing style html tag style attribute style sheet seecss subclass submit event substitution subtraction sum function summing exercise summing example superclass sussman gerald swapping binding switch keyword symbol function symbol synchronization syncstatemethod syntax expression function identifier number operator statement syntax tree syntaxerror type tab character tab key tabbed interface exercise tabindex attribute table html tag table example tablefor function talkresponse method talksabout function talkurl function tampering tangent target property task management example td html tag example template template literal templating language tentacle analogy terminal ternary operator test method test runner test suite test suite text field text method text node text wrapping cs code textalign property textarea html tag textbaseline property textcontent property textfilefunction textscripts function th html tag method binding throw keyword time zone timeline time method timestamp title html tag todataurl method tolowercase method tool property toolselect class cs scope seeglobal scope tostring method touchend event touch method touch property touchmove event touchstart event touppercase method tr html tag trackkeys function transform cs transformation translate method transmission control protocol tcp transparency transparent transpilation trapezoid traversal trial error triangle exercise trigonometry trim method try keyword type attribute type checking type coercion type property type variable typeof operator typescript unary operator uncaught exception undefined underline underscorecharacter undo history undobutton class unicode property unicycling uniform resource locator seeurl uniformity uniqueness unit cs unix time unlink function unshift method unwinding stack upcasing server example updated method updatestate function upgrading url class url encoding url package urlpath function usability use strict seestrict mode user experience user interface validation value attribute var keyword variable seebinding vec class vector exercise vector graphic verbosity viewport villagestate class virtual keyboard virtual world vocabulary void operator volatile data storage waitforchanges method waiting walking web seeworld wide web web application web browser seebrowserweb page web worker webdav webgl canvas context website websockets weekday module weekend project weresquirrel example loop whitespace html url indentation matching trimming width property window window object statement wizard mighty word boundary word character work list workbench exercise world wide web writable stream write method writefile function writehead method writing code writing www seeworld wide web namespace xmlns attribute yield reserved word yield keyword loop example zawinski jamie counting zeropad function zooming