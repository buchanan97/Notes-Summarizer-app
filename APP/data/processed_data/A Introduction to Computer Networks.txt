introduction computer network release peter l dordal jul preface second edition licensing german edition classroom use acknowledgment progress note technical consideration note cover recent change overview network layer data rate throughput bandwidth packet datagram forwarding topology routing loop congestion packet lan ethernet ip internet protocol dns transport firewall useful utility ietf osi berkeley unix epilog exercise ethernet basic classic ethernet mbps fast ethernet gigabit ethernet ethernet switch epilog exercise advanced ethernet spanning tree algorithm redundancy virtual lan vlan trill spb networking epilog exercise wireless lan adventure radioland wimax lte fixed wireless epilog exercise lan virtual private network carrier ethernet token ring virtual circuit asynchronous transfer mode atm epilog exercise link encoding framing multiplexing epilog exercise packet packet delay packet delay variability packet size error detection epilog exercise abstract sliding window building reliable transport sliding window linear bottleneck epilog exercise ip version header interface special address fragmentation classless ip delivery algorithm subnets network address translation unnumbered interface mobile ip epilog exercise companion protocol dns address resolution protocol arp dynamic host conÔ¨Åguration protocol dhcp internet control message protocol epilog exercise header address network preÔ¨Åxes multicast extension header neighbor discovery host address assignment epilog exercise additional feature globally exposed address subnets using example router connectivity tunneling connectivity epilog exercise algorithm algorithm problem observation minimizing route cost distance vector algorithm algorithm routing attribute ecmp epilog exercise ip routing classless internet domain routing cidr hierarchical routing legacy routing routing geographical routing epilog exercise border gateway protocol bgp route aggregation transit trafÔ¨Åc bgp filtering routing policy bgp table size bgp path attribute bgp trafÔ¨Åc engineering bgp anycast bgp interior routing bgp relationship example bgp instability bgp security route registry epilog exercise udp transport user datagram protocol udp trivial file transport protocol tftp fundamental transport issue tftp note remote procedure rpc epilog exercise tcp transport basic principle tcp header tcp connection establishment tcp wireshark tcp ofÔ¨Çoading tcp tcp bind tcp state diagram epilog exercise tcp issue alternative tcp old duplicate timewait handshake revisited anomalous tcp scenario tcp faster opening path mtu discovery tcp sliding window tcp delayed acks nagle algorithm tcp flow control silly window syndrome tcp timeout retransmission keepalive tcp timer variant alternative epilog exercise tcp reno congestion management basic tcp congestion management slow start tcp tahoe fast retransmit tcp reno fast recovery tcp newreno selective acknowledgment sack tcp bottleneck link utilization single packet loss tcp assumption scalability tcp parameter epilog exercise dynamic tcp look queuing bottleneck link competition tcp reno fairness synchronized loss epilog exercise dynamic tcp notion fairness tcp reno loss rate versus cwnd tcp friendliness aimd revisited active queue management tcp problem tcp problem tcp problem epilog exercise newer tcp implementation choosing tcp linux desideratum rtts roadmap highspeed tcp tcp vega fast tcp tcp westwood tcp illinois compound tcp tcp veno tcp hybla dctcp tcp cubic tcp bbr epilog exercise queuing scheduling queuing trafÔ¨Åc trafÔ¨Åc management priority queuing queuing discipline fair queuing application fair queuing hierarchical queuing hierarchical weighted fair queuing epilog exercise token bucket rate limiting token bucket deÔ¨Ånition example multiple token bucket gcra guaranteeing v oip bandwidth limiting delay token bucket router token bucket multiple router delay constraint cbq linux htb theorem quality service net neutrality wild queue trafÔ¨Åc integrated service rsvp global ip multicast rsvp differentiated service red nsis comcast transport protocol rtp label switching mpls epilog exercise network management snmp network architecture snmp basic snmp naming oids mib data type syntax snmp snmp table snmp operation mib browsing community security snmp encoding network management system snmp alternative exercise snmp version table row creation exercise security intrusion stack buffer overÔ¨Çow heap buffer overÔ¨Çow network intrusion detection cryptographic goal secure hash encryption exchange exercise encryption rsa forward secrecy trust man middle encryption ssh tl ipsec dnssec rsa key example exercise mininet installing mininet simple mininet example multiple switch line ip router line ip router simple implementation quagga routing bgp tcp competition linux trafÔ¨Åc control tc openflow pox controller exercise network simulation simulator single tcp sender tcp sender competing tcp loss event synchronized loss tcp reno versus tcp vega wireless simulation epilog exercise network simulator installing running single tcp sender wireless exercise bibliography conversion table selected solution solution overview network solution ethernet solution advanced ethernet solution wireless lan solution lan solution link solution packet solution sliding window solution solution algorithm solution ip routing solution border gateway protocol solution udp solution tcp reno congestion management solution dynamic tcp solution dynamic tcp solution queuing scheduling solution mininet index table bibliography index ixxan introduction computer network release peter l dordal department computer science loyola university chicago content content introduction computer network release contentspreface man blockhead wrote samuel johnson textbook world changing hand open source software licensing great success hand unauthorized pdfs popular textbook widely available time consider Ô¨Çowing Ô¨Åghting tide textbook released free creative common license described mene mene tekel pharsin straw patent roundabout method force student purchase textbook simpler strategy include price book course point faculty advocate student hirudinea say publishing just particular book doe belong category online edition free good company wikipedia steadily increasing number open online textbook entire world model completely parallel similar market inefÔ¨Åciencies traditional publishing sobering return author advanced textbook usually modest cost user lack access quite substantial meant imply print edition started project inconceivable print publisher agree having online edition remain free time changing book updated multiple time year recent change feature paper publishing t touch rate slowed recent year ofÔ¨Åcial book website book available online html zipped archive html Ô¨Åles format format prove useful note html variant original version using universally available set unicode character version better suited smaller screen ideal world javascript Ô¨Ågure version serve browser automatically real world took year html facility work broke collapsible sidebar technical consideration information second edition second edition Ô¨Ånally mainly involved breaking longer chapter partly make scrolling fussy device partly restore sense accomplishment Ô¨Ånishing chapter partly collabsible content sidebar Ô¨Åts viewport device making sidebar scrolling unnecessary division overlong chapter case followed logical divide chapter basic chapter companion protocol ethernet chapter chapter basic ethernet chapter advanced feature security chapter divided naturally encryption second half Ô¨Årst half introduction computer network release case division natural chapter come mind companion col neighbor discovery slaac ended chapter core protocol lifetime Ô¨Årst edition changed exercise number new exercise needed grouped older exercise inserted numbering book updated middle semester essential second edition involved splitting chapter dividing exercise appropriately realized time renumbering hand make life easier instructor including assignment based old numbering handy conversion table conversion table demand Ô¨Ånally accepted need create solution manual instructor covering majority exercise progress instructor contact interested second edition html version available july licensing text released creative common license text like conventional book word free copy work distribute noncommercial use commercial us reuse requires attribution creative common license doe precisely spell constitutes noncommercial use author considers sale printed copy book organization price just cover expense commercial use personal printing free distribution printed selection qualify noncommercial starting edition commercial use explicitly allowed provided printed copy distributed word text released term creative common license amended include prohibition distribution printed copy creative common license summary linked state free share copy redistribute material medium format purpose commercially license amended paragraph limit medium medium permissible commercial us include limited use internal training program use training educational program sale work electronic format available installation amazon attribution clause creative common license section b c requires redistributors work provide iii extent reasonably practicable uri licensor speciÔ¨Åes associated work uri creative common license creation derivative work requires permission entirely clear considered derivative work traditional example abridgment translation supplemental material like exam lab slide coverage additional topic new independent work require permission inclusion supplement modest amount material book strong claim fair use software world right make derivative work exercised software modiÔ¨Åed hard applies textbook supplement line situation concerned regard let know ll probably happy grant permission prefacean introduction computer network release chapter contain source code licensed apache license code Ô¨Åles derivative work contain ofÔ¨Åcial apache license statement german edition delighted announce rheinwerk verlag undertaken translation book german technical review dr matthias w√ºbbeling university bonn published commercial print edition book available lehrbuch classroom use book meant thorough text introductory college graduate course computer network carefully researched consistent notation style complete diagram exercise tried rethink explanation protocol algorithm goal making easier understand intent create text cover reasonable extent whythe internet way avoid endless dreary focus tla s acronym remain nottoomathematical avoided calculus linear algebra matter quadratic term inequality sneak time said book includes large number calculation setting concrete make illustrating various networking concept overall tried Ô¨Ånd happy medium practical matter underlying principle goal create book useful broad audience including interested network management networking software development just internet best way gain insight certain design choice look tive implementation end book includes coverage topic encounter practice useful point comparison topic arguably include atm chronous transfer mode atm sctp sctp mbps ethernet classic ethernet book used network supplement companion resource variety course overlap greater lesser degree networking loyola book used coupled second textbook course computer security network management telecommunication course possibility alternative nontraditional presentation networking used concert work particular book s free marked advantage finally hope book useful reference work end attempted ensure indexing sufÔ¨Åcient support reader similarly obscure specialized notation kept minimum world networking textbook versus quencing book really chapter numbered fashion instead Ô¨Årst chapter provides relatively complete overview lan ip transport network layer thing allowing subsequent chapter refer network layer forward german edition introduction computer network release reference importantly allowing chapter covered variety different order practical matter use text teach loyola s introduction computer network course cover tcp material parallel distinctive feature book extensive coverage tcp tcp dynamic newer version tcp tcp cubic bbr tcp chapter using simulator mininet emulator root longstanding goal Ô¨Ånd better way present competition congestion classroom feature detailed chapter queuing discipline thing book make little attempt cover application layer token example cluded snmp snmp actually make pretty good example application recommendation instructor wish cover familiar example combine text appropriate application documentation book continuously updated try hard ensure edition compatible end section renumbering avoided extent practical different edition existing exercise renumbered new exercise regularly inserted fractional Ô¨Çoating point number existing integral exercise number given trailing reduce sion exercise say interested using book traditional network course trepidation offer following set core material solidarity prefer alternative ordering emphasize represents setand sequence overview network selected section ethernet basic particularly switched ethernet selected section selected section packet abstract sliding window ip version selected section algorithm probably including rithm selected section ip routing udp transport tcp transport basic tcp reno congestion management care detail covered semester survey selected important network application basic network programming introductory Ô¨Åguration switch router coverage additional material book set additional topic course network course focus quite different set topic instructor adopt book course primary secondary text strongly encouraged let know help support continued work book list institution m aware far book adopted commercial publisher information sale record won t work want institution listed contact prefacean introduction computer network release augustana college california state university fresno eastern washington university edith cowan university australia kennesaw state university king s university edmonton canada loyola university maryland middle tennessee state university murray state university muskingum university ohio university saint martin s university seattle paciÔ¨Åc university suny delhi university arkansas community college batesville university california santa cruz university luxembourg university maryland university college university new hampshire manchester university north alabama university texas el paso university people villanova university wellington institute technology acknowledgment like thank loyola student provided invaluable feedback text exercise result hope greater clarity like thank following people outside loyola contributed technical editorial comment ve included institutional afÔ¨Åliation Ô¨Ågure ve missed institution let know acknowledgment introduction computer network release anonymous jose alvarado university people jim davis ben erickson eric freudenthal university texas el paso david garÔ¨Åeld jeff harrang emmanuel lochin institut sup√©rieur l a√©ronautique et l espace hamir mahal robert michael alisa neeman muskingum university fred nerk natale patriciello centre tecnol√≤gic telecomunicacions catalunya donald privitera kennesaw state university yves rene shema british columbia institute technology charles stimler herman torjussen j alexander wijesinha towson university mattias w√ºbbeling university bonn justin yang comment clarity completeness consistency correctness appreciated single comment correction welcome continue seek reviewer willing review entire section chapter contacted pld book comment form peter dordal shabbona illinois progress note work started summer edition declared complete march edition reorganization july current edition website carry current edition recommended edition Ô¨Ånal edition prefacean introduction computer network release technical consideration book prepared restructuredtext using linux sphinx package produce multiple format source said primary format html sidebar text sidebar work best diagram drawn using libreofÔ¨Åce draw html version provides quick search box aid javascript s stoppropagation method Ô¨Ånally coexists collapsible sidebar quick search work string string hyphen fail index effective alternative book us modest set unicode special character unfortunately character universally available browser Ô¨Ågured encapsulate font html character Ô¨Årst line appear limited support greek letter present unicode basic multilingual plane symbol entire explanation x y ùõº ùõΩ ùõæ ùúÜ ùúë ùúè ùúö √Ω√± √∞√Ω √∞√± ùõº ùõΩ ùõæ ùúÜ ùúë ùúè ùúå √± √∞ √∞√± ¬µ √± √∞ character look roughly following image Ô¨Årst line likely fail option viewing second row display successfully version book online zipped available character Ô¨Årst row replaced second row alternative add appropriate font generally firefox internet explorer display necessary character box chrome chrome situation usually Ô¨Åxed real computer adding font tweaking chrome font setting good luck symbola place install font extract Ô¨Åle adjust chrome setting √±show advanced setting √± customize font button change minimum default font symbola restart chrome unfortunately adding font android device continues difÔ¨Åcult worse android fails display box symbol l place missing character available browser properly display symbol recommend pdf format version work system point hope Ô¨Ågure handle font situation little better using javascript turn straightforward progress slow technical consideration introduction computer network release gone tex mathjax likely gotten carried away mathematical formula character set keep thing relatively simple mathjax render better used copy paste diagram body text migrated format diagram rendered character appear exercise browser appear support zooming image signiÔ¨Åcant step forward note cover photo mahogany leaf presumably swietenia mahagoni original image taken homer edward price placed http creative common license image used cropped began idea cover depict networking reference natural world connection mahogany networking come bertolt brecht s work city mahagonny city net ok net sense trap communication close prefacean introduction computer network release ala turned based misapprehension musicologist john simon put did brecht lawless city symbol capitalist society distress coining mahagonny opera s leokadja begbick explains city net trap word mahogany stem net remains unclear just mahagonny did mean brecht learning picture mahogany book progressed reading paper rfcs began symbol diligent checking s green recent change july ver change tcp reno fast recovery neighbor solicitation spanning tree example switch segment update rule typo new material tcp cubic december ver miscellaneous change german edition connectivity august ver greatly expanded discussion use mininet tcp competition tcp competition miscellaneous change june ver homa homa gnmi snmp alternative beginning transition numbered Ô¨Ågures caption text embedded image currently chapter issue Ô¨Ågure numbering february ver update related bgp dns bind november ver minor Ô¨Åxes including dns september ver added mininet bgp example minor addition january ver minor Ô¨Åxes text exercise october ver dns Ô¨Åxes new material including query minimization mininet wireshark demo clariÔ¨Åcations acks miscellaneous change september ver Ô¨Åxed exercise number exercise reference exercise new discussion checksum udp ip address tcp ofÔ¨Çoading august ver Ô¨Åxed exercise number july ver start second edition recent change introduction computer network release overview network Ô¨Åeld order presentation topic agreed computer networking interconnection Ô¨Åeld networking technical Ô¨Åelds difÔ¨Åcult Ô¨Ånd order presentation doe involve endless forward reference future chapter true largely ordering followed taken different approach Ô¨Årst chapter summary essential lan ip tcp board later chapter expand material local area network lan physical network provide connection machine say home school corporation lan say local ip internet protocol layer provides abstraction connecting multiple lan internet finally tcp deal transport connection actually sending user data chapter contains important material section datagram forwarding central switching routing essential chapter discusses packet generally tion sliding window topic revisited later chapter firewall network address translation covered layer topic lan ip tcp called layer constitute link layer work layer transport layer respectively application layer software use form model network layer context corresponds strongly idea programming interface library understanding given layer communicates directly layer immediately application hand chunk data tcp library turn make call ip library turn call lan layer actual delivery application doe notinteract directly ip lan layer lan layer charge actual delivery packet using address conceptually subdivided physical layer dealing analog electrical optical radio signaling mechanism involved abstracted logical lan layer describes digital operation packet lan layer physical layer generally direct concern designing lan hardware kernel software interface lan corresponds logical lan layer lan division give internet model formal hierarchy ad hoc classiÔ¨Åcation method return ietf osi introduce obscure layer complete seven model introduction computer network release application transport ip logical lan physical lan fig network model data rate throughput bandwidth network connection egat lan layer data rate rate bit transmitted lan data rate vary time throughput refers overall effective transmission rate taking account thing like transmission overhead protocol inefÔ¨Åciencies competing trafÔ¨Åc generally measured higher network layer data rate term bandwidth used refer use synonym data rate term come radio transmission width frequency band available proportional equal data rate achieved discussion tcp term goodput used refer called throughput usable data delivered receiving application ically retransmitted data counted calculating goodput counted twice interpretation throughput data rate generally measured kilobit second kbps megabit second mbps use b denotes bit context data rate kilobit megabit somewhat inconsistently follow tradition using kb mb denote data volume respectively b denoting byte newer abbreviation kib mib precise consequence confusion modest packet packet sequence byte transmitted unit shared set link necessity packet need preÔ¨Åxed header containing delivery information common case known datagram forwarding header contains destination address header network using called forwarding contain instead identiÔ¨Åer connection networking today past year later look brieÔ¨Çy switched option voice telephony lan layer packet viewed imposition buffer addressing structure serial line additional layer impose additional structure informally packet referred frame lan layer segment transport layer maximum packet size supported given lan egethernet token ring atm intrinsic attribute lan ethernet allows maximum byte data comparison packet originally held byte data early token ring packet contain kb overview networksan introduction computer network release data dataheader fig packet header data proponent large packet size larger kb extreme atm asynchronous transfer mode protocol us byte data packet good reason believing modest packet size potential issue forward packet lan lan later chapter look ip internet protocol layer address generally layer add header ethernet header typically byte ip header byte tcp header byte tcp connection sends byte data packet header total overhead common v option packet contain byte data byte header making header total compressing byte audio bring data portion byte meaning header total rtp voip network appropriate header contain address destination delivery information internal node network called router orswitches try ensure packet delivered requested destination concept packet packet switching Ô¨Årst introduced paul baran baran s primary concern network survivability event node failure existing centrally switched protocol vulnerable central failure donald davy independently developed concept davy coined term packet worth noting packet buffer built byte hardware today agrees byte hardware agrees convention order bit byte transmitted byte universal great hardware platform did overlap internet era broadly construed word size word hold Ô¨Åve ascii character early internet speciÔ¨Åcations introduced term octet byte required packet sequence octet host able convert chaos averted note data issue example binary integer represented sequence byte byte order binary data speciÔ¨Åes internet protocol use byte order called network byte order packet introduction computer network release datagram forwarding model packet delivery packet header contain destination address intervening switch router look address packet correct destination datagram forwarding achieved providing switch forwarding table xdestination ypairs packet arrives switch look destination address presumed globally unique forwarding table Ô¨Ånds information dress interface packet forwarded order bring step closer Ô¨Ånal destination value forwarding table single entry switch responsible step packet s path network switch able deliver packet hop time ultimate destination destination entry forwarding table correspond exactly packet tination address example ethernet datagram forwarding ip routing table destination entry correspond preÔ¨Åxes ip address lead huge saving space fundamental requirement switch perform lookup operation using forwarding table destination address arriving packet determine hop just forwarding table built question later return ethernet switch ethernet learning algorithm ip router algorithm forwarding table thought created initial conÔ¨Åguration Ô¨Ågure switch interface interface send packet b entry indicating destination b reached interface entry forwarding packet interface bc d e fig switch small numeric label interface number complete forwarding table using interface number column overview networksan introduction computer network release destination c b d e table follows consolidated destination c visual simplicity destination c d e b network diagrammed link interface corresponds unique immediate neighbor reached interface replace interface entry column corresponding neighbor human reader using neighbor column usually readable s table written follows consolidation entry b d e destination c c b d e central feature datagram forwarding packet forwarded isolation switch volved awareness logical connection established endpoint called stateless forwarding forwarding table state rfc way context datagram forwarding improve robustness communication gateway designed stateless forwarding ip datagram independently datagrams result redundant path exploited provide robust service spite failure intervening gateway network fundamental alternative datagram forwarding virtual circuit virtual circuit circuit network router maintains state connection passing different connection routed differently packet forwarding depends example information tcp port number datagram forwarding said arguably isdatagram forwarding web trafÔ¨Åc tcp port forwarded differently trafÔ¨Åc rule doe depend speciÔ¨Åc connection datagram forwarding allowed use information destination address theory ip routing based destination address information datagram forwarding introduction computer network release allowing example different routing destination bulk trafÔ¨Åc latency trafÔ¨Åc practice internet service provider isps ignore information ip header prearranged agreement route based destination convention switching device acting lan layer forwarding packet based lan address called switch originally bridge prefer term device acting ip layer forwarding ip address called router datagram forwarding used ethernet switch ip router destination ethernet forwarding table individual node destination ip router entire network set node ip router site common forwarding table include catchall default entry matching ip address nonlocal need routed internet large unlike consolidated entry b d e table likely implemented actual separate entry default entry single record representing forward packet destination match forwarding table default entry replacing entry destination c default default entry make sense tell looking address doe represent nearby node common ip network ip address encodes destination network router generally know local network rare ethernet generally correlation ethernet address locality ethernet switch mean knowing interface connected directly individual host switch knew address host making interface default route make sense practice ethernet switch know kind device connects given interface topology network diagrammed previous section loop graph theorist saying network graph acyclic tree network unique path pair node algorithm make sure destination appears forwarding table issue choosing alternative path doe arise loop redundancy broken link result partitioning network piece communicate equal mind redundancy good thing start including redundancy make decision multiple path destination consider moment following network list b path right answer path faster taking slower path exactly wrong especially slower path say expensive sort protocol exist provide mechanism make choice mechanism simple choosing overview networksan introduction computer network release ba fig network path b route Ô¨Årst path discovered given destination want protocol make sure reach b link fails switch route shall lan particular ethernet prefer tree network redundancy ip complex protocol support redundancy algorithm trafÔ¨Åc engineering case decision route material signiÔ¨Åcance link slower congested use term trafÔ¨Åc engineering refer intentional selection route elevation priority class trafÔ¨Åc route selection directly intentional conÔ¨Åguration implicit selection tuning algorithm make choice matically example algorithm algorithm build forwarding table table greatly inÔ¨Çuenced administrative assignment link cost pure datagram forwarding used lan ip layer path taken packet mined solely destination trafÔ¨Åc engineering limited choice alternative path suggested datagram forwarding extended service information account used voice trafÔ¨Åc relatively low bandwidth intolerance delay entirely different path bulk Ô¨Åle transfer alternatively network manager simply assign voice trafÔ¨Åc higher priority doe wait queue trafÔ¨Åc information set case isp wish recognize designated user turn mean isp implicitly use trafÔ¨Åc source making routing decision alternatively information set isp based best guess application mean isp using packet size port ber transport content routing decision explicit mechanism supporting kind routing routing attribute lan layer mechanism historically limited networking ip layer strategy available quality service topology introduction computer network release routing loop potential drawback datagram forwarding possibility routing loop set entry forwarding table cause packet circulate endlessly example previous picture routing loop nonexistent destination c forwarded forwarded forwarded forwarded packet sent c delivered circling endlessly easily consume large majority bandwidth routing loop typically arise creation forwarding table distributed global authority detect inconsistency authority temporary routing loop created notiÔ¨Åcation delay routing loop occur network underlying link topology example previous diagram destination c forward forward refer case linear routing loop protocol need way detecting avoiding routing loop ethernet example avoids nonlinear routing loop disallowing loop underlying network topology avoids linear routing loop having switch forward packet interface arrived ip provides time live ttl Ô¨Åeld ip header set sender decremented router packet discarded ttl reach limit number time wayward packet forwarded initial ttl value typically datagram routing switch responsible hop ultimate destination switch complete path mind guarantee switch downstream switch continue forward path misunderstanding potentially lead routing loop consider network b dcb e fig network consisting Ô¨Åve node ring d feel best path b belief link avoided e similarly decides best path b d e choose b based best path linear routing loop formed d route b e e route b d e identiÔ¨Åed usable path path fact followed moral successful datagram routing requires cooperation consistent view network congestion switch introduce possibility congestion packet arriving faster sent happen just interface inbound interface higher bandwidth outbound interface overview networksan introduction computer network release common source congestion trafÔ¨Åc arriving multiple input destined output reason packet arriving given outbound interface faster sent queue form interface queue packet dropped common strategy drop packet arrive queue term congestion refer point queue just beginning build point queue packet lost paper chiu jain refer Ô¨Årst point knee slope load v throughput graph Ô¨Çattens refer second point cliff packet loss lead precipitous decline throughput author use term contention internet packet loss congestion congestion especially bad time type loss egdue packet corruption insigniÔ¨Åcant comparison upgrade deciding network really doe insufÔ¨Åcient bandwidth technical issue economic number customer increase cost bandwidth decrease customer simply willing pay data transfer complete time customer external monitoring link router congestion help determine exactly part network beneÔ¨Åt upgrade emphasize presence congestion doe notmean network shortage bandwidth sender sender attempt send fast possible congestion simply network s feedback maximum transmission rate reached discussion including alternative deÔ¨Ånitions congestion congestion isa sign problem network consider quality service network loss congestion generally kept absolute minimum way achieve limit acceptance new connection unless sufÔ¨Åcient resource available packet core justiÔ¨Åcation packet baran s concern node failure notwithstanding link carry different time different packet representing trafÔ¨Åc different destination different sender packet key supporting shared transmission line support themultiplexing multiple communication channel single cable alternative separate physical line pair machine grows prohibitively complex quickly virtual circuit pair machine datacenter uncommon virtual circuit perspective important packet feature maximum packet size sent maximum time sender send sender chance alternative unbounded packet size lead prolonged network unavailability downloaded large Ô¨Åle single gigabit packet drawback large packet packet corrupted entire packet retransmitted error rate packet size packet introduction computer network release router switch receives packet generally read entire packet looking header decide node forward known introduces aforwarding delay equal time needed read entire packet individual packet forwarding delay hard avoid switch implement switching begin forwarding packet fully arrived sending long train packet keeping multiple packet en route time essentially eliminate signiÔ¨Åcance forwarding delay packet size total packet delay sender receiver sum following delay iesending byte delay delay speed light example start sending packet right cable propagation speed speed light vacuum Ô¨Årst bit arrive destination m later bandwidth delay determines entire packet arrive delay equal sum bandwidth delay router path delay waiting line busy router bad moment exceed sec rare generally m queuing delay delay component amenable reduction careful engineering packet delay detail lan ethernet network lan consisting physical link ultimately serial line common interfacing hardware connecting host link protocol make work explicitly assume lan node able communicate lan node time require cooperation intermediate node acting switch far away common type wired lan ethernet originally described paper metcalfe boggs ethernet s popularity low cost primary reason ethernet cost low high demand led manufacturing economy scale original ethernet bandwidth mbps megabit second use b bit b byte nowadays ethernet operates mbps gigabit mbps ethernet faster widely used server room comparison writing data transfer rate typical faster hard disk mbps wireless lan gaining popularity setting supplanted wired ethernet early ethernet installation unswitched host simply tapped long primary cable wound building Ô¨Çoor principle station transmit time rendering data unintelligible called collision ethernet design feature intended minimize bandwidth wasted collision station transmitting check sure line overview networksan introduction computer network release idle monitor line transmitting detect collision transmission collision detected execute random backoff strategy avoid immediate recollision slot time collision ethernet collision deÔ¨Ånitely reduce throughput larger view thought remarkably inexpensive mediation protocol unswitched ethernet packet received host network card host determine arriving packet addressed host possible conÔ¨Ågure card forward allarriving packet attached host pose security threat password sniffer surreptitiously collected password eavesdropping used common password snifÔ¨Ång fall loyola university remotely changed root password unix machine end campus using telnet told hour logged machine using new password host europe password snifÔ¨Ång likely culprit month later christmas day attack isn spooÔ¨Ång host used launch attack loyola s hacked unclear degree password snifÔ¨Ång played role exploit privacy efÔ¨Åciency concern ethernet today fully switched ensures packet delivered host addressed advantage switching effectively eliminates ethernet collision principle replaces queuing issue practice ethernet switch queue seldom Ô¨Åll invisible network manager unlike ip router queue switching prevents eavesdropping arguably better solution problem encryption signiÔ¨Åcant tradeoff switch historically time expensive unreliable tapping directly common cable dirt cheap ethernet address byte long ethernet card network interface assigned supposedly unique address time manufacture address burned card s rom called card s physical address hardware address mac medium access control address Ô¨Årst byte physical address assigned manufacturer subsequent byte serial number assigned manufacturer comparison ip address assigned administratively local site basic advantage having address hardware host automatically know address startup manual tion server query necessary unusual site large number identically conÔ¨Ågured workstation network difference derive ultimately workstation s unique ethernet address network interface continually monitor arriving packet see packet containing destination address match physical address grab packet forward attached cpu cpu interrupt ethernet designated broadcast address host sending broadcast address packet received host network switch receives broadcast packet port forward packet port broadcast mechanism allows host contact host b doe know b s physical address typical broadcast query form designated server lan ethernet introduction computer network release answer arp protocol host given ip address tell physical address trafÔ¨Åc addressed particular host broadcast said unicast ethernet address assigned hardware knowing address doe provide direct indication address located network switched ethernet switch record individual ethernet address network extremely large network ultimately unwieldy consider analogous situation postal address ethernet somewhat like attempting deliver mail using number address postal worker provided large catalog listing person s ssn physical location real postal mail course addressed hierarchically using speciÔ¨Åers state city zipcode street address room ethernet word doe scale large size switched ethernet work quite network node forwarding table size range straightforward manage forward packet correctly switch know active destination address lan located traditional ethernet switch passive learning algorithm ip router comparison use active protocol newer ethernet switch approach networking typically host physical address entered switch s forwarding table packet host Ô¨Årst received switch note packet s arrival interface source address assumes interface used deliver packet sender given destination address seen forwarding table ethernet switch backup delivery option Ô¨Çooding forwarding packet treating destination address like broadcast address allowing host ethernet card sort process generally used packet switch learned correct entry risk excessive trafÔ¨Åc eavesdropping minimal thexhost interfaceyforwarding table easier think xhost node switch host immediate end link connecting given interface fully switched network link connects interface perspective equivalent ip internet protocol solve scaling problem ethernet allow support type lan link internet protocol developed central issue design ip support universal connectivity connect way allow scaling enormous size appear ip work resulting unmanageably large forwarding table currently largest table entry early day ip network considered internetworks basic network lan nowadays user generally ignore lan think internet large virtual network support universal connectivity ip provides global mechanism addressing routing packet actually delivered host host ip address version denote byte bit ip header generally follows ethernet header ethernet header stay packet hop ip header stay packet entire journey internet overview networksan introduction computer network release essential feature address divided network preÔ¨Åx host remainder legacy mechanism designating network host address portion make division according Ô¨Årst bit Ô¨Årst bit Ô¨Årst byte network bit host bit application class large network class b network class c sized smaller entity example original ip address allocation loyola university chicago class binary ip address unlike ethernet address administratively assigned time class b network preÔ¨Åx internet assigned number authority iana delegate task turn assign host portion way appropriate local site result administrative assignment ip address usually serf just endpoint identiÔ¨Åer locator containing embedded location information sense location hierarchy geographical ethernet address comparison endpoint identiÔ¨Åers notlocators class deÔ¨Ånition spelled rfc introduced ip class d added rfc class d address begin bit address multicast sending ip packet member set recipient ideally actually transmitting link nowadays division network host bit dynamic different position address different level network example small organization receive address block size isp isp route ganization based preÔ¨Åx higher level routing based preÔ¨Åx example represent address block assigned isp note Ô¨Årst bit match Ô¨Årst bit taken quantity division point notcarried ip header router negotiate division point negotiate forwarding information return classless ip delivery algorithm network portion ip address called network number ornetwork address network preÔ¨Åx shall forwarding decision using network preÔ¨Åx network preÔ¨Åx commonly denoted setting host bit zero ending resultant address slash followed number network bit address note represent different thing second byte host address extending network address constrained begin anonymous block ip address referred slash following digit need block accommodate customer host network address network bit said ip network located lan shall host share network address assume reach directly underlying lan connectivity fails consequence rule outside site network bit need looked route packet site ip internet protocol introduction computer network release usually host precisely network interface physical lan share network preÔ¨Åx ip network occasionally lan divided multiple ip network individual lan technology maximum packet size support example ethernet maximum packet size byte token ring maximum kb today world largely standardized ethernet entirely standardized ethernet size limit case ip introduced real concern host separate network try exchange packet large intermediate network carry addition routing addressing decision ip support tation division large packet multiple smaller one context called segmentation ip approach efÔ¨Åcient ip host considerable length avoid mentation ip doe require packet byte supported common legacy strategy host limit packet byte packet sent router packet addressed host lan course use larger packet size despite limited use fragmentation essential conceptually order ip able support large packet knowing intervening network ip best effort acknowledgment retransmissions ship packet hope get time doe architecturally model represents known connectionless networking ip layer doe maintain information connection simply forward packet like giant lan responsibility creating maintaining connection left layer tcp layer connectionless networking notthe way thing alternative form internetworking router domaintain state information individual connection later virtual circuit examine networking used implement approach switching primary alternative datagram switching connectionless networking advantage connectionless working conceptually reliable router hold connection state lose nection state path taken packet connection easily dynamically rerouted finally connectionless networking make hard provider connection time era phone call source mild astonishment new user given paper considers thing possibility accounting primary advantage networking hand router better positioned accept reservation make guarantee remains sore point current internet want use v voip telephone want engage video conferencing packet treated internet core just Ô¨Åle transfer priority service option common form ip packet loss router queue overÔ¨Çows representing network congestion packet loss packet corruption rare egless connectionless world large number host simultaneously attempt send trafÔ¨Åc router case queue overÔ¨Çows hard avoid assume simplicity router Ô¨Åxed input queue size reality overview networksan introduction computer network release little complicated active queue management queuing scheduling ip forwarding ip router use datagram forwarding described datagram forwarding deliver packet destination value listed forwarding table network preÔ¨Åxes representing entire lan instead individual host goal ip forwarding delivery correct lan separate process used deliver Ô¨Ånal host Ô¨Ånal lan reached entire point fact having division ip address router need list network preÔ¨Åxes destination address ip forwarding table strategy key ip scalability save large amount space save time smaller table allow faster lookup save bandwidth overhead needed router track individual address idea space saving currently billion host internet network listed forwarding table ip s use network preÔ¨Åxes destination matching actual packet address entry longer matter simple equality comparison router compare ate preÔ¨Åxes ip forwarding table referred routing table book make token effort use forwarding refer packet forwarding process routing refer mechanism forwarding table maintained updated completely consistent use term forwarding loop routing loop let look example ip forwarding routing work assume network node host user machine single network connection router forwarding router directly visible user different network interface representing different network router connecting machine host router introduces complication suppose sending host sending packet destination host ip header packet contain d s ip address destination address Ô¨Åeld contain s address source address Ô¨Årst step determine d lan d local looking network destination address denote dnet net address s equal numerically net Ô¨Ågures d lan use direct lan delivery look appropriate physical address d probably arp protocol address resolution protocol arp attache lan header packet ip header sends packet straight d lan netand d netdonotmatch d look router use ordinary host use router packet delivery making choice simple forward packet router using direct delivery lan ip destination address packet remains d case lan destination address router router receives packet strip lan header leaf ip header ip destination address extract destination d look d net router Ô¨Årst check itsnetwork interface lan d recall router connects additional network answer yes router us direct lan delivery destination hand d netis lan router connected directly ip internet protocol introduction computer network release router consults internal forwarding table consists list network associated address xnet compare s xhost type smaller fewer net host address table chosen router reach direct lan delivery interface generally router router look d netin table Ô¨Ånds address us direct lan delivery packet machine packet s ip header remains essentially unchanged router likely attache entirely new lan header packet continues forwarded like router router Ô¨Ånally arrives router connected d net delivered Ô¨Ånal router directly d using lan make concrete consider following diagram b c f e d fig lan joined router forwarding maintain entry b c d e f ip warding just entry maintain forwarding table sends d put address ip header note concludes d local delivery sends packet router using lan delivery look destination network forwarding table forward packet turn forward see isconnected directly destination network delivers packet lan d looking d s physical address diagram ip address end link shown assigned global ip address use private ip address assuming link link actually need ip address return unnumbered interface think bit analogous zip code postal mail host bit analogous street address internal part post ofÔ¨Åce letter right zip code individual letter carrier lan get right address alternatively think network bit like area code phone number host bit like rest digit newer protocol support different division point different place network called hierarchical routing allow support addressing scheme correspond say invertebrate internet backbone essential time trafÔ¨Åc different provider passed backbone legacy backbone exists today common trafÔ¨Åc large provider google path provider connect peer directly large residential isps comcast google refers edge network med value trafÔ¨Åc engineering overview networksan introduction computer network release refer internet backbone ip router specialize routing commercial internet generally entry covering public ip address note essentially business deÔ¨Ånition technical revise claim previous paragraph state private ip network separate network preÔ¨Åxes visible backbone year book started preÔ¨Åxes forwarding table entry quite feasible table time larger let thousand time larger graph growth network preÔ¨Åxes entry bgp table size ip router site generally know locally assigned network preÔ¨Åxes destination doe match locally assigned network preÔ¨Åx packet need routed internet large typical site mean packet sent isp provides internet connectivity generally local router contain catchall default entry covering nonlocal network mean router need explicit entry locally assigned network greatly reduces size internet backbone approximately described fact router nothave default entry purpose internet seen combination lan link joining lan backbone link tie backbone lan link appear diagram just router build xdestnet yforwarding table major topic cover algorithm unlike ethernet ip router nothave Ô¨Çooding delivery mechanism fallback table constructed advance limited form ip broadcast basically intended reaching local lan doe help delivery event destination network unknown algorithm used set router common management fall category described algorithm router notunder common management neighboring router belonging different organization exchange information border gateway protocol bgp ip routing bgp allows routing decision based fusion technical information site reachable policy information representing legal commercial agreement outside router preferred trafÔ¨Åc isp carry isn t isp s customer common residential router involve network address translation addition packet forwarding network address translation future mentioned earlier allocation block ip address responsibility internet assigned number authority iana long ago delegated job allocating network preÔ¨Åxes individual site limited handing block class block Ô¨Åve regional registry arin north america ripe europe middle east part asia apnic east asia paciÔ¨Åc ip internet protocol introduction computer network release afrinic africa lacnic central south america end january iana Ô¨Ånally ran block table http iana assignment block nation table show allocated september arin ran pool address arin s customer isps obtain new address buying unused address block organization month iana pool ran microsoft purchased ip address c block nortel bankruptcy auction million year later price fell half climbed range year amazon bought block million price remained range end climbed block sold january range market address block continues develop real solution widespread adoption plentiful address address price range unlikely impact residential internet cess annual connection fee large organization use nat network address translation extensively leading need small number globally visible address address shortage doe affected wireless networking doe lead inefÔ¨Åcient routing table site single address block single backbone entry spread block tant forwarding entry dns ip address hard remember nearly impossible domain dns dns come rescue creating way convert hierarchical text name ip address example type instead virtually internet software us basic library call convert dns name actual address thing dns make possible changing website s ip address leaving allows moving site new provider example requiring user learn new possible different dns name resolve ip address modest trickery http web server ip address handle different dns name completely different website dns hierarchical distributed looking different dns server queried dns root zone edu searching hierarchy cumbersome dns search result normally cached locally cache lookup couple second dns hierarchy need hierarchy overview networksan introduction computer network release transport ip layer get packet node transport ip routing mechanism mean packet lost additionally data doe arrive arrive order finally ip support sending speciÔ¨Åc host normally want send given application running host email web trafÔ¨Åc different web session commingled transport layer layer ip layer handle sort issue creating sort connection abstraction far away popular mechanism transport layer transmission control protocol tcp tcp extends ip following feature tcp number packet keep track lost retransmits timeout hold packet delivery correct time arriving data packet acknowledged receiver timeout retransmission occurs edgment packet isn t received sender given time tcp connection application sends data simply writing connection addressing needed tcp connection managed kernel application application using tcp write byte time kb time tcp buffer divide data appropriate sized packet number provide way specify receiving application data identify sending application management tcp attempt maximize throughput time tributing unnecessarily network congestion tcp endpoint form xhost porty pair known socket address just socket refers properly object receive data sent socket address server precisely server application listen connection socket opened client endpoint initiate connection server enter host web browser open tcp connection server s port standard port server socket browser tab open connect server socket connection distinguishable virtue using separate port having separate socket address client end end busy server thousand connection port web port hundred connection port email port web email trafÔ¨Åc kept separate virtue different port used client port kept separate come unique xhost portypair tcp connection determined xhost portysocket address end trafÔ¨Åc different tions doe intermingle multiple independent connection somewhat analogous certain business telephone number operator standing type support multiple caller time number number answered different operator corresponding different cpu process different call overhear tcp us algorithm abstract sliding window multiple packet en route time window size represents number packet simultaneously transit tcp actually transport introduction computer network release keep track window size byte packet easier visualize window size packet example time packet transit data packet returning acknowledgment assuming packet lost acknowledgment arrives window slide forward packet data packet packet ahead sent maintain total packet wire example consider moment packet transit ack received number packet outstanding drop packet packet Ô¨Çight data sent ack received data sent sliding window minimizes effect delay propagation delay count entire windowful packet sliding window provides matic partial brake congestion queue switch router way exceed window size compare favorably transmission available width fall transmission rate lead overÔ¨Çowing queue signiÔ¨Åcant percentage dropped packet course window size large sender experience dropped packet ideal window size throughput perspective take time send entire window ack arriving just sender Ô¨Ånished transmitting window determining ideal size difÔ¨Åcult thing ideal size varies network load result tcp approximates ideal size common tcp strategy tcp reno window size slowly raised packet loss occurs tcp take sign reached limit available network resource point window size reduced half previous value slow climb resume effect sawtooth graph window size time oscillates optimal window size idealized sawtooth graph state real sawtooth graph tcp reno cwnd graph strategy root attempting maximize available width effect greatly limiting number event result tcp come internet protocol charged reducing managing congestion internet relatedly ensuring fairness bandwidth allocation competing connection core internet router classical case essentially role enforcing congestion fairness restriction internet word place responsibility congestion avoidance cooperatively hand end user cheating possible cooperative approach worked remarkably tcp ubiquitous performance tcp consistent packet lost receiving tcp host turn receiving application lost packet retransmitted successfully called blocking problem sound video application discreetly handle modest loss difÔ¨Åculty sudden large delay lost packet ideally mean just brief voice dropout pretty common cell phone video screen just reuse previous frame better pausing completely basic alternative tcp known udp user datagram protocol udp like tcp provides port number support delivery multiple endpoint receiving host effect speciÔ¨Åc process host tcp udp socket consists xhost portypair udp includes like tcp checksum data udp omits tcp feature connection setup detection automatic application manage packetization simplicity seen negative absence connection setup mean data transmission started faster absence detection mean blocking overview networksan introduction computer network release udp transport transport protocol rtp sits udp add additional support voice video application transport communication pattern classic trafÔ¨Åc pattern internet communication interactive bursty communication ssh telnet long idle time short burst bulk Ô¨Åle transfer downloading web page tcp handle feature apply large data transit web browsing hybrid time usually considerable burstiness individual page exceed mb add operation egto query database make dns request tcp widely used dns trafÔ¨Åc us udp periodic call new protocol speciÔ¨Åcally addressing pattern point use tcp established sequence operation envisioned single tcp connection make excellent sense overhead minimal comparison remote procedure rpc sctp century seen explosion streaming video streaming video length minute hour streaming radio station left playing indeÔ¨Ånitely tcp generally work assuming receiver say minute ahead buffering video received viewed way dip throughput congestion receiver time recover buffering work little streaming radio listener doesn t want far second reasonable fortunately audio bandwidth smaller issue streaming video bandwidth demand service attempt estimate available throughput adapt throughput changing video resolution trafÔ¨Åc typically video streaming operates basis sender pause receiver s playback buffer resume playback buffer drop certain threshold video matter voice audio interactive opportunity stream ing asks simple question internet telephone generally want answer immediately expect wait answer make party s stream buffer m buffering noticeable enter realm genuine trafÔ¨Åc time trafÔ¨Åc udp used avoid blocking lower bandwidth help communication traditionally need compression used hand constraint variation delivery time known jitter rtp control protocol speciÔ¨Åc numeric interpretation interactive video higher bandwidth requirement difÔ¨Åcult fortunately user tolerate common pause freeze transport layer essentially network connection involve client server pattern repeated application layer client contact server initiate login session transport introduction computer network release browse web page watch movie exchange Ô¨Åt model better endpoint example include internet telephony beneÔ¨Åt designating party place client message passing cpu cluster using remote procedure rpc protocol algorithm router report router b client time b report repeatedly model make sense individual exchange Ô¨Åles individual opposed cloud server rfc contains additional discussion pattern network site extremely large volume content distribute turn specialized communication pattern called network cdn reduce trafÔ¨Åc reduce time site replicates content multiple datacenters called point presence pop node access point oredge server user make request egfor web page video request routed nearest approximately nearest datacenter content delivered cdn mapping geographical map server netflix cdn map created solely measurement server north south america europe large web page typically contain static content individualized dynamic content typical facebook page example video javascript considered static individual wall post considered dynamic cdn cache static content edge server leaving dynamic content come centralized server alternatively dynamic content replicated cdn edge node introduces coordination issue dynamic content notreplicated cdn include private link node allowing rapid delivery node alternatively cdn node simply communicate using public internet finally cdn conÔ¨Ågured support fast interactive trafÔ¨Åc node egteleconferencing trafÔ¨Åc outlined cdn alternative intserv organization create cdns turn specialized cdn provider combine cdn service service principle needed create cdn multiplicity datacenters connection internet private link datacenters common practice cdn provider try build direct connection isps serve customer google edge network doe improve performance reduce trafÔ¨Åc cost return med value trafÔ¨Åc engineering overview networksan introduction computer network release finding edge server closest given user tricky issue technique common use Ô¨Årst edge server given different ip address dns conÔ¨Ågured user receive ip address closest edge server dns second edge server ip address anycast routing used route trafÔ¨Åc user closest edge server bgp anycast finally http application centralized server look approximate location user redirect web page closest edge server firewall problem having program machine listening open tcp port connect using Ô¨Çaw software end malicious machine damage range unintended downloading personal data compromise takeover entire machine making distributor virus worm steppingstone later machine strategy known buffer overÔ¨Çow stack buffer overÔ¨Çow basis great attack idea identify point server program Ô¨Ålls memory buffer data careful length checking c library function get buf sufÔ¨Åce attacker craft oversized input string read server stored memory overÔ¨Çows buffer overwrites subsequent portion memory typically taining pointer usual goal arrange thing server reach end currently executing function control returned calling function instead attacker s payload code located string aÔ¨Årewall mechanism block connection deemed potentially risky egthose originating outside site generally ordinary workstation need accept connection internet client machine instead initiate connection server blocking incoming connection work reasonably necessary egfor game certain port selectively unblocked original Ô¨Årewalls built router incoming trafÔ¨Åc server blocked unless sent modest number open port typically inbound connection blocked allowed internal machine operate reasonably safely unable accept ing connection inconvenient nowadays Ô¨Årewalls addition Ô¨Årewalls common conÔ¨Ågure workstation accept inbound connection port regardless software workstation request connection outbound connection case prevented typical home router implement called translation network address translation addition conserving address provides Ô¨Årewall protection useful utility exists great variety useful program probing diagnosing network list simpler common available one addressed subsequent chapter like ping generally present default installed firewall introduction computer network release ping ping useful determine machine accessible ping ping internet control message protocol work ping fails necessary packet blocked Ô¨Årewall ifconÔ¨Åg ipconÔ¨Åg ip Ô¨Ånd ip address use ipconfig window ifconfig linux macintosh system newer ip addr list linux output generally list active interface restricted selected interface desired ipcommand particular thing window command netsh interface ip config provides ip address nslookup digandhost trio program developed internet system consortium used dns lookup differ convenience option oldest nslookup option wide margin dig newest arguably convenient normal usage host nslookup answer address dig answer section host address address nslookup dig traceroute list route remote host traceroute m m m m m m m m m m m m continues page overview networksan introduction computer network release continued previous page m m m m m m m m m m m m m √£√± m √£√±ms m m m m m m m m m m m m router don t respond traceroute packet list quite complete window tracert utility functionally equivalent oute time exceeded information traceroute sends default probe router response come router happened router router sent distinct response linux system mtr command available alternative traceroute repeat traceroute interval generates cumulative statistic route andnetstat command route route print window ip route linux netstat system display host s local ip forwarding table workstation acting router includes route default router usually default route listed destination netmask equivalent command netstat show existing tcp connection open udp socket netcat thenetcat program called nc allows user create tcp udp connection send line text forth seldom included default netcat netcat wireshark convenient combination packet capture packet analysis tcp wireshark using example wireshark originally named etherreal earlier program dump wireshark greatly expanded support decoding wireshark tcpdump support live packet capture reading packet capture generation Ô¨Åles wireshark program listed desired monitor packet remote involved egon linux logging s local using ssh enables forwarding starting wireshark useful utility introduction computer network release perhapssudo wireshark command line alternative include tcpdump tshark wireshark distribution support facility wireshark finally termshark frontend tshark offer interface reasonably similar wireshark s graphical interface ietf osi internet protocol discussed deÔ¨Åned internet engineering task force ietf aegis internet architecture board iab turn aegis internet society isoc ietf publishes request comment rfc document contain formal internet standard available http note time document appears actual period generally long closed model closely associated ietf ofÔ¨Åcial standard rfc standard allow modest Ô¨Çexibility mind rfc declares ofÔ¨Åcial standing word feature labeled absolute requirement speciÔ¨Åcation term used exist valid reason particular circumstance ignore particular item implication understood carefully weighed choosing different course original arpanet network developed government s defense advanced research project agency darpa went online national science foundation began nsfnet largely replaced arpanet operation nsfnet backbone turned ansnet private corporation isoc founded nsf continued retreat networking business hallmark ietf design approach david clark s declaration reject king president voting believe rough consensus running code rfc editor jon postel s robustness principle stated rfc form tcp implementation follow general principle robustness conservative liberal accept postel s aphorism shortened liberal accept conservative send come occasional criticism recent year regard cryptographic protocol lax enforcement lead security vulnerability fair postel wrote era protocol speciÔ¨Åcations failed fully spell rule possible situation implementation failed interoperate just happen tcp packet arrives syn bit set creating new connection fin bit terminating connection tcp speciÔ¨Åcations today generally complete cryptographic protocol moreso way read postel s rule protocol implementation strict necessary stricter persistent false notion architecture ip department defense mandate original arpanet built survive nuclear attack fact developer ip unconcerned paul baran did write paper outlining concept packet switching overview networksan introduction computer network release number station sufÔ¨Åciently large shown highly survivable structure built thermonuclear era international organization standardization iso founded open system tion project osi process creation new network standard osi represented attempt creation networking standard independent individual government osi project today best known networking model transport application inserted session andpresentation layer session layer handle session application including graceful closing connection included tcp broken connection tcp sorely use presentation layer handle thing like deÔ¨Åning universal data format egfor binary numeric data character set eventually came include compression encryption data presentation session management important concept case proved essary particularly useful make true layer layer approach helpful organizing networking software separate section hard deÔ¨Åne precisely approach declare layer communicate directly layer immediately application pass data transport layer receive transport header pass data ip layer receive ip header lan layer layer seen encapsulated software object module layer layer turn encapsulates packet ent layer adding new header true transport ip lan layer irregularity checksum example need information ip layer fact end calculated lan layer udp ip address tcp ofÔ¨Çoading allowing kind irregularity hard justify layer status session presentation action happens application layer manages port connection responsible reading writing data directly transport layer application us conventional library presentation action encryption compression format translation session action handling broken transport connection plexing stream data single transport connection version http protocol example contains subprotocol managing multiple stream generally regarded application layer reason available application opposing view possible view service tl example true presentation layer application generally read write data directly endpoint turn encapsulates software module underlying tcp connection encapsulation incomplete application generally responsible creating tcp connection tl programming example note end tlsserver end model reasonably popular architecture standpoint extra layer aren t really league model osi version ip tcp ip equivalent clnp connectionless network protocol osi deÔ¨Ånes oriented protocol cmns tcp equivalent osi deÔ¨Ånes network clear primary reason osi protocol failed marketplace ponderous bureaucracy protocol management principle protocol completed implementation began insistence rigid adherence speciÔ¨Åcations point postel s aphorism intended response point contrast ietf osi introduction computer network release ietf working implementation rule protocol draft standard rfc speciÔ¨Åcation independent interoperable implementation different code base developed sufÔ¨Åcient successful operational experience obtained elevated draft standard level emphasis added rule facilitated discovery protocol design weakness early problem Ô¨Åxed osi approach striking failure waterfall design model competing ietf s cyclic prototyping model worth noting ietf similarly unable rapid change html particularly browser end osi mistake evident retrospect trying Ô¨Åt protocol speciÔ¨Åc layer futile irrelevant perspective time protocol rtp life transport layer just udp layer rtp application layer part rtp protocol resemble session presentation layer key component ip protocol set various protocol freely use layer similarly tunneling considered protocol tunnel created maintained application layer approach understanding layer view instead part protocol graph following diagram protocol sublayers transport layer udp rtp protocol arp easily assigned layer ip atm lanethernet lanarp tcp transportudp transportrtp transport fig protocol graph tcp ip atm ethernet note wasp waist ip layer protocol protocol ip layer universality ip layer thing contributing ip s success overview networksan introduction computer network release berkeley unix ofÔ¨Åcially tied ietf berkeley unix release facto reference tions protocol bsd berkeley software distribution released descendant today include freebsd openbsd netbsd tcp implementation tcp tahoe tcp reno tcp reno congestion management took name corresponding release epilog completes tour basic remaining chapter expand material exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution overview network forwarding table switch following network destination b c column neighbor appropriate link interface number b c forwarding table switch following network destination b c use neighbor form interface form try route destination short possible decision exercise did arise preceding exercise network previous exercise suppose destination directly connected immediate neighbor reached neighbor s forwarding table include xb xd leaf route diagonally opposite node undetermined c matter entry chosen diagonally opposite destination routing loop formed hint number link diagonally opposite switch forwarding table switch following network destination route length minimum possible hop immediate neighbor hop berkeley unix introduction computer network release destination immediate neighbor list direct orlocal simplicity indicate destination choice dc eb consider following arrangement switch destination forwarding table neighbor form include default forwarding entry default entry point default entry automatically forward possible destination shown right eliminate table entry implied default entry default entry eliminate entry hop d possible destination e switch arranged destination forwarding table assuming packet adjacent node sent connecting link packet diagonally opposite node sent clockwise b forwarding table assuming link used trafÔ¨Åc suppose switch destination switch self table value speciÔ¨Åed neighbor form conclude directly connected table list similarly directly connected overview networksan introduction computer network release given table consistent network diagrammed exercise table consistent network notdirectly connected network explain connected b suppose s table changed following network layout consistent table directly connected add additional switch table given assume forwarding doe work correctly notassume path shortest possible hint follows table path start √Ω√± path continue switch path hypothesis directly connected suppose network follows path c passing b abc explain single routing loop include hint loop involves destination d doe b forward d b suppose routing loop follows path sna s iare equal s imust distinct corollary routing loop created forwarding involves forwarding forth pair adjacent switch involves actual graph cycle network topology linear loop length greater impossible consider following arrangement switch suppose forwarding table following destination suppose packet sent destination b b c c d e e f f switch packet pas including initial switch Ô¨Ånal switch exercise introduction computer network release b c d e f b d e f b c e f c e f b c d e f b c d e f suppose set node switch connected shown link switch labeled weight used routing application weight represent cost using link Ô¨Ånd path lowest total cost smallest sum weight following transmission example path e total cost alternative path total cost b a√±d c a√±c d complete forwarding table s route selected lowest total cost exercise route taken packet reasonably direct route e f circuitous assign weight seven link exercise destination e s route exercise optimum lowest total link weight path b assign weight seven link make destination f s route exercise optimal different set weight hint assigning weight link bad link bad link weight b route taken route avoids bad overview networksan introduction computer network release link treat entirely differently b assignment weight account route suppose following class c ip network joined router nection outside internet forwarding table router network directly connected router include network table list hop direct orlocal exercise introduction computer network release overview ethernet basic turn deeper analysis ubiquitous ethernet lan protocol chapter cover universal ethernet concept encountered residential ethernet setting including switching learning following chapter cover advanced feature algorithm virtual lan ethernet hardware networking current ethernet today usually mbps gigabit gigabit gigabit ernet standard server room backbone potential packet collision make ethernet speed scale odd way start mbps formulation mbps speed obsolete ethernet collision mechanism largely obsolete collision management continues play signiÔ¨Åcant role wireless network original ethernet speciÔ¨Åcation paper metcalfe boggs data rate megabit second connection coaxial cable instead today s twisted pair author described passive architecture follows afford redundant connection dynamic routing packet switching assure reliable communication choose achieve reliability plicity choose make shared communication facility passive failure active element tend affect communication single station classic ethernet simple passive basic form ethernet medium long piece coaxial cable station connected tap station happened transmit time likely waiting station Ô¨Ånish signal lost resultant collision active component station repeater originally intended simply make join cable segment repeater soon evolved multiport device allowing creation arbitrary tree topology point standard wiring model shifted long cable snaking host host star network host connected directly central multipoint repeater shift allowed replacement expensive coaxial cable twisted pair link long did need repeater forwarded collision soon gave way switch did ethernet switch switch partitioned ethernet disjoint collision domain physical ethernet collision propagate aggregation physical ethernet connected switch known virtual ethernet collision domain smaller smaller eventually individual link vanishing entirely early change ethernet implemented true redundant connection instant topology required ethernet did adopt mechanism idle backup link quickly placed service primary link fails spanning tree algorithm redundancy finally early century support redundant connection looping topology arrived form trill spb trill spb introduction computer network release classic ethernet originally ethernet consisted long piece cable possibly spliced repeater station transmitted data went cable arrangement known broadcast bus packet physical layer broadcast shared medium seen theoretically node logically packet appear transmitted point broadcast station cpu cable peripheral device card known network interface care detail transmitting receiving network interface doe decide received packet forwarded host cpu interrupt b c d ni ni ni ni fig host cable network interface station transmitted time signal collide interfere transmission fail result proper handling collision essential strategy shared medium order minimize collision loss station mented following transmission wait line quiet transmitting continually monitor line sign collision occurred collision detected cease transmitting collision occurs use strategy property summarized acronym carrier sense multiple access sion detect term carrier sense used metcalfe boggs synonym signal sense literal carrier frequency sensed emphasized collision normal event ethernet mechanism ieee network standard ieee network standard begin ethernet wimax encounter claim represents date early meeting february ieee continuous stream standard occasional gap handling disposal transformer pcbs aircraft rotating machine recommended practice unique identiÔ¨Åcation power plant classic ethernet came version version dix ieee minor electrical difference substantial difference addition berkeley unix packet format used ethernet basicsan introduction computer network release physical format mbps ethernet cable coax coax arrive twisted pair coax original economics drove successive development later cheaper cabling eventually entirely displaced coax host connection original speciÔ¨Åcation included support repeater effect signal ampliÔ¨Åers attempt clean noisy signal repeater processed bit individually did buffering telecom world repeater called digital regenerator repeater port commonly called hub hub allowed branching complex topology rise hub enabled star topology host connects directly hub long run coax turn enabled cable supported maximum run meter versus meter coax run simply host central hub wiring closet convenient having snake coax building hub failure bring network hub proved largely reliable bridge later known switch came short time later repeater act bit layer switch read forward entire packet unit destination address consulted packet forwarded possible performance issue hub switch interchangeable eventually hub replaced switch hub propagate collision switch signal representing collision arrive port hub like signal retransmitted port switch detect collision port port involved packet received successfully retransmitted port originally switch seen providing interconnection bridging separate physical net switch purpose needed just port later switched ethernet seen large virtual ethernet composed smaller collision domain term switch common bridge use particularly ieee switch bridge port distinction relatively meaningless year bridge manufactured return switching ethernet switch original cabling connection tap literally drilled coax central conductor coax allowed use attach host doe allow attachment used link host switch hub cable attachment simply way avoiding need active device like hub switch role hub today want monitor ethernet signal b egfor intrusion detection analysis switch support form monitoring cable format interconnect repeater hub used mbps transmission speed cable used mbps ethernet generally need version known category versus mbps category data mbps ethernet transmitted using manchester encoding manchester meant electronics operate effect mbps faster ethernet use different encoding classic ethernet introduction computer network release ethernet packet format format typical ethernet packet dix speciÔ¨Åcation used newer faster ethernet dest addr src addr type data crc fig ethernet packet header Ô¨Åelds destination source address quantity type bit data length variable maximum byte Ô¨Ånal crc checksum bit checksum added ethernet hardware host software preamble shown block bit followed packet synchronization type Ô¨Åeld identiÔ¨Åes higher protocol layer common type value ip ipx arp ieee speciÔ¨Åcation replaced type Ô¨Åeld length Ô¨Åeld change caught format distinguished long type value used larger maximum ethernet length type value given previous paragraph meet condition ethernet maximum packet length byte worked past inconveniently small gbit speed byte facto maximum packet size internet just ethernet lan increasing difÔ¨Åcult tcp tso tcp ofÔ¨Çoading alternative ethernet card hopefully unique physical address rom default packet sent address received board passed host packet addressed physical address seen card ignored default ethernet device agree broadcast address s packet sent broadcast address delivered attached host possible change physical address given card software universally possible given card promiscuous mode meaning packet network matter destination address delivered attached host mode originally intended diagnostic purpose best known security breach open unusual Ô¨Ånd host network board promiscuous mode process collecting Ô¨Årst byte presumably including userid password telnet connection ethernet multicast category ethernet address multicast used transmit setof station streaming video multiple simultaneous viewer use ethernet multicast bit Ô¨Årst byte address indicates address physical multicast receive packet addressed given multicast address host inform network interface wish arriving packet addressed multicast address forwarded host set subscriber given multicast address called multicast group protocol prefer subscribing host notiÔ¨Åes host egthe sender required easiest way learn multicast address involved host subscribe multicast address receive copy multicast packet transmitted ethernet basicsan introduction computer network release able list case network interface forward received packet attached host destination address received packet match physical address interface destination address received packet broadcast address interface promiscuous mode destination address received packet multicast address host told network interface accept packet sent multicast address switch involved normally forward multicast packet outbound link exactly broadcast packet switch obvious way telling multicast subscriber avoid switch try engage form multicast Ô¨Åltering snooping multicast protocol multicast ethernet seldom used play larger role conÔ¨Åguration ethernet address internal structure bit physical ethernet address indicates address believed globally unique locally unique known bit real ethernet physical address multicast bit Ô¨Årst byte physical layer ethernet transmits bit byte serial protocol hdlc hdlc ubiquitous serial protocol mean Ô¨Çag bit fact Ô¨Årst address bit transmitted clear important global ethernet id assigned physical ethernet card manufacturer Ô¨Årst byte serve indicate manufacturer allocated ieee ofÔ¨Åcially known asorganizationally unique identiÔ¨Åers looked site internet identify manufacturer associated given ethernet address ofÔ¨Åcial ieee site ouis entered colon long manufacturer involved diligent assigning second byte provided ethernet address globally unique lapse unheard ethernet address virtual machine distinct ethernet address host egwith bridged conÔ¨Ågurations visible lan host s address Ô¨Årst byte virtual ethernet address taken oui assigned manufacturer card emulated byte set randomly conÔ¨Åguration principle bit address locally unique ignored entirely possible virtual ethernet address assigned local meaning appears common lan layer lan layer upper end supply network layer mechanism addressing packet sending station lower end handle interaction physical layer classic ethernet introduction computer network release lan layer cover packet addressing delivery receipt forwarding error detection collision detection retransmission attempt ieee protocol lan layer divided medium access control mac sublayer higher logical link control llc sublayer function llc layer deÔ¨Åned ieee standard versus mac layer applicable lan ethernet llc function entirely supplanted transport layer egtcp llc layer deÔ¨Ånes doe mandate form hdlc col hdlc turn support sliding window sliding window option lan protocol offered partial support hdlc similarly atm asynchronous transfer mode atm support function sliding window use llc layer insigniÔ¨Åcant tions fact mac sublayer common identify lan layer mac sublayer especially ieee protocol mac layer ofÔ¨Åcial standing particular address called mac address generally speaking operation layer take place network card host system including driver example generally oblivious collision query card collision statistic case egwith rate scaling dynamic rate scaling driver involved slot time collision thediameter ethernet maximum distance pair station actual total length cable greater example topology star conÔ¨Åguration maximum allowed diameter measured bit limited sample budget make bit station involved collision discovers transmits special jam signal bit jam bit bring total bit byte time send bit slot time ethernet time interval ethernet described bit time conventional time unit slot time ¬µsec value slot time determines subsequent aspect ethernet station transmitted slot time collision occur unless hardware error remainder packet slot time time station realized Ô¨Årst station started transmitting time wait Ô¨Årst station Ô¨Ånish slot time station said acquired network slot time used basic interval retransmission scheduling conversely collision canbe received principle point end slot time result ethernet minimum packet size equal slot time byte byte data portion station transmitting packet size assured ifa collision occur sender detect able apply retransmission algorithm smaller packet collide sender know ultimately leading greatly reduced throughput need send byte data example tcp ack packet ethernet packet padded minimum length result protocol running ethernet need provide way specify actual data length inferred received packet size speciÔ¨Åc example collision occurring late possible consider diagram b ethernet basicsan introduction computer network release unit apart bandwidth begin sending helloworld b start sending just s message arrives b listened transmitting s signal evident doesn t discover collision unit elapsed twice distance b b b b b b b bh eh eh l e hl l ll o ol le ehha just starting send just collision b see line idle b transmits collision b b b bow l l wo o lcollision propagates detects collisiond fig ethernet collision showing rtt collision detectability typical maximum value delay mbps ethernet various component taken dix standard link cable replaced standard cable dix speciÔ¨Åcation allows coax repeater cable table show coax repeater following later ieee ethernet speciÔ¨Åcation obscure delay eliminated entry delay time bit maximum path repeater transceivers simple electronic device coax cable ni card drop cable transceivers repeater plus endpoint ethernet delay budget item length delay bit explanation c speed light coax m bit transceiver cable m bit transceivers bit max unit bit repeater bit max unit bit dix encoders bit max unit bit signal generation total bit accounting number shown little high signal rise time delay sense delay timer delay omitted work fairly closely implicit delay budget table length bit speed propagation copper speed light vacuum microsecond time send bit mbps signal propagates approximately meter classic ethernet introduction computer network release ethernet packet maximum packet size byte limit primarily sake fairness station unduly monopolize cable station reserve buffer guaranteed hold entire packet time hardware vendor marketed incompatible extension ethernet enlarged maximum packet size kb technical reason actually compatibility signal loss single segment cable limited db original strength repeater restore signal original strength reason length restriction ethernet collision detection requires strict limit remote signal allowed lose strength possible station detect reliably read weak remote signal time transmitting locally exactly collision detection work remote signal arrive sufÔ¨Åcient strength heard receiving station transmitting limit overall length limit set ensure sender guaranteed detecting collision sends packet exponential backoff algorithm collision exponential backoff algorithm operating mac layer used determine station retry transmission backoff called exponential range backoff value chosen doubled successive collision involving packet ethernet transmission algorithm including backoff retransmissions listen transmitting carrier detect line busy wait sender stop wait additional microsecond bit consequence gap packet packet run transmit simultaneously monitoring collision collision doe occur send jam signal choose backoff time follows transmission n represents original attempt choose k randomly wait k slot time ¬µsec check line idle waiting necessary Ô¨Ånish retry step choose k randomly reach transmission attempt ethernet sender doe reach step high probability packet delivered successfully exponential backoff mean host waited Ô¨Ånish transmit simultaneously collide chance recollision chance maximum wait millisecond cutoff maximum wait second indicated discussion retransmission strategy assumes sender able detect collision sending know packet resent following diagram example station attempting transmit using algorithm sort actually get acquire channel assume Ô¨Åve prospective sender waiting sixth station Ô¨Ånish assume collision detection take slot time node closer ethernet basicsan introduction computer network release slot station synchronized allows measure time slot solid arrow start slot mean sender began transmission slot red x signiÔ¨Åes collision collision occurs backoff value k shown underneath dashed line show station waiting k slot attempt slot slot slot slot slot attempt transmit collision fig ethernet collision exponential backoff assume transmitting station Ô¨Ånishes ai transmit collide ai discovered collision chooses random k let assume chooses chooses chooses chooses chooses station choosing retransmit immediately mean collide choose random k assume chooses chooses try try original transmitting second time trying time collide let suppose chooses chooses chooses chooses choosing k random scheduled transmission attempt time attempt transmit station transmit successfully seizes channel time roll check channel listen Ô¨Årst wait Ô¨Ånish check channel begin waiting Ô¨Ånish maximum host allowed ethernet number apparently come maximum range backoff time host simultaneously trying send backoff range reached k good chance station succeed seizing channel minimum value random k s chosen unique backoff algorithm fair sense longer station waiting send lower priority sink newly transmitting station need delay ethernet capture effect illustrates unfairness classic ethernet introduction computer network release capture effect capture effect scenario illustrating potential lack fairness exponential backoff algorithm unswitched ethernet fully busy sender packet ready transmit let b busy node simultaneously starting transmit Ô¨Årst packet collide suppose win sends Ô¨Ånished b try transmit second packet try chooses backoff k inclusive b second attempt choose k mean favored win suppose doe transmission Ô¨Ånished b try Ô¨Årst attempt packet b attempt Ô¨Årst packet chooses k b choose k time likely win time b fails win given backoff probability winning reduced quite possible doe occur practice b lose allthe backoffs reach maximum attempt lost Ô¨Årst fact quite likely point b simply discard packet go n reset k chosen capture effect Ô¨Åxed appropriate modiÔ¨Åcation backoff algorithm binary mic arbitration method blam proposed blam algorithm considered mbps fast ethernet standard end hardware strategy won fast ethernet support mode mbps fast ethernet fast ethernet continues support original mode assumed site concerned performance worried capture effect opt hub topology ethernet hub multiport repeater change topology fundamental constraint hub enabled model station link wiring closet loop forbidden maximum diameter ethernet consisting multiple segment joined hub constrained need detect collision sender completed sending network diameter maximum distance host longer synonymous total length link shorter meter diameter constraint immaterial error packet bit Ô¨Çipped garbled electrical noise cable estimate frequency occurs range bit error uniformly likely occur likely occur burst packet lost hub appears likely packet lost collision sending host make unsuccessful transmission attempt give ethernet packet contain crc code cyclical redundancy check crc detect bit error packet misaddressed sending host likely arrive receiving host point receiver free buffer dropped protocol ethernet basicsan introduction computer network release csma persistence transmission strategy said nonpersistent line busy sender wait randomly selected time strategy waiting line clear sender sends probability p ethernet us consequence station waiting line clear line doe clear collision certain ethernet gracefully handle resulting collision usual exponential backoff n station waiting transmit time required station win backoff linear consider mechanism collision handled quite cheaply thing way detect collision progress entire time wasted case used p ethernet broadcast storm said occur transmission attempt available bandwidth tied collision properly functioning classic ethernet effective bandwidth nominal capacity attempt transmit typically resulted successfully transmitting good deal analysis classic ethernet time doe ethernet waste collision paradoxical attribute ethernet raising rate busy segment reduce actual throughput transmission attempt lead longer contention interval packet sender use transmission backoff algorithm attempt acquire channel effective throughput achieved convenient refer time packet transmission contention interval actual contention network idle tell station transmitting send simply waiting backoff timer expire timeline ethernet consists alternating packet transmission contention interval contention contention contention contention packet packet packet packet fig ethernet packet transmission alternating contention interval Ô¨Årst look contention interval assume n station waiting transmit start interval turn follow exponential backoff algorithm expect o n slot time station successfully acquires channel ethernet happiest n small station simultaneously transmitting multiple station necessarily severe problem number slot time needed turn slot time short slot time byte packet time byte packet interval byte contention interval bye give overall throughput capacity practice reasonable upper limit throughput classic ethernet classic ethernet introduction computer network release aloha model approach analyzing ethernet contention interval using aloha model precursor ethernet aloha model station transmit packet listening Ô¨Årst quiet line monitoring transmission collision model situation ground station transmitting satellite ground station presumed unable similarly ethernet contention interval station transmit packet effectively condition return aloha model yield roughly similar throughput value o n model previous section make artiÔ¨Åcial assumption large number active sender transmitting low rate model limited direct applicability typical ethernet model success rate aloha assume packet size let t time send packet t represents aloha slot time Ô¨Ånd transmission rate optimizes throughput core assumption model large number n host transmitting relatively low rate s denote g average number transmission attempt slot g n derive expression s average rate successful transmission slot term packet overlap transmission lost successful transmission requires quiet interval sender succeeds interval t node tried begin transmission interval probability station transmitting interval time t g n probability remaining station quiet interval probability successful transmission s n g math warning finding limit g Ô¨Ånding maximum requires little ground calculus central applying model n get large second line approach function s g maximum rate mean average transmission attempted slot yield maximum throughput word maximum attempt rate expect slot time worth contention successful transmission happens remaining unsuccessful attempt addressed model presumably mechanism egbackoff lead retransmissions given throughput s achieved value g given success rate comparable attempt rate high attempt rate similarly high failure rate ethernet basicsan introduction computer network release aloha ethernet relevance aloha model ethernet ethernet slot time way detect collision haven t reached sender ethernet contention phase resembles aloha aloha slot time t microsecond ethernet sender succeeds continues packet transmission presumably time longer average length contention interval maximum throughput calculated slot time aloha recall model supposed sender sending low individual rate minimum contention interval lower load contention interval longer greater idle time higher load contention interval longer collision finally let p time send entire packet unit t iethe average packet size unit p length packet phase diagram contention phase length total time send packet time useful fraction course p effective maximum throughput microsecond bit byte byte effective bandwidth effective bandwidth byte model calculates effective bandwidth number quite similar earlier value based small number station sending constantly mbps fast ethernet classic ethernet mbps quite slow modern standard ieee created standard ethernet operated mbps ethernet speed commonly known fast ethernet used today fast ethernet supplanted gigabit ethernet far popular form mbps ethernet ofÔ¨Åcially known operates cable previous analysis mbps ethernet bandwidth minimum packet size maximum network diameter interrelated order ensure collision detected sender increasing speed mean constraint scaled example network physical diameter remain moving mbps time microsecond larger measured bit mean minimum packet size byte instead byte actually minimum packet size somewhat smaller partly jam signal doesn t longer partly number mbps delay budget larger necessary large substantial bandwidth consumed padding designer fast ethernet felt large size impractical fast ethernet developed time reliable switch widely able quote ethernet basic obsolete large virtual ethernet network formed connecting small physical ethernet switch effectively eliminating need support physical ethernet instead increasing minimum packet size decision ensure collision detectability reducing network diameter instead network diameter chosen little meter reduction account presence hub mbps fast ethernet introduction computer network release meter bit bit slot time minimum packet size remains bit ¬µsec safely large ensure collision detection diameter misleading speciÔ¨Åc standard us category cabling better limit length individual cable segment meter maximum network diameter allowing hub just meter distance doe apply mode common limit meter small amount case single hub multiple cable segment radiating practice star conÔ¨Ågurations easily joined switch ethernet switch switch partition ethernet separate collision domain rule apply domain separately aggregated fully switched hub lan collision domain simply single link subject maximum length fast ethernet introduced concept ethernet twisted pair used direction ethernet limited path involving hub single station link station host switch link potential sender sender transmit line ethernet entirely fast ethernet form us encoding covered mean electronics handle mbps versus mbps manchester encoding used fast ethernet doe particularly support link building limitation link effective alternative provided used avoid collision mentioned standard allowed maximum run meter likely use duplex maximum cable length rise meter gigabit ethernet problem scaling ethernet handle collision detection get harder transmission rate increase continue maintain ¬µsec slot time raise transmission rate mbps maximum network diameter meter instead gigabit ethernet moved ¬µsec slot time version short frame need padded padding hardware gigabit ethernet us encoding support special pad pattern symbol appear data hardware pad frame special pattern receiver infer unpadded length set host operating gigabit v disk network reached gigabit speed network generally fast reading writing disk keeping data node longer slows thing greatly expands range possibility constructing thing like clustered database ethernet basicsan introduction computer network release gigabit ethernet slot time largely irrelevant bidirectional operation supported combined restriction length cable link hub longer allowed mean collision simply occur network diameter longer concern gigabit ethernet ofÔ¨Åcially abandoned pretense supporting collision actually multiple gigabit ethernet standard fast ethernet different dard apply different cabling situation formulation good mile version maximum cable length theory make original slot practical common gigabit ethernet copper wire incorrectly referred exists tx requires category cable seldom used device labeled tx fact twisted pair cable used pair transmits mbps pair bidirectional supporting communication bidirectional communication single wire pair take careful echo cancellation end using circuit known hybrid effect allows detection incoming signal Ô¨Åltering outbound signal cable pair Ô¨Åve signaling level used transmit symbol rate data rate symbol theory require signaling level Ô¨Åfth symbol allows redundancy used error detection correction avoiding long run identical symbol supporting special pad symbol mentioned encoding known modulation target bit error rate ber meaning packet error rate developing faster ethernet speed economics play important role technology new speed reach market earliest adopter pain buy card switch cable known work effect amount installing proprietary lan real beneÔ¨Åt ethernet arguably isstandardized eventually site mix match card device having given ethernet standard support existing cable important economically cost replacing cable dwarf cost electronics ethernet speed continue climb harder harder host system result common quite bit processing ofÔ¨Çoaded ethernet hardware example tcp checksum calculation tcp ofÔ¨Çoading ethernet switch switch join separate physical ethernet ethernet kind network switch ethernet interface packet received interface retransmitted interface valid packet forwarded collision notpropagated term collision domain used region ethernet switch given collision propagates collision domain diagram show physical ethernet joined switch host b c d separate traditional ethernet host e f direct link respectively link link b transmit time c d packet collide usual c transmit receives ethernet switch introduction computer network release packet separate interface parallel collide forward c s packet lefthand interface time forward s packet righthand interface ab c fig ethernet switch similarly e f transmit time packet received respectively absence forwarding information Ô¨Çood e s packet lefthand downward face parallel section real switch learn forwarding information forward f s packet upwards interface possible e f s packet collide vertical link possible link able handle ous transmission opposite direction usual mechanism allow e s packet reach f s reach switch revolutionized ethernet layout rule including rule mum network diameter apply collision domain larger virtual ethernet created stringing collision domain switch shall switched ethernet offer resistance eavesdropping ethernet switch cost s author installed ethernet switch called bridge cost cfthe quote ethernet basic today wide variety multiport ethernet switch available installed ethernet fully switched like simpler unswitched ethernet topology switched ethernet principle required free practice switch support protocol algorithm spanning tree algorithm redundancy automatically prune network topology make allowing pruned link placed service primary link fails switch doe propagate collision maintain queue outbound interface case need forward packet moment interface busy rare occasion packet lost queue overÔ¨Çows ethernet doe principle support pause management frame switch queue grown large principle transmit trafÔ¨Åc source pause trafÔ¨Åc period time speciÔ¨Åed pause frame pause frame appear rarely used ethernet basicsan introduction computer network release ethernet learning algorithm traditional ethernet switch use datagram forwarding described datagram forwarding trick build forwarding table cooperation ordinary host extent switch act replacement hub count cooperation switch solution switch start forwarding table incrementally build table learning process switch doe entry particular destination fall Ô¨Çooding forward packet interface packet arrived called unknown unicast Ô¨Çooding equivalent treating destination broadcast address availability unknown destination make possible ethernet switch learn forwarding table host communication coordination learning process ieee standard occasionally referred transparent bridging switch learns address location follows interface switch maintains table physical mac address appeared source address packet arriving interface switch know reach address later show destination address packet need sent interface speciÔ¨Åcally packet arrives interface source address s destination unicast address d switch enters x iyinto forwarding table actually deliver packet switch look destination d forwarding table entryxd jywith d known reached interface j switch forward packet interface packet arrived interface destination reached packet doe forwarded presumably arrived interface interface connected shared ethernet segment contained d contained switch bring packet closer entry d switch Ô¨Çood packet interface j j represents fallback Ô¨Çooding short alternative needed switch learn active host located switch implementation forwarding table include timestamps entry removed used say Ô¨Åve minute destination address d broadcast address switch multicast address broadcast Ô¨Çooding required switch try track multicast group forward multicast trafÔ¨Åc interface known subscriber ethernet multicast b ca c cab b b cc fig learning switch packet transmission diagram switch s table indicated listing near interface destination ethernet switch introduction computer network release tiÔ¨Åed mac address known reachable interface entry shown result following packet sends b switch learn sends packet go directly learn b sends b doe know b packet go doe know b packet doe notgo worth observing application layer host commonly identify mac address network use arp address resolution protocol arp translate mac address introduce additional broadcast cause scenario play differently exercise switch notautomatically discover directly connected neighbor doe learn transmits packet switch learned host packet forwarded Ô¨Çooded point packet sent link unnecessarily packet b travel link lie unique path b path unique switched ethernet network loop active one loop existed packet sent unknown destination forwarded loop endlessly practice prevented algorithm spanning tree algorithm redundancy switch additional privacy advantage trafÔ¨Åc doe Ô¨Çow doe need Ô¨Çow harder eavesdrop unswitched ethernet host conÔ¨Ågured receive packet eavesdrop trafÔ¨Åc early ethernet notorious allowing unscrupulous station promiscuous mode capture instance password use network fully switched ethernet host physically see trafÔ¨Åc actually addressed trafÔ¨Åc remains inaccessible privacy protection potentially vulnerable attack known mac ing malicious host transmits large number packet unique fake source address fake address Ô¨Åll switch forwarding table forcing switch discard older legitimate entry turn mean switch use mode imate address allowing eavesdropping common defense mac Ô¨Çooding port security typically port switch limited number entry associated effect entry port ignored port s limit reached hopefully occur legitimate entry port need discarded port security accompanied mechanism specify selected mac address secure meaning removed forwarding table mac Ô¨Çooding occuring encryption defense mac Ô¨Çooding typical large switch room forwarding table fully switched work upper end size range common main size limitation speciÔ¨Åc switching requirement topology disallowing duplicate path provide redundancy broadcast trafÔ¨Åc forwarded switched ethernet grows broadcast trafÔ¨Åc comprises larger larger percentage total trafÔ¨Åc ganization point routing architecture egas subnets common recommendation host lan vlan virtual lan vlan ethernet basicsan introduction computer network release epilog ethernet dominates wired lan layer said lot different form ethernet covering variety cable type speed range spanning order magnitude way ethernet alogical interface encompassing multiple implementation interconnected switch ethernet embraced switching exclusively link ethernet Ô¨Ånally abandon physical link link longer need minimum packet size wired network largely disappeared renamed ethernet wireless network stay time inherited original ethernet s management concern ethernet grown exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution ethernet simulate contention period Ô¨Åve ethernet station attempt transmit presumably sixth station Ô¨Ånished transmitting style diagram exponential backoff algorithm assume time measured slot time exactly slot time needed detect collision station transmit collide chooses backoff time station transmit use coin Ô¨Çips source randomness suppose ethernet switch arranged switch us learning algorithm ethernet switch forwarding table initially b c sends b switch packet b b reply switch packet c c sends b switch packet d c sends d switch packet ethernet switch arranged forwarding table switch us learning algorithm ethernet switch b d epilog introduction computer network release suppose following packet transmission place sends d d sends sends b b sends d switch list source address ega b c d seen node learned location repeat previous exercise network layout instead following packet transmission place sends b b sends c sends b d sends switch list source address ega b c d seen node learned location network Ô¨Ånd packet transmission sion a√Ω√±d occurs packet isseen b Ô¨Çooded port notsimilarly seen c forwarded d Ô¨Çooded forwarding table initially switch us learning algorithm ethernet switch b c hint destination d s forwarding table s packet sent d seen given ethernet network learning switch disjoint unspeciÔ¨Åed part represented explain impossible packet sent b forwarded directly Ô¨Çooded s port diagram ethernet learning algorithm suppose node d connected table shown label diagram know c d sends b ethernet basicsan introduction computer network release b ca c cab b b cc d switch d √±b packet learn d switch notalready know b use suppose ethernet switch connected loop follows interface labeled switch notuse algorithm spanning tree algorithm redundancy suppose attempt send packet destination b unknown Ô¨Çood packet interface happens long s packet circulate suppose want develop new protocol ethernet switch participating vlan track vlan color associated destination forwarding table assume switch know port interface connect switch connect host case know color assigned port suggest way switch propagate information switch b port reserved connection switch used host consider scenario ethernet learning algorithm exercise introduction computer network release b ca c cab b b cc following packet transmission occur sends b sends sends b suppose packet transmission sender Ô¨Årst sends broadcast packet destination sends unicast reply packet roughly arp protocol used translate address ethernet physical address address resolution protocol arp transmission listed destination switch forwarding table ethernet advanced ethernet previous chapter covered basic mechanic ethernet including switching learning chapter examine advanced feature typically encountered primarily installation algorithm virtual lan ethernet switch hardware trill spb software deÔ¨Åned networking openflow Ô¨Årst way tolerate loop underlying link topology loop way sneaking cabling unintentionally potential provide redundancy tree algorithm achieves goal Ô¨Ånding loop physical link deÔ¨Åning logical tree topology pruning away loop virtual lan vlans mechanism disjoint subset host large ethernet sequestered packet exchange controllable condition example sale engineering workstation physically commingled kept logically separate trill spb bring ethernet active embrace loop trafÔ¨Åc intentionally routed multiple path destination typically shortest path multiple path allow redundancy important consideration event link failure networking sdn represents radical step ethernet forwarding placed control program control learning algorithm ethernet learning algorithm minimum allows strategic handling loop topology sdn doe stop enables strategy design control large complex network spanning tree algorithm redundancy theory form loop ethernet switch packet destination present forwarding table circulate endlessly consuming available throughput early switch actually generally regarded catastrophic failure practice loop allow redundancy link break connectivity desirable result ethernet switch incorporated protocol construct subset graph loop allows reachability host known graph theory spanning tree spanning tree built link tree disabled represent efÔ¨Åcient path node link spanning tree fails partitioning network new tree constructed disabled link return service introduction computer network release ask switch work negotiate spanning tree work negotiate forwarding table original topology keeping link active difÔ¨Åculty switch ability coordinate underlying ethernet broadcast feature long topology loop broadcast enabled broadcast packet circulate forever disabling broadcast straightforward option switch rely strategy ethernet learning algorithm deliver unknown destination return point networking exercise presence hub unswitched ethernet segment slightly complicates graph absence graph s node edge simply host including switch link ethernet unswitched ethernet segment present single node graph graph edge switch directly connects ethernet switch participating algorithm treated hub switch id egits smallest ethernet address edge attache switch doe particular numbered interface goal disable redundant cyclical path retaining ability deliver segment algorithm radia perlman switch Ô¨Årst elect root node egthe smallest id given segment connects switch connect root node switch shorter path root used possible event tie switch smaller id used simplest measure path cost number hop current implementation generally use cost factor inversely proportional bandwidth larger bandwidth lower cost switch permit conÔ¨Åguration process dynamic outage occurs spanning tree recomputed outage partition network piece piece build spanning tree switch send regular message interface called bridge protocol data unit bpdus hello message sent ethernet multicast address ethernet physical address interface note ethernet switch need unique physical address interface bpdus contain switch id id node switch belief root path cost egnumber hop root message recognized switch forwarded naively switch process message looking switch lower id receiving switch seen new root shorter path existing root path existing root neighbor switch lower id rule port connect switch port number used additional heterogeneous ethernet introduce preference faster path assume link bandwidth switch see new root candidate sends bpdus interface indicating distance switch includes interface leading root process stabilized switch know advanced ethernetan introduction computer network release path root port switch using reach root port directly connected neighboring switch switch prune interface disables interface enabled following rule enables port reach root enables port switch use reach root remaining port connects segment switch connect port enabled switch minimum cost root tie smallest id neighbor port tied port smaller id port directly connected presumably connects host segment port enabled rule construct spanning tree reach root rule make sure s port open rule make sure s corresponding port open rule ensures network segment connects multiple switch get unique path root connected segment n enables port n doe primary concern create path host node segment n create path rule rule ensures stub segment retain connectivity include host directly connected switch port spanning tree example switch simplify situation somewhat assume network fully switched switch port connects switch host repeater hub coax segment use case dispense rule entirely switch port directly connected host identiÔ¨Åed silent switch receives bpdu message interface host send host port end enabled rule sample network switch number represent id host shown interface number omitted lowest id root directly connected enable interface reach rule enable interface reach rule unique route rule enable interface rule enable interface spanning tree algorithm redundancy introduction computer network release choice hears path root pick neighbor interface enabled similarly enable interface similarly choice selects link enabled strictly speaking interface enabled link case interface link enabled network effect spanning tree example switch segment example involving switch join unswitched ethernet segment consider following network example common segment switch number represent id letter cloud represent network segment cloud include multiple host note switch way detect host switch fc fig switched ethernet potentially multiple host connected switch port eventually switch discover root smallest unique hop away hop away advanced ethernetan introduction computer network release algorhyme think shall graph lovely tree tree crucial property connectivity tree sure span packet reach lan root selected id elected path root traced tree path placed mesh folk like bridge Ô¨Ånd spanning tree radia perlman switch hop root rule enables s port s port s port rule enables corresponding port port respectively algorithm reach port port port smaller number path root switch lower id port enabled port enabled reach root respectively enable port port port port port disabled point port port port port port port rule dealing segment host connect root applying rule enable port network b direct connection root enable port connect way closer root enables connectivity network enable port tied root smaller id enables port s port enabled finally rule enables port connectivity host enables port network f connection port connection point disabled port port port port port using data collected phase additional negotiation bpdu exchange continue detect change topology link disabled used case efÔ¨Åcient use trafÔ¨Åc spanning tree algorithm redundancy introduction computer network release d e sent respective arrival port doe pas ip routing hand us shortest path way ethernet trafÔ¨Åc go root node path root node traditional ieee protocol relatively slow need building phase mean switch Ô¨Årst turned normal trafÔ¨Åc forwarded second faster revised protocol proposed reduce problem issue algorithm rogue switch announce id similar artiÔ¨Åcially small value likely new root leaf switch eavesdrop considerable fraction trafÔ¨Åc goal cisco root guard feature prevent goal related feature topology degree administrative control likely want root switch example geographically somewhat centered backbone link preferred slow link virtual lan vlan different people different place logically tied example loyola university c department split construction building approach continue lan local use ip routing different subnets convenient printer reason conÔ¨Ågure workgroups single virtual lan vlan vlan look like single lan usually single ethernet lan vlan member broadcast packet sent member vlan ultimately considered single ip subnet subnets different vlans ultimately connected likely passing single central ip router broadcast trafÔ¨Åc vlan generally notpropagate vlan isolation broadcast trafÔ¨Åc important justiÔ¨Åcation vlan use exception common rule thumb vlan host size subnet vlans visualized designed using concept coloring logically assign node vlan color switch forward packet accordingly connects red machine blue machine sends broadcast packet go switch course told color port diagram red blue port switch network deliver trafÔ¨Åc source destination port color red packet forwarded blue vlan passing router r entering r s red port leaving blue port r apply Ô¨Årewall rule restrict trafÔ¨Åc source destination port switch need added packet switch track color port trafÔ¨Åc additionally tagged indicate source consider example switch sending packet node red blue trafÔ¨Åc tagged color know port delivered ieee protocol typically used Ô¨Åeld including color tag inserted ethernet header source address type Ô¨Åeld Ô¨Årst bit Ô¨Åeld new ethernet type Ô¨Åeld advanced ethernetan introduction computer network release router fig network switch divided vlans red blue identiÔ¨Åes frame tagged separate amendment allows ethernet packet slightly larger accommodate tag possible allow isp level tagging customer level header support priority Ô¨Åeld packet forwarded cooperating switch using priority queuing priority queuing based Ô¨Åeld relatively large installation packet assigned default priority example use Ô¨Åeld voice packet higher priority data packet example map ip header priority Ô¨Åeld egthe d Ô¨Åeld header priority normally useful isp s network data center dynamic example homa linux support basic conÔ¨Åguration interface vconfig command allows given ethernet interface support vlan tag creation separate virtual interface tag allows assignment priority value used given vlan vlans meant transparent host device finally switch provide way selectively allowing trafÔ¨Åc ferent vlans switch example rule created allow connect use router difÔ¨Åculty approach lack standardization switch manufacturer make difÔ¨Åcult create example authorization application allow opening connection Ô¨Çy issue switch allow rule based mac address example tcp port number openflow protocol openflow switch potential create necessary standardization openflow specialty system developed enable host access dynamic creation appropriate switch rule switch hardware difference inexpensive ethernet switch pricier degree internal parallelism support packet arrive simultaneously port destined respective port switch actually transmit packet simultaneously yes answer gold performance standard ethernet switch packet fast arrive virtual lan vlan introduction computer network release load switch port packet arrive continuously n port depart different n port mean time required transmit packet switch internally forward n packet parallel faster necessary load departing arriving just port example port connected server internet standard n time faster necessary switch need handle packet time switch forced queue outbound packet port doe represent lack performance switch greater parallelism generally viewed good thing switch simplest switch architecture used switch built standard computer model consists single cpu single memory peripheral bus multiple ethernet card packet arrives cpu copy packet arrival interface ram determine forwarding copy packet output interface mbps transmission internal transfer rate mbps maximum speed device depends largely speed bus called bus usb bus operates gbps ethernet speed mbps bus theoretically transfer mbps packet time take packet arrive supporting port total gigabit ethernet packet handled commodity switch switch generally handle degree parallelism bus speed gbps gbps ethernet common datacenters port bare minimum result architecture generally regarded adequate switch high degree parallelism required various architecture known switch fabric implemented common solution problem crossbar switch fabric consisting grid normally open switch node closed cpu control packet travel connected path crossbar directly ethernet interface crossbar allows parallel connection n input n output output fig crossbar parallel connection advanced ethernetan introduction computer network release diagram illustrates crossbar input separate output real ethernet switch port input output relatively inessential difference parallel connection shown input output respectively large dot represent switching element closed state packet transmitted serially switch path saw congestion switch router packet arrive time given output port faster transmitted port excess packet need queued output port crossbar example multiple packet destined output arrive simultaneously queued brieÔ¨Çy input packet delivered parallel queue true switch fabric including simple switch discussed primary queue switch router output packet wait turn transmission need smaller queue packet wait turn enter switch fabric crossbar variation common approach design switch support multiple parallel transfer hardware innovation used switch memory cam allows search forwarding table single memory load switch destination address looked hash table data structure including calculation hash value process long ten memory load brand switch forwarding table referred cam table cam memory consists large number n memory register attached common bus ethernet switching data width bus register need large address size input bus activated memory register simultaneously compare value bus data value match register trigger output line circuit convert number k n register binary value representing address k register straightforward encoder resolve tie choosing example number Ô¨Årst register match b c d e f data input address fig memory virtual lan vlan introduction computer network release diagram data width vertically oriented register numbered hex register contains entry matching data input enables signal encoder output encoder corresponding address common variant cam ternary cam tcam memory register paired corresponding mask register given bit match declared bus bit match register bit orthe corresponding mask bit mask bit represents wildcard value matching input tcam useful address looked ip address ethernet address case goal match address bit corresponding network preÔ¨Åx ip internet protocol setting mask content represents ip address mask subnets order implement rule classless internet domain routing cidr essential address shorter preÔ¨Åxes longer run terminal wildcard bit appear address longer preÔ¨Åxes event multiple match encoder prefers righthand longer match implies new tcam entry inserted relatively speciÔ¨Åc position involve signiÔ¨Åcant shifting position existing entry efÔ¨Åcient lookup trill spb ethernet larger algorithm problem primarily useful link disabled redundancy lost network campus backbone datacenter disabled link wasted resource secondary issue event link failure approach second create new tree restore connectivity address problem protocol allow ethernet active loop topology making use alllinks idea generate forwarding table ethernet switch support appropriate protocol route packet shortest path approximation shortest path physical link remain active service long staple ip world algorithm deÔ¨Ånitely break tradition lan layer competing protocol trill transparent interconnection lot link spb bridging trill documented rfc companion spb standardized ieee focus trill note protocol normally province ieee ietf trill spb envision initially switch smart routing just time switch implemented algorithm time likely eventually ethernet switch aware performance datacenters particularly likely forwarding based trill spb trill ethernet switch known rbridges term rswitches trill switch appropriate rbridges legacy ethernet called link rfc term misleading legacy ethernet consist maximal subnetworks ethernet host switch intent rbridges partition entire ethernet relatively small legacy ethernet ultimate case allswitches rbridges legacy ethernet simply individual host diagram rbridges isolate legacy ethernet legacy ethernet represents degree partitioning inefÔ¨Åciency advanced ethernetan introduction computer network release fig trill network rbridges legacy ethernet legacy ethernet elect single connected rbridge represent unique choice make decision elected rbridge known designated rbridge drb legacy ethernet build spanning tree necessarily rooted designated rbridge trafÔ¨Åc legacy ethernet outside generally forwarded designated rbridge connection rbridges used idea packet legacy ethernet delivered Ô¨Årst source node s drb destination node s drb true forwarding rbridges destination node course ultimate case switch rbridge trafÔ¨Åc shortest path start Ô¨Ånish exception rule forwarding designated rbridge drb gate forwarding task rbridges different vlans legacy ethernet vlan use rbridge outside trafÔ¨Åc second process rbridges Ô¨Ågure overall topology build complete map rbridges interconnection using protocol described algorithm primary protocol ospf trill selected easily adapted setting node necessarily ip address rbridges send appropriate packet using multicast using database ensure packet endlessly packet compared hello message fundamental forwarding rbridge complete map rbridges rbridge calculate optimal route rbridge designated rbridges packet legacy ethernet learn mac address active host usual ethernet learning protocol share address rbridges using protocol rbridges eventually learn reach ethernet address present overall network trill make use delivering previously unknown nation end rbridges negotiate spanning tree covering rbridges packet unknown destination Ô¨Çooded rbridge spanning tree packet reach designated rbridge legacy ethernet Ô¨Çooded spanning tree ethernet process used delivery broadcast multicast packet rbridges talk negotiate compact address known nickname versus standard ethernet address save space trill spb introduction computer network release communication packet travel rbridges special trill header added header includes hopcount Ô¨Åeld present ethernet mean packet caught transient routing loop eventually discarded occasionally generate routing loop rare trill header includes nickname source destination rbridges mean actual packet forwarding rbridges doe involve mac address destination host used packet reached designated rbridge destination legacy ethernet point trill header removed link rbridges fails link s endpoint send update message notify rbridges failure rbridges recalculate forwarding table use broken link recovery time typically second roughly hundredfold improvement recovery time trill support use multiple path improve throughput rbridges cf ecmp datacenter feature important like trill spb us bridge Ô¨Ånd shortest path encapsulates packet special header travel rbridges spb doe include hopcount encapsulation header instead carefully control forwarding spb us original destination mac address forwarding networking trill spb offer way handle scaling problem spanning tree networking sdn offer general approach core idea sdn place forwarding mechanism participating switch aegis controller device capable giving switch instruction forward packet like trill spb approach allows forwarding redundant link coexist controller single node network distributed set node controller manages forwarding table switch handle legitimate broadcast trafÔ¨Åc controller startup probe switch determine layout construct suitable spanning tree switch instructed Ô¨Çood broadcast trafÔ¨Åc link spanning tree link spanning tree used forwarding known destination unlike conventional switch using spanning tree algorithm typically switch see packet addressed unknown destination report controller Ô¨Ågure option trafÔ¨Åc unknown destination Ô¨Çooded spanning tree used broadcast trafÔ¨Åc allows coexist safely use loop topology switch conÔ¨Ågured report new source address controller controller tell switch best route new source sdn controller conÔ¨Ågured simple Ô¨Årewalls disallowing forwarding selected pair node security reason example datacenter customer b multiple node advanced ethernetan introduction computer network release possible conÔ¨Ågure network node belonging customer send packet node belonging customer following section site sdn implementation based standardized module controller software developed locally allowing precise control network functionality control ability combine loop topology ethernet arguably sdn s important feature openflow switch heart sdn ability controller tell switch forward packet look architecture openflow switch openflow speciÔ¨Åc sdn standard created open networking foundation openflow switch speciÔ¨Åcation version openflow forwarding built Ô¨Çow table primary component entry set match Ô¨Åelds set instruction action match succeeds common action include dropping packet forwarding packet speciÔ¨Åed single interface Ô¨Çooding packet setof interface forwarding packet controller modifying Ô¨Åeld packet processing packet Ô¨Çow table match Ô¨Åelds course single entry destination ethernet address include packet include ingres interface number example forwarding entirely partially ip address ethernet address allowing openflow switch act layer switch subnets versus switching resembling ip router matching destination ip address destination tcp port allowing separate forwarding different application routing attribute deÔ¨Åne routing arbitrary routing decision implemented using openflow switch sdn setting ability used segregate trafÔ¨Åc elephant Ô¨Çows example following section matching ethernet source destination address flow table bear rough similarity forwarding table match Ô¨Åelds corresponding destination action corresponding simple case match Ô¨Åeld contains single destination address action forward corresponding switch port normally openflow switch handle broadcast packet Ô¨Çooding forwarding interface arrival interface possible set attribute speciÔ¨Åc interface mean packet designated Ô¨Çooding broadcast sent interface typically spanning tree broadcast trafÔ¨Åc implemented mininet example interface marked used unicast trafÔ¨Åc generally broadcast Ô¨Çooding doe require entry networking introduction computer network release match Ô¨Åelds assigned priority value event packet match entry entry highest priority win entry entry match Ô¨Åelds matching packet priority entry s action forward packet controller packet match entry simply dropped instruction involve modifying mangling packet application vlan coloring virtual lan vlan layer used decrement ttl update checksum header addition match Ô¨Åelds instruction Ô¨Çow table include counter Ô¨Çags time allows Ô¨Çows removed matching packet seen counter allow openflow switch implement constraint egbandwidth limiting trafÔ¨Åc learning switch openflow suppose want implement standard ethernet learning switch ethernet learning algorithm obvious approach use Ô¨Çows matching destination address encounter problem default packet reported controller match suppose switch s see packet host b host report controller installs Ô¨Çow entry s matching destination b real learning switch packet arrives s host c b simply forwarded match b Ô¨Çow entry reported controller mean controller learn address c install Ô¨Çow entry straightforward alternative approach avoids problem match ethernet xdestaddr srcaddr y pair packet b arrives switch s doe match existing Ô¨Çow entry s reported controller learns reached port packet arrived s bport port network suppose sends packet b broadcast packet meant b Ô¨Çow table s s report packet controller shown diagram send s Ô¨Çooded controller record reached s port suppose b responds packet b arrives s entry s report packet controller time controller know learned Ô¨Årst packet s reach port controller know packet b reached port knowing forwarding rule controller installs entry s forward port forward port packet host cnow arrives s addressed b forwarded destination address match Ô¨Årst rule source address doe match instead sent controller ultimately Ô¨Çooded b responds c controller install rule packet c reported controller advanced ethernetan introduction computer network release s Ô¨Çow rule controller learn c position install Ô¨Çow rule reaching pair approach openflow learning pretty optimal single table available problem approach doe scale address network need pair possible forwarding prohibitive examine real implementation python pair approach using mininet network emulator pox controller mininet compact approach use multiple Ô¨Çow table matching destination matching source version controller remember partial forwarding information controller version receiving Ô¨Årst packet packet arrives matched Ô¨Årst table action speciÔ¨Åed match carried action request repeat match second table lead second set action repeat √±b b√±a example letting t Ô¨Årst table t second initially packet seen controller installs following match rule s match Ô¨Çood send t match send controller effect default rule packet Ô¨Åelds match match packet low priority ensures rule used available packet b arrives t mean packet Ô¨Çooded b t mean packet sent controller controller installs following rule s match forward port send t match b sends reply Ô¨Årst rule match packet forwarded s resubmitted t t immediately doe notmatch match original default rule packet sent controller controller installs rule s match forward port send t match point b continue communicate t ensure proper forwarding t rule ensure packet Ô¨Çow sent controller note controller installs address t t list address present table identical t match destination t match source address version appears application multiple Ô¨Çow table involves switch make prioritization decision packet s destination using Ô¨Årst Ô¨Çow table priority matching second table packet forwarded port determined Ô¨Årst table using priority determined second table like building learning switch single table listing combination xdestaddr priority y s entry networking introduction computer network release mentioned sdn controller used Ô¨Årewalls level tedious conÔ¨Ågure taking advantage openflow s understanding ip address forward example block trafÔ¨Åc different ip subnets like router openflow allows blocking trafÔ¨Åc speciÔ¨Åc pair host using speciÔ¨Åc protocol example want customer s web server able communicate s database server using standard tcp port blocking trafÔ¨Åc openflow example emulating learning switch straightforward openflow application tually support ethernet topology contain loop quite generically controller doe need special awareness network topology startup switch instructed controller report neighboring switch tion controller able form complete map switch topology way implement controller order switch send special marked packet port receiving switch report packet controller controller know switch topology calculate spanning tree instruct switch Ô¨Çooded packet sent port correspond link spanning tree location destination host learned controller controller learns switch host directly connected controller calculates shortest application support differential link cost path switch host controller instructs switch forward host forwarding likely use link spanning tree unlike traditional ethernet switch outline implementation strategy interconnection fabric previous example quite general work switch topology flow application require controller contains prior knowledge switch topology example present refer interconnection fabric network illustrated upper switch connects directly lower switch row diagram represents server rack interconnection fabric form common datacenters datacenter example facebook example facebook example connected using routing switching sdn bgp interior routing facebook refers fabric spine plane red blue number diagram identify switch port Ô¨Årst row contain loop omitting row having connect directly server rack doe eliminate loop previous example described handle loop switched network computing spanning tree allowing packet Ô¨Çooding spanning tree certainly possible allow algorithm prune loop lose parallelism layer exercise generic approach want start let assume represent entry point goal route trafÔ¨Åc entering switch port appropriate server rack trafÔ¨Åc Ô¨Çow row advanced ethernetan introduction computer network release use ip routing algorithm need cluster server rack separate ip subnets subnets technically possible doe mean subnets allocated based physical rack location particular logical organization openflow approach assume cluster server rack form single ip subnet conÔ¨Ågure openflow trafÔ¨Åc subnet forwarded upwards trafÔ¨Åc tothe subnet forwarded downwards simpler solution requiring knowledge server subnet layout use openflow conÔ¨Ågure switch trafÔ¨Åc entering red upper port Ô¨Çooded blue lower port eliminates loop ensuring trafÔ¨Åc go interconnection fabric destination server replied course learn forward future packet server real datacenters trafÔ¨Åc volume server rack larger trafÔ¨Åc volume entering exiting site alternatively assume goal provide multiple parallel path pair path traveling perspective color rule fails upper layer trafÔ¨Åc entering blue interface exit blue interface color trick work provided restrict trafÔ¨Åc enters blue exit red dividing trafÔ¨Åc multiple path sdn help parallel path length avoid need selection alternative approach multipath routing ecmp example work way doe particular property topology Ô¨Årst assumption eliminate path enter leave blue node enter leave red node unique path input port red upper port output port server rack loop avoided trivially second assumption eliminated path row multiple path pair goal loop given topology hand path guaranteed rule openflow controller complicated job choosing path generally entail path discovery selection loop avoidance previous section networking introduction computer network release load balancer previous example quite local openflow action contained nection fabric possiby typical openflow example achieve server sdn user connected transparently identical server server handle assigned fraction total load example controller knowledge topology implementation goal build imagine sdn controller charge diagram previous section switch interconnection fabric switch server rack point conÔ¨Ågure frontline server server rack identically including giving identical address incoming tcp connection request arrives controller pick server using round robin selecting server lowest load set openflow forwarding rule trafÔ¨Åc tcp connection arriving outside world sent designated server different server address allowed talk directly averting chaos lifetime openflow forwarding rule adjusted desired egto match typical lifetime user session Ô¨Årst tcp packet connection arrives selected server server need use arp Ô¨Ågure appropriate internal lan address send reply arp need massaged bit work acceptably environment host address point fact multiple server assigned address directly exposed server internal router end user server initiate outbound connection user risk server contacting user example sort load balancing implemented mininet pox identical frontline server need access common internal database cluster plemented assigning server second address purpose shared server using common address little openflow cleverness setting appropriate forwarding rule approach taken principle possible server connect database using tcp port coincidence expose identical address sdn controller care ensure did happen approach supported openflow switch mangle server address port nat network address translation traditional strategy implementing load balancing example server address use dns dns assign different user different server alternatively place device called load balancer network assigns incoming connection request internal server take care setting appropriate forwarding forwarding ip layer routing tcp layer application layer load balancer thought network address translation maintains table association connection internal server user connects association chosen server remains place period time advantage sdn approach described individual server need special conÔ¨Åguration awareness contained sdn network furthermore sdn switch virtually additional work ordinary forwarding need involve controller advanced ethernetan introduction computer network release Ô¨Årst new tcp packet connection arrives store packet Ô¨Åelds matched openflow packet header data Ô¨Åelds matched make possible implement form cache using sdn imagine lookup protocol us userid example look hashed password server controller seen key k userid corresponding value v hashed password Ô¨Årst exchange openflow switch instructed return v directly later request packet containing key k seen matching Ô¨Åelds used verify request directed later request packet need sent s potentially faster having s process repeated request epilog datacenters grown ethernet complex ethernet handle ten thousand node ineluctable growth broadcast trafÔ¨Åc remains limiting factor point ip approach scaling large network division multiple subnets subnets win said tool chapter enabled awful lot large ethernet datacenters degree matter cost fast ethernet switch cheaper fast ip router networking heralded future networking someday future arrive sdn successful speciÔ¨Åc area ethernet installation dominant exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution advanced ethernet following network like spanning tree example switch switch numbered differently id switch sn n root link end pruned algorithm diagram network formed surviving link consider network consisting just Ô¨Årst row datacenter diagram openflow switch epilog introduction computer network release network surviving link application algorithm assume id switch sn network path trafÔ¨Åc b assuming id root id sn remains path trafÔ¨Åc suppose want develop new protocol ethernet switch participating vlan track vlan color associated destination forwarding table assume switch know port interface connect switch connect host case know color assigned port suggest way switch propagate information switch b port reserved connection switch used host exercise assumes familiarity routing rithms suppose switch able identify host directly connected reachable passing switch explain algorithm algorithm used construct optimal ethernet forwarding table loop present network topology b suppose switch allowed mark packet packet initially unmarked mechanism allows switch detect host directly connected c explain ethernet broadcast multicast problem following arrangement host openflow switch s port controller c shown advanced ethernetan introduction computer network release s packet transmitted b c d assume s report c packet unknown destination packet s doe forwarding entry packet s destination packet report include source destination address arrival port receiving report source address previously unknown c installs s entry source address point s us forwarding table including new entry forward packet suitable entry exists s Ô¨Çoods packet usual packet indicate s report packet c ii new forwarding entry c installs s iii s able forward packet using table fall Ô¨Çooding s doe report packet c s entry destination s able forward packet normally consider arrangement exercise host openflow switch s port controller c shown s packet transmitted b c d exercise introduction computer network release time assume s report c packet unknown destination unknown source s doe forwarding entry packet s source destination address packet indicate s report packet c ii new forwarding entry c installs s iii s able forward packet using table fall Ô¨Çooding packet report include source destination address arrival port receiving report source address previously unknown c installs s entry source address point s us forwarding table including new entry forward packet suitable entry exists s Ô¨Çoods packet usual s doe report packet c s entry destination able forward packet normally consider following arrangement switch host openflow controller c exercise assume switch report packet c entry packet s destination report c installs entry reporting switch reaching packet s source address arrival port point switch Ô¨Çoods packet destination known switch forward packet reporting c new forwarding entry installed packet sent follows end forwarding table switch rule example learning switch openflow table match Ô¨Åeld match action default destaddr forward send t send t srcaddr send controller advanced ethernetan introduction computer network release similar table match reversed t srcaddr Ô¨Åeld t destaddr Ô¨Åeld exercise introduction computer network release advanced wireless lan ethernet ubiquitous datacenter large corporate desktop network residential employee laptop touch ethernet cable ethernet connection smartphones similar device unheard difÔ¨Åcult imagine contemporary laptop networking let mobile device wireless networking home ofÔ¨Åces connectivity norm mobile networking ubiquitous return tethered wire unthinkable adventure radioland chapter leave wire Ô¨Åber contemplate transmission packet radio freeing node cable tether mobile wireless wimax lte ubiquitous radio quite like wire wireless transmission packet brings change privacy s hard tap wired ethernet especially locked building ceive wireless transmission considerable distance data breach tjx corporation achieved attacker parking outside company building pointing directional antenna tion used weak security wep encryption failure similarly internet caf√© visitor generally don t want patron read email radio communication need strong encryption collision collision detection longer feasible radio extent relative signal strength remote signal local transmitter ethernet remote signal weak transmitted signal received signal detectable transmission radio remote signal easily little transmitted signal db measured transmitting station simply overwhelmed transmission signal strength resolved problem following section problem node b communicate directly c wall blocking direct communication b transmit simultaneously c encounter collision way b detect collision directly result wireless protocol constructed appropriately look handle common mode operation collision support pcf mode polling mode involves fewer zero collision use polling finally wimax lte switch polling scheduling reduce collision potential collision inevitable new station join network introduction computer network release worth pointing ethernet collision affect station physical ethernet collision domain wireless collision local occuring receiver station transmit time range collision happen relevant receiver range transmitting station example suppose station arranged linearly distance just maximum effective range b transmit collision c b transmit simultaneously receive c s signal just Ô¨Åne b s weak interfere hidden node wireless communication node b range detect signal interfere node fig b transmit simultaneously collision c reachable d creates additional complication collision handling b transmit simultaneously collsion c b possibly detect problem band width radio engineer band width word mean frequency range used signal data transmission rate information conveyed using single frequency signaling switching carrier frequency low rate blur carrier band nonzero width keeping remainder chapter use term data rate previously called bandwidth use term channel width width frequency band frequency range band width easily mistaken bandwidth equal data rate achievable radio signal proportional channel width constant proportionality limited theorem maximum data rate divided width frequency band log snr signal noise power ratio snr example width frequency band mhz maximum theoretical data rate wireless lansan introduction computer network release mbps log signal power s drop half data rate fall mbps log relationship signal power data rate logarithmic theorem assumes noise speciÔ¨Åc statistical form known gaussian white noise theoretically possible limit surpassed speciÔ¨Åc source noise ofdm actual data rate achievable given channel width snr depends signal encoding modulation mechanism newer modulation mechanism use orthogonal plexing ofdm variant central feature ofdm wider frequency band divided multiple narrow nels subchannel carry proportional fraction total information signal modulated carrier subchannels allocated transmission time multiplexing multiplexing disjoint set subchannels allocated different transmission proceed proportionally lower data rate parallel known multiplexing setting ofdm come reasonably close limit importantly ofdm performs reasonably multipath interference endemic urban environment reÔ¨Çective surface multipath interference necessarily comparable gaussian noise assumed theorem address technical detail ofdm note implementation usually requires form digital signal processing ofdma variant ma standing multiple access allows multiple user use ping set subchannels allowing simultaneous transmission option available cost fundamental issue share radio spectrum mobile wireless provider constraint driven price remarkable level fcc auction raised billion mhz usable entire united state work somewhat megahertz phone corresponding issue user dense area available capacity use inside busy building dozen access point competing channel result user getting close nominal data rate higher data rate require wider frequency band reduce cost face Ô¨Åxed demand usual strategy make coverage zone smaller reducing power adding access point appropriate using directional antenna multipath radio signal generally cover wide area ordinary directional antenna doe surprisingly way signal reach receiver path adventure radioland introduction computer network release reÔ¨Çected path possibly varying length addition reÔ¨Çection signal subject likescattering anddiffraction known multipath interference analog audio involved multipath distortion analog tv era ghosting b fig left reÔ¨Çected signal right resulting superposition encoded data picture show transmission path respective carrier path interfere supplement longer delay reÔ¨Çecting path red delay encoded signal result shown right reÔ¨Çected data symbol overlap interfere known intersymbol interference multipath interference change meaning data symbol seen receiver example red black low signal peak point vertical dashed line sum received higher peak assuming underlying carrier sync multipath interference tends lead wide Ô¨Çuctuations signal intensity period half wavelength phenomenon known multipath fading example wavelength fm radio station united state meter fringe reception area uncommon pull car forward quarter wavelength station clear indecipherable reception switch station frequency transmitted location altogether picture mathematical simulation intended illustrate multipath fading wall room reÔ¨Çect signal transmitter located orange ball lower left transmitter transmits unmodulated carrier signal reÔ¨Çected wall number time point room total signal intensity sum possible reÔ¨Çection path blue ripple represent received carrier strength variation multipath interference reÔ¨Çected path note ripple size half wavelength comparison simulated intensity map real wall tend lower reÔ¨Çectivity real room real carrier modulated real room introduce scattering diffraction shadowing object signiÔ¨Åcant variation common actual wireless setting multipath fading affecting frequency equally selective affecting frequency differently quite possible ofdm channel ofdm encounter selective fading subchannel frequency generally multipath interference problem engineer great length overcome shall multiple spatial stream multipath interference positive wireless lansan introduction computer network release fig map simulated room wall reÔ¨Çectivity adventure radioland introduction computer network release use allowing antenna transmit receive independent signal increasing effective throughput alternative example multipath interference signal strength ripple exercise power cutting network cable replacing wireless good chance want cut power cable replace battery tends make power consumption important issue standard provision minimizing power usage allowing device doze time waking periodically check packet ready sent joining network project wireless personal area network intended support device rfc andrfc tangle wireless used simply replace cord attendant tangle course problem incompatible connector bluetooth wireless standard commonly used cable tive thing like computer mouse telephone headset bluetooth network application working range meter zigbee network trademark alliance denoting ieee protocol family speciÔ¨Åcally strictly speaking amendment original standard facto standard right like classic ethernet deal collision unlike ethernet fi unable detect collision progress complicating backoff retransmission algorithm collision unlike wired lan protocol considered far addition normal data packet us control andmanagement packet exist entirely lan layer initiated delivered higher network layer control packet used compensate infelicity radio environment lack collision detection putting control management protocol layer mean ip layer continue interact lan exactly did ethernet change required designed interoperate freely ethernet logical lan layer mac physical address size ethernet s internal structure ethernet address internal structure share namespace supposed ethernet interface address result data packet forwarded switch ethernet respect lan attached ethernet lan look like extension ethernet lan access point wireless lansan introduction computer network release microwave oven impact running microwave oven signal quite evident oven sender receiver conÔ¨Ågurations effect vary oven transmit half cycle sec sec allow intervening transmission time traditionally used ghz ism industrial scientiÔ¨Åc medical band used microwave oven used ghz band support option new returned using ghz exclusively ghz band reduced ability penetrate wall resulting lower effective range ofÔ¨Åces housing advantage ghz band provides usable channel ghz band resulting interference crowded environment radio spectrum usually unlicensed meaning special permission needed transmit trying use frequency band simultaneously availability unlicensed channel ghz band continues improve table summarizes different version data bit rate assume single spatial stream channel width nominal name column introduced alliance convenient designation newer version ieee maximum bit rate frequency channel width new mbps ghz mhz mbps ghz mhz mbps ghz mhz mbps ghz mhz mbps ghz mhz mbps ghz mhz maximum bit rate seldom achieved practice effective bit rate account minimum time spent mechanism signiÔ¨Åcantly variant use dynamic rate scaling bit rate reduced tenfold environment higher error rate distance obstruction competing transmission radio noise mean practical matter getting mbps requires optimum circumstance particular competing sender unimpeded transmission performance little mbps mbps mhz channel typical ghz ism band divided international agreement ofÔ¨Åcially designated adjacent channel mhz wide united state use limited Ô¨Årst channel ghz band similarly divided mhz channel sender need ofÔ¨Åcial channel typical ghz transmitter us actual frequency range mhz Ô¨Åve ofÔ¨Åcial channel result avoid signal overlap use ghz band restricted ofÔ¨Åcial channel end result generally available band ghz range transmitter interact interfere mhz channel ghz band united state requires user band avoid interfering weather military application frequency range introduction computer network release involve careful control transmission power ieee amendment dynamic frequency selection choose channel little interference switch channel interference detected later channel ghz larger number channel reason arguably primary reason run faster number channel available use increasing conÔ¨Çicts existing ghz weather system resolved preliminary support additional frequency band ghz range awaiting Ô¨Ånal fcc approval designer improve throughput variety technique including improved radio modulation technique improved code smaller guard interval symbol increasing channel width allowing multiple spatial stream multiple antenna Ô¨Årst list largely tapped ofdm modulation ofdm close limit limited room improvement saw Ô¨Åt ofdma reduces range protection multipath interference increase data rate introduced support dynamic changing symbol size largest speed increase obtained item list channel width increased adding additional mhz channel example mbps bit rate nominal frequency range mhz comparable area minimal competition signal support using mhz frequency band bit rate go mbps mbps smaller guard interval used amount using available ghz band similarly wide range bit rate reÔ¨Çects support using channel width ranging mhz mhz ofÔ¨Åcial channel using multiple spatial stream newest technique multiple spatial stream category table additional bit used code operating mbps example actual raw bit rate mbps sent symbol consisting bit unit collision looked extensively mbps ethernet mechanism classic ethernet conclude switch link ethernet collision rapidly thing past brought collision obscurity ethernet sender discover collision occurs Ô¨Årst slot time monitoring faint interference transmission mentioned collision transmitting station simply detect collision progress station transmits time sender amiss signal received isa mode operation wireless lansan introduction computer network release polling mode commonly used collision management signiÔ¨Åcant impact ordinary performance acks Ô¨Årst problem collision detecting inability detect collision directly protocol add ack packet unicast transmission acks Ô¨Årst example control packet unrelated tcp acks reliable delivery acks depends careful timing time interval applicable numeric value ghz band value ifs formally known difs d distributed polling mode slot time ¬µsec ifs normal interframe spacing ¬µsec sif short ifs ¬µsec comparison note rtt station meter apart ¬µsec mbps ifs time send byte mbps send byte station say c received data packet addressed say wait time sif sends ack small domain station s signal clearly visible station point time c station authorized send section station including s overlapping seen s data transmission required wait longer ifs period following end transmission station detect c s ack ifs time elapsed interfere unfortunately problem complicates picture station seen s data transmission wait ifs interval station range unaware requirement capable interfering somewhat surprisingly work best station s transmission collide c s ack c weak interfere c s ack point reached matter exercise exists considerable transmission stock signal extremely long distance current appears cisar created link km tuscany sardinia special antenna used end link length require tweaking protocol address acks normally sent ¬µsec sif receipt time ¬µsec ifs happen propagation delay reach ¬µsec corresponds distance km newer level distance smaller cisar propagation rtt millisecond reported throughput mbps vastly exceeds packet appears acks disabled packet involved collision receiver send ack sender know went awry unfortunately sender notbe able tell problem collision electromagnetic interference signal blockage excessive distance receiver s powered introduction computer network release collision usually likely cause assuming lost packet involved collision result worst slight additional delay retransmission collision assumed acks contain information sequence number identiÔ¨Åes packet acknowledged acks simply acknowledge recent transmission ended sif earlier context unambiguous compared building reliable transport bit packet sequence numbering required collision avoidance backoff ethernet algorithm known cd stood collision detection corresponding mechanism ca ca stand collision avoidance collision presumed occurred ack received ethernet mechanism scaled somewhat differently sender wanting send new data packet wait ifs time Ô¨Årst sensing medium idle trafÔ¨Åc seen interval station transmit immediately trafÔ¨Åc issensed sender exponential backoff Ô¨Årst transmission attempt station likely waiting avoiding initial collision strongly preferred initial backoff choose random k recall classic ethernet effect chooses initial backoff k prospective sender wait k slot time waiting sender continues monitor trafÔ¨Åc transmission detected sender suspends clock clock resume transmission completed followup idle interval length ifs elapsed note rule sender wait idle interval length ifs sending ensuring collide ack sent idle interval sif ethernet station waiting Ô¨Ånish transmit transmit soon Ô¨Ånished initial collision larger initial k backoff range initial collision unlikely sender belief collision retries transmission doubling backoff range seven attempt fail packet discarded sender start slot time radio signal meter slot time unlike ethernet physical diameter network ethernet slot time represents fundamental unit backoff interval finally note unlike ethernet collision collision local phenomenon b transmit simultaneously collision occurs node c signal b strong c interfere possible collision occurs station c midway b station d close return problem station optionally use protocol negotiated designated control packet usually used larger data packet wireless lansan introduction computer network release threshold size largest packet notsent using set access point conÔ¨Åguration access point maximum packet size effectively disabling feature idea large packet involved collision represents signiÔ¨Åcant waste potential throughput large packet ask Ô¨Årst rts control packet small sent normal procedure outlined packet includes identity destination size data packet station desire transmit destination station reply ct sif wait period effectively preventing mission rts ct packet contains size original sender wait sif receiving ct sends packet station hear rts ct message rts ct sent successfully collision occur packet transmission idle time length sif station waiting time ifs problem consider diagram station range station b meter apart hear meter transmitting b sens medium preparation transmission collision avoidance b conclude medium idle ahead send fig b transmit simultaneously collision c reachable d c range b transmit simultaneously c s perspective collision occurs c receives usable collision sender b hidden general scenario known problem note node d receives s signal collision occurs problem occur b receive s transmission physical obstruction wall rationale protocol prevention collision imagine instead transmitting data packet sends rts packet c responds ct b heard rts packet doe hear ct begin transmitting sif interval b introduction computer network release c ba fig setting b detect signal collide c hear s transmission b wait ct packet contained size implicitly length time station remain idle rts packet quite short likely involved collision data packet fragmentation conceptually related fragmentation error rate collision rate high sender send large packet multiple fragment receiving ack shall error rate packet size rate high sending smaller packet lead fewer total transmitted byte sending data large packet packet fragment reassembled receiving node Ô¨Ånal tion threshold fragmentation threshold set size maximum packet adjusting value threshold seldom necessary appropriate monitoring revealed high collision error rate unfortunately essentially impossible individual station distinguish reception error caused collision reception error caused form noise hard use reception statistic distinguish need need fragmentation dynamic rate scaling sender detect transmission problem able reduce transmission bit rate process known rate scaling orrate control idea lower bit rate fewer error error rate unacceptably high increased distance sender fall lower bit rate standard rate mbps sender attempt Ô¨Ånd transmission rate maximizes throughput example mbps packet loss rate effective throughput mbps better mbps loss sender update bit rate basis sender choose different bit rate different recipient example sender sends packet receives conÔ¨Årming ack sender fall lower bit rate actual algorithm life particular driver use different node network use different algorithm wireless lansan introduction computer network release earliest algorithm automatic rate fallback arf rate decrease consecutive transmission failure ack received increase transmission success signiÔ¨Åcant problem rate scaling packet loss random noise white noise thermal noise collision form noise random Ô¨Årst case lower transmission rate likely helpful larger number collision experienced longer time caused lower bit rate increase frequency collision fact higher transmission rate leading shorter transmission time help enabling protocol help signal strength driver report received signal strength newer driver use ieee received channel power indicator convention rcpi integer proportional absolute power received antenna measured dbm value range dbm dbm comparison light star polaris delivers dbm eye good night venus typically delivers dbm gps satellite deliver dbm phone inspired wikipedia dbm variety newer algorithm proposed summary based auto rate rbar attempt incorporate ratio calculation transmission rate avoids confusion introduced collision unfortunately ratio strong theoretical correlation transmission rate radio report host received signal strength ratio harder measure result rbar approach quite effective practice hoped rate adaptation algorithm cara transmitting station attempt thing infer packet lost collision noise sif interval following end packet transmission ack received andthe channel busy detect collision colliding packet longer station s packet problem isn t issue actual data packet sent rate participant close receive correctly transmission begin brief preamble minimum bit rate acks sent minimum bit rate multiple spatial stream latest innovation improving wireless data rate support multiple simultaneous data stream antenna technique known mimo use n stream sender receiver n antenna antenna use frequency channel transmitter antenna sends different data stream Ô¨Årst glance signiÔ¨Åcant improvement throughput impossible antenna element respective sending receiving group half wavelength clear space mimo possible reason mimo work everyday setting put multipath interference positive use introduction computer network release consider Ô¨Ånal image multipath signal strength varies according blue ripple peak valley period half wavelength assume initially signal strength low reception darkest blue area longer viable single antenna misfortune dead zone receive start simpler case simo miso simo receiver multiple antenna miso transmitter assume moment antenna simplest implementation simo ceiver pick stronger received signal us long antenna dead zone reception successful antenna half wavelength apart odds located outside dead zone receive adequate signal similarly simple miso transmitter pick whichever antenna get stronger signal receiver receiver unlikely dead zone transmitter antenna note miso sender feedback receiver know antenna use quite bit better technique utilized sender receiver antenna used simultaneously complicates mathematics considerably processing standard header assist process includes added agement packet Ô¨Åelds reporting information station example send sequence training symbol discerning response antenna miso added technique called beamforming sender coordinate multiple antenna maximize signal reaching particular receiver simplistic description simo mimo antenna actually used suggested idea improve marginal reception antenna successfully communicate single antenna mimo hand thought applying transmission condition quite good antenna reach antenna key point environment signiÔ¨Åcant degree multipath interference path beindependent oruncorrelated receiving antenna perspective transmitting antenna gray zone reduced signal strength typically distance gray zone peak zone half wavelength ghz cm b fig mimo antenna speciÔ¨Åc example consider diagram sending antenna left receiving antenna b b right antenna signal s s physical signal path assume signal dashed blue arrives half strength path solid black signal received b s s signal received b s s wireless lansan introduction computer network release b readily solve independent signal s s signal said form spatial stream spatial stream abstract correspond physical signal path antenna omnidirectional variation come multipath interference physical aiming similarly diagonal path slightly longer horizontal path difference nearly allow b solve signal practice overall improvement single antenna considerably factor n number antenna end standard allows spatial stream theoretical maximum bit rate mbps allows spatial stream maximum close gbps mimo support described notation b number transmitting receiving antenna c b number spatial stream access point standard conÔ¨Ågurations infrastructure andad hoc involves connection designated access point includes individual node communicating informally example laptop set ad hoc connection transfer data meeting ad hoc connection used simple network notproviding internet connectivity complex ad hoc network certainly possible manet theinfrastructure conÔ¨Åguration common station infrastructure network cate directly access point turn communicates outside world node b c share access point ap b wish send packet c b Ô¨Årst forward packet ap ap forward introduces degree inefÔ¨Åciency doe mean access point associated node automatically act true lan node reach node case trafÔ¨Åc node outside world ad hoc network comparison common node able reach forwarding intermediate node fact form scenario access point generally identiÔ¨Åed ssid service set identiÔ¨Åer administratively deÔ¨Åned string linksys loyola ad hoc network ssids generated pseudorandomly startup look like mac address portable access point access point speciÔ¨Åc job station device like phone station generally act access point possible station device access point mode supported underlying radio hardware suitable driver linux hostapd package option fcc bestow blessing access point support multiple ssids simultaneously example access point support ssid guest limited authentication ssid secure stronger tion introduction computer network release finally design completely interoperable ethernet station associated access point ap ap connects cabled ethernet station b want send packet b sends using ap destination b included header actual destination receives packet wireless ap act ethernet switch forward packet forwarding transparent sender ethernet lan header format quite different dest addr src addr type data crc receiver addrtransmit addrdest addr src addr data crc frame tionseq controlethernet data fig ethernet packet format packet format typical diagram illustrates ethernet header header typical data packet using feature ethernet type Ô¨Åeld usually move ieee logical link control header region labeled data receiver transmitter address mac address node receiving transmitting unicast packet different ultimate destination source address station b want send packet station c network source destination b c transmitter receiver b access point infrastructure mode receiver transmitter address access point typical situation receiver destination sender transmitter ad hoc mode routing used address distinct routing manet joining network join network individual station Ô¨Årst discover access point associate authenticate access point general communication begin older form authentication open authentication wep authentication came association newer authentication protocol security come summarize stage process follows scanning active probing association true authentication dhcp getting ip address dynamic host conÔ¨Åguration protocol dhcp association authentication process carried exchange special management ets conÔ¨Åned lan layer occasionally station access point egif wish communicate status update access point periodically broadcast ssid special beacon packet son ssid beacon packet suppressed beacon packet wireless lansan introduction computer network release management packet default interval broadcast allow station list available network beacon packet contain network parameter parameter available data rate use beacon support doze mode station elect enter mode case inform access point record announced transmission time interval wake brieÔ¨Çy receive beacon beacon turn contain list compact bitmap form dozing station access point packet deliver ad hoc network beacon packet node participate regular transmission distributed algorithm connecting station wait scheduled beacon send special packet elicit packet operation involve listening transmitting multiple radio channel sequentially station doe know correct channel use nected station send packet regular interval abreast available network probe packet allow tracking station s mac address mac address randomization number probe request startlingly high measured thousand minute circumstance sufÔ¨Åcient impact battery life available throughput beacon received station initiate association process vestigial authentication process come association time shared wep key authentication later support wide range authentication protocol introduced framework return security purpose include open authentication association process driver driver available selected hardware operation supported simple principle changing s source mac address possible mac address randomization using separate mac address host multiple embedded virtual machine possible open authentication station sends authentication request access point access point reply station need know ssid access point usually possible conÔ¨Ågure access point restrict admission station mac physical address determined list station evade checking changing mac address acceptable driver support ssid play role password access point conÔ¨Ågured beacon packet doe contain ssid access point said hidden unfortunately access point hidden way easily unmasked Ô¨Årst ssid sent clear station need authenticate second attacker transmit forged deauthentication ation request force legitimate station retransmit ssid management frame protection security Ô¨Åx problem authentication based obsolete wep encryption mechanism security involved exchange station proved access point knew shared wep key actual wep encryption start slightly later introduction computer network release step step infrastructure network station associate access point involves association request station access point association response return primary goal association exchange ensure access point know mac address station reach tell access point deliver packet associating station come station outside world association necessary ad hoc network entire connection process including secure authentication dhcp dynamic host conÔ¨Åguration protocol dhcp take longer expected second discussion cause station pair appear work pair mac address randomization device conÔ¨Ågured transmit probe request regular interval available channel connected probe request identify available network reveal device s mac address allows site store track customer device prevent tracking device support mac address randomization proposed use appropriate interval new mac address randomly selected device probe request generally sent device joined network prevent tracking probe request simplest approach change mac address used probe regular frequent interval device change mac address probe changing mac address used actually joining network important prevent tracking introduces complication rfc suggests option selecting new random address regular time interval connection time device connects network select new mac address network like device reconnects network identiÔ¨Åed ssid use mac address Ô¨Årst option changing joined mac address regular time interval break thing likely result assignment new ip address device terminating existing connection second site authenticate based mac address option prevents Ô¨Årst problem option prevents allows site device actually join network track repeat connection conÔ¨Åguring device forget connection successive join usually prevent convenient approach tracking problem disable probe request entirely explicit demand mac address randomization unfortunately complete barrier device tracking channel device leak information example probe request contain data known information element value distinctive allow partial Ô¨Ångerprinting additionally possible track device based minute variation modulated signal transmit mac address randomization doe prevent radiometric identiÔ¨Åcation access point impersonate popular access point trick device initiating connection real mac address example wireless lansan introduction computer network release finally mac address randomization application ethernet example original speciÔ¨Åcation address embedded mac address introduced possibility tracking device address mac address randomization prevent form tracking technique implementable solely layer appear popular interface identiÔ¨Åers roaming large installation multiple access point create roaming access assigning access point ssid individual station stay access point originally associated signal strength fall certain level determined station point seek access point ssid stronger signal way large area carpeted multiple access point look like large domain access point connected wired lan known distribution use provide interconnection access point option mesh network time station associated access point terminology conÔ¨Åguration single ssid known extended service set es order network work trafÔ¨Åc toa wireless station egb Ô¨Ånd station s current access point egap help distribution track b s current location b required time move ap oldto ap send ap reassociation request containing ap old s address set motion number thing ap contact ap oldto verify terminate association reassociation process give ap opportunity spelled standard notify distribution b s new location distribution switched ethernet supporting usual learning mechanism ethernet switch simple approach roaming station handle way wired ethernet trafÔ¨Åc Ô¨Ånds laptop unplugged carried new location plugged suppose wireless node b exchanging packet distribution wired node c router connecting b internet b move ap oldto ap send packet lan c ethernet switch path b c learn route switched ethernet c b s new ap possible b s new ap send packet reassociation response process leave switch distribution holding forwarding table old location terribly Ô¨Åxed switch soon b sends packet destination reached switch problem avoided entirely moving b new ap sends ethernet broadcast packet running ethernet cable remote access point easily dwarf cost access point result considerable pressure Ô¨Ånd way allow network form distribution return mesh network ieee amendment introduced standardization fast handoff access point es allows station new access point reuse pairwise master key negotiated station old access point slightly streamlines reassociation process transition initiated station amendment limited handoff doe address Ô¨Ånding access point particular station associated routing access point introduction computer network release handoff initiated station doe quite work smoothly es newer device quite good initiating handoff case older device usually case device moving es change ssid device cling original access point past distance original signal cease provide reasonable throughput long doe vanish entirely repeater extenders sold residential use require second ssid poor job supporting roaming access point support proprietary method dealing older mobile station reluctant transfer closer access point es technique seldom necessary communicating access point detect station s signal weak handoff appropriate approach involves having original access point initiate dissociation point station reconnect es connect access point es stronger signal approach involves having access point use mac address indistinguishable whichever access point receives strongest signal station used transmit tothe station mesh network able freely installation important user installation created typical ofÔ¨Åce building ethernet access point plug ethernet distribution network residential setting ofÔ¨Åces running ethernet cable prohibitively expensive case make sense access point interconnect alice associate access point sends packet destined outside world forward packet node b turn forward c delivery complete easier said original standard did provide use access point repeater standard mechanism distribution network inexpensive approach use device sold extenders device typically set new ssid forward trafÔ¨Åc original ssid conÔ¨Ågurations possible usually conÔ¨Ågured manually original access point extender different ssids device automatically connect whichever closer preferring stick ssid originally connected signal essentially disappears completely mobile user reason strategy desire distribution network led multiple proprietary solution possible purchase set mesh router sold considerable premium standard router set generally work quite present single ssid support fast handoff access point user intervention user coverage appears seamless downside proprietary mechanism buy solution equipment vendor seldom interoperate led pressure standardization ieee introduced mesh networking amendment Ô¨Ånalized edition dard slow catch alliance introduced easymesh solution based initial rollout vendor board assume time mesh networking restricted creation distribution wireless lansan introduction computer network release network interconnecting access point ordinary station participate forwarding user packet mesh common implementation approach fact amendment allows general approach creating mesh network distribution proprietary participating access point address following issue authenticate identify correct access point reach given station b correctly handle station b s movement different access point agree route mesh access point station connection internet eventually routing issue routing problem faced manet manet restricted simpler case node common management routing trivial path √±b√±c shorter alternative path √±d√±e√±c support lower data rate typical solution multiple access point participate mesh bs allows access point appear single lan setting mesh bs separate es seen user station used communication access point typically connected internet referred root mesh station setting mesh discovery achieved initial conÔ¨Åguration mesh ssid passphrase mutual authentication particularly important pair station authenticate symmetrically station b associate access point ap ap us mesh bs deliver packet sent b root mesh station ap reverse trafÔ¨Åc b s reassociation request sent ap give ap opportunity interact mesh bs update b s new location act b s sending packet ap tell mesh bs Ô¨Ånd routing mesh bs handled hwmp protocol hwmp protocol typically generates tree link subset link contains loop based root station process us routing metric tuned wireless environment throughput link preferred packet routed mesh bs station station b address needed packet header ultimate source destination b transmitter receiver correspond speciÔ¨Åc hop packet need source destination mesh corresponding access point b connect handle adding mesh control Ô¨Åeld consisting management Ô¨Åelds ttl sequence number length block additional address possible ordinary station join mesh bs directly restricting mesh bs access point mean station participate mesh routing node hard predict popular easymesh standard alliance exactly ieee standard thing easymesh standard speciÔ¨Åes access point connected internet introduction computer network release controller access point called agent easymesh standard incorporates part ieee standard home network simpliÔ¨Åes initial conÔ¨Åguration security unencrypted trafÔ¨Åc visible nearby appropriate receiver eavesdropping zone expanded use larger antenna security important support type trafÔ¨Åc encryption original obsolete encryption standard privacy wep involved key later extended byte encryption algorithm based key key manually conÔ¨Ågured station speciÔ¨Åc way wep use cipher contained fatal Ô¨Çaw byte key broken guessed sequentially knowing byte allow attacker guess byte relatively small data entire key wep encryption failure detail wep replaced protected access wpa used tkip encryption rithm like wep ultimately based immune sequential attack wep vulnerable wpa later replaced ieee amendment us presumptively stronger aes encryption block cipher variant used known ccmp encryption believed quite secure vulnerability associated protected setup protocol standard known robust security network protocol access point supporting wpa declare beacon packet packet include list acceptable cipher wpa come Ô¨Çavors use aes encryption differ key managed appropriate smaller site us master key known psk key entered access point ideally air connecting station key usually secure hash secure hash passphrase use single key multiple station make changing key revoking key particular user difÔ¨Åcult ieee introduced intended Ô¨Åx host accumulated issue portant change switch handshake sae mechanism simultaneous authentication equal return handshake secure authentication protocol station authenticate access point andthe access point authenticate station station inadvertently connect rogue access point likely gain partial access private data bidirectional tication achieved handshake generates session key known pairwise transient key ptk independent master key compromise ptk allow attacker determine master key improve security ptk used generate temporal key tk used encrypt data message separate key used mic code key wireless lansan introduction computer network release master key key psk master key negotiated pairwise master key pmk handshake begin immediately association selection pmk packet handshake encrypted station access point begin selecting random string called nonce typically byte long diagram access point authenticator chosen anonce station supplicant chosen snonce ptk secure hash master key nonce mac address Ô¨Årst packet handshake sent access point station contains nonce unencrypted packet contains replay counter rc access point assigns sequentially station echo station access point anonce r snonce r micstation know ptk access point know ptk gtk mic ack mic install ptkinstall ptk fig handshake rc represent replay counter point station information compute ptk second message handshake sends nonce access point nonce sent clear second message includes digital signature signature called message integrity code mic standard ofÔ¨Åcially named michael calculated manner similar hmac mechanism secure hash authentication us key derived ptk receipt station s nonce access point able compute ptk ptk hand access point veriÔ¨Åes attached signature check prof access point station did fact know master key valid signature constructed station authenticated access point stage handshake access point possession ptk sends signed message station replay counter incremented optional group temporal key gtk included encrypting message gtk included encrypted ptk entire message encrypted message received veriÔ¨Åed access point authenticated station fourth Ô¨Ånal step simply acknowledgment client packet sent eapol format described following section format introduction computer network release used identify handshake packet wireshark scan signiÔ¨Åcant vulnerability handshake used dropper record message attempt ofÔ¨Çine attack key different value passphrase used generate psk tried mic value computed second packet match value corresponding recorded packet point attacker authenticate network decrypt packet attack harder user different key station network eavesdrop given station share psk ptk generated psk information transmitted encryption mechanism exchange avoid difÔ¨Åculty key produced way noteasily determined eavesdropper inside information master key used wpa needed rushed service failure wep krack attack purpose replay counter rc diagram prevent attacker reusing old handshake packet despite effort replayed regenerated instance handshake packet used seriously weaken underlying encryption attack known key stallation attack krack documented attack variation address particular implementation s interpretation ieee standard address key egthe group temporal key key handshake egthe handshake used roaming consider straightforward form cipher used stream cipher stream cipher meaning packet key used generate keystream pseudorandom bit length packet packet xored keystream encrypt essential scheme s security keystreams different packet unrelated achieve keystream algorithm incorporates encryption nonce initially incremented successive packet core observation krack station installs reinstalls ptk reset encryption nonce effect resetting keystream new packet encrypted exactly keystream earlier packet key reinstallation station occurs instance handshake packet arrives possibility lost packet handshake protocol allow duplicate packet basic strategy krack force key reinstallation arranging access point attacker deliver duplicate handshake packet station order interfere packet delivery attacker able block delay packet access point station able send packet station easiest way accomplish attacker set clone real access point mac address operating different channel attacker receives message real access point original channel able selectively retransmit station new channel described attack cf trust man middle alternatively attacker able selectively jam message access point wireless lansan introduction computer network release attacker block fourth handshake packet station access point access point eventually time retransmit duplicate packet complete properly updated replay counter attacker delay duplicate packet desired order prolong interval keystream reuse station s response duplicate packet encrypted attacker usually generate forged unencrypted version forcing reuse keystream doe automatically break encryption case plaintext packet guessed context xoring keystream used encrypt packet determined allows trivial decryption later packet encrypted keystream possibility depend cipher tkip cipher used vulnerability mic algorithm allow determination key used mic turn allow attacker inject new packet properly signed connection new packet encrypted broken keystreams strategy doe work aes ccmp encryption krack vulnerability Ô¨Åxed disallowing reinstallation key retransmission handshake packet received ignored encryption nonce reset alternative allows station separate key fact largely separate encryption mechanism protocol allowing site great freedom choosing despite enterprise suited smaller site based closely framework support arbitrary authentication protocol module principle improvement offer ability assign individual password practice enormously important feature prevents example user easily decrypting packet sent user key held single common known authentication server usually unrelated access point client node station known supplicant access point known authenticator begin authentication process supplicant contact authenticator using extensible tication protocol eap amount request authenticate access point eap generic message framework meant support multiple speciÔ¨Åc type authentication rfc rfc eap request forwarded authentication server exchange thenticator message supplicant secret credential sent clear eap usually used conjunction radius remote authentication user service tocol rfc speciÔ¨Åc Ô¨Çexible protocol known mode eap mode radius mode based us eap handshake eap communication take place supplicant given ip address mechanism provided support exchange eap packet supplicant authenticator mechanism known eapol eap lan eap message authenticator authentication introduction computer network release server hand travel ip fact site choose authentication server hosted remotely speciÔ¨Åc protocol using framework use packet format eapol eapol used concluding handshake authentication server egradius server set speciÔ¨Åc authentication method entered xusername password ypairs form security certiÔ¨Åcate authentication server generally allow different encryption protocol used different supplicant allowing possibility common protocol supported station access point longer need know authentication protocol actually used simply middleman forwarding eap packet supplicant tication server particular access point doe need support speciÔ¨Åc authentication protocol access point allows supplicant connect network receives permission authentication server end authentication process supplicant authentication server cess established shared secret terminology known pairwise master key pmk authentication server communicates pmk securely access point using standard protocol ssh tl step supplicant access point negotiate session key using mechanism previous section pmk master key resultant ptk used session key authentication typically doe require access point ip address order able contact authentication server access point using authentication doe need ip address simply enable conÔ¨Åguration enabling conÔ¨Åguring network use authentication relatively straightforward long authentication server running radius available outline setting enterprise authentication using freeradius version want enable password certiÔ¨Åcates password stored server using hashing secure hash necessarily strong production use password hash option password hashed client communicate actual password authentication server authentication method chap option Ô¨Årst step set access point generally quite straightforward ported inexpensive access point selecting option enable security need enter ip address authentication server shared secret password ticating message access point server secure hash authentication technique conÔ¨Åguration radius server bit complex radius eap quite general developed long used setting decided use hashed password implies client station send plaintext password authentication server need use authentication method creates encrypted tunnel protected eap method encrypts trafÔ¨Åc using tl tl wireless lansan introduction computer network release tcp eap tl method using tl directly traditionally requiring certiÔ¨Åcates ttls method tunneled tl peap encrypted tunnel want use plaintext password authentication want password authentication protocol pap basically just asks username password dius doe allow pap run directly peap interpose generic token card protocol gtc token card device sight gtc quite generic probably tell radius server ip address access point access point ip address speciÔ¨Åcally communication enable thing editing Ô¨Åle contain following entry peap peap gtc gtc pap step create username credential pair server thing simple store credential user Ô¨Åle username alice password snorri freeradius rule need convert password hash encoded using way make use openssl command library echo snorri openssl dgst openssl return string enter user Ô¨Åle follows alice option include ter salted password recommended approach alice difÔ¨Åculty changing password unless administrator authentication server necessarily worse alice share password user want support password changing conÔ¨Ågure radius server look username credential database instead user Ô¨Åle relatively straightforward create interface allowing user change password Ô¨Ånally try connect client ask username password munication authentication server begin ask preferred authentication method introduction computer network release radius server offering optional certiÔ¨Åcate using anonymous identity way client specify particular authentication server go connection immediate freeradius tool copious debugging output alliance introduced replacement biggest change party handshake replaced sae simultaneous authentication equal advantage sae eavesdropper ofÔ¨Çine password attack recall end handshake quite vulnerable regard attacker attempt online attack egby parking van range trying password slow consequence sae forward secrecy forward secrecy mean attacker obtains encryption key session help decrypt older newer session fact attacker obtains master password able obtain session key attacker willbe able connect network attacker obtains pmk session key calculated nonce value exchanged handshake requires station access point maintain password cleartext key derived password authenticate hard encrypts connection open access point called opportunistic wireless encryption rfc introduces longer key length add new cipher strictly easyconnect feature announced time low easier connection device lack screen keyboard make entering password difÔ¨Åcult easyconnect device come qr code scanning code allows device connected finally contains ofÔ¨Åcial Ô¨Åx krack attack encryption coverage originally encryption covered data packet common attack involved forging management ets egto force station disassociate access point continuously attack force station reassociate reveal hidden ssid reveal key information enable decryption attack ieee amendment introduced option station access point negotiate agement frame protection encrypts digitally sign essential management packet exchanged authentication phase completed includes packet requesting deauthentication disassociation effectively preventing attack management frame protection seldom enabled default access point data encryption effect wireless lansan introduction computer network release monitoring depending one driver possible monitor trafÔ¨Åc given nel special tool exist including kismet plain wireshark sufÔ¨Åce underlying driver monitor mode linux system command iwconfig mode monitor wireless work interface necessary Ô¨Årst kill process interface open withservice networkmanager stop necessary bring interface ifconfig case interface need brought upafter entering tor mode finally receive channel set iwconfig channel system interface change transition monitor mode mode channel set wireshark report header radiotap header containing information transmission data rate channel received signal strength useful experiment begin monitoring power enabled device wireshark display Ô¨Ålter help focus relevant packet better capture Ô¨Ålter ether host wireshark screenshot example node ad broadcast probe request answered access point packet represent process followed packet representing association process packet type eapol represent authentication handshake polling mode includes polled mechanism station access point determines station allowed send used potential greatly reduce collision eliminate entirely mechanism known point coordination function pcf versus mechanism known distributed coordination function pcf refers fact mode access point charge coordinating station send pcf option offer potential regular trafÔ¨Åc receive improved throughput fewer collision seen intended trafÔ¨Åc voice call idea pcf schedule regular interval period cfp period access point send data packet receiver send poll packet receiver allowing receiver reply data packet introduction computer network release send combination necessarily receiver send management packet including special packet marking end cfp operation result collision unless unrelated overlapping domain involved station receiving data access point send usual ack sif interval data packet access point addressed station b carry piggybacked header poll request station c save transmission polled station send data receive ack access point ack combined packet poll request station end cfp regular contention period cp resume usual strategy time interval start time consecutive cfp period typically m short allow trafÔ¨Åc supported cfp station normally wait short ifs sif transmission work normally station designated respond access point polled station station polled send access point wait time interval pifs pcf spacing length midway sif ifs previous ifs really known difs dcf ifs expiration pifs station happens unaware cfp continue wait difs transmit example station entirely different overlapping network access point generally maintains polling list station wish polled cfp station request inclusion list indication associate likely reassociate access point polled station send simply remains quiet pcf mode supported router go unused able note pcf mode long access point active range standard provision attempting deal presence network provision somewhat imperfect minimum supported access point end result polling quite useful manet manet acronym stand mobile ad hoc network practice term generally applies ad hoc wireless network sufÔ¨Åcient complexity internal routing mechanism needed enable connectivity mesh network sense mesh network qualiÔ¨Åes manet manet include network centralized control routing node highly mobile manet potentially larger design intended handle hundred routing node typical mesh network handful access point manet built wireless mechanism assume used manet node communicate radio signal Ô¨Ånite range diagram node s radio range represented circle centered node general manet node able communicate relaying packet intermediate node case node g diagram finding optimal route intermediate node signiÔ¨Åcant problem wireless lansan introduction computer network release abc fg fig typical manet radio range node represented circle node node reach node g route route manet people early year manet design focused decentralized communitarian approach wireless community network arab spring manet proposed tion user having access way bypass government censorship internet fast forward press discussion mesh network oriented exceptionally large private residence endures change Ô¨Åeld radio range node circular thing signal reÔ¨Çection blocking obstruction additional complication arises node just obstruction moving real time mobile manet mean working route stop working short time later reason routing manet good deal complex routing ethernet switched ethernet example required choice multiple alternative route note successful routing manet doe connectivity doe meet deÔ¨Ånition lan given lan ethernet routing manet node serve gateway internet note manet general support broadcast multicast unless forwarding broadcast multicast message manet built routing mechanism complicate operation network assuming manet routing mechanism replaces need protocol like s arp address resolution protocol arp s neighbor discovery neighbor discovery play important role local packet delivery example common mechanism dynamic host conÔ¨Åguration protocol dhcp relies broadcast need adaptation similarly introduction computer network release relies multicast ancillary service including address assignment duplicate address detection duplicate address detection manet simplest node common coordinated management mesh described life complicated node individually owned owner wish place limit transit trafÔ¨Åc trafÔ¨Åc passing owner s node acceptable situation faced scheme offer community internet access finally observe manet great theoretical practical impact modest unknown example corporate environment mesh network mesh network appear useful emergency situation rural setting setting conventional infrastructure network failed disabled routing manet routing manet lan layer using physical address ip layer minor bending rule way node Ô¨Ånd existence node appropriate route lected route selection use mechanism later algorithm routing lan layer like routing ethernet switch node construct appropriate forwarding table unlike ethernet multiple path destination direct connectivity particular pair node come negotiation required determine manet node serve forwarders routing ip layer involves issue algorithm able handle multiple path minor issue initially presented ip forwarding ip internet protocol assumed router decision looking network preÔ¨Åx address node network preÔ¨Åx assumed reachable directly lan model usually fails badly manet direct reachability address manet modiÔ¨Åed forwarding algorithm used address looked forwarding table simple way implement forwarding table contain entry discussed virtual private network multiple routing algorithm proposed manet performance given algorithm depend following factor size network node agreed serve router degree node mobility especially mobility applicable node especially routing node common administration agree defer transmission interest common good storage power availability wireless lansan introduction computer network release wimax lte wimax lte wireless network technology suitable data connection mobile stationary device wimax ieee standard original wirelessman metropolitan area network appears intermittently ieee standard earlier version intended ary subscriber later expanded support mobile subscriber subscriber version used provide residential internet connectivity urban rural area lte acronym stand long term evolution product mobile telecom world designed mobile subscriber beginning ofÔ¨Åcial radio protocol isevolved utra utra turn stand umts terrestrial radio access umts stand universal mobile telecommunication core mechanism standard dating year capacity wireless data plan come gb monthly cap mbps data rate allotment downloaded minute data rate isn t lte mobile version wimax marketed fourth generation networking technology itu speciÔ¨Åc deÔ¨Ånition developed ofÔ¨Åcially named including mbps download rate moving device gbps download rate stationary device wimax lte quite qualiÔ¨Åed technically marketer pediment event december itu issued statement recognized term undeÔ¨Åned applied forerunner technology lte wimax advanced lte true protocol band width use term data rate commonly called bandwidth avoid confusion meaning term wimax use unlicensed frequency like primary use licensed radio spectrum lte used exclusively licensed spectrum wimax lte support number option width frequency band wider band higher data rate downlink base station subscriber data rate mbps uplink rate usually smaller lte band range mhz mhz lower frequency tend better penetrating tree wall like wimax lte subscriber station connect central access point wimax standard prefers term base station use henceforth protocol lte ofÔ¨Åcially prefers term evolved nodeb enb coverage radius lte wimax kilometer versus meter wimax operate larger scale coverage radius ten kilometer distance increase data rate reduced base station typically mounted tower generally used area densely populated subscriber use lower antenna integrated discretely local wimax lte introduction computer network release architecture subscriber station expected able hear station interact base station uplink scheduling distance increase rtt kilometer rtt ¬µsec based speed light mbps time send byte making priority reduce number rtts end longer practical use collision resolve access contention practical use pcf mode polling mode polling requires additional rtts instead wimax lte rely scheduling transmission base station difÔ¨Åculty scheduling downlink transmission base subscriber base station simply sends packet sequentially parallel different set subcarriers ofdm used beamforming miso antenna used multiple physically directional antenna base station account uplink transmission subscriber base complicated coordinate subscriber station completes network entry process connect base station network entry assigned regular transmission slot including time frequency transmission slot vary size time base station regularly issue new transmission schedule subscriber station told effect transmit assigned frequency starting assigned time assigned length lte length start m wimax length station synchronizes clock base station network entry process subscriber station scheduled transmit transmission Ô¨Ånishes arriving base station just station s transmission begin arriving minimal guard interval need included consecutive transmission consecutive uplink transmission fact air simultaneously station need begin transmitting early signal arrive base station expected time diagram illustrates station separated relatively large physical distance typical wimax strategy uplink scheduling eliminates rtt polling mode polling mode entail scheduled timeslots periodic appropriate voice occur varying vals request enter schedule lte focus qos wimax focus qos station data send include scheduled transmission request longer transmission interval request granted station send data data itsnext scheduled transmission slot station transmitting timeslot shrink minimum scheduled frequently doe disappear station data send remain connected base station sending message slot ranging uplink scheduling previous section requires subscriber station know distance base station subscriber station transmit message arrives base station wireless lansan introduction computer network release fig packet transit station packet propagate outwards station speed light like ripple spatially conÔ¨Åned concentric circle circle shown packet portion straight line station base represented heavy arrow packet arrive base sequentially overlap certain time actually begin transmission early equal propagation delay measurement process called ranging ranging accomplished rtt measurement delay replying subscriber message received simply need subtracted total rtt course delay need communicated subscriber distance base station used subscriber station s transmission timing determine power level signal subscriber station matter located arrive base station power network entry scheduling process eliminates potential collision normal data transmission remains issue initial entry network handoff involved new base station informed old base station send appropriate schedule moving subscriber station subscriber station just powered arriving area coverage potential transmission collision unavoidable fortunately network entry infrequent collision frequent subscriber station begin connection process base station listening base station s transmission message stream contain regular management message containing thing information available data rate direction included base station s message stream information attempt wimax lte introduction computer network release wimax timeslots called ranging interval subscriber station wait interval sends message base station ranging interval open station attempting network entry station transmits time collision process used collision doe occur lte entry process known rach random access channel base station designates certain m timeslots network entry slot subscriber chooses random predetermined random access preamble preamble reserved second form rach transmits timeslot corresponds kilometer larger lte cell fact subscriber doe know distance base doe matter preamble mathematically orthogonal way long subscriber choose preamble base station decode overlapping preamble receive thesetof preamble transmitted rach timeslot base station sends reply listing preamble received effect initial schedule indexed preamble newly entering subscriber station transmit actual data reply sent special temporary multicast address known aradio network temporary identiÔ¨Åer rnti base station doe know actual identity new subscriber identity learned new subscriber transmit base station according initial schedule collision occurs lte subscriber station misfortune choosing preamble rach timeslot case chosen preamble appear initial schedule mitted base station wimax collision rare network entry rare subscriber experiencing collision try rach timeslot choosing random new preamble wimax lte network entry time collision occur transmission scheduled base station collision subscriber station able use base station s transmission make Ô¨Årst ranging measurement subscriber ranging measurement hand send scheduled transmission mobility signiÔ¨Åcant difference stationary mobile subscriber mobile subscriber likely expect sort handoff base station subscriber move range Ô¨Årst second moving subscriber mean ranging information change rapidly exercise subscriber doe update ranging information transmit early late subscriber moving fast doppler effect alter frequency fixed wireless category includes system subscriber s location doe change subscriber outdoor antenna improved reception range system involve relay satellite terrestrial wireless lansan introduction computer network release terrestrial wireless terrestrial wireless called terrestrial broadband broadband involves direct satellite radio communication subscriber central access point access point usually serve multiple subscriber microwave link exist access point serve area radius ten mile pending technology common range mile wimax form terrestrial wireless frequency licensed unlicensed censed frequency band available mhz ghz ghz nominally band require transmission used requirement stricter frequency increase lower frequency tend better seeing tree obstruction tree v signal fixed wireless introduction computer network release photo author attempting improve ghz signal tree trimming terrestrial Ô¨Åxed wireless originally popularized rural area residential density low economical cable connection isps operate urban area using wimax advantage terrestrial remote area antenna cover smaller geographical area satellite generally meaning higher data rate available user cost megabyte lower outdoor subscriber antenna use parabolic dish improve reception size range cm diameter size dish depend distance central tower standardized system wimax number etary alternative including system trango canopy system fact considered bastion proprietary lan protocol lack standardization variety factor primary one relatively modest overall demand service fact antenna need professionally installed isp ensure properly mounted aligned grounded protected lightning satellite internet extreme case Ô¨Åxed wireless satellite internet signal pas satellite chronous orbit km earth s surface residential customer parabolic antenna ically cm diameter larger used terrestrial wireless smaller dish antenna used access point geosynchronous satellite orbit mean antenna need pointed installation transmitter power typically watt remarkably low signal travel km primary problem associated satellite internet long rtts propagation delay m added queuing delay access point personal experience suggested rtts close m norm long delay affect trafÔ¨Åc v oip gaming shall tcp problem bulk tcp transfer perform poorly long rtts provide partial compensation tcp issue satellite isps provide sort acceleration bulk downloads web page example downloaded rapidly access point streamed satellite user proprietary mechanism acceleration help interactive connection vpns common feature satellite internet low daily utilization cap typically hundred megabyte utilization cap directly tied cost maintaining satellite fact satellite cover great deal ground available capacity shared large number user delay issue associated satellite internet away satellite orbit km earth rtts comparable terrestrial internet direction antenna longer used large number satellite need launched provide coverage location data network satellite proposed launched wireless lansan introduction computer network release epilog wireless networking revolutionized world wealthy country connected time poorer region world wireless brought partial access internet huge number people course wireless revolution led conÔ¨Çicts allocation frequency spectrum exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution wireless lan seemingly important ieee standard station transmit station transmitting meant reduce collision standard state transmission ack frame shall commence sif period regard state medium ack sender doe notlisten Ô¨Årst idle network scenario transmission ack medium notidle doe notresult lision station just Ô¨Ånished transmitting packet station c c begin sending ack station b start transmitting hint example problem problem station c middle station recall simultaneous transmission result collision node fails able read signal result note c doe notsend ack despite b packet just sent intent purpose lost example collision problem node b c reach fourth node sending node suppose average contention interval network slottimes average packet size kb data rate mbps data rate take ¬µsec transmit packet long average contention interval ¬µsec b fraction total potential data rate lost contention analysis classic ethernet similar example wimax lte subscriber station expected hear point station infrastructure setting hand listening point transmission encouraged list way station respond packet sent station try come example station associated access point station associated different access point response need form transmission station required make response reception relevant packet quite spotty epilog introduction computer network release suppose wimax subscriber station moving speed maximum allowed earlier later subscriber packet arrive assume ranging process update station s propagation delay minute speed light b sender second time second spent guard interval accommodating arrival need double time base station tell signal moving subscriber arrive earlier later exercise outline ground model wireless transmission signal power inversely proportional fourth power distance following usual square law familiarity trigonometric manipulation necessary suppose signal near transmitter sin ùúãft amplitude f frequency t time signal power proportional distance r amplitude reduced factor power reduced signal delayed time c speed light giving sin ùúãf t sin ùúãft ùúãùúÜr wavelength received signal superposition signal path reÔ¨Çection ground following diagram height r reflected path signal sender receiver shown equal height ground simplicity assume ground reÔ¨Çectivity reasonable shallow angle phase ground signal reversed reÔ¨Çection delayed slightly slightly longer path formula length path term r eliminate square root using approximation small x need factor r expression b simplify difference reÔ¨Çection signal path use approximation sin x sin y sin co co co x x use complex exponential noting sin x real eix assume smaller wavelength start sin ùúãft ùúãùúÜr sin ùúãft help isolate r subexpression time writing follows adding subtracting identical middle term sin ùúãft ùúãùúÜr sin ùúãft ùúãùúÜr sin ùúãft ùúãùúÜr sin ùúãft sin ùúãft ùúãùúÜr sin ùúãft ùúãùúÜr sin ùúãft wireless lansan introduction computer network release c approximate amplitude difference proportional making relative power proportional handshake security suppose station b bad record successful handshake station access point leaf network b attempt replay attack b us s packet handshake exactly point doe handshake break exercise introduction computer network release wireless lan wired era quite ethernet occasional link joining different site important wired alternative like token ring historical importance like virtual circuit great conceptual importance far relatively modest signiÔ¨Åcance mpls protocol label switching mpls virtual private network suppose want connect workplace network home workplace security policy doe allow outside ip address access essential internal resource proceed leasing dedicated telecommunication line workplace virtual private network vpn provides solution support creation virtual link join Ô¨Çung node internet home computer creates ordinary internet connection tcp udp workplace vpn server packet encapsulation used avoids timeout problem created sending tcp packet tcp stream mobile ip end connection typically associated virtual network interface virtual interface assigned ip address virtual interface essential vpns created ipsec ipsec generally omit packet sent virtual link actually encapsulated sent original internet connection vpn server wending way commodity internet process called tunneling intent purpose virtual link behaves like physical link tunneled packet encrypted encapsulated separate issue relatively example tunneling mechanism treat tcp connection serial line send packet using ppp hdlc hdlc andrfc lead timeout problem workplace virtual network interface vpn server attached router switch home user s end virtual network interface assigned internal workplace ip address home computer intent purpose internal workplace network diagram user s regular internet connection hardware interface connection established site s vpn server virtual interface created user s machine appears direct link vpn server interface assigned ip address packet sent interface fact travel original connection internet introduction computer network release internet site vpn serversite private vpn blue link represents tunnel actual connection interface virtual network interface address vpn set home host s interface appears locally connected site home host allowed connect private area site home host s forwarding table conÔ¨Ågured trafÔ¨Åc site s private address routed interface vpns commonly used connect entire remote ofÔ¨Åces headquarters case end tunnel ofÔ¨Åce s local router tunnel carry trafÔ¨Åc workstation remote ofÔ¨Åce application vpns include trying appear geographically location bypassing Ô¨Årewall rule blocking speciÔ¨Åc tcp udp port improve security common residential end vpn connection use vpn connection default route trafÔ¨Åc needed maintain vpn require entry residential end allow packet carry vpn tunnel trafÔ¨Åc routed correctly routing strategy mean potential intruder access residential host workplace internal network original residential internet access consequence home worker downloads large Ô¨Åle workplace site travel Ô¨Årst workplace internet vpn connection Ô¨Ånally arrive home improve congestion response ip packet marked router experiencing tion explicit congestion notiÔ¨Åcation ecn marking outer ing packet mark transferred remote endpoint vpn inner encapsulat ed packet mark lost congestion response suffer rfc spell proper strategy general rfc deÔ¨Ånes ipsec ipsec older vpn protocol support congestion carrier ethernet carrier ethernet link site subscriber interface end line look like ethernet Ô¨Çavor physical path site need lansan introduction computer network release ethernet implemented carrier wish particular appear length far exceed maximum permitted ieee ethernet standard seen ethernet kind generic virtual interface wide variety physical implementation speed carrier ethernet take view logical conclusion ethernet term endpoint interface intervening network bandwidth purchased increment carrier implemented uplink bandwidth different downlink perfectly reasonable endpoint ethernet interface faster bandwidth provided eggigabit ethernet interface mbps link point carrier ethernet provide layer abstraction customer need install commodity ethernet interface provider upgrade link implementation requiring change customer end sense carrier ethernet similar widespread practice provisioning residential dsl cable router ethernet interface customer interconnection actual link technology look like ethernet interface carrier ethernet connection look like virtual vpn link run provider s internal network internet large carrier ethernet connection provide primary internet connectivity endpoint unlike internet vpns assume endpoint internet connectivity token ring signiÔ¨Åcant previous chapter devoted classic ethernet s collision mechanism porting shared medium access come surprise simple mechanism support fairness sense n station wish send receive opportunity method token ring actual implementation come form data interface fddi ibm token ring central idea station connected ring f dcb ea packet transmitted direction clockwise ring station effect forward packet ring remove packet accurate think forwarding representing default cable connectivity represents station s momentarily breaking connectivity network idle station agree forward special small packet known token station say wish transmit Ô¨Årst wait token arrive instead forwarding token ring introduction computer network release token transmits packet travel network removed point case point Ô¨Ånishes transmitting data packet forward token small ring network ring circumference small fraction packet ring network large point packet entirely transit ring slightly different solution apply case possible physical ring exists switch station connected switch using usual wiring station packet send like following wait token sends packet sends token b b sends packet b sends token c c sends packet c sends token d station equal number chance transmit bandwidth wasted collision station constantly sending smaller packet send number packet station constantly sending larger packet bandwidth smaller proportion smaller packet size problem token ring station powered essential packet continue forwarding usually addressed having default circuit conÔ¨Åguration loop closed issue station watch case token disappears case duplicate token appears fairness lack collision ibm token ring considered premium lan mechanism token ring hardware commanded substantial price premium ethernet s combination lower hardware cost higher bitrates taking collision account eventually won earlier hybrid mbps ethernet token ring known token bus ethernet physical network linear used protocol layer station physically connected linear ethernet assigned identiÔ¨Åers logically arranged virtual ring station wait token transmit packet send token station virtual ring real token ring mechanism need place monitor token loss token bus ethernet caught additional software complexity doubt problem real issue necessary virtual circuit Ô¨Ånal lan example atm need detour brieÔ¨Çy virtual circuit lansan introduction computer network release road taken close reading robert frost s poem referenced reveals supposed great difference road exists narrator s retrospective imaginings road fact really apply datagram forwarding billing virtual circuit road taken ip switching routing alternative datagram switching introduced ter datagram switching router know destination packet addressed destination switching router know connection packet dressed connection id data packet sent connection need established Ô¨Årst connection route computed link path assigned connection id traditionally called vci virtual circuit identiÔ¨Åer case vcis locally unique connection use different vci link lack global uniqueness make vci allocation simpler vci keep changing path vci thought identifying connection send packet host mark packet vci assigned link packet arrive depart switch port assume numbered beginning switch maintain connection table indexed byxvci portypairs unlike forwarding table connection table record connection switch particular moment packet arrives inbound vci inand inbound port inare looked table yield outbound xvci port outypair vci Ô¨Åeld packet rewritten vci packet sent port note typically source address information included packet sender identiÔ¨Åed connection identiÔ¨Åed vci point connection packet identiÔ¨Åed connection destination node path including endpoint principle look connection Ô¨Ågure endpoint note switch rewrite vci datagram switch rewrite address update Ô¨Åelds advantage rewriting vcis need unique given link greatly simplifying naming datagram switch make use packet s arrival interface example consider network switch port numbered path drawn f red b d green link labeled vci number color construct connection f shown red e c b d shown green virtual circuit introduction computer network release d b c f separate connection following vcis chosen connection choice randomly accordance requirement unique link link generally taken bidirectional vci used reused Ô¨Årst connection close f path go e path go particular reason opposite corner square c b d b f verify link different path use vci construct actual xvci portytables switch table left exercise note xvci port inyor thexvci port outycan used key pair column column help display port number switch upper number following diagram red connection f lower number vcis switch vci inport invci port connection a√Ω√±f a√Ω√±e a√Ω√±c b√Ω√±d a√Ω√±f lansan introduction computer network release switch vci inport invci port connection a√Ω√±f b√Ω√±d a√Ω√±f switch vci inport invci port connection a√Ω√±e a√Ω√±c b√Ω√±d switch vci inport invci port connection a√Ω√±f a√Ω√±e a√Ω√±f namespace vcis small compact egcontiguous typically vci port bitÔ¨Åelds concatenated produce xvci portycomposite value small suitable use array index vcis work best local identiÔ¨Åers ip address hand need globally unique sparsely distributed switching offer following advantage connection guarantee switch aware connection reserve capacity time connection header smaller allowing faster throughput header small allow efÔ¨Åcient support small packet size optimal voice connection atm packet instance byte data datagram forwarding hand offer advantage router state information manage router crash partial connection state loss problem router link disabled rerouting easy doe affect connection state mentioned chapter paul baran s primary concern paper introducing packet switching billing difÔ¨Åcult point quite important era arpanet oped typical daytime rate order unlikely early protocol development fertile participant needed justify billing cost project virtual circuit introduction computer network release certainly possible switching globally unique vcis say concatenation source destination ip address port number rsvp protocol rsvp doe exactly advantage compact namespace lost label switching label switching mpls plication virtual circuit note switching doe notsuffer problem idle channel consuming source issue circuit using multiplexing egshared line asynchronous transfer mode atm atm network mechanism intended accommodate trafÔ¨Åc bulk data transfer present atm lan layer used originally proposed replacement ip layer extent transport layer broader plan greeted universal enthusiasm ietf used lan layer ip packet transmitted atm atm segmentation reassembly distinctive feature atm small packet size atm root telephone industry particularly intended support voice signiÔ¨Åcant source delay voice trafÔ¨Åc packet Ô¨Åll time speed kbps voice data accumulates sending kb packet mean voice delayed second meaning turn person stop speaking earliest hear s response second later slightly smaller level voice delay introduce annoying echo smaller packet reduce Ô¨Åll time delay voice sent ip v oip common method send byte atm took strategy packet byte data plus byte header small packet called cell manage small header routing necessity ip packet small size likely consume bandwidth header lan header included aside reduced voice beneÔ¨Åts small cell reduced delay minimal queuing delay trafÔ¨Åc prioritizing trafÔ¨Åc giving precedence priority trafÔ¨Åc standard trafÔ¨Åc allowed interrupt transmission begun packet voice cell packet just started cell wait cell time byte cell trafÔ¨Åc instead cell wait Ô¨Årst cell Ô¨Ånish delay atm decision require cell penalty partially used cell small having Ô¨Åxed cell size simpliÔ¨Åes hardware design theory allows easier design parallelism unfortunately designer atm chose mandate cell reordering mean cell use smaller Ô¨Åeld make parallel switch harder build typical parallel switch design involve distributing incoming cell input queue queue handle vci lookup parallel forward cell appropriate output queue architecture avoiding reordering difÔ¨Åcult clear extent decision related later decline atm marketplace lansan introduction computer network release atm cell byte data header header contains bit vci information type bit priority clp bit checksum header vci divided bit virtual path identiÔ¨Åer bit virtual channel identiÔ¨Åer supposedly customer use separate multiple connection endpoint forwarding switching mechanism physical lan broadcast atm segmentation reassembly small packet size atm deÔ¨Ånes mechanism segmentation reassembly larger packet individual atm link ip network quite practical mechanism called atm adaptation layer aals aal aal separate layer merged aals used trafÔ¨Åc consider atm mechanism deÔ¨Åned intended apply large data cell subdivided furthermore segmentation applied point data enters network reassembly exit atm path fragmentation hand applies conceptually ip packet performed router network aal Ô¨Årst deÔ¨Åne wrapper ip packet called convergence sublayer protocol data unit preÔ¨Åxes bit bit plus padding rear chop chunk needed chunk go atm payload following bit worth additional type Ô¨Åeld begin new continue end sequence number good catching dropped cell messageid Ô¨Åeld checksum total byte header byte data overhead did sit community aal developed aal moved checksum increased bit bit mid Ô¨Åeld discarded used wanted send different type message simply created virtual circuit bit atm header taken used indicate start new continuation existing chopped chunk used entire body atm cell byte header byte data overhead error detected asynchronous transfer mode atm introduction computer network release detects lost cell impossible crc longer cell sequence number reassembly simply matter stringing consecutive cell order arrival starting new appropriate bit indicate receiver strip header receiver verify checksum cell received note strategy fail general atm requirement cell reordering different cell different virtual circuit jumbled atm backbone virtual circuit cell packet sent right typical ip packet divide cell aal mean total bit devoted crc code versus bit aal aal reliable paradoxically reason error rare typically suppose single error iea single cluster corrupted bit small likely conÔ¨Åned single cell aal checksum fail detect error checksum corrupted packet chance happen equal checksum original packet probability aal checksum fail detect error probability error cell corrupted fail detect error probability better aal reliable error cell point better switch correcting code moral checksum entire message better multiple shorter checksum part message epilog wired lan called ethernet tempting ip world write atm niche technology virtual circuit conceptual alternative datagram forwarding shall quality service ip problem handling trafÔ¨Åc virtual circuit offer solution internet far embraced small step virtual circuit mpls label switching mpls remain tantalizing strategy exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution lan suppose remote host us vpn connection connect host b ip address s normal internet connection device ip address s vpn connection device ip address want send packet encapsulated forwarded connection b suppose s ip forwarding table set trafÔ¨Åc us trafÔ¨Åc us happens intruder m attempt open connection lansan introduction computer network release route packet m b suppose s ip forwarding table mi conÔ¨Ågured alloutbound trafÔ¨Åc us happen try send packet suppose remote host wish use vpn connection connect host b ip address vpn software available host host able run software virtual machine v hosted v respective ip address virtual network connecting v reach outside world network address translation network address translation acting v s nat router v run vpn software forward packet addressed b usual way using nat trafÔ¨Åc destination encapsulates vpn conÔ¨Ågure ip forwarding table make use vpn prefer assume v physical host connecting second interface act v s nat router token bus proprietary network worked like token ring small token packet sent station order station transmit just received token data rate mbps token byte long ethernet minimum packet size average wait receive token idle network station average number station token pas ignore propagation delay gap ethernet requires packet b sketch protocol station sort decide order token transmission order station s s station s isends token station s mod n contained proposal sending ip packet atm n cell followed cell containing xor previous cell way receiver recover loss cell suppose mechanism packet require cell transmit send suppose p presumably small send cell mechanism probability cell lost retransmit entire give average retransmission extra packet value p approach involve total number cell transmission example virtual circuit vci table switch suppose following network switching table port identiÔ¨Åed node end identify exercise introduction computer network release connection begin Ô¨Årst connection entry table path connection vci link path switch vci inport invci port switch vci inport invci port b switch vci inport invci port c switch vci inport invci port d network previous exercise switching table port identiÔ¨Åed node end identify connection path connection vci link path switch vci inport invci port lansan introduction computer network release switch vci inport invci port b switch vci inport invci port switch vci inport invci port d suppose following network switching table following connection route shortest path b c d whichever notused set switch deÔ¨Åne entry virtual circuit b follows path switch visited twice exercise introduction computer network release link lowest logical level network link look like serial line chapter address packet structure built serial line encoding framing encoding determines bit byte represented serial line framing allows receiver identify beginning ending packet conclude serial line offered telecommunication industry sonet link tie internet based encoding framing typical serial line ultimately stream bit byte identify byte boundary slightly complicated fact beneath logical level serial line generally avoid transmitting long run identical bit receiver simply lose count theclock synchronization problem called clock recovery problem mean way just send desired bit sequentially example extra bit inserted break long run exactly encoding mechanism settled transmission bit step determine receiver identiÔ¨Åes start new packet ethernet packet separated physical gap link mechanism packet sent break tell packet stop begin framing problem summarize encoding correctly recognizing bit stream framing correctly recognizing packet boundary related long electrical serial line addition requirement want average voltage zero want dc component concern line short major concern nrz nrz zero simplest encoding corresponds direct transmission s s data signal level loandhi set signal depending data bit diagram note diagram signal bit aligned start pulse representing signal value introduction computer network release nrz encoding hi lo nrz replaces earlier rz return zero encoding hi lo corresponded pair pulse corresponding consecutive bit brief return level drawback nrz distinguish signal simply idle problem lack synchronization long run s long run s receiver lose count egif receiver s clock running little fast slow receiver s clock doe resynchronize transition level suppose bit sent ¬µs sender sends Ô¨Åve row receiver s clock running fast signal sent hi pulse pulse end receiver s clock read ¬µs clock speedup represent Ô¨Åve nrzi alternative help obviously Ô¨Årst nrzi nrz inverted encoding represent change transition lo hi hi lo nrzi encoding transition transition signal transition aligned represented lack transition solves synchronization problem run doe address run nrzi combined technique minimize run manchester manchester encoding sends data stream using nrzi addition clock transition pair consecutive data bit mean signaling rate double data rate mhz ethernet doe use manchester encoding signaling doubled bandwidth inserted pair consecutive data bit removing extra bit receiver linksan introduction computer network release clock clock clock clock clock clock clock clock clock clock clock clock clock clock clock clock manchester encoding nrzi alternating clock transition transition mean longest clock count clock synchronization essentially solved expense doubled signaling rate encoding nybble data actually transmit designated symbol code selected symbol sense digital analog transmission unit decodes set data bit data bit transmitted individually transmission symbol individual bit nearly universal link including form ethernet faster link speciÔ¨Åcally symbol used leading trailing symbol corresponding data sent nrzi run s safe note run length note signaling rate time data rate used ethernet mbps fast ethernet mapping data value symbol Ô¨Åxed standard data symbol data symbol idle halt start end reset dead sixteen possible symbol allows symbol used signaling data idle halt start end reset shown used include control status information fear confusion data combination control symbol lead sequence halt reset leading ethernet pad short packet minimum packet size meaning protocol layer able distinguish padding actual data ethernet us encoding doe make use special symbol packet padding gigabit ethernet us encoding gigabit ethernet doe use special encoding framing introduction computer network release symbol inserted hardware pad packet ambiguity receiving end data byte ended choice symbol principle arbitrary note data simply insert fourth position insert fourth position Ô¨Årst symbol zero follow obvious pattern framing doe receiver tell packet stop begin running seen following technique addressing framing problem determining packet end interpacket gap ethernet special bit pattern putting length Ô¨Åeld header work principle widely used problem technique restoring order desynchronization difÔ¨Åcult considerable overlap framing encoding example existence bit pattern attempt solve encoding problem special pattern used unambiguous frame delimiters hdlc hdlc data link control general packet format used number tions including protocol ppp turn used pppoe ppp ethernet great internet subscriber connect isp frame relay used protocol delivering ip packet site telecommunication line hdlc support following method frame separation hdlc asynchronous link byte stufÔ¨Ång hdlc synchronous link bit stufÔ¨Ång basic encapsulation format hdlc packet begin end frame byte binary problem byte occur data make sure don t misinterpret data byte end frame asynchronous serial line sort indication typically byte line tend slower kind line hdlc us byte escape character data byte escaped preceding additional actually transmitted followed xor strategy fundamentally used character string string delimiter escape character occurrence string escaped preceding synchronous serial line typically faster asynchronous hdlc generally us bit stufÔ¨Ång underlying bit encoding involves say reverse nrzi transition denote lack transition denote mean long run s problem run s safe linksan introduction computer network release Ô¨Åve consecutive appear data inserted stuffed transmitting hardware regardless data bit hdlc frame byte appear encoded data contains row data transmitted hdlc receiver know row mark end packet Ô¨Åve row seen followed removed example data sent stuffed bit bold note bit stufÔ¨Ång used hdlc solve unrelated problem synchronization problem long run bit cause receiver lose count framing problem transmitted bit pattern represents Ô¨Çag mistaken data byte insertion occasional extra bit byte problem data delivery anathema voice engineer extra bit upset precise kbps rate result long telecom line prefer encoding like introduce timing Ô¨Çuctuations long electrical line tend require encoding guarantee average voltage level versus half bit v half v nrz signal dc component theami alternate mark inversion technique eliminates dc component using voltage level nominally ternary encoding known bipolar zero bit encoded voltage alternating value volt bit encoded compactly long run s s cancel plain ami synchronization problem long run solution used north american line mbps known bipolar substitution sender replaces run zero bit special decide sender check previous sent Ô¨Årst pattern substituted second pattern substituted way lead instance violation rule consecutive opposite sign example previous bit receiver see encoding bit box originally zero arrow link violation clue receiver special pattern removed replaced original encoding framing introduction computer network release multiplexing classical circuit switching mean separate wire connection common use residential telephone connection subscriber dedicated wire central ofÔ¨Åce separate physical line connection solution scale time uncommon link computer serial line packet network Ô¨Åle transfer telnet logins way problem approach line dedicated application user time packet switching naturally implement multiplexing sharing link demultiplexer destination address port number allow demultiplexing multiple stream destination host way multiple channel share single wire approach multiplexing putting channel different carrier frequency analog cable television did protocol calling wavelength multiplexing pervasive alternative packet voice telephone s time division tiplexing tdm preÔ¨Åxed adjective synchronous idea decide number channel n length timeslice t allow sender send channel time t sender taking turn style sender get send time t regular interval nt receiving total bandwidth timeslices consume bandwidth header address small space dedicated maintaining synchronization endpoint diagram sending b c d e f g h b c d e f g h b multiplexing note sender send timeslice used sender data trafÔ¨Åc bursty involving considerable idle period tdm traditionally rejected data network line tdm work extremely voice network continues work timeslice t small approach fail header overhead unacceptable consider moment telecom digital signal hierarchy single digitized voice line north america sample second kbps known channel lowest level hierarchy known logical level line represents line multiplexed tdm channel sends single byte time second line carry byte user data byte channel plus bitfor framing total bit give raw line speed mbps note frame size single byte efÔ¨Åcient way send packet advantage approach greatly reduces latency line biggest source delay digital voice line packet Ô¨Åll time sender s end sender generates voice data rate packet sent kb linksan introduction computer network release packet s quarter second standard v voip channel rtp used byte data sent m atm packet sent delay sent line m negligible fair m m turn pretty negligible term quality strategy mean multiplexer need essentially buffering important introduced common digital signal line represents tdm ing signal problem individual run little slow elaborate pulse stufÔ¨Ång protocol developed allows extra bit inserted speciÔ¨Åc point necessary way original component exactly recovered clock irregularity solution did scale level past rarely used originally intended way bundling multiple channel single line allows provider offer leased digital link data rate multiple rate sonet sonet stand synchronous optical network telecommunication industry s standard nism tdm optical Ô¨Åber Ô¨Çexibility regarding optical synchronous taken quite seriously sonet sender receiver use precisely synchronized clock atomic actual bit encoding nrzi frame structure longest possible run bit byte usually accurate reception requires clock accurate minimum potentially reach sonet feature involving xor Ô¨Åxed bit pattern ensure case byte primary reason sonet s accurate clocking problem using term problem demultiplexing remultiplexing multiple nent bitstreams setting stream run slow primary design goal sonet allow multiplexing need pulse stufÔ¨Ång used digital signal hierarchy sonet tributary stream effect allowed run slow sonet doe provide occasional small byte slip furthermore multiple sonet stream demultiplexed switching center remultiplexed new sonet stream synchronization mean stream fall get ahead basic sonet format known data organized byte grid Ô¨Årst byte row Ô¨Årst column form frame header frame addressed sonet protocol node sends continuous sequence frame neighbor frame reach destination principle need fully demultiplexed data forwarded practice shortcut demultiplexing multiplexing introduction computer network release actual byte sent scrambled data xored standard Ô¨Åxed pseudorandom pattern transmission introduces clock resynchronization occur high degree probability special column frame guaranteed contain mum run data byte limited longest run possible s Ô¨Årst byte frame sonet s check based verifying byte value start frame receiver desynchronized begin frame synchronization procedure receiver search byte regular spacing frame right place receiver sure looking synchronization byte position note evident byte boundary sonet frame receiver check beginning bitposition sonet frame transmitted rate canonical byte sampling rate standard kbps line classic application sonet transmit multiple voice call using tdm frame data byte position given voice channel byte position consecutive frame constitutes byte second basic data rate mbps exactly customer leased channel transmit data sonet link look like fast bitstream standard way encoding data packet sonet encapsulate data atm cell embed cell contiguously bitstream send ip packet encoded bitstream using bit stufÔ¨Ång mean sonet byte ip byte longer correspond advantage hdlc encoding make sonet vanishingly infrequent ip backbone trafÔ¨Åc today travel sonet link frame payload envelope region nominally following header column payload region reserved column meaning column byte available data payload envelope Ô¨Çoat physical byte frame input frame running slow output physical frame transmitted correct rate letting payload frame slip backwards byte time similarly input frame arriving slightly fast slip forward byte time extra byte stored reserved location header column physical frame faster sonet stream multiplexing slower one step frame frame byte properly physical layer called optical carrier faster line multiplexed combination linksan introduction computer network release line higher level sts stm line rate mbps mbps mbps exactly gbps gbps gbps usable capacity typically line rate column frame overhead sonet provides wide variety leasing option various bandwidth customer lease entire larger unit alternatively data column frame divided seven virtual tributary group column group leased individually multiple divided column work just data rate optical transport network optical transport network otn itu speciÔ¨Åcation data transmission optical Ô¨Åber primary standard preliminary version published version released otn abandon sonet s frame rate otn widely used voice transmission longer quite perfectly Ô¨Åts model standard otn frame diagrammed frame arranged row helpful view column divided supercolumns frame payload overhead payload error correction byte byte payload byte payload overhead otn frame format column rowserror correction frame overhead portion available carrying customer data highlighted blue unlike sonet payload portion frame allowed Ô¨Çoat column end code correcting code addition error correction major advantage otn sonet otn come primary rate variant rate chosen sonet stream gbps exactly Ô¨Åts blue payload portion multiplexing introduction computer network release frame mean line rate gbps frame rate turn stream multiplexed single stream stream multiplexed single stream frame layout doe change frame rate increase data rate doe increase exact multiple rate chosen payload additional column frame carried payload portion frame additional column serve specify detail interleaving frame leaf column data end result stream carry data line rate time rate time rate work gbps order handle multiplexing need pulse stufÔ¨Ång otn stream accuracy part million work byte frame region take care slack column frame devoted error correction sonet comparable default column used code speciÔ¨Åcally formulation byte code used byte payload exactly consistent relative size payload column code correct byte error used increase length cable run regeneration needed alternatively use reduce bit error rate hundredfold important tcp problem otn includes physical layer extensive support dense multiplexing dwdm form multiplexing meaning multiple independent otn stream carried relatively close wavelength greatly increase overall capacity given run Ô¨Åber dwdm work lower network layer frame organization outlined principle sonet implement dwdm practice dwdm integrated otn beginning optical fiber optical fiber lightning advantage optical Ô¨Åber particularly mountaintop observatory resistance damage interference lightning cable metal jacket add strength resist animal lightning resistance researched carefully sonet otn primarily exclusively used telecommunication carrier multiple alternative operation ethernet family little bitrate common ethernet copper wire standard support optical Ô¨Åber link fibre channel support copper distance supported ethernet range hundred meter ten kilometer generally link require use duplex avoid slot time requirement sender continue transmit rtt duplex common high ethernet speed short link mbps ethernet standard include linksan introduction computer network release support distance km limiting factor need signal regeneration ethernet optical standard include support km form ethernet deployed residential Ô¨Åber internet connection case meter involve copper speed gbps optical Ô¨Åber alternative include porting km respectively based sonet standard worth noting Ô¨Åber used short link gbps gbps speed gbps standard support distance meter ethernet standard come industry consortium ieee epilog completes discussion common physical link main takeaway point ting bit distance quite simple appear simple nrz transmission noteffective exercise exercise given fractional Ô¨Çoating point number allow interpolation future exercise exercise marked solution hint solution link encoded following nrzi signal Ô¨Årst bit shown argue sending nrzi requires clock accurate assume receiver resynchronizes clock transition received attempt sample bit middle bit s timeslot bit encoded following sequence b ambiguity Ô¨Årst transition clock transition data transition c example signal pattern consisting nrzi encoding doe contain consecutive nota valid manchester encoding data pattern used special marker epilog introduction computer network release encoding string net hint n ascii letter byte encoded following pattern careful case v suppose device forwarding sonet frame clock drift percentage incoming line mean output payload envelope slip backwards byte physical frame b sonet claimed sending required clock accurate sonet clock meet requirement fail second requirement hint requirement average packet chapter address abstract question packet close look transmission time consider big packet detect transmission error issue independent particular set protocol packet delay contributing source delay encountered transmitting packet lan signiÔ¨Åcant usually bandwidth delay time needed sender packet wire simply packet size divided bandwidth converted common unit bit byte packet mbps ethernet bandwidth delay bit ¬µsec propagation delay relating propagation bit speed light sion medium question delay distance divided speed light m ethernet cable signal propagation speed propagation delay ¬µsec start transmitting byte packet previous paragraph time Ô¨Årst bit arrives destination m away t ¬µsec bit transmitted ¬µsec bit arrives t ¬µsec minimizing delay century gamers known advantage player slow dialup link opponent eliminated literally respond updated Ô¨Årms set link trading center say new york chicago order reduce delay computerized trading millisecond count direct line sight new york chicago round km take m air signal propagate essentially speed light c Ô¨Åber slower absolutely straight run m glass Ô¨Åber s propagation speed presence trading m saving considerable Ô¨Ånancial signiÔ¨Åcance bandwidth delay word tends dominate lan network larger propagation delay begin dominate happens network faster bandwidth delay go propagation delay remains unchanged important difference bandwidth delay propagation delay bandwidth delay tional data sent propagation delay send packet bandwidth delay doubled propagation delay count introduction switch lead delay time spent reading entire packet retransmitted delay viewed additional bandwidth delay second link introduction computer network release finally switch introduce queuing delay depend competing trafÔ¨Åc look dynamic tcp note steady queuing delay constant average queue utilization look sender like propagation delay bandwidth delay packet sent arrive way queue pair experience single queuing delay delay example case b propagation delay ¬µsec bandwidth packet size byte ¬µsec bandwidth delay total transmit time packet ¬µsec ¬µsec ¬µsec send packet time rise ¬µsec add bandwidth delay propagation delay case b like previous example propagation delay increased m total transmit time packet ¬µsec ¬µsec ¬µsec packet ¬µsec case r b link propagation delay ¬µsec bandwidth packet size case total transmit time packet ¬µsec propagation delay ¬µsec introduces bandwidth delay ¬µsec r introduces delay second bandwidth delay ¬µsec case r b data sent packet total transmit time ¬µsec propagation delay bandwidth delay transmission Ô¨Årst byte second link overlap transmission second byte Ô¨Årst link packetsan introduction computer network release case link case link bandwidth delay ¬µsec propagation delay case ladder diagram represent transmission snapshot state transmission instant obtained drawing horizontal line middle case diagram example instant link active note sending smaller packet faster large packet expand important point let consider situation propagation delay signiÔ¨Åcant component continental roundtrip delay typically m propagation speed cable km cable route mile use m example bandwidth mbps kb ethernet packet bandwidth packet returning acks strung path send kb ethernet packet Ô¨Årst ack return scale delay typically simpliÔ¨Åed time orrtt time sending packet receiving response different delay scenario implication protocol network protocol easier design extra rtts cost build considerable forth exchange network protocol designer focus minimizing extra rtts extreme case consider wireless transmission moon sec rtt jupiter hour rtt home satellite internet service roundtrip propagation delay remarkably high compared purely terrestrial link dealing reasonably network egthe internet propagation delay usually larger bandwidth delay Ô¨Årst approximation bandwidth delay ignored mean bandwidth total delay effectively independent propagation delay small interrelated propagation delay dominates scale make simpliÔ¨Åcations diagramming illustration sends data packet b receives small ack return data packet traversing switch b data packet sent long unswitched link c introduce idealization bandwidth packet delay introduction computer network release delay width packet line longer matter later ladder diagram book type bandwidth product usually involving delay rtt represents send hear pending network time send continuously note use rtt instead time half pending packet returning acks approximate value m taken typical rtt rtt bandwidth m mbps kb m mbps kb m mbps mb m gbps mb packet delay variability link bandwidth delay propagation delay rigidly Ô¨Åxed quantity bandwidth speed light leaf queuing delay major source variability state affair let deÔ¨Åne rtt noload time take transmit packet b receive acknowledgment queuing delay reasonable approximation necessarily true rtt noload Ô¨Åxed quantity possible cause rtt variability ethernet network initial contention period transmission actually begin delay related waiting sender exactly queuing delay packet encounter considerable delay packetsan introduction computer network release end Ô¨Årst sent particular uncertainty introduced collision packet delivery time sender competing complicate delay measurement possible different packet routed slightly different path leading hopefully minor variation travel time handled differently different queue switch link s bandwidth vary dynamically imagine example link comprised usual channel channel currently use voice call consolidated single data channel caller data bandwidth cut alternatively router allowed reserve varying bandwidth trafÔ¨Åc depending demand bandwidth allocated trafÔ¨Åc vary perceived link bandwidth vary time packet compressed link layer packet able compressed finally mobile node involved distance propagation delay change quite signiÔ¨Åcant communicating wireless device taken road trip despite source Ô¨Çuctuation usually assume rtt noload Ô¨Åxed cially wish focus queuing component delay packet size big packet large kb small byte ethernet answer question equitable sharing line large packet allow sender timely access transmit network issue remains concern hand large packet waste smaller percentage bandwidth header case consider percentage doe exceed v example packet exception turn switch involved smaller packet better throughput link switch use simultaneously case delay example real effect damper support ip jumbograms atm protocol intended voice data push extreme packet byte data byte header example consider path b switch Ô¨Åve link b suppose send big packet Ô¨Åve smaller packet relative time b illustrated following Ô¨Ågure packet size introduction computer network release b b large packet link smaller packet link point advantage parallelism link handling packet link handling packet link handling packet Ô¨Åve smaller packet Ô¨Åve time header capacity long header small relative data signiÔ¨Åcant issue algorithm used tcp us idea continuous process sender sends continual stream packet travel case link use time error rate packet size packet size inÔ¨Çuenced modest degree transmission error rate relatively high error rate turn better send smaller packet error doe occur entire packet containing lost small error rate generally bit error rate p small approximate probability error packet working exact answer assuming independence approximation work best p small example exact value success rate versus p approximation packet approximation predicts chance error helpful example suppose bit corrupted random probability single bit packetsan introduction computer network release transmitted correctly higher error rate encountered real network packet probability bit packet transmitted correctly packet probability packet success rate suppose bit send packet packet nominally require smaller packet rate need retransmit packet retransmissions lost total number packet expect need send total bit sent let try packet success rate poor packet need sent average seven time lossless transmission require packet fact need packet bit moral choose packet size small packet encounter error fair large packet sent reliably cable link egtdm sonet wireless problem packet size trafÔ¨Åc concern regarding excessive packet size shall quality service common commingle bulk trafÔ¨Åc link trafÔ¨Åc straightforward priority trafÔ¨Åc mix meaning router doe begin forwarding packet packet waiting need sure case trafÔ¨Åc starve bulk trafÔ¨Åc packet begun transmission impractical interrupt component bound trafÔ¨Åc transmission time largest packet delay practical matter packet limited maximum ethernet packet size byte option jumbograms mb size transmitting packet mbps link take second likely large happy coexistence trafÔ¨Åc error detection basic strategy packet error detection add extra bit formally known code allow receiver determine packet corrupted transit corrupted packet discarded receiver higher layer distinguish lost packet received packet lost bit error occur frequently packet lost queue overÔ¨Çows essential data received accurately intermittent packet error generally fall category bit error thing like cosmic ray interference error typically generated nearby electrical equipment error type generally occur burst multiple bad bit packet occasionally malfunctioning network device introduce bursty error error detection introduction computer network release network v refrigerator loyola workstation used mainframe terminal kept losing connection eventually noticed connection dropped time ofÔ¨Åce refrigerator kicked sure cable ran directly fridge rerouting solved problem simplest mechanism single parity bit catch error straightforward generalization n bit error code catch error exercise internet checksum used ip tcp udp formed taking sum word message alternative way representing signed integer binary add positive integer sum doe overÔ¨Çow hardware word size identical form sum word b Ô¨Årst ordinary sum overÔ¨Çow bit add bit word size bit sum overÔ¨Çow suppose want sum exact sum leftmost overÔ¨Çow bit past wordsize overÔ¨Çow add bit numeric representation form zero ward verify quantity plus yield original quantity notation represents overÔ¨Çow guaranteed adding overÔ¨Çow bit cancel leaf original number fact sum unless bit summands summands add zero coincidence actual binary representation mean use checksum represent checksum calculated udp protocol allows efÔ¨Åciency reason udp packet include calculated checksum rfc stored packet s checksum Ô¨Åeld complement sum sum mean receiver calculates checksum range byte value obtained zero one complement long ago loyola internet connectivity wrote primitive stack allow use ethernet machine did machine did used private ip address form set header Ô¨Åelds zero paid attention implement addition simply used ip header did use udp checksum hey worked got real class b address block changed ip address software longer worked turned original version ip header byte small added word carry complement new address longer true soon Ô¨Ågured implement addition properly backup worked addition property make numerical calculation simpler packetsan introduction computer network release Ô¨Ånding sum series value defer adding overÔ¨Çow bit end speciÔ¨Åcally Ô¨Ånd sum value adding using ordinary addition forming sum upper lower upper represents accumulated overÔ¨Çow exercise Ô¨Ånd sum series value concatenating pairwise value taking sum previous paragraph forming sum upper lower somewhat surprisingly calculating sum series byte taken time doe matter convert pair consecutive byte integer using byte order binary data overÔ¨Çow byte added order byte virtue ordinary carry addition overÔ¨Çow byte added byte rule exercise finally way look sum fact remainder dividing message seen long binary number provided replace remainder equivalent zero value consisting sixteen similar decimal casting nine rule add digit number repeat process single digit digit remainder dividing original number analogy message looked large number written digit word process repeatedly adding digit single digit amount taking sum word remainder approach addition isn t practical doe provide useful way analyze checksum mathematically weakness code based sum transposing word lead sum error detected particular message fragmented fragment reassembled wrong order sum likely detect code better detecting certain kind systematic error example crc usually better internet checksum detecting transposition error mately effectiveness code depends length suppose packet corrupted randomly original error code ec code failto detect error occurred ec chance equal ec probability random code match small random change lead uniformly distributed random change ec tail end crc section doe mean packet received incorrectly packet free use error code packet actually corrupted rate corrupted packet sneak packet byte good chance accurately transferring terabyte chance terabyte cyclical redundancy check crc crc error code based long division polynomial coefÔ¨Åcients integer modulo use polynomial tends sound complicated fact eliminates need carry borrowing addition subtraction use coefÔ¨Åcients mean addition subtraction equivalent xor treat message binary giant polynomial m x using bit message successive coefÔ¨Åcients x standardize error detection introduction computer network release divisor polynomial p x degree n speciÔ¨Åcation given crc code requires giving polynomial speciÔ¨Åcation requires spelling bit order byte append n m x polynomial xnm x divide result p x checksum remainder r x maximum degree n bit reasonably secure hash network corruption hard systematic error result hash code crc secure intentional corruption given arbitrary message msg straightforward algebraic mean tweaking byte msg crc code result equal predetermined value appropriate range example crc suppose crc divisor making code message division repeatedly subtract using xor copy divisor shifted leading divisor line leading previous difference go quotient line lined digit shifted divisor online calculator sort thing eghere note extra appended dividend remainder crc code append code original message added zero algebraically xnm x r x actually transmitted converted polynomial yield remainder zero division p x slightly simpliÔ¨Åes receiver s job validating crc code just check remainder zero crc easily implemented hardware using register fast software implementation possible usually involving handling bit byte time precomputed lookup table entry randomly change bit packet create crc crc effectively independent random variable probability match n crc length packetsan introduction computer network release change just fewbits change notso random particular crc code choice underlying polynomial p x changing bit create new message guarantee crc internet checksum guaranteed know bit changed finally secure hash successor secure hash know admits knowing produce message hash code generally used network slower calculate crc generally used secure authentication function code link noisy add correction code called forward error correction allows receiver case Ô¨Ågure bit corrupted Ô¨Åx effect improving bit error rate cost reducing throughput code tend involve bit needed error detection typically communication technology prof unacceptably high rate wireless step introduce code protocol generally reduces virtual rate error rate corrected acceptable level easiest code visualize parity need o additional bit n data bit arrange square compute parity column row entire square extra bit diagram parity bit blue Ô¨Åfth row bit blue rightmost Ô¨Åfth column parity bit entire data square bit right corner suppose bit corrupted simplicity assume data bit exactly parity bit incorrect exactly bit incorrect incorrect bit mark column row incorrect data bit Ô¨Çip correct state make n large essential requirement single corrupted bit square likely n small choose different code entirely allows correction multiple bit way addition code easily increase size packet signiÔ¨Åcantly code double triple total number bit sent error detection introduction computer network release hamming code hamming code popular code add o log n additional bit n large material improvement o performance parity error infrequent data bit let number bit position write bit s position binary value position bit given data bit add code bit follows parity bit data bit parity bit data bit Ô¨Årst digit position bit position parity bit data bit second digit position bit position parity bit data bit digit position bit position tell error occurred Ô¨Årst code bit remaining code bit tell respective position bit incorrect bit example code bit correct Ô¨Årst digit position bit position bit identiÔ¨Åed incorrect data bit concrete example suppose data word code bit parity bit bit parity bit second half parity bit bold bit parity bit bold bit received bold bit Ô¨Çipped fact Ô¨Årst code bit wrong tell receiver error second code bit wrong Ô¨Årst bit position bit code bit right second bit position bit fourth code bit right bit position bit position bit binary receiver know incorrect bit position counting Ô¨Çipped correct state epilog issue presented glamorous play supporting role protocol design nonetheless inÔ¨Çuence pervasive think underlying physic internet early internet faster example propagation delay dominant limiting factor protocol revised limit number exchange classic example simple mail transport protocol smtp amended rfc allow multiple command sent called pipelining instead individually packetsan introduction computer network release periodic call support protocol exist bograms excess megabyte seldom used cost large packet described packet size protocol ethernet link incorporates detecting code chosen reÔ¨Çect underlying transportation reliability ethernet includes crc code example includes extensive code noisier wireless ronment fragmentation option fragmentation directly tied error rate packet size exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution packet suppose link propagation delay ¬µsec bandwidth long transmit packet link b long transmit packet link switch suppose path b single switch s s link tion delay ¬µsec bandwidth long send single packet b b long send packet b c long send packet b part b previous exercise change propagation delay ¬µsec ¬µsec suppose path b single switch s s propagation delay ¬µsec ¬µsec respectively bandwidth delay link ¬µsec ¬µsec respectively ladder diagram describes sending consecutive packet label time interval e right edge total time packet sent exercise introduction computer network release s b packet packet packet packet b c d e assume delay exercise bandwidth delay reversed bandwidth delay ¬µsec bandwidth delay ¬µsec propagation delay unchanged draw corresponding ladder diagram total time consecutive packet sent hint total time change suppose path b single switch s s bandwidth propagation delay follows link bandwidth propagation delay ¬µsec sb ¬µsec long send single packet b b long send packet b note s b link slower packet arrives s s Ô¨Ånished transmitting packet b suppose previous exercise link smaller bandwidth link larger bandwidth propagation delay unchanged long doe send packet b suppose Ô¨Åve link link bandwidth assume model propagation delay long single packet b b long Ô¨Åve consecutive packet b packetsan introduction computer network release diagram packet size help suppose n link path b diagram wish send m consecutive packet b let bd bandwidth delay single packet single link assume propagation delay link zero total bandwidth delay hint total time sum time take begin transmitting packet time packet packet take travel n note packet wait s ibecause ith packet take exactly long arrive th packet take depart repeat analysis error rate packet size compare probable total number byte need sent transmit using packet b packet assume bit error rate making error rate byte text claimed error code catch error n parity bit work prove claim hint pick length m consider message single message converted error using pigeonhole principle large m message m m error code e m e m occurs error code fails detect error converted m m consider following number decimal value parenthesis sum using division method treating hex number taking remainder mod result sum addition started note exact sum adding carry bit bit give sum Ô¨Årst pair b exact sum value binary sum value taking exact sum forming sum high low half note sum half let b denote pair byte integer corresponding b using conversion b using conversion exercise introduction computer network release sum using conversion respective integer convert byte using conversion end b using conversion case integer description text internet checksum overÔ¨Çow bit added addition Ô¨Ånal result obtained add word using arithmetic normal arithmetic modern hardware add upper bit sum lower bit overÔ¨Çow step add suppose message calculate checksum using polynomial Ô¨Ånd remainder using divisor crc algorithm presented requires process bit time possible algorithm n bit time precomputed lookup table size complete step following description strategy polynomial x consider following set bit sent parity data bit block parity bit rightmost column row bit corrupted parity detect error b error detected parity c parity correct error hint bit row column following message hamming code contains single error correct message b happens parity corrupted bit parity column parity row b following message hamming code error code portion determined packetsan introduction computer network release exercise introduction computer network release abstract sliding window chapter general look build reliable layer unreliable lower layer achieved policy packet transmitted acknowledgment received timeout interval packet resent class protocol implement known arq protocol automatic repeat request addition reliability want packet transit network support strategy used achieve known sliding window turn algorithm key managing congestion return tcp reno congestion management principle principle suggests trying achieve reliable port layer building reliability lower layer misguided approach implementing reliability endpoint connection described fact correct mechanism building reliable transport generally requires sequence numbering packet network path guaranteed reorder packet safe allow sequence number wrap surprisingly quickly sequence number work exercise hypothesis doe apply internet large assume conventional numbering data n nth data packet acknowledged ack n version sender sends outstanding packet time response packet retransmitted sender doe send data received ack n course receiving send ack n received data n packet play time absence packet loss lead following introduction computer network release stop waitdata ack data data ack data ack packet loss lost packet reality left half diagram illustrates lost data packet sender host sending data receiver host sending acks receiver aware loss see data n simply slow arrive abstract sliding windowsan introduction computer network release sender sender receiver receiver timeout lost data lost ackdata n data n ack n data n ack n timeoutdata n ack n right half diagram comparison illustrates case lost ack receiver received aduplicate data n assumed receiver implemented strategy response receipt duplicate data n retransmit ack n Ô¨Ånal example note possible ack n delayed similarly Ô¨Årst data n delayed longer timeout interval packet time actually lost sender receiver timeout late ackdata n data n ack n ack n data expecting ack case sending data n receiving delayed ack n expected ack considered normal event principle implement received implement receiver second example notby sender example sender received second ack n did retransmit data building reliable transport introduction computer network release implement lost packet lead deadlock sender receiver wait forever implement duplicate usually side implement different timeout value generally protocol work sorcerer s apprentice bug sorcerer s apprentice sorcerer s apprentice bug named legend apprentice cast spell broom carry water bucket time basin apprentice chop broom half stop Ô¨Ånd half carrying water animated version appears disney s set music paul dukas used post youtube link video disney blocked Ô¨Åndable online mickey mouse chop broom Ô¨Åve half minute start music strange thing happens implement side implement happen implementer take naive view retransmitting duplicate safer moral redundancy wrong thing let imagine plementation us strategy sender retransmitting timeouts initial ack delayed data retransmitted timeout following diagram packet mitted timeout second data duplication bilateral duplicate strategy abstract sliding windowsan introduction computer network release sender receiver data second data ack delayed timeout data second ack ack second data second ack data second data ack ack second ack sorcerer apprentice bug transmission black second transmission blue packet sent twice data transfer completes normally take double normal bandwidth usual Ô¨Åx usually sender retransmit timeout tcp doe tcp timeout retransmission exercise flow control provides simple form Ô¨Çow control prevent data arriving receiver faster handled assuming time needed process received packet rtt mechanism prevent data arriving fast processing time slightly larger rtt receiver wait send ack n data n arrived processed receiver ready data modest processing delay work quite processing delay long introduces new problem data n time retransmitted successfully received receiver send ack Ô¨Ånished processing approach twokinds acks ack wait n meaning data n arrived receiver ready data ack n meaning sender send data receiver send ack wait n data n arrives ack n processing presumably want sender time retransmit data n ack wait n received retransmission unnecessary introduces new problem subsequent ack n lost time connection deadlocked sender waiting ack n building reliable transport introduction computer network release lost receiver waiting data sender send lost ack n arrives solution receiver switch timeout model data received tcp Ô¨Åx problem involving polling tcp flow control sliding window reliable efÔ¨Åcient unless path involves intermediate switch signiÔ¨Åcant propagation delay path involves single lan link link path idle time Ô¨Åle transfer ideally like zero idleness slowest link linear bottleneck improve overall throughput allowing sender continue transmit sending data waiting ack n allow sender toofar ahead returning acks packet sent fast shall simply end waiting queue worse dropped queue link network sufÔ¨Åcient bandwidth packet dropped receiving end say data data simultaneously transit revisit ack mean doe mean receiver received data doe mean data data arrived assume acks cumulative ack n sent data k arrived k understanding ack lost ack make ack lost recovery retransmit data sender pick window size winsize basic idea sliding window sender allowed send packet waiting ack speciÔ¨Åcally sender keep state variable representing packet received ack end data packet numbered starting initially window size chapter assume winsize doe change tcp varies winsize goal making large possible introducing congestion return tcp reno congestion management instant sender send packet numbered winsize packet range known window generally Ô¨Årst link path slowest sender time sent ack n arrives n typically n window slide forward set increment upper edge window free sender send packet example winsize window ack arrives window slide forward freeing sender send data instead ack arrives window slide forward recall acks cumulative packet eligible sent packet reordering packet loss packet acked individually window slide forward unit packet time arriving ack ack abstract sliding windowsan introduction computer network release note rate acks returned exactly equal rate slowest link delivering packet slowest link bottleneck link delivering packet m receiver receive packet m acks return rate new packet sent average rate exactly matching delivery rate property effect reducing congestion automatically reducing sender s rate available fraction bottleneck bandwidth reduced video sliding window action winsize link embedded video doe display properly certainly case format node labeled second link capacity Ô¨Åve packet transit way Ô¨Çight windowful Ô¨Åve packet exactly Ô¨Åll link link capacity packet transit way video prepared using network animator nam described network simulation Ô¨Årst Ô¨Çight Ô¨Åve data packet leaf node just leaf node video time subsequent Ô¨Çights spaced seven second apart tiny packet moving leftwards node node represent acks beginning video Ô¨Åve returning acks previous windowful moment instant packet just received principle Ô¨Åve packet transit transmitted link data transmitted ack sitting queue doe happen video occasional video artifact frame ack packet visible bandwidth indicated previously packet delay bandwidth product represents data sent Ô¨Årst response received play large role analysis transport protocol literature bandwidth product abbreviated bdp bandwidth product generally optimum value window size catch sender chooses winsize larger rtt simply grows queuing delay point bandwidth match chosen winsize connection s trafÔ¨Åc inÔ¨Çate rtt actual rtt noload case winsize example reason sender interested bandwidth noload rtt sender s packet begun contributing congestion refer bandwidth noload product transit capacity route clearer winsize smaller mean underutilization network larger winsize mean packet spends time waiting queue simpliÔ¨Åed diagram sliding window window size path bandwidth bandwidth packet diagram show initial packet sent burst spread pas bottleneck link Ô¨Årst burst packet spacing uniform real protocol tcp generally attempt avoid initial burst sliding window introduction computer network release sliding window bandwidth winsize winsize ack data ack data ack data ack data ack data ack data ack data ack data data ack data data ack data ack data ack data ack data ack data ack data ack data ack data ack data ack data send packet rtt average packet rtt way window size lead link utilization respectively tempting envision setting winsize bandwidth practice complicated bandwidth rtt constant available bandwidth Ô¨Çuctuate presence competing trafÔ¨Åc rtt sender set winsize large rtt simply inÔ¨Çated point match winsize connection s trafÔ¨Åc inÔ¨Çate rtt actual rtt noload happens absence competing trafÔ¨Åc receiver surprisingly sliding window work pretty receiver assuming sender fact using larger value receiver diagram receives data n responds ack n difference larger sender winsize data n arrive faster abstract sliding windowsan introduction computer network release using algorithm single link assume packet reordered receiver winsize work quite switch introduced life complicated link throughput optimization packet reordering possibility common receiver use winsize sender mean receiver prepared buffer window packet window example data delayed receiver buffer data data like sender receiver maintain state variable completely synchronized sender s version instant receiver willing accept data data Ô¨Årst receiver buffer arriving packet data arrives receiver consult buffer send largest cumulative ack data received example window data data data buffer arrival data correct response ack data Ô¨Ålls gap receiver received data new receive window soon ack reach sender new send window loss recovery sliding window suppose winsize packet lost quite possible packet received cumulative acknowledgment sent ack sender doe know windowful possibility data generally data lost loss usually associated congestion especially notwish overburden network sender usually retransmit Ô¨Årst lost packet egpacket packet lost retransmission data sender receive ack assume data need sent packet did make retransmission sender receive ack know need retransmission packet send data normally data data time shortly data time Ô¨Årst sliding window protocol generally suppress response recovery complete timeout occurred usually process ground halt usually packet remaining Ô¨Çight described pipeline drain recovery process start implementation tcp shall later implement mechanism fast recovery early detection packet loss pipeline fully drained linear bottleneck consider simple network path shown bandwidth shown minimum bandwidth path bandwidth linear bottleneck introduction computer network release slow link refer slowest link bottleneck link tie slowest link Ô¨Årst link bottleneck bottleneck link queue form trafÔ¨Åc sent rate b pile queue trafÔ¨Åc notpile arrives rate departs furthermore sliding window used ratesender trafÔ¨Åc eventually queue router data reach b faster rate b return acks faster rate eventually send data faster rate rate trafÔ¨Åc pile signiÔ¨Åcant advantage speaking term winsize transmission rate sends b rate greater situation unstable bottleneck queue grows bound convergence steady state analogous instability us sliding window winsize chosen quite large winsize overÔ¨Çow bottleneck queue sender speciÔ¨Åes sending window size rate network converge steady state relatively short order queue develops steadily replenished rate packet depart Ô¨Åxed size simple analysis analyze effect window size overall throughput rtt consider following network path bandwidth labeled second fast assume backward b √Ω√±a direction connection inÔ¨Ånitely fast meaning zero delay good approximation ack packet travel direction negligibly small √Ω√±b direction assume link inÔ¨Ånitely fast bandwidth component make link bottleneck link queue form path bandwidth rtt second roughly equivalent alternative example use following c fast following assumption link inÔ¨Ånitely fast zero delay sec bandwidth delay packet sec link acks sec abstract sliding windowsan introduction computer network release bandwidth delay reverse direction scenario send packet take second ack return idle network mean delay rtt noload second model change signiÔ¨Åcantly replace bandwidth delay propagation delay case packet second packet second exercise assume single connection iethere competition bandwidth packet sec rtt case winsize case winsize bandwidth delay rtt table show sent second packet acknowledged second sent rtt actual sec equal rtt noload remain true winsize change small amount egto throughput proportional winsize winsize throughput packet second second router idle overall path utilization time b t sends queue sends sends sends sends acks note brief bottleneck link startup steady state queuing real protocol generally way minimizing initial pileup case winsize second slow link busy initial burst leading brief surge queue rtt actual data second rtt actual subsequent packet second queuing delay queue connection throughput packet second note overall path throughput equal bandwidth best possible throughput linear bottleneck introduction computer network release ta sends queue sends sends sends sends b acks just Ô¨Ånished sending data data arrives begin sending packet immediately queue develop case congestion knee chiu jain deÔ¨Åned congestion case winsize t sends queue sends sends sends sends b acks note packet sent acknowledgment received rtt second later packet rtt actual rtt risen rtt noload second second note continue send windowful rtt throughput rtt second initially conjecture winsize greater bandwidth noload product entire window transit time fact case sender doe usually entire window sent transit rtt inÔ¨Çated appears sender winsize equal product general winsize bandwidth noload happens extra packet pile router path speciÔ¨Åcally router bottleneck link rtt actual inÔ¨Çated queuing delay bandwidth bottleneck link mean winsize bandwidth actual total throughput equal bandwidth second rtt actual example packet spends second transmitted link abstract sliding windowsan introduction computer network release rtt noload second spent queue place packet wait looking table second packet queue bottleneck link Ô¨Årst link packet begin returning sender sent entire windowful case argue windowful queued sender sense sent suppose network example link transport b inÔ¨Ånitely fast reverse direction set winsize queue packet form rtt calculation make quantitative observation sliding window behavior queue utilization note rtt noload physical travel time subject limitation addressed packet delay variability time excess rtt noload spent waiting queue following hold regardless competing trafÔ¨Åc individual packet rtt actual rtt noload bottleneck link saturated busy number packet actually transit queued path bandwidth noload second send exactly windowful actual rtt assuming loss packet individually acknowledged best understood examining diagram simple argument send data n time t d ack n arrives time t rtt t t d deÔ¨Ånition time t athe sender allowed send data rtt interval t athe sender sent data n data winsize packet time rtt competing trafÔ¨Åc throughput actual throughput rate connection sending packet relationship hold winsize bottleneck bandwidth change suddenly case rtt actual change packet throughput seen measurement averaged rtt speciÔ¨Åc packet sender double winsize extra packet immediately end queue queue sender example clearer Ô¨Årst link inÔ¨Ånite bandwidth prevent bottleneck bandwidth cut half changing winsize eventually rtt rise queuing exercise sliding window steady state throughput rtt actual reasonably constant average number packet queue just throughput throughput measured throughput rtt actual rtt noload rtt noload actual linear bottleneck introduction computer network release little making averaging clearer packet spends time rtt actual rtt noload queue equation total time spent windowful packet winsize rtt actual rtt noload dividing rtt actual give average number packet queue rtt interval question presence competing trafÔ¨Åc throughput referred simply connection s current share total bandwidth value measure rate returning acks nocompeting trafÔ¨Åc winsize congestion knee winsize bandwidth noload winsize limiting factor throughput finally competition winsize rtt noload connection using capacity bottleneck link throughput equal physical bandwidth way rtt actual winsize bandwidth noload dividing Ô¨Årst equation rtt noload noting bandwidth noload winsize rtt noload regardless value winsize steady state sender sends faster bottleneck bandwidth bottleneck bandwidth determines rate packet arriving far end turn determines rate acks arriving sender turn determines continued sending rate illustrates nature sliding window return dynamic tcp issue bandwidth presence competing trafÔ¨Åc suppose sender winsize bandwidth noload leading Ô¨Åxed queue usage competition connection start competes bottleneck link Ô¨Årst connection s effective bandwidth decrease mean bandwidth rtt noload decrease connection s queue usage increase graph congestion knee consider following graph winsize versus throughput delay queue utilization abstract sliding windowsan introduction computer network release winsize winsize winsizedelayqueue utilization graph winsize versus throughput delay queue utilization vertical dashed line represents winsize bandwidth x delayt h r o u g h p u t critical winsize value equal bandwidth noload known congestion knee winsize throughput proportional winsize delay constant queue utilization steady state zero winsize larger knee throughput constant equal bottleneck bandwidth delay increase linearly winsize queue utilization increase linearly winsize ideally winsize critical knee exact value varies time available bandwidth change starting stopping competing trafÔ¨Åc rtt change queuing standard tcp make effort stay knee time presumably theory maximizing throughput important minimizing queue use thepower connection deÔ¨Åned sliding window knee rtt constant power proportional window size sliding window knee throughput constant delay proportional winsize power proportional graph akin winsize versus power power winsize linear bottleneck introduction computer network release simple implementation pseudocode outline receiver implementation ignoring lost packet timeouts abbreviate follows w winsize la packet expected window data structure earlyarrivals place packet delivered receiving application arrival data m m ignore packet m packet earlyarrivals deliver packet data application la slide window forward data earlyarrivals output data la send ack la possible implementation earlyarrivals array packet object size packet data m position m point packet arrival data earlyarrivals later packet present sender begin sending windowful packet data data w ting ack m arrives la m window slide forward allowed send data data simplest case arrival ack m m ignore packet set k Ô¨Årst packet just old window set la m just new window send data note new acks arrive loop line assume sender stolidly sends send doe start process additional arriving acks implementation asynchronous approach thread processing arriving acks incrementing la thread sending allowed send add support timeout retransmission transmitted packet need stored time sent periodically collection stored packet scanned looking abstract sliding windowsan introduction computer network release packet packet mitted packet data n acknowledged ack m m n deleted epilog completes discussion algorithm abstract setting return concrete implementation tftp sorcerer tcp sliding window important mechanism internet exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution sliding window sketch ladder diagram data lost Ô¨Årst time sent assuming sender timeout sender retransmits duplicate receiver timeout second continue diagram point data successfully transmitted assume rtt second sorcerer s apprentice diagram sorcerer s apprentice bug assuming sender doe notretransmit duplicate receiver doe ack delayed sender retransmits data suppose receiver implementation Ô¨Çaw data arrives ack ack sent separated brief interval receiver transmits ack data n arrives correct ack n draw diagram including rtts assume packet lost b average throughput data packet rtt normal average throughput c sender detect receiver behavior Ô¨Ånal packet assuming packet lost sender respond ack soon arrives note data packet islost receiver acknowledged creates problem alternative model simple analysis c fast using formula rtt calculation calculate queue usage window size epilog introduction computer network release b window size create table like simple analysis second create table simple analysis original b network winsize text example assume bandwidth delay link link reverse link b inÔ¨Ånitely fast carry table second create table simple analysis network ink inÔ¨Ånitely fast propagation delay direction zero bandwidth delay packet take sec travel packet sec travel assume carry table second note zero bandwidth delay multiple packet sent remain destination propagation delay behaves differently bandwidth delay suppose rtt noload second bottleneck bandwidth packet second window size needed remain just knee congestion b suppose eventual value rtt actual c packet queue steady state create table simple analysis network link inÔ¨Ånitely fast link bandwidth delay additional propagation delay link bandwidth delay packet second propagation delay reverse b √Ω√±a direction acks inÔ¨Ånitely fast assume winsize carry table second note need queue b continue table partially sufÔ¨Åcient verify rtt actual packet calculated previous exercise need packet fewer use hex label b c packet convenient notation hint column sends accurately process sending look like t sends abstract sliding windowsan introduction computer network release create table simple analysis network link inÔ¨Ånitely fast link bandwidth delay packet second link bandwidth delay additional propagation delay reverse b √Ω√±a direction acks inÔ¨Ånitely fast assume winsize recommended column time sends queue sends sends b acks hint sends column look like sends column hint previous problem start note bandwidth noload rtt calculation equation queue utilization carry table second b steady state doe packet queue meant half packet argue sends b using sliding window path b slowest link Ô¨Årst link eventually entire window outstanding instant just new ack come rtt noload m available bandwidth sliding window used transit capacity connection b rtt actual rise m use larger winsize packet queue time c winsize increase rtt actual suppose rtt noload m available bandwidth sliding window used transmission window size needed remain just knee congestion b rtt actual rise m use larger winsize packet queue time c value winsize lead rtt actual m d value winsize make rtt actual rise m suppose used assume packet lost reordered packet sent order arrive arrive order point receiver waiting data n packet arrival possible data n data consequence absence reordering make packet sequence number hint receiver waiting data n just received data sent ack sender sent data n transmit data k k n exercise introduction computer network release connection assume packet lost reordered packet sent order arrive arrive order data receiver s window meaning data received acknowledged longer possible late data arrive receiver consequence general principle absence reordering replace packet sequence number mod ambiguity suppose connection assume previous exercise packet lost reordered example data receiver s window receiver presumably sent ack data legitimately arrives bound previous exercise best possible suppose network b ink inÔ¨Ånitely fast link bandwidth way rtt noload second suppose begin sending winsize analysis case winsize rtt rise second rtts Ô¨Årst packet long doe rtt rise second exercise look relationship bottleneck bandwidth actual change suddenly suppose network follows b link inÔ¨Ånitely fast link bandwidth delay direction remaining link sec bandwidth delay direction indicated ack packet small travel instantaneously b sends b using winsize packet sent time respectively arrives instant bandwidth suddenly halved packet sec transmitted arrives arrive b complete following table packet arrival time t sends s queue sends sends sends b cont cont abstract sliding windowsan introduction computer network release b calculate througput given course packet s round trip obtain packet s rtt completed table c steady state reached rtt actual time doe packet spend transit time doe packet spend s queue exercise introduction computer network release abstract sliding ip version multiple lan protocol ip layer multiple transport protocol ip stand internet ip internet want run lan protocol want run transport protocol internet backbone work just Ô¨Åne want change ip layer encounter difÔ¨Åculty just talk people group chapter discus original core ip protocol known version address size internet today us making inroad ip layer enables efÔ¨Åcient scalable routing following chapter discus companion protocol icmp arp dhcp dns despite ubiquity face unsettled future internet run new large block address ip internet protocol increasing pressure convert address size progress slow delaying tactic market nat network address translation multiple host share single public address allowed continue aside major change address structure relatively difference routing model study following chapter point difference doesn t matter simply write ip effect universal routing addressing protocol routing addressing developed node ip address router know handle ip address ip originally seen way inter connect multiple lan make sense view ip virtual lan overlaying physical lan crucial aspect ip scalability internet estimate probably low time size largest forwarding table bgp table size ethernet comparison scale poorly forwarding table need entry active host host counting size internet easy internet system consortium used run survey based dns reached billion host leveled device dns entry nat router according billion internet user world s population counting internet user access internet home facebook reported billion monthly active user june furthermore ip unlike ethernet offer excellent support multiple redundant link network ip network node communicate immediate neighbor shared direct link hand ethernet network algorithm link simply disabled completely introduction computer network release c db ip network service model act like giant lan acknowledgment delivery generally described design choice surprising quite fruitful want provide universal service delivering packet need routing addressing network lan need able carry packet protocol spell use octet byte possible compatibility issue packet large given network handle supporting fragmentation network break packet unit transport successfully fragmentation inefÔ¨Åcient clumsy doe guarantee packet potentially delivered node note given universal fragmentation fragment header header header need contain following information destination source address indication versus time live ttl value prevent inÔ¨Ånite routing loop Ô¨Åeld indicating come packet egtcp v udp Ô¨Åelds supporting fragmentation reassembly header organized series word follows version total length ihl fragment offset time liveecn identification flagsds field header checksum protocol source address destination address option row header basic protocol operation originally deÔ¨Åned rfc minor change occurred change documented rfc d Ô¨Åeld ip version introduction computer network release deÔ¨Åned rfc ecn bit Ô¨Årst proposed rfc theversion Ô¨Åeld number ihl Ô¨Åeld represents total header length word header word long base header take Ô¨Åve word option consist word look packet using tool display packet hex Ô¨Årst byte differentiated service d Ô¨Åeld used differentiated service suite specify tial handling designated packet egthose involved v oip protocol explicit congestion notiÔ¨Åcation bit allow router experiencing congestion mark packet cating sender transmission rate reduced address explicit congestion notiÔ¨Åcation ecn Ô¨Åelds replace old type service Ô¨Åeld thetotal length Ô¨Åeld present packet smaller minimum lan packet size exercise larger maximum packet fragmented lan packet packet length word inferred packet size total length Ô¨Åeld bit maximum packet size probably large fragmentation avoided jumbograms option header second word header devoted fragmentation discussed fragmentation ttl Ô¨Åeld decremented router reach packet discarded typical initial value larger total number hop path case value work ttl Ô¨Åeld prevent routing loop problem occur consuming resource indeÔ¨Ånitely later look various ip update protocol minimize risk routing loop eliminate comparison ethernet header ttl Ô¨Åeld ethernet disallows cycle underlying topology theprotocol Ô¨Åeld contains value identify content packet body common value icmp packet internet control message protocol encapsulated packet encapsulation tcp packet udp packet encapsulated packet connectivity tunneling encapsulating security payload ipsec list assigned protocol number maintained iana theheader checksum Ô¨Åeld internet checksum applied header body purpose allow discarding packet corrupted header ttl value decremented router update header checksum algebraically adding correct place compensate hard simply halfwords average header header checksum updated packet header rewritten nat router thesource anddestination address Ô¨Åelds contain course address normally updated nat Ô¨Årewalls header introduction computer network release Ô¨Åeld supposed sender s address hardly isp check trafÔ¨Åc send source address matching customer despite rfc result ip spooÔ¨Ång sending ip packet faked source address straightforward example isn spooÔ¨Ång syn Ô¨Çooding tcp connection establishment spooÔ¨Ång facilitates attack server Ô¨Çooded huge volume trafÔ¨Åc reduce bandwidth available legitimate trafÔ¨Åc trickle Ô¨Çooding trafÔ¨Åc typically originates large number compromised machine spooÔ¨Ång lengthy list source blocked spooÔ¨Ång quite difÔ¨Åcult option record route option router insert address header option area unfortunately word available space record longer route traceroute time exceeded timestamp option related intermediate router requested mark packet address local timestamp save space option request timestamps room xaddress timestamp ypairs address prespeciÔ¨Åed sender include address router Ô¨Åll timestamp option deprecated security risk support source routing sender insert header option area list address packet routed pas address turn strict source routing address represent adjacent neighbor router used address list loose source routing listed address did represent adjacent neighbor ordinary routing used listed address form essentially used security reason packet routed outside trusted zone internet backbone finally header carefully laid memory alignment mind address Ô¨Åelds aligned boundary Ô¨Åelds aligned boundary considered important incoming packet stored following byte padding head containing buffer header starting ethernet header aligned boundary today architecture sort alignment mattered faded away alignment arm intel processor interface ip address strictly speaking assigned host node interface common case node single lan interface distinction ference room workstation single ethernet interface ethernet adapter local area connection view ip address assigned interface assigned workstation workstation likely loopback interface conceptually providing way deliver ip packet process machine system host resolve loopback address address used special address delivering packet loopback interface simply form interprocess communication functionally similar alternative named pipe loopback delivery avoids need use lan need lan simple ip version introduction computer network release testing convenient client server machine case loopback interface convenient fast standin real network interface machine loopback interface represents genuine logical interface commonly named lo window system interface represent actual entity practical concern interested snifÔ¨Ång loopback trafÔ¨Åc packet sent loopback address delivered expected workstation special interface recent version microsoft window teredo tunneling automatic tunneling intended activated support connectivity local isp support teredo protocol documented rfc vpn connection created virtual private network end logical connection typically terminates virtual interface labeled diagram virtual private network virtual interface appear system involved attached link lead end computer host virtual machine virtual network connect host virtual system host virtual interface connect virtual network host act nat router virtual machine hiding virtual machine ip address act ethernet switch case virtual machine need additional public ip address s ip address question fact easy answer ip address mean ip address assigned interface connects directly internet strategy Ô¨Ånd address default router iterate interface egwith java networkinterface class Ô¨Ånd ip address matching network preÔ¨Åx example approach appears multicast programming unfortunately Ô¨Ånding default router identify primary interface hard way approach fail ethernet interface assigned ip address network actually connected router interface separate ip network generally mean separate ip address interface interface used assigned ip address unnumbered interface multihomed host host multiple network interface said multihomed laptop example ethernet interface interface used simultaneously different ip address assigned residential network interface ip network egthe bridged lan site ethernet interface quite different ip network arp multihomed host multiple physical interface actually needed usually possible assign multiple ip dress single interface allow ip network distinct preÔ¨Åxes interface introduction computer network release share single physical lan case interface assigned ip address ip work time single interface assigned multiple ip address ip network physical machine act server ega web server multiple distinct ip address corresponding multiple distinct domain name multihoming raise issue packet addressed interface ip address ip arrive interface b ip address b ip strictly speaking arriving packet discarded unless host promoted functioning router practice strict interpretation cause problem typical user understanding ip address ipshould work reach host physical connection interface related issue host receiving packet addressed ipon interface b allowed send reply source address ip reply sent interface rfc deÔ¨Ånes alternative strong model ip address incoming outbound match physical interface weak model match required interface b accept packet addressed aip send packet source address ip linux system generally use weak model default arp multihomed host important vaguely aware special case multihoming present size ordinary context workstation ip address corresponds lan connection special address address represent special case standard loopback address address beginning serve loopback address logically represent current host host conÔ¨Ågured resolve localhost loopback address work egwith ping example using dns private address address intended site internal use egeither nat Ô¨Årewall intended internet connectivity packet show router egat isp router private address source destination address packet dropped standard block deÔ¨Åned block address commonly allocated dhcp server nat dhcp small ofÔ¨Åce built nat router subtle issue private address organization merge wholesale address renumbering usually necessary second suppose alice us home network laptop suppose alice connects vpn work server work ip version introduction computer network release connection laptop server fail fail server alice s laptop think local subnet potential conÔ¨Çicts main reason problem worse home network use corporate network use block additional problem network phone address carrier address network phone owner currently connected carrier us block fair chance establishment s mobile address conÔ¨Çict address address rfc established following special address block carrier known block exactly like block use carrier broadcast address special form address intended used conjunction broadcast common form broadcast network consisting broadcast network d consisting d s bit followed host bit try send packet broadcast address remote network d odds router involved refuse forward odds higher packet arrives router actually network d router refuse broadcast addressing broadcast s network fail underlying lan doe support broadcast egatm highly inÔ¨Çuential early unix implementation berkeley bsd used broadcast bit stead s result day host bit order avoid confusion broadcast address consequence class c network usable host address multicast address finally multicast address remain remnant class strategy multicast dress class d Ô¨Årst byte beginning meaning Ô¨Årst byte decimal multicasting mean delivering speciÔ¨Åed setof address preferably mechanism efÔ¨Åcient sending address individually reasonable goal multicast copy multicast packet traverse given link support multicast requires considerable participation backbone router involved ple host b c connect different interface router wish send multicast packet b c receive packet Ô¨Ågure b c intended recipient forward packet twice b s interface c s track host joined multicast group host left degree router participation bone router support multicasting entirely forthcoming discussion multicasting appears quality service special address introduction computer network release fragmentation trying interconnect lan ip doe needed routing addressing explicitly assumes packet composed byte universally true early day ip day rfcs refer octet emphasize requirement ip deÔ¨Ånes byte left networking hardware translate properly byte size bit order interfere packet forwarding feature provide goal universal connectivity commodate network maximum packet size maximum transfer unit mtu smaller packet need forwarding using join token ring mtu originally ethernet mtu packet large deliver ethernet traverse ethernet backbone en route token ring token ring day did commonly offer conÔ¨Åguration option allow ethernet interoperability support fragmentation reassembly potential strategy fragmentation reassembly reassembly opposite end link atm path fragmentation reassembly reassembly far end path approach taken partly intermediate router busy reassembly true today rfc published partly absolute guarantee fragment router partly fragmentation seen strategy resort sender supposed use different value ident Ô¨Åeld different packet Ô¨Åeld wrap datagram fragmented fragment ident Ô¨Åeld Ô¨Åeld effect indicates fragment belong packet fragmentation fragment offset Ô¨Åeld mark start position data portion fragment data portion original packet note start position number maximum packet length fragoffset Ô¨Åeld bit handled requiring data portion fragment size multiple bit fragoffset value bit using example consider following network mtus excluding lan header bmtu mtu mtu mtu suppose address packet byte b sends lan Ô¨Årst router packet contains byte header data fragment original packet packet size having byte payload Ô¨Årst fragment Ô¨Åt violates rule size data portion divisible Ô¨Årst fragment packet fragoffset second fragoffset Ô¨Årst fragment packet follows Ô¨Årst size fragoffset second size fragoffset ip version introduction computer network release size note fragoffset refragments second fragment Ô¨Årst size fragoffset second size fragoffset sends fragment b reassembly note slightly efÔ¨Åcient fragmented fragment size beginning note packet format designed handle fragment different size easily algorithm based multiple fragmentation reassembly Ô¨Ånal destination fragment total length Ô¨Åeld set length fragment discussed Ô¨Çag bit Ô¨Årst bit reserved second bit thedon t fragment df bit set sender router notfragment packet drop instead path mtu discovery application bit fragment bit set fragment Ô¨Ånal bit set fragmentation occurred bit tell receiver fragment stop Ô¨Årst Ô¨Çag bit rfc proposes use Ô¨Årst Ô¨Çag bit security Ô¨Çag set legitimate trafÔ¨Åc sender malicious hacking trafÔ¨Åc supposed set bit make detection Ô¨Årewalling malicious trafÔ¨Åc easier publication date rfc april april fool s day long tradition rfc humor released day example rfc receiver arriving fragment reassemble packet fragment arrive order unlike atm network unrelated packet interspersed reassembler identify different arriving packet fragment original Ô¨Ågure reassemble fragment correct order problem essentially trivial atm fragment considered belong packet ident Ô¨Åeld source destination address protocol fragment size multiple byte receiver track fragment received bitmap bit represents fragment chunk kb packet chunk bitmap byte fragment arrives new fragmented packet buffer allocated receiver know Ô¨Ånal size buffer usually make reasonable guess fragoffset Ô¨Åeld fragment stored buffer appropriate position new bitmap allocated reassembly timer started subsequent fragment arrive necessarily order placed proper buffer proper position appropriate bit bitmap set fragmentation introduction computer network release bitmap show fragment arrived packet sent completed packet hand reassembly timer expires piece received far discarded tcp connection usually engage path mtu discovery Ô¨Ågure largest packet size send notentail fragmentation path mtu discovery unusual example udp protocol use fragmentation especially short haul network file nfs protocol example udp used carry kb disk block sent single kb packet fragmented ethernet Ô¨Åve packet fraction fragmentation work reasonably time packet leave ethernet started note example fragmentation sender intermediate router finally given ip link provide fragmentation reassembly saw atm segmentation reassembly atm doe just mechanism generally invisible ip layer classless ip delivery algorithm recall chapter address divided net portion ip netand host portion ip host division point determined address class class b class indicated chapter division point present delivery algorithm host router doe notassume globally predeclared division point input address net host portion time punt question lookup assume lookup method available given destination address return neighbor instead division assume address assigned node s face conÔ¨Ågured associated length network preÔ¨Åx following slash notation ip internet protocol b address preÔ¨Åx length k k bthen preÔ¨Åx usual ordinary host ip interface router multiple interface let d given destination address want decide d local ornonlocal host router involved multiple ip interface interface length network portion address known network address assigned host s interface compare Ô¨Årst k bit b d ask d match comparison yield match delivery local host delivers packet Ô¨Ånal destination lan connected corresponding interface mean looking lan address destination applicable sending packet destination interface match delivery nonlocal host pass d lookup routine forwarding table sends associated represent physically connected neighbor lookup routine make necessary determination d split d netand d host split outside lookup forwarding table abstractly set network address length form associated destination lookup routine principle compare d table entry looking match equality Ô¨Årst k k bbits interface check division point k come table entry inferred d information borne packet fact place header store division point furthermore different router path use different ip version introduction computer network release value k destination address router receive preÔ¨Åx length destination process receive xdestination ypairs algorithm ip routing case multiple match forwarding table exist rule introduced case pick best match simple example router immediate neighbor destination b c d e address route address route b c d respectively finally match e e match longer packet routed way forwarding table contain default entry return case destination d doe match known network view returning default entry valid result lookup operation option algorithm approach default entry corresponding destination doe match use deÔ¨Ånitely require rule default route hugely important keeping leaf forwarding table small backbone router time expend considerable effort network address preÔ¨Åxes forwarding table short possible consolidation site single isp internet customer isp forwarding table usually single external route default route isp site isp forwarding table expand hurry example consortium research site internal interconnection acting sort parallel internet loyola s forwarding table usual single external default route effect second isp divide trafÔ¨Åc commercial isp isp default route pointed commercial isp loyola s forwarding table entry individual site trafÔ¨Åc site forwarded isp exercise router conÔ¨Ågured allow passing information lookup method mentioned chapter support different routing path different kind trafÔ¨Åc egbulk versus modest exception rule described unnumbered interface classless ip delivery algorithm introduction computer network release efÔ¨Åcient lookup fast implementation lookup operation tricky especially presence tion entry result unique match match straightforward hashing particular value k available oflookup simplest approach trie form tree child node labeled bit string concatenated node label branch represent address preÔ¨Åx node label represent single address bit larger bit group trie allows straightforward implementation rule requiring descend trie match possible example construct trie following forwarding table destination b c d e f preÔ¨Åx length multiple bit build trie using byte node label trie heavy blue node represent match light node represent heavy node entry table look trie view address list root traverse node arriving heavy node representing destination element address list continue child node matching child node match long possible straightforward trie implementation arbitrary preÔ¨Åx length requires node label ip version introduction computer network release lule√• algorithm implement lookup trie level representing address bit trie array size determine Ô¨Årst child node similar supplemental data structure assist lookup subsequent level finally switch implement lookup operation using memory ip forwarding requires ternary form memory tcam described Ô¨Ånal paragraph switch hardware ip address preÔ¨Åx length k go tcam memory register corresponding mask register used indicate Ô¨Årst k bit matter address presented tcam lookup multiple match differing length implement rule Ô¨Årst need make sure tcam sequence register shorter preÔ¨Åxes come longer one tcam encoder circuit convert matching register s position sequence address corresponding register rest routing information retrieved encoder designed prefers longer preÔ¨Åxes higher tcam sequence position lookup performed single lookup cycle backbone router experience acute difÔ¨Åculties growth forwarding table existing table outgrown space available tcam hardware subnets subnets Ô¨Årst step away class routing large network ega class b divided smaller network called subnets consider example typical class b network loyola university s originally underlying assumption packet delivered underlying lan internal host require large lan require single physical lan used site site physical lan really big physical lan did long ip world run problem subnets Ô¨Årst proposed rfc ofÔ¨Åcial rfc getting separate network preÔ¨Åx subnet bad router backbone forwarding table entry subnet instead just site needed way site appear outside world single ip network routing supported inside site subnets accomplish subnets introduce hierarchical routing Ô¨Årst route primary network inside site route subnet Ô¨Ånally hop delivers host routing subnets involves effect moving ip netdivision line rightward later consider cidr complementary case moving division line left observe moving line rightward site doe affect outside world outside router aware subnetting following diagram outside world directs trafÔ¨Åc addressed router nally site divided subnets idea trafÔ¨Åc routed switched lan involved compatible example oval represent token ring line represent ethernet subnets shown size ing byte address network portion subnet s address subnets introduction computer network release subnet shown rfc disallowed subnet byte having subnet bit generally doe work r d want internal routing based extended network preÔ¨Åxes shown nally continuing use single routing entry implement subnets divide site s network combination physical lan subnets assign subnet address network address site s network address preÔ¨Åx concretely suppose site s network address consists n network bit site address written slash notation diagram subnet address network address address site Ô¨Årst n bit b s extends k example diagram slight simpliÔ¨Åcation subnet address absolutely preÔ¨Åxes Ô¨Ågure packet routed correct subnet incoming packet set proprietary protocol entry router handle complicated situation existing internal host class strategy believe deliver lan site host fact host subnet need general solution proceed follows subnet address create subnet mask b consisting k followed make total make sure host router site know subnet mask interface host usually Ô¨Ånd subnet mask way Ô¨Ånd ip address static conÔ¨Åguration necessary likely dhcp host router apply ip delivery algorithm previous section proviso subnet mask interface present subnet mask used determine number address bit ip version introduction computer network release class mechanism determine packet addressed destination d deliverable locally interface subnet address corresponding mask m comparing d m b m represents bitwise match packet local generally involve match bit used class strategy determine network portion address d stated previously given address d context notbe able determine division point general egfor outbound packet division point fact need isneeded way tell given destination host address d belongs current subnet say b need compare Ô¨Årst k bit d b k known length diagram subnet mask subnets bitwise anding address mask extracting Ô¨Årst bit address subnet portion mask subnet binary diagram subnets overlap conÔ¨Çicts subnets disjoint take little effort realize doe overlap note address match network preÔ¨Åx Ô¨Årst bit byte byte range decimal decimal binary note host wish send destination d aware delivery fail infer interface class b compare Ô¨Årst byte d Ô¨Ånding match attempt direct lan delivery direct delivery likely impossible subnets joined switch subnet mask realize network d s able send packet subnet fact able send packet outside world realize destination case doe match forward router host subnets unreachable one properly subnet address entire preÔ¨Åx convenient identify subnet address just bit represent extension site address say casually subnet address strategy allowed host internet properly separate address net host portion subnets division point allowed vary example address divide outside loyola inside mean division longer absolute property address depends packet journey technically need requirement given subnet address different disjoint subnets proper preÔ¨Åx guarantee ip address b subnet address mask m b b m m b implies doe match subnet regardless division rule possibly allow subnet represent lan represents second subnet address block subset Ô¨Årst allow Ô¨Årst lan correspond rule strategy actually slight simpliÔ¨Åcation subnet mechanism actually allows subnet address bit fact contiguous mask series followed mask subnet address bit deÔ¨Ånition mask bit example site use fourth byte subnet address byte host address subnet mask generality subnets introduction computer network release useful dealing legacy address easily changed life simpler subnet bit precede host bit subnet example example having different subnet mask different interface let consider division network subnets size subnet address necessity different length room subnets able hold host size b size c size d size different length division local address la net versus host subnets isolation looking host bit division fact need needed way tell local address la belongs given subnet say b need compare Ô¨Årst n bit la b n length b s subnet mask comparing la m b m m mask corresponding la m necessarily la net la actually belongs subnets la m b m la belong subnet b case la m fact la net assume site s network address Ô¨Årst byte subnet address match bit fourth byte subnet address switch binary byte use notation total number subnet bit add vertical bar mark separation subnet host example note mean following fourth byte signiÔ¨Åcant subnet match match exactly remaining host portion allocate subnet address start Ô¨Åguring just host bit need subnet subnet size power round subnets appropriate size subnet mean need host bit accommodate host single bit fourth byte devote subnet address similarly b need host bit subnet bit c d need host bit subnet bit start choosing subnet address bit fourth byte choose s subnet arbitrarily let choose bit mean subnet address Ô¨Årst bit position fourth byte ambiguity b s subnet address bit work Ô¨Årst bit let choose second bit fourth byte begin packet subnet b subnet address c d notbegin finally choose subnet address c d respectively ip version introduction computer network release subnet size address bit fourth byte host bit byte decimal range b c d desired subnet address column preÔ¨Åx subnet address end result routing hierarchical route site ip address site route subnet address site link subnets suppose loyola c department subnet department site say install private link doe affect routing department router add entry subnet routing private link trafÔ¨Åc addressed subnet private link trafÔ¨Åc default router trafÔ¨Åc remote department long route loyola trafÔ¨Åc long route subnet anecdote long time ago responsible host abel borel day informed machine computer lab end campus reach borel reach abel machine lab adjacent lab reach borel abel just Ô¨Åne difference turned borel bad instead subnet mask attempting local delivery lab meant reach lab lab different subnet machine perplexed considerably investigation turned lab building hybrid device properly routed subnet trafÔ¨Åc ip layer forwarded ethernet packet directly feature apparently purpose backwards compatibility lab connected directly appeared lan borel despite apparently different subnet lab connected router turn connected lab lan level isolated abel borel moral switching routing great idea switching layer mixed routing moral test thoroughly reason problem wasn t noticed earlier previously borel communicated host subnet host outside university entirely worked bad subnet mask local host problem nearby subnets endpoint decide use private link classical theory algorithm requires able compare link route route requires global picture relative routing cost shall certainly doe exist department different routing subnets introduction computer network release domain neighboring subnets end want use private link manual conÔ¨Åguration likely option subnets versus switching frequent network design question small subnets instead just larger subnet multiple small subnets ip routing used interconnect use larger subnets replace routing communication likely ernet switching debate question gone forth networking community aphorism summarizing common view switch route aphorism reÔ¨Çects idea switching faster cheaper easier conÔ¨Ågure subnet boundary drawn necessary ethernet switching equipment generally cheaper routing equipment overall level feature reliability traditional switching requires relatively little conÔ¨Åguration implement subnets subnets created hand set conÔ¨Ågure protocol price difference switching routing signiÔ¨Åcant big picture conÔ¨Åguration involved straightforward way switching acquired reputation deserved faster routing true router switch decrement ttl update header checksum attach new lan header thing relatively minor larger reason router slower switch simply inevitably asked serve Ô¨Årewalls mean deep inspection packet egcomparing packet large number Ô¨Årewall rule Ô¨Årewall asked track connection state drive forwarding rate measured traditional switching scale remarkably doe limitation broadcast packet forwarded switched network pas different subnets second lan network like redundant link loop rely algorithm eliminate algorithm efÔ¨Åcient larger scale rise networking networking blurred distinction routing switching term layer switch used router effect support usual Ô¨Årewall bell whistle sdn ethernet switch networking making forwarding decision based content ip header streamlined able hard work specialized hardware source speedup sdn forwarding taking advantage layout tion application switch hierarchy trafÔ¨Åc entering datacenter appears openflow switch sdn application include enabling ethernet topology loop ofÔ¨Çoading Ô¨Çows alternative path implementing routing routing attribute sdn solution involve programming work box tions issue likely turn increasingly sdn future ip version introduction computer network release network address translation isp assigns single address computer solution network address translation nat nat s ability multiplex arbitrarily large number vidual host single address small number address make important tool conservation address enables important form security documented rfc called napt network address port translation term common use ip masquerading basic idea instead assigning host site publicly visible address just address assigned special device known nat router nat router sold residential ofÔ¨Åce use commonly simply called router somewhat precisely residential gateway nat router connects internet connects site s internal network host internal network assigned private ip address special address typically form connection internal host originate outside world banned internal machine want connect outside nat router intercept connection forward connection s packet rewriting source address make appear came nat router s ip address shown internetnat routerhost bhost host remote machine responds sending response nat router s public address nat router remembers connection having stored connection information special forwarding table forward data correct internal host rewriting Ô¨Åeld incoming packet nat forwarding table includes port number way internal host attempt connect external host nat router tell packet belong example suppose internal host b connect port port external host s t respectively nat forwarding table look like column nat router s address needed shall let nr denote router s external address remote host remote port outside source port inside host inside port s t b packet s rewritten source packet addressed rewritten forwarded similarly packet addressed rewritten forwarded nat table take account source host port destination network address translation introduction computer network release necessary nat router rewrite port number happens internal host want connect port external host port example suppose b open connection inside port time nat router remap port number way distinguish packet b s second connection s internal port remapped new table remote host remote port outside source port inside host inside port s t b s b nat router doe create tcp connection external host simply forward packet rewriting connection endpoint external host s t internal host nr monitor tcp connection know closed looking fin packet closing connection removed table udp connection nat router typically remove forwarding entry period inactivity udp transport exercise nat work trafÔ¨Åc port number network ping table quite story internet control message protocol properly nat improves security site making impossible external host probe initiate connection internal host Ô¨Årewall feature great importance essentially effect achieved address translation public address internal host having router refuse forward incoming packet existing connection router need maintain table like nat table order recognize packet address translation word source Ô¨Årewall security said hard nat router fail open ieto fail way let outside connection easier Ô¨Årewall fail open common residential form nat router nat dhcp small ofÔ¨Åce nat problem nat router s refusal allow inbound connection source occasional frustration illustrate frustration using v v oip protocol sip rfc basic strategy phone associated remote phone server phone server able accept incoming connection nat router phone usually ip version introduction computer network release internet Ô¨Årst contact contact far Ô¨Ånal step contact normally allows inbound connection common solution maintain persistent connection ditto having persistent connection arrange phone ring incoming call second issue somewhat particular sip protocol common server phone prefer use udp port end single internal phone likely port pas remapping phone appear connecting desired port phone inside shown appear connecting server alternative port solution server tolerate port remapping v oip system run problem nat set server prefer step loop phone exchange voice packet directly sip protocol designed handle having phone report respective server udp socket xip address port ypair intends use voice exchange server report phone socket opposite phone socket information rendered incorrect nat certainly ip address quite likely port phone nat Ô¨Årewall initiate voice connection phone phone voice packet arriving different socket promised likely recognize phone nat Ô¨Årewalls able connect directly common solution v oip server phone nat Ô¨Årewall remain communication path forwarding packet hidden partner work represents unwanted server workload site want make possible allow external connection host nat router Ô¨Årewall option tunneling creation virtual lan link run tcp connection end user site s server end user appear organization s internal lan virtual private network option open speciÔ¨Åc port essence static entry connecting speciÔ¨Åc port nat router speciÔ¨Åc internal host port usually port example udp packet port nat router forwarded port internal host absence prior packet exchange gamers creating game connection usually engage conÔ¨Åguration port control protocol rfc used nat traversal nat router work communication model tcp connection originating inside public outside server destination nat model work network address translation introduction computer network release peer networking gamers computer different nat router wish establish connection nat router provide limited support opening access given internalxhost portysocket creating entry exercise exercise nat router trouble udp protocol tendency protocol public server reply different port originally contacted example host nat router attempt use tftp trivial file transport protocol tftp sends packet port public server c c likely reply newport say reply likely dropped nat router entry trafÔ¨Åc middleboxes firewall nat router classed middleboxes network device block throttle modify trafÔ¨Åc necessary basic forwarding middleboxes play important role network security v oip break thing word middlebox versus router Ô¨Årewall usually perjorative connotation middleboxes circle acquired negative reputation nat router interference v oip direct consequence function nat handle tions inside outside quite nat mechanism offer support connection inside inside middleboxes block trafÔ¨Åc technical reason simply correct behavior widely implemented example sctp protocol sctp seen limited use despite putative advantage tcp largely lack support sctp used residential user middleboxes kept category problem overzealous blocking security sctp run problem quite universally router simply drop sctp packet represent unknown suspect type trafÔ¨Åc place approach datacenter Ô¨Årewall block inbound tcp trafÔ¨Åc port http port sctp used datacenter intentionally hard argue blocking inbound sctp trafÔ¨Åc frontline router home ofÔ¨Åce user block outbound sctp trafÔ¨Åc user use sctp consequence overzealous blocking harder introduce new protocol new protocol blocked small fraction potential user just worth effort discussion quic revisited design quic includes element mitigate middlebox problem example overzealous blocking middleboxes added element spoofed tcp rst packet sidebar explicit congestion notiÔ¨Åcation ecn nat traversal server located nat router traditional way make visible outside internet open selected port using port control protocol surprisingly possible arrange udp connection client server b different nat ip version introduction computer network release Ô¨Årewalls special cooperation tcp connection desired tunneled udp connection pwnat package Ô¨Årst assume server b know public ip address public s nat router know wish communicate b begin sending series udp packet port public using source port packet sent interval pwnat package us port endpoint assume packet course dropped s nat router sends single udp packet b s public ip address port port s nat router see packet create entry follows remote host remote port outside source port inside host inside port bpublic assuming s nat router doe remap port outside source port existence entry allow b s packet delivered respond bidirectional connection established remapping port s nat router problem quite unlikely host s end using port far assumed server b knew s advance similar trick using icmp internet control message protocol allows notify b existence b begin sending series udp packet idea b send periodic icmp echo request packet Ô¨Åxed ip address ip blackhole chosen use packet disappear create icmp opening b s nat router client assumed know b s public ip address b public begin send icmp time exceeded packet b public crafted look like legitimate response b s echo request packet icmp time exceeded message acceptable regardless source ip address intended use intermediate router reporting problem b s nat router hopefully forward s arriving time exceeded packet icmp time exceeded packet space s public ip address public received trigger b s sending udp packet b standardize speciÔ¨Åc ping query identiÔ¨Åer nat router handle icmp reply doe vary implementation implementation end nat device notice problem b s forged icmp time exceeded packet s end b s nat device strategy work quite unnumbered interface mentioned ip internet protocol interface device allow use ip link assigning ip address interface end link ip interface referred unnumbered generally make sense router Ô¨Årm requirement node ierouter endpoint link interface doe ip address node question anonymous participate router protocol algorithm diagram show link l joining router connected subnets respectively endpoint interface l labeled unnumbered unnumbered interface introduction computer network release b e lan joined unnumbered link lf l endpoint l assigned private address special address need create subnet host bit s s minimum subnet size furthermore routing protocol introduced algorithm distribute information subnet organization routing domain meaning care taken ensure link s subnet unique use unnumbered link avoids originate packet sent forwarded standard strategy treat interface shared ip address ethernet interface likewise leaf violating ip rule classless ip delivery algorithm expected deliver packet local delivery interface assigned ip address destination subnet necessary dispensation granted rfc necessary way conÔ¨Åguration told directly connected neighbor reachable interface linux system ip route command follows ip route linuxip route command illustrated tested virtual link created ssh andpppd link interface fact command appeared work advertised possible create link endpoint ip address assigned time creation removed ip route del command shown ip route add dev l link destination lan address arp query mobile ip original model strong implicit assumption ip host stay role address simply unique endpoint identiÔ¨Åer role locator preÔ¨Åx address egthe network strategy provider preÔ¨Åx represents host physically located host move far need new address laptop moved site site common receive new ip address location egvia dhcp laptop connects local wish support device like smartphones remain active communicating moving thousand mile changing ip address requires changing tcp connection life application development simpler device single unchanging ip address ip version introduction computer network release option commonly used smartphones connected network treat phone s data network giant wireless lan phone s ip address need change move lan phone provider Ô¨Ågure manage routing roaming butmobile ip option documented rfc scheme mobile host permanent home address roaming temporary address change place place address example ip address assigned local network absence mobile ip theip address mobile host kind address known address associated device known aforeign agent vicinity mobile host goal mobile ip make sure mobile host reachable home address maintain connectivity home address mobile ip host need home agent home network job home agent maintain ip tunnel connects device s current address packet arriving home network addressed home address warded mobile device tunnel home agent similarly mobile device wish send packet home address home address ip source address use tunnel forward packet home agent home agent use proxy arp arp finer point declare appropriate destination home lan packet addressed home ip address straightforward home agent forward packet anagent discovery process used mobile host decide mobile need notify home agent current address encapsulation form packet encapsulation used mobile ip tunneling default encapsulation deÔ¨Åned rfc process entire original ip packet header addressed home address used data new ip packet new ip header outer header addressed address original ip headerdata original packet original ip headerdata outer header encapsulated packet outer header value protocol Ô¨Åeld indicates tunneling used receiver know forward packet using information inner header mtu tunnel original mtu path address minus size outer header mobile ip introduction computer network release similar mechanism used encapsulation inner packet outer protocol Ô¨Åeld value connectivity tunneling encapsulation present difÔ¨Åculties nat router host b nat router send encapsulated packet packet differ source ip address nat router receiving response doesn t know forward partial solution nat router support inside host sending encapsulated packet nat router knew encapsulation used mobile ip look home address inner header determine correct home agent deliver packet big assumption fuller solution outlined rfc epilog point concluded basic mechanic come discussion ip router build forwarding table turn complex topic divided routing single organization isps algorithm routing organization ip routing chapter compare year old seeing limited adoption biggest issue Ô¨Åxed s lack address space dramatic improvement exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution suppose ethernet packet represents tcp acknowledgment packet contains ethernet header header tcp header crc checksum packet smaller ethernet size receiving host tell arriving packet unfragmented hint packet Ô¨Årst fragment fragment state marked header long ident Ô¨Åeld header wrap sender host sends stream packet host b fast possible assume packet size byte bandwidth mbps following diagram router b c d e e border router connecting site internet connection subnets address form forwarding table b c table include listed subnets default entry route trafÔ¨Åc router directly connected subnets listed direct einternet continues page ip version introduction computer network release continued previous page c exercise attempt modeling routing suppose site s s neach single connection standard internet site s ihas single address block site s connection internet single router r r s default route point standard internet site maintain separate network site single link separate network r forwarding table r iwill look like trafÔ¨Åc s ito use separate network network preÔ¨Åx given length identify subsequent address subnet b c d e convert following subnet mask notation b c d e f suppose subnet bit following Ô¨Åve subnets come beginning fourth byte address subnets block b c d e size subnet corresponding decimal range count address exercise introduction computer network release host bit s host bit s subnet b address block belong subnets b c d e ip version companion protocol ip keystone internet occupies position little help friend dns translates host name ip address arp translates address ethernet address destination lan dhcp assigns address icmp enables transmission error status message subject chapter original dns used modest extension version neighbor discovery replacing arp host address assignment dns thedomain dns essential companion protocol overview rfc dns permit user luxury needing remember numeric ip address instead user simply enter dns care looking retrieving corresponding address dns make easy service server different ip address user locate service dns ip address need notiÔ¨Åed dns support wide variety query moment focus query address arecords aaaa record type used address internally nsrecord type used identify server answer dns query workstation use dns user impossible time Ô¨Ånding core startup conÔ¨Åguration workstation includes ip address dns server dynamic host conÔ¨Åguration protocol dhcp startup conÔ¨Ågurations assigned s dns common exaggerated sentiment administrator dealing network problem dns remarkably reliable failure tricky diagnose dns trafÔ¨Åc today udp tcp option exists larger response size tcp necessary dnssec dnssec dns distributed meaning domain responsible maintaining dns server translate name address dns fact classic example highly distributed database node maintains relatively small data said day gone common practice domain maintain dns server today domain registrar provide dns service domain customer dns hierarchical dns level archy introduction computer network release domain tld educational institution loyola university chicago loyola computer science department hostname associated speciÔ¨Åc ip address hierarchy dns name set name sufÔ¨Åxes name form tree leaf node represent individual host example domain name happen valid hostnames dns hierarchy great case deep particularly dns name assigned cial website domain name simply company variant followed domain internally organization individually named server domain name identiÔ¨Åed viewing source web page searching domain name domain assigned icann original domain seven domain domain hundred domain apparently domain name subdomain name contain unicode character support national alphabet domain generic meaning apply subdomain qualifying criterion domain sponsored meaning sponsoring organization determines assigned subdomain qualifying criterion little arbitrary icann approve new domain application accepted speciÔ¨Åc tervals application fee interval actual leasing domain name company individual organization known domain registrar work contract icann tree dns name preÔ¨Åxes divided administratively zone zone independently managed subtree minus placed delegation zone zone root dns sufÔ¨Åx dns zone example luc edu zone contains loyola s dns name spun zone zone disjoint union subtrees distinct zone unless remain parent zone zone deÔ¨Åne dns name level deep example zone deÔ¨Åne record name additional level name additional level said common zone handle additional level create subzones deeper level zone authoritative nameservers zone charged maintaining record known resource record rrs zone zone nameservers redundancy address stored record address information Ô¨Ånd stored n record server additional type discussed dns record dns record type includes Ô¨Åeld caching authoritative nameserver need organization manages zone single server authoritative nameserver multiple unrelated zone example domain registrar companion protocolsan introduction computer network release maintain single nameservers handle dns query domain customer wish set nameservers theroot nameservers handle zone root dns tree represented dns string thirteen root nameservers contain n record identifying nameservers immediate subzones domain subzone ip address root nameservers widely distributed dns name use dns lookup mechanism present name today correspond individual machine cluster hundred server dns resolvers Ô¨Årst draft dns lookup algorithm Ô¨Ånd ip address host Ô¨Årst contact root nameserver known address Ô¨Ånd nameserver edu zone involves retrieval n record edu nameserver queried Ô¨Ånd server zone turn supply n record giving address zone record actual host example carried application executes dns lookup known dns resolver confusingly resolvers known nameservers precisely nameservers reduce overall dns trafÔ¨Åc particular root nameservers make sense cache intermediate Ô¨Ånal result later query say host reuse previously learned address edu nameserver greater dns efÔ¨Åciency provide dns resolver handle request large pool user idea user looked address hand locally user beneÔ¨Åt consolidation approach depends distribution lookup request lifetime likely user visit site recent year caching beneÔ¨Åt getting smaller dns name internet diverse cache lifetime shrinking caching beneÔ¨Åt dns partial name remains signiÔ¨Åcant regardless caching beneÔ¨Åts dns resolvers universally used isps company example provide resolver handle dns need customer employee refer site resolvers ip address site resolvers generally supplied dhcp option dynamic host conÔ¨Åguration protocol dhcp resolvers default choice dns service dns policing suggested site engaged illegal activity copyright infringement domain seized problem strategy forward user set nonstandard nameservers example gnu gns continue list banned site user elect use dns resolver provided isp company number public dns server resolvers available resolvers generally serve larger dns introduction computer network release area common choice include opendns google dns primary address cloudÔ¨Çare primary address gnu mentioned sidebar searching public dns server turn list theory advantage using public dns server local isp longer track dns query isps record customer dns query intercept modify concern dns encryption necessary primary proposal dns tl dot rfc dns http doh rfc tl encryption protocol tl http secure http us tl encryption thing eavesdropper identify dot trafÔ¨Åc dns trafÔ¨Åc sent special port doh trafÔ¨Åc indistinguishable http web trafÔ¨Åc use dns server plain dns dot doh doe mean dns server access dns query ultimately choice depends trust site resolver versus selected public resolver dot doh deliberate conÔ¨Åguration enable standard resolver mozilla started enabling doh default firefox browser support disabling doh reverting dns resolver forward google cloudÔ¨Çare provide public dns user address easy remember google s cloudÔ¨Çare s setting doh firefox mozilla foundation created call trusted recursive resolver program participating provider initially cloudÔ¨Çare eventually agree contractual requirement requirement personal browsing history collected query minimization query minimization supported ultimately choice dns trust belongs user public dns server provide additional service automatically Ô¨Åltering domain name associated security risk content inappropriate young user fee service common drawback Ô¨Åltering content dns level unless dns server provides alternative address pointing explanation page user attempt access blocked content absolutely idea went wrong Ô¨Åltering content browser level dns level preferred Ô¨Åltering browser level drawback october cloudÔ¨Çare public dns began offering additional free public dns server blocking known malware blocking malware adult content detail mentioned earlier dns record come ttl value used resolvers companion protocolsan introduction computer network release indication long supposed record cache dns ttl lifetime day rfc recommends minimum ttl day recent year ttl value getting quite bit smaller nslookup dig retrieve ttl value respective authoritative nameservers case second minute authoritative nameservers provide ttl value lookup failure according rfc ttl value speciÔ¨Åed soa record originally soa ttl represented default ttl successful lookup ttls usually kept quite short potential large number user locked site consider example following scenario updating dns record host let suppose ttl week site site b large isp delete record site b query site b get nxdomain immediately reinstall record point site b telling user week unavailable site unable Ô¨Åx send query loyola s site resolver certainly cache send query misspelling cache nameserver certainly isin cache nameserver local resolver Ô¨Ånds nameserver zone Ô¨Ånds ip address host domain using loyola s site resolver send query site obscure domain reasonable chance domain notbe cache consequence aspect caching popular domain likelier result faster lookup application invoke dns library call java s inetaddress getbyname library forward query resolver browser time offer dns option dns http return dns library call client tcp client system traditionally address local dns resolvers kept Ô¨Åle typically Ô¨Åle updated address current resolvers dhcp dynamic host conÔ¨Åguration protocol dhcp time received address possible common create special entry query different domain sent different resolvers hostnames domain appended lookup window similar functionality achieved setting dns tab network connection applet recent system run small stub resolver locally eglinux s dnsmasq resolvers called dns forwarders entry address localhost stub resolver course need access address site public resolvers address provided static conÔ¨Åguration dhcp dynamic host conÔ¨Åguration protocol dhcp dns introduction computer network release running stub resolver run internal virtual machine usually possible conÔ¨Ågure virtual machine given ip address host dns resolver example virtual machine assigned address private subnet connect outside world using nat network address translation setting virtual machine given address host interface connects private subnet necessary ensure host local resolver accepts query sent designated address host s address generally local resolvers notaccept request arriving externally visible address submits query nonexistent dns resolver supposed return error message technically known nxdomain non existent domain resolvers conÔ¨Ågured return ip address designated web server particularly common site resolvers associated web page meant helpful present offer buy domain registrar way additional advertising displayed course completely useless user trying contact domain question protocol ssh smtp http dns protocol layer dns lookup query recursive sends b recursive query resolve given dns b take job Ô¨Ånally able return answer query hand b authoritative nameserver dns question return failure notice n record step path dns request host site public resolvers recursive basic dns response consists answer section authority section optionally tional section generally response lookup hostname contains answer section consisting single record representing single address site multiple server entirely alent possible hostname conÔ¨Åguring authoritative nameserver return hostname question multiple record listing turn server address known dns simple form load balancing consecutive query nameserver return list record different order ideally happen consecutive query local resolver hostname cache common single server single address identiÔ¨Åed multiple dns name section response authority section contains dns name authoritative nameservers responsible original dns question record n record point zone parent soa record declaring zone seen additional section contains information sender think related example section contains record authoritative nameservers tor project us name end true dns name managed dns hierarchy work tor user rfc name follow unusual pattern level hash site s rsa public key rsa converted sixteen ascii byte example apparently tor address search engine unlike duckduckgo site try different rsa key Ô¨Ånd initial preÔ¨Åx hash look meaningful example facebook got lucky Ô¨Ånding rsa key corresponding tor address said fortune infatuated wealthy naming strategy form cryptographically generated address example security neighbor discovery advantage naming strategy don t need companion protocolsan introduction computer network release certiÔ¨Åcate authority certiÔ¨Åcate authority verify site s rsa key site doe nslookup dig let trace lookup using nslookup tool nslookup tool completely include example using dig utility supposedly acronym domain internet groper line type nslookup s interactive mode begin prompt shell prompt dig command typed directly shell prompt Ô¨Årst step look ip address root nameserver regular nslookup ordig look nameserver s conÔ¨Åguration Ô¨Åles search internet address send nonrecursive query address presence single hyphen nslookup command line mean want use nameserver thing looked dig place command line nameserver following dns command use norecurse option send nonrecursive query nslookup ca answer dig fail default nslookup anddig ask record want n record zone ask tell dig query failed Ô¨Ånd record zero record answer section set edu nameserver internet address dig n authority section edu n additional section response case list nameservers zone list Ô¨Årst response inin response record shown indicates internet record note dns query notan exact match dns resource record returned sufÔ¨Åx privacy implication root nameserver didn t need know searching just asked edu return query minimization send n query doe appear dig answer dns introduction computer network release nslookup authoritative answer nameserver internet address dig n authority section n additional section nameservers returned step ask nameserver nameserver nslookup nameserver dig n authority section soa desperately seeking switzerland look nameservers default resolver use dig edu n work domain egus uk aero india switzerland command dig n return root server inis interpreted dns abbreviation internet working query dig n note period switzerland problem chcollides dns abbreviation chaosnet working query dig ch n thenslookup command return nameserver dig command doe indicates returning soa n record Ô¨Årst data Ô¨Åeld soa result primary nameserver somewhat roundabout way saying nameserver handle handle zone just happen handled nameserver prior edu handled separate nameserver signiÔ¨Åcant outage folded luc edu nameserver drop intronetworks label query run dig n answer section instead authority declares authoritative nameserver event ask record directly companion protocolsan introduction computer network release nslookup address dig answer section Ô¨Årst time answer section versus authority section prior Ô¨Ånal result nslookup fact canonical address received canonical cname record server host host website different name example known virtual hosting provide separate record website dns set provide cname record website pointing single physical server record needed server cname strategy longer used note cname corresponding record returned convenience answer returned dig mention cnames little user dig return cnames asked explicitly note address unrelated loyola s address block server hosting managed external provider connection dns hierarchy ip address hierarchy example use dig Ô¨Ånd value advertised dig answer section authority section n dig answer section authority section n ttls second respectively ttls coming local site resolver ttl value directly dig answer section continues page dns introduction computer network release continued previous page dig answer section site authoritative nameservers advertise ttl second minute ttl value received mean local resolver asked second ago query minimization example traced lookup dns starting root commented entire dns sent root server unnecessary root nameservers know reach nameservers sent n request just privacy issue root nameservers don t need know s query rfc proposes query minimization qname minimization alternative idea send root server just query nameserver just query n query dns label attached query proceeding query nameserver way nameserver learns query absolute minimum potential catch level dns corresponds different nameserver way dns corresponds zone break example case nameserver responsible independent hierarchy longer need n record happens legacy reason case n query sent nameserver return literally correct nodata worse nxdomain supposed happen doe therfc solution negative answer received include level repeat query lookup failed try said issue mean query minimization quite seen widespread adoption apnic blog post actual measurement worth noting privacy protection achieved dns nameservers one local dns resolver information query sent presence active caching local resolver generally need query root nameservers naked domain look resolve address use ofwww hostname domain s webserver considered unnecessary user website administrator prefer shorter naked domain tempting create cname record naked domain pointing rfc doe allow companion protocolsan introduction computer network release cname rr present node data present ensures data canonical alias different dns data record n record soa start authority record containing various administrative data expiration time mx record discussed following section make ineluctably quite different rfc add rule insures cached cname used checking authoritative server rr better way create record perspective dns record doe mean webserver address change twodns record need updated manageable recently aname record proposed handle issue aname like limited cname subject rfc restriction aname record naked domain pointing hostname address legal internet draft large cdns network implement similar dns tweak internally doe require awareness user request record aname resolved cdn finally argument http web trafÔ¨Åc involved www notbe deprecated naked domain instead redirected http layer hostname simpliÔ¨Åes issue example website doe add extra rtt longer concerned fact http cooky www different cdns able handle website failover server naked domain reached record dns issue dns record address lookup dns support kind search best known probably reverse dns take ip address return slightly complicated fact ip address associated multiple dns name dns doe case return canonical cname given address cname given address say idea reverse append sufÔ¨Åx arpa dns hierarchy name form zone authoritative server conÔ¨Ågured especially user workstation request ptr record corresponding return dns hostname case returned ptr record dns record entirely separate hierarchy dns type Ô¨Åt standard hierarchy example dns support mx mail exchange record meant map domain correspond hostname doe likely correspond web server hostname server accepts email behalf domain effect allows organization s domain represent web server different ip address email server mx record represent setof ip address accept email dns introduction computer network release dns beginning supported txt record arbitrary text string email sender policy framework rfc developed make harder email sender pretend domain involves inserting spf record dns txt record example dns query txt record yield text text include spf interested second record speciÔ¨Åes spf version second record tell look lookup return text include include √£√±include lookup return text host connects email server declares delivering mail host s email list occur list included list doe good chance email represents spam dns record resource record type egaoraaaa orns ormx given type set matching resource record known rrset type technically class class dns record interested internet nameserver responds dns query returned answer section entire rrset rrset resource record matching type contained original query case rrsets single member host single address universal saw example single dns having multiple record dns used single dns separate record host s public private address txt record contain multiple entry single rrset txt example saw spf data stored dns txt record protocol spf use txt record example include dmarc http finally mail exchange rrsets multiple entry organization prefer redundancy server receive email dns cache poisoning classic dns security failure known cache poisoning occurs attacker able convince dns resolver address say really successful attack mean attacker direct trafÔ¨Åc meant attacker s malicious site basic strategy send stream dns reply packet resolver declare ip address attacker s chosen ip address source ip address companion protocolsan introduction computer network release packet spoofed authoritative nameserver spooÔ¨Ång relatively easy using udp reply packet ignored hope arrive shortly resolver sent dns request authoritative nameserver interprets spoofed reply packet legitimate reply prevent dns request contain id Ô¨Åeld dns response echo response come correct port leaf attacker guess bit id Ô¨Åeld port guessed based past history approach requires attacker wait target resolver issue legitimate request attacker s site attacker piggyback additional section reply message record pointing attacker s chosen bad ip address site hope receiving resolver place record additional section cache verifying noticing completely unrelated time dns resolver behavior common newer dns resolvers carefully validate reply id Ô¨Åeld match source port match received dns record additional section match minimum dns zone request additionally request id Ô¨Åeld source port chosen pseudorandomly secure fashion additional vulnerability rfc central risk cache poisoning resolver tricked supplying user invalid dns record closely related risk attacker achieve result spooÔ¨Ång authoritative nameserver risk mitigated use dns security extension known dnssec dnssec make use signature defer coverage dnssec dns cdns dns pressed service cdns network identify closest edge server given user typically involves use geodns slightly nonstandard variation dns dns query come cdn s authoritative nameservers server look approximate location client ip geolocation determines closest edge server location reply ip address closest edge server work reasonably time requesting client essentially end user dns resolver used user typically resolvers site resolvers provided user s isp organization physically quite close user case edge server identiÔ¨Åed close user user chosen likely remote public dns resolver ip address returned cdn edge server close dns resolver likely far optimal end user solution problem addressed rfc allows dns resolvers include ip address client request sent authoritative nameserver privacy reason usually preÔ¨Åx user s ip address included user s privacy partly compromised reason rfc recommends feature disabled default enabled careful analysis tradeoff dns introduction computer network release user concerned privacy issue theory conÔ¨Ågure dns software include rfc option preÔ¨Åx user s ip address conveys address information user s resolver change longer preÔ¨Åx use option mean dns resolver receiving user query given hostname longer simply return cached answer previous lookup hostname instead resolver need cache separately xhostname preÔ¨Åx ypair handle preÔ¨Åx preÔ¨Åx user s ip address forwarded authoritative nameserver potential increase cache size order magnitude enable attack address resolution protocol arp host router Ô¨Ånds destination ip address d d ipmatches network address interface deliver packet lan probably ethernet mean looking lan address mac address d lancorresponding d ip doe approach special server spirit early development avoid server cost reliability issue instead address resolution protocol arp used Ô¨Årst protocol take advantage existence broadcast lan physical broadcast atm mechanism usually involving server used basic idea arp host sends broadcast arp query d ip request includes s lan address host lan receive message host message intended d recognize reply return arp reply message containing d lan original request contained lan d s response sent directly unicast b c d broadcast d d reply unicast includes lan address additionally host maintain arp cache consisting lanyaddress pair host network exchange xdip dlanyin table anticipating soon send packet need respond d put xaip alanyinto cache entry eventually expire timeout interval used order minute linux system use smaller timeout second observed line probably related shortened timeout interval repeat arp query entry Ô¨Årst sent unicast broadcast previous ethernet address record cut total broadcast trafÔ¨Åc lan broadcast course needed new host arp cache linux examined command ip neigh corresponding window command arp protocol sufÔ¨Åcient point sends broadcast d arp query host c check cache entry issuch entry aipis value lanis updated value taken arp message companion protocolsan introduction computer network release entry action taken update process serf avoid stale entry arise host ethernet interface replaced usb ethernet interface particular replaced quickly arp quite efÔ¨Åcient mechanism bridging gap lan address node generally Ô¨Ånd neighboring address protocol arp quickly Ô¨Ålls ing lan address networking networking environment lan switch lan controller knowledge address correspondence potentially making arp superÔ¨Çuous lan ethernet switching network principle know exactly route lan given address potentially making lan address unnecessary point arp inconvenience example situation necessary work arp arp finer point host today implement orgratuitous arp startup wakeup station start sends arp query thing gained Ô¨Årst station cache updated s current lanaddress case change second answer received presumably host network address traditional mechanism duplicate address detection unfortunately doe work hoped single query sent reply received frequently response log error message host continue using duplicate address duplicate address received dhcp host supposed notify dhcp server error request different address rfc deÔ¨Åned improved mechanism known address conÔ¨Çict detection acd host using acd sends arp query new address spaced second leaving arp Ô¨Åeld sender s address Ô¨Ålled zero step mean host address cache ignore packet update cache original host receives reply sends arp query new address time arp Ô¨Åeld sender s address Ô¨Ålled new address stage host network make necessary cache update finally acd requires host detect duplicate address discontinue using possible station answer arp query behalf actual destination d called proxy arp early common scenario host c lan modem connected serial port theory host d dialing modem different subnet requires allocation new subnet instead site chose simpler arrangement host dialed c s serial port assigned ip address d ip subnet c conÔ¨Ågured route packet d packet arriving serial line forwarded lan interface packet sent c lanaddressed d ipwould forwarded handle arp d actually lan receive broadcast arp query instead c conÔ¨Ågured answer behalf d replying xdip clany generally worked quite proxy arp used mobile ip home agent intercept trafÔ¨Åc addressed home address mobile device forward egvia tunneling device mobile ip delicate aspect arp protocol station required respond broadcast query address resolution protocol arp introduction computer network release absence proxy theoretically create problem respondent anecdote elder day networking broadcast arp query trigger avalanche response moral determining respond broadcast message great care rfc section address point context responding broadcast icmp message implementation need include timeout queue query resent lost burst packet doe lead burst query naive arp algorithm send packet destination d ip d ipis arp cache address packet d lan send arp query d problem approach imagine kb packet arrives ip layer sent ethernet fragmented fragment assuming ethernet mtu byte sent naive algorithm likely send arp query need instead like following send packet destination d ip d ipis arp cache send d lanand return arp query d ipis pending current packet queue pending arp query d ip start putting current packet new queue d need arp query c iptimes resend point arp query c ipis answered send packet c s queue arp security suppose want log secure server s using password b bad impersonate s strategy known arp spooÔ¨Ång b make sure real s waiting scheduled downtime launching attack try connect begin arp s b answer s b trivial way b simply need set ip address connect convinced password b simply responds plausible like backup progress try later use s credential real work communication channel us encrypted using ssh protocol ssh message s key changed b present ssh key s s unfortunately user department recognize problem organization especially school university use personal workstation frozen conÔ¨Åguration Ô¨Ålesystem reset original state reboot system resistant virus environment user message effect s s credential known companion protocolsan introduction computer network release arp failover suppose server b b backup want b able step freeze number way achieving simplest known arp failover set b ip time b doe use network duplication problem b get message sends arp query ip including b lanas source lan address gateway router previously xaip alanyin arp cache update xaip blany packet sent long b trafÔ¨Åcking stateless operation eghtml b pick right left detecting sniffer finally interesting use arp detect ethernet password sniffer generally quite issue encryption switching Ô¨Ånd particular host promiscuous mode send arp query address broadcast ethernet address nonexistent ethernet address promiscuous mode s network interface ignore packet promiscuous mode s network interface pas arp request likely answer ala linux kernel reject level arp query physical ethernet address respond faked ethernet multicast address ff ff ff ff ff ff ff fe arp multihomed host host interface lan respective ip address common used interchangeably trafÔ¨Åc addressed received trafÔ¨Åc sent multihomed host described weak model idea think ip address bound respective interface support model arp usually conÔ¨Ågured fact default arp request ip address received interface answered physical address usually request answered physical address preferred iefaster interface example suppose ethernet interface ip address faster ip address interface notalways faster setting arp request answered s physical address trafÔ¨Åc ip address arrive interface essentially unused similarly arp trafÔ¨Åc sent source address depart situation linux system adjusted changing address resolution protocol arp introduction computer network release dynamic host conÔ¨Åguration protocol dhcp dhcp common mechanism host assigned address dhcp started protocol known reverse arp rarp evolved bootp present form documented rfc recall arp based idea broadcasting arp query host containing host s address host answering lan address dhcp involves host startup broadcasting query containing lan address having server reply telling host address assigned reverse arp dhcp response message likely carry piggybacked essential startup option unlike address additional network parameter usually depend speciÔ¨Åc host sent dhcp query likely constant subnet site typical dhcp message includes following address subnet mask default router dns server item standard minimal network conÔ¨Åguration practical term host function properly dhcp implementation support piggybacking wide variety conÔ¨Åguration value server response default router dhcp lose default router communicate used happen courtesy dhcp connected internet ethernet default router ethernet interface connect institution s wireless network dhcp server sends new default router wireless network default router allow access tiny private network neglected complete network registration process disconnect wireless network default router go away doe automatically revert ethernet entry dhcp doe work way result router scheduled dhcp lease renegotiation Ô¨Åx thing manually dhcp server range address hand maintains database address assigned lan address reservation permanent dynamic host typically renew dhcp reservation periodically typically time day companion protocolsan introduction computer network release nat dhcp small ofÔ¨Åce large network multiple subnets certain manual conÔ¨Åguration inevitable home small ofÔ¨Åce single line isp combination nat network address translation dhcp autoconÔ¨Åguration close reality typical router fact nat router network address translation coupled ethernet switch usually coupled access point dhcp server section use term nat router refer package specially designated port theexternal port connects isp s line us dhcp client obtain address port internal port connected ethernet switch port group connected external port using nat translation wireless supported wireless connected directly internal port isolated internet internal port assigned arbitrary address block nat router typically contains dchp server usually enabled default hand address connecting internal generally work seamlessly second nat router connected network time attempted extend range lieu commercial repeater operating dhcp server subnet result chaos easily Ô¨Åxed disabling dhcp server omnipresent dhcp server autoconÔ¨Åguration work box case era designed need server seen signiÔ¨Åcant drawback term expense reliability autoconÔ¨Åguration strategy stateless autoconÔ¨Åguration slaac doe require dhcp end displacing dhcp router desired larger site dhcp server support multiple subnets classical dhcp relies broadcast isn t forwarded router dhcp server way knowing subnet host question actually located generally addressed dhcp relay known older bootp relay router node subnet receives dhcp broadcast message host note subnet address arrival interface router relay dhcp request subnet address designated dhcp server relayed message sent directly unicast broadcast subnet address included dhcp server Ô¨Ågure correct address assign feature specially enabled router internet control message protocol internet control message protocol icmp protocol sending error status sage deÔ¨Åned rfc icmp like ip delivered speciÔ¨Åc port sent response error related sent port word internet control message protocol introduction computer network release individual udp tcp connection receive icmp message helpful icmp message identiÔ¨Åed type Ô¨Åeld followed subtype code common icmp type subtypes listed description type description echo request ping query echo reply ping response destination unreachable destination network unreachable destination host unreachable destination port unreachable fragmentation required df Ô¨Çag set network administratively prohibited source quench congestion control redirect message redirect datagram network redirect datagram host redirect tos network redirect tos host router solicitation router time exceeded ttl expired transit fragment reassembly time exceeded bad ip header parameter pointer indicates error missing required option bad length timestamp timestamp reply likeping requesting timestamp destination echo timestamp format query sent host error message sent router sender offending packet format contain ip header byte packet question byte contain tcp udp port number redirect router solicitation message informational follow format query format contain query identiÔ¨Åer assigned query sender echoed query responder ping packet size author diagnose problem ping successful Ô¨Åle fers failed immediately result network fault tion fault problem turned failed network device high rate packet frequently corrupted ping packet default size byte unaffected rate packet success rate packet expected success rate setting ping packet size larger value immediately clear network application fault icmp best known echo ping tool useful utility based ping remains useful network troubleshooting ping host network reachable problem higher protocol chain unfortunately ping reply blocked Ô¨Årewalls theory revealing existence computer security risk companion protocolsan introduction computer network release appropriate decision doe signiÔ¨Åcantly impair utility ping ping asked include ip timestamps header linux system window source quench used signal congestion encountered router drop packet congestion experience encouraged send icmp source quench originating host generally tcp layer handle appropriately reducing overall sending rate udp application receive icmp source quench did quite work intended formally deprecated byrfc router inform tcp connection impending congestion using ecn bit destination unreachable type large number subtypes unreachable router entry forwarding packet default route unreachable packet reached router lan host host failed respond arp query unreachable packet sent udp port given host port open tcp hand deal situation replying connecting endpoint reset packet unfortunately udp port unreachable message sent host application host sent undeliverable packet close useless practical way application informed packet delivered required df Ô¨Çag set packet arrived router big forwarded fragmentation don t fragment bit header set forbidding fragmentation prohibited sent router know reach network question conÔ¨Ågureintro drop packet send administratively prohibited message router conÔ¨Ågured blackhole message drop packet send path mtu discovery tcp us icmp message fragmentation required df Ô¨Çag set path mtu discovery process Ô¨Ånding largest packet sent speciÔ¨Åc destination fragmentation basic idea set df bit packet send message packet big site Ô¨Årewalls block icmp packet addition echo message away relatively consequence blocking fragmentation required df Ô¨Çag set potential severely affect tcp connection depending path mtu discovery implemented recommended icmp Ô¨Åltering contemplated best base decision icmp type type code example Ô¨Årewalls support rule set form allow icmp block icmp thetimestamp option work like echo receiver includes local timestamp arrival time millisecond accuracy ip timestamp option header appears frequently used message format make easy add new icmp type year signiÔ¨Åcant number additional type deÔ¨Åned complete list maintained iana later icmp type seldom used eventually deprecated rfc icmp packet usually forwarded correctly nat router absence port number router little work rfc andrfc address icmp query internet control message protocol introduction computer network release like ping icmp query identiÔ¨Åer Ô¨Åeld used recognize returning response icmp error message little trickier direct connection inbound error message previous outbound packet triggered response header packet triggered icmp error message embedded body icmp message nat router look embedded header determine forward icmp message nat router rewrite address embedded header traceroute time exceeded traceroute program us icmp time exceeded message packet sent destination udp unused port ttl set Ô¨Årst router packet reach decrement ttl drop return icmp time exceeded message sender know Ô¨Årst router chain second packet sent ttl set second router path return icmp time exceeded continues Ô¨Ånally remote host return likely icmp port unreachable example traceroute output useful utility example traceroute probe nth router answered different router suggests router conÔ¨Ågured work parallel route change router longer respond icmp time exceeded message drop packet distance value corresponding router traceroute report traceroute assumes path doe change case practice seldom issue route efÔ¨Åciency time traceroute showed trafÔ¨Åc home ofÔ¨Åce chicago area went internet exchange point outside washington dc inefÔ¨Åcient route later Ô¨Åxed situation like typically caused provider did negotiate sufÔ¨Åcient internet exchange point traceroute nonexistent site work point packet reach internet backbone Ô¨Årst router doe default route point packet routed icmp destination network unreachable returned traceroute interacts somewhat oddly router using mpls label ing mpls router likely internal router continue forward icmp time exceeded message destination returning sender result trip time measurement reported quite bit larger redirects host start forwarding table consisting single default router ered address dhcp icmp redirect message help host learn useful router classic example companion protocolsan introduction computer network release b conÔ¨Ågured default router address packet b sends receives packet forward notice network sent packet directly sends appropriate icmp redirect message redirect datagram network add route b forwarding table router solicitation icmp message used router protocol identify immediate neighbor look algorithm algorithm process start epilog point concluded basic mechanic come discussion ip router build forwarding table turn complex topic divided routing single organization isps algorithm routing organization ip routing chapter compare year old seeing limited adoption biggest issue Ô¨Åxed s lack address space dramatic improvement exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise address resolution protocol arp stated newer implementation repeat arp query timed entry Ô¨Årst sent unicast order reduce broadcast trafÔ¨Åc suppose host us arp retrieve b s lan address mac address short time later b change lan address hardware swap software reconÔ¨Åguration happen sends unicast repeat arp query b b happen sends broadcast repeat arp query b suppose broadcast arp query b receives b s response proceeds send b regular packet b wish reply likely present b s arp cache identify circumstance fail epilog introduction computer network release suppose broadcast arp request b inadvertently list physical address machine c instead s arp query ip lan c happen receive reply host lan able send entry arp cache b c suppose host connects internet default router r host begin exchanging packet remote host b sends b b reply exact form connection doe matter tcp work plug s ethernet cable ethernet port assumed different subnet strong weak model arp multihomed host play role assume automatically selects new ethernet connection default route router r happens original connection packet travel forth doe return address used direction change b disconnect s interface leaving ethernet interface connected happens connection b hint ip address packet b sent algorithm exercise tcp issue alternative exercise companion learned experience foremost bit needed address primary motive developing new version ip known specter running address highest level happened discussion end ip internet protocol important issue requires used require modest effort conÔ¨Åguration supposed improve chapter outline basic format packet including address format address assignment following chapter continues additional feature issue understood ietf actively interested proposal replace working group ip generation ipng created select new version rfc group s formal solicitation proposal july ipng director voted accept modiÔ¨Åed version simple internet protocol plus sipp rfc basis Ô¨Årst speciÔ¨Åcations released rfc rfc update basic protocol rfc rfc update addressing architecture sipp address originally bit length month leading adoption basis increased bit probably problem actual number simplicity address allocated bit easier site given relatively large address block fear waste secondary consideration leap potential accommodate clnp address ietf osi bit length compressible extent returned idea Ô¨Åxed division network host portion address Ô¨Årst bit network preÔ¨Åx including subnet portion remaining bit represents host portion rule spelled rfc split apply address beginning bit address held reserve unlikely event split ran problem future change rfc envisioned host portion preÔ¨Åxes ietf occasionally revisits issue present time split stay discussion justiÔ¨Åcation subnets andrfc split automatic default preÔ¨Åx length class scheme misleading think return like s classful addressing scheme router advertisement include preÔ¨Åx length assigning address manually preÔ¨Åx length speciÔ¨Åed explicitly manual address conÔ¨Åguration routing preÔ¨Åxes length usually mean length shorter routing different preÔ¨Åx length different point network year old usage remains quite modest shortage address begun loom ominously adoption rate rise quickly address begin climb price introduction computer network release header Ô¨Åxed header pictured byte twice size header Ô¨Åxed header intended support packet need support fragmentation header checksum option Ô¨Åelds concept extension header introduced support option extension header described extension header header come identiÔ¨Åed header Ô¨Åeld like protocol Ô¨Åeld Ô¨Åelds renamed analogue ttl decremented router packet discarded reach d Ô¨Åeld trafÔ¨Åc class destination addresssource addresshop limit header payload lengthflow label traffic class flow label new rfc state used source label sequence packet request special handling router quality service service sender actually taking advantage option supposed set flow label zero used flow label represents hash source destination address trafÔ¨Åc class router use Ô¨Åeld way look quickly priority reservation state packet packet belonging Ô¨Çow routing extension header routing header flow label general notinclude information source destination port number connection pair host make use Ô¨Åeld aÔ¨Çow term used return trafÔ¨Åc belongs different Ô¨Çow historically term Ô¨Çow used various scale single bidirectional tcp connection multiple related tcp connection trafÔ¨Åc particular subnet egthe Ô¨Çow introduction computer network release address address written group hex digit preferred rfc group separated colon leading s removed fedc address contains long run s example address embedded address writing address string used represent block needed create address correct length avoid ambiguity used embedded address continue use separator example standard format representing address using bit explicitly displayed mean preÔ¨Åxed loopback address followed network address preÔ¨Åxes written notation rfc suggested initial allocation initially limited address beginning bit block binary generally speaking address consist network preÔ¨Åx including subnet bit lowed interface identiÔ¨Åer network preÔ¨Åxes interface identiÔ¨Åers address associated scope deÔ¨Åned rfc scope unicast address global meaning intended globally routable meaning work directly connected neighbor address loopback address considered scope scope level available multicast address rfc scope address implicitly coded Ô¨Årst bit address block example global scope packet address address destination source routed reply impossible address unique local address category network preÔ¨Åxes ofÔ¨Åcially global scope practical sense behave scope interface identiÔ¨Åers mentioned earlier address divided network preÔ¨Åx host portion corresponding host bit address bit known Ô¨Åcially interface identiÔ¨Åer change terminology reÔ¨Çects understanding ip address attach interface host original plan interface identiÔ¨Åer derive case lan address interface identiÔ¨Åer set administratively given ethernet address interface identiÔ¨Åer based formed inserting Ô¨Årst byte byte bit seventh bit Ô¨Årst byte ethernet Ô¨Çag set address introduction computer network release result process ofÔ¨Åcially known modiÔ¨Åed identiÔ¨Åer eui stand extended unique identiÔ¨Åer detail rfc example host ethernet address identiÔ¨Åer ccff leading seventh bit turned time format proposed widely expected ethernet mac address eventually bit length interface identiÔ¨Åers long recognized major privacy concern matter portable host connects internet home work airport internet cafe interface Ô¨Åer remains serf permanent host Ô¨Ångerprint result identiÔ¨Åers discouraged personal workstation mobile device host continue use interface identiÔ¨Åers alternatively administratively assigned interface identiÔ¨Åers general issue warrant abandoning identiÔ¨Åers fact risk ipvseeyou vulnerability consider budget home router combined access point us address device remain market currently use offer upgrade path excellent chance mac address router ethernet assigned sequentially related way determined oui user using interface identiÔ¨Åer connecting internet router s mac address exposed traceroute user s address reveal router s address hop user s address ethernet mac address easily router mac address turn determines router s mac address handful value finally map exist physical gps location mac address obtained driving scanning mac address recording gps coordinate example user s address user s real home location straightforward determine rfc proposes alternative identiÔ¨Åers interface identiÔ¨Åer secure hash secure hash parameter address preÔ¨Åx secret key couple parameter thrown mix need concern parameter interface s mac address interface s interface identiÔ¨Åers created way change connection point connection point preÔ¨Åx change reveal ethernet address randomly scattered key space feature make probing address effectively impossible exercise interface identiÔ¨Åers previous paragraph change unless preÔ¨Åx change normally happens host moved new network slaac privacy interface identiÔ¨Åers changed regular interval privacy reason finally interface identiÔ¨Åers centrally assigned using remote probing address based identiÔ¨Åers easier based identiÔ¨Åers random attacker guess hardware vendor Ô¨Årst byte ethernet address ethernet address internal structure possibility byte assigned serial order considerable narrowing search space possible security obscurity keeping internal global address hidden practical importance additional discussion network rfc introduction computer network release address deÔ¨Ånes address scope intended used single lan routed begin preÔ¨Åx consisting bit followed zero bit remaining bit interface identiÔ¨Åer link interface question address machine previous section ethernet address ccff main application address bootstrap address tion stateless autoconÔ¨Åguration slaac optional permanent address router router communicate neighboring router address understanding change global address subnet conÔ¨Ågurations change rfc interface identiÔ¨Åers used address doe change ethernet ware replaced rfc interface identiÔ¨Åers used mechanism s parameter represents interface physical address address stant life host rfc used generate address preÔ¨Åx hash parameter preÔ¨Åx consequence identifying router neighbor address sible conÔ¨Ågure router address forwarding trafÔ¨Åc exchanging message address sufÔ¨Åcient similarly ordinary host ward packet default router using s address return router addressing setting router second router interface egtunnel interface natural candidate interface identiÔ¨Åer case address assigned manually bit chosen unique link question sending address separately supply link s zone identiÔ¨Åer appending string containing interface address cafe tcp connection using address example use address true address deÔ¨Åned rfc rarely used address block confused block address implicitly identify link subnet virtue network preÔ¨Åx address created pas detection test used duplicate address detection anycast address introduced anycast address anycast address assigned set router addition router s unicast address packet addressed anycast address delivered member set note quite different multicast address packet addressed delivered member set local routing infrastructure decide member anycast group receive packet normally sent closest member allows host send set router designated individual default router address introduction computer network release anycast address marked node sending address need aware anycast status address anycast simply router involved conÔ¨Ågured recognize anycast exists limited form bgp anycast generally router ured indirectly egthrough bgp network preÔ¨Åxes assuming address seen host composed network preÔ¨Åx interface identiÔ¨Åer remains requirement rfc addressing architecture state unicast address start binary value interface id required bit long requirement occasionally revisited ietf unlikely change mainstream trafÔ¨Åc Ô¨Årm split departure division point depended development subnets local conÔ¨Åguration note division point Ô¨Åxed router use cidr classless internet domain routing cidr base forwarding decision preÔ¨Åxes shorter allocation globally routable preÔ¨Åxes block deÔ¨Ånes variety specialized network preÔ¨Åxes including preÔ¨Åx preÔ¨Åxes anycast multicast address example saw earlier preÔ¨Åx identiÔ¨Åes address embedded address important class network preÔ¨Åxes supplied provider entity represent Ô¨Årst half globally routable address preÔ¨Åxes visible outside world customer typically assigned relatively large block address allows bit local subnet speciÔ¨Åcation network preÔ¨Åx allows subnet bit subnet bit supplied router conÔ¨Åguration subnets closest analogue subnet mask network preÔ¨Åxes supplied host associated length length bit site single externally visible address block site multihomed multiple independent address block site private unique local address preÔ¨Åxes corresponding private address block like ofÔ¨Åcially called unique local unicast address deÔ¨Åned rfc replace earlier address plan ofÔ¨Åcial scope formally deprecated rfc address informally referred local Ô¨Årst bit preÔ¨Åx related preÔ¨Åx reserved future use consolidated bit local preÔ¨Åx represent subnet id assigned administratively autoconÔ¨Åguration introduction computer network release bit bit bit represent global id site set global id pseudorandom value resultant preÔ¨Åx certainly globally unique considered global scope sense address supposed routed site furthermore site generally admit packet outside world addressed destination global id preÔ¨Åx rationale choosing unique global id site accommodate potential later merger organization need renumbering chronic problem site using private address block justiÔ¨Åcation accommodate vpn connection site example use block home connect using vpn site using possible printer address application server multicast moved away broad cast instead providing wide range multi cast group note multicast straightforward general multicast global ip multicast problematic ethernet multicast ethernet mentation switch multicast intended limit broadcast trafÔ¨Åc general switch propagate lan multicast trafÔ¨Åc like broadcast multicast address beginning bit numerous speciÔ¨Åc address class address deÔ¨Åned actual delivery multicast address correspond egethernet multicast address static correspondence speciÔ¨Åcally x y z w byte multicast address hex ing ethernet multicast address x y z w rfc typical host need join subscribe ethernet multicast group multicast address broadest scope address corresponding ethernet multicast address essentially corresponds s lan broadcast use lan multicast mean host packet sent address important multicast address address meant used reach router router ordinary host subscribe generally speaking node ethernet send multicast listener discovery mld sage multicast group wish start using message allow ethernet switch optimize forwarding host subscribed multicast group question receive message switch supposed treat multicast like broadcast worse switch simply fail forward multicast packet destination explicitly opted join group extension header ip header contained protocol Ô¨Åeld identify header usually udp tcp option contained ip header replaced scheme allowing arbitrary chain supplemental header header Ô¨Åeld canindicate following header udp tcp indicate option optional extension header include multicast introduction computer network release option header destination option header routing header fragment header authentication header mobility header encapsulated security payload header extension header processed order recommended order inclusion intended processing destination host routing header exception option header consists set xtype valueypairs intended processed router path tag type Ô¨Åeld indicates router doe understand option drop packet continue processing rest option option provided rfc padding set alignment later header rfc later deÔ¨Åned option support jumbograms datagrams larger byte need large packet remains unclear light packet size jumbograms meant used underlying lan doe mtu larger byte lan world currently moving direction option header processed router encountered potential overburden internet routing result rfc strongly discourages new option header unless examination hop essential destination option header similar option header consists set xtype valueypairs original rfc speciÔ¨Åcation deÔ¨Åned option padding destination header intended processed destination turning packet transport layer rfc destination option header type deÔ¨Åned mon use rfc deÔ¨Åned destination option header limit nesting tunnel called tunnel encapsulation limit rfc deÔ¨Ånes destination option header use mobile rfc routing protocol lossy network rpl deÔ¨Åned destination option type carrying rpl data complete list option type option destination option header accordance rfc introduction computer network release routing header original type routing header contained list address packet routed did contiguous list visited en route destination d rny option header contained rn d ywith initial destination dress update header rn d y old destination current swapped send packet continue rn dressed packet Ô¨Ånal destination header contained segment left pointer indicating address processed incremented ri packet arrived d routing header contain routing list rny general principle like loose source routing note router listed router rn did need examine header processed packet based current destination address form routing header deprecated rfc concern attack attacker send packet routing header containing alternating list just d y generate substantial trafÔ¨Åc link rfc andrfc deÔ¨Åne limited routing header rfc deÔ¨Ånes quite limited routing header used mobility deÔ¨Ånes mobility header rfc routing header used rpl mentioned basic form type header described use limited speciÔ¨Åc routing domain fragment header support limited fragmentation fragment header header contains fragment offset Ô¨Åeld contains bit actual offset fragment header contains identiÔ¨Åcation Ô¨Åeld fragment packet carry value Ô¨Åeld fragmentation original sender router way allowed fragment packet sender fragmentation occur example sender kb packet send udp needed fragment accommodate ethernet mtu packet need fragmented sender Ô¨Årst identiÔ¨Åes unfragmentable consisting Ô¨Åxed header extension header accompany fragment include routing header unfragmentable header attached fragment requires link internet mtu byte lan header fragmentation reassembly used meet mtu requirement atm link asynchronous transfer mode atm carrying ip trafÔ¨Åc generally speaking fragmentation avoided application layer possible application attempt transmit usually kb block data remain persistent user fragmentation general issue world middleboxes middleboxes examine just destination address tcp port number Ô¨Årewalls example routinely block trafÔ¨Åc designated list port world middlebox difÔ¨Åculty Ô¨Ånding tcp header traverse extension header introduction computer network release possibly lengthy list extension header worse extension header newer middlebox unrecognized middleboxes simply drop packet unrecognized extension header making introduction new header problematic rfc address requiring future extension header use common format Ô¨Årst byte indicates s type second byte indicates length facilitiates rapid traversal chain older extension header example encapsulating security payload header rfc follow rule middleboxes treat special case rfc state exception header extension header examined cessed node packet s delivery path packet reach node set node case multicast identiÔ¨Åed destination address Ô¨Åeld header nonetheless intermediate node attempt add extension header break path mtu discovery path mtu discovery sender longer control total packet size rfc attempt promulgate general rule handling extension header example state router allowed drop packet certain extension header simply header unrecognized router ignore option header process packet header slower queue neighbor discovery neighbor discovery nd set related protocol replaces tool notably arp icmp redirects part dhcp message exchanged nd framework original speciÔ¨Åcation nd rfc later updated rfc nd provides following service finding local router s router discovery finding set network address preÔ¨Åxes reached local delivery allows preÔ¨Åx discovery finding local host s lan address given address neighbor solicitation detecting duplicate address duplicate address detection determining neighbor unreachable router discovery router periodically send router advertisement ra packet multicast group nary host wanting know router use wait periodic multicasts request ra packet immediately sending router solicitation request multicast group router advertisement packet serve identify router process called router discovery comparison address default router usually piggybacked dhcp response message dynamic host conÔ¨Åguration protocol dhcp introduction computer network release ra packet addition identifying router contain list network address preÔ¨Åxes use lan preÔ¨Åx discovery described following section Ô¨Årst approximation simple network preÔ¨Åx discovery supply network portion address network dhcp usually supply entire address ra packet contain important information lan mtu router message represent change router need send forwarded packet router node need forwarding enabled kernel dhcp equivalent inform neighboring node router put responsibility notiÔ¨Åcation router node router addition forwarding packet rfc run software support router advertisement despite mandate ra mechanism doe play role forwarding process network run router advertisement node example manually conÔ¨Ågured know router know neighbor emphasize manual conÔ¨Åguration like scale poorly linux system router advertisement agent radvd daemon nectivity tunneling preÔ¨Åx discovery closely related router discovery preÔ¨Åx discovery process host learn preÔ¨Åxes valid network host learn preÔ¨Åxes considered local host s lan reachable lan layer instead requiring router assistance delivery word doe notlimit determination delivery local mechanism having node check destination address preÔ¨Åxes assigned node s interface allows network preÔ¨Åxes share lan ega private public consequence routing subnets reach router lan principle able communicate directly drop restriction router advertisement packet sent router contain complete list valid preÔ¨Åxes preÔ¨Åx information option simple case list contain single globally routable preÔ¨Åx corresponding lan subnet particular lan multiple overlapping physical subnets preÔ¨Åx list contain entry subnet preÔ¨Åxes likely share common preÔ¨Åx length n multihomed site preÔ¨Åx list contain multiple unrelated preÔ¨Åxes corresponding different address block finally unique local address preÔ¨Åxes included preÔ¨Åx associated lifetime node receiving preÔ¨Åx ra packet use duration lifetime expiration likely sooner node obtain newer ra packet newer preÔ¨Åx list rationale inclusion preÔ¨Åx lifetime ultimately allow site easily renumber change provider switch new preÔ¨Åx provided new router preÔ¨Åx tagged bit indicating used autoconÔ¨Åguration stateless autoconÔ¨Åguration slaac preÔ¨Åx come Ô¨Çag indicating preÔ¨Åx set node receiving neighbor discovery introduction computer network release preÔ¨Åx supposed lan node assume reach neighbor sharing address preÔ¨Åx neighbor solicitation used Ô¨Ånd neighbor s lan address neighbor share preÔ¨Åx router used equivalent node sharing preÔ¨Åx sharing subnet preÔ¨Åx example subnets information subnets router advertise preÔ¨Åxes special case mean node subnet reach member subnet directly apply wireless setting egmanets manet node subnet range apply using mobility mobile ip rfc neighbor solicitation neighbor solicitation message analogue arp request essentially query form address x arp request broadcast neighbor solicitation message sent multicast address lan layer usually represents small multicast group address y z w byte address sender trying look note using notation embedded address y z w address host lan need subscribe multicast address corresponding address normally neighbor solicitation message repeated regularly followup veriÔ¨Åcations initially sent unicast lan address Ô¨Åle common practice arp implementation optional unlike arp host lan expected eavesdrop initial neighbor solicitation message target host s response neighbor solicitation message called neighbor advertisement host send unsolicited belief lan address changed analogue proxy arp permitted node send neighbor advertisement behalf likely reason node receiving proxy service mobile host temporarily remote home lan neighbor advertisement sent proxy Ô¨Çag indicate real target doe speak proxy advertisement ignored node host router discovered neighbor s lan address neighbor solicitation continues monitor neighbor s continued reachability neighbor solicitation includes neighbor unreachability detection node host router ues monitor known neighbor reachability inferred ongoing trafÔ¨Åc exchange neighbor advertisement response node detects neighboring host able original node retry multicast neighbor solicitation process case neighbor s lan address simply changed node detects neighboring router unreachable attempt Ô¨Ånd alternative path finally icmp redirect message moved neighbor discovery allow router tell host router better positioned handle trafÔ¨Åc given destination introduction computer network release security neighbor discovery protocol outlined received nd message trusted lead problem node pretending thing example host pretend router simply sending router advertisement host capture trafÔ¨Åc neighbor send selectively real router host pretend host analog arp spooÔ¨Ång arp security host sends neighbor solicitation host b prevents host c sending neighbor advertisement claiming b previously joining appropriate multicast group attack goal eavesdropping denial service purely attack example host c answer host b s dad query duplicate address detection claiming address question use preventing b acquiring address good summary attack rfc attack worth noting launched node lan launched remotely reduces risk doe eliminate site allow connect internet caf√©s run highest risk setting workstation locked node compromised virus able disrupt network rfc suggested site concerned kind attack host use cation header encapsulated security payload header supply digital signature nd packet ipsec node conÔ¨Ågured require check attack prevented unfortunately rfc offered suggestion static conÔ¨Åguration scale poorly completely undermines goal autoconÔ¨Åguration Ô¨Çexible alternative secure neighbor discovery send speciÔ¨Åed rfc us encryption encryption validate nd message remainder section familiarity material encryption necessary message digitally signed sender using sender s private key recipient validate message using sender s corresponding public key principle make impossible message sender pretend sender practice problem public key guarantee compromised sender message entity previously sent message using key second bulleted example c sends nd message falsely claiming b straightforward application public key prevent ifthe original host previously heard b trusted sender real general know b c real trust whichever host heard Ô¨Årst possible c started deception s Ô¨Årst query b beating b punch common solution problem create form infrastructure certiÔ¨Åcate authority certiÔ¨Åcate authority setting node ured trust message signed certiÔ¨Åcate authority authority conÔ¨Ågured vouch identity node necessary secure operation send implement version certiÔ¨Åcate authority known trust anchor conÔ¨Ågured guarantee identity router host detail somewhat simpler mechanism outlined certiÔ¨Åcate authority anchor router common authority trust anchor used host need conÔ¨Ågured list address neighbor discovery introduction computer network release send support simpler validation mechanism known cryptographically generated address cgas rfc interface identiÔ¨Åers secure hash secure hash host s public key parameter cgas alternative mechanism discussed interface identiÔ¨Åers dns name domain used tor use cgas use cgas make impossible host c successfully claim host b b public key hash b s address andthe matching private key c attempt send neighbor advertisement claiming b c sign message private key hash corresponding public key match portion b s address similarly dad scenario c attempt tell b b s newly selected cga address use c won t key matching address b ignore report general cgi address allow recipient message verify source address owner associated public key need infrastructure trust man middle c canstill pretend router using cga address router address known requester easier protect router using trust anchor fewer send relies fact Ô¨Ånding input hashing cga infeasible general analog impossible address host portion won t bit prevent Ô¨Ånding hash collision brute force example host portion address bit c tweaking supplemental hash parameter match b s cga send seen little use world partly seen slow adoption perception vulnerability send protects difÔ¨Åcult exploit simpler mechanism achieve nd security requires considerable support lan layer outlined rfc requires host connects directly switch ethernet switch fairly smart possible conÔ¨Ågure know port connect router host addition possible conÔ¨Ågure block router advertisement host port notrouter port quite effective preventing host pretending router assumes switch signiÔ¨Åcant packet inspection fact fairly common ethernet switch feature involved doe require access point kind switch able block router advertisement isn t quite commonly available determining switch port connected router rfc suggests brief initial learning period switch port connecting device claim router considered permanently router port host address assignment provides competing way host obtain ip address based s dhcp dynamic host conÔ¨Åguration protocol dhcp entire address handed server stateless address autoconÔ¨Åguration slaac address generated locally network preÔ¨Åx obtained preÔ¨Åx discovery original idea slaac support complete network setup host isolated lan talk box router introduced connecting lan introduction computer network release internet host able determine unique routable address information available router early day development fact intended address ments router server slaac meant ordinary host era common address assigned statically conÔ¨Åguration Ô¨Åles rfc state slaac used site particularly concerned exact address host use long unique properly slaac evolved degree parallel slaac solves autoconÔ¨Åguration lem quite neatly point solves just effectively provides greater administrative control reason slaac end widely deployed hand slaac give host greater control address end offering host greater degree privacy allowing endpoint management use private temporary address host Ô¨Årst begin neighbor discovery process receives router advertisement packet packet special bit m managed bit o conÔ¨Åguration bit m bit set indicate available network address assignment o bit set indicate able provide additional conÔ¨Åguration information egthe dns server host using slaac obtain address addition individual preÔ¨Åx ra packet bit set indicates associated preÔ¨Åx used slaac duplicate address detection host obtains unicast address address address created slaac address received manually conÔ¨Ågured address go detection dad process host sends neighbor solicitation message like arp query neighbor discovery asking host address answer address duplicate acd arp finer point notas original Ô¨Åeld n message set special unspeciÔ¨Åed value allows host recognize dad query n process time address fact unique rfc deÔ¨Ånes optimistic dad mechanism allows limited use address dad process completes meantime address marked optimistic outside interval host allowed use address dad process failed rfc fact go host established address receives dad query address indicating host want use address original host discontinue use address dad process fails address based identiÔ¨Åer node ethernet address bigger problem just Ô¨Ånding working address dad process fails address constructed rfc mechanism interface identiÔ¨Åers host able generate new interface identiÔ¨Åer try counter number dad attempt included hash calculates interface identiÔ¨Åer incrementing counter result entirely new identiÔ¨Åer dad work quite network true multicast inefÔ¨Åcient say manet manet distant host receive dad neighbor solicitation message host address assignment introduction computer network release delay work continues development improvement dad network stateless autoconÔ¨Åguration slaac obtain address slaac deÔ¨Åned rfc Ô¨Årst step host generate address address appending standard preÔ¨Åx interface identiÔ¨Åer interface identiÔ¨Åers likely derived host s lan address using rfc mechanism important point available network involvement host ensure newly conÔ¨Ågured address fact unique us dad verify assuming duplicate point host talk host lan egto Ô¨Ågure printer step router available host send router solicitation r message multicast address router present answer router advertisement ra message contains preÔ¨Åx information option list preÔ¨Åxes preÔ¨Åx discovery mentioned earlier ra message mark Ô¨Çag preÔ¨Åxes eligible use slaac preÔ¨Åxes marked slaac used preÔ¨Åxes marked lifetime indicating long host continue use preÔ¨Åx preÔ¨Åx expires host obtain new new ra message host chooses appropriate preÔ¨Åx store information appends preÔ¨Åx interface identiÔ¨Åer create routable address address formed veriÔ¨Åed dad mechanism era interface identiÔ¨Åers principle possible receiver packet extract sender s lan address portion sender s address turn allow bypassing neighbor solicitation process look sender s lan address actually permitted privacy option way certain received address fact generated slaac rfc interface identiÔ¨Åers extraction longer potentially option host using slaac receive multiple network preÔ¨Åxes generate address preÔ¨Åx rfc deÔ¨Ånes process host determine wish connect destination address d multiple address use example d address globally visible host likely want choose source address rfc includes mechanism allow host permanent public address possibly corresponding dns entry just possibly formed directly interface identiÔ¨Åer prefer alternative temporary privacy address outbound connection example slaac privacy finally rfc deÔ¨Ånes sorting order multiple address representing destination using end slaac process host know address set address default router learned dhcp identity host s dns server concern slaac originally did provide way host Ô¨Ånd dns server strategy fall rfc deÔ¨Ånes process router introduction computer network release include information ra packet send host slaac process completes Ô¨Ånal step autoconÔ¨Åguration dns name host dns server entirely separate issue approach simply dns name host model autoconÔ¨Åguration host inward nat router similarly dns name reachable directly slaac host reachable dns name needed host site choose address assignment instead slaac possible Ô¨Ågure address slaac use identifying bit creating dns entry host finally host use dynamic dns rfc update dns record slaac privacy portable host us slaac move network network base slaac address interface identiÔ¨Åer static interface identiÔ¨Åer easy track interface identiÔ¨Åer change reason obfuscation mechanism rfc interface identiÔ¨Åers interface identiÔ¨Åers includes network preÔ¨Åx hash connecting new network result new interface identiÔ¨Åer rfc rfc introduced set privacy extension slaac optional mechanism generation alternative interface identiÔ¨Åers based rfc pseudorandom generation using original interface identiÔ¨Åer seed value rfc go support regular change interface identiÔ¨Åer increase difÔ¨Åculty tracking host time doe change network preÔ¨Åx Ô¨Årst selects function f secure hash new temporary interface id iids calculated follows iid new seed new f seed old iid old pair represents half return value f argument f concatenated seventh bit iid newmust set cf interface identiÔ¨Åers bit set process initial iid based probability host accidentally choosing interface identiÔ¨Åer manner vanishingly small neighbor solicitation mechanism dad used verify address fact unique host s lan privacy address used connection initiated client extent host accepts incoming connection need Ô¨Åxed address address based original interface identiÔ¨Åer available result rfc mechanism important privacy rfc mechanism fully operational rfc stated privacy address disabled default largely concern frequently changing ip address concern abated experience privacy address automatically enabled typical address lifetime range hour hour address expired generally remains available deprecated cycle longer consequence privacy address slaac host typically host address assignment introduction computer network release multiple active address network preÔ¨Åx given time rfc suggests host change address privacy reason day address lifetime seven day add use separate address virtual machine containerized application rfc suggests address needed number quite bit higher proposal privacy address suggest changing day address lifetime reduced entirely unreasonable fact browser use separate address separate website accessed use address doe add memory trafÔ¨Åc requirement router neighbor discovery neighbor discovery provides option temporary address assignment improve privacy potential advantage slaac process entirely control end regularly egevery hour changing host portion address make external tracking host difÔ¨Åcult tracking cooky prevented residential site handful host considerable degree tracking obtained simply observing common preÔ¨Åx general discussion privacy issue related addressing rfc job server tell inquiring host network preÔ¨Åx e supply identiÔ¨Åer similar server host begin process sending request multicast address versus broadcast address job relay agent tag request correct current subnet forward actual server allows server different subnet requester note use multicast doe diminish need relay agent fact multicast address scope limited current lan relay agent forward actual server using address host using slaac obtain address use special form obtain dns server static information client ask temporary address identiÔ¨Åed identity association Ô¨Åeld request handled like permanent address request client ask new temporary address short time later client doe different temporary address returned repeated request permanent address hand usually return address temporary address typically used improve privacy making difÔ¨Åcult track user address server return temporary address course log address slaac used log possible new address run neighbor discovery neighbor discovery process slaac doe place control cryptographic mechanism creation hand end user centralized service example mechanism Ô¨Çaw allow remote observer infer relationship different temporary address mechanism described appears secure long portion compromised introduction computer network release response contains list length address separate address expiration date client send new request expiration address actually using host portion address typically come address pool representing small range integer value generally allocated consecutively server hand advantage enormous range possible host portion allocating value sparsely use pseudorandomness make difÔ¨Åcult outsider know site s host address guess address host cf interface identiÔ¨Åers internet draft proposes following mechanism server generate bit address hand f function argument concatenated f preÔ¨Åx iaid preÔ¨Åx argument slaac privacy string client identiÔ¨Åes server based ethernet address option possible iaid identity association identiÔ¨Åer request different name used requesting temporary versus permanent address older server allocate interface identiÔ¨Åers serial order obsolete server make slaac approach attractive epilog run large address block reached mature level development common operating system provide excellent support conversion slow isps provide limited nonexistent support inexpensive Ô¨Årewalls replace ubiquitous nat router just beginning appear time tell evolves year address block disappeared recently quite possible prove just catalyst need exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise address associated speciÔ¨Åc multicast address explain typical ethernet original host address obtained slaac lan multicast group corresponding host s multicast address likely small case consisting host packet delivery small lan multicast group efÔ¨Åcient delivery large multicast group b step server ensure address hand lan multicast group corresponding host address multicast address small attacker sends large number probe packet block blocking attacker s ip address suppose attacker us launch probe probe attacker epilog introduction computer network release change bit address probe blocked efÔ¨Åciently block blocking user following address block b beef c cafe d face byte taking minimum packet size long send quadrillion probe packet target site egping necessarily bandwidth gbps additional feature chapter continue describing special attention paid comparison interoperability operating environment natively supported globally exposed address striking difference contemporary network network workstation address likely hidden nat router work address translation network hand host address globally visible inbound access limited Ô¨Årewalls nat claimed provide better security real beneÔ¨Åt enables site cope limited number address available network use form nat allow connectivity server addition limiting number address needed legacy nat router provide measure privacy security nuisance privacy handled previous chapter private temporary address recall world address globally visible privacy mean address changed regularly degree security provided nat fact connection initiated inside packet outside allowed nat Ô¨Årewall unless response packet sent inside feature implemented conventional Ô¨Årewall address translation furthermore given conventional Ô¨Årewall straightforward modify support limited regulated connection outside world desired analogous modiÔ¨Åcation nat router difÔ¨Åcult said blanket ban connection initiated outside prove frustrating nat second security beneÔ¨Åt hiding address easy map subnet pinging probing possible host mapping reveal internal structure mapping meant impractical subnet quintillion host randomness note interface identiÔ¨Åers bit host s address chosen sufÔ¨Åcient randomness Ô¨Ånding host probing virtually impossible exercise previous chapter nuisance nat broken protocol involve negotiation new connection egtftp ftp sip used v oip potential make easier manage said strict Ô¨Årewall rule blocking inbound connection eliminate potential beneÔ¨Åt rfc deÔ¨Ånes updated version icmp protocol version message identiÔ¨Åed type code subtype Ô¨Åelds making reasonably easy add new message format seen icmp message make neighbor discovery neighbor discovery introduction computer network release unlike distinguishes informational error message Ô¨Årst bit type Ô¨Åeld unknown informational message simply dropped unknown error message handed possible appropriate process example udp port unreachable message delivered udp sender undeliverable packet includes version echo request echo reply command based unlike arriving message delivered cess generated corresponding echo request base speciÔ¨Åcation includes format error condition list somewhat cleaner corresponding list destination unreachable case following numeric code returned route destination returned router entry destination administratively prohibited returned router entry decline use policy reason code special case situation code returned appropriate scope source address returned router example asked route packet global address return address egis host private address attempt connect global address nat involved unreachable catchall category routing failure covered message example packet successfully routed router neighbor discovery failed Ô¨Ånd lan address corresponding address unreachable returned destination host doe requested udp port open address failed policy code route destination code packet big like s fragmentation required dontfragment Ô¨Çag set based fragmentation time exceeded used case hop limit exceeded source fragmentation used timer expired parameter problem used malformed entry header unrecognized header type unrecognized option information additional featuresan introduction computer network release node information message includes node information ni message deÔ¨Åned rfc form ni query allows host asked directly accomplished lookup dns record ni query allow host asked address address recipient ni query conÔ¨Ågured refuse answer subnets world network manager struggle divide limited address space pool appropriately sized subnets simpler subnets size following guideline set network preÔ¨Åxes common exception rfc permit use preÔ¨Åxes end point link bit end site receiving provider address preÔ¨Åx size assign subnets reason subnetting join incompatible lan press intervening router service Ô¨Årewalls separate trafÔ¨Åc diagram show site external preÔ¨Åx router terfaces numbered shown internal lan corresponding subnets subnet used connect provider provider interface assigned address block announce interface router advertisement route default route advertise interface preÔ¨Åx announce interface route announce default route interface interface advertise preÔ¨Åx interface preÔ¨Åx backup advertise preÔ¨Åx interface subnet subnet s preÔ¨Åx advertised subnets fixing division preÔ¨Åx host interface length bit compromise doe reduce maximum number subnets practice realistic concern subnets introduction computer network release enormous number leaving bit host identiÔ¨Åers split leaf room privacy mechanism slaac privacy provide reasonable protection recent motivation considering division grounded concern isp policy declaring user receive allocation hope user fact subnets residential customer say host router need single address block link isp customer need subnet use preÔ¨Åx customer fact need multiple subnets requiring subnet hope user allocated example preÔ¨Åxes subnets subnets hope doe pan rule mean user allocation hand user aregiven block want use subnets break rule locally create subnets preÔ¨Åx length bit bit host identiÔ¨Åer wanting standard way dictate Ô¨Çexibility division division completely arbitrary stop isps handing preÔ¨Åxes length leaving host bit general hope isps stingy preÔ¨Åx length adoption relatively modest work clear world user use nat network address translation create subnets desire world nat generally considered bad idea finally theory possible squeeze site subnets single converting site s main router switch customer s host connect equal footing isp mean making harder use router Ô¨Årewall described globally exposed address user risky using section assume connectivity exists site doe connectivity tunneling coexists client machine conÔ¨Åguration used client want connect using tcp website network service choice remote site support Ô¨Årst step dns lookup triggered application s appropriate lookup library procedure java stalk example client useinetaddress getbyname c language address lookup getaddrinfo deprecated gethostbyname dns client contact dns resolver asks appropriate address record corresponding server address dns maintains record address equivalent aaaa record address time longer machine usually request ternet draft proposes dns server delivers additional featuresan introduction computer network release record includes corresponding aaaa record cname record sent gybacked corresponding record nslookup dig dns request sent client s address probably set dhcp book book april available dns zone deÔ¨Åned following intronetworks aaaa record aaaa record record dns run dns server authoritative nameserver just resolver using answer query dns server using answer record query ideally nameserver eventually support query common host newly enabled connectivity continue use resolvers rfc discussion operational issue example dns request aaaa record nslookup utility command line example dns resolver contacted using nslookup address nslookup aaaa address face site dns name dns query return aaaa record used example general name recommended diagnostics testing primary dns name site type dns record facebook example java getbyname javagetbyname notabide rfc preference java networking property documentation state default behavior prefer using address one changed setting property totrue client application us library like java s return single ip address client attempt connect address returned address returned connection use similarly address returned connectivity working connection fail application dns resolver library effectively make decision rfc encountered stateless autoconÔ¨Åguration slaac provides conÔ¨Åguration using introduction computer network release mechanism small table preÔ¨Åxes precedence value following preÔ¨Åx precedence loopback default match address sidebar connectivity tunneling match embedded address network preÔ¨Åxes plus reserved network preÔ¨Åxes address assigned precedence looking table using rule internet domain routing cidr list address sorted decreasing order precedence entry address default ranked global address changed including preÔ¨Åx table ranking higher say default conÔ¨Åguration generally prefer available interface address globally routable given availability preference implemented assigning preÔ¨Åx matching address higher precedence assigned preÔ¨Åx table preferring doe work host connectivity neling slow limited outright precedence table changed prefer raising precedence preÔ¨Åx value higher conÔ¨Åguration usually linux host editing window thenetsh command example netsh interface prefixpolicies systemwide preference action using openssh ssh system support remote preÔ¨Åx precedence set high connection automatically precedence ssh connecting precedence set low new connection use precedence ssh connecting application use return listof address matching given list just entry address dns dns make list longer c language getaddrinfo return list doe java rfc preference determine relative order entry list application request list address probably common strategy try address turn according order example previous paragraph openssh doe fact request list address using getaddrinfo according source code try order usually connects Ô¨Årst address list preferred rfc rule alternatively application implement conÔ¨Åguration preference additional featuresan introduction computer network release decide user tends limited reader book happy eyeball happy eyeball algorithm rfc offer nuanced strategy deciding application connect using initially client try address send tcp syn address tcp connection establishment connection doe succeed say m client try address m barely time tcp handshake succeed doe allow meant allow sufÔ¨Åcient time retransmission client fall failure certain server list website supporting modest number crept site require www preÔ¨Åx availability networking provider likely get honorable mention having shortest address client encouraged cache winning protocol connection client attempt use protocol successful cache timeout order minute connectivity failed restored client resume using moderate delay unfortunately happy eyeball mechanism implemented application layer case scope cache limited particular application mainstream happy eyeball implementation likely evolve placing greater conÔ¨Ådence option simple change increase time interval client wait response giving trying test happy eyeball mechanism observing trafÔ¨Åc wireshark Ô¨Årst example imagine giving client host address addition automatic address recall address globally routable connect say monitor trafÔ¨Åc using wireshark dns aaaa query lowed immediately dns query subsequent tcp syn sent address client host know address routable tried let change address client host dead beef cafe manual conÔ¨Åguration manual address conÔ¨Åguration providing actual connection manually specify fake default router address block supposed globally routable try connection tcp port Ô¨Årst firefox browser using introduction computer network release dns query aaaa packet followed Ô¨Årst attempt highlighted orange negotiate tcp connection sending tcp syn packet tcp tion establishment address m later second dns followed ultimately successful connection attempt using starting particular version firefox word implemented happy eyeball mechanism try connection using previously mentioned openssh application using connect port example generated somewhat later dns return s address dns query aaaa packet numbered pale blue client address half millisecond query return packet client sends tcp syn packet s address packet highlighted orange syn packet retransmitted second second later black avail second client give attempt connect address connection green successful long delay show happy eyeball implemented openssh source code conÔ¨Årms host initiating connection running ubuntu lts ultimately failing tcp connection give try second newer system make try longer abandon connection attempt example router section present experiment connection router router use slaac instead use additional featuresan introduction computer network release address require speciÔ¨Åcation interface address manually conÔ¨Ågured network preÔ¨Åxes address practical problem address application documentation describing include speciÔ¨Åcation interface sparse analogue familiar ping command used send echo request linux mac system ping window command support option specify interface noted mandatory sending address example ping host s loopback address work ping multicast group interface answer received byte eff host pinging byte ccff second linux host answer received window machine android phone v oip phone subnet supporting remained mute despite v oip s difÔ¨Åculties nat avoided lieu interface option syntax usually work following section ccff ping address second linux host ing previous query syntax work destination interface identiÔ¨Åer us format note ff fe middle note Ô¨Çipped seventh bit byte destination ethernet address tcp connection using address experiment create tcp connection command like provide way specifying interface option failing rfc deÔ¨Ånes concept azone identiÔ¨Åer appended address separated character specify link involved linux system zone identiÔ¨Åer interface numeric zone identiÔ¨Åers used case represents number particular interface designated list called zone index window system zone index interface inferred output ipconfig command include local address use zone identiÔ¨Åers restricted literal numeric address little demand symbolic address following address zone identiÔ¨Åer creates ssh connection second linux host example preceding section ssh ccff ssh service listening connection veriÔ¨Åed host netstat grep ssh connection actually used veriÔ¨Åed say use network sniffer like wireshark Ô¨Ålter expression useful example router introduction computer network release connection fails ssh work connection show listening list netstat command port likely suspect manual address conÔ¨Åguration use manually conÔ¨Ågured address possible global ienot connected internet address router preÔ¨Åx discovery preÔ¨Åx discovery create subtle difference Ô¨Årst step pick suitable preÔ¨Åx example use preÔ¨Åx beef cafe particular preÔ¨Åx doe notmeet randomness rule Ô¨Åxes use globally routable preÔ¨Åx want mislead host reachability router source router advertisement need way specify preÔ¨Åx preÔ¨Åx length thought corresponding subnet mask forgiven imagining default preÔ¨Åx length given preÔ¨Åx length generally allowed network preÔ¨Åxes case command preÔ¨Åx length included end usage just slightly peculiar world slash notation used true preÔ¨Åxes bit zero slash length linux ipcommand us slash notation sense specify subnet mask theifconfig window netsh command specify subnet mask traditional way host usually assume preÔ¨Åx conÔ¨Ågured way length represents preÔ¨Åx meaning neighbor sharing preÔ¨Åx reachable directly lan assign bit manually linux ip address add beef cafe dev ip address add beef cafe dev macintosh system conÔ¨Ågured similarly interface probably window system typical command netsh interface add address local area connection beef cafe command ssh beef cafe create ssh connection assuming ssh listening connection address entry created simplify entry assigning address manually like notrecommended experiment lan connected internet actual routing nonetheless possible start router advertisement agent router discovery radvd manually conÔ¨Ågured preÔ¨Åx ra agent include preÔ¨Åx advertisement reasonably modern host construct address preÔ¨Åx using slaac used lan ra agent conÔ¨Ågured announce meaningless route node falsely believe ra agent providing internet connectivity additional featuresan introduction computer network release connectivity tunneling best option connectivity native support s isp situation s router sending router advertisement message host discover reach internet native support forthcoming option connect world using packet tunneling vpn mechanism used rfc outline common strategy simply attaching header packet similar encapsulation encapsulation available provider service searching tunnel broker tunnel broker provide service charge tunneling confused tunneling us encapsulation construct site s preÔ¨Åx embedding address site address get preÔ¨Åx decimal rfc rfc basic idea tunneling tunnel broker allocates preÔ¨Åx address block agrees create tunnel using encapsulation trafÔ¨Åc internet routed tunnel broker tunnel similarly packet site reach outside world using tunnel tunnel word link router generally speaking mtu tunnel byte mtu physical interface allow space header near end requires local conÔ¨Åguration change tunnel broker provide way user set mtu far end practical mtu value vary mandatory minimum ethernet maximum setting tunnel doe involve creating stateful connection happens tunnel client ieyour endpoint broker record s address agree accept encapsulated packet provided endpoint address used source destination tunnel client end represented appropriate virtual network interface tunnel provider generally supply basic command necessary tunnel interface conÔ¨Ågured mtu set tunnel created tunnel interface client end assigned address default route assume preÔ¨Åx link broker client assigned address address route set client following command respectively interface name vary command assume interface represents link ip addr add dev ip route add dev ifconfig prefixlen route add default continues page connectivity tunneling introduction computer network release continued previous page netsh interface add address netsh interface add route point tunnel client connectivity verify use visit version website visit site alternatively install browser plugin make visible used finally use netcat force use following http example netcat potential issue tunnel client nat router router deliver arriving encapsulated packet correctly problem encapsulated packet remove tcp udp trafÔ¨Åc usual nat router primarily designed handle careful study router forwarding setting help Ô¨Åx newer router problem particularly likely different inside client attempt set tunnel simultaneously encapsulation Ô¨Årewalls strongly recommended host block new inbound connection interface tunnel interface nat router exception added necessary essential service using linux Ô¨Årewall command following append input protocol jump accept append input match conntrack ctstate √£√±established related jump accept append input jump drop point Ô¨Årewall tested attempting access inside host outside minimum outside global address inside host fail exception removed succeed exception restored checked using website send ping request site searching online ping site run remote tcp port scan try searching online port scan exercise setting router step desired set tunnel endpoint router host client site enjoy connectivity need second preÔ¨Åx assume note adjacent preÔ¨Åxes merged let r tunnel endpoint lan interface let host lan use linux radvd package router advertisement agent router discovery Ô¨Åle need say want lan preÔ¨Åx advertised interface additional featuresan introduction computer network release interface prefix advonlink advertise prefix advautonomous allows slaac prefix ifradvd started lan host ega automatically preÔ¨Åx slaac address automatically share r s default route taking conÔ¨Åguration Ô¨Åle r s routing table necessary manually conÔ¨Ågure address r s interface egas author s version host route irrelevant attribute shown default ccff dev host route r s address guaranteed subnet address ifradvd equivalent available manual approach assign r address host r ip address add dev host ip address add dev manual address conÔ¨Åguration r understand reach lan host need told default route r host ip route add dev use subnet address r used r s address likely s need mtu conÔ¨Ågured match r s virtual tunnel interface recall byte mtu r s physical outbound interface second router let add second router diagram r link separate ethernet lan link lan subnet r subnet beeftunnel provider case need run router advertisement agent egradvd network interface r link need address new subnet use private address option t use unnumbered interface unnumbered interface r connection link connectivity tunneling introduction computer network release conÔ¨Ågure r routing use address let assume mnemonic convenience follows r s s beef s forwarding table default route r similarly r s forwarding table entry destination subnet beef need address s interface likely need global address able determine interface fact connected subnet advantage giving global address impossible outside attacker reach interface directly save subnets hope short supply router site likely need management purpose ip address reachable site doe globally visible connectivity happens switch completely isp phone provider run address time hopefully time need talk server example dns name correspond address address want reach server server expected continue operating long time come necesary sort centralized translator early strategy rfc translator assigned preÔ¨Åx host append preÔ¨Åx address destination use resulting address contact destination packet sent address delivered translator translate header send translated packet destination nat network address translation reverse translation typically involve tcp port number resolve ambiguity approach requires host aware translator limited tcp udp use port number limitation formally deprecated rfc service phone provider switched customer data network change surprisingly inconspicuous connection service work just Ô¨Åne courtesy way tell look phone s ip address replacement protocol documented rfc based address translation allow connection initiated host host transparent host involved restricted tcp tcp udp icmp supported rfc us special dns variant rfc companion protocol use client sends ordinary dns query Ô¨Ånd address destination server additional featuresan introduction computer network release dns resolver dns receiving request use destination address dns resolver return client aaaa record synthetic address consisting preÔ¨Åx embedded address server multiple option exist rfc preÔ¨Åx belongs actual translator packet addressed address starting preÔ¨Åx delivered translator relationship translator resolver fact s preÔ¨Åx conÔ¨Ågured client us synthetic address contact server packet routed translator virtue preÔ¨Åx receiving Ô¨Årst packet client translator assign address new connection address short supply pool available address small allows address used client end translator tcp udp establish port mapping incoming source port port number allocated ensure trafÔ¨Åc uniquely reversable nat client try contact server using source port assigned address client port number changed icmp query sent query identiÔ¨Åer used lieu port number extend new protocol appropriate analog port number identiÔ¨Åed allow demultiplexing multiple connection sharing single address translation set creating appropriate table entry translated packet sent server address embedded synthetic address source address assigned address translator source port rewritten accordance new port mapping point packet Ô¨Çow freely original client destination endpoint aware translation unless client carefully inspects synthetic address receives timer translator delete association address connection used example suppose client address trying reach tcp port contact dns server Ô¨Ånds aaaa record ipv hex take preÔ¨Åx translator assume cafe return synthetic address cafe connectivity introduction computer network release abba intro dns query nameserveraaaa query query cafe cafe tcp connect cafe port port addr src port src addr src addr dest port src column shown client try connect cafe using source port Ô¨Årst packet arrives translator assigns connection outbound address reassigns source port new packet sent reply come translator look Ô¨Ånds corresponds y forward original client connectivity subject connectivity signiÔ¨Åcant lack connectivity world major isps connect directly indirectly cogent communication hurricane electric connectivity apparently connected year happened occasionally world usually isps involved come agreement quickly company maintains site reachable launch ping traceroutes cogent choose ping ping fails happens hurricane electric selection entering destination ultimately situation disagreement payfor interconnection pay share language bgp relationship isps backbone provider peer generally considered common deÔ¨Åning rule provider directly connect tier provider situation deÔ¨Ånitely problem necessarily calamitous sound customer able reach major service just reach general absence nat support direct connection individual connection server connection work customer isps typically connectivity including cogent additional featuresan introduction computer network release epilog functionally similar widespread use nat world make practice appear different course coexist parallel independent ip layer demand connectivity led multiple solution exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise suppose tried implement address address interface speciÔ¨Åed echo request sent interface end result different conventional correct interface supplied likely create ssh connection example router examine connection s packet using wireshark equivalent doe tcp handshake tcp connection establishment look different create ssh connection using manually conÔ¨Ågured address manual address conÔ¨Åguration use wireshark equivalent monitor connection dad duplicate address detection used suppose host get trafÔ¨Åc tunnel provider h connectivity tunneling improve security block packet connection initiated common make exception trafÔ¨Åc good idea h correctly conÔ¨Ågured know mtu link b mtu minimum allowed internet allows larger mtu value ahinternet b attempt send packet remote host b informed resultant failure b suppose b attempt send packet b receive packet big message c suppose mtu link raised byte outline scenario sends packet size greater byte remote host b packet big make way b receives notiÔ¨Åcation epilog introduction computer network release additional algorithm ip router build maintain forwarding table ethernet bridge option unknown destination afford build forwarding table incrementally putting host forwarding table host Ô¨Årst seen sender ip fallback delivery mechanism forwarding table built delivery succeed manual table construction possible practical literature common refer construction routing algorithm avoid term avoid confusion fundamental algorithm instead algorithm class algorithm consider vector approach used smaller site router exchange information immediately ing router table built way sequence periodic exchange approach router rapidly propagate information state link router organization receive information us build maintain map entire network forwarding table constructed demand map approach assume consistent information available cost link egthat router opposite end link know cost agree cost determined ment classiÔ¨Åes algorithm interior algorithm router involved internal larger organization common administrative regime established policy assign link weight set router following common policy known routing domain bgp protocol autonomous simplest strategy link cost link cost based bandwidth propagation delay Ô¨Ånancial cost administrative preference value careful assignment link cost play major role herding trafÔ¨Åc faster better link following chapter look border gateway protocol bgp culations bgp used select route traverse organization Ô¨Ånancial technical factor play dominant role making routing choice generally algorithm apply speciÔ¨Åc protocol course need modiÔ¨Åcation finally point early day internet routing allowed depend just destination quality service qos requested forwarding table entry strictly speaking xdestination ybut ratherxdestination qos originally type service Ô¨Åeld header header used specify qos called tos packet request low delay high throughput high reliability routed accordingly practice type service Ô¨Åeld rarely used eventually taken d Ô¨Åeld ecn bit Ô¨Årst bit type service Ô¨Åeld known precedence bit remain available used qos routing purpose class selector phb differentiated service example bit rfc following going ignore qos information assume routing decision based destination Ô¨Årst paragraph introduction computer network release algorithm routing attribute algorithm simplest algorithm used routing information protocol rip version protocol speciÔ¨Åed rfc router identify router neighbor sort mechanism add column forwarding table representing total cost delivery corresponding tion cost distance algorithm entry form xdestination cost cost administratively assigned link algorithm calculates total cost nation sum link cost path simplest case assign cost link case total cost destination number link destination known hopcount metric possible assign link cost reÔ¨Çect link s bandwidth lay network administrator wish thoughtful cost assignment form trafÔ¨Åc engineering play large role network performance point router report thexdestination cost yportion table neighboring router regular interval table portion vector algorithm doe matter neighbor exchange report time rate router monitor continued connectivity neighbor neighbor n unreachable reachability cost set inÔ¨Ånity real ip network actual destination subnets attached router router directly connected destination following identify router s directly connected subnets router build forwarding table reach router possible destination subnet reachable router breaking identiÔ¨Åcation router set attached subnets practice little concern exercise example subnets notidentiÔ¨Åed adjacent router ip router simple implementation present simpliÔ¨Åed working mentation rip using mininet network emulator update rule let router receiving report xd c dyfrom neighbor n cost c note mean reach d n cost c c cn update table according following rule destination d previously unknown destination add xd n cyto forwarding table cost d known destination entry xd m c oldy new total cost c c old switch cheaper route updating entry d xd n cy possible meaning n reporting cost decrease c c old ignores new report exercise increase existing entry xd n coldy new total cost c greater c old cost increase neighbor n currently using reach d incorporate increase table update entry d xd n cy algorithmsan introduction computer network release Ô¨Årst rule new destination shorter path existing destination case cost destination monotonically decrease consider unreachable destination convergence automatic cost decrease forever rule introduces possibility instability cost represents case neighbor n learned link failure driven cost reach d passing bad news route d vian case pass bad news Ô¨Årst cost increase come router discovering neighbor n unreachable updating cost n similarly router learns increase destination d neighbor b follow reach router c originator learned alternative route Ô¨Årst rule example Ô¨Årst example link break Ô¨Årst rule used start network forwarding table link cost dc eb initial neighbor discovery forwarding table node entry directly connected neighbor xb b xa c xa d xa e xc let d report sends record ignores d s new destination add xe table similarly let report d sending record just added d ignores s record s record d create entry xb d s table fact complete suppose c report b give b entry xe c report e e s table xa table xb b xa c xa d xa algorithm introduction computer network release e xc missing entry b c know reach report b c table complete b c reach d cost following sequence report occurred e report c causing c add xd c report b causing b add xd c case reachability b route d path report Ô¨Åx suppose report b received update entry xd note route e d e route c asymmetry indeterminateness order initial table exchange link weight pair neighbor exchange table pair start second exchange process discover route order length iethe shortest path Ô¨Årst discovered particularly important consideration example example illustrates link weight Ô¨Årst route discovered b direct route cost eventually discover longer route cost b dc initial table xc b xa c xa d xb c exchange xd c hasxb c d exchange c update xb toxb d addsxa d receives c s report ignores Ô¨Ånally suppose b d exchange d ignores b s route better b get d s update entry xa d report b creates entry xc point table follows xc b xa c xa d xb algorithmsan introduction computer network release thing Ô¨Åx inefÔ¨Åcient route Ô¨Åxed c replace route b xb look route b discovers route Ô¨Årst c report d second d report b similar sequence lead s discovering route example example illustrate algorithm proceeds link break return Ô¨Årst diagram table completed suppose link break case link broken longer available bring rule play dc eb shall assume reach e d assume contrary example c reach d exercise original case initially discovering break d e update table xe actually enter table consider equivalent removing entry indicates eventually d e report break respective neighbor apply rule update entry e xe assumed c route d ignore e s report suppose step c report e c report route e e add entry xd able reach c report add route xe Ô¨Ånal step report d d xe connectivity restored example previous example global perspective looked entire network example look speciÔ¨Åc router r responds receives report neighbor r s idea entire network look like suppose r s table initially follows link cost destination cost s b t c s d u algorithm introduction computer network release s sends r following report containing destination cost destination cost b c d e r update table follows destination cost reason s change s probably sent report b t change r s cost s tied r s cost t c s increase d s route s e s new destination s s cost destination r s cost destination s greater problem signiÔ¨Åcant problem table update presence broken link routing loop form loop persist indeÔ¨Ånitely example suppose following arrangement link having cost d b suppose link break d b immediately report b d longer reachable cost possible b report Ô¨Årst telling ithas route d cost b belief mean installs entry xd point called routing loop linear routing loop packet addressed d forward b b forward worse loop point report b point b update entry xd b report s entry xd process known slow convergence inÔ¨Ånity b report minute year cost overÔ¨Çow ordinary integer algorithmsan introduction computer network release fix simplest Ô¨Åx problem use small value inÔ¨Ånity Ô¨Çavors rip protocol use update second drawback small inÔ¨Ånity path network longer make path weighted link cost difÔ¨Åcult cisco igrp us variable value inÔ¨Ånity maximum default inÔ¨Ånity Ô¨Åxes split horizon split horizon us n destination d simply doe report n reach d preparing report n Ô¨Årst deletes entry n example split horizon mean b report reachability d b s split horizon prevents linear routing loop topology prevent loop following d suppose link break update xd report b update table toxd report c c report b update xd previous report violates s entry isxd eventually report c point c s entry xd number increasing report circulate counterclockwise actual routing proceeds direction clockwise split horizon includes poison reverse us n d fact report n deÔ¨Ånitive statement reach d coming scenario poison reverse actually affect outcome trivial triggered update original example Ô¨Årst report b loop resolved immediately loop occurred b Ô¨Årst report nominally outcome probability triggered update mean router report immediately neighbor detects change worse report Ô¨Årst b Ô¨Årst example problem go away similarly second example report b c b c report problem go away remains small window b send report just discovered problem report b problem introduction computer network release hold hold sort version triggered update receiver doe use new alternative route period time cycle following discovery unreachability give time bad news arrive Ô¨Årst example mean received b s report set aside report b usual point b report point b s earlier report discarded signiÔ¨Åcant drawback hold legitimate new route delayed period mechanism preventing slow convergence real world quite effective routing information protocol rip rfc implement widely adopted smaller installation potential routing loop limited value inÔ¨Ånity led development ternatives alternative strategy algorithm alternative cisco s enhanced interior gateway routing protocol eigrp eigrp family eigrp provably achieve suspend forwarding destination table Ô¨Çux observation minimizing route cost doe routing actually achieve minimum cost matter doe packet incur cost sender expects suppose node forwarding entry xd b cy meaning forward packet destination d b expects total cost sends packet d follow actual path take total link cost c say network accurate cost answer question turn yesfor algorithm follow rule carefully network stable meaning routing report changing concretely update report circulating based current network state proof routing loop answer course actual cost inÔ¨Ånite answer s neighbor b just switched using longer route d reported turn seek shortest route particularly trying save money transit cost route longer generally work just Ô¨Åne t phone company ran series print advertisement claiming longer route feature direct path congested complete routing long way round areguaranteed router seek shortest route network stable path case network accurate cost simple example illustrating importance global preventing loop pose network like bc algorithmsan introduction computer network release suppose b use allowed choose shortest route report c d reached cost total cost forwarding entry c xd similarly report b d reached cost total cost xd similarly b choice xd b choose minimal route loop form b use rule allowed choose route choose xd b choose xd happened routing loop forward packet d b b forward right apply routing router independently build table router notion path packet destination example case believe forwarding entry xd packet path routing router particularly worry big picture consider question fails example actual path inÔ¨Ånite prove routing network accurate cost provided router selects belief shortest path Ô¨Ånal destination network stable meaning dissemination report result change suppose actual route taken packet source destination determined application distributed algorithm longer cost calculated source choose example path fewest number link path network let s source d destination k number link actual path let s s forwarding entry d xd n cy n s s neighbor obtained route algorithm s received report xd c dyfrom n cost link c nand c c cn follow packet n d path p Ô¨Årst link deleted length hypothesis k length shortest path cost cost n d c mean cost path p s d n c c contradicting selection p path longer advertised cost Ô¨Ånal observation make route cost occur single routing domain information link available path traverse multiple routing domain separate routing domain calculate optimum path traversing domain local minimum necessarily add globally minimal path length particularly domain calculates minimum cost router domain router domain simple example router border router connecting domain ld left vertical dotted line domain rd right b ld choose shortest path rd b ld likely information link rd path length lead total path length b global minimum path length observation minimizing route cost introduction computer network release domain ld domain example domain ld rd join point route domain joined single point shortest path add globally shortest path distance vector algorithm possible algorithm based idea eliminate routing loop problem entirely present brief description algorithm dsdv dsdv distance vector proposed avoids routing loop introduction sequence number router prefer route recent sequence number information lower sequence number cycle rected information dsdv originally proposed manet manet additional feature trafÔ¨Åc minimization simplicity ignore best suited wired network small relatively stable manet dsdv forwarding table contain entry reachable node successor dsdv ad hoc distance vector routing aodv aodv allows forwarding table contain destination active use mechanism provided discovery route newly active destination dsdv forwarding table entry contains addition destination cost rent sequence number destination neighboring node exchange bility report report include sequence number router r receives report neighbor n destination d report contains sequence number larger sequence number d currently r s forwarding table r update use new information rule update rule used incoming existing sequence number equal time router r sends report neighbor includes new value sequence number increment number entered neighbor s entry r propagated network continuing report exchange sequence number algorithmsan introduction computer network release originating way node s sequence number r cost r Ô¨Ånite report generated usual way neighbor discover longer reach case node increment sequence number neighbor generating odd value entry inÔ¨Ånite cost odd sequence number b neighbor s current sequence number s link break b start reporting cost sequence number start reporting new sequence number node receiving report originating b sequence number mark having cost obtain valid route receiving report originating new larger sequence number mechanism used node receives report destination newly marked inÔ¨Ånite cost turn forward information immediately neighbor essential bad good report distinguished sequence number relative arrival time straightforward verify problem solved link break alternative path router r destination d r eventually receive d s latest sequence number greater sequence number associated report listing d unreachable hand break partitioned network longer path d r highest sequence number circulating r s half original network odd associated table entry list d cost way network quickly settle state destination s reachability accurately described fact stronger statement true transient routing loop created outline proof router r n destination d n s sequence number d greater equal r s r obtained current route d n s report consequence router participating loop destination d sequence number s d mean loop created report sequence number s circulating noted update rule application increase rule trace broken link involve odd sequence number loop formed report application Ô¨Årst rule violates claim exercise drawback dsdv node brieÔ¨Çy switch route longer optimum correct router required use route newest sequence number route longer existing route b neighbor router r b closer destination d slower report time d s sequence number incremented r receive s longer route Ô¨Årst switch using b s shorter route shortly dsdv implementation usually address having router r track time interval theÔ¨Årstarrival r new route destination d given sequence number arrival bestroute sequence number interval following arrival Ô¨Årst report new sequence number r use new route refrain including route report sends neighbor anticipating better route soon arrive work best hopcount cost metric used case best route likely arrive Ô¨Årst news travel fewest hop arrive soon Ô¨Årst route network s cost metric unrelated hop count time interval arrival involve multiple update cycle substantial distance vector algorithm introduction computer network release aodv aodv distance vector routing routing mechanism proposed manet suitable wired network unlike dsdv aodv message circulate link break node looking route node second case rationale larger manet result signiÔ¨Åcant reduction trafÔ¨Åc aodv described rfc ad hoc intended suggest protocol mobile node forming ad hoc network access point protocol work infrastructure access point network aodv kind message routerequest rreq node looking path destination routereply rrep response routeerror rerr reporting broken link aodv performs reasonably manet node highly mobile doe assume routing node trustworthy aodv way us sequence number doe Ô¨Ånd shortest route right away fact Ô¨Ånd shortest route arbitrarily long interval aodv node maintains node sequence number broadcast counter routing message contains sequence number destination routing record kept node includes Ô¨Åeld destination s sequence number copy node s sequence number held node current node discard route older smaller sequence number soon hear route newer sequence number aodv node track node directly reachable diagram assume node connected line node wish Ô¨Ånd route node f diagram Ô¨Årst step increment sequence number send routerequest message contains address f s sequence number highest sequence number previous route f known hopcount Ô¨Åeld set initially s broadcast counter end result route f entered node path return route f ab c edg frreq rreq therouterequest sent initially s direct neighbor b c diagram using udp assume moment routerequest reach way f routereply generated case destination Ô¨Çag set possible intermediate node generate routereply algorithmsan introduction computer network release node receives routerequest Ô¨Çood broadcast interface directly reachable neighbor incrementing hopcount Ô¨Åeld b sends s message c d c sends b example assume c bit slow sending message node receiving routerequest hang short interval typically second period see duplicate routerequest identiÔ¨Åed having source broadcast counter discard discard rule ensures routerequest message circulate endlessly loop compared algorithm update algorithm node receiving new routerequest record update entry reaching source routerequest unless newer route larger sequence number entry marked sequence number contained message neighbor routerequest received process ensures node s processing arouterequest message installs return route originator suppose following happen order indicated b forward routerequest d d forward routerequest e g c forward routerequest e e forward routerequest f e receives d s copy routerequest Ô¨Årst ignores c s copy mean initially return path longer necessary variant aodv hwmp allow e accept c s message ground c shorter path doe mean initial routerequest message farther network incorrect hopcount value corrected later routerequest message message received node path indicated blue arrow ab c edg f f increment sequence number creates routereply message f sends following highlighted unicast arrow f √±e√±d√±b√±a node path process message creates update route Ô¨Ånal destination f return route created earlier node processed corresponding routerequest point f communicate bidirectionally routerequest acknowledged ensure bidirectionality individual link distance vector algorithm introduction computer network release f√±e√±d√±b√±a longer necessary shorter path f √±e√±c√±a shorter path adopted future point e learns e √±c√±a better path mechanism seek route destination Ô¨Çag set intermediate node reached routerequest Ô¨Çooding answered route f node generate routereply involving sequence number intermediate node s route f greater sequence number routerequest message neighboring node longer reach sends routeerror message validate route node track route pas just purpose node s message reach source s destination point route invalidated larger network standard originator routerequest set header ttl value smallish value rfc recommends intial value limit scope therequestroute message answer received originator try slightly larger ttl value large network reduces volume routerequest message gone far use Ô¨Ånding route aodv form loop start observation xdestination yforwarding entry installed node routerequest routereply node routerequest orroutereply received destination sequence number smaller original node follow route destination destination sequence number nondecreasing immediately follows routing loop destination sequence number constant loop mean node route heard route routerequest orroutereply message forwarded second observation completing argument hopcount Ô¨Åeld strictly decrease travel route destination processing rule routerequests androutereplies mean node installs hopcount neighboring node route received impossible route return node hwmp hybrid wireless mesh protocol based aodv chosen ieee fi mesh networking standard mesh network discussion assume hwmp used network protocol applies type network set node designated routing forwarding node ordinary station included hwmp replaces hopcount metric used aodv airtime link metric decrease link throughput increase link error rate decrease encourages use wireless link hwmp mode mode similar aodv proactive mode used identiÔ¨Åed root node connects internet case protocol determines subset relevant routing link spanning tree routing node reach root root process doe attempt Ô¨Ånd best path pair node node use mode necessary algorithmsan introduction computer network release Ô¨Årst mode hwmp implement change classic aodv node receives arouterequest message later receives second routerequest message sequence number route second route replaces Ô¨Årst proactive mode designated root node typically node wired internet access periodically sends specially marked routerequest message sent broadcast address speciÔ¨Åc destination propagate usual way routing node receiving copy different neighbor pick shortest path process stabilizes routing node know best path root aroot fact routing node chooses best path routerequest message received ensures eventual route optimality routing node trafÔ¨Åc send time generate routereply immediately set reverse route root node question finally reversing link root allows root send broadcast message hwmp mode root node send rootannounce rann message let routing node know root meant result creation route root eigrp eigrp enhanced interior gateway routing protocol cisco protocol released internet draft february dsdv eliminates risk routing loop ephemeral one based distributed update algorithm dual eigrp actual protocol present general algorithm discussion follows router r keep list neighbor router n r algorithm r maintains data structure known somewhat misleadingly topology table contains destination d n n r indication n reported ability reach d reported cost c d n router keep n n r cost c nof link r finally entry destination marked passive meaning safe use active meaning update process route temporarily unavailable initially expect router r destination d r s d forwarding table neighbor n following total cost minimum c d n c n suppose r receives report neighbor n reach d cost c d n processed usual way unless represents increased cost n r s d case update rule case let c r s current cost d let say neighbor n r feasible feasible successor cisco s terminology n s cost d c d n strictly r update route d use feasible neighbor n c d n c ni minimum note fact shortest path possible neighbor m c d m mi smaller c d m n s path d c d n c new path n summarized statement create loop adopting shorter route neighbor n r feasible case example vector problem r invokes dual algorithm called diffusion algorithm invokes spread table change proceeding away distance vector algorithm introduction computer network release let c case denote new cost r d based n s report r mark destination d active suppresses forwarding d sends special query neighbor form report indicating cost d increased algorithm terminates r s neighbor reply report point r mark entry d passive neighbor able process r s report diffusion node remain passive reply r immediately neighbor like r active continue dual algorithm process r receive query elicit report long r active report cost d omit argument process network eventually converge algorithm routing alternative certainly considered algorithm class choice network sufÔ¨Åciently large isps speciÔ¨Åc protocol ietf s open shortest path ospf rfc osi s intermediate system intermediate system documented unofÔ¨Åcially rfc routing node know bare minimum network topology know link immediate neighbor approach node keep maximum network information map node link route computed locally map using algorithm existence map allows theory calculation different route different requirement map allows calculation new route soon news failure existing route arrives protocol hand wait news new route existing route fails protocol distribute network map information modiÔ¨Åed form broadcast status individual link link notice link died node notice new link available sends packet lsps Ô¨Çood network broadcast process called reliable Ô¨Çooding general broadcast mechanism compatible network topological looping redundant path broadcast packet circulate loop endlessly protocol carefully designed ensure router see lsp lsps circulate repeatedly acronym lsp used preferred acronym used ospf lsa advertisement lsps sent immediately change like triggered update protocol race bad news good news possible ephemeral routing loop exist example router received lsp inconsistent view network route soon lsp reached router involved loop vanish race condition routing lead persistent routing loop Ô¨Çooding algorithm avoids usual problem broadcast presence loop having node database lsp message originator lsp includes identity information link changed status sequence number router need database lsp packet largest sequence number older lsps discarded router receives lsp Ô¨Årst check database lsp old current received algorithmsan introduction computer network release case action taken lsp arrives sequence number seen typical broadcast fashion lsp retransmitted link arrival interface example consider following arrangement router ea b c d suppose link status change sends lsps c forward lsps d suppose b s arrives Ô¨Årst d forward lsp c lsp traveling c √±d lsp traveling d√±c cross wire d ignore second lsp copy receives c c ignore second copy receives important lsp sequence number wrap protocol doallow numeric Ô¨Åeld wrap usually idea active range used conclude numbering wrapped restarted harder context ospf us lollipop numbering sequence number begin increment point wrap long sequence number zero guaranteed unique time routing cease needed implementation use sequence number actual implementation record maximum lifetime entry ically renewed algorithm step compute route network map using spf algorithm algorithm computes shortest path given node example node example network interested shortest path b c b c starting algorithm note shortest path d cost algorithm build set rof route iteratively initially rcontains route start node new destination route added rat stage iteration stage current node representing node recently added initial current node starting node case algorithm introduction computer network release maintain set t tentative route destination initialized stage Ô¨Ånd node immediate neighbor current node route set node n calculate cost route start node n go current node Ô¨Årst route n route improves route n t add update route taccordingly doing route discovered order increasing nondecreasing cost end process choose shortest path t route destination node destination node shortest path current node tie resolved arbitrarily note routing choose minimum property fail repeat process node route set example start current xa set twill xb xc xd entry xb rand continue current path c d possibly lower cost stage neighbor b route rare c d route b arexc improvement existing tentryxc replaces improvement xd xc xd route ti c node route rand set c current xc shortest path path c existed selecting shorter path preÔ¨Åx point instead xc proof stage d rneighbor path d c entry xd ment existing xd entry ti nowxd lowest cost route rto node example link labeled cost b d start current end Ô¨Årst stage xb moved r ti xd current second stage add xc move r current stage introduces route xd improvement xd replaces t end stage route d moved example current node progressed path √±b√±c√±d generally case similar example different length current jump b d algorithmsan introduction computer network release b d previous example end Ô¨Årst stage xb moved r xd b current second stage add xc shortest path ti nowxd d current Ô¨Ånal stage replaces xc t withxc point route added rand algorithm completed proof spf path shortest suppose contradiction node shorter path exists generated spf let start node let u Ô¨Årstnode generated spf path shortest let tbe tentative set let rbe set completed route point choose u current let d cost new route let x y u ybe shorter path u cost c d y Ô¨Årst node path notto route r possible au y x node route path ppath u chosen spf strictly earlier stage algorithm added route node x route x following stage included preÔ¨Åx xa x yyofp tentative path y cost route tat point chose u ascurrent route y r mean instead chosen y current contradicting choice source node s computes entire path destination d fact computes path destination far actual path packet sent s d s direct control far Ô¨Årst hop rule considered routing hold actual path taken packet differ path computed source presence alternative path length example s calculate path packet path long path length routing allows calculation route demand result cached tion allows route calculated taken account straightforward extension algorithm starting node Ô¨Åxed algorithm classiÔ¨Åed approach goal compute shortest path pair node network warshall algorithm alternative slightly better performance network large number algorithm introduction computer network release link routing attribute desire route packet attribute destination destination qos bit example want route packet based packet source tcp port number kind routing decidedly nonstandard available important component trafÔ¨Åc engineering option known routing packet routed according attribute iÔ¨Åed local administrative policy term confused bgp routing policy border gateway protocol bgp mean quite different routing used frequently routing decision type effect isp wish route customer voice trafÔ¨Åc differently customer data trafÔ¨Åc example need apply routing classify trafÔ¨Åc point entry send voice trafÔ¨Åc router ordinary router voice path separate data path continue forwarding using method routing used mark packet special processing mean different routing downstream mean sent path trafÔ¨Åc erential treatment strategy differentiated service protocol label switching mpls linux system routing linux advanced routing facility grouped advanced queuing feature known trafÔ¨Åc control combination referred lartc simple example suppose site link internet default route internet faster serf backup added increase outbound capacity site wish route outbound trafÔ¨Åc following reason trafÔ¨Åc involve protocol deemed lower priority egemail trafÔ¨Åc trafÔ¨Åc beneÔ¨Åt reduced competition trafÔ¨Åc come sender egsome customer site relegated using paying elephant Ô¨Çows ofÔ¨Çoaded Ô¨Årst case routing based destination port number based source ip address fourth case site s classiÔ¨Åcation elephant Ô¨Çows accumulated time note inbound direction unless lead isp special routing discretion isp trick lartc compatible existing protocol problem kernel forwarding table simply added column packet attribute neighboring router knew instead forwarding table split multiple xdest orxdest algorithmsan introduction computer network release qos y table table main table table updated update protocol interacting neighbor packet forwarded administratively supplied rule consulted determine table apply rule areallowed consult packet attribute collection table rule known routing policy database simple example situation main table entry xdefault precisely ip address far end link instead table named slow single entry xdefault rule created packet routed using slow table packet forwarded linux rule cause trafÔ¨Åc host routed using table slow ip rule add table slow suppose want route trafÔ¨Åc port smtp port harder linux provides support routing based port number instead use iptables mechanism mark packet destined port create rule marked trafÔ¨Åc use slow table mark known forwarding mark fwmark value default fwmark actually packet associated packet remains kernel iptables table mangle append prerouting protocol tcp dport jump mark ip rule add fwmark table slow consult applicable man page detail iptables mechanism used set appropriate qos bit d bit header trafÔ¨Åc class bit header single standard ip forwarding table used support qos bit limited linux actually maintains numbered set table main table number tions number table name stored want table named slow number Ô¨Åle entry slow alternatively possible replace slow earlier command number filtering issue deal build working example fragment packet arrives router feature called Ô¨Åltering prevent forwarding packet router doe forwarding entry forward source address interface packet just arrived router know won t able route reply packet properly won t forward original packet commonly implemented meant prevent spooÔ¨Ång isp example ip address block Ô¨Åltering prevent miscreant isp customer sending packet spoofed source address block isp mented feature certain malicious attack syn Ô¨Çooding tcp connection establishment harder routing attribute introduction computer network release router path Ô¨Åltering disabled suppose router r let d destinaton slow path set reach r normal default route reach d point routing packet d routed using slow path Ô¨Åltering place router detect return packet d arriving source address doe forwarded return packet don t match rule unless disabled r drop return packet packet tod delivered d s reply lost linux system Ô¨Åles directory determine status Ô¨Åltering directory contains subdirectory interface plus default directory contains thing Ô¨Åle Ô¨Åle contains Ô¨Åltering value enables value enables loose Ô¨Åltering packet forwarded interface necessarily arrival interface router reach source address ecmp multipath routing ecmp technique combining route tion single unit trafÔ¨Åc destination distributed necessarily equally route ecmp supported eigrp eigrp implementation ospf algorithm ethernet level ecmp supported spirit trill spb trill spb supported bgp border gateway protocol bgp routing simpler alternative ecmp channel bonding known link aggregation based ieee standard channel bonding parallel ethernet link treated single unit case simpler cheaper bond gbps ethernet link upgrade support gbps channel bonding applies limited circumstance example channel ethernet represent single link absence channel bonding doe necessarily mean short parallel link queuing delay link mean packet delivery order preserved tcp usually interprets packet delivery evidence packet loss tcp tahoe fast retransmit lead large number spurious retransmissions reason ecmp conÔ¨Ågured send packet tcp connection just link determined hash function implementation fact consequence ecmp conÔ¨Ågured way large number parallel tcp connection order utilize participating path reasonably equally special case practical conÔ¨Ågure ecmp alternate path basis using transmission approach potential achieve better path term protocol ecmp viewed allowing value cost associated destination example use networking multiple tcp connection different path destination way similar ecmp approach algorithmsan introduction computer network release epilog point concluded basic ip routing involving routing large relatively geneous organization corporation internet service provider router involved agree run protocol agree uniform assignment link cost largest scale requirement impractical chapter devoted issue ip routing egon global internet exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution algorithm suppose network follows routing update used link cost router initially entry forwarding table immediate neighbor s table containsxb xd b s table contains xa xc d e fc b suppose router creates report initial conÔ¨Åguration sends neighbor router s forwarding table set exchange exchange word conducted simultaneously router Ô¨Årst sends report process report arriving neighbor b destination corresponding cost value added router s table exchange process repeated second time ignore value hint router step add additional destination entry new destination entry determined going table exchange suppose conÔ¨Åguration router link weight shown router initially entry forwarding table immediate neighbor d e fc epilog introduction computer network release previous exercise router s forwarding table router exchange immediate neighbor simultaneously parallel b iteration parallel exchange c learns reach f b creates entry xf count answer Ô¨Årst iteration router r following table destination cost hop b c d r receives following report cost link destination cost b c d r s updated table process s report entry change brief explanation router r following table destination cost hop b c d e r receives following report cost link destination cost b c d e f r s updated table process s report entry change brief explanation style example algorithmsan introduction computer network release start example example changed c s routing table reached d instead e c s entry xd changed xd meant c valid route d start scenario example play c s table altered sequence report lead correct routing d following exercise router attached subnets ultimate destination shown explicitly case link arethe subnets router exchange report neighboring router usual table requested router direct connection subnet report direct s table d initial table d exchange b table router exchange immediate neighbor simultaneously parallel c end b subnets notknown router suppose b c d e connected follows link cost forwarding table uniquely determined b s table xa xc xd xe routing update used b dcb suppose link fails d update entry e xe s table d report b b s table report b c s table b report note b entry xe d d s table report exercise introduction computer network release network receives alternating report destination d neighbor b suppose us modiÔ¨Åed form rule update rule update forwarding table new cost c equal cold db explain s forwarding entry destination d stabilizes consider network split horizon using routing update b c s table entry destination d shown link cost d suppose link break update report occur b c b report c instead b reporting b c s record destination d including cost report b additional report pair sufÔ¨Åce lead formation routing loop c single additional report eliminate possibility routing loop suppose network problem changed following update used link break d explain b s report report xd valid b explain hold hold delay use new route algorithmsan introduction computer network release suppose router b c d e f link cost forwarding table f network fewest link consistent table hint destination reached cost directly connected x reach y z cost z y directly connected s table dest cost b b c c d c e c f b f s table dest cost e b d c d d d e e suppose router b end respective entry xd b nyand xd creating routing loop explain loop removed quickly b usepoison reverse split horizon split horizon versus b use split horizon b suppose network look like following link extremely slow ca bd slow suppose b send report advertising route d immediately link break c report b d unreachable unreachability report c processed b s report sent break Ô¨Ånally arrive explain network state described suppose algorithm run network link break paragraph update rule rule applied prove b s destination d s cost d strictly b s hint assume claim true remains true application rule update rule rule applied b receiving report exercise introduction computer network release resulting change b s cost d need s cost b s b s new cost neighbor c us b b use prove routing loop form mentioned algorithm routing rise ephemeral routing loop concrete scenario illustrating creation dissolution loop hint consider following network ab c c s b relative link weight shown link b get news possible scenario use algorithm Ô¨Ånd shortest path e network set randt node current step c ed suppose laptop plug ethernet lan andconnect lan laptop lan route route preferred tell way trafÔ¨Åc Ô¨Çowing conÔ¨Ågure o prefer path arp multihomed host ip version exercise tcp transport basic exercise ip routing previous chapter considered class algorithm state approach requires participating router agreed Ô¨Årst common protocol common understanding link cost assigned address following chapter bgp border gateway protocol bgp basic problem site prefers approach assigning link cost site prefers assign link cost proportion bandwidth meaningful path cost comparison site simply bgp need revisit basic ip forwarding idea beginning envisioned ip address divisible network host portion job router examine network preÔ¨Åx make forwarding decision based division address originally based class mechanism division address bit classless ip delivery algorithm saw route network preÔ¨Åxes arbitrary length idea work chapter going expand allowing different router different position routing universe make forwarding decision based different length destination address backbone router forward given address d based Ô¨Årst bit d regional router base decision Ô¨Årst bit site router forward Ô¨Ånal subnet based Ô¨Årst bit allows creation routing hierarchy multiple level potential greatly increase routing scalability reduce size forwarding table actual mechanic forwarding router classless ip delivery algorithm term routing domain used refer set router common administration using common assignment term autonomous previous chapter routing took place routing domain envision internet consisting patchwork independent routing domain use common protocol routing domain absolute requirement example subnets internally use site s backbone router use assume router uniform view site s topology cost metric ip routing fundamentally coordination routing multiple independent routing domain earliest internet multiple routing domain reason measure link cost unsettled set stone component routing support hierarchical routing level subnets turn classless internet domain routing cidr cidr mechanism supporting hierarchical routing internet backbone subnetting move division line rightwards cidr allows moving left subnetting revised division line visible organization owns ip block subnetting visible outside cidr allows aggregation ip address block way isvisible internet backbone introduction computer network release cidr introduced following justiÔ¨Åcations relating increasing size backbone ip forwarding table expressed term class mechanism internet running class b address happened s class c s numerous backbone forwarding table efÔ¨Åcient eventually iana internet assigned number authority run ip address pened assigning multiple class c s lieu single class b helped Ô¨Årst point list second point worse ironically current tight market address block likely lead larger larger backbone forwarding table site forced use multiple small address block instead large block year cidr essentially eliminated class mechanism backbone internet completely changed backbone routing worked purchased address block provider ip address allocator size needed cidr enabled ip routing based address preÔ¨Åx length class mechanism course used Ô¨Åxed preÔ¨Åx length bit furthermore cidr allows different router different level backbone route preÔ¨Åxes different length organization p allocated block example p suballocate block level routing p likely based Ô¨Årst bit routing p based Ô¨Årst bit address class arguably cidr supported natively beginning routing address abcd based preÔ¨Åx preÔ¨Åx preÔ¨Åx ab length cidr formally introduced rfc andrfc strategy place support compatibility router obsolete particular longer appropriate router fall class mechanism absence cidr information missing routing fail way look basic strategy cidr mechanism consolidate multiple network block going destination single entry suppose router class c s destination router replace single entry doe matter foo represents single ultimate destination represents site just happen routed ip routingan introduction computer network release worth looking closely arithmetic single entry us mean Ô¨Årst bit match Ô¨Årst second byte Ô¨Årst bit byte let look byte network address binary √Ω√±foo √Ω√±foo √Ω√±foo √Ω√±foo mean network address stop end byte entry cover possible combination bit byte address match entry sufÔ¨Åces begin Ô¨Årst bit byte way saying address match implementation actually use bitmask number note binary leading followed ip delivery algorithm classless ip delivery algorithm work cidr understanding router s forwarding table length associated entry given destination d search forwarding table destination Ô¨Ånd match equality Ô¨Årst k bit term mask given destination d list table entriesxpreÔ¨Åx m y search d m b possibility multiple match subnets avoiding responsibility subnetting site responsibility avoiding cidr distributed declared illegal ietf mandate instead cidr introduced rule destination d match b b k k longer match b used note d match distinct entry b b k k hierarchical routing strictly speaking cidr simply mechanism routing ip address block preÔ¨Åx length setting division point arbitrary place ip address making division point variable cidr introduced support routing different preÔ¨Åx length different place backbone routing infrastructure example router route preÔ¨Åxes intermediate router route based preÔ¨Åxes length feature routing fewer bit point internet bit point exactly meant hierarchical routing earlier saw hierarchical routing context subnets trafÔ¨Åc Ô¨Årst routed site site subnets cidr hierarchy Ô¨Çexible level hierarchy larger customer level lower level need administratively controlled higher level case subnets level used cidr mechanism doe directly speak kind policy wish implement possible application involve hierarchical routing hierarchical routing introduction computer network release application legacy cidr allows allocation multiple block class c fragment class single customer require single entry customer application legacy cidr allows opportunistic aggregation route router see route table consolidate single entry application current cidr allows huge provider block suballocation provider known routing application hypothetical cidr allows huge regional block suballocation gion somewhat like original scheme phone number area code known geographical routing potential achieve considerable reduction size backbone forwarding table arguably important goal involves using cidr support creation address block routing single unit example internet backbone happier router simply maintain single entry y versus yfor value x useful x s different secondary cidr goal include bringing order ip address allocation item list enabling routing hierarchy mirror actual Ô¨Çow trafÔ¨Åc hierarchical routing doe introduce new wrinkle route chosen longer globally optimal apply algorithm hierarchically suppose example level forwarding based Ô¨Årst bit address trafÔ¨Åc routed router second level route trafÔ¨Åc hierarchically packet sent independent router pas cost path bypassed forwarding entry y word represent simpliÔ¨Åcation real situation prohibiting route like impractical helpful customer independent entity routing issue happen router agree mechanism algorithm case learn path potential hierarchical beneÔ¨Åts decreasing size forwarding table lost seriously complete global agreement router common update protocol simply practical fact goal hierarchical routing provide workable alternative return hierarchical routing provider legacy routing day nsfnet internet backbone single routing domain customer did connect directly backbone intervening provider tended relatively compact ically regional single primary point backbone ip address allocated subscriber directly iana backbone forwarding table contained entry site class c s nsfnet backbone regional provider did necessarily share information route early point necessarily globally optimal compromise approximation nsfnet model router generally did Ô¨Ånd reasonable approximation shortest path site referenced backbone table legacy backbone routing domain ip routingan introduction computer network release difference route backbone portion longest component identical routing routing large cidr block allocated provider different provider know route subscriber legacy block assigned directly obtain ip address provider block group trafÔ¨Åc outside routed Ô¨Årst provider provider s address block provider s routing domain subscriber hierarchy provider packet routed Ô¨Årst provider eventually local provider longer central backbone instead multiple provider build parallel transcontinental network simpler example provider unique path suppose provider customer follows customer b c customer d e customer f g assume provider ip address block follows let allocate address customer b c d e f g routing model packet Ô¨Årst routed appropriate provider customer model general guarantee shortest path doe case provider single point interconnection network diagram routing introduction computer network release abc fg diagram s forwarding table look like destination b c s table consists entry s customer entry provider customer divided equally provider provider s table entry customer provider cidr provider s forwarding table entry cidr enables hierarchical routing allowing routing decision different preÔ¨Åx length different context example packet sent d look Ô¨Årst bit look Ô¨Årst bit customer routing based Ô¨Årst bit additional secondary link additional link create tive path provider routing remains relatively straightforward shown private link likely used customer connect customer e multihomed connection alternative provider term multihomed applied host multiple network interface different lan includes router mean speciÔ¨Åcally multiple network interface connecting different provider typically e use link want outbound trafÔ¨Åc respective inbound trafÔ¨Åc primary provider respectively ip routingan introduction computer network release abc fg internet exchange point long link joining provider diagram somewhat misleading provider like sharing long link attendant problem sharing responsibility failure instead provider connect internet exchange point ixps link actually ixp owns link ixps site open provider private exchange point term metropolitan area exchange mae appears name ixps originally near washington dc originally san jose california actually setof ixps mae context trademark cidr staying jail suppose want change provider way accept new block new provider change ip address paper renumbering threat menace frequently cited early day cidr intimation renumbering inevitably bad thing principle like allow option keeping ip address allocation changing provider standard did allow changing provider violation sherman antitrust act american society mechanical engineer v hydrolevel corporation ietf added incentive wanting stay jail writing cidr standard allow portability provider actually antitrust violation usually involve civil penalty cidr rule turn exactly ietf need suppose diagram customer c want doe want renumber routing change need solution add route ythat route c s trafÔ¨Åc forward trafÔ¨Åc s table follows use rule distinguish trafÔ¨Åc new customer c trafÔ¨Åc bound routing introduction computer network release destination d e c doe work c s inbound trafÔ¨Åc originating routed c s best term routing inefÔ¨Åcient c s trafÔ¨Åc routed instead direct better solution allproviders add route trafÔ¨Åc go particular instead routed provider important case provider router route trafÔ¨Åc block go having provider world need add entry c potential cost money way c pay choice c consent renumbering difÔ¨Åcult diligent using dhcp nat pay old address block second diagram various private link shown dashed line likely rule notneeded link work s private link mean send outbound trafÔ¨Åc forward s trafÔ¨Åc private link word free route advertise route hierarchical routing provider routing route taken longer optimal replaced problem Ô¨Ånding optimal route b problem Ô¨Ånding optimal route b s provider p p s entry point strategy mirror hierarchical routing process Ô¨Årst routing address bit identify provider routing address bit including subscriber portion strategy yield result Ô¨Ånding globally optimal route result b s customer reached p s single router rp model situation p customer look like single site following disrupt model multiple router provider p s network rp rp different cost p s customer b alternative connection outside world different provider second diagram routing ip routingan introduction computer network release consider following example representing Ô¨Årst situation important practice provider interconnection point internet exchange ternet exchange point link labeled cost assume s cost happen comparable s cost s ba provider globally shortest path b crossover total length trafÔ¨Åc b routed closest crossover link total path trafÔ¨Åc b routed crossover length routing strategy called routing provider try rid trafÔ¨Åc potato quickly possible routing closest exit point path taken inefÔ¨Åcient a√Ω√±b b√Ω√±a path asymmetric problem forward reverse timing critical signiÔ¨Åcantly bandwidth congestion practice route asymmetry seldom important route inefÔ¨Åciency necessarily signiÔ¨Åcant problem primary reason algorithm focus shortest path guarantee computed path long half path half intersect common midpoint path bgp med value offer optional mechanism agree a√Ω√±b trafÔ¨Åc crossover desired s network better customer willing pay extra trafÔ¨Åc s network long possible ip geolocation principle addressing mean consecutive ip address scattered continent practice provider mobile provider given small address block used limited geographical area different block used different area consequence possible principle determine given ip address corresponding approximate geographical location known ip geolocation user geolocated couple mile company created detailed geolocation map identifying location roughly zip code typically available online service routing introduction computer network release ip geolocation originally developed advertiser serve regionally appropriate ments used variety purpose including identiÔ¨Åcation closest cdn edge server network network security compliance national regulation user tracking restricting streaming copyrighted content geographical routing classical alternative routing geographical routing archetypal model telephone area code loyola university s main switchboard traditionally routed Ô¨Årst area code chicago routed exchange subscriber similar strategy canbe used ip routing geographical addressing advantage figuring good route destination usually forward close optimal term path physical distance changing provider involves renumbering moving approximate ip address geolocation determining host s location ip address automatic geographical routing minor technical problem routing inefÔ¨Åcient diate neighbor b happen split boundary larger geographical area path center s region center b s region problem larger site eglarge corporation geographically distributed efÔ¨Åciency goal ofÔ¨Åce site need separate ip address block appropriate physical location real issue geographical routing apparently business question carry trafÔ¨Åc model natural answer link owned speciÔ¨Åc provider geographical ip routing local provider know preÔ¨Åx packet delivered chicago san francisco carry provider enter different trafÔ¨Åc contract multiple different region different local provider make different ments packet delivery routing efÔ¨Åciency term table size geographical routing likely lost finally natural answer long link useful recall present created telephone t monopoly question carried trafÔ¨Åc did exist said Ô¨Åve regional internet registry represent geographical region usually continent addressing level iana handed address block ical rirs rirs allocated address block provider intercontinental level geography doe matter physical link path genuinely expensive shorter path easier string terrestrial cable undersea cable continent physical distance doe matter supposed furthermore large geographically provider divide address block region allowing internal geographical routing correct region diagram ip address allocation http ip routingan introduction computer network release epilog cidr deceptively simple idea Ô¨Årst glance straightforward extension subnet concept moving division point left right ushered true hierarchical routing cidr originally offered solution early crisis allocation adopted core routing exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution ip routing following forwarding table us cidr destination b c d following ip address indicate destination forwarded binary ii iii iv consider following forwarding table us cidr ip address byte hexadecimal hex digit corresponds address bit make preÔ¨Åxes align boundary reminder hexadecimal numbering used separator destination b c d e real hex address hexadecimal format used address allowed real world turn isa valid hex format reasonably common support epilog introduction computer network release standardized bsd unix did recognized http chrome firefox browser example archaic address format blog post following ip address entry table match multiple match use rule identify packet forwarded ii iii iv v vi consider following forwarding table using cidr exercise ip address byte hexadecimal used separator reminder destination b c d following routed ad ef b explain ip address routed default entry hint convert Ô¨Årst byte binary forwarding table using cidr route class address Ô¨Årst bit class b address Ô¨Årst bit b class c address Ô¨Årst bit suppose router using cidr following entry address byte decimal byte binary destination b entry consolidate single entry Ô¨Ånal b consolidated twoentries need assume rule ip routingan introduction computer network release suppose p q r isps respective cidr address block byte decimal p customer b assigns address block follows b q customer c d assigns address block follows c d forwarding table p q r assuming connect customer b suppose switch provider p provider q take address block change forwarding table p q assume p willing forward trafÔ¨Åc r destined rule needed resolve conÔ¨Çicts let p q r isps exercise time suppose customer c switch provider q provider r new entry √±c change forwarding table p assume provider q forward trafÔ¨Åc p destined suppose p q r isps exercise time p r connect directly route trafÔ¨Åc addition customer b multihomed secondary connection provider r customer d multihomed secondary connection provider r p use secondary connection send b d respectively secondary connection used r p respectively forwarding table p q suppose internet routing used geographical routing Ô¨Årst bit ip address represent geographical area similar size telephone area code megacorp get preÔ¨Åx based geographically chicago allocates subnets preÔ¨Åx ofÔ¨Åces state megacorp route internal trafÔ¨Åc network assuming megacorp trafÔ¨Åc enter exit chicago route trafÔ¨Åc san diego ofÔ¨Åce client san diego b suppose ofÔ¨Åce link local isp outbound trafÔ¨Åc us ip address route trafÔ¨Åc san diego ofÔ¨Åce neighbor c suppose megacorp give get separate geographical preÔ¨Åx ofÔ¨Åce san diego boston trafÔ¨Åc megacorp geographically reasonable path megacorp want sure interofÔ¨Åce trafÔ¨Åc stay internal network megacorp conÔ¨Ågure internal ip forwarding table ensure exercise introduction computer network release ip border gateway protocol bgp border gateway protocol bgp themechanism neighboring directly connected isps share routing information algorithm considered interior protocol router involved common management management dictate protocol used rule assigning cost link state method cost played essential role trying minimize cost assured routing loop present stable network observation minimizing route cost consider problem exterior routing choosing route offered independent neighboring organization protocol universal pair neighboring organization able communicate link cost difÔ¨Åcult use multiple incompatible way measuring link cost exterior routing role bgp Ô¨Årst bgp example diagram suppose b c d managed independently useful think b c isps d destination ab cd organization isp route destination d b c choose wanted use interior protocol choose path d face purely technical problem b us c speaks lsp message second b measure path cost using hopcount metric c assigns cost based bandwidth congestion pecuniary consideration mixing unrelated metric isn t necessarily useless required free result mentioned end link agree cost assigned link comparison different metric completely undermine intended use metric inÔ¨Çuence selection link carry trafÔ¨Åc sharing information common administrative policy set cost doe practical term make sense face larger issue reach d rely having trafÔ¨Åc carried outsider b outsider likely inclined offer service form compensation monetary reciprocal exchange reach understanding b matter trafÔ¨Åc carriage doe want trafÔ¨Åc routed c route lower technical cost paying b going expect use paying c c going expect use introduction computer network release theborder gateway protocol bgp assigned job handling exterior routing handling exchange routing information neighboring independent organization current version documented rfc bgp s primary goal provide support called routing policy ing route based managerial oradministrative input address bgp filtering routing policy routing policy routing described routing attribute different packet destination address routed differently site policy packet attribute destination account bgp site s policy choose route given destination applied trafÔ¨Åc nation take single route ultimately administrative input used bgp likely relates paying trafÔ¨Åc carried possible common use bgp implement preference domestic trafÔ¨Åc remain national boundary bgp term routing domain coordinated administration using consistent interior tocol metric autonomous said strictly required bgp router consistent view routing fact autonomous system run multiple routing protocol use different metric different point cated bgp doe notsupport exchange information autonomous system autonomous system identiÔ¨Åed globally unique number originally bit extended bit site need run bgp need number connects connect site connect single isp need bgp site running bgp bgp speaker device run bgp remain coordinated present consistent view site s connection advertisement coordination process called internal bgp distinguish communication neighboring autonomous system process known external bgp bgp speaker site busy border router connect directly neighboring usually located near subnet interconnection point neighboring generally need bgp speaker connection bgp speaker neighboring autonomous system called bgp peer generally conÔ¨Ågured administratively subject neighbor discovery process like used interior router bgp speaker maintain database route received just route actually used speaker forward neighbor route actually use Ô¨Årm bgp rule bgp implementation support routing ecmp link neighbor treated internet draft address basic level bgp involves exchange list reachable destination like routing distance information strategy detect routing loop bgp solves loop problem having router exchange just destination information entire path used border gateway protocol bgp introduction computer network release reach destination path including router cumbersome instead bgp abbreviates path list as traversed called allows router make sure route traverse loop example consider network consider autonomous system destination initially assume discovers immediate neighbor advertise route reason level prefer route bgp doe use shortest rule falling rule likely commercial preference us reach advertise route reach advertisement contain similarly advertise route advertise turn advertises potential create loop doe include entire yin advertisement sends know use route member bgp spared kind problem traditional approach subject theoretically possible shortest path sense say hopcount metric host traverse twice bgp allow route potentially add considerably size database number path site track proportional number as destination actually record time hear elect use thousand as world let number as typically average length log depends connectivity average length memory required bgp c k constant major goal bgp allow administrative input interior routing largely technical calculation administrator set link cost bgp interface isps isps larger customer used implement contractual agreement regarding isps carry isps trafÔ¨Åc tell route destination d chooses send trafÔ¨Åc bgp used implement likely route d doe want use pay privilege bgp used implement despite exchange information temporary routing loop exist bgp Ô¨Årst decide use route export new realize problem soon received loop brieÔ¨Çy existence Ô¨Årst example example bgp instability introduction computer network release bgp s predecessor egp guaranteed route allowing single route forcing internet tree topology level autonomous system graph contain cycle alternative route redundancy provided alternative path egp avoided having make decision preferred path choice egp described reachability protocol concern given network reachable route aggregation conÔ¨Çict goal reporting precise destination dating address preÔ¨Åxes possible single preÔ¨Åx single cidr block consider following network suppose path destination destination destination want optimize aggregation using cidr prefer aggregate tinations single block case option report route report path ignores as legitimately destination block loop detection conceivably fail report path y real path doe include as involved ensures algorithm work artiÔ¨Åcially inÔ¨Çates length used certain decision option ideal concept introduced list autonomous system traversed order example report net achieves desired aggregation accurately report length general arbitrary list part case simple aggregation example followed border gateway protocol bgp introduction computer network release rfc recommends using entirely recommends aggregation avoided consequence recommendation preÔ¨Åx announced public autonomous result corresponding entry forwarding table backbone router transit trafÔ¨Åc helpful distinguish kind trafÔ¨Åc seen given local trafÔ¨Åc trafÔ¨Åc originates terminates trafÔ¨Åc belongs leaf site site connect isp site trafÔ¨Åc local kind trafÔ¨Åc transit trafÔ¨Åc forwarding behalf nonlocal party isps trafÔ¨Åc transit trafÔ¨Åc large site carry small transit trafÔ¨Åc particular related autonomous organization decision carry transit trafÔ¨Åc classic example administrative choice plemented bgp s support routing policy bgp conÔ¨Åguration issue relate carriage transit trafÔ¨Åc bgp filtering routing policy stated goal bgp support routing policy routing based managerial administrative concern addition technical one bgp speaker aware multiple route destination choose route use combine mixture optimization rule policy rule example policy rule use adversarial relationship allow transit trafÔ¨Åc bgp implement policy Ô¨Åltering rule rule allow rejection certain route different stage Ô¨Åltering applied list route bgp speaker receives neighbor selection applied bgp speaker chooses route accepted Ô¨Årst step actually use Ô¨Åltering decide route previous step bgp speaker actually advertise bgp speaker advertise path us doe advertise path standard default rule accept imported use simple export site usually implement policy rule Ô¨Åltering process prefer route isp contract example import Ô¨Åltering site elect ignore route particular neighbor ignore route contains particular ignore temporarily route neighbor demonstrated recent route instability rapidly changing route import Ô¨Åltering canalso stage having process ignore route selected neighbor transit trafÔ¨Åc introduction computer network release bgp breakdown real world happens small regional isp misconÔ¨Ågured attempt report provider reach say site world export Ô¨Åltering small isp selection import Ô¨Åltering large isp catch occasionally incident represent malicious bgp hijacking bgp security route registry approach addressing problem bgp security stage selection pick preferred route just imported Ô¨Årst step eliminate loop neighbor diligent advertising path loop need reject route contain associated step stage generally important bgp conÔ¨Åguration assign weight route received policy add certain route use certain commonly larger site preference based contractual arrangement particular neighbor provider as example general prefer route learned customer cheaper smaller isp connects larger one paying route majority outbound trafÔ¨Åc particular value implement choice bgp calculates value route route best selected domain free choose rule wish principle involve strange criterion example example bgp instability consider example prefers route strictly shorter path example demonstrates instability domain encouraged set rule accordance standard principle avoid value communicated internally path attribute shared autonomous system event tie route destination Ô¨Årst rule prefer route shorter superÔ¨Åcially resembles algorithm real work administratively assigning value best thought similar spirit come Ô¨Ånal signiÔ¨Åcant step phase apply value site choose ignore value entirely finally trivial rule rule assigns signiÔ¨Åcant trafÔ¨Åc economic consequence shouldn t considered trivial situation detected probably addressed phase trivial account internal routing cost numeric value number numeric value neighbor s ip address stage complete bgp speaker selected route tonomous use route communicated actual router different device border gateway protocol bgp introduction computer network release Ô¨Ånal stage decide rule exported neighbor route bgp speaker decided use route point exported site route destination d export route claiming d reached stage enforce rule doe wish carry transit trafÔ¨Åc destination d advertise d export stage lead anomaly suppose example reach d announces later imagine switch reaching d forbidden policy announce route containing policy straightforward implement export Ô¨Åltering simply withdraw announcement reach d route d bgp table size principle correspondence ip address preÔ¨Åxes announced public tonomous system entry backbone ip forwarding table technique route aggregation route aggregation used create modest discrepancy set route received bgp speaker import Ô¨Åltering called routing mation base rib resultant forwarding table created selection forwarding information base fib fib contain route learned protocol fib entry contain actual router versus information actually received bgp simplicity refer forwarding table generated bgp record bgp fib size bgp fib number distinct preÔ¨Åxes backbone forwarding table plotted chart based data courtesy modest smoothing applied bgp table size introduction computer network release time range july end thousand ip preÔ¨Åxes shown graph thousand autonomous system graph Ô¨Çat reÔ¨Çecting aftereffect bubble overall increase time roughly quadratic decade closer linear graph doe entirely represent growth internet represents fragmentation recent year smaller address block available site provider cobbled internet presence multiple block preferred single block bgp path attribute bgp support inclusion various path attribute exchanging routing information attribute exchanged neighbor transitive difference neighbor doe recognize received path attribute pas marked transitive path attribute entirely local internal origin Ô¨Çags used border gateway protocol bgp introduction computer network release indicate recognition path attribute required optional recognition partial complete fundamental path attribute common attribute mandatory external attribute allows bgp speaker inform bgp peer actual router use reach given destination s actual border router subnet include s ip address attribute noton subnet know s ip address case include ip address attribute router s look immediate hop use Ô¨Årst step reach forward trafÔ¨Åc lead route trafÔ¨Åc properly notnecessarily border bgp speaker conÔ¨Ågured value used selection phase us path attribute share preference bgp speaker site word bgp speaker determined value given route attribute used distribute value uniformly discriminator med attribute allows learn internal structure elect using med information provided neighbor potential cause incur higher cost end carrying trafÔ¨Åc longer distance internally med value received neighboring recognized explicit administrative decision speciÔ¨Åcally autonomous multiple link neighbor tising internal destination d bgp speaker provide associated med value know link prefer use reach allows route trafÔ¨Åc bgp path attribute introduction computer network release d carried primarily alternative use closest gateway mean trafÔ¨Åc likely carried primarily med value considered late process sense use med value route example consider following network hierarchical routing provider provider replaced autonomous system numeric value link relative cost assume site bgp speaker exchange point s ba absence med send trafÔ¨Åc b link return trafÔ¨Åc link closest r s respectively representing s desire hand outbound trafÔ¨Åc quickly possible s bgp speaker provide med value advertising destination indicating preference trafÔ¨Åc use rightmost link destination med destination med destination med abides information route trafÔ¨Åc b exchange point lowest med value note importance fact allowed ignore med use shift cost relative order med value irrelevant unless exchange disabled case numeric med value mean prefer reaching use med value cause trafÔ¨Åc path path minimal cost global sense way achieve global cost minimization as agree use common distance metric common routing algorithm effect doe provide different numeric med value exchange point used ranking precedence numeric measure cost derived example importing using med value raise s cost causing route trafÔ¨Åc stay longer path s network fact border gateway protocol bgp introduction computer network release case using med value agree simple reason negotiated arrangement give break interconnection peering fee exchange s accepting using s med data possible s use s med data improve quality service offer customer return example med value trafÔ¨Åc engineering example med value used decide multiple route nation pas bgp implementation allow use med value decide different route different neighbor as different neighbor value example connect receive following bgp information destination med destination med assuming assigns conÔ¨Ågured use med value routing trafÔ¨Åc cisco router command used create behavior med value intended used communicate routing preference as additional information use med value rfc community simply tag attach route route multiple tag corresponding ship multiple community community deÔ¨Åned globally example route marked community shared community relevant particular importance community allow place route speciÔ¨Åc category advertising category created recognized receiving receiving obligated honor community membership course doing effect allowing original conÔ¨Ågure involving receiving cess community used example large customer isp request speciÔ¨Åc routing treatment customer Ô¨Ånd provider community provider deÔ¨Ånes numeric code point customer place provider s community community value supported isp shall community value included s value action set used set used default set used set used route leave s domain equivalent route exported s customer bgp path attribute introduction computer network release bgp trafÔ¨Åc engineering bgp themechanism trafÔ¨Åc engineering tool import export Ô¨Åltering selection autonomous system multiple interconnection point discriminator play large role establishing basic connectivity important decision site make bgp uration accept transit trafÔ¨Åc Ô¨Årst example let consider case conÔ¨Åguring private link dashed friendly unafÔ¨Åliated site b shared real link short jumper link internet exchange point ba suppose export route b provider turn announce route internet large b s inbound trafÔ¨Åc routed paid similarly b end paying carry s trafÔ¨Åc b export route economically carrying s transit trafÔ¨Åc desirable unless compensated primary issue use link b link use shared secondary issue depending relative bandwidth b s understanding appropriate us common option b agree regarding andbackup option b simply export route respective isps export Ô¨Åltering doe know reach b send b s trafÔ¨Åc backup option intent trafÔ¨Åc normally arrive link s trafÔ¨Åc allowed travel achieve b export route arrange respectively assign route low value long hears route b itsupstream provider reach b way advertise existence route b ditto route b fails s upstream provider stop advertising route b begin use route b begin advertising internet route primary route b s service restored b convince respective isps assign route low mandate directly isps recognize community attribute allow customer inÔ¨Çuence value b use create desired use shared link backup outbound trafÔ¨Åc b need way send isp link detects isp link simply change default route point way automate b view path egto concrete destination bgp advertises using bgp doe b conÔ¨Ågured border gateway protocol bgp introduction computer network release import rule b s route higher cost route use default route long available switch b b wish use shared private link load balancing bgp offer limited help export route lost control site prefer able make path artiÔ¨Åcially appear expensive duplicating isps able tweaking cost inbound load comparable guarantee likelihood stable outbound b s respective internal router provider business carrying transit trafÔ¨Åc make decision exactly trafÔ¨Åc carry decision implemented bgp diagram autonomous system b c connect individual site regional isps b transit ca d diagram left right interconnection shown taking place internet exchange point internet exchange point ixps typically interconnection place required essential topology simply dtransit b transit c b like make sure c doe attempt save transit cost forwarding √Ω√±d trafÔ¨Åc b d √Ω√±a trafÔ¨Åc b b avoids problem advertising c reach d similarly transit provider quite careful advertising reachability intend provide transit service likely mean getting stuck trafÔ¨Åc b advertises reach d accept route send trafÔ¨Åc b c involved b likely unless pay privilege b c advertise reach d choice make rule case want sure doe end paying price b c carry trafÔ¨Åc using site example agree payment based actual volume carried trafÔ¨Åc meaning prefers b s route pay quite possible b advertises reach d doe advertise d reach seen b advertises reach d paid privilege d prefers business c case trafÔ¨Åc travel b trafÔ¨Åc travel unlikely event b c advertise route d routing loop bgp trafÔ¨Åc engineering introduction computer network release created b forward trafÔ¨Åc c c forward case b state bgp advertisement c reach d begin c c similarly b c receive stop using route med value trafÔ¨Åc engineering let address bother importing using med value given doing increase site s cost consider following diagram autonomous system link cost shown r s adc site dc diagram datacenter want user site experience downloads dc delivers streaming video need minimize congestion packet loss order achieve superior quality build particularly robust network shown Ô¨Årst step connect peer directly customer network relying internet backbone interconnection point shown point trafÔ¨Åc dc shortest path travel way good trafÔ¨Åc dc probably acknowledgment unlikely beneÔ¨Åt special network actual data sent dc s shortest path reach data travel way bypassing s network dc want picture change agrees accept med information provider tell s preferred link reaching trafÔ¨Åc dc travel keep dc s outbound trafÔ¨Åc network long possible instead handing network lower quality iswhat dc want dc built network building network dc simply contract existing performance network make s business model following peering potential customer network possible border gateway protocol bgp introduction computer network release importing using med information network advertising potential customer like dc network dc s user better experience bgp anycast dns cdns discussed cdns use dns trick arrange user trafÔ¨Åc delivered closest edge server cdn option anycast using ip address edge server arranging router deliver closest server router conÔ¨Ågured awareness anycast delivery passively using bgp implement anycast approach cdn us ip address block datacenter location customer server cdn datacenter server assigned ip address cdn make sure content available server identical location cdn announces address block local bgp neighbor reachability information address block propagates bgp internet connected single cdn datacenter route cdn s address block datacenter hears cdn neighbor apply usual process determine route cdn s block ultimately internet deploy exactly route cdn route lead cdn s datacenters different as deploy route different datacenters advantage anycast approach dns approach user use geographically distant dns resolver pay penalty bgp process likely produce better route general process based solely geographical distance example as choose best path based available bandwidth distance ip routing geography destiny Ô¨Årst odd multiple server public ip address given Ô¨Åguration organization usually represents dire error cdn s datacenters use address talk cdn arrange use ip address trafÔ¨Åc bgp interior routing bgp designed connecting autonomous system separate management used interior routing protocol replacing rithm algorithm approach use bgp typically conÔ¨Åned datacenters rfc typical beneÔ¨Åts bgp versus traditional interior routing protocol lie conÔ¨Ågurability administrative control selection route advertisement ability attach community attribute route example taken return example interconnection fabric row consists switch upper row consists intermediate switch layer interested routing trafÔ¨Åc row example corresponds facebook call server pod discussion applies similar spine plane form layer bgp anycast introduction computer network release goal ensure link fails data routed path end begin making later set treated single using confederation rfc export individual number outside confederation number reused start announcing address preÔ¨Åx used server rack mark announcement bgp community aggregate rack preÔ¨Åxes received advertise upwards advertise individual rack preÔ¨Åxes downwards tagged different bgp community receive advertisement advertise upwards point route tagged longer path don t tag link fails look alternative route tagged easily located bonded using ecmp ecmp allows quick transition backup link achieved adapting conventional interior routing protocol bgp worked directly box bgp relationship arbitrarily complex policy created bgp shall following section convergence stable set route guaranteed nonconvergence doe mean s slow convergence inÔ¨Ånity regular oscillation route competing alternative turn constraint applied different relationship better behavior obtained paper analyzed bgp network relationship Ô¨Åt following business pattern discussed customer provider common pattern peer peer egtwo provider mutually exchanging trafÔ¨Åc sibling sibling close relationship major consequence relationship extent autonomous system involved accept border gateway protocol bgp introduction computer network release s route extent provide transit service start basic case customer provider autonomous system c p relationship c customer p provider c paying p carry trafÔ¨Åc outside world p carry trafÔ¨Åc c customer provider c c offering provider p export route source c effect telling c reach c provider accept route form single entry pointing p c provider accept route p similarly c export route c customer export route collectively say c s route route customer customer route route egroutes learned provider c generally doe export c export p route destination d learned second provider c end providing transport service p carrying p s trafÔ¨Åc customer probably c intends summarize provider doe export route customer customer generally doe export route provider rule world real business relationship absolute as negotiate sort special arrangement nominal customer example agree provide transit service set destination exchange rate handling trafÔ¨Åc nonetheless rule largely accurate provides helpful starting point understanding relationship bgp theorem effect use rule deÔ¨Ånition relationship let consider relationship connection transit provider agreed exchange customer trafÔ¨Åc carrying transit trafÔ¨Åc idea interconnection seen equally valuable party party exchange comparable volume trafÔ¨Åc case relationship likely involving monetary exchange volume Ô¨Çow signiÔ¨Åcantly asymmetric compensation certainly negotiated making relationship like provider customer provider peer export customer route way know reach s customer doing carry transit trafÔ¨Åc customer peer generally export route direction learns route bgp relationship introduction computer network release destination d peer provider doe export carry transit trafÔ¨Åc instead expected peer learn s route d way alternatively customer pay s transit carriage s trafÔ¨Åc peer known provider represent backbone provider rule peer as free negotiate exception term supposed suggest strongly connection agreement provider agreement typically private hard say connectivity finally autonomous relationship Ô¨Åt tern characterized sibling isps close relationship sibling as merger organization sibling inal competitor intend use mutual link cooperative backup bgp trafÔ¨Åc engineering sibling upstream isp provider sibling typically export customer route potentially use connection transit trafÔ¨Åc direction rank route low preference use shared link available summarize kind relationship term export route relationship route exported direction relationship route exported provider customer relationship route exported direction possible make inference bgp relationship site actual export information accuracy imperfect site negotiate arrangement real world bgp sibling relationship relatively rare probably really Ô¨Åt model trafÔ¨Åc carriage service fortunate sibling relationship universal bidirectional route export tend introduce greatest complexity example example bgp instability require sibling relationship problematic sibling case following provider respectively sibling suppose export route destination export sibling treat customer route export case providing transit service trafÔ¨Åc bound sibling relationship tamed considerably adopt requirement collection linked sibling act unit keeping track original source customer provider border gateway protocol bgp introduction computer network release peer route let say autonomous system s sibling family chain autonomous system s s nso consecutive s s sibling deÔ¨Åne following property selective export property sibling family satisÔ¨Åes property member family learns route provider respectively peer customer member family treat route provider respectively peer customer route deciding export word situation diagrammed learned route d provider treat route route export real world bgp relationship Ô¨Åt category sibling relationship property fails quite relationship hold useful degree specialize relationship particular set destination individual tion example autonomous system c p said relationship destination d c learned route d doe export route p p doe export c route bgp certainly allows complicated variation regional provider customer large transit backbone backbone announce route listed transit agreement route supposition regional provider multiple connection contracted particular transit backbone certain route Ô¨Åt classiÔ¨Åcation restricting attention set route listed agreement declaring principle transit provider export route regional customer doesn t import one hasn t paid bgp theorem consequence adherence classiÔ¨Åcation attendant export rule theorem suppose pair adjacent as relationship described sibling rule taken deÔ¨Ånitions relationship addition sibling family abides property let autonomous received route destination d peer link link left link closer customer √±provider link sibling√±sibling link right link provider√±customer sibling √±sibling link link divide Ô¨Årst second intuitively autonomous system right path export route d customer route autonomous system left path export route provider customer theorem seen illustration power restriction built export rule informal argument case link note bgp rule mean autonomous iin path received route d neighbor ny bgp relationship introduction computer network release theorem fail order increasing downward link followed eventually upward link choose largest ment appears let k position Ô¨Årst subsequent upward link ito jto j ki route d acquired provider k provider route set sibling family rule treat route d provider route export route different provider contradiction case edge exercise hypothesis theorem hold route involving particular destination set destination theorem true route hypothesis theorem quite sufÔ¨Åcient guarantee convergence bgp stable set route ensure convergence case sibling relationship shown following simple rule sufÔ¨Åces get route destination d Ô¨Årst route customer Ô¨Årst assigned higher value complex rule exist allow case value equal rule state strict inequality required provider route straightforward rule handle case sibling relationship egby requiring sibling rule consistent use shared connection backup practical matter actual bgp relationship consistent rule ments resulting actual bgp instability appear rare internet example bgp instability normal rule regarding bgp preference notfollowed turn bgp allows genuinely unstable situation occur consequence allowing completely independent hand selecting preference function simple example example stable state exists convergence guaranteed consider following network arrangement d border gateway protocol bgp introduction computer network release assume prefers destination d following order preferred direct path way express preference prefer route begin link expensive similarly assume prefers path d order start using advertise receives s advertisement apply preference order switch routing d s trafÔ¨Åc switch route switch course cause routing loop soon export path detect loop reject new route switch soon announce change use oscillation continue indeÔ¨Ånitely long switch away moment switch continues use stuck situation stable practice eventual convergence stable state likely choose export avoid instability export route sibling sense previous section example stable state exists example assume destination d attached turn connects following diagram direct route assume prefers take clockwise neighbor prefers prefers prefers peculiar legal example input Ô¨Åltering suppose initially adopt advertise Ô¨Årst look incoming advertisement switch route announces point see us switch path yrather doe make switch doe switch prefers available make switch advertises see route using point switch switch using doe Ô¨Ånds using y switch allows switch longer route switch direct route get longer route forever rotating clockwise example bgp instability introduction computer network release export route d neighbor sibling bgp security route registry indicated sidebar bgp breakdown bgp filtering routing policy quite easy site advertise route destination fact reach bgp neighbor accept route Ô¨Ånd destination unreachable bgp traditionally based trust security difÔ¨Åcult strategy preventing false bgp claim crosscheck destination advertised bgp neighbor public database information autonomous system assignment ip address block database managed multiple internet registry including regional registry arin ripe apnic afrinic lacnic mentioned future registry database known internet routing registry irrs common irrs mirror data held term irr singular used denote collective union individual irrs bgp route report indicates virtue origin ip destination address block basic form bgp security origin validation ensuring origin appearing fact entitled origin ip address block origin owns block designated isp owner block origin validation prevent autonomous advertising origin s active block ip address preventing access block known bgp hijacking prevent Ô¨Ånding block ip address actually using fraudulently claiming known squatting surprisingly common origin validation prevent say q claiming direct connection say r valid owner ip address block q fact connected r trafÔ¨Åc routed d q lost q block access d able make use address ideally want form path validation form veriÔ¨Åcation properly connected adjacent as validation intended relationship sense bgp tionships let p let q customer outline p use irrs modest coercion validate route received deÔ¨Ånition relationship q advertise p customer route route customer route customer q advertises p route address block p p use irr data conÔ¨Årm fact owned q example lookup appears section quite possible q listed irr p elect require listing adopting policy route customer accepted matching irr record absence requirement irr data notoriously incomplete useful suppose r customer q advertises address block b q q turn advertises b p Ô¨Årst step origin validation p need Ô¨Ånd irr record establishing r owner time complete validation p need evidence r customer second veriÔ¨Åcation path validation scope origin validation established q potentially attempting block access b partially claiming route border gateway protocol bgp introduction computer network release b false connection approach path validation p require q provides list customer form set additional malicious common error accidentally mistakenly offering transit service happens autonomous say q valid route address block d entire internet unintentionally advertises route neighboring p route trafÔ¨Åc d q handle known route leak irr validation prevent route leak hijacking preÔ¨Åx squatting q accidentally advertises p route irr data used recognize p decline accept bgp relationship q p sibling customer provider q export p allits route probably impractical p validate route receives sibling as typically closer relationship as p inclined simply trust route exported q irr lookup irr record accessed using whois command interface provided whois commonly used look information domain egwhois support multiple query type advanced us whois usually require specifying particular whois server addition query example use server irr record created using routing policy speciÔ¨Åcation language rpsl deÔ¨Åned rfc companion usage document rfc created record uploaded appropriate irr loyola university owns address block advertises block bgp peer usewhois query block use command whois list information including number owner output viated route origin descr loyola university chicago ask speciÔ¨Åc ip address turn loyola record multiple accommodate assignment ip address different campus query record block reading closely Ô¨Ånd record managed directly loyola block managed proxy xo communication query number following example radb documentation belongs rice university whois abbreviated output bgp security route registry introduction computer network release rice descr rice university import action accept import action accept export announce export announce export announce example import andexport rule corresponding bgp import export ters Ô¨Årst import rule say ntt communication accept route default route second import rule includes med ues addition validating address block provider as use declared import export rule crosscheck advertisement received bgp export rule contain route set route set name begin query information route set whois net use route set make export rule easier write maintain multiple block exported possible deÔ¨Åne set list as preferred way supply provider list customer example look fusion network thing import accept peeras export announce export announce thepeeras keyword stand recipient s number set hierarchical set set name globally unique prepending one useful line mean route announced local list transit service provided s customer expected provider retrieve list egby using Ô¨Çag whois query route set example note context relationship provider reasonably infer provides transit service customer set fact customer list fact customer appears conventional essential command good description given network as customer provides transit service assuming taken care create appropriate record suitable automated processing suitable bgp support approach effective validating information received bgp border gateway protocol bgp introduction computer network release organization manrs mutually agreed norm routing security created improve routing security encourage best practice best practice use irr data bgp validation rpki newer approach bgp integrity resource public key infrastructure rpki described rfc idea set mechanism as obtain cryptographically signed assurance known certiÔ¨Åcates similar certiÔ¨Åcates tl certiÔ¨Åcate authority given ip address block fact owned claim origin route address block achieves origin validation described attack possible wanting participate rpki bundle number ip address block certiÔ¨Åcate request submits appropriate authority digital signing request signed route origin authorization roa as use verify Ô¨Årst properly origin claimed address block signer roas akin certiÔ¨Åcate authority certiÔ¨Åcate authority largely organization run irrs iana Ô¨Åve regional registry arin ripe apnic afrinic lacnic mentioned future local registry delegated organization hand ip address block strong position verify ownership ownership legal concern technical sell address block transfer approved appropriate route registry registry required paper irrs rpki teeth policy transfer legal action valid country as involved recognized country registrar liable access s site blocked improperly signed roa reason arin somewhat daunting relying party agreement as sign allowed participate roa creation analysis suggests legal consideration slowed rpki adoption veriÔ¨Åcation roas access roas irrs generally notpart bgp protocol want use irr roa validate routing decision obtain appropriate information outside bgp typically having local bgp router communicate local validation server handle detail veriÔ¨Åcations newly seen route epilog interior routing using protocol neat mathematical exterior routing bgp messy arbitrary surprising thing bgp internet work doe given complexity provider interconnection business routing impact ordinary user extent bgp work provider voluntarily limit complexity Ô¨Åltering preference turn largely business relationship isps require complex Ô¨Åltering epilog introduction computer network release exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution border gateway protocol consider following network provider using bgp provider horizontal line provider provider p provider sprovider rprovider q net nr net nsnet nq route network n p receive assuming provider export route neighbor Ô¨Åltering route list b route network nq p receive route list c suppose r us export Ô¨Åltering advertise route p doe continue advertise route route network nr p receive consider following network autonomous system double tions advertises bgp example provides export link neighbor left route receive reach specify route b assuming export route receive reach c suppose export link continues export link reach reach assume local preference use bgp selection shortest win suppose try use bgp s strategy exchanging destination plus path interior border gateway protocol bgp introduction computer network release strategy replacing routing cost used router attach destination list router used reach destination router route preference prefer link b possible consider network problem d b link break b offer think route explain exchanging path information prevents routing loop b suppose network initially router know immediately adjacent neighbor sequence router announcement lead reaching f a√±d√±e√±b√±c√±f individual router preference necessary initially example reach b directly preference make prefer √±d√±e√±b b c d e f c explain method equivalent using hopcount metric routing router allowed preference length used following customer lower provider far customer route exported far customer route exported peer complete proof theorem bgp relationship include link existing argument work establishing upwards link appear right link b existing argument work klink provider establishing downwards link appear left link c link exercise introduction computer network release border gateway protocol bgp udp transport standard transport protocol riding ip layer tcp andudp saw chapter udp provides simple datagram delivery remote socket xhost portypairs tcp provides richer functionality sending data requires remote socket Ô¨Årst connected chapter start udp including trivial file transfer protocol review fundamental issue transport protocol address lost Ô¨Ånal packet packet arriving late subject misinterpretation arrival fundamental issue equally applicable tcp connection user datagram protocol udp rfc refers udp null protocol harsh assessment udp fairly basic feature add ip layer port number checksum udp header consists following source port destination port length data port number make udp real transport protocol application connect individual server process process owning port number question simply host udp unreliable attempt timeouts acknowledgment retransmission application written udp implement tcp udp xhost portypair known socket udp port considered separate namespace tcp port udp unconnected stateless application opened port host host internet deliver packet thatxhost portysocket preliminary negotiation old bit internet humor udp s unreliability send udp joke udp packet use internet checksum error detection data seldom today checksum disabled setting checksum Ô¨Åeld value occurs actual sum udp checksum cover udp header udp data header includes source destination ip address duplicate copy length Ô¨Åeld nat router rewrite ip address port udp checksum updated introduction computer network release udp packet dropped queue overÔ¨Çows intervening router receiving host happens mean packet arriving faster receiver process level protocol deÔ¨Åne ack packet rpc typically include form Ô¨Çow control prevent udp popular local transport conÔ¨Åned lan setting common use udp transport basis remote procedure rpc protocol conceptual idea rpc host invokes procedure host parameter return value transported forth udp consider rpc greater remote procedure rpc point udp local lan fall simple mechanism timeout retransmission udp semantics rpc use tcp send message reply additional overhead setting tearing connection dns us udp largely reason chance sequence operation performed short order tcp worth overhead udp popular transport issue blocking tcp packet lost receiving host queue later data lost data retransmitted successfully rtts option receiving application request different behavior udp hand give receiving application freedom simply ignore lost packet approach successful voice video small loss simply degrade received signal slightly packet arriving late playback arrived similarly computer game lost position update moot subsequent update loss tolerance reason transport protocol rtp built udp tcp common v oip telephone call use rtp udp notcp manifesto dark udp protocol choice Ô¨Çooding attack internet easy send udp packet spoofed source address internet draft advisory said especially hard send tcp syn packet spoofed source address quite difÔ¨Åcult tcp spooÔ¨Ång work long data delivered application process isn spooÔ¨Ång udp enables called trafÔ¨Åc ampliÔ¨Åcation attack attacker sends small sage server spoofed source address server responds spoofed address larger response message creates larger volume trafÔ¨Åc victim attacker able generate directly approach server limit size response ideally size client s request able verify client actually receives packet sent claimed ip address quic us approach connection handshake tl encryption quic udp used simply allows new experimental protocol run entirely application kernel update required case tcp change google created protocol named quic quick udp internet connection category speciÔ¨Åcally support http protocol quic fact viewed transport protocol speciÔ¨Åcally tailored http http plus tl encryption tl quic take advantage udp s freedom blocking example quic s goal includes supporting multiplexed stream single connection egfor multiple component udp transportan introduction computer network release web page lost packet block stream retransmitted stream continue waiting early version quic supported code code feature difÔ¨Åcult add tcp case quic eliminates initial rtt needed setting tcp connection allowing data delivery Ô¨Årst packet usually requires recent previous connection accepting data Ô¨Årst packet open recipient certain spooÔ¨Ång attack quic usually eliminates second maybe rtt needed negotiating tl encryption tl quic provides support advanced congestion control currently including udp analog tcp cubic tcp cubic quic doe application layer new nisms tcp require client change mechanism life primarily server end quic require kernel support make use ecn congestion feedback explicit congestion notiÔ¨Åcation ecn requires setting bit ip header quic represents promising approach using udp s Ô¨Çexibility support innovative experimental feature downside quic nonstandard programming interface note google doe achieve widespread web utilization quic simply distributing client chrome browser downside insidious quic break social contract use tcp footing regarding congestion turn tcp user fact footing multiple tcp variant newer tcp implementation furthermore quic supposed compete fairly tcp quic doe open interesting worm speciÔ¨Åc feature quic chosen response perceived difÔ¨Åculties tcp explore protocol s detail introducing tcp quic revisited dccp datagram congestion control protocol dccp transport protocol build atop udp serving udp s fundamental tolerance packet loss outlined rfc dccp add number feature udp purpose signiÔ¨Åcant connection setup teardown dccp congestion management dccp congestion control dccp data packet numbered delivered application order arrival order sequence number dccp add acknowledgment udp specialized form primarily congestion control assumption unacknowledged data packet retransmitted decision entirely application acknowledgment acknowledge single packet dccp format packet received range recent sequence number sack tcp selective acknowledgment sack support dccp doe support reliable delivery control packet used connection setup teardown option negotiation option negotiation occur point connection dccp packet include usual udp port number service code allows packet handling unambiguously identiÔ¨Åes processing requested incoming packet use service code resolve problem created application forced use nonstandard port number conÔ¨Çicts dccp speciÔ¨Åcally intended run kernel user space ecn mechanism explicit congestion notiÔ¨Åcation ecn requires user datagram protocol udp introduction computer network release setting Ô¨Çag bit ip header kernel allow application udp early standard example socket programming client read line text user s terminal sends network server server display terminal server doe acknowledge sent fact send response client simplex refers nature Ô¨Çow duplex talk basis instant messaging im simple level detail attend regarding data protocol assume line sent trailing marker world different o s use different line mark including transmitted data problematic tcp version arriving packet queued reason embedded character thing separate arriving data line internet protocol server select port number server s ip address form socket address client connect client discover port number written application code client port number largely invisible server following ask designated port number create socket endpoint socket socket address point socket creation receive packet sent socket packet received print sender content client similar list server s ip address using dns create anonymous socket don t care client s port number read line terminal send socket address porty server start server presented java java socket implementation based bsd socket library berkeley unix use port easily changed example startup error message like create socket port appears port use adopted postgresql tcp connection client course need changed javadatagrampacket type udp transportan introduction computer network release javadatagrampacket object contain packet data port ysource destination packet combine data address course nonetheless combining single object especially common design choice original bsd socket library implemented data address separate parameter language followed precedent case java approach violates principle data address handled separately operation combined single operation new datagramsocket destport created socket receive packet host dress packet need preliminary connection original bsd socket library socket created socket bound address separate operation bind server application need parameter just start said make port number parameter allow easy change server accepts connection return play role protocol server time second display message just implementation real udp protocol essentially arrange attempting receive packet time certain interval response Ô¨Åle server udp version import import public class stalk static public int destport static public int bufsize static public final int timeout time millisecond static public void main string args datagramsocket s udp us datagramsockets try s new datagramsocket destport catch socketexception se create socket port destport return try timeout set timeout millisecond catch socketexception se socket exception timeout set create datagrampacket object receiving data datagrampacket msg new datagrampacket new byte bufsize bufsize continues page user datagram protocol udp introduction computer network release continued previous page true read loop try bufsize max received packet size msg actual receive operation message √£√± catch sockettimeoutexception ste receive timed response timed continue catch ioexception ioe happen bad receive break string str new string str newline str end main udp ip address server line s new datagramsocket destport creates adatagramsocket object bound given port host multiple ip address multihomed packet sent port ip address delivered socket including localhost fact address subnet broadcast address client attempt connect subnet broadcast address multiple server receive packet fortunate stalk server doe reply alternatively used s new datagramsocket int port inetaddress case packet sent host port host s speciÔ¨Åc ip address delivered doe matter ip forwarding host enabled original c socket library binding port usually server socket bind allow connection host s ip address special ip address passed bind host multiple ip address bsd socket library descendent appear provide way Ô¨Ånd arriving udp packet actually sent supposed according rfc normally major difÔ¨Åculty host interface actual network ienot counting loopback ip address interface remote client send interface address reply stalk come address multiple interface necessarily create ambiguity easiest case experiment udp transportan introduction computer network release involves use loopback ethernet interface need use application unlike stalk sends reply interface respective address client run machine connection server application sent answered connection sent answered ip layer see different subnets Ô¨Ålls ip Ô¨Åeld according appropriate subnet applies multiple ethernet interface involved single ethernet interface assigned ip address different subnets life slightly complicated single interface assigned multiple ip address subnet regardless address client sends request server s reply generally come designated address subnet possible legitimate udp reply come different ip address initial request sent behavior desired approach create multiple server socket bind host s network ip address different server socket fact ip layer usually chooses source address add slight wrinkle discussion network protocol layer ietf osi classic encapsulation model suggest udp layer writes udp header pass packet destination ip address ip layer writes ip header pass packet turn lan layer work quite described ip source address seen supplied ip layer available time checksum Ô¨Åeld Ô¨Årst Ô¨Ålled checksum messy real implementation simply blur layering rule typically udp layer asks ip layer early determination ip source address situation complicated fact nowadays bulk checksum calculation performed lan layer lan hardware tcp ofÔ¨Çoading client java client version client client provide host wish send port number application commonly speciÔ¨Åed user version us host localhost default accepts hostname argument desthost invokes dns look desthost successful return ip address inetaddress getbyname accepts address numeric form case dns sary create socket designate port new datagramsocket mean port client create datagrampacket object Ô¨Årst parameter array actual data array provided loop certain degree messiness introduced need create bufferedreader object handle terminal input client injava udp version import import public class stalkc continues page user datagram protocol udp introduction computer network release continued previous page static public bufferedreader bin static public int destport static public int bufsize static public void main string args string desthost localhost desthost args bin new bufferedreader new inputstreamreader inetaddress dest looking address desthost try dest desthost dns query catch unknownhostexception uhe unknown host desthost return got datagramsocket s try s new datagramsocket catch ioexception ioe socket created return port datagrampacket msg new datagrampacket new byte dest √£√±destport true string buf int slen try buf catch ioexception ioe readline failed return buf null break user typed eof character buf buf append newline character slen byte bbuf continues page udp transportan introduction computer network release continued previous page bbuf slen try msg catch ioexception ioe send failed return default value desthost islocalhost convenient running client server machine separate terminal window packet sent xdest destportyaddress speciÔ¨Åed initialization msg alternatively called dest destport cause sent network udp connectionless locally mark socket sallowing send xdest destporty java embed destination address datagrampacket wesend offer beneÔ¨Åt language simplify subsequent sending operation like server client work inetaddress objectdest server code hold address inetaddress base class child class client server communicate value ofdesthost supplied client dest object used example client invoked command line java stalkc resolve loopback address client send packet stalk server host using loopback interface greater control desired replace getbyname following wheredests type inetaddress dests desthost return array address associated given Ô¨Ånd address searching array address addr whichaddr instanceof language object addressfamily attribute used determine address using finally simple python version client socket import continues page user datagram protocol udp introduction computer network release continued previous page sys import argv portnum deftalk rhost localhost iflen argv rhost argv print looking address rhost try dest gethostbyname rhost gaierror herror asmesg gaierror error √£√±gethostbyname errno print errstr return print got dest dest portnum socket address s socket actually need set √£√±timeout true try buf input break byte buf addr talk c c arguably popular language network programming doe support ip address network object type omit actual overÔ¨Çow example tl programming example c version program problem entirely c s fault network address address address named pipe address object different size address handled reference awkward experiment single host start server window client window try following client simultaneously running sending alternating message server invoke client external ip address server note localhost run java python client simultaneously sending server run server different host ega virtual host neighboring machine udp transportan introduction computer network release invoke client nonexistent hostname use netcat client netcat server work client experiment note depending dns server actually fail asked dns nonexistent host isps return ip address host running web server hosting page usually make modicum sense attention restricted web search annoying mean application easy way identify nonexistent host work server public nat Ô¨Årewall packet need delivered client direction work wrong Ô¨Årewall netcat versatile netcat utility spelled nc utility enables sending receiving individual udp tcp packet use substitute stalk client limitation server netcat utility unlike stalk support bidirectional communication thenetcat utility available window linux macintosh system binary source form variety place variety version classic version available newer implementation ncat wikipedia page additional information stalk netcat sends Ô¨Ånal marker data used request udp send port localhost using udp like stalk client command netcat localhost type multiple line received running stalk server desired source port speciÔ¨Åed egnetcat localhost act stalk server need ask netcat listen instead sending netcat send line using stalkc ornetcat client mode netcat server mode receives Ô¨Årst udp packet accept later udp packet different source version netcat allow tcp udp situation arises netcat make use connect server client server send receive socket address connected simpliÔ¨Åes bidirectional communication udp connect called client paragraph connect following java stalkc code client binary data stalk example client sent string server implementing protocol requires send binary data designing protocol client server agree data encoded user datagram protocol udp introduction computer network release example suppose client send server list integer organized follows length list occupy Ô¨Årst byte remainder packet contains consecutive integer byte diagram packet data layout client need create byte array organized server need extract value inclusion list length short int really necessary receiver able infer list length packet size want able illustrate encoding int andshort int value protocol need deÔ¨Åne integer laid common way represent integer sequence byte consider integer encoded byte sequence known encoding known encoding used early ibm mainframe used intel processor assuming architecture represent signed integer using universal send integer network certainly possible tag data endpoint negotiate encoding far common approach internet application layer follow convention rfc use encoding exclusively encoding come known network byte order convert host byte order network byte order architecture code recompiled different architecture later java conversion generally combined process conversion int byte client use dataoutputstream class support writing binary ues output stream method writeint andwriteshort bytearrayoutputstream class support conversion output stream type byte code assumes list integer initially arraylist integer namedthenums bytearrayoutputstream baos new bytearrayoutputstream dataoutputstream do new dataoutputstream baos try int n thenums n catch ioexception ioe exception handling byte bbuf bbuf msg isthe datagrampacket √£√±object sent server need reverse msg arriving datagrampacket code simply calculates sum integer msg udp transportan introduction computer network release bytearrayinputstream bai new bytearrayinputstream msg √£√±getlength datainputstream dis new datainputstream bai int sum try int count int count sum catch ioexception ioe exception handling version list integer client server client read command line list integer separated whitespace construct binary encoding sends server server print sum port used changed necessary c language simply allocate char appropriate size write order value directly conversion network byte order following library call conversion long integer conversion long integer conversion short integer conversion short integer certain casting int andchar necessary casting conversion best conversion block just packet arrives just sent demand program general designer protocol need select unambiguous format binary data deÔ¨Åning rfcs include format detail particular issue data format endianness differ egin normalization size exponent Ô¨Åeld format structured data array spelled example list size indicated length Ô¨Åeld option possible example illustrates encoding possible option using encoding using basic encoding rule syntax snmp encoding cumbersome data hierarchical application layer use encoding common binary encoding continue remain common popular format using unicode string data encoding xml encoding rule json format originated javascript widely supported language trivial file transport protocol tftp introduce real protocol based udp trivial file transport protocol tftp tftp support Ô¨Åle transfer direction restrict attention common case client trivial file transport protocol tftp introduction computer network release request Ô¨Åle server tftp doe support mechanism authentication requestable Ô¨Åles available tftp doe differ basic web browsing web server tftp Ô¨Åle server ensure request disallowed Ô¨Åle example permitted directory tftp client implemented compactly loading startup Ô¨Åles compact system including diskless system us us Ô¨Åxed timeout interval offer limited security tftp typically conÔ¨Åned internal use lan tftp simple protocol correct operation address fundamental transport issue discussed following section tftp presented partly way duce transport issue later return issue context tcp anomalous tcp scenario tftp documented Ô¨Årst rfc updated rfc Ô¨Åve packet type read request rrq containing Ô¨Ålename indication write request wrq data containing block number byte data ack containing block number error certain designated error error unknown transfer id cause sender termination data block numbering begin denote packet nth block data data n knowledgments contain block number block acknowledged ack n acknowledges data n block data contain byte Ô¨Ånal block identiÔ¨Åed asthe Ô¨Ånal block virtue containing byte data Ô¨Åle size divisible Ô¨Ånal block contain byte data tftp block number bit length allowed wrap tftp us udp opposed tcp care packetization choose block size small avoid fragmentation fragmentation negotiation block size possible tcp s path mtu discovery added considerable complexity tftp server listens udp port arriving rrq packet wrq consider rrq requesting valid Ô¨Åle tftp server implementation create separate process thread handle transfer child process obtain entirely new udp port used interaction client particular transfer shall port change signiÔ¨Åcant functional implication preventing packet justify making implementer s life easier port change server child process responsible transfer interact client arriving packet come client child process created possible stray packet arrive endpoint child process ignore port change hand handling multiple concurrent transfer decidedly complicated server sort arriving packet transfer belonged transfer state information including block number open Ô¨Åle time successful packet rule doe drawback preventing use tftp nat Ô¨Årewalls udp transportan introduction computer network release absence packet loss error tftp Ô¨Åle request typically proceed follows client sends rrq server port server creates child process obtains new port operating server child process sends data client receives data learns value client verify future data n arrives port client sends ack future acks server s server child process sends data time waiting client ack n sending data transfer process stop server sends Ô¨Ånal block size byte client sends corresponding ack refer client s learning step latching port diagram server child process new port represented blue line right tftp lossesrrq ack data data b ack server new port opened transfer latch turn complication introduced taking packet loss reordering account fundamental transport issue possibility lost delayed packet introduces fundamental issue transport strategy handle correctly proper operation revisit context tcp anomalous fundamental transport issue introduction computer network release tcp scenario issue consider include old duplicate packet lost Ô¨Ånal ack duplicated connection request reboots section discus issue general particular tftp take account old duplicate packet trickiest issue old duplicate packet packet past arriving quite late mistakenly accepted current tftp example suppose client chooses port request Ô¨Åle foo server chooses port child process transfer data get duplicated timeout retransmission copy greatly delayed copy arrives time transfer concludes immediately client initiate second request time Ô¨Åle bar fatefully client chooses port server child process chooses port point second transfer client waiting data Ô¨Åle bar suppose data Ô¨Åle foo Ô¨Ånally show packet indicate amiss block number correct destination port ensures delivery current server child process source port make packet appear coming current client wrong data accepted legitimate Ô¨Åle transfer corrupted old packet previous instance connection described called external old duplicate essential feature external case connection closed reopened short time later using port number end connection deÔ¨Åned endpoint port number precisely socket address refer reopening connection second instance completely unrelated separate instance connection socket address known incarnation connection particularly context tcp old duplicate internal earlier point connection instance example tftp allowed block number wrap old data accepted lieu data internal old duplicate usually prevented rendered improbable numbering data block byte using sufÔ¨Åciently bit unlikely tftp prevents internal old duplicate simply allowing block number wrap effective limit maximum Ô¨Åle mb concerned old duplicate tftp s make sequence number exercise exercise random port udp transportan introduction computer network release rfc state tid s port number chosen connection randomly chosen probability number chosen twice immediate succession literal interpretation implementation choose random number ask tid author know implementation actually doe create socket egwith java sdatagramsocket accept port number assigned new socket operating port number random statistical sense willbe likely different recently used port interpreted noncompliance rfc author idea tftp s defense external old duplicate based requiring endpoint try choose different port separate transfer rfc state choose port number randomly long endpoint succeeds choosing new port external old duplicate interfere exercise port chosen random probability side chose pair port subsequent connection port assigned operating implicit assumption o reissue port twice rapid succession noncompliant implementation reuses port number tftp transfer protected long chooses new port random probability failure rise note issue represents second fundamental reason having server choose new port transfer unrelated making implementer s life easier time port number eventually recycled assume old duplicate smaller lifetime external internal scenario assume old duplicate sent earlier delayed transit extended period time later packet delivered normally exactly occur remains unclear scenario following Ô¨Årst copy old duplicate sent routing error occurs packet stuck routing loop alternative path original host restored packet retransmitted successfully time later packet stuck routing loop released reach Ô¨Ånal destination scenario involves link path supply acknowledgment packet sent link ack lost packet sent mechanism needed delay copy solution problem assume cap just late old duplicate practical term tcp ofÔ¨Åcially took time limit second implementation usually second protocol implicitly adopt tcp limit time ip router expected decrement packet s ttl Ô¨Åeld second router held packet queue world ip packet second old possible prevent external old duplicate including connection count parameter transport application header consecutive connection connection count incremented separate value maintained value lost suitable backup mechanism based delay used example tcp faster opening fundamental transport issue introduction computer network release lost final ack protocol packet acknowledged Ô¨Ånal packet ack acknowledged Ô¨Ånal packet somebody leaf uncertainty sender did packet make tftp setting suppose server sends Ô¨Ånal packet data client receives sends ack exit transfer ack lost server eventually time retransmit data client longer receive packet server continue timeout retransmit Ô¨Ånal data packet give receive conÔ¨Årmation transfer succeeded generally sends message b b reply acknowledgment delivered b certain message delivered successfully b notsure know alternative formulation problem problem general wish agree time attack exchanging message general attack message lost completely sure agreement general alice bob alice bob message look like alice sends attack noon bob reply agreed ieack bob receives alice s message side know noon attack proposed bob s reply reach alice side know message delivered alice s message order bob sufÔ¨Åcient alice bob cooperate quite end exchange bob doe know alice received reply bob hesitate fearing alice know s board alice aware possibility hesitate alice attempt resolve acknowledging bob s ack alice reply ok agreed noon point alice doe know bob received message bob doe bob hesitate knowing alice hesitate end mathematically perfect solution problem general certain complete agreement attack suppose contrary sequence message didbring certainty agreement alice bob let m m nbe shortest possible sequence loss generality assume alice sent m consider happens Ô¨Ånal message lost alice s perspective change alice certain bob agreed sequence m m bring certainty bob sequence length n supposed minimum bob notcertain alice s certainty misplaced engineering term probability misunderstanding vanishingly small typically alice doe receive bob s reply promptly resend message regular timeout interval doe receive ack bob count behavior reasonably sure acks time elapsed udp transportan introduction computer network release example bob know alice try total time doe receive response bob receives alice s Ô¨Årst message instance fact alice appears stopped repeating mission reasonable evidence received bob s response alternatively pair probability failure bob know alice retry message time course day end day bob conclude probability acks failed million necessary case bob actually count alice s retry attempt tcp example tcp transport basic exercise tftp address problem recommending requiring receiver enter dally state sent Ô¨Ånal ack state receiver responds duplicate Ô¨Ånal data packet response retransmit Ô¨Ånal ack lost Ô¨Ånal ack possible multiple loss unlikely sooner later sender receive Ô¨Ånal ack exit dally state expire interval interval twice sender s timeout interval allowing sender make try Ô¨Ånal data packet note receiver direct way determine sender s timeout value note dallying provides increased assurance certainty possible Ô¨Ånal acks lost tcp analogue dallying timewait state timewait timewait role related prevention old duplicate duplicated connection request like able distinguish duplicated egretransmitted connection request close separate connection request especially second separate connection request represents cancellation Ô¨Årst outline tftp term scenario trying avoid client sends rrq foo client change mind abort reboots client sends rrq bar server responds data Ô¨Årst rrq Ô¨Åle foo client expecting Ô¨Åle bar correct tftp operation client send second rrq bar new port long client doe changing mind problem server end sending data Ô¨Åle foo void Ô¨Årst client port time tftp doesn t cancellation message exactly request Ô¨Åle bar succeed normally minor issue tftp application terminates preserved record port used unable guarantee new port different used previously strategy old duplicate packet choosing port number random having operating assign quite effective tftp doe run somewhat unexpected issue client sends duplicate rrq typically happens Ô¨Årst rrq time certainly possible implement tftp server recognize second rrq duplicate noting client socket address contains Ô¨Ålename practice incompatible simpliÔ¨Åed fundamental transport issue introduction computer network release implementation approach trivial file transport protocol tftp server start new child process rrq received tftp server implementation case start twosender process rrq received port send data receiver receiver expected latch port Ô¨Årst data packet receives recording source port second data appear incorrect port tftp speciÔ¨Åcation requires receiver reply packet unknown port sending error packet code unknown transfer id transfer id mean port number cause sender process sent data shut sender process sent winning data continue normally scenario packet unknown port probably simply ignored theoretically possible malicious actor lan advantage tftp latching behavior hijack anticipated rrqs actor aware host c request Ô¨Åle tftp send repeated copy bad data likely port c doe request Ô¨Åle receive malicious Ô¨Åle instead asked malicious application guess client s port number scenario appears limited importance diskless device load boot Ô¨Åle startup tftp predictable port number reboots ongoing communication protocol account possibility reboot message primary issue detection reboot close connection sending tftp connection reboots packet exchange simply stop assuming typical receiver doe retransmit timeouts receiving reboots sender continue send data packet receive acknowledgment case newly rebooted client simply ignore second issue reboots rebooting typically loses memory port used recently making difÔ¨Åcult ensure doesn t reuse recently active port lead risk old duplicate scenario based start previous section client reboot lead receipt wrong Ô¨Åle suppose client sends rrq foo reboots sending ack reboot client sends rrq bar port reboot client unable guarantee reopening recently used port server having received rrq foo belatedly proceeds send data foo client latch accepts Ô¨Åle foo believing receiving Ô¨Åle bar practical term scenario limited importance diskless device use tftp request boot image Ô¨Åle restarting potential candidate tftp note brief look aspect tftp unrelated fundamental transport issue include brief outline implementation udp transportan introduction computer network release tftp sorcerer tftp us straightforward implementation building reliable transport acknowledgment packet contain block number data packet acknowledged ack n acknowledges data n original rfc speciÔ¨Åcation tftp vulnerable sorcerer s apprentice bug cerer s apprentice bug correcting problem justiÔ¨Åcation updating protocol rfc year later omnibus document rfc referenced rfc describes necessary change way implementation contain Ô¨Åx problem sender originating data packet resend current data packet receipt duplicate ack tftp state tftp speciÔ¨Åcation relatively informal recent protocol described using terminology allowable state speciÔ¨Åcation spell appropriate response packet apply approach tftp deÔ¨Åned dally state receiver speciÔ¨Åc response arriving data n packet important conceptual state tftp receiver unlatched established Ô¨Årst sends rrq doe know port number sender send packet state unlatched receiver latched correct port state receiver wait receives packet sender look like data packet sender s ip address plausible length data packet block number packet received receiver record enters established state established state receiver veriÔ¨Åes packet source port number packet arrives port receiver sends source error packet unknown transfer id continues original transfer outline java tftp receiver source code look like code handle established state somewhat atypically code time retransmits ack packet new data received interval timeout generally timeouts implemented tftp sender error processing minimal error response aresent response packet wrong port described previous section error condition checked deÔ¨Åned tftp response variable state sendtime timeout thepacket theaddress theport blocknum need previously declared initialized sendtime represents time recent ack response sent helper function gettftpopcode deÔ¨Åned remote port theport initialized time entry established state port packet sent considered valid loop transition dally state packet marking end data received tftp note introduction computer network release tftp code forestablished state state established check elapsed time sendtime timeout sendtime receive packet try thepacket catch sockettimeoutexception stoe continue tryagain catch ioexception ioe error theaddress continue theport unknown transfer id √£√±text continue continue opcode blocknum opcode data continue blocknum continue andsave forpossible retransmission sendtime datasize datasize state dally note check elapsed time quite separate check sockettimeoutexception possible receiver receive steady stream wrong packet encounter sockettimeoutexception good packet arrives receiver arrange timeout retransmission tftp throughput single physical ethernet tftp sender receiver alternate using channel little turnaround time effective throughput close optimal soon delay switch router introduced come performance bottleneck suppose path sender receiver b pass switch link bandwidth delay signiÔ¨Åcant ack packet smaller data packet effectively ignore ack travel time b assumption throughput underlying bandwidth udp transportan introduction computer network release link active given time idle improve throughput threefold allowing send packet time packet packet packet go packet packet go packet go b amount sliding window winsize tftp doe support chapter study tcp doe remote procedure rpc different communication model usually implemented udp remote procedure rpc come idea procedure network host package request parameter sends host b return reply term protocol used making request known client server quite procedure call rpc entirely good Ô¨Åt t pas pointer parameter example true procedure call seldom time stuck common example dns host sends dns lookup request dns server receives reply example include password veriÔ¨Åcation information retrieval database query Ô¨Åle rpc quite successful mechanism interprocess communication cpu cluster application tcp used process like add overhead creating tearing connection case rpc exchange consists request reply tcp overhead nontrivial rpc udp particularly suited transaction endpoint quite likely lan situated packet loss negligible issue use udp desired acknowledgement implemented rpc layer terribly difÔ¨Åcult usually reply serf acknowledge request needed ack protocol run lan reasonable use static timeout period range second diagram includes ack remote procedure rpc introduction computer network release client server request reply ack surprisingly rpc protocol omit Ô¨Ånal ack sun rpc minimum having Ô¨Ånal ack mean reply lost client start sequence reply regenerated scratch essential request reply numbered identiÔ¨Åed client determine reply match request mean reply serve acknowledge request reply n received requester retransmits request n happen request n arrived reply n got lost client server request n reply n client server request n reply n request n timeout lost request lost replyreply n request n timeout server creates reply n sends client cached copy reply time ack n received sending reply n server receive ack n indicating receive request n indicating reply n lost experience timeout indicating reply n ack n lost case server retransmit reply n wait ack n finally let suppose server host delivers application Ô¨Årst copy request n arrive crash loses state middle sequence let assume packet reordering occurs quest n reply n ack n retransmitted eventually make destination semantics request transmitted multiple time processed executed udp transportan introduction computer network release network file term total packet volume application making greatest use early rpc sun s network file nfs allowed Ô¨Ålesystem server available client client opened Ô¨Åle server send Ô¨Åle handle typically included Ô¨Åle s identifying inode number read operation request contain block number data read corresponding reply contain data block generally kb size write operation request contain block data written block number reply contain acknowledgment received usually kb block data sent single packet using fragmentation sender transmission ethernet sun rpc original simple model quite serviceable rpc implementation developed sun microsystems documented rfc ofÔ¨Åcially known open network computing onc rpc Ô¨Ånal acknowledgment omitted relatively packet loss lan quite sound did major consequence server afford cache reply receive indication ok delete request receipt second request n lost reply diagram described semantics client sent request eventually received reply client sure request executed reply got lost request transmitted application aware possibility turned request duplicate execution reply problem request result effect server executed executed twice known idempotent request read write block Ô¨Åle idempotent request read write block speciÔ¨Åc block isidempotent data query idempotent second query simply return data Ô¨Årst Ô¨Åle open operation idempotent implemented Ô¨Åle opened second time Ô¨Åle handle simply returned second time ala exist fundamentally operation file locking form exclusive Ô¨Åle open creating directory operation fail directory exists opening Ô¨Åle idempotent server expected track open operation called order determine Ô¨Åle use did sun rpc route major advantage semantics allowed server stateless server need maintain rpc state Ô¨Ånal ack server rpc state maintained idempotent operation server generally maintain application state practical consequence server crash state lost pick right left restarting statelessness inaction remote procedure rpc introduction computer network release loyola c department used sun nfs extensively server crash bring people calmly ofÔ¨Åces Ô¨Ånd happened process doing locked hall server rebooted point return work able pick left server stateless user quite bit happy course possible build recovery mechanism stateful protocol semantics sound like egregious obsolete shortcut doe tend fast note protocol outlined Ô¨Ånal paragraph remote procedure rpc includes requirement crash approach problem reviewed rpc reÔ¨Ånements lack operation rise cheap workstation storage matter server eventually led decline nfs rpc disappeared nfs desired run statefully tcp sun rpc includes standard known external data representation xdr ally standardized rfc describes way encoding standard data type sequence byte ready transmission integer value example encoded format data transmitted xdr nottagged type unlike example encoding snmp coding mean sender receiver agree precise parameter type signature rpc sun rpc typically managed rpcgen tool take representation parameter type generates code parameter packing unpacking serial execution rpc system explicit acks request executed serially server serial execution necessity request serf implicit ack n serial execution problem Ô¨Åle operation physical disk drive generally efÔ¨Åcient operation reordered suit geometry disk disk drive commonly use elevator algorithm process request read head move track outwards track pausing track request waiting nth read complete asking disk start slow best solution server application s perspective allow multiple outstanding request reply complicates rpc protocol rpc reÔ¨Ånements basic improvement rpc concern avoidance fragmentation fragmentation major performance problem single lan difÔ¨Åculties longer distance possible reÔ¨Ånement protocol fragment rpc layer support mechanism retransmission necessary fragment actually lost optimization address possibility client server crash reboot detect client restarts add client boot counter incremented reboot udp transportan introduction computer network release rewritten persistent storage value included request echoed reply ack allows server distinguish request sent client reboot request conceptually unrelated mechanism ensures receive different identiÔ¨Åers engine related example server allowing crash reboots complicated goal simply make client aware server rebooted sequence include server s boot counter reply n client see change problem current request include client s current estimate server s boot counter request server deny request mismatch exceptional case liken request database transaction include server style journal goal allow server restarting identify request progress time crash roll complete trivial restricted class request egreads writes grpc g google grpc designed operation request reply large complex client server noton lan suited request large server underlying transport tcp speciÔ¨Åcally data sent way using support multiple data stream eventually grpc likely migrate us udp quic use tl tl supported authentication encryption essential connection datacenter grpc case datacenter request idempotent lost response grpc effect focus encoding portion rpc sunrpc handled xdr support streamed data xdr doe homa homa hand notmeant communication intended rpc implementation use exclusively datacenters generally request reply relatively small primary design goal minimization latency gbps packet transmitted ¬µsec implementation achieves network load ¬µsec delivery time request fast datacenter rpc active research area homa quite predecessor phost pfabric requires special switch fastpass requires central scheduler queuing delay largest delay culprit homa address explicitly setting net vlan priority Ô¨Åeld packet virtual lan vlan priority level available homa adjusts packet priority goal giving highest priority response fewest remaining packet known shortest remaining processing time srpt Ô¨Årst sender data response send Ô¨Årst chunk data typically kb blindly priority blind transmission doe mean default priority receiver continually remote procedure rpc introduction computer network release monitor current trafÔ¨Åc condition piggyback recommendation priority homa trafÔ¨Åc Ô¨Årst data chunk includes information total size data sending Ô¨Årst chunk sender wait grant message receiver includes receiver s chosen priority remaining data receiver set priority typical datacenter queue form primarily rack switch nearest receiver receiver best positioned manage queue homa s use priority blind grant allow homa data leapfrog larger data Ô¨Çows use priority largely prevents incast congestion problem tcp incast host sends multiple request receives corresponding reply time sun nfs kb data block blind priority used frequently grant priority come play message message size range kb mb egthe hadoop example data transmitted aegis grant priority accordance srpt strategy priority packet large message steadily increase message transmitted homa like sunrpc doe support Ô¨Ånal acknowledgment data request allthe response data packet lost request retransmitted response evaluated scratch result semantics signiÔ¨Åcantly simpliÔ¨Åes overall protocol tends improve throughput individual packet lost receiver sends resend message missing byte range sender likely cached data sunrpc Ô¨Ånal ack know delete cached response response evaluated scratch sending grant request receiver engage carefully calculated overcommitment receiver grant data transmission delivered immediately queuing sender able send data immediately typically process sending data receiver epilog udp doe attention tcp avoidance overhead avoidance blocking high lan performance hold use udp illustrate fundamental transport issue abstractly speciÔ¨Åc protocol tftp revisit fundamental issue extensively chapter context tcp issue played major role tcp s design exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution udp perform udp experiment discussed end udp multiple client simultaneous session server suppose side tftp transfer implement ments happen following case Ô¨Årst data packet udp transportan introduction computer network release lost sender timeout receiver timeout second b sender timeout second receiver timeout second c sender timeout second receiver timeout second assume actual transfer time negligible comparison timeout interval ted data received successfully previous exercise thing change Ô¨Årst ack packet lost state spell plausible response tftp receiver receipt data n packet answer depend n packet size indicate event cause transition state tftp state proposed tftp state unlatched b established c dallying example receipt error packet tftp state exit code tftp state explain check thepacket getlength extracting opcode block number assume tftp sender tftp receiver implement outline speciÔ¨Åc tftp scenario tftp receiver tftp state set socket timeout interval encounter hard timeout asockettimeoutexception timeout retransmit hint arrange sender regularly time retransmits packet interval receiver s sockettimeoutexception time packet receiver waiting end old duplicate packet claimed tftp protocol changed port problem occur client receiver change port number subsequent connection server sender doe prevents data packet sent server accepted new client b server change port number subsequent connection client doe prevents data n packet n sent server accepted new client b previous exercise claimed data n accepted valid new receiver provided n example data isaccepted valid exercise introduction computer network release suppose tftp server implementation resends data n receipt duplicate ack contrary tftp sorcerer receives Ô¨Åle request partially implemented tftp client sends ack correct new port increment ack number client s response data n ack happens based true story simple rpc protocol beginning remote procedure rpc suppose server sends reply n experience timeout receiving client text suggested likely meant ack n lost loss scenario involving loss packet assume client server timeout interval suppose sun rpc read request end executing twice unfortunately successive read operation block data updated process different data returned failure idempotence outline rpc protocol multiple request outstanding reply sent order assume request numbered ack n acknowledges reply n acks cumulative happen ack lost consider request n n n protocol remote procedure rpc assumption request numbered sequentially packet potentially delivered order request arrive ack sent Ô¨Årst request arrive ack sent request handled serially serial execution information doe server need maintain order avoid duplicate execution request b information doe server need maintain request handled multiple outstanding request time assume request arrives request server responds reply temporary gap sequence number suppose rpc client maintains boot counter rpc reÔ¨Ånements draw diagram case b indicate boot counter used resolve situation client sends request n reboots reply n received b client sends request n immediately reboots sends unrelated request just happens numbered c happen scenario b reply n packet did notecho value request n packet exercise explore udp connection state using netcat netcat let b host necessarily distinct verify exchange message b starting following udp create server listen udp transportan introduction computer network release terminal b netcat terminal netcat b b kill netcat restart different local port likely chosen second netcat verify communication fails c repeat process time addition specify source port terminal b netcat terminal netcat b verify killing restarting client allows communication continue exercise explore sending udp packet nat router network address lation usingnetcat netcat let internal host nr public ip address nat router c outside host initiate connection having send c port Ô¨Årewalled changing different port straightforward verify send c terminal c netcat terminal netcat c doe work try changing port number c s Ô¨Årewall setting b try typing text terminal c netcat support bidirectional communication doe output appear c experimentation estimate allowable delay packet response minute minute minute d try transmit reply c using entirely separate pair netcat session chance working s source port known set c netcat c soon data transmitted successfully c try reverse path netcat process Ô¨Årst terminated free port netcat c netcat nr exercise introduction computer network release udp tcp transport basic standard transport protocol riding ip layer tcp andudp saw udp transport udp provides simple datagram delivery remote socket xhost portypairs tcp provides richer functionality sending data connected socket chapter cover basic tcp protocol following chapter cover subtle issue related potential data loss tcp implementation detail protocol serve alternative tcp tcp quite different dimension udp tcp meaning cation write data small large amount tcp layer care appropriate packetization tcp transmits stream byte message record cf sctp tcp meaning connection established beginning data transfer tcp reliable tcp us sequence number ensure correct order delivery mechanism make sure data lost short massive network failure nally tcp automatically us sliding window algorithm achieve throughput relatively close maximum available feature mean tcp suited transfer large Ô¨Åles endpoint open connection Ô¨Åle data written end connection read end feature ensure Ô¨Åle received correctly tcp work quite interactive application sending receiving stream small packet example include ssh telnet packet exchanged keystroke database connection carry query second tcp work reasonably protocol sends single message responds connection closed drawback overhead setting new connection request better design allow multiple pair single tcp connection note reliability tcp represent abstract feature built ip layer support nature tcp warrant explanation udp server open socket o object corresponding socket address client internet send socket socket address udp application prepared check source address packet arrives tcp data arriving connected socket come endpoint connection server s initially open socket s socket unconnected said listen state socket address consisting host port listening socket receive data directly client c internet wish send data s Ô¨Årst establish connection deÔ¨Åned socketpair consisting socket address portypairs c connection process new connected child socket s cwill created s cthat receive data sent usually server create new thread process handle communication s typically server multiple connected child original socket s process attached connect s connected socket s created s s likely separate process packet arrives s addressed socket address s source socket address examined determine data connection read s s respectively data introduction computer network release s acting ssh server listening socket listens port connected child socket correspond separate user login connection process child socket represents login process user run hour day chapter likened tcp socket telephone connection server like phone number unconnected socket corresponds number dial nected socket correspond actual call analogy break look closely way phone line actually conÔ¨Ågured typically doe number tcp originally deÔ¨Åned rfc important update rfc dated october miscellaneous update incorporated single speciÔ¨Åcation rfc principle principle spelled state effect transport issue bility endpoint question delegated core network idea inÔ¨Çuential tcp design issue falling category data corruption congestion Ô¨Årst tially link internet checksum protect data corruption tcp add checksum history data error introduced router tcp today essentially layer address congestion management saltzer reed clark categorized function subject principle way function question completely correctly implemented knowledge help application standing end point communication providing questioned function feature communication ble incomplete version function provided communication useful performance enhancement doe mean backbone internet concern congestion mean backbone mechanism completely replace congestion agement tcp header diagram tcp header udp source destination port bit data offset Ô¨Åeld speciÔ¨Åes number word header option present value udp checksum cover tcp header tcp data ip pseudo header includes source destination ip address checksum updated nat router modiÔ¨Åes header value ip tcp layer theoretically separate rfc place appears suggest tcp run internetwork layer rfc explicitly deÔ¨Ånes address pseudo header rfc ofÔ¨Åcially redeÔ¨Åned pseudo header allow address tcp transport basicsan introduction computer network release source port destination port sequence number acknowledgment number window size urgent pointer padding optionschecksum data offsetreservedc w c eu r g y np s ha c kr s tf sequence andacknowledgment number numbering data byte level allows tcp send block data incrementing sequence number successive packet send telnet packet incrementing sequence number time distinction data ack packet packet carrying data b carry current acknowledgment data sent b tcp application largely unidirectional case sender include essentially acknowledgment number packet receiver include essentially sequence number traditional refer data portion tcp packet segment tcp history division ip tcp header did spring forth fully formed discussion sequence number acknowledgment number appeared equivalent ip header used fragment reassembly value sequence number relative term position Ô¨Årst byte packet data stream position Ô¨Årst byte case data sent value acknowledgment number relative term represents byte position byte expected packet contains byte data Ô¨Årst byte number sequence number data byte position ack returned acknowledgment number sequence acknowledgment number sent represent relative value plus aninitial quence number isn Ô¨Åxed lifetime connection direction connection isn tcp acknowledgment cumulative endpoint sends packet acknowledgment number n acknowledging receipt data byte numbered standard tcp provides nism acknowledging receipt packet highest cumulative acknowledgment sent situation acknowledge packet tcp header deÔ¨Ånes important Ô¨Çag bit brief deÔ¨Ånitions expanded sequel synchronize mark packet handshake tcp header introduction computer network release indicates header acknowledgment Ô¨Åeld valid Ô¨Årst packet finish mark packet involved connection closing push mark packet delivered promptly far end reset indicates various error condition urgent mechanism data andece explicit congestion notiÔ¨Åcation mechanism explicit congestion notiÔ¨Åcation ecn tcp connection establishment tcp connection established exchange known handshake client b listening server handshake proceeds follows sends b packet syn bit set syn packet b responds syn packet ack bit set responds b s syn ack b syn ack tcp handshake normally handshake triggered application s request connect data sent handshake completes mean delay data sent original tcp standard rfc doe allow data sent Ô¨Årst syn packet handshake data released application handshake completes traditional tcp programming interface offer support option recurrent call tcp support data transmission handshake achieve turnaround comparable rpc remote procedure rpc return tcp faster opening handshake vulnerable attack known syn Ô¨Çooding attacker sends large number syn packet server arriving syn b allocate resource track appears legitimate connection request request b s resource face exhaustion syn Ô¨Çooding easiest syn packet simply spoofed forged untraceable address spooÔ¨Ång header isn spooÔ¨Ång attack form large number real connection attempt large number real client compromised pressed service earlier attack requires considerably resource tcp transport basicsan introduction computer network release attacker sctp alternative handshake protocol unfortunately available tcp intended mitigate attack spoofed syns toclose connection superÔ¨Åcially similar exchange involving fin packet occur sends b packet fin bit set fin packet announcing Ô¨Ånished sending data b sends ack fin b continue send additional data b ready cease sending sends fin sends b ack fin Ô¨Ånal packet exchange s ladder diagram b fin ack fin ackmore data optional typical tcp close fin handshake really like separate handshake return tcp connection closing closing connection let look exchange packet representative connection sends string abc defg foobar rfc b reply hello point sends goodbye close connection following table relative sequence number used say sequence number begin seq number bold correspond ack number bold b count data Ô¨Çowing b tcp connection establishment introduction computer network release sends b sends syn expecting ack ack syn abc ack defg foobar hello goodbye fin ack goodbye crossing packet ack fin fin ack fin table slightly idealized real sequence number notstart ladder diagram corresponding connection b syn ack abc ack defg ack foobar hello goodbye fin ack fin ackackcrossing packet term sequence acknowledgment number syns count byte fin syn count sequence number Ô¨Årst byte data abc count sequence number similarly sent b acknowledgment goodbye tcp transport basicsan introduction computer network release acknowledgment s subsequent fin b sends follows sending data tcp doe notin fact transport relative sequence number sequence number transmitted begin instead chooses initial sequence number orisn sends initial syn ack handshake acknowledgment server s syn response received correctly sequence number sent isn chosen plus relative sequence number sequence number numbering did begin chose isn add bold entry send syn b reply isn band line involve respectively similarly b chose isn add seqvalues b sends column ackvalues sends column table point b sends goodbye actual sequence number instead relative sequence number b syn ack abc ack defg foobar hello goodbye b listening port sent syn response rst reset meaning context connection refused similarly sent data b syn packet response rst finally rst sent time abort connection router path send spoofed rsts tear tcp connection conÔ¨Ågured regard undesired middleboxes andrfc worse external attacker able tear tcp connection spoofed rst requires guessing endpoint port number rst sender s current seq value rfc doe general require rst packet s ack value match exercise day kb window size guessing valid seq value chance window size steadily increased tcp problem mb window size make seq guessing quite feasible rfc Ô¨Åx proposed inrfc sends series small packet b b option assembling buffer releasing receiving application set psh bit packet b release packet immediately receiving application berkeley unix implementation fact way set psh bit set automatically write guaranteed sender leave bit consolidate pushed writes packet make using psh bit record separator difÔ¨Åcult series run program written generate wireshark packet trace time string abc defg etcwere pushed separately occasionally consolidated packet tcp connection establishment introduction computer network release urg bit imagine telnet ssh connection sent large data b momentarily stalled processing application wish abort processing sending interrupt character normal condition application b Ô¨Ånish processing pending data getting use urg bit enable immediate asynchronous delivery bit set tcp header s urgent pointer Ô¨Åeld point current packet far ahead normal data stream receiving application skip ahead processing arriving data stream reach urgent data work receiving application process signed receive asynchronous signal urgent data arrives urgent data doe appear ordinary tcp data stream protocol determine start data considered urgent unread buffered data sent ahead urgent data example telnet protocol rfc urgent data consist telnet interrupt process byte preceded interpret command escape byte earlier data simply discarded ofÔ¨Åcially urgent pointer value urg bit set contains offset start current packet data endof urgent data meant tell receiver read point soon original intent urgent pointer mark byte urgent data rfc got wrong declared pointed Ô¨Årst byte following urgent data corrected rfc implementation day abide incorrect interpretation rfc discusses proposes Ô¨Årst incorrect interpretation accepted standard second developer avoid use tcp feature tcp wireshark screenshot wireshark program displaying tcpdump capture intended represent tcp exchange host involved packet exchange linux system us socket yand b server us wireshark displaying relative tcp sequence number Ô¨Årst packet correspond way handshake packet Ô¨Årst data packet data packet Ô¨Çags psh ack displayed data packet inferred wireshark len Ô¨Åeld data string sent different length tcp transport basicsan introduction computer network release packet numbered table packet containing string foobar point table show b replying combined ack plus string hello fact tcp sent ack string hello wireshark packet note packet wireshark packet standalone ack b acknowledging hello wireshark packet packet highlighted corresponds table packet contains goodbye string seen right pane table view show s fin packet crossing b s ack goodbye packet shark view s fin packet sent second goodbye b acks packet packet doe exist wireshark view packet table wireshark screen dump correspond connection closing program generated exchange b s include sleep delay m detecting closed connection reading s fin closing connection sending fin ack s fin traveled packet b s fin isn example b s isn actual pcap capture Ô¨Åle pcap Ô¨Åle generated tcp connection physical machine alternative approach observing tcp behavior mininet wireshark demo tcp wireshark introduction computer network release tcp ofÔ¨Çoading wireshark example hardware involved used tcp checksum ofÔ¨Çoading tco card actual checksum calculation permit modest parallelism result checksum outbound packet wrong capture Ô¨Åle wireshark option disable reporting despite tco handle udp packet ethernet card ability calculate internet checksum error detection certain range byte store result taking complement designated offset card rule handle udp tcp pseudo header happens host calculates checksum store normal checksum Ô¨Åeld lan card includes checksum value checksum calculation correct result obtained possible newer card ofÔ¨Çoad tcp segmentation process lan hardware kernel sends large tcp buffer kb lan hardware tcp header lan hardware divide buffer multiple tcp packet byte useful application writing data continuously known tcp segmentation ofÔ¨Çoading tso use tso requires tco tso divided large send ofÔ¨Çoading lso outbound trafÔ¨Åc large receive ing lro inbound inbound ofÔ¨Çoading network card accumulates multiple inbound packet tcp connection consolidates proper sequence larger packet mean network card receiving packet wait wait short millisecond speciÔ¨Åcally consolidated incoming packet tcp timestamp value anomalous tcp scenario tso particular importance high bandwidth gbps send receive close million packet second ofÔ¨Çoading packet processing network card essential maintaining high throughput tso allows host behave reading writing large packet actual packet size wire remains standard byte linux system status tco tso checked using command ethtool interface tso disabled ethtool offload interfacetso tcp java version server tcp udp version start setting socket serversocket calledss socket remains listen state mainwhile loop begin start block incoming connection established point return connected child socket theaccept model tcp protocol behavior waiting handshake initiated remote host setting new connection connection accepted allip address server host egthe normal ip address loopback address server multihomed additional ip address unlike udp case udp ip address rfc requires server response packet sent server ip address client Ô¨Årst used contact server tcp issue alternative exercise example tcp transport basicsan introduction computer network release server application process connected child serially parallel stalk version handle situation connection time threading false creating new thread connection threading true way connected child socket turned synchronous procedure new thread data read socket s associated inputstream using ordinary read versus receive used read udp packet main loop doe terminate client close connection error serial mode second client connection Ô¨Årst active data sent second connection sits limbo Ô¨Årst connection close point control return second connection processed second connection s data suddenly appears threading mode main loop spends time waiting return child connection immediately spawn new thread handle allowing parent process allows program accept multiple concurrent client connection like udp version code serf basic example creation java thread inner class talker arun method needed implement runnable interface start new thread create new talker instance start begin run long client keep connection open Ô¨Åle threaded tcp server handle multiple concurrent client connection newline isto included client import import public class tstalks static public int destport static public int bufsize static public boolean threading true static public void main string args serversocket s socket s try s new serversocket destport catch ioexception ioe ca create server socket return server starting port true accept loop try s catch ioexception ioe ca accept continues page tcp introduction computer network release continued previous page break threading talker talk new talker s new thread talk s accept loop end main public static void socket s int port inputstream istr try istr catch ioexception ioe input stream √£√±likely cause s closed return new connection byte buf new byte bufsize int len true reading socket try len buf bufsize catch sockettimeoutexception ste socket timeout continue catch ioexception ioe bad read break probably socket abort treat asa close len break end closed gracefully string str new string buf len port str str contain √£√±newline whilereading s try catch ioexception ioe bad stream close √£√±return try catch ioexception ioe bad socket close √£√±return socket port port closed continues page tcp transport basicsan introduction computer network release continued previous page static class talker implement runnable private socket public talker socket s s public void run run class talker tcp client corresponding client udp version default host connect islocalhost Ô¨Årst perform dns lookup construction socket object connection desired dest destport main loop use ordinary write write string socket s associated outputstream tcp client injava import import public class stalkc static public bufferedreader bin static public int destport static public void main string args string desthost localhost desthost args bin new bufferedreader new inputstreamreader inetaddress dest looking address desthost try dest desthost catch unknownhostexception uhe unknown host desthost return got connecting port destport socket s continues page tcp introduction computer network release continued previous page try s new socket dest destport catch ioexception ioe connect desthost √£√±destport return outputstream sout try sout catch ioexception ioe failure return true string buf try buf catch ioexception ioe readline failed return buf null break user typed eof character buf buf protocol requires sender includes byte bbuf try bbuf catch ioexception ioe write failed return version stalk client available thing try server start client server running type message line exit Ô¨Årst client start client server tcp transport basicsan introduction computer network release start server client kill server type message line client happens client couple message line start server client kill server restart happens client try connecting multiple client simultaneously server doe behave differently Ô¨Årst example exercise tcp bind server version call serversocket constructor create socket listen state local port speciÔ¨Åed client version just call socket socket bound port operating possible create client socket bound speciÔ¨Åed port application enable internal Ô¨Årewalls identify trafÔ¨Åc class source port commonly client socket assigned ephemeral port linux ephemeral port range c socket created socket bound port bind placed listen state withlisten connected server connect client socket bind performed implicitly connect socket host connected tcp different server possible operating assign local port socket system exceptional number persistent outbound connection port reuse essential possible run local port said port reuse option bind called explicitly time bind operating doe know socket used tening unique local port necessary help deal linux socket option cause bind bind ip address socket defers port binding later connect apple o x provides connectx introduces similar functionality cloudÔ¨Çare blog post ephemeral port originally assigned sequence skipping value use mately wrapping make easy adversary predict number rfc proposed making Ô¨Årst try new number follows hash available subsequent try incremented value successively appropriate wrapping stay designated range isn spooÔ¨Ång related technique isn generation advantage speciÔ¨Åc remote socket local port incremented successively make port reuse unlikely entire range cycled different remote socket unrelated sequence making difÔ¨Åcult attacker guess connection s port unfortunately elegant scheme introduced unexpected problem enabled Ô¨Ångerprinting us lasted lifetime creation tcp bind introduction computer network release probe connection observing behavior value detail Ô¨Åx add timestamp hash argument increment failed port try random value netcat udp netcat use netcat utility act end tcp connection client use netcat localhost server use netcat udp cause server accept multiple connection sequence connection handled time case stalk server use netcat download web page using http protocol command sends http request version rfc update retrieve website book broken line convenience echo netcat represents ofÔ¨Åcially mandatory sequence work identiÔ¨Åes Ô¨Åle requested default omitted preceding required webserver support website virtual hosting nslookup dig thehost speciÔ¨Åcation identiÔ¨Åes server speciÔ¨Åc site looking version http described rfc primary format binary production retrieval web page curl wget standard choice tcp state diagram formal deÔ¨Ånition tcp involves state diagram condition transferring state response packet state state diagram originally appeared rfc following interpretation state diagram came http authored wikipedia user marty pauley dnetsvg blue arrow indicate sequence state transition typically followed server brown arrow represent client arrow labeled event action listen receipt syn packet action respond tcp transport basicsan introduction computer network release closed start listen syn receivedsyn step syn step unusual event path path simultaneous open step data exchange occurs established syn fin fin closing time wait closedfin wait fin wait wait fin ack timeout start active close passive close general approach protocol speciÔ¨Åcation proven effective used protocol make clear implementer respond packet arrival useful model implementation finally observe tcp layer operating easily modeled state machine respond immediately packet program event indeÔ¨Ånite waiting operating thing visually impractical list possible transition state diagram detail usually left accompanying text example doe appear state diagram state response rule tcp require established state receiver sends ack outside current sliding window correct response reply s current ack includes case receiver acknowledges data sent established state state called synchronized state state side conÔ¨Årmed s isn value ladder diagram connection described time labeled tcp state tcp state diagram introduction computer network release b syn ack abc ack defg ack foobar hello goodbye fin ack fin acklisten established closewait closedclosed established essentially occurs practice possible send syn ing connection simultaneously syns cross wire telephony analogue occurs party dial simultaneously traditional party get busy signal cell phone mileage vary tcp single connection created osi connection created osi approach possible tcp connection determined socketpair involved socketpair connection possible view connection state linux window netstat state ephemeral exception listen established timewait see large number connection meaning remote endpoint closed connection sent fin process end executed close socket represents programming error alternatively process local end working given local port number p state linux privileged command lsof pwill identify process using port reader implementing tcp encouraged consult rfc update rest general observation closing connection closing connection normal tcp close sequence follows tcp transport basicsan introduction computer network release b finack ack normal closefinestablished closedmore data optional ack data s fin effect promise b send prepared receive data b optional data shown diagram good example occurs sending stream data b sorted sends fin indicate sending doe b sort data begin sending generated command cat thefile ssh b sort said presence optional data following s fin relatively common diagram sends fin b receives ack later b sends fin receives ack essentially amount separate closure handshake elect close connection just party telephone elect hang Ô¨Årst send fin diagram take active close path take passive close path diagram move state established receipt b s ack s fin timewait Ô¨Ånally closed b move established closed asimultaneous close having side send fin receiving s fin little likely simultaneous open earlier send fin state receiving s fin packet send Ô¨Ånal ack closing exercise tcp endpoint sent fin promising send data waiting s fin corresponds diagram state bsd socket library application connection appropriate toshutdown unrelatedly tcp endpoint established state lull exchange packet rebooted close protocol soon established sends packet rebooted respond rst connection fully closed absence optional data b sends fin closing sequence reduces diagram tcp state diagram introduction computer network release b fin ack fin ack tcp close scenario dataa b fin ack b ready close immediately possible b s ack fin combined hand diagram case resultant diagram superÔ¨Åcially resembles handshake case move directly timewait following link labeled fin theory rare ack s fin generated kernel b s fin sent b s process scheduled run cpu tcp layer adopts policy immediately sending acks receipt packet happen ack sent b s process scheduled b delay acks slightly data send possible fact uncommon b s ack fin sent delayed acks shall common strategy tcp delayed acks create scenario tcp wireshark necessary introduce artiÔ¨Åcial delay prevent simultaneous transmission b s ack fin calling close network programming interface provide close method ending connection based close operation Ô¨Åles usually close bidirectionally model tcp closure protocol imperfectly seen previous section tcp close sequence followed naturally closing endpoint call shutdown promising send allowing continued receiving Ô¨Ånal close happen application layer endpoint tcp connection wish initiate closing connection endpoint b s application call shutdown promising send data s fin sent s application expected continue reading connection receipt s fin b s tcp layer know b s application attempt read data receive indication typically read recv operation return immediately byte received b s application reading data data send b s application sending call close point b s fin sent connection b s close really second ending transmission b s application keep reading receives indication corresponding b s fin tcp transport basicsan introduction computer network release connection fully closed data lost case evident application protocol b send data case simply close instead ofshutdown risky unless protocol crystal clear call close b later doe send little data b sent data actually read s tcp layer send rst b indicate b s data received properly rfc put way host issue close received data pending tcp new data received close called tcp send rst data lost s rst arrives b s sent data processed b s application entirely possible data sent lost read bsd socket library set option cause s close block s data delivered b timeout provided user setting option expired bearing issue data b cause send rst program tcp client doe shutdown implicitly callsclose exit client server call fact data sent server client prevents problem discussed case expected send large data b exit byte bbuf byte bbuf java outputstream attached socket s case close supposed result sending data actually terminating connection rfc put way closing connection intended graceful operation sense outstanding sends transmitted retransmitted Ô¨Çow control permit serviced linux interpretation given socket man page socket closed exit lingers background linger time speciÔ¨Åed explicit close beforeexit status determines tcp s behavior alternatively send data attempt read socket receive indication typically byte read soon endpoint b close b wait close read data indication mean safe b equally shutdown immediately startup doe intend write data case s received notan indication safe close exercise tcp state diagram introduction computer network release epilog point covered basic mechanic tcp chapter discusses thing subtle issue tcp deal order maintain reliability exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise experiment tcp version doe server respond differently ing enabled simultaneous attempt connect different client stance trace state visited node b attempt create tcp connection simultaneously sending syn packet cross network draw ladder diagram label state hint pair crossing packet count state diagram ack suppose node b nat Ô¨Årewall network address translation internet b b attempt connect using tcp us source port b us sends public address port b sends port assume change port number outgoing packet packet involved connection attempt suppose sends syn packet rejected connection initiated short later b sends syn packet explain second syn packet isdelivered b suppose b attempt connect simultaneously sending syn connection succeeds node b simultaneously attempt connect using osi protocol bidirectional network connection created tcp explain semantics impossible existing tcp header hint packet xa arrives atxb receiver tell possible connection belongs b propose additional Ô¨Åeld tcp header allow implementation semantics simultaneous connection initiation rare simultaneous connection termination relatively common tcp node negotiate simultaneous sending fin packet draw ladder diagram label state node go timewait state hint pair crossing packet state diagram tcp state diagram show dashed path timewait receipt fin packet contain valid ack Ô¨Åeld meant circumstance direct arc timewait taken explain arc used simultaneous close hint consider ladder diagram normal close tcp transport basicsan introduction computer network release suppose multiple connection workstation state likely going fault b going connection languishing state suppose downloading Ô¨Åle client host unplugged network send packet server s connection established state case use tcp state diagram list state reachable server unplugged client state established ieit notsent Ô¨Årst fin b unplugged client sent fin moved eventually server connection fact transition closed repeated timeouts exercise assume transition explicitly shown state diagram allowed tcp connection establishment noted rst packet valid seq value rfc doe require rst packet s ack value match exception rst packet arriving state rst acceptable ack Ô¨Åeld acknowledges syn explain reasoning exception suppose b create tcp connection isn isn sends byte packet b acks b sends packet datab terminates connection fin table Ô¨Åll seq ack Ô¨Åelds packet shown sends b sends syn isn syn isn ack ack ack ack datab ack fin suppose downloading large Ô¨Åle progress bar showing Ô¨Åle downloaded deÔ¨Åniteness assume progress bar move mm megabyte received application throughput average mb second progress bar normally advance rate progress bar stop advancing interval time suddenly jump forward mm resume steady advance explain jump term lost packet subsequent timeout retransmission exercise introduction computer network release b approximate value connection winsize assuming packet lost suppose creating software site want limit video gap downloaded viewer actually watched approximately mb server pause sending necessary enforce hand want receiver able read ahead assume tcp connection throughput higher actual rate suppose tcp window size happens exactly mb receiver simply read video frame tcp connection display pause brieÔ¨Çy reading frame accordance frame rate explain mechanism tcp flow control achieve desired effect b application control tcp window size suppose receiver application read mb ahead displayed stop reading displayed explain tcp mechanism soon cause sender stop sending speciÔ¨Åcally sender send ahead necessary possible implement sender pause protocol modify server tcp break thewhile loop soon printed Ô¨Årst string received simply remove loop thewhile loop existing code call start modiÔ¨Åed server connect client send single message line use netstat examine tcp state client server state b send message line server tcp state client server c send message line server error message client d send message line server monitoring packet wireshark wireshark Ô¨Ålter expression useful eliminating irrelevant trafÔ¨Åc fin packet rst packet outline scenario tcp endpoint sends data b call close socket connection terminates b received data network failed style tcp client s code look like tcp transport basicsan introduction computer network release s new socket dest destport sout hint calling close exercise introduction computer network release tcp transport tcp issue alternative chapter cover issue relating tcp reliability technical issue relating tcp efÔ¨Åciency Ô¨Ånally outright alternative tcp tcp old duplicate conceptually threat facing integrity tcp data external old duplicate fundamental transport issue late packet previous instance connection suppose tcp connection opened packet b duplicated unduly delayed sequence number connection closed instance reopened connection created using port point second connection arriving packet acceptable b old duplicate show later course b likely receive packet new instance connection packet seen b duplicate data doe match assume ignored syn fin ackack syn ackfirst instance connection second instance connection b mistakenly accepts old duplicate instancedelayed duplicate packet redport port b tcp actual sequence number relative sequence number match diagram ignores tftp coming possible scenario accounting generation late packet easy nonetheless design detail tcp represent attempt minimize risk introduction computer network release solution problem generally involve setting upper bound lifetime packet msl shall section tcp faster opening introduced Ô¨Åeld tcp vulnerable wraparound arrival old duplicate instance connection msl second wrap requires sending second requires rate excess mbps tcp offer Ô¨Åx protection wrapped segment paw introduced relatively late return anomalous tcp scenario timewait timewait state entered whichever initiate connection close event neous close side enter timewait time msl maximum segment lifetime value maximum lifetime internet ip packet ally msl taken second modern implementation assume second timewait period second function timewait solve problem timewait requires closing reopening connection long interval pas packet Ô¨Årst instance disappear expiration timewait interval old duplicate arrive second function timewait address problem fundamental transport issue host sends Ô¨Ånal ack host b lost b eventually retransmit itsÔ¨Ånal packet fin long remains state timewait appropriately reply retransmitted fin b duplicate Ô¨Ånal ack tftp possible unlikely Ô¨Ånal ack lost retransmitted Ô¨Ånal fin sent timewait period happen think connection closed normally think did exercise timewait block reconnections side reuse port used connects b close connection free connect b using different port s end conceptually host old connection port simultaneously timewait host maintain port list remote port ysockets currently timewait port host connecting client list likely list recently used port port likely used twice timewait interval host server accepting connection standardized port happens initiate active close later go timewait timewait list port grow quite long generally busy server prefer free bookkeeping requirement timewait protocol designed client initiate active close original http protocol version server sent data stream requested http message netcat indicated end stream closing connection http Ô¨Åxed client initiated close required new mechanism server indicate sending Ô¨Åle http used new mechanism allow server send multiple Ô¨Åles connection environment connection host port server b port exhaustion having port tied timewait theoretical possibility make tcp issue alternativesan introduction computer network release connection second second gone available port essentially left rate high early tcp implementation port available client timewait interval port exhaustion occur connection second use ssh connect server issue netstat command host conveniently netstat tcp connection established state close connection check connection timewait handshake revisited stated earlier tcp connection establishment side choose isn actual sequence bers sum sender s isn relative sequence number original reason mechanism later isn spooÔ¨Ång original tcp speciÔ¨Åcation clariÔ¨Åed rfc called isn determined special clock incremented microsecond basic reason using isn detect duplicate syns suppose initiate connection b sending syn packet b reply lost time retransmits syn b receives s second syn state doe represent entirely new request suddenly restarted duplicate us isn strategy b tell certainly s second syn new duplicate case isn value syns match danger data integrity sends syn restarts sends syn reopening connection arrival second syn new isn mean original connection proceed isn wrong receiver duplicate syn drop connection state recorded far restart processing second syn scratch isn originally added second layer protection external old duplicate suppose open connection b chooses isn n transfer m byte data closed connection reopens isn n n m n problem occur absolute sequence number used Ô¨Årst instance connection equal n m absolute sequence number used second instance greater n early implementation socket library allowed second connection meeting isn requirement reopened timewait expired potentially addressed problem port exhaustion timewait connection reuse course Ô¨Årst instance connection transferred data faster isn clock rate n m greater n timewait enforced era tcp Ô¨Årst developed sustained transfer exceeding common alternatively connection timewait allow incoming connection reuse port case host timewait choose isn greater Ô¨Ånal absolute sequence number previous instance connection second alternative allowed handshake extensively analyzed dalal sunshine author noted handshake second receives conÔ¨Årmation isn correctly received handshake revisited introduction computer network release author observed handshake ack isn ai sent separately isn b diagram fail restarted b synack ack possible handshake secure versionsyn failure occur assume sending syn line isn restarts ack line ignored received b sends syn line interprets new connection request respond line sending Ô¨Åfth syn packet containing different isn b connection established b acknowledges Ô¨Åfth packet fails update record s isn connection fail b different notion isn isn spooÔ¨Ång isn proved signiÔ¨Åcant weakness allowed attacker guess isn remote host use did help early version berkeley unix instead incrementing isn time second incremented second plus connection guessing isn remote host choose attacker able mimic local trusted host gain privileged access speciÔ¨Åcally suppose host trust neighbor b executes privileged status command sent b situation typical era rhost command authenticates command connection come b s ip address bad guy m want send packet pretend b privileged command invoked connection need started ruse discovered command executed late m easily send syn packet b s ip address Ô¨Åeld m probably temporarily disable b s response sent b go unnoticed harder m Ô¨Ågure guess ack isn generates isn slowly incrementing clock m guess pattern clock previous connection attempt guess isn awith considerable degree accuracy m sends syn b source sends b containing isn m guess value sends ack isn b listed ip header source followed command technique Ô¨Årst described robert t morris morris went launch internet worm using unrelated attack technique used christmas day attack ucsd launched loyola s attack associated kevin mitnick apparently actually carried mitnick arrested month later rfc introduced technique introducing degree randomization isn selection ensuring isn used twice row connection isn tcp issue alternativesan introduction computer network release sum clock c t secure hash connection information follows compare algorithm tcp bind isn c t hash value random value chosen host startup m poll current isn probably guess hash function Ô¨Årst parameter knowing key determine easily guess isn value sent legitimate connection b using port end hand isn increasing rate potentially increase chance successful application timewait connection reuse handshake revisited rfc address spooÔ¨Ång related attack introducing optional tcp authentication nism tcp header includes option containing secure hash secure hash rest tcp header shared secret key need key management limit mechanism used classic use case bgp connection router border gateway protocol bgp approach prevention spooÔ¨Ång attack ask site isps refuse forward outwards ip packet source address site isp attacker s isp implement attacker unable launch spooÔ¨Ång attack outside world concrete proposal rfc unfortunately entirely ignored discussion syn Ô¨Çooding tcp connection establishment attack doe involve isn manipulation anomalous tcp scenario tcp like transport protocol address transport issue fundamental transport issue saw tcp address duplicate connection request duplicate syn issue noting isn changed handled kernel level tcp versus tftp s desultory approach handing duplicate rrqs tcp address loss final ack timewait long timewait period expired Ô¨Ånal ack lost resends Ô¨Ånal fin tcp able reissue Ô¨Ånal ack timewait sense serf similar function tftp s dally state external old duplicate arriving previous instance connection prevented wait prevented use isn internal old duplicate instance connection sequence number wraparound issue bandwidth exceeding mbps bandwidth gb sent msl tcp implementation address paw protection wrapped segment rfc paw add timestamp option tcp header granularity timestamp clock left unspeciÔ¨Åed tick small sequence number wrap interval egless second mbps large timestamps wrap time msl linux system timestamp clock granularity typically m measurement author s system timestamps old duplicate wraparound easily detected anomalous tcp scenario introduction computer network release paw mechanism requires ack packet echo sender s timestamp addition including allows sender accurately measure time reboots potential problem host presumably record aborted connection need remain timewait tcp address paper requiring host implement quiet time startup new connection accepted msl known implementation actually instead assume restarting process msl longer certain consequence ensued tcp faster opening client want connect server send request receive immediate reply tcp mandate rtt handshake data delivered make tcp rtt slower protocol periodic call allow tcp client include data Ô¨Årst syn packet andhave delivered immediately arrival known accelerated open series request reply simplest way deliver data handshake delay pipeline request reply persistent connection handshake delay applies Ô¨Årst request pipeline connection idle interval closed reopened later necessary early proposal tcp transaction speciÔ¨Åed rfc introduced connection count tcp option called cc participant include cc value syn participant s cc value monotonically increasing accelerated open allowed server client s previous cc cache new cc value strictly greater cached value ensured new syn duplicate older syn unfortunately bypass detection modest validation client s ip dress provided handshake worsening spooÔ¨Ång problem isn spooÔ¨Ång malicious host m want pretend b sending privileged request m send single packet extremely large value cc generally accelerated open succeeded long cc value presented larger value cached b did larger exactly tcp fast open tcp fast open tfo mechanism described rfc involves secure cookie sent client tcp option packet valid cookie client satisfactorily established identity data released immediately receiving application cooky byte probably necessarily corresponding requested client previous tcp handshake option syn packet client includes cookie syn packet subsequent connection data accompanying syn packet immediately released server application handshake completes data doe wait cookie reused multiple time cooky expiration time speciÔ¨Åc client ip address tcp port used implementation option tcp issue alternativesan introduction computer network release server use encryption hashing client ip address model cookie expires encryption key expires cooky requested ahead time tcp fast open fundamentally faster option holding tcp connection open us resource simply storing cookie likely application tcp fast open accessing web server web client server persistent connection open amount second tcp fast open cooky remain active longer potential use dns query established mechanism connection reuse practical problem tcp fast open middleboxes middleboxes remove tcp option understand block connection attempt entirely consequence client attempting use tfo log failure attempt reuse tfo appropriate time interval syn Ô¨Çooding attack possible example large number compromised client obtain cooky legitimately reuse cookie time short order alternatively cookie oneclient distributed large number host spoof original client s ip address minimize impact attack tfo requires option ignored number pending fast open exceeds given threshold connection open normally data delivered server application handshake completed finally tfo doe introduce small possibility duplicate data delivery consider example lowing sequence client sends syn valid tfo cookie data ack server lost sent server process data server reboots client time retransmits arrives server duplicate data arriving Ô¨Ånal step processed server likely client server handle possibility duplication tfo used particular possible enable disable tfo basis course request conveyed idempotent sun rpc duplication matter alternative scenario involves client sending packet closing connection client go timewait server packet get duplicated network duplicate arrives server scenario unlike Ô¨Årst prevented arranging server s key invalid reboot path mtu discovery tcp connection efÔ¨Åcient large packet Ô¨Çowing endpoint time tcp endpoint included just byte data packet destined local delivery avoid fragmentation tcp endpoint typically engage path mtu discovery path mtu discovery introduction computer network release allows send larger packet backbone isps usually able carry packet path mtu largest packet size sent path fragmentation strategy send initial data packet bit set icmp message come packet time sender try smaller size sender receives tcp ack packet hand indicating end try larger size usually size range byte covered dozen discrete value point Ô¨Ånd exact path mtu determine reasonable approximation rapidly bit path mtu discovery involves periodic sending larger packet message packet big received smaller packet size used rfc detail tcp sliding window tcp implement sliding window order improve throughput window size measured term byte packet leaf tcp free packetize data segment size elect initial handshake speciÔ¨Åes maximum window size willing accept thewindow size Ô¨Åeld tcp header Ô¨Åeld kb gbps m product mb result tcp window scale option negotiated opening handshake scale option speciÔ¨Åes power multiplied actual window size value wireshark example client speciÔ¨Åed window size Ô¨Åeld packet window scale value Ô¨Årst packet effective window size segment byte server speciÔ¨Åed window size scaling factor tcp transmit bulk stream data using sliding window fully send slowly generated interactive data case tcp segment outstanding following chapter sender frequently reduces actual tcp window size order avoid congestion window size included tcp header known advertised window size startup tcp doe send window us mechanism called slow start tcp delayed acks tcp receiver allowed brieÔ¨Çy delay ack response new data offer beneÔ¨Åt interactive application exchange small packet ssh telnet sends data packet b expects immediate response delaying b s ack allows receiving application b time wake generate response sent b s ack delayed acks kernel layer b send ack receiving application b scheduled run response packet small double total trafÔ¨Åc maximum ack delay m according rfc andrfc m common bulk trafÔ¨Åc delayed acks simply mean ack trafÔ¨Åc volume reduced acks cumulative ack receiver principle acknowledge multiple data packet sender unfortunately acknowledging data packet ack interfere tcp issue alternativesan introduction computer network release aspect sliding window arrival ack trigger burst additional data packet transmitted regular interval rfcs specify ack sent minimum data packet discussion sender respond delayed acks tcp reno response tcp time usually adjusted globally parameter linux offer option Ô¨Çag setsockopt disable delayed acks basis tcp including read writes invoked immediately receive operation disable delayed acks entirely option portable tso option tcp ofÔ¨Çoading used receiver reduce number acks sent arriving data packet consolidated tso single packet receiver appear sender acknowledging data packet ack delay introduced tso usually quite small nagle algorithm like delayed acks nagle algorithm rfc attempt improve behavior interactive application speciÔ¨Åes tcp endpoint generating small data segment segment maximum size queue accumulates segment s worth receives ack previously sent packet small threshold reached sender mean segment sent rtt containing data generated rtt bandwidth conservation delayed acks nagle algorithm originated bygone era bandwidth shorter supply today rfc john nagle writes tcp reno tcp reno congestion management general able afford luxury excess bandwidth arpanet possesses link heavily loaded peak period transit time second common today unlikely modest number small packet cause detectable let signiÔ¨Åcant problem said abandoning nagle algorithm potential unleash internet backbone large number small packet suggests mistake stop using example suppose wish send b packet containing consecutive letter starting application generates m rtt transmits application continues generate b c d e f time m m doe send immediately m ack arrives point transmits backlogged bcdef ack arrives point queued ghijk end result sends Ô¨Åfth separate packet nagle algorithm letter generated user typing telnet acks include echoed response user pause echoed response soon catch nagle algorithm doe interact delayed acks application generates kb transaction divided packet followup small packet nagle algorithm mean second packet sent Ô¨Årst acknowledged receiver nagle algorithm introduction computer network release using delayed acks wait m send ack allows second packet sent delay entire transaction time worse happen lengthy series transaction internet draft proposed modiÔ¨Åcation nagle s algorithm address effect allowing sender send onesmall packet receiving acknowledgment compensate possibility receiver need receive small packet sends ack speciÔ¨Åcally modiÔ¨Åcation forbid sending small packet long earlier unacknowledged small packet outstanding versus original rule forbidding sending small packet long anyearlier unacknowledged packet small example exercise Ô¨Årst example nagle algorithm surprising consequence nagle algorithm usually disabled basis bsd socket library calling setsockopt Ô¨Çag tcp flow control possible tcp sender send data faster receiver process happens tcp receiver reduce advertised window size value open connection informing sender switch smaller window size provides support Ô¨Çow control reduction appears acks sent receiver given ack supposed reduce window size upper end window get smaller window shrink byte range tcp receiver us technique shrink advertised window size mean sender send data receiver informed sender yes data received sent corresponds ack wait suggested flow control eventually receiver ready receive data send ack increasing advertised window size tcp sender window size reduced ack receiver increasing window lost connection deadlocked tcp special feature speciÔ¨Åcally avoid window size reduced zero sender sends dataless packet receiver regular interval polling packet elicits receiver s current ack end result sender receive eventual announcement reliably polling packet regulated persist timer silly window syndrome syndrome term scenario tcp transfer small amount data time packet minimum Ô¨Åxed header size byte sending small packet us network inefÔ¨Åciently syndrome occur receiving application consuming data slowly sending application generating data slowly example involving receiver suppose tcp connection window size byte receiving application consumes data byte time interval equal rtt following happen sender sends byte receiving application consumes byte numbered receiving tcp buffer remaining byte sends ack reducing window size tcp issue alternativesan introduction computer network release tcp flow control receipt ack sender sends byte numbered permitted meantime receiving application consumed byte window size remains ack sender sends byte application consumes byte window size remains sender end sending byte time indeÔ¨Ånitely beneÔ¨Åt sender send larger packet standard Ô¨Åx set forth rfc receiver use acks window consumed packet s worth half window small window size point sender invited appropriate advertisement ack send packet data syndrome occur sender generating data slowly say byte time nagle algorithm used prevent interactive application sending small amount data separate closely spaced packet actually useful tcp timeout retransmission tcp sends packet containing user data excludes packet set timeout timeout expires packet data acknowledged retransmitted acknowledgment sent arriving data packet unless delayed acks implemented tcp delayed acks amount packet loss acks cumulative later ack replace earlier lost acks seldom problem tcp work connection rtts ranging m close second length timeout interval adapt tcp manages maintaining running estimate rtt estrtt original version tcp set timeout literature tcp timeout value known rto retransmission timeout estrtt running average periodically measured samplertt value according estrtt ùõº Ô¨Åxed ùõº ùõº typical value ùõºmight ùõºclose conservative estrtt slow change ùõºcloser estrtt volatile potential rtt measurement ambiguity packet sent twice ack received response Ô¨Årst transmission second algorithm resolve packet loss retransmission sender double timeout stop recording samplertt us doubled timeout estrtt thing resume setting timeout proved short congestion period long time jacobson karels introduced way calculating timeout value based statistical variability estrtt samplertt value collected sender update estdeviation according tcp timeout retransmission introduction computer network release sampledev samplertt estrtt estdeviation ùõΩ Ô¨Åxed ùõΩ ùõΩ timeout set estrtt estdeviation estimate mean deviation mean deviation corresponds normally distributed data standard deviation samplertt value normally distributed mean chance packet arrive outside timeout period vanishingly small detail implementation tcp sender maintains just retransmission timer matter packet outstanding recommended algorithm rfc packet sent timer running restart time timeout ack arrives acknowledges outstanding data turn timer ack arrives acknowledges new data outstanding data reset timer time timeout sender transmits steady stream packet lost clause ensure timer Ô¨Åres desired series earlier acks arrives slowly just fast resetting timer lost packet time multiple timeout elapsed ideal considered exercise keepalive reason tcp connection idle long period time connection example unused day problem workstation telnet server shut shut gracefully end day connection server generate trafÔ¨Åc detect connection continue tie resource keepalive action evening long ago dialed yes long ago internet phone line disconnected typing email message ssh window dutifully reconnected expecting Ô¨Ånd message Ô¨Åle happened disconnected using tty dialup ala reconstructed email best logged morning lost email Ô¨Åle dated hour initial crash happened apparently original ssh connection server just hung hour keepalive kicked aborted connection point ssh sent mail program hangup signal mail program wrote avoid tcp support optional keepalive mechanism poll dataless packet original rfc keepalive timeout hour reduced minute connection failed keepalive test closed tcp issue alternativesan introduction computer network release supposedly tcp implementation exactly rfc keepalives abled default keepalive interval smaller called speciÔ¨Åcation tcp timer summarize tcp maintains following kind timer maintained single timer list timer timeout value vary widely timewait timer timer used poll receiving end winsize variant alternative alternative tcp udp timout retransmission rpc plementations remote procedure rpc exactly reasonable result lan static timeout half second usually work quite unless lan tunneled link implementation simple mechanism quite straightforward plementing adaptive timeouts tcp timeout retransmission bit complex quic quic example strategy consider protocol Ô¨Årst mptcp based tcp second sctp alternative tcp entirely separate protocol dccp quic attempt create transport layer udp mptcp multipath tcp mptcp allows connection use multiple network interface host tially simultaneously mptcp architectural principle outlined rfc implementation detail rfc carry actual trafÔ¨Åc mptcp arranges creation multiple subÔ¨Çows sending receiving host subÔ¨Çows typically connect different pair ip address respective host example connection server start using client s wired ethernet interface continue user unplugged client move range connection continue mobile network alternatively mptcp allows parallel use multiple ethernet interface client server higher throughput mptcp ofÔ¨Åcially forbids creation multiple tcp connection single pair interface order simulate highspeed tcp highspeed tcp rfc spell mwtcp control algorithm enforce tcp timer introduction computer network release suppose host interface ip address wish connect host b ip dress b b connection establishment proceeds ordinary tcp handshake s ip address say b s b syn packet carry tcp option signal mptcp supported option b exchange pseudorandom connection key sent unencrypted used sign later message secure hash authentication Ô¨Årst connection initial subÔ¨Çow mptcp initial subÔ¨Çow established additional subÔ¨Çow connection usually initiated client b point doe know b s address b possible second subÔ¨Çow b new subÔ¨Çows carry option initial syn packet digital signature signed original connection key verifying new subÔ¨Çow mptcp connection point b send data using connection simultaneously track data maintains data sequence number dsn data sends maintains mapping dsn subÔ¨Çow sequence number example send block data alternating block dsn value carry block numbering consecutively sequence number side exchange dsn mapping information ds tcp option mechanism mean data transmitted mwtcp connection delivered proper order subÔ¨Çow fails data retransmitted subÔ¨Çow b inform second ip address b using option course possible b directly reachable example nat router b open subÔ¨Çows work equally s address nat router simply nat router able properly forward subÔ¨Çow tcp connection address sent host b s transmission address b rendered invalid nat case s attempt open connection b fails generally host conÔ¨Ågured use multiple subÔ¨Çows parallel use interface backup primary interface unplugged range apis proposed allow control mptcp behavior basis sctp stream control transmission protocol sctp entirely separate protocol tcp running rectly ip effect alternative tcp application writes sequence message sctp delivers unit fragmenting reassembling necessary like tcp sctp reliable sctp us form sliding window like tcp adjusts window size manage congestion sctp connection support multiple message stream exact number negotiated startup retransmission delay stream block delivery stream stream sctp message sequentially numbered normally delivered order message number receiver request receive message immediately successful delivery potentially order way data message guaranteed delivered order loss tcp issue alternativesan introduction computer network release internally message data divided sctp chunk inclusion packet sctp packet contain data chunk different message different stream packet contain control chunk message quite large set limit large message need received multiple call egcalls torecvmsg sctp support feature endpoint use multiple network interface sctp connection set using handshake versus tcp s handshake extra packet provides protection syn Ô¨Çooding tcp connection establishment central idea client initiate connection request server b b allocates resource connection b received response message mean minimum real host real ip address handshake client server b brief follows sends b init chunk corresponding syn pseudorandom tag b sends init ack tag band state cookie state cookie contains information b need allocate resource connection digitally signed secure hash authentication key known crucially b doe notat point allocate resource incipient connection return state cookie b cookie echo packet b enters established state sends cookie ack receipt enters tablished state b receives cookie echo veriÔ¨Åes signature point b know sent cookie received response exist doe b allocate memory resource connection spoofed inits Ô¨Årst step cost b essentially tag aand tag bin Ô¨Årst packet called veriÔ¨Åcation tag point b clude tag ain packet sends tag sent unencrypted nonetheless make harder attacker inject data connection data included fourth packet iea begin sending data rtt unfortunately potential sctp application nat router recognize sctp limit use sctp internet path nat used principle sctp simplify delivery web page transmitting page component message lack nat support make infeasible sctp blocked middleboxes middleboxes ground unknown protocol suspect quite common nat problem common prevent widespread adoption sctp general internet sctp iswidely used telecommunication signaling provider nat recalcitrant middleboxes banished dccp saw dccp dccp transport protocol support thing connection establishment used tcp provides alternative example transport variant alternative introduction computer network release dccp deÔ¨Ånes set distinct packet type tcp s independent packet Ô¨Çags disallows unforeseen combination tcp connection establishment involves request respond data transmission involves data ack dataack teardown involves closereq close reset example respond packet carry acknowledgment Ô¨Åeld like tcp dccp us handshake open connection diagram b request response ack dccp handshake fourth packet data ack considered handshake request partopenlisten respond open opendata ack open state corresponds tcp s established state like tcp chooses isn shown diagram packet delivery reliable acks cumulative client remains partopen state conÔ¨Årmed server received ack server s response state partopen client send ack dataack data packet packet numbered sequentially numbering includes packet just data packet packet byte dccp state diagram shown simpler tcp state diagram dccp doe support simultaneous open tcp issue alternativesan introduction computer network release closed openlisten respondrequest partopen closereq closing timewait closedopen request response ack request response ack ack open server close closereqserver client client close close reset close reset close reset msl timer dccp state diagram close connection sends close responds reset reset used normal close exceptional condition sends close stuck timewait server send closereq ask client send close special packet format sync syncack resynchronizing sequence number burst lost packet major feature supported dccp congestion control dccp congestion control quic revisited like dccp quic quic transport protocol aimed squarely http plus tl tl fundamental goal quic provide tl encryption protection little overhead possible manner competes fairly tcp presence congestion opening quic connection encryption included take single rtt quic seen variant alternative introduction computer network release complete rewrite tcp ground reading speciÔ¨Åc feature shed quite bit light corresponding tcp feature fared past year quic Ô¨Ånally edited rfc status property quic quic multiplexed secure transport good overview using tl secure quic quic loss detection congestion control us quic base quic began ofÔ¨Åcially rfc published june quic s standardization represent beginning end tcp given internet connection http http tcp design issue tcp reno congestion management dynamic tcp newer tcp implementation carry naturally quic shift tcp quic best viewed evolutionary token standardization presumably represents beginning end year ago design quic inÔ¨Çuenced fate sctp new protocol ip blocked overly middleboxes middleboxes fact quic layer resides application library kernel meant quic able evolve faster tcp consequence having transport layer live outside kernel completely clear example make easier user install unfair scheme header start quic header alternative form basic header agrammed type Ô¨Åeld connection id version packet number Ô¨Åelds connection id version packet numbertype typical quic long headerpayload striking thing header alignment used consistently tcp issue alternativesan introduction computer network release udp tcp header completely abandoned contemporary processor performance advantage alignment negligible paragraph header ip packet identiÔ¨Åed ethernet type Ô¨Åeld tcp udp packet identiÔ¨Åed protocol Ô¨Åeld quic packet notidentiÔ¨Åed Ô¨Çag preceding ip udp header fact place header quic marker quic appears observer just form udp trafÔ¨Åc act form middlebox defense quic packet identiÔ¨Åed isolation wireshark sidebar identiÔ¨Åes quic packet looking history connection make educated guess middleboxes work initial connection id consists random bit chosen client server ing connection change connection id point connection id Ô¨Åxed lifetime connection connection id omitted packet connection determined associated ip address port value signaled type Ô¨Åeld connection id used migrate connection different ip address port happen mobile device move range plan continues tion happen connection pass nat router nat forwarding entry time comment udp inactivity network address translation connection assigned different outbound udp port later resume quic us connection id recognize reassigned connection theversion Ô¨Åeld get dropped soon version negotiated version negotiation packet multiple version Ô¨Åelds packet random value seven bit thetype Ô¨Åeld prevention middleboxes blocking unknown type way aggressive middlebox behavior discovered early widespread quic packet observed wireshark using Ô¨Ålter string quic generate quic trafÔ¨Åc use browser site say encrypted Ô¨Åelds type Ô¨Åeld packet number necessary enable quic browser chrome chrome chrome packet number reduced byte connection established signaled thetype Ô¨Åeld internally quic us packet number range internal number allowed wrap bit bit bit internal number transmitted packet header packet receiver infers bit recent acknowledgment initial packet number chosen randomly range corresponds tcp s use initial sequence number use transmitted packet number restricted case ambiguity minimum mean number outstanding packet quic winsize exceed packet numbering packet numbering maximum winsizes represent ideal case packet reordering smaller value likely used practice exercise exercise variant alternative introduction computer network release frame stream data quic packet partitioned frame frame s data preÔ¨Åxed ple frame header indicating length type frame contain management information frame containing data called stream frame frame fully contained packet application s data divided multiple stream depending application requirement particularly useful http client request large number different resource html image javascript simultaneously stream data contained stream frame stream bered stream reserved tl cryptographic handshake protocol introduced notion stream map neatly quic stream bit stream number indicate stream initiated client server design decision mean create stream send data immediately negotiation important reducing unnecessary rtts individual stream guaranteed delivery ordering guarantee ent stream packet data particular stream contained frame stream packet contain stream frame multiple stream packet lost stream frame contained packet blocked retransmission stream continue interruption creates incentive keeping separate stream separate packet stream frame contain byte offset frame s block stream data starting enable stream reassembly tcp seen us approach exclusively starting initial sequence number zero quic s numbering byte unrelated numbering packet addition stream frame large number management frame like tcp rst stream corresponds tcp advertised window size tcp reduced zero pause Ô¨Çow data implement Ô¨Çow control similar applying stream andpong verify endpoint responding serve equivalent tcp keepalives thing initiate termination connection differ accompanied error explanation message accompanied say http messge pad packet larger size acknowledgment acknowledgment quic assigns new sequential packet number packet id packet including sion tcp comparison assigns sequence number byte quic stream frame number data tcp issue alternativesan introduction computer network release byte noted lost quic packet retransmitted new packet number make impossible receiver send cumulative acknowledgment lost packet acknowledged receiver handle sender sender maintains list packet sent unacknowledged known lost represent packet Ô¨Çight packet retransmitted old packet number removed list lost new packet number replaces extent possible given policy quic follows spirit sliding window maintains state variable corresponding tcp s winsize listing total size packet Ô¨Çight tcp new acknowledgment allow new transmission acknowledgment sent special acknowledgment frame begin number highest packet received followed list pair long Ô¨Åt frame consisting length block contiguous packet received followed length intervening gap packet notreceived tcp selective ack selective acknowledgment sack option similar limited block received packet quite possible gap quic ack frame refer lost packet long retransmitted new packet number doe matter sender allowed skip packet number occasionally prevent receiver trying increase throughput acknowledging packet received unlike tcp acknowledging unsent packet considered fatal error connection terminated tcp timer tcp s typically m quic s quic includes ack frame receiver s best estimate elapsed time arrival recent packet sending ack triggered allows sender better estimate rtt primary advantage design decision reuse packet id ambiguity retransmitted packet s rtt tcp tcp timeout retransmission note quic run user process kernel able respond immediately arriving packet estimate slightly short ack frame acknowledged mean data Ô¨Çow receiver idea acks getting tcp receiver situation quic receiver send ping frame sender respond matching pong frame ack frame acknowledging receiver s recent acknowledgment packet quic adjusts value manage congestion tcp manages winsize properly cwnd tcp reno congestion management purpose speciÔ¨Åcally quic attempt mimic congestion response tcp cubic tcp cubic theory compete fairly tcp cubic connection straightforward arrange quic model behavior Ô¨Çavor tcp newer tcp implementation connection handshake tl encryption opening quic connection make use tl handshake tl speciÔ¨Åcally tl tl version client wishing connect sends quic initial packet containing tlsclienthello message server responds serverhello quic handshake packet retry packet special situation tl negotiation contained quic s variant alternative introduction computer network release stream tl quic handshake rule precise formal diagram description connection opening theinitial packet contains set quic transport parameter declared unilaterally client server make similar declaration response parameter include thing maximum packet size connection s idle timeout initial value important feature tl client connected server previously key negotiated earlier session use old key send encrypted request stream frame immediately following initial packet called protection encryption advantage client receive answer server single rtt versus rtts traditional tcp tcp handshake tl negotiation application discussed tl mode request submitted protection idempotent prevent replay attack server s Ô¨Årst handshake packet make client client possession key negotiated new session encrypt using going forward known key data said protected negotiated key initially calculated tl layer export quic quic layer encrypts entire data portion packet using format rfc quic header encrypted covered authentication checksum making sible middleboxes rewrite rewriting observed tcp complicated tcp evolution type Ô¨Åeld quic packet contains special code mark data ensuring receiver know level protection effect quic server receives clienthello sends serverhello received evidence client owns ip address claim client spooÔ¨Ång ip address isn spooÔ¨Ång idempotency restriction response data server away privilege spoofed way client server unwitting participant attack real client trigger sending server spoofed client larger response real client sends directly solution require quic initial packet containing clienthello byte server shandshake response likely smaller represents ampliÔ¨Åcation trafÔ¨Åc close connection sends tinue send response packet receives close packet send enter draining state initiator close receives s echoed close enter draining state state endpoint send packet draining state corresponds tcp s timewait timewait purpose lost Ô¨Ånal acks rtt s need timewait analog prevent old duplicate second quic connection select new connection id quic connection closing analog tcp s feature sends fin tinues send data indeÔ¨Ånitely closing connection use fin allowed bidirectional stream fin bit life stream header alternatively send request close stream answer different stream tcp issue alternativesan introduction computer network release epilog point covered basic mechanic tcp important topic remaining tcp manages window size limit congestion maintaining fairness turn complex focus chapter exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise user move computer mouse see s position updated screen suppose update transmitted tcp connection relatively long rtt user attempt cursor speciÔ¨Åc point user perceive mouse s motion nagle algorithm b nagle algorithm host sends packet containing x containing y host implement nagle algorithm b implement delayed acks m maximum delay rtt negligible long doe transmission draw ladder diagram suppose fallen group want add tcp feature connected hand connection different host end result connected received uninterrupted stream data initiate handoff suppose host send Ô¨Ånal fin handoff packet handle appropriate analogue timewait state host doe fact continuing connection just matter b suppose party send Ô¨Ånal change timewait s end note potentially hand connection suppose connects b tcp sends message attack noon followed fin receiving b sure received entire message sure receiving b s b b sure receiving s Ô¨Ånal ack c absolutely sure sending Ô¨Ånal ack host connects internet receiving address open tcp epilog introduction computer network release connection remote host established s ethernet cable plugged s ethernet interface receives ip address automatically selects new ethernet connection default route assume start using source address packet sends contrary rfc assume s tcp implementation packet arrives xbip bportytoxaip aportyand socketpair matched existing tcp connection Ô¨Åeld ipis allowed s ip address doe match ip address connection originally negotiated explain fail soon packet sent hint packet sent b send response light second assumption react b s response packet author regularly see connection fail way justiÔ¨Åcation behavior time establishment multihomed b suppose Ô¨Åelds socketpair xbip bporty xaip aporty used match incoming packet corresponding tcp connection connection fails immediately explain happens arp multihomed host ip version exercise algorithm exercise draw ladder diagram showing lost packet transmitted time t retransmission timer doe t timeout special assume algorithm tcp timeout retransmission used hint series acks previous packet arriving interval just timeout causing series reset timer tcp issue tcp reno congestion management chapter address tcp manages congestion connection s beneÔ¨Åt improve throughput beneÔ¨Åt connection result connection reducing throughput early work congestion culminated Ô¨Çavor tcp known tcp reno mechanism tcp reno remain dominant approach internet today alternative tcp active area research consider newer tcp implementation central tcp mechanism connection adjust window size smaller winsize mean fewer packet internet time trafÔ¨Åc mean congestion larger winsize mean better throughput point tcp reduce winsize congestion apparent increase trick Ô¨Åguring make winsize change improvement tcp come mining information stream returning acks anternet harvester ant pogonomyrmex barbatus us mechanism related tcp reno decide ant foraging time rate ant leaving nest forage closely tied rate returning forager forager return quickly meaning food available total number forager increase like increasing winsize ant algorithm probabilistic tcp algorithm deterministic recall chiu jain s deÔ¨Ånition congestion knee congestion occurs queue Ô¨Årst start grow cliff congestion occurs packet start dropped congestion managed point dropped packet signiÔ¨Åcant waste resource newer tcp strategy attempt action congestion knee starting tcp vega tcp reno strategy packet lost sender reduces window size quality service consider alternative tcp internet congestion management widely adopted tcp stand way internet congestive collapse Ô¨Årst question ask tcp congestion management just did job tcp sender expected monitor transmission rate cooperate sender reduce overall congestion router goal tcp node good stable performance connection emphasis cooperation introduces prospect cheating host tempted maximize throughput connection expense putting tcp node charge congestion core router degree like putting fox charge henhouse accurately arrangement potential lead tragedy common multiple tcp sender share common resource internet backbone backbone efÔ¨Åcient sender cooperates individual sender improve situation sending faster allowed argument used routing adherent provides support implementation wide range option control central authority introduction computer network release nonetheless tcp quite successful distributed congestion management vendor incentive view past quite difÔ¨Åcult individual user replace tcp stack rogue version factor contributing tcp s success bad tcp behavior requires cooperation server end server manager incentive behave cooperatively server generally want distribute bandwidth fairly multiple client theoretically server s isp penalize misbehavior far tcp approach worked remarkably basic tcp congestion management tcp s congestion management tcp adjusts window size adapt tion window size thought number packet network precisely represents number packet acks transit enqueued alternative approach used system congestion management run unfortunate difÔ¨Åculty sending rate momentarily happens exceed available rate earliest day tcp window size tcp connection came advertisedwindow value suggested receiver essentially representing packet buffer allocate value quite large accommodate large bandwidth product reduced concern congestion winsize adjusted downwards reason generally referred thecongestion window orcwnd variable Ô¨Årst appearing berkeley unix strictly speaking winsize min cwnd advertisedwindow newer tcp implementation variable cwnd actually used mean sender s estimate number packet Ô¨Çight sidebar tcp reno fast recovery tcp sending idle network rtt rtt noload travel time queuing delay saw rtt calculation noload time packet spends queue path bandwidth number packet queue winsize noload rtt usually queued packet router head bottleneck link note sender calculate number assuming estimate rtt noload common approach assume smallest rtt measured corresponds rtt noload tcp s iethat new transmission paced returning acks guarantee ing idle network queue build bottleneck router mean rate packet transmission equal available bandwidth bottleneck link spike burst packet sent egwhen sender increase window size steady state mean packet accumulate bottleneck return case network chapter bottleneck link competition optimum window size tcp connection bandwidth noload window size sender exactly Ô¨Ålled transit capacity path destination used queue capacity actually tcp reno doe instead tcp reno doe following guess reasonable initial window size using form polling tcp reno congestion managementan introduction computer network release slowly increase window size loss occur theory maximum available throughput reached rapidly decrease window size theory loss occur drastic action needed practice usually leaf tcp s window size theoretical optimum interpretation tcp s approach ceiling number packet network accept sender try stay near just level occasionally sender overshoot packet dropped just teach sender little network ceiling formally ceiling represents largest cwnd doe lead packet loss iethecwnd particular moment completely Ô¨Ålls doe overÔ¨Çow bottleneck queue reached ceiling queue chiu jain s terminology far ceiling cliff point packet lost tcp try stay knee point queue Ô¨Årst begin persistently utilized keeping queue partially occupied sends fall cliff retreat ceiling concept useful necessarily precise sound reached ceiling gradually expanding window size winsize large possible sender suddenly release burst packet queue Ô¨Åll reached porary ceiling fully utilizing transit capacity source ceiling ambiguity bottleneck link shared connection case ceiling represents connection s particular share Ô¨Çuctuate greatly time finally point ceiling reached queue fulland considerable number packet waiting queue possible sender pull instantaneously time acknowledge existence different version tcp incorporating different management algorithm start tcp tahoe tcp reno name tahoe reno originally codenames berkeley unix distribution included respective tcp implementation idea tcp tahoe came paper jacobson karels tcp reno reÔ¨Åned couple year later tcp reno widespread use year later undisputed tcp reference implementation modest improvement newreno sack crept common theme development improved implementation tcp end connection usually sender extract greater greater amount information packet Ô¨Çow example tcp tahoe introduced idea duplicate acks likely mean lost packet tcp reno introduced idea returning duplicate acks associated packet successfully transmitted follow loss tcp vega tcp vega introduced measurement rtt detect rtt rtt noload helpful think tcp sender having break successive windowfuls sender sends cwnd packet brieÔ¨Çy idle sends cwnd packet successive ful packet called Ô¨Çights existence separation Ô¨Çights guaranteed basic tcp congestion management introduction computer network release state begin state tcp established reasonable guess cwnd comfortably advertised window size largely appears working tcp engages tuning tcp steady state steady sense regular oscillation usually referred thecongestion avoidance phase phase process ultimately directed avoidance congestion central strategy packet lost cwnd decrease rapidly increase slowly lead slow oscillation cwnd time allows average cwnd adapt change network capacity tcp Ô¨Ånishes windowful packet note loss occurred cwnd rule introduced tcp tahoe following loss previous windowful cwnd packet lost cwnd informally measuring cwnd unit packet strictly speaking cwnd measured byte incremented maximum tcp segment size strategy known additive increase multiplicative decrease aimd cwnd additive increase cwnd multiplicative decrease typically setting cwnd goal fact tcp tahoe brieÔ¨Çy set cwnd immediate aftermath actual timeout loss tcp send successive windowfuls say amount conservative probing network particular queue bottleneck router tcp try largercwnd value absence loss mean current cwnd network ceiling queue bottleneck router overfull loss occurs including multiple loss single windowful tcp s response cut window size half tcp tahoe actually handle somewhat roundabout way informally idea sender need respond aggressively congestion precisely lost packet mean queue bottleneck router Ô¨Ålled sender need dial level allow queue clear assume transit capacity roughly equal queue capacity say equal n overÔ¨Çow queue drop packet cwnd cwnd leaf cwnd n just Ô¨Ålls transit capacity leaf queue sender set cwnd actual number packet transit take rtt fall course assuming relationship transit capacity queue capacity highly speculative km link bandwidth gbps transit capacity mb packet router probably queue large queue capacity excess transit capacity common hand competing model tcp path queue size small fraction bandwidth product return tcp bottleneck link utilization bufferbloat note tcp experience packet loss actual timeout opposed packet loss detected fast retransmit tcp tahoe fast retransmit pipe drained packet Ô¨Çight govern new transmission sliding window need restart scratch algorithm lead classic tcp sawtooth graph peak point slowly rising cwnd crossed network ceiling emphasize tcp reno congestion managementan introduction computer network release tcp sawtooth speciÔ¨Åc tcp reno related tcp implementation share reno s mechanism timecwnd tcp sawtooth red curve represents network capacity period loss tcp s cwnd increase linearly loss occurs tcp set cwnd diagram idealization loss occurs take sender time discover timeout interval Ô¨Çuctuation shown red ceiling curve somewhat arbitrary competing sender ceiling variation quite dramatic concurrent sender variation smoothed tcp sawtooth graph created actual simulation graph cwnd v time tcp reno cwnd graph Ô¨Årst look fairness transit capacity path unvarying physical capacity queue bottleneck router capacity shared connection come time ceiling doe vary real term connection share path total capacity packet fairest allocation connection packet share connection terminates remaining one rise packet instead fourth connection join mix equilibrium reached connection hope fair share packet kind fair allocation actually happen end connection getting bandwidth chiu jain showed algorithm doe verge roughly equal bandwidth sharing connection common bottleneck link provided basic tcp congestion management introduction computer network release connection rtt given rtt connection experience packet loss connection doe let connection size consider quantity rtt loss increment stay loss cut half cut half time original value repeatedly cut half rtt loss occur dwindles inconsequentiality point graphical tabular version argument chapter tcp reno fairness synchronized loss second bulleted hypothesis hypothesis reasonable suppose connection experience number loss average stronger statement suppose loss event shared connection behavior occur real life subject debate return point tcp sender competing fortunately fairness hold connection isequally likely experience packet loss connection loss rate shall tcp reno loss rate versus cwnd cwnd convergence fairness longer tcp reno fairness synchronized loss look alternative hypothesis case slow start make initial guess network capacity value cwnd begin good target cwnd avoid Ô¨Çooding network sending initial burst packet tcp reno answer known slow start trying guess number Ô¨Åxed range likely use binary search knowing range network ceiling good strategy guess cwnd orcwnd Ô¨Årst doubling gone far revert previous guess known worked point guaranteed true capacity actual mechanism increment cwnd ack received linear misleading send windowful packet cwnd received cwnd acks incremented cwnd time set cwnd cwnd word cwnd windowful cwnd packet assuming packet travel windowfuls mean cwnd double rtt slow start possibly place computer science literature exponential growth described slow slower alternative sending entire windowful diagram slow start action diagram make implicit assumption rtt large hold packet maximum window size shown tcp reno congestion managementan introduction computer network release data data data data slow start discrete packet flight different case smaller rtt multiple drop example eventually bottleneck queue get drop packet let suppose n rtts cwnd previous rtt cwnd successfully previous value setting cwnd tcp reno response slow start incrementing cwnd ack received equivalent doubling cwnd windowful Ô¨Ånd similar equivalence phase congestion avoidance cwnd incremented windowful formulate ack increase spread increment entire windowful course size cwnd amount following ack received slow start introduction computer network release cwnd slight approximation cwnd keep changing work practice tcp actually measure cwnd byte arithmetic normally required exercise exact equivalent incrementing strategy cwnd wherecwnd value cwnd start particular windowful simpler approach use cwnd fractional recorded use Ô¨Çoor cwnd integer cwnd actually sending packet actual implementation track cwnd byte case using integer arithmetic sufÔ¨Åcient untilcwnd quite large ifdelayed acks implemented tcp delayed acks bulk transfer arriving ack actually acknowledges packet rfc permit tcp receiver increment cwnd situation response consistent incrementing cwnd receipt acks acknowledge entire windowful threshold slow start tcp us slow start know working network capacity packet loss timeout tcp know new cwnd ofcwnd work cwnd tcp half problem timeout returning acks continuing transmission want dump packet network restarting Ô¨Çow tcp us called threshold slow start us stop cwnd reach target speciÔ¨Åcally packet loss set variable ssthresh tocwnd new target cwnd setcwnd switch mode cwnd ack soon ascwnd reachesssthresh switch mode cwnd ack note transition threshold slow start congestion avoidance completely natural easy implement tcp use threshold restarting pipe drain time needed Ô¨Årst use connection simply idle slow start typically used trafÔ¨Åc start threshold seen attempt combining rapid window expansion comparison refer initial slow start unbounded slow start note unbounded slow start serf fundamentally different purpose initial probing determine network ceiling threshold slow start tcp sawtooth diagram modiÔ¨Åed timeouts slow start Ô¨Årst packet loss displayed coarse timeouts rest displayed fast retransmit used tcp reno congestion managementan introduction computer network release timecwnd tcp tahoe sawtooth red curve represents network capacity slow start used packet loss ssthresh reachedtimeout rfc allows slow start begin cwnd multiple drop example slow start potential cause multiple dropped packet bottleneck link packet loss continue quite time tcp sender slow discover network topology follows link inÔ¨Ånitely fast link bandwidth r √Ω√±b direction r binfinitely fast assume r queue capacity including packet currently forwarding b acks travel instantly b later example continue use data n n terminology sliding window beginning tcp numbering quite way distinction inconsequential us successive windowfuls immediately begin overlap send packet delivered ack travel instantly point send packet point acks arrive regularly rate second brief chart slow start introduction computer network release time receives sends r sends r s queue data data ack data data data data ack ack ack ack n ack n r s queue contains n packet r s queue data sent delivered acknowledged giving rtt r receives data data drop unfortunately s timeout interval course greater rtt detect loss absolute minimum point sent packet data packet data data data lost word point Ô¨Årstreceives news lost packet fact packet lost fortunately unbounded slow start generally occurs connection summary tcp far far following feature unbounded slow start beginning congestion avoidance aimd semblance steady state reached threshold slow start loss threshold slow start transitioning naturally congestion avoidance table expressing phase term manipulating cwnd phase cwnd change loss cwnd change loss window window ack slow start cwnd cwnd cong avoid cwnd cwnd viewing cwnd linux user view current value cwnd andssthresh host tcp statistic using command s tcp info problem tcp face phase packet lost sender detect later bottleneck router s current queue sent late avoid loss tcp reno congestion managementan introduction computer network release initial value cwnd far assuming slow start begin cwnd equal packet value proposed quite ago initial cwnd creeping decade later rfc proposed setting initial cwnd used startup timeout packet maximum size packet maximum ethernet packet size byte used following common value packet rfc proposed experimental change initial value packet byte value relatively common use increase initial cwnd value steadily increasing capacity internet decreased likelihood single extra packet make material difference basic behavior slow start remains tcp implement like slow start look slightly different tcp bbr tcp bbr example startup mode serf function tcp reno slow start tcp tahoe fast retransmit tcp tahoe important feature recall tcp acks cumulative packet received data arrives data receiver send ack sender s perspective send packet ack ack ack ack ack infer thing data got lost stuck ack data probably didmake triggered duplicate ack s ack s following Ô¨Årst ack thefast retransmit strategy resend data n received dupacks data ack s represents packet loss set ssthresh setcwnd begin phase effect typically reduce delay associated lost packet timeout typically just little single rtt lost packet discovered tcp pipeline drained end rtt ack retransmitted packet return tcp pipeline willhave drained need slow start tcp tahoe included feature discussed far cwnd andcwnd response slow start fast retransmit fast retransmit wait dupack allow possibility moderate packet reordering suppose packet sent arrive order router way architecture strongly parallelized acks sent follows tcp tahoe fast retransmit introduction computer network release received response data ack data ack data ack data ack data ack data ack waiting dupack case successful compromise responsiveness lost packet reasonable evidence data packet question actually lost router doe substantial delivery reordering wreck havoc connection using fast retransmit particular consider router r diagram sending packet b principle wish alternate basis path path mistake path different propagation delay strategy introduce major packet reordering r send packet belonging tcp connection single path ar real world router generally considerable length accommodate fast retransmit particular use multiple path single tcp connection universally frowned actual data packet reordering author suggests switch retransmission second dupack risky tcp reno fast recovery fast retransmit requires sender set cwnd pipe drained arriving acks pace transmission fast recovery technique allows sender avoid draining pipe cwnd tocwnd space single rtt tcp reno tcp tahoe addition fast recovery idea use arriving dupacks pace retransmission make assumption arriving dupack indicates data packet following lost packet delivered successfully turn matter discovery lost packet fast retransmit goal set cwnd step Ô¨Ågure dupacks wait resume transmission new data initially assume data packet lost following section multiple loss handled slight modiÔ¨Åcation fast recovery strategy recovery process problem direct use sliding window lost packet pin lower end window packet successfully retransmitted duration tcp reno congestion managementan introduction computer network release recovery period window slide forward ofÔ¨Åcial speciÔ¨Åcation fast recovery originally rfc rfc describes retransmission term cwnd inÔ¨Çation anddeÔ¨Çation c value cwnd time loss cwnd steadily inÔ¨Çated allowing original window plus half windowful new data point lost packet successfully retransmitted window deÔ¨Çated cwnd point lower end window slide forward c upper end window doe work bit hard follow instead use concept estimated flightsize efs sender s best guess number outstanding packet normal circumstance efs cwnd crucial fast recovery observation efs decremented arriving dupack arrival dupack mean packet transit transmission new packet resume efs reduced half original value cwnd efs approach equivalent inÔ¨Çationary approach slow start involved linux cwnd isestimated flightsize chapter deÔ¨Ånes cwnd sender winsize strictly construed packet cwnd sent packet n acked linux kernel actually us cwnd synonym estimated flightsize simpliÔ¨Åes code usage applies fact tcp variety make little difference Ô¨Årst outline general case look speciÔ¨Åc example let cwnd n suppose packet lost packet number taken relative packet retransmitted sender send packet n data n sent ack arrived sender receiver send dupack s representing packet point dupack loss data discovered sender calculates follows efs cwnd dupacks arrived representing later packet longer Ô¨Çight efs point sender realizes packet lost make efs brieÔ¨Çy packet immediately retransmitted brings efs sender expects point receive dupacks followed new ack mission packet lost ack entire original windowful new target cwnd simplicity assume n wait dupacks arrive point efs point sender resume ing new packet send new packet subsequently arriving dupacks recall dupacks new transmission data data dupacks come ack corresponding retransmission lost packet ack n acknowledging original windowful point edged packet data data sender sends data able resume sliding window cwnd sender received ack n exactly windowful outstanding new value cwnd right supposed diagram illustrating fast recovery cwnd data lost tcp reno fast recovery introduction computer network release data data data data data data data data data data ack send data data send ack x send data send data send data send data sliding window reestablished cwnd data send dupack dupack dupack resend data efs efs efs resume sending data send dupack ack send dupack send dupack send dupack send dupack send dupack dupack send dupack send dupack send ack send ack send ack send data send ack send data send data data elicits initial ack packet data data elicit dupack denote dupack elicited data n dupack shown upper right unless sack tcp used sender way determine n tell dupacks apart dupack dupack arrives sender sender us fast recovery infer data lost retransmits point efs sender sent original batch data packet plus data received ack dupacks total sender inferred data lost efs retransmitted efs dupack s way efs decremented subsequent dupack arrival dupack s efs dupack dupack reduces efs allows transmit data promptly bump efs tcp reno congestion managementan introduction computer network release receive send dupack data dupack data dupack data dupack data emphasize tcp sender doe number receive column determines begin transmission counting dupack arrival working backwards figuring sender resume transmission new data simplest approach work backwards retransmitted lost packet trigger receiver ack entire original windowful data lost stuck window data retransmitted data trigger ack ack arrives cwnd data sent turn mean packet data data sent earlier fast recovery dupacks send start sixth diagram show new fast recovery transmission beginning sixth dupack thing arrive sender ack elicited retransmitted data point data arrives receiver data data arrived response ack sender responds ack data transition cwnd complete sliding window loss sender send cwnd packet rtt coarse timeout occurs typically discovered complete rtt link idleness additional underutilized rtts phase worth examining fast recovery sequence shown illustration perspective underutilized bandwidth diagram show time seen sender Ô¨Årst rtt packet data sent second rtt begin sending data continues sending data retransmitted data rtt begin sending data includes data term recovery efÔ¨Åciency rtts send packet respectively counted data twice remarkably close ideal reducing cwnd instantaneously using description term inÔ¨Çation rfc inÔ¨Çation begin point sender resumed transmitting new packet point cwnd incremented dupack diagram instant labeled send data sender cwnd momentarily representing window data data soon sender realized lost packet data acknowledged ack cwnd immediately deÔ¨Çate representing window data data diagram illustrating cwnd inÔ¨Çation deÔ¨Çation running script addition fast recovery described rfc known limited transmit described transmission new data begin dupack point fast recovery initiated limited transmit mean new data packet transmitted Ô¨Årst dupacks just case basis transmission borrowed future tcp reno fast recovery introduction computer network release forward motion send window value cwnd changed Ô¨Årst skipped packet retransmitted packet loss dupacks simply resulted packet reordering harm fast retransmit get slightly earlier start small window size make signiÔ¨Åcant difference tcp newreno tcp newreno described rfc currently rfc modest tweak fast covery greatly improves handling case packet lost windowful generally considered contemporary tcp reno term estimated flightsize term cwnd inÔ¨Çation deÔ¨Çation data packet lost Ô¨Årst retransmitted receiver acknowledge data just second packet continue sending dupacks second lost packet retransmitted acks data just second packet called partial acks retransmission Ô¨Årst lost packet did result ack outstanding data newreno mechanism us partial acks evidence retransmit later lost packet pacing fast recovery process diagram packet lost window size initially sender dupack s Ô¨Årst acks dashed line right left ack dupack s packet successfully retransmitted receipt dupack receiver s response ack heavy dashed line Ô¨Årst partial ack ack ack receipt partial ack fast recovery process tcp newreno assumes immediately following data packet lost retransmits immediately sender doe wait dupacks following data packet lost instance partial ack generated packet reordering occurred tcp newreno sender response effect treat partial ack dupack sender retransmits data packet based receipt partial ack able infer lost newreno continues pacing fast recovery acks arrive original dupacks later partial acks dupacks tcp reno congestion managementan introduction computer network release data ack dupack resend data data received send ack x x send data send data send data send data resend data send data send data send data send data send data ack send data send data cwnd received send ack data send dupack ack send data normalget ack send data dupack send ack receiver s Ô¨Årst ack arrives sender newreno infers data lost resends second heavy data line dupack s need arrive mentioned sender infer single ack data lost sender responds dupack arrived sends data arrival ack signal reduction efs inference data lost tcp newreno introduction computer network release dupack arrived transmission response data data bring efs point data sent actual estimated Ô¨Çightsize dupack loss data newreno resends data sends data actual Ô¨Çightsize dupack s arrive newreno keep sending new data receipt data data receiver s response retransmitted data send ack cumulative data received moment point ack arrives sender just sent data response fourth dupack response ack send data packet data sender normal sliding window acwnd similarly data immediately following retransmitted data elicits ack Ô¨Årst data n elicit exactly ing ack n loss began corresponding response ack continue data previous fast recovery example consider number packet sent rtt diagram show rtts seen sender rtt packet packet sent count Ô¨Årst data data second data data data data data data fourth data data loss detected segue new cwnd single missed packet second rtt newreno able send retransmitted packet rtt note tcp newreno like tcp tahoe reno innovation receiver doe special tcp Ô¨Çavor sack tcp requires modiÔ¨Åcation selective acknowledgment sack traditional tcp ack cumulative acknowledgment data received point data received data receiver send duplicate ack doe indicate thatsomething following data provide greater speciÔ¨Åcity tcp provides selective ack sack option implemented receiver available sender doe guess dupacks gotten receiver send ack say packet received cumulative ack packet received second line sack tcp implementation support speciÔ¨Åcally sack include following information additional data cumulative ack included tcp option Ô¨Åeld latest cumulative ack tcp reno congestion managementan introduction computer network release recent block consecutive packet received lost highest received sack say packet received received received received sender know received packet sender paying close attention previous sack received likely know packet received term sack tcp typically used mean receiving support selective acks sending straightforward modiÔ¨Åcation tcp reno advantage practice selective acks provide best modest performance improvement situation tcp newreno doe environment paper compare tahoe reno newreno sack tcp situation involving packet loss single rtt classic reno performed poorly packet loss single rtt extremely poorly loss newreno sack tcp scenario played remarkably similarly nections experienced loss single rtt did sack tcp s performance start pull slightly ahead newreno tcp bottleneck link utilization consider tcp reno sender competing trafÔ¨Åc cwnd saw happens throughput halvings cwnd result dip throughput answer depends extent size queue ahead bottleneck link relative transit capacity path discussed rtt calculation whencwnd transit capacity link utilized queue cwnd transit capacity link saturated utilized queue cwnd packet diagram show tcp reno teeth Ô¨Årst queue capacity exceeds path transit capacity second queue capacity smaller fraction total tcp bottleneck link utilization introduction computer network release network ceiling queuequeue transittransit phase filling phase queue capacity transit capacity bottleneck link utilizedqueue capacity transit capacity bottleneck link utilized Ô¨Årst diagram bottleneck link utilized left edge teeth second interval loss event left right margin tooth divided unsaturated phase phase unsaturated phase bottleneck link utilization queue later phase link saturated queue begin Ô¨Åll consider idealized network bandwidth r binfinitely fast Ô¨Årst consider queue case assume total rtt noload delay m propagation delay make bandwidth product packet question consideration extent tcp reno leaf link idle link saturated time provided keep packet transit rtt calculation ifcwnd cwnd maximum queue capacity path accommodate packet loss packet transit plus packet queue general tcp reno leaf bottleneck link idle long queue capacity link large path transit capacity suppose instead queue size transit capacity packet loss occur whencwnd reach cwnd qualitatively case represented second diagram proportion illustrated like period link idle rtt interval cwnd throughput maximum link idle time tcp reno congestion managementan introduction computer network release cwnd just Ô¨Årst rtt following loss rtts cwnd link saturated rtts average cwnd meaning link saturated followed rtts link saturated average utilization bottleneck link bad given using link bandwidth packet header universally considered reasonable furthermore point whencwnd drop loss cwnd queue rtts queue drain time link utilization higher time bottleneck link saturated Ô¨Årst diagram help consider average queue size let queue capacity c queue transit capacity c transit c queue ctransit thencwnd vary maximum c minimum work c transit expect average queue size halfway ctransit term c expected average queue size exercise tcp queue size perspective link utilization previous section suggests router queue larger smaller queue capacity large transit capacity like excellent choice conÔ¨Ågure router way Ô¨Årst make educated guess average rtt multiply output bandwidth desired queue capacity average rtt m bandwidth gbps lead queue capacity mb packet byte number rise m gbps queue capacity need mb unfortunately large queue helpful trafÔ¨Åc consists exclusively bulk tcp transfer introduce proportionately large queuing delay wreak havoc trafÔ¨Åc bottleneck router queue size matching Ô¨Çow s bandwidth product double rtt Ô¨Çow point queue worse goal tcp link utilization router queue sized Ô¨Çow longest rtt shorter tcp connection encounter queue larger necessary problem large queue capacity leading excessive delay known bufferbloat return bufferbloat delay problem brought large queue tcp connection pas bottleneck router small queue case tooth tcp reno connection divided large phase small phase need large buffer queue utilization goal large degree speciÔ¨Åc tcp reno sawtooth tcp implementation particular tcp vega tcp vega overÔ¨Åll queue tcp vega doe compete tcp reno traditional fifo queuing look queuing fair queuing bufferbloat worst case tcp link utilization queue size close zero using bandwidth product packet queue mean cwnd maxwill cwnd min link utilization range lifetime tooth low high average utilization ideal tcp variant attempted improve Ô¨Ågure link utilization bad compared bandwidth consumed packet header Ô¨Ågure assumes byte data tcp bottleneck link utilization introduction computer network release packet low literally queue work reason tcp reno sends burst cwnd incremented trafÔ¨Åc mix major inÔ¨Çuence appropriate queue size example analysis previous section assumed single tcp connection situation improves increasing number tcp connection loss unsynchronized halving tion scwnd proportionately smaller impact total queue use shown router n tcp connection unsynchronized loss queue size rtt n sufÔ¨Åcient link saturated larger value n typically associated core backbone router paper proposes smaller buffer capacity order logarithm maximum window size argument make important assumption Ô¨Årst willing tolerate link utilization somewhat greater second importantly tcp modiÔ¨Åed spread packet burst burst size small interval time problem created queue willing accept link tion internet trafÔ¨Åc unlike trafÔ¨Åc tends bunch queue serve way packet bunch leading unnecessary loss example unexpected trafÔ¨Åc bunching transient queue peak increased trafÔ¨Åc randomization help reduce need large queue increase bunching effect internet core router highly randomized trafÔ¨Åc edge router queue difÔ¨Åcult conÔ¨Ågure return issue link utilization throughput experiment sender higher bandwidth link utilization using n simulator experimental data exercise finally queue capacity doe necessarily remain static return point active queue management furthermore problem ultimately spring fact trafÔ¨Åc dumped single fifo queue look alternative queuing strategy queuing scheduling particular example related bufferbloat fair queuing bufferbloat single packet loss assuming competition bottleneck link tcp reno policy simple consequence end tooth single packet lost let sender r bottleneck router b receiver r b let t bandwidth delay r packet leaving r spaced time t apart transmit packet t time unit apart time cwnd just incremented sends pair packet let second packet pair extra packet simplify argument slightly assume packet pair arrive r essentially simultaneously tcp reno congestion managementan introduction computer network release extra packet result increase queue utilization packet arrives interval t previous packet giving r time remove packet queue consequence cwnd reach sum transit capacity queue capacity r dropping packet necessarily case cwnd large sent single burst let c combined capacity assume cwnd reached executes cwnd additive increase usual send pair packet second pair extra doomed dropped reach bottleneck router point c cwnd packet outstanding spaced time interval sliding window continue normally ack packet just lost packet arrives point receive dupacks received c cwnd acks increment cwnd receive cwnd acks order increment cwnd happen new acks arrive lost packet transmitted following cwnd reduced sawtooth begin packet lost extra packet previous Ô¨Çight single loss experimental conÔ¨Årmation exercise tcp assumption scalability tcp design portrayed embedded assumption portant loss treated evidence congestion shall chapter fails tcp rare random loss signiÔ¨Åcant fails tcp wireless lost packet common ethernet tcp problem tcp problem tcpcwnd strategy increment cwnd rtt assumption scale mechanism work rtt s order m cwnd low hundred cwnd take rtts second cwnd grow linear increase proportionally quite slow rtt long cwnd increase slow absolute minimum rtt internet m typical rtts close long rtts lead slow cwnd growth furthermore shall long rtts mean tcp connection compete poorly connection tcp problem implicit assumption lot data transfer send single connection divide multiple connection web http protocol violates routinely multiple short connection cwnd properly converge steady state tcp reno doe support carrying learned cwnd connection related issue occurs connection alternate relatively idle period data transfer tcp set cwnd return slow start sending resume idle period finally tcp s fast retransmit assumes router signiÔ¨Åcantly reorder packet tcp assumption scalability introduction computer network release tcp parameter tcp reno s additive increase multiplicative decrease strategy increase increment decrease factor natural ask value especial signiÔ¨Åcance consequence changed value play role determining average value cwnd short term largely dictated path capacity including queue size bottleneck router clear exact value increase increment bearing congestion increase small major effect decrease factor play role responding promptly incipient congestion reduces cwnd sharply Ô¨Årst sign lost packet shall tcp vega tcp vega normal mode manages quite successfully additive decrease strategy decrementing cwnd point detects approaching congestion sure detects packet loss measure responds better congestion tcp reno word exact value aimd decrease factor critical congestion management multiplicative decrease mandatory informal justiÔ¨Åcations decrease factor Ô¨Årst slow start nth rtt cwnd big sender fall cwnd known worked loss previous rtt change decrease policy best addressed concomitant change slow start alternatively reduction factor left apply unbounded slow start new factor ùõΩmight apply threshold slow start second justiÔ¨Åcation reduction factor applies directly congestion avoidance phase written quite remarkable modern reader connection running packet dropped s probably new connection started took bandwidth t s probable exactly conversation sharing bandwidth reduce window half bandwidth available reduced half today busy router thousand simultaneous connection sure jacobson karels state connection sharing bandwidth halving window conservative conservative high trafÔ¨Åc intensity probably wise advice remains apt today play large role setting cwnd avoiding congestive collapse turn value respectively play great role fairness making sure competing connection bandwidth allocation return tcp reno fairness synchronized loss aimd revisited epilog tcp reno s core congestion algorithm based algorithm jacobson karel s paper year old newreno sack universally added standard reno implementation broad change tcp usage pattern year ago vast majority tcp trafÔ¨Åc represented downloads major server today half internet tcp trafÔ¨Åc tcp reno congestion managementan introduction computer network release rise online video streaming creates new demand excellent tcp performance chapter examine dynamic behavior tcp reno focusing particular fairness competing connection problem faced tcp reno sender newer tcp implementation survey attempt address problem exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution tcp reno congestion management consider following network link Ô¨Årst having bandwidth delay assume acks travel instantly b r assume propagation delay rtt noload bandwidth product packet us sliding window window size queue eventually size fast suppose us threshold slow start threshold slow start withssthresh cwnd initially complete table row cwnd Ô¨Ånal row cwnd reachedssthresh send new packet ack received assume queue large packet dropped big queue grow ta sends queue sends b cwnd note instead using slow start simply sends initial windowful packet queue initially hold packet consider following network multiple drop example link labeled bandwidth assume acks travel instantly b r exercise introduction computer network release r binfinitely fast begin sending b using unbounded slow start beginning data initially cwnd write table packet transmission delivery assuming r s maximum queue size counting packet currently forwarded stop arrival Ô¨Årst dupack triggered arrival b packet followed Ô¨Årst packet dropped retransmissions occur ta sends r queue r drop r sends b data consider network exercise begin sending b using unbounded slow start time r s queue size counting packet currently forwarded make table showing packet transmission packet drop r column useful assume noretransmission mechanism used timeouts fast retransmit sends new data receives new acks dupacks word trigger new data transmission assumption new data transmission eventually cease continue table transmitted data packet received b suppose connection start cwnd increment cwnd rtt loss set cwnd tocwnd rounding rtt loss lost packet retransmitted propagation delay dominate windowful sent packet lost window size rtt Ô¨Årst packet sent packet sent rtt hint Ô¨Årst rtt data sent loss second rtt cwnd data data sent suppose tcp reno used transfer large Ô¨Åle path bandwidth high slow start cwnd treated doubling rtt slow start assume receiver place limit window size rtts window size Ô¨Årst reach packet assuming unbounded slow start used packet loss b approximately packet sent acknowledged point c assume bandwidth rtt m making bandwidth product packet fraction total bandwidth used connection point window size reach hint total bandwidth packet rtt repeat diagram tcp reno fast recovery cwnd window size assume lost packet data seven dupack s convenient tag dupack dupack sure indicate clearly sending resume b suppose try window size window size big fast recovery work dupack doe new data transmission begin go wrong tcp reno congestion managementan introduction computer network release suppose window size data lost dupack s sent denote dupack dupack tcp reno used dupack doe sender start sending new data b retransmitted data arrives receiver ack sent response c acknowledgment b arrives sender data packet sent hint express efs term dupack n dupack dupack efs point retransmission data suppose window size data lost packet acked normally packet sent trigger duplicate ack actual data packet trigger Ô¨Årst dupacks Ô¨Årst ack triggered data don t count duplicate b dupack received lost data retransmitted sender estimate Ô¨Çight retransmitted data arrives receiver ack sent c Ô¨Årst data n sent response ack n n d Ô¨Årst n data sent response ack n represents point connection normal sliding window window size recall slow start slow start cwnd incremented arriving ack resulting transmission new data packet suppose modiÔ¨Åed ack new packet sent cwnd triple rtt taking value arriving ack cwnd incremented b suppose path propagation delay progressively larger windowfuls sent size successive power cwnd reached packet loss occurs window size sender reasonably sure doe work based earlier experience suppose example tcp newreno data notbeen lost data received ack sent response b point diagram sender able resume ordinary sliding window cwnd exercise introduction computer network release suppose example tcp newreno data data lost data dupack sent response data n b retransmitted data reach receiver ack response ack reach sender data packet sent response suppose tcp connection rtt share bottleneck link trafÔ¨Åc size bottleneck queue negligible compared bandwidth noload product loss event occur regular interval completely synchronized nections use total capacity tcp bottleneck link utilization single connection exercise chapter dynamic tcp tcp bottleneck link utilization showed bottleneck router queue capacity tcp reno connection s transit capacity trafÔ¨Åc utilization suppose queue capacity transit capacity bottleneck link utilization draw diagram tooth Ô¨Ånd relative length phase round cwnd maxto transit capacity value cwnd just packet loss exact value cwnd maxi higher b formula link utilization term ratio f queue capacity transit capacity make simplifying assumption tcp reno response stated response tcp sender increment cwnd follows cwnd corresponding formulation window size fact measured byte packet let smss denote sender s maximum segment size let bwnd denote congestion window measured byte hint solve equation cwnd plug result b appropriate formulation cwnd delayed acks used tcp delayed acks want cwnd incremented windowful assume measuring cwnd packet single packet loss simpliÔ¨Åed argument slightly assuming sent pair packet arrived r essentially simultaneously scenario extra packet second pair lost packet follows hint phase effect tcp reno congestion dynamic tcp chapter introduce Ô¨Årst foremost possibility tcp connection competing throughput linear bottleneck tcp bottleneck link utilization looked performance tcp uncontested bottleneck allow competition focus chapter tcp reno idea presented apply tcp mechanism quic tcp alternative presented later newer tcp implementation following chapter continues thread example behavior look queuing order transmit packet router s queue conventional answer order arrival technically fifo queuing happens packet arrives router queue desired outbound interface conventional answer dropped technically known fifo remains important alternative admittedly entirely different context equivalent arp rfc state queue overÔ¨Çows new arrival replace oldest called head drop used router queue queuing theory lot queue chapter avoid language traditional queuing theory s queue created sliding window highly deterministic term arrival departure queue perspective interesting queue tend random egpoisson arrival service time queue advantage queue good deal tractable general case analyzing independent message queuing important example alternative mechanism hasbeen considered router queue random drop policy packet arrives destination queue n packet waiting packet n waiting plus new arrival chosen random dropping recent arrival good chance gaining initial place queue reasonable chance dropped later random drop seldom production use original form doe resolve peculiar synchronization problem related tcp s natural periodicity lead starvation connection situation known phase effect revisited phase effect mathematically queuing tractable packet s loss probability little dependence race condition packet introduction computer network release priority queuing quite different alternative fifo priority queuing consider ority queuing basic idea straightforward router ready send packet look Ô¨Årst packet send packet sent waiting trafÔ¨Åc course lead complete starvation trafÔ¨Åc bandwidth constraint trafÔ¨Åc egthat amount total available bandwidth starvation doe occur environment mixed bulk trafÔ¨Åc natural use priority queuing time trafÔ¨Åc priority service assignment trafÔ¨Åc queue work quite long say trafÔ¨Åc Ô¨Åxed fraction total return quality service bottleneck link competition far ignoring fact tcp connection single connection isolation need overrun bottleneck router drop packet connection present individual tcp connection need consider maximize share aggregate bandwidth consider simple network path bandwidth shown minimum bandwidth path bandwidth example linear bottleneck example considered linear bottleneck bandwidth shown bottleneck link √±b trafÔ¨Åc queue form s outbound interface claimed earlier sender us sliding window Ô¨Åxed window size network converge steady state relatively short order true multiple sender involved mathematical proof convergence difÔ¨Åcult example router competition concept useful understanding congestion single connection multiple sender competition link situation complicated consider following diagram link labeled bandwidth dynamic tcpan introduction computer network release moment assume us priority queuing b √Ω√±c path given priority √Ω√±c b s Ô¨Çow c Ô¨Åxed s share link s bottleneck b s total Ô¨Çow rate drop link available bottleneck path link let switch fifo queuing b s Ô¨Çow s link saturated just barely connection stick rate queue develop longer accurate s share wish send begin compete Ô¨Årst queue grow eventually quite possible b s total Ô¨Çow rate drop b losing competition s queue effect real general connection share bottleneck link competing bandwidth link bandwidth share precisely dictated queue share short s Ô¨Åxed rate mean packet ¬µs queue packet queue packet packet b m ¬µs s trafÔ¨Åc c consist packet competition b bandwidth Ô¨Årst fought competition s queue space important state rule rule steady state connection utilizes fraction fifo router s queue connection share ùõºof router s total outbound bandwidth picture s queue outbound link queue contains packet link contains packet ratio presumably packet b consistently arriving twice fast packet bottleneck link competition introduction computer network release ca b steady state b use packet respectively s queue capacity acknowledgment return sender replenish queue accordingly s term settle queue utilization packet want step lead setting gradual increase queue share started discussion Ô¨Åxed rate b general lead instability b s combined rate add s queue grow bound better b use sliding window Ô¨Åxed window size case shall stable equilibrium soon reached combination window size legal regardless available bandwidth queue utilization necessary loss rate vary necessary adapt actual bandwidth competing Ô¨Çows given connection multiple bottleneck sense router path experiencing queue buildup steady state identify link Ô¨Årst link minimum bandwidth link bottleneck note bottleneck link sense change sender s winsize competing trafÔ¨Åc example competition queue utilization diagram bottleneck link normalized bandwidth packet m abstractly packet unit time bandwidth link matter greater packet link labeled propagation delay measured time unit bandwidth delay represents number packet link transporting time sent bottleneck rate dynamic tcpan introduction computer network release br cdelay ddelay da delay db network layout shared link bottleneck known singlebell topology alternative dumbbell topology tcp reno fairness synchronized loss equivalent purpose suppose b send c using sliding window Ô¨Åxed value winsize w aand w suppose winsize value large saturate link big queue r bandwidth divide √Ω√±c b√Ω√±c Ô¨Çows example assume reached steady state let ùõºdenote fraction bandwidth √Ω√±c connection receives let fraction b√Ω√±c connection get normalization choice bandwidth ùõºandùõΩalso represent respective throughput rule bandwidth proportion agree queue proportion q denotes combined queue utilization connection queue ùõºq packet √Ω√±c Ô¨Çow ùõΩq packet b √Ω√±c Ô¨Çow worked queue usage precisely rtt calculation single Ô¨Çow derived following winsize throughput noload used throughput instead bandwidth emphasize dynamic share physical transmission capacity equation remains true separate Ô¨Çow present case rtt noload a√Ω√±c connection d factor account rtt noload b√Ω√±c connection d ùõºq w ùõΩq w alternatively ùõº q w ùõΩ q b w b add Ô¨Årst pair equation obtain combined queue utilization q w w term represents number s packet Ô¨Çight link plus number b s packet Ô¨Çight link bottleneck link competition introduction computer network release solve equation exactly ùõº ùõΩand q term known quantity algebraic solution particularly illuminating instead examine special case case consider Ô¨Årst special case equal delay d case term simpliÔ¨Åes d q w w furthermore divide corresponding side second pair equation w bandwidth queue utilization divide exact accordance proportion d ai larger d b greater fraction √Ω√±c packet transit fewer queue r ùõºwill somewhat smaller ùõΩsomewhat larger case assume equal winsize value instead w w w q b q bandwidth ratio biased larger d aor d d d b s packet transit fewer r s queue smaller fraction bandwidth bias quite proportional assume d ai double d band d d get bandwidth b s assuming w w w let decrease w point link just saturated point b d bandwidth divide according respective rtt noload value w rise additional queue capacity used closer bcase finally let consider happens w bisÔ¨Åxed value create queue r trafÔ¨Åc w athen increase zero point larger w denote number b s packet r s queue q b w q q w d throughput rtt rtt noload w abegins increase zero competition decrease b s throughput small change w awill lead change q ùõºwill initially approximately proportional w b s increased competition increased w decrease b s share bottleneck link link saturated packet s transit away slot link packet b s turn mean b s bandwidth ùõΩmust decrease w arises b s bandwidth decrease q w increase way transit capacity fall queue utilization rise q increase ùõΩdecreases q increasing faster ùõΩ decreasing finally conclude w agets large limiting value b s queue utilization q bat r entire windowful w b starting value w w d d dynamic tcpan introduction computer network release small relative w b q b s increase modest appropriate consider q brelatively constant remark formula based assumption bottleneck bandwidth packet unit time exercise necessary adjustment conventional bandwidth ments iterative solution given d d db waand w b way solve ùõº ùõΩand q proceed iteratively suppose initial xùõº ùõΩyis given respective fraction packet queue period time ùõº andùõΩmust queue rule bandwidth ratio connection bandwidth ùõº recall connection bandwidth packet unit time bandwidth fraction ùõºmeans actual bandwidth ùõº number packet bidirectional transit ùõº number packet r s queue q w similarly q point q starting appropriate guess ùõºand iterating ùõº√±ùõºnewa time sequence converges converge solution convergence guaranteed dependent initial guess guess lead convergence w example cross trafÔ¨Åc rtt variation following diagram let consider happens trafÔ¨Åc c √Ω√±d link ramp bandwidth shown expressed queue fifo bandwidth equal apply formula previous section directly assume propagation delay small inconsequential number packet c d simultaneously transit bottleneck rate sender use sliding window b dc let suppose link idle c √Ω√±d connection begin sending window size chosen create queue c s packet propagation delay packet transit direction achieve imagine begin sending sends single packet shut link busy s packet simply wait packet c waiting time bottleneck link competition introduction computer network release queue packet change winsize c √Ω√±d connection delay s packet directly proportional number c s packet s queue intent purpose c √Ω√±d Ô¨Çow increased rtt √Ω√±b Ô¨Çow long s contribution s queue small relative c s delay s packet look like propagation delay bandwidth delay sends packet likely enqueued consecutively subject single m queuing delay varying c √Ω√±d window size limit increase decrease rtt √Ω√±b Ô¨Çow let return Ô¨Åxed c √Ω√±d window size denoted w chosen yield queue c s packet increase window size say c √Ω√±d throughput decrease slightly c s contribution s queue remain dominant argument end case small propagation delay mean w cwill larger w aclimbs zero inÔ¨Ånity c s contribution s queue rise w c delay √Ω√±b packet remains relatively constant s winsize rise point s contribution s queue far outweighed c s argue paragraph actually happen bandwidth increased packet arriving average face c s packet ahead fewer s packet s window size packet time wait m queue s window size greater remains small contributes small proportion s queue s packet wait initially s winsize increase queue grows queue remain s winsize grows large packet consume s queue steady state situation change point s queue queue competition rule share link s bandwidth link bandwidth throughput grow contribution s queue held constant packet point reached s contribution s queue packet s proportional contribution s queue increase additional increase s winsize result packet enqueued reached situation s packet queuing contrary principle packet queue router note Ô¨Åxed value s winsize increase s winsize result increase going entirely s queue entirely s queue speciÔ¨Åcally w arepresents s winsize point s queue little packet propagation delay small winsize w aany queue growth winsize w aany queue growth sense bottleneck link switch point winsize w graph s contribution s queue plotted green s contribution s queue blue instructive compare graph graph graph congestion knee illustrates single connection single bottleneck dynamic tcpan introduction computer network release winsizequeue utilization exercise consider minor change needed propagation delay notinconsequential example dynamic bottleneck example link offering potential competition √Ω√±b Ô¨Çow c√Ω√±d e√Ω√±f send trafÔ¨Åc throttle compete √Ω√±b trafÔ¨Åc choose window size build persistent queue persistent queue packet mean √Ω√±b trafÔ¨Åc wait m queue dc despite situation like usually use term bottleneck link precisely deÔ¨Åned concept example better term competitive link example say competitive link packet pair approach sender attempt measure physical bandwidth bottleneck link pair technique sender repeatedly sends pair packet receiver right receiver record time difference arrival sooner later expect arrive consecutively bottleneck router r queue sent right bottleneck bottleneck link competition introduction computer network release link t time difference arrival far end link physical bandwidth size time packet remain spaced time t rest journey theory receiver measure different difference different packet pair look minimum time difference time difference introduced bandwidth delay bottleneck link previous paragraph ultimate receiver able infer bottleneck physical bandwidth size thing mar analysis packet reordered arrive second arrive bottleneck router sent consecutively later network packet arrive second router transient queue large arrives s queue consecutive s queue ultimate difference likely reÔ¨Çect s higher outbound bandwidth r s additional analysis problem technique proposal improved technique known packet bunch mode tcp reno fairness synchronized loss brings question just isa fair division bandwidth starting place assume fair mean equal shall question doe end moment consider competing tcp reno connection connection blue c connection green b d bottleneck router r rtt router r use queuing r dc b layout illustrated shared link middle path known dumbbell topology time continue assume tcp reno hypothesis rtt connection experience loss doe assumption suspect explore tcp reno rtt bias tcp sender competing model reviewed previously Ô¨Årst look fairness argued rtt loss expression cwnd remained cwnd s incremented rtt loss expression cwnd decreased factor cwnd s decreased factor graphical version argument originally introduced plot cwnd andcwnd additive increase equal amount move point x y cwnd cwnd line parallel line equal multiplicative decrease move point x y line straight origin maximum network capacity max loss occurs exceeds max point x y cross line dynamic tcpan introduction computer network release max follows linemultiplicative follows line origin initial state beginning initial state additive increase move state angle line small increment denoted small arrowhead point loss occur state jump halfway origin state move incrementally line continues zigzag slowly line attempt increase cwnd faster linear mean increase phase parallel line fact veers away slow process convergence equal share finally timeline version argument assume path capacity path capacity r s queue size add packet rtt cwnd connection experience packet loss assume initially Ô¨Årst connection cwnd second cwnd t totalcwnd packet loss continued page tcp reno fairness synchronized loss introduction computer network release table continued previous page t second packet loss packet loss fourth loss s quite close loss s equal far fairness winning example faster additive increase kind timeline hypothesis increase increment changed connection connection start withcwnd assume loss occurs cwnd dynamic tcpan introduction computer network release t Ô¨Årst packet loss second loss essentially effect second connection s average cwnd throughput double Ô¨Årst connection change increment lead signiÔ¨Åcant change fairness general value ùõºincreases throughput relative tcp reno factor ofùõº example longer rtt example return standard tcp reno increase increment assume rtt connection double connection additional delay link longer rtt mean Ô¨Årst connection sends packet Ô¨Çights t timeline allow Ô¨Årst connection hefty assume loss occurs cwnd t Ô¨Årst loss continued page tcp reno fairness synchronized loss introduction computer network release table continued previous page t second loss caught value t shown loss ahead fourth loss Ô¨Åfth loss exactly interval represents steady state Ô¨Årst connection s average cwnd second connection s average worse Ô¨Årst connection sends windowful half interval Ô¨Årst connection sends packet second connection sends cost Ô¨Årst connection s longer rtt quadratic general argue formally Ô¨Årst connection rtt ùúÜ relative second s bandwidth reduced factor fair early thinking Ô¨Åx algorithm discussed recent attempt address problem tcp hybla discussed later tcp hybla alternatively simply deÔ¨Åne tcp reno s bandwidth allocation fair context approach particularly common issue hand making sure tcp implementation Ô¨Çows compete bandwidth roughly way tcp reno doe tcp reno s strategy understood greedy respect Ô¨Åxing internet large generally recognized difÔ¨Åcult option dynamic tcpan introduction computer network release tcp reno rtt bias let consider carefully way tcp allocates bandwidth connection sharing neck link relative rtts ùúÜ claimed slower connection s bandwidth reduced factor assumption uncontroversially assume fifo droptail queuing bottleneck router network ceiling cwnd point loss sufÔ¨Åciently large assume simplicity network ceiling c constant need assumption loss event experienced connection synchronized loss hypothesis debatable explore section Ô¨Årst general argument assumption let connection faster connection assume steady state reached connection experience loss cwnd hypothesis let c c denote respective window size point just loss cwnd value halved let n number rtts connection network ceiling reached time c n c approximately ùúÜif n reasonably large increase represents half corresponding cwnd c n c taking ratio respective side c ùúÜ solve c c ùúÜ relative bandwidth count packet sent interval loss connection cwnd averaging maximum value average cwnd s c c connection n rtts sends c packet connection slower rtt ùúÜrtts use assumption n reasonably large sends c ratio c connection sends fraction packet connection sends fraction hypothesis hypothesis say tcp connection share bottleneck link queue packet connection Ô¨Ånd dropped queue word stay long connection experience packet loss hypothesis relevent case tcp reno packet loss trigger change cwnd hypothesis convenience reasoning tcp taken literal fact largely true said certainly possible come hypothetical situation loss synchronized recall tcp reno connection s cwnd incremented rtt loss generally occur single extra packet generated increment cwnd arrives Ô¨Ånd queue generally speaking packet leaving queue fast arriving actual instant rare certainly conceivable time connection overÔ¨Çow queue packet halve cwnd short time interval connection miss moment entirely alternatively queue overÔ¨Çows lead effectively random selection lost packet certainly true queuing true sufÔ¨Åcient randomness packet arrival time Ô¨Ånite probability lost packet given loss event come connection hypothesis valid connection experience packet loss single rtt hypothesis fails connection experience loss tcp reno fairness synchronized loss introduction computer network release return possible failure hypothesis unsynchronized tcp loss tcp sender competing consider tcp reno simulation actual measurement doe entirely agree model problem emerge Ô¨Årst connection compete isolation form synchronization known phase effect phase effect introduce persistent bias second connection doe manage miss moment entirely discussed second paragraph section result larger cwnd hypothesis predict loss synchronization hypothesis assumes alllosses synchronized nomenon issue reasonable fraction loss event synchronized synchronized loss represent collective inefÔ¨Åciency use bandwidth immediate aftermath chronized loss likely bottleneck link underutilized connection using just cut sending rate half better utilization achieved loss event staggered point connection experience loss connection halfway loss example exercise following chapter loss synchronization real effect internet loss necessarily nized major contributing factor synchronization relatively slow response party involved packet loss diagram tcp reno fairness synchronized loss increment itscwnd leading overÔ¨Çow r link likely packet r s queue remains reasonable likelihood sender b experience loss cwnd particularly high simply packet arrived wrong instant congestion unfortunately take time clear extreme rtt ratio happens tcp reno fairness tcp connection rtt short answer shorter connection time throughput longer answer isn t quite easy set imagine argument necessary connection common bottleneck link ra m delay m m diagram connection want cwnd m packet competing link connection happy cwnd r s queue capacity bandwidth connection experience loss rtts say link share modest fraction loss trouble dynamic tcpan introduction computer network release cwnd fall test hypothesis taking constraint account scale number link transit capacity mean gbps bandwidth unrealistically large delay second issue realistically link likely bottleneck middle long path typical real scenario line diagrammed b c r local site bandwidth path local lan bandwidth site path bottleneck likely dramatically affected trafÔ¨Åc actual simulation using method tcp sender competing resulted average cwnd connection versus cwnd regardless link shared bottleneck link bottleneck path suggest connection saved cwnd minimum epilog tcp reno s core congestion algorithm based algorithm jacobson karel s paper year old concern tcp reno us bandwidth greediness issue doe use problem chapter consider alternative version tcp attempt solve problem associated tcp reno exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution dynamic tcp section example competition queue utilization derived formula q w w assumption bottleneck bandwidth packet unit time formula bottleneck bandwidth r packet unit time hint formula apply measure time unit delay d d aand d bneed refer normal time delay d measured normal time corresponds delay measured unit consider following network bandwidth marked c sending d using sliding window b idle c continues page epilog introduction computer network release continued previous page d suppose propagation delay link m propagation delay link rtt noload path m bandwidth product packet c us winsize queue size suppose start sending b using sliding window winsize size queue hint symmetry queue equally divided s packet c s c throughput rtt noload doe change number packet transit connection noload previous exercise average number data packet acks transit individual link original case c sender winsize active link b new case b sending winsize case link active link equal number ack packet transit reverse direction hint packet sent bottleneck rate following network link labeled propagation delay millisecond ignoring bandwidth delay s rtt noload m b s m bottleneck link bandwidth initially b sends d using winsize bandwidth product path begin sending increasing winsize share bandwidth s winsize point packet b queue r easiest solve repeated use observation number packet transit connection equal rtt noload time actual bandwidth received connection algebraic method example competition queue utilization used bandwidth normalized propagation delay given need multiplied consider path diagram example cross trafÔ¨Åc rtt variation dynamic tcpan introduction computer network release link number bandwidth assume c sender propagation delay link average packet transit link direction c us winsize sufÔ¨Åcient saturate bottleneck link b propagation delay link c us winsize equal transit capacity packet way link link link suppose network layout example cross trafÔ¨Åc rtt variation bandwidth bandwidth delay shown making rtt noload m rtt noload connects b c connects window size w aand w cso connection share bottleneck bandwidth equally queue b increasing w aand w cby packet leaf connection packet s queue bandwidth shared equally s hint bandwidth exceed c s packet accumulate bandwidth observe happened queue packet leave faster arrive s extra packet queue b dc m delay m delay link m propagation delay bandwidth suppose network layout previous exercise suppose connection settled window size b contributes packet s queue connection bandwidth queue s winsize incremented initially leading contributing s queue steady state reached extra packet distributed exercise introduction computer network release hint s winsize increase s overall throughput rise bandwidth restriction link suppose network layout exercise modiÔ¨Åed rtt noload rtt noload different bandwidth idle throughput suppose c window size transmitting packet queue c s winsize hint c s throughput b suppose c s winsize idle case transit capacity m packet c packet s queue begin sending winsize chosen c s contribution s queue equal c s winsize remains c s s queue usage hint Ô¨Ånd transit capacity throughput c suppose rtt noload c s winsize Ô¨Ånd winsize make c s contribution s queue equal way address reduced bandwidth tcp reno give connection tions use increase increment us aimd instead aimd aimd k k arbitrary scaling factor applies construct table style example longer rtt showing result connection using strategy connection rtt rtt start connection cwnd assume loss occurs cwnd b explain strategy desirable connection direct lan rtt m second connection long path rtt sec hint cwnd value connection apply connection present suppose kb packet sent probe minimum time measured arrival estimated bottleneck bandwidth consider following cause network delay case assume acks travel instantly b intermediate router bandwidth delay bandwidth delay negligible ii intermediate link propagation delay bandwidth delay negligible iii intermediate router bandwidth delay steadily replenished queue packet source diagram example cross trafÔ¨Åc rtt variation suppose case technique packet pair used measure bandwidth assuming packet reordering minimum time interval expect dynamic tcpan introduction computer network release case b corresponding value measured bandwidth packet second purpose bandwidth measurement assume negligible bandwidth delay case ii sec suppose sends packet b using tcp reno propagation delay second bandwidth packet m rtt actual window size reached packet b rtt actual window size reached packet exercise introduction computer network release dynamic dynamic tcp tcp reno fair ask establish mean fairness look carefully behavior tcp reno connection value cwnd increase decrease according tcp sawtooth particular analyze average cwnd recall average cwnd divided rtt connection s average throughput momentarily ignore fact rtt constant error introduces usually small end establishing fundamental relationship tcp reno cwnd packet loss rate end declaring maybe best assert tcp reno doe reno fair establish rule tcp reno friendliness chapter discusses active queue management idea router make assumption tcp trafÔ¨Åc better manage Ô¨Çows passing turn router advantage tcp s behavior provide better overall performance chapter close tcp problem related tcp issue notion fairness deÔ¨Ånitions fair allocation bandwidth Ô¨Çows sharing bottleneck link fairness fairness divide bandwidth way tcp reno additional approach deciding constitutes fair allocation bandwidth fairness natural generalization fairness case Ô¨Çows capped min fairness Ô¨Çow bandwidth increased decreasing smaller Ô¨Çow rate alternatively maximize bandwidth Ô¨Çow Ô¨Çow Ô¨Åxed maximize Ô¨Çow bandwidth intuitive explanation distribute bandwidth tiny increment equally Ô¨Çows bandwidth exhausted meaning divided equally Ô¨Çow reach externally imposed bandwidth cap point continue incrementing remaining Ô¨Çows time encounter Ô¨Çow s external cap example consider following connection link bandwidth kbps link kbps starting zero increment allocation connection kbps connection point connection maxed capacity link continue allocating remaining kbps equally end kbps introduction computer network release cr kbps kbps example known topology suppose following network b c d connection d covering link connection link bandwidth bandwidth allocation incrementally distributed connection Ô¨Årst point link bandwidth maxed occurs connection link bandwidth fairness mean connection equal share proportional fairness bandwidth allocation rate r nyfor n connection satisÔ¨Åes proportional fairness legal allocation bandwidth allocation s ny aggregate proportional change satisÔ¨Åes r r alternatively proportional fairness mean sum log r r r n minimized connection share bottleneck link proportional fairness achieved equal share consider following network b c suppose link bandwidth unit connection proportionally fair solution link bandwidth link bandwidth link total bandwidth change bandwidth link link change equilibrium achieved point reduction link result increase bandwidth divided proportion mathematically x throughput connection minimizing log x dynamic tcpan introduction computer network release proportional fairness partially address problem tcp reno s bias connection speciÔ¨Åcally tcp s bias proportionally fair tcp s response closer proportional fairness fairness tcp reno loss rate versus cwnd turn express connection s average cwnd term packet loss rate p egp packet lost relationship come assuming packet loss network ceiling reached assume network ceiling reached packet lost dispense counting cluster related loss say rtt single loss event let c represent network ceiling cwnd reach c packet loss occurs c constant stable network c usually doe vary assume constant thencwnd varies c packet drop occurring cwnd c reached let n consecutive packet loss event tooth tcp connection total packet sent Ô¨Çights sum expressed algebraically n loss rate packet loss rate p average cwnd scenario n average cwnd minand max let m n represent average cwnd cwnd mean express loss rate term m number packet loss let solve cwnd mean term p m mean square root seen form given network loss rate set window size loss rate ultimately tied network capacity interested maximum cwnd instead mean multiply bandwidth available connection follows rtt stant bandwidth cwnd rtt p author consider tcp reno model take account measured frequency coarse timeouts addition response leading cwnd halving develop related formula additional term bottleneck queue capacity increase cwnd number packet loss increase connected queue large bottleneck link utilized bandwidth longer increase way view formula recall number packet tooth tooth area squaring side formula say tcp reno tooth area proportional square average tooth height cwnd mean network capacity increase cwnd mean increase tcp reno loss rate versus cwnd introduction computer network release irregular teeth preceding assumed teeth size problem considered assumption packet face small loss probability interval packet loss exponentially distributed model turn formula hold constant change understand irregular teeth lead bigger constant imagine sending large number k packet encounter n loss loss regularly spaced tcp graph n equally sized teeth packet n loss randomly distributed teeth larger smaller average tooth height case exercise number packet tooth generally related square height tooth larger teeth count disproportionately random distribution higher total number packet delivered higher mean cwnd exercise simple simulation generates numeric estimate constant note loss uniformly distributed random interval ideal model tcp presence congestion loss event far statistical independence particular immediately following loss loss unlikely occur queue time Ô¨Åll unsynchronized tcp loss tcp reno rtt bias considered model loss event fully synchronized queue tcp reno connection experience packet loss model rtt bandwidth wherecwnd cwnd respective average value cwnd happens loss event connection neat correspondence derive ratio loss event precisely tcp loss response connection versus connection term bandwidth rtt ratio using hypothesis note comparing total number loss event loss response total number tcp reno teeth large time interval relative loss probability connection numerically loss second connection dint smaller rtt send packet loss connection fewer loss packet let losscount losscount number loss response connection long time interval ithconnection s loss probability p losscount bandwidth losscount cwnd result tcp reno loss rate versus cwnd cwnd pi p equating losscount cwnd losscount cwnd dividing canceling losscount cwnd rtt dynamic tcpan introduction computer network release make use relative loss rate just little let ùõædenote losscount ratio cwnd rtt rtt cwnd bandwidth cwnd rtt note connection fewer loss event exact inverse proportion rtt bandwidth rtt alsocwnd tcp friendliness suppose sending packet using protocol manage congestion particular manage congestion way treat connection particularly tcp reno connection fairly example suppose sending interactive audio data congested environment nature data wait recovery use udp tcp suppose modify encoding reduce sending rate necessary using adaptive encoding prefer absence congestion sending rate high end want relatively uniform rateof sending tcp sawtooth lead periodic variation throughput wish avoid application monitor number packet Ô¨Çight network time packet small count byte instead use count instead tcp cwnd say given communication strategy tcp friendly number packet network time approximately equal tcp reno cwnd meanfor prevailing packet loss rate note assuming loss independent event deÔ¨Ånitely quite right close time interval connection sharing common bottleneck expected experience approximately packet loss rate point tcp friendliness regulate number connection s outstanding packet presence competition tcp reno achieve degree fairness absence competition number connection s outstanding packet bounded transit capacity plus capacity bottleneck queue protocol egtcp vega tcp vega rate trafÔ¨Åc rtp absence competition loss rate zero simply overÔ¨Çow queue way approach tcp friendliness start deÔ¨Åning reno fairness bandwidth allocation tcp reno assigns face competition tcp friendliness simply mean given connection share return tcp friendliness context general aimd aimd revisited tcp friendliness introduction computer network release tfrc tfrc rate control rfc us loss rate experienced p formula calculate sending rate allows sending rate tfrc based loss rate increase sending rate adjusted downwards adjustment smoothly tcp giving application gradually changing transmission rate rfc tfrc designed reasonably fair competing bandwidth tcp Ô¨Çows Ô¨Çow reasonably fair sending rate generally factor sending rate tcp Ô¨Çow condition emphasis added factor considered close case penalty having smoother throughput tcp competing fairly bandwidth tfrc responds slowly tcp change available bandwidth tfrc sender include packet sequence number timestamp estimated rtt tfrc receiver charged sending feedback packet serve partial ments include value loss rate previous rtt response packet include information current actual rtt sender use update estimated rtt tfrc receiver send packet rtt actual response protocol part loss rate increase primary feedback mechanism calculate new lower sending rate using variant cwnd p formula shift new rate rate cut half loss rate p quadrupled newer version tfrc various feature responding promptly unusually sudden problem normal use calculated sending rate used time rtp protocol rtp coupled tfrc rtp based protocol streaming data rtp feature include sender establishes rate window size sending packet receiver return periodic summary loss rate acks relatively infrequent rtp suitable multicast use limited ack rate important packet sent hundred recipient sender adjusts cwnd based loss rate cwnd p rule usually sort stability rule incorporated avoid sudden change rate common rtp example typical v oip connection using kbps rate send packet m containing byte voice data plus header dynamic tcpan introduction computer network release combination rtp tfrc useful underlying application application function available rate reduced case simple v oip encoding rtp voip return rtp transport protocol rtp quic transport protocol quic us mechanism compatible cubic tcp tcp cubic isn t quite tcp reno quic just easily used tfrc achieve dccp congestion control saw dccp earlier dccp dccp dccp includes set management proÔ¨Åles connection choose proÔ¨Åle best Ô¨Åts need standard one proÔ¨Åle rfc tfrc proÔ¨Åle rfc proÔ¨Åle packet acknowledged tcp acks sent arrival data packet dccp acks cumulative use format ensures acknowledgment received reliably situation sender maintains cwnd tcp reno sender incremented rtt loss halved event packet loss sliding window used cwnd doe represent window size instead sender maintains estimated flightsize tcp reno fast recovery sender s best guess number outstanding packet rfc referred pipe value sender allowed send additional packet long pipe cwnd proÔ¨Åle includes slow start mechanism tfrc proÔ¨Åle ack sent rtt acks sent frequently occasionally necessary sender send ack ack tfrc generally dccp sender using tfrc proÔ¨Åle rate limited window size dccp provides convenient programming framework use tfrc complete linux world traditional socket interface developer doe deal tfrc rate calculation directly aimd revisited tcp tahoe chose increase increment loss decrease factor approach tcp friendliness retain tcp s strategy change number suppose denote aimd ùõº ùõΩ strategy incrementing window size byùõºafter window loss multiplying window size ùõΩ loss mean window reduced tcp reno aimd aimd ùõº ùõΩ protocol follows sawtooth slanted tooth slope combination ùõº ùõΩ possible dimension tooth sawtooth somewhat constrained ùõºandùõΩ let h maximum height tooth let w width measured aimd revisited introduction computer network release rtts loss occur regular interval height tooth left low edge ùõΩ h total vertical difference ùõΩh vertical difference ùõºw ùõºw value labeled rightmost teeth diagram equation mean proportion tooth h w determined ùõºandùõΩ finally mean height tooth primarily interested aimd ùõº ùõΩ case tcp friendly tcp friendliness tcp friendliness mean aimd ùõº ùõΩ connection loss rate tcp reno meancwnd tooth sawtooth represents loss number packet sent tooth using h w previous paragraph hw geometrically number packet sent tooth area tooth connection loss rate teeth area tcp friendliness mean connection mean cwnd average tooth height teeth connection area average height width rtts rate loss unit time equal just rate loss number packet diagram show tcp reno tooth blue unfriendly aimd ùõº ùõΩ teeth left red friendly teeth right green second friendly tooth superimposed reno tooth h unfriendly reno friendly reno aimd teeth reno tooth showing additional dashed line central reno tooth demonstrate reno proportion horizontal dashed line representing cwnd mean height w w width rightmost green tooth superimposed reno tooth h know h setting expression equal canceling w multiplying solving ùõΩwe small reduction factor ùõΩgets closer protocol remain appropriately reducing ùõº aimd having small ùõΩmeans connection doe sudden bandwidth drop loss occur important application rely regular rate data transfer voice application said slowly responsive contrast tcp s cwnd rapid response dynamic tcpan introduction computer network release aimd convergence fairness aimd ùõº ùõΩ protocol converge fairness competing tcp reno equal rtts consequence decreasing ùõΩis fairness longer arrive example assume tcp reno rtt bias loss event competing connection synchronized recall tcp reno connection aimd ùõº ùõΩ initial difference connection respective cwnds d d reduced half loss event suppose aimd ùõº ùõΩ connection value ùõΩ difference d theircwnd value connection increase cwnd byùõºeach rtt loss occurring d remain constant loss event d reduced factor corresponding loss event d reduced d d twice large connection converge fairness d twice long active queue management active queue management aqm mean router active step manage queue primary goal aqm reduce excessive queuing delay cf bufferbloat secondary goal improve performance tcp connection constitute vast majority internet trafÔ¨Åc router signaling tcp connection reduce cwnd overall queuing delay reduced generally router manage queue marking packet dropping router drop packet space new arrival fall category active management packet dropped queue run completely space queue management congestion knee queue just start build marking appropriate queue start approach cliff broadly speaking priority queuing random drop mechanism look queuing considered form aqm goal manage overall queue size fair queuing hierarchical queuing queuing scheduling mechanism commonly associated aqm category red successor especially codel discussion potential beneÔ¨Åts fair queuing queue management fair queuing bufferbloat bufferbloat saw tcp bottleneck link utilization tcp reno connection happiest queue capacity bottleneck router exceeds bandwidth transit capacity easy carried away calculation tcp queue size suggested optimum router buffer size tcp reno hundred megabyte ram cheap space hard say queue size real world tend larger end scale excessive delay excessive queue capacity known bufferbloat course excessive matter perspective trafÔ¨Åc interested bulk tcp Ô¨Çows large queue good interested trafÔ¨Åc like voice interactive video simply fast load bufferbloat problem large queue lead delay variability jitter active queue management introduction computer network release backbone router class offender residential router queue capacity time average bandwidth product meaning queuing delay potentially larger propagation delay large queue linux system default queue size packet issue play interactive trafÔ¨Åc trafÔ¨Åc rfc result proposal running router smaller queue example reduce bottleneck link utilization single tcp Ô¨Çow multiple tcp Ô¨Çows having unsynchronized loss situation better router manager deciding queue capacity vexing issue codel algorithm offer great promise start earlier strategy decbit technique proposed router encountering early sign congestion marked packet forwarded sender used marking adjust window size known decbit reference author employer implemented decnet closely related osi protocol suite apparently implementation idea decbit eventually form ecn ecn like tcp s congestion response applies control near congestion cliff decbit proposed introducing control congestion minimal just congestion knee decbit solution bufferbloat decbit era memory expensive queue capacity seldom excessive decbit mechanism allowed router set designated congestion bit set data packet forwarded status bit echoed corresponding ack sender hear congestion decbit router deÔ¨Åned congestion average queue size greater congestion meant connection just past knee router set congestion bit condition met target decbit sender packet marked congested fewer packet marked cwnd incremented marked cwnd decreased factor note different tcp approach decbit begin marking packet congestion knee tcp reno responds packet loss occur cliff consequence mechanism decbit shoot limited queue utilization unlike tcp reno congested router decbit connection attempt packet router s queue tcp reno connection Ô¨Åll remainder queue decbit principle compete poorly connection sender ignored marked packet simply tried cwnd large possible tcp vega tcp vega strives limited queue utilization tcp reno versus tcp vega investigate simulation fairly tcp vega competes tcp reno dynamic tcpan introduction computer network release explicit congestion notiÔ¨Åcation ecn ecn equivalent decbit actual mechanic quite different current version speciÔ¨Åed rfc modifying earlier version rfc ip header contains ecn Ô¨Åeld consisting transport ect bit congestion experienced ce bit ecn Ô¨Åeld shown header ect bit set sender indicate router able use ecn mechanism actually older rfc name bit serve purpose tcp header contains additional bit bit ece congestion window reduced cwr bit shown fourth row tcp header original goal ecn improve tcp throughput eliminating actual packet loss resultant timeouts bufferbloat issue ecn middleboxes early day ecn Ô¨Årewalls responded packet cwr ece bit set dropping returning spoofed rst packet sender rfc detail discussion nonstandard use rst good example middleboxes obstacle protocol evolution middleboxes router set ce bit ip header drop packet possibly queue half lieu red drop decbit receiver echo ce status sender ece bit ack reason using ece bit bit belongs tcp header tcp layer assured control tcp sender treat acks ece bit set loss occurred cwnd cut half actual loss arriving acks pace continued sending fast recovery mechanism needed tcp sender responded ece bit halving cwnd set cwr bit receiver received packet ce bit set ip layer set ece bit subsequent acks receives data packet cwr bit set provides reliable communication congestion information help sender respond just multiple packet loss single windowful note initial packet marking ip layer generation marked ack sender response marked packet tcp layer true decbit layer different name packet dropped ce bit set router doe notmark waiting packet queue reach certain threshold marked packet usual wait queue turn forwarded sender Ô¨Ånds congestion rtt versus rtt plus packet transmission time fast retransmit earlier legacy strategy require router dropping packet immediately send sender icmp source quench packet faster way fastest possible way notify sender loss widely implemented ofÔ¨Åcially deprecated rfc ecn congestion treated way packet drop ecn competes fairly tcp reno rfc proposal ofÔ¨Åcial slightly amend mechanism described active queue management introduction computer network release support detection receiver attempt conceal evidence congestion receiver setting ece bit ack data packet arrives marked having experienced congestion unscrupulous incorrectly implemented receiver gain greater share bandwidth sender maintains larger cwnd amendment detects erasure ece bit ecn bit middleboxes new strategy known ecn nonce treat ecn bit ect ce single unit value used sender value used router congestion marker aware sender mark data packet randomly choosing known ect known ect choice encodes nonce bit ect representing nonce bit ect representing nonce bit viewed value second ecn bit receiver expected addition setting ece bit return running sum nonce bit new bit called n bit immediately precedes crw bit sum data packet received previous packet loss packet point receiver attempt conceal congestion leaving ece bit zero receiver properly set n bit doe know ect ect used packet marked experiencing congestion receiver chance guessing correctly time successful guessing increasingly unlikely detected sender stop using ecn choose smaller cwnd precaution described ecn mechanism implemented router just easily mented switch available commercial switch red traditional router drop packet queue sender overt indication cliff looming ecn improves informing tcp connection impending cliff reduce cwnd actually losing packet idea random early detection red router introduced router allowed drop occasional packet earlier say queue half early packet drop provide signal sender slow signaling loss packet lost dropped manner usually packet windowful connection lost classic tcp reno particular behaves poorly multiple loss window red able avoid multiple loss primary goal red ecn improve tcp performance note red preceded ecn year red strictly speaking queuing discipline sense queuing discipline fifo helpful think red technique router use improve performance tcp trafÔ¨Åc designing algorithm trivial predecessor red known early random drop erd gateway simply introduced small uniform drop probability p queue reached certain threshold address tcp reno issue reasonably dropping uniform probability p lead surprisingly high rate multiple drop cluster long stretch drop uniformity needed drop regular interval uniform actual red algorithm doe thing base drop probability p rise steadily minimum queue threshold q minto maximum queue threshold q max tively absolute queue capacity maximum threshold drop probability quite small dynamic tcpan introduction computer network release base probability p baseincreases linearly range according following formula p maxi maximum probability value p maxproposed q min q qmin second time pass red drop actual drop probability p actual begin rise according formula pactual count number packet sent red drop p actual p base p actual rise red drop guaranteed basepackets provides mechanism red drop uniformly spaced unlikely occur window connection random unlikely red drop remain synchronized single connection targeting unfairly signiÔ¨Åcant drawback red choice various parameter decidedly ad hoc clear set tcp connection small large bandwidth product handled appropriately set given output bandwidth probability p baseshould example roughly winsize tcp connection vary order magnitude rfc recommended red successor rfc backed away recommending instead appropriate aqm strategy implemented detail left discretion router manager red look application red guarantee adt paper proposes adaptive algorithm maximum queue capacity adjusted interval minute order maintain speciÔ¨Åc desired target end interval available queue capacity increased decreased depending link utilization target adt doe selectively drop packet space arriving packet current queue capacity accepted adt doe good job adjusting overall queue capacity meet circumstance change slowly example size user pool adt doe respond Ô¨Çuctuations particular doe attempt respond Ô¨Çuctuations occurring single tcp reno tooth adt doe maintain additional queue space transient packet burst codel codel algorithm pronounced coddle attempt like red use signaling loss encourage connection reduce queue utilization allows codel maintain large total queue capacity available absorb burst time maintaining average smaller level actual queue utilization achieve codel able distinguish transient queue spike utilization persisting multiple rtts canonical example tcp reno s queue buildup edge sawtooth unlike red codel essentially tunable parameter adapts wide range bandwidth trafÔ¨Åc type internet draft reducing bufferbloat explict goal codel active queue management introduction computer network release codel measure minimum value queue utilization designated short time period known theinterval interval intended little larger connection rtt noload value typically statistic codel easily able detect tcp reno connection s phase connection interval codel measure queue utilization term time packet spends queue sojourn time size queue byte measure proportional router use time space mean codel algorithm independent outbound bandwidth doe need conÔ¨Ågured bandwidth codel s target minimum queue utilization typically interval m reasonable minimum utilization smaller action taken minimum utilization larger codel enters dropping mode drop packet begin scheduling additional packet drop last minimum utilization target codel return normal mode dropping mode begin second drop scheduled interval Ô¨Årst drop second drop occur codel able return normal mode codel remains dropping mode additional packet drop scheduled time dropping rate accelerates proportion n minimum time packet spend queue small codel able return normal mode trafÔ¨Åc consists single tcp reno connection codel drop packet soon queue utilization hit cause cwnd halve likely making second packet drop unnecessary connection s rtt approximately equal interval link utilization queue capacity Ô¨Åxed transit capacity exercise modest number unsynchronized tcp connection rate climb Ô¨Ågs trafÔ¨Åc consists tcp reno connection drop necessary force connection halve cwnd s greatly reduce collective queue utilization trafÔ¨Åc consists single udp connection high rate bottleneck codel work case drop packet need order drive queue utilization cycle repeat necessary additional feature codel dropping mode quickly dropping rate pick left example application codel limiting delay tcp problem tcp reno algorithm consequence connection cwnd needed implies small unrealistically small rate noise loss loss congestion frequent longer negligible window signiÔ¨Åcantly smaller following table rfc based rtt second packet size byte various throughput cwnd value represent bandwidth product dynamic tcpan introduction computer network release tcp throughput mbps rtts loss cwnd packet loss rate p note small value loss probability needed support gbps work bit error rate Ô¨Åber optic data link ala physical bit error rate considered acceptable way support window size Ô¨Ånal row use correcting code otn link optical transport network reduce bit error rate source noise loss queue overÔ¨Çows ethernet switch switch tend shorter queue router gbps switch forwarding packet microsecond rate burst doe long overrun switch s queue similar table expressing cwnd term packet loss rate packet loss rate p cwnd rtts loss table indicate large window size require extremely small drop rate problem maintain large window path large bandwidth product primary issue noise packet loss bring window size tially far secondary issue random drop signiÔ¨Åcant increase cwnd reasonable level quite slow network ceiling ets normal sawtooth return ceiling loss rtts slow sender average throughput saw tcp bottleneck link utilization hap seriously network ceiling double packet decrease competing trafÔ¨Åc sender additional rtts reach point link saturated following diagram network ceiling ideal tcp sawtooth shown green ideal tcp sawtooth range ceiling diagram noise loss occur red x s bringing throughput lower average level tcp problem introduction computer network release timecwnd tcp green red random loss diagram red random loss occur time green congestion loss tcp problem closely related problem problem link path relatively high rate classic example link tcp used path loss rate tcp reno loss rate versus cwnd indicates sender expect average cwnd matter high bandwidth product difference problem problem scale problem involves unusually large value p problem involves cumstances p quite low low given loss rate p product excess p sender unable maintain cwnd close network ceiling tcp problem tcp problem partially related previous encountered tcp user long rtts dramatic example involves satellite internet link satellite internet communication way involves routing signal satellite geosynchronous orbit round trip involves trip km propagation delay bandwidth mbps satellite isps usually provide quite limited bandwidth peak bandwidth higher bandwidth product packet especially high typical queuing delay included fact take second reach moderate cwnd annoyance application isps provide acceleration mechanism identify tcp connection Ô¨Åle download usually involves transferring Ô¨Åle satellite portion path using proprietary protocol dynamic tcpan introduction computer network release use using tcp connection involve multiple bidirectional exchange egthose using vpn connection epilog tcp reno s core congestion algorithm based algorithm jacobson karel s paper year old concern tcp reno us bandwidth greediness issue doe use problem chapter consider alternative version tcp attempt solve problem associated tcp reno exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution dynamic tcp value ùõºorùõΩbelow Ô¨Ånd value aimd ùõº ùõΩ b c pick pair smallest ùõº draw sawtooth diagram approximately proportional ùõºshould slope linear increase ùõΩshould decrease fraction end tooth suppose tcp Ô¨Çows compete Ô¨Çows rtt Ô¨Årst Ô¨Çow us aimd second us aimd Ô¨Çow necessarily connection compete fairly average rate assume regular loss use method aimd revisited hint Ô¨Årst apply argument Ô¨Çows teeth width w average height average height longer expressed term w ùõºandùõΩ use diagram tooth h h height tooth equate average height h h finally use ùõºiw eliminate h h using result previous exercise aimd ùõΩ equivalent sense competing fairly aimd suppose kb packet sent probe minimum time measured arrival estimated bottleneck bandwidth consider network fairness epilog introduction computer network release b c d suppose connection addition connection link allocation b suppose single connection connection connection allocation consider network b c suppose connection connection connection allocation proportionally fair suppose use tcp reno send k packet r rtt interval transmission experience n loss event tcp cwnd graph n sawtooth peak height n nn start graph cwnd end graph cwnd sum n n ni particular average tooth height independent distribution loss event dynamic tcpan introduction computer network release suppose bandwidth product network path packet trafÔ¨Åc path single tcp reno connection following case Ô¨Ånd average cwnd approximate number packet loss reciprocal loss rate answer collectively reÔ¨Çect formula tcp reno loss rate versus cwnd bottleneck queue capacity close zero b bottleneck queue capacity packet c bottleneck queue capacity packet suppose tcp reno regularly spaced sawtooth peak height packet loss come pair just separation loss pair counted separately n large spacing loss negligible net effect tooth range height tcp reno loss rate versus cwnd cwnd p constant constant hint given information determine cwnd meanand number packet sent tooth loss rate p number packet sent tooth exercise introduction computer network release n n previous exercise suppose tcp transmission teeth height pair consecutive large teeth additional loss resulting additional tiny teeth n large tiny teeth ignored variant tcp used tiny teeth cwnd assumed cut half course tiny teeth cwnd doe change tooth width height ranging n k loss tooth ratio cwnd p term answer reduce derived tcp reno loss rate versus cwnd n shown suppose tcp reno tooth start cwnd c contains n packet let w width tooth rtts usual w hint maximum height tooth average height c equation relating c w n solve w using quadratic formula suppose implementation tcp formula relating cwnd c time t measured rtts recent loss event c versus tcp reno s c c t sawtooth look like following number packet sent tooth width t rtts reciprocal loss rate p approximately accepted faith shown integrating t looking dynamic tcpan introduction computer network release formula average cwnd derive formula expressing average cwnd term loss rate hint exponent p versus formula tcp reno loss rate versus cwnd using tcp assumption exercise cwnd incremented rtt cwnd increment rule expressed cwnd Ô¨Ånd value ùõº using tcp assumption exercise cwnd proportional p loss rate assuming following boundary tooth follows curve cwnd c t tooth right boundary left boundary c t t previous exercise assumed effect t cwnd dropped loss event assume multiplicative decrease effect number packet sent tooth mean cwnd divided t t note teeth higher proportionately narrower hint t eliminate t equation suppose tcp reno run packet equally likely lost number packet n tooth distributed exponentially n log x x uniformly distributed random number range x k doe really matter mean interval loss write simple program simulates tcp reno run end simulation output estimate constant c formula cwnd mean p value formula irregular teeth hint need simulate packet transmission simply create series teeth random size maintain running total number packet sent number rtt interval needed send number loss event teeth loss event tooth update packet sent tooth rtt interval tooth tooth loss event loss event marking end tooth occurs speciÔ¨Åc value cwnd tooth begin height c n random value number packet tooth previous exercise introduction computer network release exercise tooth width rtts w c peak loss event occurs whencwnd update total tooth possible run simulation million teeth modest time suppose tcp connection rtt share bottleneck link competition size bottleneck queue negligible compared bandwidth rtt noload product loss event occur regular interval exercise previous chapter loss synchronized connection use total capacity assume tcp connection loss common fact alternate loss regular interval following diagram c connection maximum cwnd connection experience loss connection havecwnd c combined transit capacity path term c queue size negligible transit capacity approximately sum cwnd s point loss b utilization hint queue size negligible approximately ratio average total cwnd transit capacity dynamic newer tcp implementation rise tcp reno tcp alternative reno developed attempt address perceived shortcoming reno speciÔ¨Åc attempt address bandwidth problem considered tcp problem focus primarily entirely tcp reno foible issue tcp reno s greediness term queue utilization problem tcp problem experienced say user generally speaking tcp implementation respond congestion cliff respond packet loss respond congestion knee detect increase rtt associated Ô¨Ålling queue strategy referred based respectively term rise rtt tcp implementers tweak loss response multiplicative decrease tcp reno way tcp increase cwnd absence loss rich variety option available concept monitoring rtt avoid congestion knee Ô¨Årst introduced tcp vega tcp vega striking feature tcp vega absence competition queue Ô¨Åll congestive loss tcp sawtooth word inevitable loss occur mechanism reviewed continue use tcp newreno recovery strategy implementation relatively recent sender generally expect receiving end support sack tcp allows rapid recovery multiple loss choosing tcp linux linux system tcp mechanism set writing appropriate string equivalently passing string parameter sysctl command dard option author s listed available loaded explicitly egwithmodprobe list come highspeed htcp hybla illinois vega veno westwood bic cubic introduction computer network release review roadmap overview tcp cubic currently default linux implementation tcp bic precursor tcp mechanism set basis user select mechanism listed entry copied root user tcp Ô¨Çavors available default loaded modprobe module containing tcp implementation generally uname executing l directory yield author s following load tcp vega use modprobe reboot module manually unloaded point contain vega c language select linux congestion control mechanism socket creation connection including setsockopt actual example tl programming example complete c example include include char vega int slen strlen int rc setsockopt sock slen rc error checking return code essential determine algorithm request succeeded Ô¨Åle available newer tcp implementationsan introduction computer network release stalk client allowing specification tcp congestion algorithm socket import sys import argv localhost portnum deftalk rhost iflen argv rhost argv iflen argv argv print looking address rhost try dest gethostbyname rhost exceptgaierror asmesg host errno print errstr return print got dest dest portnum s socket defined cong byte try cong oserror mesg errno errstr print mechanism available √£√±algorithm errstr return addr make actual connection ifres print connect port portnum failed exit true try buf input break buf buf byte buf talk choosing tcp linux introduction computer network release version python did deÔ¨Åne constant value c include Ô¨Åle mentioned comment fortunately python simply pass parameter setsockopt underlying c work supposedly deÔ¨Åned python desideratum goal tcp implementation attempt Ô¨Åx problem unfair tcp reno point allow cwnd increase aggressively permitted reno let review tcp version constraint new tcp exhibit reasonable fairness tcp reno lower bandwidth product particular signiÔ¨Åcantly lower cwnd competing tcp reno bandwidth unfairly tcp reno connection comment unfairness reno notwithstanding new tcp competing tcp reno leave reno connection bandwidth competing reno connection possible higher bandwidth product tcp reno doe efÔ¨Åciently use available bandwidth new tcp extent possible restrict consuming previously unavailable bandwidth eating signiÔ¨Åcantly bandwidth competing tcp reno connection issue multiple connection using new tcp receive similar width allocation similar rtts dissimilar rtts bandwidth proportion ideally worse tcp reno ideally want relatively rapid convergence fairness fairness hollow promise connection transferring gigabyte beneÔ¨Åt tcp reno connection halve difference respective cwnds shared loss event saw aimd convergence fairness slower convergence possible harder hope fairness competing new implementation new implementation competing tcp reno new tcp make use careful rtt measurement shall measurement subject considerable degree noise new tcp implementation reasonably robust face inaccuracy rtt measurement modest transient measurement error make protocol behave badly direction low cwnd high finally new tcp ideally try avoid cluster multiple loss loss event multiple loss example problem tcp newreno sack seen take rtt retransmit lost packet sack multiple loss complicate recovery new tcp increment cwnd n rtt potential network ceiling exceeded n rtt making cluster n loss reasonably likely occur loss likely distributed connection just tcp addressing issue need cwnd n fairly large time apparently conÔ¨Çicting ideal trick reduce n packet loss appears imminent tcp illinois tcp cubic mechanism place reduce multiple loss newer tcp implementationsan introduction computer network release rtts exact performance faster tcp consider matter exact performance tcp reno inÔ¨Çuenced rtt affect individual tcp performance competition different tcp reference typical rtts chicago various place west coast m europe m southeast asia m roadmap start highspeed tcp early relatively simple attempt address problem group tcp vega fast tcp tcp westwood tcp illinois compound tcp involve congestion control sender carefully monitor rtt minute increase signal queuing tcp vega date earliest tcp fact predates widespread recognition problem goal prove build tcp absence competition transfer arbitrarily long stream data loss utilization group consisting tcp veno tcp hybla dctcp represent tcp tcp veno reasonable tcp candidate primary goal improve tcp mance lossy link tcp hybla targeted user long rtts dctcp internal connection datacenter thing short rtts triad represents newer attempt solve problem tcp tcp cubic tcp bbr tcp cubic default tcp linux highspeed tcp early proposed Ô¨Åx problem highspeed tcp documented rfc floyd highspeed tcp called use longer avoid confusion entirely unrelated highspeed tcp adjusts parameter ùõºandùõΩso larger value cwnd rate cwnd increase loss faster cwnd crease loss event smaller allows efÔ¨Åcient use available bandwidth large product correspondingly cwnd range tcp reno work highspeed tcp s throughput modestly larger tcp reno s compete relatively fairly threshold highspeed tcp diverging tcp reno loss rate tcp reno occurs cwnd point highspeed tcp gradually increase ùõºand decrease overall effect outperform tcp reno factor n n cwnd according table n rtts introduction computer network release interpreted unfairness highspeed tcp respect tcp reno fairness arguably close point tcp reno likely using bandwidth available tcp problem cwnd n cwnd algebraic expression n cwnd n cwnd atcwnd smaller cwnd stick specify detail highspeed tcp start considering gbps link fastest erally available time highspeed tcp developed rtt m bandwidth product work packet central strategy highspeed tcp choose desired loss rate average cwnd packet number empirically determined quite bit larger corresponding tcp reno loss rate packet tcp problem context larger congestion loss rate better loss rate reciprocal tooth area turn great deal latitude choosing tooth area adjusting parameter determining ùõºandùõΩforcwnd highspeed tcp us interpolation cover cwnd value highspeed tcp rule extend larger cwnd s necessarily expectation work start tcp reno relationship cwnd tcp reno loss rate versus cwnd rfc us numerator formula Ô¨Åt relationship cwnd pair cwnd p value turn yield cwnd derive tcp reno multiplier n cwnd using tcp reno relationship cwnd n synchronized connection eliminating p solving step deÔ¨Åne value cwnd ùõΩ cwnd allowing build actual implementation ùõºandùõΩare allowed vary cwnd assume slowly given connection ùõºvalues relatively constant ùõΩvalue maximum cwnd give standard aimd tooth newer tcp implementationsan introduction computer network release h average cwnd whencwnd want loss rate meaning area tooth w w rtts erally ùõºw combining cwnd rfc suggests cwnd making value ùõΩfor ues ofcwnd determined logarithmic interpolation corresponding value ùõº cwnd set formula rate corresponding bit error rate large order magnitude higher rate packet loss hand small highspeed tcp derived competes reasonably fairly tcp reno bandwidth product small tcp reno performs reasonably helpful view highspeed tcp term cwnd graph loss ordinary tcp graph increase linearly highspeed tcp graph slightly convex lying tangent mean modest increase rateofcwnd increase time go point packet loss highspeed tcp introduction computer network release time tcwnd tcp reno cwnd t lineartime tcwnd highspeed tcp cwnd t convex appropriate time point tcp reno cwnd time graph loss actually slightly concave lying tangent strictly linear graph plot cwnd function count elapsed rtts rtts slowly increasing function time queue start Ô¨Ålling point cwnd graph bend slightly bottleneck queue capacity match total path transit capacity rtts queue double rtts queue general competes new tcp reno Ô¨Çow n time aggressive grab n time bandwidth n n cwnd cwnd formula yield n surprising value cwnd highspeed tcp aimd equivalent aimd formula exercise exercise naively suppose aimd tcp reno aimd factor reasoning example faster additive increase true loss synchronized lopsided difference ùõº manifestly case highspeed tcp us lion s share queue encounter lion s share loss event tcp reno able better theùõºvalues suggest finally little math compare highspeed tcp Ô¨Çavor tcp rule rtt form cwnd tcp reno example exercise exercise compatibility highspeed tcp turn need return pound tcp intentionally mimic behavior highspeed tcp queue utilization low tcp vega tcp vega introduced new tcp version consider date ous century goal directly address problem improve tcp throughput generally problem surfaced practical newer tcp implementationsan introduction computer network release cern ambitious goal tcp vega essentially eliminate congestive loss try bottleneck link utilized time recall tcp bottleneck link utilization large queue average utilization tcp reno low tcp vega achieves improvement like decbit recognizing tcp congestion knee point bottleneck link saturated cwnd increase simply result rtt increase tcp vega sender competition tcp vega connection seldom approach cliff packet loss occur accomplish special router cooperation receiver cooperation necessary instead sender us careful monitoring rtt track number extra packet iepackets sitting queue injected network absence competition rtt remain constant equal rtt noload untilcwnd increased point bottleneck link saturated queue begin Ô¨Åll rtt calculation monitoring bandwidth tcp sender determine actual number packet bottleneck queue bandwidth rtt rtt noload tcp vega us information attempt maintain time small positive number packet bottleneck queue tcp vega strategy referred congestion control opposed tcp reno s congestion control tcp reno s periodic loss followed halving cwnd lead tcp sawtooth tcp vega sawtooth tcp sender readily measure throughput simplest measurement cwnd rtt calculation amount averaging throughput entire rtt let denote bandwidth mate bwe time accept bwe accurate ack compression tcp vega estimate rtt noload minimum rtt rtt min encountered connection ideal cwnd just saturates bottleneck link bwe noload note bwe volatile rtt min typically reach Ô¨Ånal value early connection bwe Ô¨Çuctuate congestion act rtt increasing rtt calculation tcp sender estimate queue utilization cwnd noload rtt noload actual tcp vega adjusts cwnd regularly maintain following noload noload typically packet packet increment cwnd ifcwnd fall lower limit egif bwe increased similarly decrement cwnd bwe drop cwnd exceeds noload adjustment conceptually rtt typically tcp vega sender set cwnd packet actually lost doe necessarily happen nearly tcp reno tcp vega achieves goal quite monitor number packet queue real measurement simulation number doe stay ùõºandùõΩ absence competition tcp reno single tcp vega connection experience congestive packet loss remarkable achievement tcp vega introduction computer network release use returning acks determine bwe subject error ack compression ack compression generally major problem tcp vega tcp vega versus tcp reno despite striking ability avoid congestive loss absence competition tcp vega encounter potentially fairness problem competing tcp reno case queue capacity exceeds close transit capacity tcp bottleneck link utilization tcp vega try minimize queue use tcp reno happily Ô¨Ålls queue packet queue proportionally greater share bandwidth make precise suppose tcp connection sharing bottleneck router r Ô¨Årst using tcp vega second using tcp reno suppose connection path transit capacity packet r s queue capacity packet tcp vega average packet queue unfortunately tcp reno gobble rest queue space follows space left queue tcp vega take quota tcp reno connection s path total represents tcp reno connection s network ceiling point tcp reno half cwnd thereforecwnd vary average packet transit r s queue average r packet reno connection vega connection bandwidth available connection proportion tcp vega connection bandwidth occupies queue tcp reno connection way tcp vega potentially civil compete tcp reno worse reno s aggressive queue Ô¨Ålling eventually force tcp vega cwnd decrease exercise fairness problem signiÔ¨Åcant queue size appreciable fraction path transit capacity period queue tcp vega reno increase cwnd rate queue size small compared path capacity tcp vega tcp reno closer fair tcp reno versus tcp vega compare tcp vega tcp reno simulation transit capacity packet queue capacity packet tcp vega reno receive exactly bandwidth tcp reno s advantage assumes router single fifo queue advantage disappear different queuing discipline effect example bottleneck router used fair queuing introduced fair queuing basis tcp reno connection s queue greediness beneÔ¨Åt connection similar share bandwidth tcp vega connection experiencing lower delay fair queuing bufferbloat let consider tcp vega behaves increase rtt kind cross trafÔ¨Åc shown example cross trafÔ¨Åc rtt variation diagram let tcp vega connection assume target packet assume rtt noload path rtt path low link label represent bandwidth meaning transit capacity packet newer tcp implementationsan introduction computer network release b dc initially absence trafÔ¨Åc connection send rate bottleneck maintain queue packet rtt transit capacity packet achieved window size let trafÔ¨Åc start winsize time packet s queue new reached connection s queue packet end c need contribute packet packet add delay path increase rtt decrease bandwidth competition c consuming s queue s share wll fall bandwidth fall link bandwidth denote new value bwe new tcp vega attempt decrease cwnd noload s estimate rtt noload rtt min change rtt gotten larger smaller bwe m packet adding reserved queue new value ofcwnd hand new value cwnd doe represent packet transit plus s queue correct response note division transit queue packet average actual physical transit capacity remains packet meaning new packet appropriately spaced queue fast tcp fast tcp closely related tcp vega idea feature tcp vega extent possible provide overall improved performance particular face petition tcp reno detail fast tcp patented patent tcp vega sender estimate rtt noload rtt min regular short Ô¨Åxed interval cwnd updated following weighted average cwnd rtt noload ùõæis constant determining volatile cwnd update volatile ùõºis Ô¨Åxed constant verify shortly represents number packet fast tcp introduction computer network release sender try bottleneck queue tcp vega note cwnd update frequency tied rtt rtt constant multiple consecutive update interval larger rtt noload converge constant cwnd case solve convergence implies cwnd rtt noload noload saw rtt calculation cwnd throughput noload number packet queue word fast tcp reach steady state leaf ùõº packet queue long case queue overÔ¨Çow assuming ùõºis queue capacity queue rtt rtt noload case fast tcp s cwnd strategy reduces cwnd increment cwnd furthermore fast tcp performs increment speciÔ¨Åc rate independent rtt egevery link rtt fast tcp word increase cwnd aggressively point queuing delay occur rtt begin increase fast tcp competing tcp reno doe directly address competition problem experienced tcp vega fast tcp try limit queue utilization ùõº tcp reno continue increase cwnd queue queue begin Ô¨Åll tcp reno pull ahead fast tcp just did tcp vega fast tcp doe reduce itscwnd face tcp reno competition quickly tcp vega additionally fast tcp offset problem way value ùõºcan increased value packet originally proposed tcp vega value suggested second high bandwidth product phase tcp reno sawtooth tcp bottleneck link utilization relatively smaller earlier phase sawtooth tcp reno increase cwnd rtt noted fast tcp allowed increase cwnd rapidly earlier phase fast tcp substantially ahead tcp reno fall somewhat phase overall fast reno Ô¨Çows compete reasonably fairly newer tcp implementationsan introduction computer network release network ceiling queue capacity fast tcp cwnd curve blue superimposed tcp reno sawtooth diagram illustrates fast tcp graph cwnd versus time blue superimposed sawtooth tcp reno network ceiling note cwnd rise rapidly path transit capacity level sharply tcp westwood tcp westwood represents attempt use strategy tcp vega address problem recall issue distinguish congestive loss tcp westwood viewed reÔ¨Ånement tcp reno s cwnd strategy greater drop necessary queue capacity bottleneck router transit capacity remains form congestion control tcp vega sender keep continuous estimate bandwidth bwe estimate rtt noload rtt min minimum window size bottleneck link busy tcp vega bwe rtt noload tcp vega bwe calculated cwnd continue use time fact tcp westwood used wide variety algorithm discussed following subsection infer available average bandwidth returning acks core tcp westwood innovation loss reduce cwnd follows cwnd max cwnd noload ifcwnd noload change noload product bwe noload represents sender belief current share transit pacity path product represents packet transit queue current bandwidth bwe rtt noload estimate rtt mini relatively constant bwe tcp westwood introduction computer network release markedly reduced presence competing trafÔ¨Åc tcp westwood sender drop cwnd belief current transit capacity path consider classic tcp reno sawtooth behavior alternate cwnd minandcwnd min sender s share saw tcp bottleneck link utilization cwnd min reno doe reasonably good job keeping bottleneck link saturated cwnd min reno drop cwnd min bottleneck link saturated cwnd climb network case likely westwood hand situation reduce cwnd smaller tion tcp westwood potentially better handle wide range router queue capacity bottleneck router queue capacity small compared transit capacity tcp westwood theory higher sawtooth tcp reno teeth oscillate network ceiling versus reno s oscillation network ceiling half ceiling event packet loss happens cwnd tcp westwood doe reduce window size loss withcwnd effect cwnd loss reduce cwnd link stay saturated useful lossy wireless environment cwnd case packet loss easily lower tcp reno cwnd necessary bottleneck link saturated tcp westwood hand average cwnd lower loss high bottleneck link saturated tcp westwood us bwe noload aÔ¨Çoor reducing cwnd tcp vega shoot actual cwnd just packet tcp westwood aggressive tcp reno increasing cwnd situation handle tcp problem doe particularly improve ability sender advantage sudden large rise network ceiling tcp westwood potentially effective addressing problem congestive loss result change cwnd ack compression far assuming acks encounter queuing delay fact ifthey traveling reverse direction data packet scenario cover model system competing sender real network complicated trafÔ¨Åc pattern returning acks √Ω√±b data Ô¨Çow experience queuing delay trafÔ¨Åc link b √Ω√±a path delay delivery acks leading clustering arrival known ack compression example ack compression cause problem arriving cluster acks newer tcp implementationsan introduction computer network release trigger corresponding burst data transmission sender end result uneven rate normally queue absorb occasional burst queue nearly burst lead premature unexpected loss second problem acks lead inaccurate Ô¨Çuctuating measurement bandwidth tcp vega tcp westwood depend example bandwidth estimated cwnd acks lead inaccurate calculation rtt original tcp westwood strategy estimate bandwidth spacing consecutive acks technique packet pair smoothed suitable running average strategy turned particularly vulnerable error tcp vega ack compression mean occasionally sender s cwnd fail decremented doe appear signiÔ¨Åcant impact cwnd changed rtt westwood ack compression happens occurring instant packet loss resultant transient overestimation bwe mean new cwnd large point cwnd supposed fall transit capacity fail mean sender essentially taken congestion loss ignored inÔ¨Çuence ignored loss persist value cwnd following loss event Ô¨Åx problem tcp westwood amended increasing time interval bandwidth measurement inclusion averaging mechanism calculation bwe smoothing lead inaccurate bwe just surely little suitable smoothing mechanism given paper particular ines smoothing algorithm term resistance aliasing effect tendency tent measurement periodic signal returning acks lead greater inaccuracy initially expected smoothing Ô¨Ålter suggested measure bwe entire rtts cumulative running average follows bwm ki measured bandwidth kth rtt bwe ùõº k suggested value ùõºis simulation tcp illinois general idea tcp illinois described use usual aimd ùõº ùõΩ strategy rtt decreasing function current rtt constant queue rtt equal rtt noload ùõºwill large cwnd increase rapidly rtt start increase ùõºwill decrease rapidly cwnd growth level lead kind concave cwnd graph saw fast tcp consequence time consecutive loss event cwnd large bottleneck link close saturated throughput high actual ùõº function rtt delay deÔ¨Åned rtt rtt noload tcp vega rtt noload estimated rtt min connection progress sender maintains continually updated value rtt minbut rtt max sender set delay maxto rtt rtt min ready deÔ¨Åne ùõº delay Ô¨Årst specify highest value ùõº ùõºmax lowest ùõºmin tcp illinois introduction computer network release respectively linux kernel deÔ¨Åne delay thresh max tunable parameter deÔ¨Åne ùõº delay follows ùõº delay ùõºmaxif thresh ùõº delay k delay max k k chosen lower formula ùõº delay thresh delay max case sudden spike delay delay maxi updated evaluated max graph delay delaymax rtt rtt noload ùõº delay ùõºmax soon queuing delay just barely start begin delay delay thresh ùõº delay begin fall precipitously toùõºmin value ùõº delay positive cwnd continue increase unlike tcp vega congestive loss eventually occurs point change cwnd small minimizes probability multiple packet lost note fast tcp increase delay used trigger reduction tcp illinois support having ùõΩbe decreasing function delay ùõΩ ùõΩ match tcp reno s author explain adaptation ùõΩas function average queuing delay relevant network loss wireless network extremely high speed network compound tcp compound tcp ctcp microsoft s entry Ô¨Åeld available linux idea compound tcp add component tcp reno end ctcp supplement tcp reno s cwnd contribution window size known dwnd total window size newer tcp implementationsan introduction computer network release winsize usual winsize allowed exceed receiver s advertised window size increment cwnd note dwnd separate increment tcp vega ctcp maintains rtt mina rtt noload maintains bandwidth estimate bwe actual allow estimation current number packet queue denoteddiff diff rtt noload actual whendiff ùõæpackets parameter ùõæis conÔ¨Ågurable good starting point ctcp increase winsize rtt according rule winsize exponent k chosen increase achieved having cwnd incremented dwnd amount fairly aggressive increase tcp reno choice intended make ctcp competitive highspeed tcp return justiÔ¨Åcation choose given value play roughly similar role fast tcp s ùõº represent threshold queue utilization ctcp encounter loss set winsize winsize ùõΩis potentially conÔ¨Ågurable typically usual finally case diff ùõæ queue grown signiÔ¨Åcantly dwnd positive decremented variable cwnd continues increase cwnd anddwnd cancel short term leading roughly constant value winsize dwnd drop cancellation end tcp reno s cwnd rtt take dwnd effect packet loss considering case rough graph growth ctcp s winsize following diff winsize diff dwnd diff dwnd compound tcp derive value lead fair competition highspeed tcp need modest bit calculus derivation skipped preferred start hypothetical tcp compound tcp introduction computer network release adjustingcwnd according rule cwnd rtt tcp doe compete fairly highspeed tcp measure time rtts denote cwnd c c t extend c t continuous function t increment rule taking reciprocal ùõº integrate side yield t k ignoring constant integration c k integrating number packet tooth area proportional t time right edge tooth inappropriately ignoring left edge tooth argument exercise exercise turn matter area reciprocal loss rate solving t t proportional averagecwnd proportional area divided t substitution conclude cwnd proportional versus original exponent highspeed tcp calculating hard rapidly practice exponent used value exponentiation application fast algorithm ctcp turn compete reasonably fairly highspeed tcp virtue choice competing set tcp reno connection ctcp leaf reno connection nearly bandwidth competing tcp reno connection instead ctcp resists stealing bandwidth ctcp doe make effective use bandwidth tcp reno leaf unclaimed tcp problem tcp veno tcp veno synthesis tcp vega tcp reno attempt use idea tcp vega time remaining aggressive tcp reno using queue capacity tcp veno generally presented option address tcp s problem problem se tcp veno sender estimate number n packet likely bottleneck queue n queue noload like tcp vega tcp veno modiÔ¨Åes tcp reno rule follows parameter ùõΩ representing value tcp veno slows n queue ùõΩ cwnd rtt n cwnd rtt strategy make cwnd growth aggressive link saturation reached doe continue increase cwnd half fast tcp reno queue congestive loss occur packet loss doe occur tcp veno us current value n queue attempt distinguish congestive loss follows n queue ùõΩ loss probably notdue congestion set cwnd n loss probably isdue congestion set cwnd usual idea router queue total capacity larger ùõΩ loss fewer thanùõΩlikely doe represent queue overÔ¨Çow note comparison tcp westwood leaf cwnd unchanged think loss congestion threshold making determination tcp veno encounter series loss rule make behave like aimd newer tcp implementationsan introduction computer network release analysis aimd revisited equivalent aimd mean tcp veno twice aggressive tcp reno recovering loss provide deÔ¨Ånite improvement situation modest bandwidth product make major dent problem tcp hybla tcp hybla speciÔ¨Åc focus address tcp satellite problem satellite internet long rtts tcp hybla selects arbitrary reference rtt called rtt attempt scale tcp reno behave like tcp reno connection rtt rtt paper author suggest rtt suppose tcp reno connection loss event time t reducedcwnd tocwnd min tcp reno increment cwnd rtt loss event reno behavior equivalently expressed term current time t follows cwnd min tcp hybla doe use formula replacing actual rtt rtt noload rtt equivalently tcp hybla deÔ¨Ånes ratio rtts windowful time interval length rtt increment cwnd event rtt rtt ùúö set connection penalized becausecwnd increase rtt relatively large good chance network ceiling reached burst loss size tcp hybla strongly recommends receiving end support sack tcp allow faster recovery multiple packet loss recommended feature use tcp timestamps standard tcp option allows sender include timestamp data packet receiver echo timestamp corresponding ack allowing accurate measurement receiver actual rtt finally avoid having relatively large increment cwnd result multiple packet loss tcp hybla recommends form pacing smooth actual transmission time sending packet receipt ack example estimate time t transmission batch egwhen ack arrives send packet interval time tcp hybla developed pacing poorly supported tcp bbr pacing essential tcp hybla applies similar scaling mechanism threshold slow start value ssthresh known initial unbounded slow start difÔ¨Åcult scale scaling point mean repeatedly doubling cwnd sending Ô¨Çights packet acks received likely soon lead congestive collapse dctcp unlike tcp Ô¨Çavors chapter data center tcp dctcp intended use tions starting ending datacenter dctcp notmeant used internet large tcp hybla introduction computer network release make pretense competing fairly tcp reno dctcp Ô¨Årst described speciÔ¨Åed rfc datacenter highly specialized networking environment time internet large m time datacenter usually communicating node datacenter common management chicken egg problem regarding software installation new tcp feature desired available finally issue datacenters lot switch router cheaper model generally smaller queue capacity rtt gbps connection bandwidth product mb packet like queue smaller recall tcp reno categorized aimd aimd revisited basic idea dctcp use aimd ùõΩ value ùõΩmuch smaller reduction packet loss mean cwnd relatively constant transit capacity path m queue space needed minimum cwnd m bottleneck link utilized m small ùõΩcomes price tcp reno large margin exercise ercises aimd ùõΩ equivalent term fairness aimd ùõΩ argument example faster additive increase aimd connection tcp reno factor connection datacenter achieve fairness plementing dctcp introduction dctcp outside world dctcp highly uncooperative step specify moment make simplifying assumption connection trafÔ¨Åc case queue utilization increase rtt queue nonempty determine ùõΩdynamically simply count number d rtts queue sufÔ¨Åciently let rfc denoted ùõº making avoid confusion ùõºin aimd ùõº ùõΩ write dctcp ùõºasalpha return d rttswmin wmaxd dctcp tooth relate d cwnd amplitude cwnd variation let w maxdenote maximum cwnd w minthe minimum making usual simplifying assumption d w max becausecwnd increase rtt w newer tcp implementationsan introduction computer network release eliminating w minand solving w d note d amplitude queue variation assuming bottleneck link saturated absolute minimum queue capacity needed goal keeping queue small compare quite favorably tcp reno d w w let k represent maximum queue capacity step relate k need ensure avoid having k larger w tc k tc transit capacity link bandwidth express minimum queue utilization q k d k choose k tc necessary tcp reno avoid underutilized bandwidth certainly k larger ensure q need k tc relatively large packet simply requires k just bit larger k need larger point afford concerned k s small allowing interval bottleneck link idle empirically workable value queue capacity k gbps ethernet ately affordable large link utilization remains near need address simplifying assumption connection n connection quite possibly synchronized mean queue variation n mean d somewhat smaller total cwnd increasing n time faster issue lotof trafÔ¨Åc datacenter queue utilization dominated random component instead measuring queue utilization reach set level measure average utilization reach level dctcp achieves clever application ecn explicit congestion notiÔ¨Åcation ecn use ecn detect queue fullness packet drop added advantage avoiding packet loss timeouts datacenter dctcp rely ecn normal ecn receiver seen packet ce bit supposed mark ece ce echo returning acks sender acknowledges having responded congestion use cwr bit dctcp modiÔ¨Åes having receiver mark acks packet arrive ce set allows sender gauge severity congestion data packet ce bit set half returning acks marked delayed acks complicate data packet acknowledged different ce mark infrequent event dctcp recommends sending separate acks different ece mark case classically having data packet marked happen data packet arriving router queue capacity k reached unmarked packet arriving k reached marked random queue Ô¨Çuctuations described previous paragraph pattern riddled exception dctcp sender doe measure average marking rate using averaging interval long tooth unmarked rtts marked rtt average marking rate exactly dctcp look signiÔ¨Åcant number marked acks arrives indicating congestion experienced dctcp sender look running average marked fraction take precisely dctcp denotes alpha marked fraction set d alpha dctcp reduces cwnd ùõΩas actual algorithm doe involve queue capacity k tcp sender unlikely know dctcp proper common conÔ¨Åguration choice tions reduce minimum tcp retransmission timeout rto rto value computed adaptively dctcp introduction computer network release tcp timeout retransmission subject minimum late rfc recommended did require minimum rto second order magnitude large datacenter global linux conÔ¨Åguration setting altered basis using ip route command ip route change dev actual rto value current tcp connection viewed using linux command s info recent version window global minimum rto set custom template using netsh interface tcp set supplemental tcp incast particular congestion issue entirely exclusive datacenters dctcp doe handle directly tcp incast problem imagine node sending multiple simultaneous query helper node expecting response example request large data block distributed multiple system mapreduce request calculation result way respondent reply time response arrive router lead queue overÔ¨Çow packet loss dctcp tcp help individual connection sending packet reason having slightly larger queue capacity dctcp analysis suggest tcp incast problem worse case request executed serially saw issue rpc serial execution serialization requirement eliminated careful design described like primarily allows faster growth ofcwnd unlike cwnd increment determined size cwnd elapsed time previous loss event threshold accelerated cwnd growth generally set second recent loss event using rtt m amount rtts suggesting cwnd mini behaves like tcp reno speciÔ¨Åc acceleration rule Ô¨Årst deÔ¨Ånes time threshold t t elapsed time second previous loss event t ùõºis t t lwe deÔ¨Åne ùõº t l l increment cwnd byùõº t rtt equivalently ùõº t received ack second nominally second ùõºis quadratic term dominates linear term l rtt m rtts ifcwnd large growth rate tcp reno t t l consequence Ô¨Årst second loss event competes fairly tcp reno sense newer tcp implementationsan introduction computer network release increase cwnd absolute rate start scratch packet loss doe mode cwnd large time t implementation adjusts multiplicative factor ùõΩas follows paper us ùõΩto represent denote ùõΩ rtt monitored tcp vega rtt increase used adjustment instead measurement used loss event update ùõΩso rtt max value ùõΩis capped maximum minimum ratio come Ô¨Årst note rtt mini usual rtt noload rtt maxi course rtt bottleneck queue reasoning rtt calculation equation ùõΩis ratio congestion event involving single uncontested Ô¨Çow cwnd reducing cwnd ùõΩ havecwnd tcp bottleneck link utilization bottleneck link remain utilized loss cap ùõΩof mean queue capacity smaller quarter transit capacity bottleneck link willexperience idle moment ùõΩis changed adjusts t improve fairness connection different current value ùõΩ tcp cubic tcp cubic attempt like highspeed tcp solve problem efÔ¨Åcient tcp transport large tcp cubic allows fast window expansion make attempt slow growth cwnd sharply ascwnd approach current network ceiling treat tcp connection fairly tcp cubic s strategy achieve function slow concave previous network ceiling approached increase rapidly convex ceiling surpassed loss behavior mimic graph cubic polynomial cwnd tcp cubic improves earlier tcp version known tcp bic ab y b tcp cubic introduction computer network release mentioned tcp cubic currently default linux implementation tcp cubic originally documented speciÔ¨Åed rfc tcp cubic number interrelated feature attempt address tcp issue reduction rtt bias tcp friendliness appropriate rapid recovery cwnd following decrease loss event maximizing throughput optimization unchanged network ceiling corresponding cwnd max rapid expansion cwnd raised network ceiling detected eponymous cubic polynomial appropriately shifted scaled used determine change cwnd special algebraic property polynomial used point curve steadily increasing Ô¨Årst concave convex author write t choice cubic function incidental convenience inÔ¨Çection point tangent line horizontal point graph change concave convex start basic outline tcp cubic consider bell whistle assume loss just occurred let w maxdenote value cwnd point loss discovered tcp cubic set cwnd tcp cubic us originally ùõΩwas adjusted improve convergence equilibrium Ô¨Çows corresponding ùõºfor friendly aimd ùõº ùõΩ tcp cubic us ùõºonly adjustment deÔ¨Åne cubic polynomial w t shifted scaled version parameter t represents elapsed time recent loss second time t set cwnd w t polynomial w t cwnd rate increase tcp hybla longer tied connection s rtt reduce rtt bias deeply ingrained tcp reno want function w t pas point representing cwnd just loss xt wy want inÔ¨Çection point lie horizontal line max fully determine curve point sufÔ¨Åcient specify value t inÔ¨Çection point far horizontally w t stretched horizontal distance inÔ¨Çection point represented constant k following equation w t return value w maxat c second constant w t w max sufÔ¨Åces algebraically specify c k constant related equation obtained plugging k change loss event turn value c constant connection tcp cubic connection tcp cubic speciÔ¨Åes c ad hoc value set bit algebra solve obtain k w w example rtt m rtts ack arrives tcp cubic record arrival time t calculates w t set cwnd w t packet loss parameter w t updated newer tcp implementationsan introduction computer network release network ceiling doe change packet loss occur cwnd reach wmax time previous loss t approach k value cwnd approach wmax curve w t Ô¨Çattens cwnd increase slowly concavity cubic curve increasing rapidly Ô¨Çattening near w max achieves thing throughput boosted keeping cwnd close available path transit capacity tcp bottleneck link utilization argued path transit capacity large compared bottleneck queue capacity case tcp cubic designed tcp reno average utilization available bandwidth bandwidth utilization increase linearly just loss event just loss tcp cubic initial rapid rise cwnd following loss mean average closer important advantage Ô¨Çattening whencwnd Ô¨Ånally incremented point loss likely just network ceiling connection excellent chance packet lost large burst facilitates newreno fast recovery algorithm tcp cubic us receiver doe support sack tcp t k w t convex fact begin increase rapidly region cwnd w max sender know network ceiling increased previous loss tcp cubic strategy probe aggressively additional capacity increasing cwnd rapidly new network ceiling encountered cubic increase function fact quite aggressive compared tcp variant discussed time tell strategy work best example tcp cubic approach pay let suppose current network ceiling packet competing connection ended increase tcp reno rtts cwnd reach new ceiling starting rtt m second Ô¨Ånd time tcp cubic need increase cwnd solve w t c work second recall w k constant determined empirically cubic inÔ¨Çection point occurs t k w larger c reduces time k loss event inÔ¨Çection point time consecutive loss w second rtt m second rtts tcp reno hand interval adjacent loss w rtts assume speciÔ¨Åc value rtt compare reno cubic time interval loss rtt m wmax reno cubic sec sec sec sec sec sec smaller rtts basic tcp cubic strategy run risk competitive disadvantage compared tcp reno reason tcp cubic make adjustment size calculation arriving ack cwnd set maximum w t window size tcp reno compute tcp reno calculation based actual count incoming acks based formula ùõΩ note adjustment guarantee tcp cubic choose window size smaller tcp reno s place restraint choice larger window size broadly speaking range smaller bandwidth product tcp reno performs tcp cubic relies adjustment native window increase aggressive tcp cubic introduction computer network release tcp reno s tcp cubic supposed aggressive tcp reno setting aggressive consequence adjustment network modest bandwidth ucts tcp cubic behaves exactly like tcp reno tcp cubic provision detect given w maxislower previous value suggesting increasing congestion situation cwnd lowered additional factor known fast convergence help tcp cubic adapt quickly reduction available bandwidth way gain sense tcp cubic compare tcp reno look rate cwnd increase unit time w current window size express rate tcp reno time successive acks determined bottleneck bandwidth tcp cubic estimate derivative calculus formula w t w max mean order number actually compare need look speciÔ¨Åc scenario evaluate left edge cubic tooth Ô¨Årst scenario suppose bandwidth delay m making product packet assume queue capacity packet w mean tcp reno w increase m left edge tooth w window growth rate right edge tooth w tcp cubic use formula recall c left edge tooth evaluates recalling k w comparable tcp reno inÔ¨Çection point cubic curve let s switch second scenario bottleneck bandwidth increased delay m queue capacity packet bandwidth product packet w tcp reno range left edge tooth right edge rate cwnd growth different Ô¨Årst scenario tcp cubic hand k left edge tooth k cwnd increasing rate time aggressive tcp reno following graph taken show tcp cubic connection competing tcp reno newer tcp implementationsan introduction computer network release diagram show connection rtt tcp cubic tcp reno red connection established maximum cwnd packet connection started course second tcp cubic connection reach fair equilibrium tcp reno connection reach reasonably fair equilibrium lower tcp cubic connection hand graph showing result competition Ô¨Çows using earlier version tcp cubic connection connection rtt rtt tenth bottleneck bandwidth meaning bandwidth product connection packet depending packet size used tcp cubic introduction computer network release note connection solid line completely starved connection start admittedly extreme case recent Ô¨Åxes tcp cubic doe serve example need testing wide variety competition scenario tcp bbr tcp bbr return central idea tcp vega measure available bandwidth rtt min base number packet measured bandwidth product bbr stand bottleneck bandwidth rtt described internet draft large difference tcp vega ultimately difference enable tcp bbr compete reasonably fairly tcp reno important difference tcp bbr doe engage monitoring rtt increase rtt noload result tcp bbr doe Ô¨Åt tcp vega based model reason referred congestion control tcp bbr practice time tcp bbr sends given calculated rate instead sending new data direct response received ack arriving ack doe potentially update current rate arriving ack tcp reno slide sender s window forward connection arriving acks new data transmission decidedly indirect sending requires form pacing support underlying lan layer packet newer tcp implementationsan introduction computer network release sent equal time interval gbps link time interval small microsecond conventional timer don t work time scale linux tcp bbr implementation generally use pacing support built fair queuing fq queuing discipline actually true fair queuing implementation sense fair queuing lifetime connection tcp bbr maintains estimate rtt min nominally rtt noload presence competition tcp bbr maintains current bandwidth estimate denote bwe tcp vega bwe volatile rtt mina better reÔ¨Çects current degree bandwidth competition rtt tcp bbr record throughput rtt bwe maximum throughput measurement bwe maximum rate recorded past rtts average important fundamental congestion indicator tcp bbr change bwe rtt minestimates packet loss used directly evidence congestion shall tcp bbr reduces sending rate response decrease bwe tcp bbr s primary congestion response loss occur tcp bbr doe enter recovery mode conservative tcp reno s halving ofcwnd tcp bbr s initial response loss limit number packet Ô¨Çight flightsize number currently Ô¨Çight allows continue send new data rate arriving acks necessarily reduction flightsize flightsize allowed grow additional loss discovered overall strategy quite effective handling loss losing throughput core state known tcp bbr continually update bwe set base sending rate bwe set cwnd target properly flightsize target loss occurred min result bottleneck queue utilization equal transit capacity actual available bandwidth doe change sending rate bwe send new packet exactly rate returning acks flightsize change tcp bbr doe allow faster initial growth startup mode reach flightsize target actual available bandwidth fall bwe reÔ¨Çect rtts result tcp bbr send faster rate returning acks happens bottleneck queue utilization rise eventually bwe fall match rate returning acks similarly actual available bandwidth rise queue utilization fall fall zero cause sending starve single rtt unless bandwidth double increased bandwidth reÔ¨Çected updated bwe tcp bbr like tcp Ô¨Çavor regularly probe additional bandwidth available tcp bbr doe periodically currently rtts rtt measured rtt min increasing sending rate additional factor set variable sends new rate increase last rtt interval ifthere competition bottleneck link fully utilized increase result change bwe happens queue build larger Ô¨Çight packet result rtt time larger rtt interval tcp bbr set cause newly created additional queue dissipate resume regular rate rtt interval consider happens tcp bbr competing tcp reno increasing sending rate factor result greater queue bottleneck link utilization result immediate increase bwe rtt point recall bwe maximum measurement end result bwe set elevated value rtts tcp bbr introduction computer network release following rtt drop time tcp bbr measured larger bwe change bwe persists concrete example bwe increase simplify analysis assume tcp bbr s size min dropping factor suppose tcp bbr connection tcp reno tion share bottleneck link bandwidth rtt min rtt noload connection m making transit capacity packet finally suppose connection packet Ô¨Çight exactly Ô¨Ålling transit capacity queue utilization rtt rtt actual course cycle reno connection s cwnd rise packet mean total queue utilization packet divided average bbr reno proportion bbr cycle arrives rtt bbr connection packet Ô¨Çight total number packet Ô¨Çight rtt climb m bbr bwe measurement packet m precise value depend exactly measurement recorded following rtt drop higher bwe persists rest cycle tcp bbr calculates base rate corresponding packet Ô¨Çight rtt close tcp reno cwnd exercise tcp bbr mechanism arguably important long run maintaining fair share bandwidth periodically second tcp bbr connection rtt min tering mode state number packet Ô¨Çight drop stay rtt actual measured packet minimum m tion return bw mode freshly estimated rtt min value bwe picked left rtt minincreases doe sending rate bwe min certain potential throughput wasted interval m sec impact negligible mode competing connection packet bottleneck queue queuing delay corresponding packet incorporated new rtt minmeasurement rtt minmay signiÔ¨Åcantly exceed rtt noload cause tcp bbr send competitive rate suppose example scenario reno gobbled total spot bottleneck queue increasing rtt connection cycle tcp bbr drop link utilization essentially zero tcp reno packet transit tcp bbr measure rtt mina phase tcp bbr increase sending rate rtt minwas note rtt measure bottleneck bandwidth orrtt number packet Ô¨Çight larger transit capacity packet return rate reÔ¨Çects bottleneck bandwidth conversely measure rtt minonly number packet Ô¨Çight smaller transit capacity connection Ô¨Årst opened tcp bbr connection startup mode similar tcp reno s slow start mode consistently lead exponential growth number packet Ô¨Çight startup mode end additional rtt yield ment bwe point tcp bbr overÔ¨Ålled queue substantially just tcp reno connection doe slow start connection enters drain mode reduce queue accomplished connection transition drain number packet Ô¨Çight drop min newer tcp implementationsan introduction computer network release diagram tcp bbr competing tcp reno setting bottleneck queue pacity time bandwidth product m mbps kb produced using mininet network emulator tcp competition reno v bbr large queue capacity contrived speciÔ¨Åcally beneÔ¨Åcial tcp reno similar setting queue ity approximately equal bandwidth product tcp bbr end quite bit ahead tcp reno large queue situation bone link bufferbloat acting reno s cwnd range time product work keeping queue average lower diagram show connection s share mbps mbps bottleneck bandwidth upper show number packet Ô¨Çight tcp reno outside fast recovery course cwnd reno sawtooth pattern clearly visible dominant feature graph spike second bbr correspondingly reno caused tcp bbr s periodic mode kbps bbr Ô¨Årst second tcp reno doe run away bandwidth Ô¨Årst event tcp bbr begin catch tie second reno stay little ahead tcp bbr typically bandwidth versus bbr s point circumstance favorable reno bbr doe collapse evident graph particularly Ô¨Årst second interval lead sudden jump throughput change throughput occurs interval said interval trigger ensuing turnaround addition sharp spike second smaller spike rate second represent cycling bbr s phase rtt mintimes second rtt minmust queue completely rtt actual m m tcp bbr s cycle rtt actual doe drop considerably account m value value used rtt minfor second tcp bbr introduction computer network release experimental result indicate tcp bbr successful tcp cubic addressing tcp problem part google s network presumably tcp bbr doe necessarily reduce throughput faced occasional loss epilog tcp reno s core congestion algorithm based algorithm jacobson karel s paper approaching thirty year old concern tcp reno us bandwidth greediness issue doe use problem broad change tcp usage pattern year ago vast majority tcp trafÔ¨Åc represented downloads major server today half internet tcp trafÔ¨Åc rise online video streaming creates new demand excellent tcp performance tcp version use depends circumstance tcp primarily intended relatively speciÔ¨Åc environment example tcp hybla satellite link tcp veno mobile device including wireless laptop sending receiving host common management especially intervening trafÔ¨Åc pattern relatively stable run simple experiment Ô¨Ånd tcp version work best problem experimental approach intervening trafÔ¨Åc pattern stable tcp version worked trafÔ¨Åc environment perform poorly tcp vega doe environment problem arise competing tcp reno trafÔ¨Åc equivalent second seriously tcp version achieve throughput expense user tcp trafÔ¨Åc simple example consider effect simply increasing tcp reno value aimd aimd saw example faster additive increase give tcp unfair fact tenfold advantage goal Ô¨Ånd tcp version allusers happy effective question tcp use server serving large volume data range disparate host wide variety scenario experimentation difÔ¨Åcult trial needed determine reliably tcp version work best case ignoring impact competing trafÔ¨Åc issue suggest need continued research update improve tcp internet generally finally new tcp designed hold reno world question better radical incremental change tcp vega better choice greediness tcp reno restrained question like today entirely hypothetical impossible envision internet backbone implemented queuing mechanism queuing scheduling fundamentally changed rule game newer tcp implementationsan introduction computer network release exercise tcp vega respond estimated rtt noload bandwidth routing change rtt noload increased changing bandwidth cwnd chosen assume competition sender suppose tcp vega connection b pass bottleneck router rtt noload m bottleneck bandwidth connection keep packet queue rtt actual value cwnd connection choose value bwe b suppose competing connection keep packet queue vega connection s eventually meaning connection bandwidth vega connection s value rtt actual cwnd bwe suppose tcp vega connection r bottleneck router transit capacity m queue utilization currently q meaning transit path utilized necessarily tcp vega packet current tcp vega cwnd iscwnd using formula rtt calculation number packet tcp vega calculates queue suppose time tcp vega connection tcp reno connection share path packet bottleneck queue exactly Ô¨Ålling transit capacity tcp vega us previous exercise rtt cwnd vtcp vega packet cwnd rtcp reno packet Ô¨Çight cwnd r n queue iscwnd cwnd r multiplied total queue utilizationcwnd continue following table t measured rtts rtts cwnd v isnotdecremented Ô¨Ånd row tcp vega queue share rtts cwnd vi decremented spreadsheet simple algebra note tcp reno cwnd rwill increment tcwnd vcwnd rtcp vega queue share ùõΩ vega packet queue vega packet queue exercise attempt explain linear decrease tcp vega graph diagram tcp reno versus tcp vega competition tcp reno mean cwnd vstops increasing fact decrease rtts exercise introduction computer network release suppose previous exercise fast tcp connection tcp reno connection share path packet bottleneck queue exactly Ô¨Ålling transit capacity fast tcp parameter ùõæis fast tcp tcp reno connection respective cwnd s ofcwnd fandcwnd use fact long queue nonempty noload cwnd r value cwnd fat t counted unit m t using assume rtt m use spreadsheet recommended table us tcwnd fcwnd r suppose sends b layout packet size kb bandwidth bottleneck link packet m returning acks normally spaced m apart rtt noload path arb c large amount trafÔ¨Åc sent c bottleneck link path bandwidth kb queue r link capacity kb acks byte maximum possible arrival time difference path ack ack queuing delay r √±b direction ack forwarded immediately r ack wait kb r b minimum possible arrival time difference ack ack suppose tcp veno tcp reno connection compete path trafÔ¨Åc start time cwnd s total transit capacity share loss event bottleneck router s queue capacity packet queue Ô¨Ålls time tcp veno s parameter ùõΩis zero meaning shift slower cwnd increment soon queue just begin Ô¨Ålling rtts queue begin Ô¨Ålling b point queue completely Ô¨Ålled larger reno cwnd veno cwnd suppose connection use tcp hybla compete Ô¨Årst connection rtt m second rtt start cwnd literally meaning newer tcp implementationsan introduction computer network release sent Ô¨Årst rtt packet sent connection rtts involving cwnd increase b packet sent connection second recall n suppose time tcp illinois connection tcp reno connection share path packet bottleneck queue exactly Ô¨Ålling transit capacity respective cwnd s arecwnd iandcwnd bottleneck queue capacity value cwnd iat t number elapsed rtts point cwnd ri course tcwnd icwnd r assume delay rtt rtt noload proportional cwnd using expression represent delay delay delay thresh calculating ùõº delay assume assume tcp connection rtt m time loss event second tcp reno connection bandwidth product b connection bandwidth product value w maxbelow Ô¨Ånd change tcp cubic s cwnd m rtt following point immediately previous loss event t ii midpoint tooth iii point cwnd returned w max w making b w making suppose tcp reno connection competing tcp cubic connection trafÔ¨Åc loss synchronized setting steady state reached cwnd graph tooth look like exercise introduction computer network release r c r tooth tcp cubic v tcp reno let c maximum cwnd tcp cubic connection max let r maximum tcp reno connection let m network ceiling loss occurs reach width tooth tcp reno rtt measured second width tcp cubic tooth example ignore feature tcp cubic m rtt m sec steady state r c b equilibrium r c nearest integer rtt hint use spreadsheet scripting language make quite practical c equilibrium r c m rtt suppose tcp westwood connection path link tleneck bandwidth rtt noload cwnd queue packet throughput s packet fall packet m competition time competition single packet lost suppose responds loss using original bwe transit capacity calculate update cwnd b suppose us new throughput packet m bwe transit capacity calculate update cwnd c suppose calculates bwe cwnd value bwe doe obtain measuring rtt packet just lost newer tcp implementationsan introduction computer network release tcp bbr estimated impact tcp bbr s bwe value interval suppose bbr reno connection packet transit instead assume bottleneck bandwidth rise tenfold rtt noload cycle reno increase cwnd ifbwe measured optimum point bbr s rate increase new value bwe exercise introduction computer network release newer tcp queuing scheduling giving control congestion tcp layer really option internet evolved situation want router handling trafÔ¨Åc basis trafÔ¨Åc delay bound trafÔ¨Åc involving voice video likely perform better preferential service example turn quality service trafÔ¨Åc interested guaranteeing customer get fraction bandwidth regardless customer receiving trust tcp reno s mechanism customer connection bandwidth received ratio make Ô¨Årst customer quite unhappy fundamental mechanism achieving kind goal shared network queuing deciding router prioritize trafÔ¨Åc waiting queue chapter following look strategy available toolbox chapter concerned fair queuing bandwidth assigned idle sender reapportioned active sender following chapter token bucket rate limiting deal bandwidth cap reapportioning bandwidth idle sender finally quality service idea applied develop distributed option previously look queuing looked fifo queuing variant brieÔ¨Çy priority queuing example queuing discipline catchall term support way accept release packet red gateway strategy red qualify separate queuing discipline closely tied fifo queuing discipline provide tool meeting administratively imposed constraint trafÔ¨Åc sender example required share outbound link equally proportion participant prefer use bandwidth alternatively sender required send burst packet time closely allied idea queuing scheduling deciding packet sent scheduling form sending s packet right form delaying packet arriving fast priority queuing practical alternative fifo queuing look fair queuing Ô¨Çat hierarchical form fair queuing provides straightforward strategy dividing bandwidth multiple sender according preset percentage introduced mechanism used trafÔ¨Åc scheduling trafÔ¨Åc description material particular involving fair queuing theorem chapter mathematical feel earlier chapter conÔ¨Åned proof claim straightforward introduction computer network release queuing trafÔ¨Åc application advanced queuing mechanism support transport trafÔ¨Åc delay constraint delivery original conception internet arguably intended transport wanted place digital phone byte guaranteed arrive m best bet use separate telephone network instead having entirely separate network transport deÔ¨Ånitely workable solution expensive economy scale having just single network great deal Ô¨Åguring internet support trafÔ¨Åc directly central strategy mixing bulk trafÔ¨Åc use queuing discipline trafÔ¨Åc service requires priority queuing simplest mechanism approach offer greater Ô¨Çexibility round chapter theorem provides precise delay bound time trafÔ¨Åc share network bulk trafÔ¨Åc needed trafÔ¨Åc satisÔ¨Åes speciÔ¨Åcation assigned bandwidth guarantee fair queuing volume bulk trafÔ¨Åc doe matter exactly needed support chapter contains elegant theory clear practice today trafÔ¨Åc isp level return issue following chapter time trafÔ¨Åc management hasseen widespread adoption setting trafÔ¨Åc divided multiple guest user hotel industry example student isps apply bandwidth cap customer acknowledge advanced form trafÔ¨Åc management general seen relatively limited adoption trafÔ¨Åc management trafÔ¨Åc constraint wish allocate bandwidth according administratively determined percentage example wish department equal share download upload capacity wish guarantee share isp manager public access point wish guarantee get roughly equal share available bandwidth alternatively get bandwidth paid want unused capacity divided user fair queuing tool choice context beneÔ¨Åt cooperation isp user like customer receiving bandwidth pay want enforce Ô¨Çat cap bandwidth go unused Ô¨Åltering way bandwidth allocation department customer workgroup subcategory hierarchical queuing offer necessary control general network management divide managing hardware managing trafÔ¨Åc tool chapter address component tool used internally isps interconnection trafÔ¨Åc management make good economic sense entirely queuing schedulingan introduction computer network release contained single organization unlike support trafÔ¨Åc use trafÔ¨Åc management widespread internet barely visible priority queuing started let Ô¨Åll detail priority queuing looked brieÔ¨Çy priority queuing given outbound interface thought having physical queue resenting different priority level packet placed appropriate subqueue based packet attribute explicit priority tag packet s destination socket outbound link free router able send packet look Ô¨Årst queue nonempty packet dequeued queue queue served note priority queuing nonpreemptive packet arrives packet sent interrupted packet Ô¨Ånished transmission doe router check subqueue s priority queuing lead complete starvation trafÔ¨Åc trafÔ¨Åc consumes outbound bandwidth able guarantee example admission control trafÔ¨Åc limited designated fraction total outbound bandwidth queuing discipline abstract data type queuing discipline simply data structure support following tions note enqueue operation includes way handle dropping packet event queue fifo queuing enqueue operation need know correct outbound interface priority queuing enqueue need told able infer packet s priority classiÔ¨Åcation case Ô¨Ånd convenient add peek operation return packet dequeued actually return important statistic egsize arrival time packet fifo priority queuing queuing discipline tied speciÔ¨Åc outbound interface sense queuing discipline single output input situation complex fifo queuing discipline single input stream fed multiple physical input interface enqueue operation put packet physical queue queuing discipline multiple input stream class orsubqueues refer queuing discipline classful priority queue example input class priority level priority queuing introduction computer network release want enqueue packet classful queuing discipline Ô¨Årst invoke classiÔ¨Åer possibly external queuing discipline determine input class linux documentation called classiÔ¨Åers called Ô¨Ålters example wish use priority queue priority v oip packet classiÔ¨Åer s job determine arriving packet fact v oip packet taking account thing like size port number source host able provide information enqueue operation classiÔ¨Åer account trafÔ¨Åc reservation packet belong Ô¨Çows reservation preferred service packet tag applied upstream router return quality service number conÔ¨Åguration class Ô¨Åxed time creation typically case priority queue abstractly class dynamic example fair queuing support conÔ¨Åguration separate input class created Ô¨Çy separate tcp connection fifo priority queuing meaning associated outbound interface idle unless queue queuing discipline example artiÔ¨Åcially delay packet order enforce administratively imposed bandwidth cap queuing discipline called trafÔ¨Åc shaper token bucket rate limiting example delayed packet assigned transmission time kept time reached shaping tends complex internally queuing mechanism fair queuing important alternative fifo priority fair queuing fifo variant single input class incoming trafÔ¨Åc single physical queue fair queuing maintains separate logical fifo subqueue input class refer subqueues division class ega separate class tcp connection ega separate class arrival interface separate class designated internal subnet suppose moment packet size make fair queuing easier visualize special case called nagle fair queuing proposed rfc router simply service subqueues fashion sending packet turn subqueue simply skipped subqueues nonempty resembles multiplexing multiplexing unlike multiplexing subqueues doe longer consumes outbound bandwidth recalling packet size total bandwidth divided equally nonempty subqueues k queue output fair queuing extended stream packet considerable work trying Ô¨Ågure implement fair queuing efÔ¨Åciently support appropriate variant broad approach fair queuing packet newer approach concerned bandwidth guarantee consistent assigned bandwidth fraction deÔ¨Åcit round robin stochastic fair queuing original approach round robin gps model provide bandwidth assurance make delay guarantee time choose packet send choose entitled packet s entitlement decrease get larger Ô¨Çow sent recent previous packet speciÔ¨Åcally choice according calculated queuing schedulingan introduction computer network release virtual Ô¨Ånishing time virtual finishing time refer original approach fair queuing fair queuing potentially signiÔ¨Åcant beneÔ¨Åts trafÔ¨Åc management particular identify speciÔ¨Åc delay guarantee bound said today s world time microsecond application s requirement millisecond thousand time larger fair queuing necessary weighted fair queuing extension fair queuing weighted fair queuing wfq instead giving class equal share assign class different percentage example assign bandwidth percentage different department subqueues active get listed percentage subqueue idle respectively preserving ratio allocation subqueue idle subqueues packet size weighted fair queuing conceptually straightforward generalization fair queuing actual implementation detail nontrivial implementation naturally yield equal share subqueues receive allocation ratio packet size implement wfq having subqueue send packet intermingle class sends Ô¨Årst packet class sends Ô¨Årst packet class sends second class sends second allocation ratio Ô¨Årst sender send packet second send pattern irregular average virtual finishing time real world packet far mixing bulk trafÔ¨Åc tends make size variation worse case fair queuing weighted fair queuing possible little work important practical case fair queuing used input class consists trafÔ¨Åc penalized sending small packet strategy introduce Ô¨Årst strategy fair queuing transmit packet order calculated virtual Ô¨Ånishing time beneÔ¨Åts Ô¨Çows smaller packet Ô¨Çows sent packet recently wfq algorithm based virtual Ô¨Ånishing time referred fair queuing approach deÔ¨Åcit round robin present mechanism handling packet using virtual Ô¨Ånishing time ultimately equivalent Ô¨Årst round robin straightforward extension idea second gps model us Ô¨Çuid model simultaneous packet transmission mechanism share idea virtual clock run rate inversely proportional number active subqueues shall point varying clock rate way time given packet theoretically Ô¨Ånish transmission doe depend activity subqueues finally present quantum algorithm deÔ¨Åcit round robin proximation exact algorithm approximation longer satisÔ¨Åes fair queuing introduction computer network release delay constraint straightforward generalization idea different packet size start pliÔ¨Åcation let assume subqueue active subqueue active nonempty router look subqueue active equal case packet transmitted order increasing nondecreasing cumulative data sent subqueue word subqueue get send Ô¨Årst packet begin transmitting second packet assuming subqueue active handle different packet idea packet p let c pbe cumulative number byte sent p s subqueue endof simply need send packet nondecreasing order c fair queuing subqueues active packet transmission order diagram transmission nondecreasing order c pmeans transmission order vertical line marking packet division ensures long run subqueue get equal share bandwidth completely equivalent strategy better suited generalization case subqueues active send packet nondecreasing order virtual Ô¨Ånishing time calculated packet assumption packet s subqueue active virtual Ô¨Ånishing time f pof packet p equal c pdivided output bandwidth use Ô¨Ånishing time starting time packet large shorter packet subqueues Ô¨Ånish sooner sent Ô¨Årst Ô¨Årst example example suppose subqueues p suppose stream packet p arrives p stream packet q arrives q stream steady subqueue active finally assume output bandwidth byte unit time let starting point p subqueue virtual Ô¨Ånishing time calculated p p p q Ô¨Ånishing time q q q order transmission packet increasing order virtual Ô¨Ånish follows queuing schedulingan introduction computer network release packet virtual Ô¨Ånish actual Ô¨Ånish packet calculated table virtual Ô¨Ånishing time actual wallclock Ô¨Ånishing time assuming packet transmitted nondecreasing order virtual Ô¨Ånishing time shown subqueues active virtual Ô¨Ånishing time assumed subqueue received output bandwidth long run actual Ô¨Ånishing time double virtual time irrelevant matter relative virtual Ô¨Ånishing time second example example allow subqueue idle active situation virtual Ô¨Ånishing time work quite based directly wallclock time return initial simpliÔ¨Åcation packet size unit allows apply mechanism determine transmission order compare order assume queue p q r p wallclock time q constantly busy kth packet q k starting virtual Ô¨Ånishing time f Ô¨Årst case assume r completely idle p s Ô¨Årst packet p time virtual Ô¨Ånishing time time head packet q q packet identical virtual Ô¨Ånishing time encouragingly queue service p q sent round second case suppose r constantly busy time q r sent packet packet q r virtual Ô¨Ånishing time p s Ô¨Årst packet arrives virtual Ô¨Ånishing time service sent round q r virtual Ô¨Ånishing time factor queue p s stretch inactivity left far virtual Ô¨Ånishing time calculating far simply work trick turn measure elapsed time term time iewallclock time term round transmission amount scaling clock used measuring arrival time counting round packet mean run clock rate n subqueues active case Ô¨Ånishing time unchanged case packet p time unit round clock run half rate calculated Ô¨Ånishing time exactly matching Ô¨Ånishing time packet q r p transmission round formalize section extending idea include packet subqueues note clock measure arrival time scaled scale calculated transmission time fair queuing introduction computer network release round robin imagine sending single bitat time active input subqueue fashion directly implementable certainly meet goal giving active subqueue equal service packet different size use round robin bbrr way modeling Ô¨Ånishing time previous example send packet usual way packet time order increasing virtual Ô¨Ånishing time happen larger packet transmitted point new shorter packet arrives smaller Ô¨Ånishing time computed current transmission interrupted algorithm trick making bbrr approach workable Ô¨Ånd invariant formulation Ô¨Ånishing time doe change later packet arrive subqueues active inactive end taking lead example previous section deÔ¨Åne round counter r t t time measured unit transmission time bit active nonempty currently transmitting input subqueues r t count number cycle occurred time subqueues k active input subqueues r t increment t increment k r t grows rate important attribute r t packet size s bit start transmission bbrr r r t Ô¨Ånish r t r regardless input subqueues active packet actively sent bbrr r t increment bit packet sent given cycle k subqueues active k bit sent r t increment calculate virtual bbrr Ô¨Ånishing time packet p Ô¨Årst record r r t p moment arrival compute f pa follows think time measured round counter r t r t represents virtual clock happens run slow let s size packet p bit p arrived previously input subqueue bbrr transmission begin immediately Ô¨Ånishing f pi simply r packet s subqueue nonempty look future Ô¨Ånishing packet immediately ahead p subqueue say f prev Ô¨Ånishing p f f described start max r f prev start s s packet size measured bit new packet p arrives calculate f p send packet conventional way increasing order f stated f pwill change subqueues active changing rate r t router maintaining r t doe increment bit sufÔ¨Åces update packet arrives subqueue previous value r t r prev exactly k subqueues nonempty m elapsed according wall clock current value r t r bbrr example example suppose fair queuing router input subqueues p q r initially following packet arrive time shown queuing schedulingan introduction computer network release packet queue size arrival time t p p q q q r r r t assign Ô¨Ånishing f p p f p f p p transmission p q packet arrive r t subqueue active assign Ô¨Ånishing newly arriving q q f q f q f q point bbrr begin serving subqueues r t rate cut half transmission packet p completed r t smallest Ô¨Ånishing book f q q second packet transmitted q s real Ô¨Ånishing time t r transmission q progress r t calculate f r note Ô¨Ånishing q currently transmitting preempted point r t r t rate fall q Ô¨Ånished transmission r t smallest Ô¨Ånishing f r transmission r r r r subqueues busy queue r r t rate rise smallest Ô¨Ånishing f q transmission q Ô¨Ånish r t r r assigned Ô¨Ånishing time f r transmission q preempted f r f q r t rate fall q r t smallest Ô¨Ånishing f r transmission r transmission r r t smallest Ô¨Ånishing f p transmission p r t rate rise queue r transmission p r t remaining unsent packet q f q send transmission q r t summarize fair queuing introduction computer network release packet wall clock tcalculated Ô¨Ånish ish packet arrive begin transmission Ô¨Ånish real time number queue active real time affect rate r t value attached packet arrives virtual Ô¨Ånishing time determines order packet transmission change start Ô¨Ånish exactly match packet size packet virtually sent bbrr packet sent indivisible unit table change usually smaller run slower subqueues use fact increasing seen starred value example r available time send q computationally maintaining counter inconsequential primary performance issue bbrr simulation need Ô¨Ånd smallest new packet sent n number packet waiting sent time o log n keeping sorted appropriate data structure bbrr approach assumes equal weight subqueue doe generalize completely forwardly weighted fair queuing number subqueues fractional queue weight use bbrr Ô¨Åve subqueues assigned subqueue increasingly awkward fraction simple gps model better option gps model model bbrr generalized processor sharing model gps Ô¨Årst developed application cpu scheduling approach imagine packet liquid outbound interface pipe certain total capacity head packet subqueue squeezed pipe simultaneously designated fractional rate gps model essentially inÔ¨Ånitesimal variant bbrr gps model advantage generalizing straightforwardly weighted fair queuing Ô¨Çuid model used analysis network egfor study tcp consider example gps model assume n input subqueues ith subqueue n receive fraction ùõºi point set input subqueues active say subqueue receive fraction subqueues similarly router forward packet active subqueue simultaneously designated rate queuing schedulingan introduction computer network release gps model bbrr model provides ideal degree isolation input Ô¨Çows Ô¨Çow insulated delay packet competing Ô¨Çows ith Ô¨Çow receives bandwidth ùõºiand packet wait packet belonging Ô¨Çow packet arrives inactive subqueue forwarding begin immediately interleaved work router doing trafÔ¨Åc Ô¨Çows reduce real rate Ô¨Çow virtual rate gps convenient model implementable literally bbrr bbrr use gps model determine order transmission real packet arrives calculate time Ô¨Ånish using gps packet transmitted wfq time order increasing gps Ô¨Ånishing time lieu bbrr round counter r t virtual clock vc t used run increased rate ùõº ùõºis sum ùõºifor active subqueues subqueues active vc t clock run rate ùõºiare equal vc t run n time faster r t vc t n t vc clock run wallclock speed input subqueues active speed subqueues idle active subqueue gps rate transmission relative virtual clock unit bit equal fraction ùõºiof rate output rate mbps active Ô¨Çow fraction transmit bit virtual microsecond subqueues active vc clock run wallclock speed Ô¨Çow s actual rate subqueue active speed measured real clock virtual clock run time faster bit virtual microsecond bit virtual microsecond make claim precise let set active queue let ùõºagain sum ùõºjfor j vc t run rate ùõºand active subqueue s data sent rate wallclock time subqueue s transmission rate relative virtual time subqueues inactive active vc t rate actual transmission rate lockstep bbrr packet p size s subqueue start transmission virtual time t Ô¨Ånish t r vc clock r actual output rate router regardless happening subqueues word Ô¨Ånishing time invariant round calculation Ô¨Ånishing time suppose packet p size s arrives active gps subqueue previous packet subqueue Ô¨Ånishing time f prev p s start time p arrives inactive subqueue gps allows begin transmitting immediately way bbrr p s start time p max vc f prev Ô¨Ånishing time vc clock f p expression Ô¨Ånishing time max vc f prev wfq subqueues consider wfq router erarchy effect allowed transmit intermittently case virtual clock suspended output blocked easiest bbrr scheduler counter rr t increment bit sent active subqueue bit sent clock increase example happens suppose r subqueues b Ô¨Årst second long backlog r normally process packet second r s output suspended packet second subqueue b virtual Ô¨Ånishing time r resume transmission packet subqueue r s virtual clock suspended fair queuing introduction computer network release interval assigned Ô¨Ånishing time priority comparable r s virtual clock continued run assigned Ô¨Ånishing time sent b head b queue wfq scheduler schedule actual packet transmission weighted fair queuing calculate arrival packet s Ô¨Ånishing time assuming sent using gps sender ready start transmission new packet selects available packet smallest time value argument packet s gps Ô¨Ånishing time doe depend later arrival idle period subqueues bbrr small packet smaller virtual Ô¨Ånishing time packet currently transmitted interrupted finishing order gps wfq look order packet Ô¨Ånish transmission gps versus wfq goal provide bound tight bound long packet wait wfq compared gps emphasize gps Ô¨Ånishing time theoretical Ô¨Ånishing time based parallel transmission gps model wfq Ô¨Ånishing time real Ô¨Ånishing time assuming packet sent sequentially increasing order calculated gps Ô¨Ånishing time way view quantiÔ¨Åcation informal idea wfq provides natural priority smaller packet smaller packet sent previously idle subqueues quite separate bandwidth guarantee given input class receive mean small packet likely leapfrog larger packet waiting subqueues quantum algorithm provides wfq bandwidth guarantee doe notprovide delay assurance subqueues active Ô¨Åxed subset subqueues active packet Ô¨Ånish wfq order gps wfq packet transmitted order gps Ô¨Ånishing time according virtual clock subqueues active virtual clock run rate identical wallclock time Ô¨Åxed subset subqueues active rate proportional wallclock time subqueues active assume packet subqueues time Ô¨Ånishing order long packet arrived subqueue went inactive finally subqueues active packet Ô¨Ånishes early wfq gps let p jbe jth packet Ô¨Ånish gps wfq time p jÔ¨Ånishes wfq router r devoted output bandwidth exclusively p p p jÔ¨Ånishes gps r transmitted p p j transmitted fraction later packet p jÔ¨Ånishing time gps earlier Ô¨Ånishing order relative Ô¨Ånishing time change usually case subqueues idle packet arrive late subqueues queuing schedulingan introduction computer network release gps example Ô¨Årst example return scenario Ô¨Årst example router s subqueues active allocation packet p size wait Ô¨Årst queue packet q size wait second queue output bandwidth byte unit time starting point router s virtual clock run wallclock speed subqueues active f irepresents virtual Ô¨Ånishing time r calculate f ia f virtual Ô¨Ånishing time p etcare similarly multiple packet virtual Ô¨Ånish actual Ô¨Ånish time table virtual Ô¨Ånish column simply double bbrr version reÔ¨Çecting fact virtual Ô¨Ånishing time scaled factor actual Ô¨Ånish time identical calculated note case actual wfq Ô¨Ånish time equal virtual gps Ô¨Ånish time gps example router single active subqueue share ùõºand packet p calculated packet Ô¨Ånishing time equal time virtual clock point actual Ô¨Ånish case virtual clock restarted let r output rate router let s size packet let f virtual Ô¨Ånishing time f s rùõº s rùõº s rùõº ith packet s actual Ô¨Ånishing time ii s s virtual clock run fast factor ùõº actual Ô¨Ånishing time virtual clock f gps example example illustrates smaller packet case q Ô¨Ånishes ahead p gps wfq p said leapfrog r wfq suppose packet p r router following time t following length output bandwidth length unit time unit total number length unit subqueue allocated equal share bandwidth fair queuing introduction computer network release subqueue subqueue subqueue wfq send p q second Ô¨Ånishing time later q wallclock time point p packet available send Ô¨Ånishes packet progress gps q gps gps clock run rate wallclock time bbrr clock run rate wallclock time q bbrr clock vc clock calculate bbrr Ô¨Ånishing time gps Ô¨Ånishing time bbrr clock gps clock r calculate bbrr Ô¨Ånishing time gps Ô¨Ånishing time q earlier Ô¨Ånishing time wfq sends p followed r diagram transmission gps chart scaled wallclock time bbrr clock scale vc clock run time faster circled number represent size portion packet sent interval separated dotted vertical line packet add packet s total size note transmission order wfq p Ô¨Ånishing order gps p leapfrog q r wfq simple expedient packet available transmission gps example second example leapfrogging suppose following arrival scenario smaller r ahead p q gps wfq subqueue subqueue queuing schedulingan introduction computer network release following diagram show packet shared link gps time seen gps Ô¨Ånishing order q wfq transmission order q q r arrived bound example bring following claim parekh gallager make use theorem arguably deepest theorem claim packet p wallclock Ô¨Ånishing time p router r wfq later wallclock Ô¨Ånishing time p r gps time r need transmit packet appear expressed symbolically f wfq f gpsare Ô¨Ånishing time p wfq gps r s outbound transmission rate r l maxi maximum packet size appear r l best possible bound l time packet p wait arrived instant late packet size l maxhas started instead note packet s subqueue inactive packet start transmitting immediately arrival gps gps send packet relatively slowly prove claim let number packet p p kin order wfq transmission starting recent point subqueue router active note packet spread multiple input subqueues let f ibe Ô¨Ånishing time p iunder wfq let g ibe Ô¨Ånishing time p iunder gps let l ibe length p note f l f p kÔ¨Ånishes p p gps argument finishing order gps wfq case applies p kcannot Ô¨Ånish earlier gps doe wfq f packet p iwith k Ô¨Ånish p kunder gps p ihasleapfrogged pkunder wfq presumably p kwa late arriving let p mbe recent largest m k leapfrogger fair queuing introduction computer network release packet p mÔ¨Ånishes p kunder gps p p earlier tied illustrated gps example claim packet p p kcould arrived r time t startwhen pmbegan transmission wfq p iwith m present time t start fact transmitted p munder wfq imply calculated gps Ô¨Ånishing time came p argued earlier calculated gps Ô¨Ånishing time actual gps Ô¨Ånishing time p iÔ¨Ånishing ahead p mand recalling f mi Ô¨Ånishing time p munder wfq time t startabove simply f tstartand g k packet p p kmust arrive gps depart absolute mum time send packet gps wfq time transmission l l k f fm fm f fm l l line represents desired conclusion deÔ¨Åcit round robin bbrr approach cost o log n n number packet waiting outlined earlier simple approximate alternative o performance introduced assign input subqueue numeric quantum proportional subqueue s bandwidth share subqueue maintain deÔ¨Åcit representing cumulative data granted permission send past wasn t able packet large deÔ¨Åcit smaller size subqueue s head packet subqueue idle head packet deÔ¨Åcit set zero round subqueue granted permission send additional quantum s worth data quantum added subqueue s deÔ¨Åcit new deÔ¨Åcit larger size head packet packet sent possibly packet size packet sent subtracted deÔ¨Åcit smaller size new head packet subqueue get turn quantum number byte large network mtu case subqueue permitted send packet round requirement quantum small take round accumulate deÔ¨Åcit send packet cost quantum approach elegant delay bound bound longer hold fact sender forced wait sender send quantum sender small packet particular deÔ¨Åcit round robin bbrr deÔ¨Åcit bit subqueues granted opportunity send order order virtual Ô¨Ånishing time exercise quantum byte deÔ¨Åcit zero packet current subqueue Ô¨Årst packet sent deÔ¨Åcit updated instead packet deÔ¨Åcit sending packet empty subqueue quantum byte steady stream packet arrives subqueue sent follows queuing schedulingan introduction computer network release round quantum prev deÔ¨Åcit packet sent new deÔ¨Åcit round subqueue allowed send byte exactly quantum implement weighted fair queuing using quantum algorithm adjusting quantum size proportion weight weight respective quantum byte byte quantum q q n subqueues nonempty long run ith subqueue share bandwidth equal q n just implementation fair queuing stochastic fair queuing stochastic fair queuing different kind approximation fair queuing ideal individual tcp connection router fair queuing class connection incentive minimum number packet queue managing separate dynamically changing input class computationally intensive instead hash function used tcp connection identiÔ¨Åed socketpair bucket current default bucket count linux implementation bucket used fair queuing input queue connection hash bucket half bandwidth entitled hash function additional parameter allow perturbed regular interval perturbation socketpairs hashed bucket likely linux implementation stochastic fair queuing known sfq us deÔ¨Åcit round robin algorithm different subqueues ultimately share common pool buffer space packet arrives space available packet fullest subqueue dropped reward Ô¨Çows hold queue utilization modest level application fair queuing saw rule example router competition bottleneck router us fifo queuing pay sender term bandwidth receives packet possible queue fair queuing behave quite differently fair queuing used separate class connection greediness beneÔ¨Åt evaporates sender need queue nonempty order guaranteed assigned share sender limit queue utilization packet danger crowded competing trafÔ¨Åc application fair queuing suppose web server b c want equal share sending mbps link reach link router way r restrict mbps server idle share go unused fair queuing offer better approach busy get mbps busy get mbps busy get mbps isps use strategy internally Ô¨Çows competing outbound link application fair queuing introduction computer network release b cr mbps unfortunately strategy doe work quite receiver suppose b c pool user egthree department want equal share inbound mbps link b cr mbps inbound fair queuing used isp upstream end connection Ô¨Çows identiÔ¨Åed destination isp router likely play Ô¨Çows arrive r late allocate share deliver trafÔ¨Åc b c respectively return scenario application token bucket note kind application need able designate administratively packet classiÔ¨Åed different input class automatic classiÔ¨Åcation stochastic fair queuing help fair queuing bufferbloat fair queuing provides alternative approach theoretically bufferbloat problem bufferbloat active queue management discussed fifo router reduce excessive queue utilization router abandoned fifo instead awarded Ô¨Çow subqueue longer incentive tcp implementation like tcp reno tcp cubic tcp cubic grab queue capacity possible rule example router competition simply longer apply n connection router receive bottleneck bandwidth long Ô¨Çow kept packet subqueue time wfq change proportion principle end user count fair queuing router best transit choice like tcp vega tcp vega keep minimum number packet bottleneck queue tcp vega largely unused today competes poorly fifo queue tcp reno tcp vega versus tcp reno change fair queuing depending maximum subqueue capacity tcp reno user new routing regime receive little fair share bottleneck router tcp bottleneck link utilization link idle long active tcp vega connection udp Ô¨Çows carrying v oip trafÔ¨Åc negligible queuing delay face large Ô¨Åle transfer going parallel practical matter subqueue separate tcp connection expensive reasonable compromise use stochastic fair queuing sfq stochastic fair queuing queuing schedulingan introduction computer network release drop policy dropping fullest subqueue penalizes tcp reno tcp cubic favor tcp vega tcp reno versus tcp vega graph relative bandwidth utilization tcp reno versus tcp vega graph tcp reno outperforms vega fourfold range achieves tenfold greater throughput largest queue capacity comparison chart bottleneck queue changed fifo sfq graph tcp vega get bandwidth tcp reno large queue capacity reno come tcp reno connection face bufferbloat problem tcp vega connection unaffected simulator sfq s total queue capacity set set course router notenable fair queuing stochastic level individual Ô¨Çows reno cubic win vega remains unfruitful choice fair queuing cost money packet processing involved compounding problem isp did implement fair queuing end user stick tcp reno tcp cubic worked best beneÔ¨Åts using protocol like tcp vega unrealized hierarchical queuing queuing discipline multiple input class participate hierarchy root queuing discipline tree input class fed separate queuing discipline hierarchical queuing introduction computer network release hierarchical queuing today hierarchical queuing admittedly somewhat fashion original goal support plex sharing single link multiple data stream different bandwidth delay requirement today s internet provider instead address approach excess bandwidth capacity said hierarchical queuing offer elegant economical alternative despite today s trend clear providing excess capacity option future usual understanding hierarchical queuing node virtual store data make decision subqueue serve physical output interface root physical queue attached leaf node discipline node allowed peek packet subqueues dequeue asked node actually dequeue packet unless packet immediately forwarded tree root referred hierarchy immediate corollary leaf node hold physical packet packet dropping possible chain real queue object construct composite queuing structure packet notstored leaf node resultant hierarchy function expected example node immediately forward ing packet parent forfeited control priority order resultant packet transmission similarly try avoid complexity hierarchical fair queuing connecting separate wfq node tree internal node immediately forward upwards packet simply pile root interior link bottleneck case approach doe work end hierarchical token bucket generic hierarchical queuing simple way enable lazy dequeuing require following property hierarchy s component queuing discipline node support peek operation return packet dequeue asked node determine packet dequeue simply calling peek child node place dequeue operation root node trigger traversal entire tree throughpeek call eventually leaf node dequeue packet pas root generic hierarchical queuing note peek operation leaf node second property interior node recursively deÔ¨Åne peek node homogeneous hierarchy support generic mechanism priority queuing example work parent node need dequeue packet Ô¨Ånds nonempty child subqueue dequeues packet sends tree case needpeek need homogeneous fifo queuing work assuming packet tagged arrival time node determine packet dequeue need peek child node Ô¨Ånd packet queuing schedulingan introduction computer network release example generic hierarchical queuing doe work imagine hierarchy consisting queuing discipline node sends smallest packet Ô¨Årst fed fifo child node parent dequeue packet child node determine smallest fair queuing quite respect generic hierarchical queuing problem packet size case node implement simple selection dequeue packet nonempty child node send immediately tree suppose accommodate packet different size node use bbrr gps problem timely notiÔ¨Åcation packet arrive leaf node interior node information determine correct rate virtual clock appropriate modiÔ¨Åcation generic algorithm hierarchical weighted fair queuing algorithm hierarchical example Ô¨Årst example hierarchical priority queuing shall shortly turn case hierarchy collapse serve illustrate principle basic discipline unit priority queue priority high low root named qr pair queue qa qb diagram level feeding input class root queue qr qa b c d generic hierarchical queuing need classiÔ¨Åer queuing discipline place input packet leaf node labeled b c d likely represent fifo queue set dequeuing rule follows root node Ô¨Årst packet available left subqueue qa dequeue packet right subqueue qb qa qb Ô¨Årst packet available left input labeled dequeue packet available right input labeled subqueue catch hierarchical priority queuing collapse single layer priority level high low hierarchical queuing introduction computer network release root b c d flattened priority hierarchy queuing discipline hierarchy doe collapse example root queuing discipline pqr using priority queuing leaf node using fair queuing fqa fqb fair queuing doe behave interior node modiÔ¨Åcation mentioned participate generic hierarchical queuing just Ô¨Åne leaf node pqr fqa fqb priority fair queuing hierarchy sender receive bandwidth active case active equal share active receive case divide bandwidth fairly root node check dequeue operation fqa nonempty dequeues packet fqa dequeues fqb root doe dequeue packet fqa fqb unless return dequeue operation child node decide internal queue service packet actually needed hierarchical weighted fair queuing hierarchical weighted fair queuing elegant mechanism addressing naturally hierarchical allocation problem properly implemented generic method creating discipline hierarchy fortunately algorithm speciÔ¨Åc hierarchical fair queuing Ô¨Çuid model provides convenient reference point determining goal hierarchical weighted fair queuing interior node divide bandwidth according usual wfq mechanism n interior node ith child n guaranteed fraction ùõºiof n s bandwidth set n s queuing schedulingan introduction computer network release currently active child wfq n allocate active child j fraction ùõΩjequal ùõºjdivided sum ùõºifor determine bandwidth allocated leaf node suppose l level r root level let ùõΩkbe fraction currently assigned node path level k l receive service proportion product fraction path example following hierarchical model leaf node receive fraction total bandwidth fqr fqa fqb fqc fqd hierarchical weighted fair queuing guaranteed node fqd inactive fqa assign fqc case receive bandwidth alternatively stick real packet simplify assuming size andthat child allocation equal situation canimplement hierarchical fair queuing generic hierarchical queuing parent node simply dequeues child node fashion skipping child hierarchical fair queuing unlike priority queuing doe notcollapse hierarchical queuing discipline equivalent queuing discipline example illustrating form tree fair queuing node labeled fqr fqa fqb diagram grant bandwidth input class hierarchical weighted fair queuing introduction computer network release fqr fq abcd abcdfqa fqb hierarchical input class b c d active hierarchical structure get total bandwidth just Ô¨Çat fair queuing structure consider happens b c active d idle Ô¨Çat model b c hierarchical model long fqa fqb active get meaning b split fqa s allocation receive c get application suppose team left right splitting shared outbound interface team contracted receive bandwidth team subdivides allocation member using fair queuing b c active sender team right having active sender c expects receive contractual team right fact decided silence d speciÔ¨Åcally c receive allocation hierarchical fair queuing notbe implemented computing Ô¨Ånishing time packet point arrives way demonstration consider following example root node r interior child node r c b idle b get time d bandwidth active b get d bandwidth idle b d active b receive time bandwidth assume moment large number packet arrived b b receive entire c s share transmission order determined packet arrival order look like queuing schedulingan introduction computer network release suppose wake active point b go receiving total bandwidth time d s bandwidth quarter new relative rate showing s packet relative frequency b d packet reversed arrival later packet packet order b d dependent later arrival queue entirely determined point packet arrive presenting actual algorithm return example example hierarchical weighted fair queuing algorithm wfq scheduling algorithm suitable use framework adjustment Ô¨Årst adjustment node notiÔ¨Åed subqueues active second adjustment modiÔ¨Åcation importantly packet s virtual Ô¨Ånishing time calculated notiÔ¨Åcation node course check dequeuing packet subqueues active using operation icantly packet arrived wfq node need know exact time subqueue active record gps start time subqueue know change rate virtual clock addition notiÔ¨Åcation hierarchical queuing straightforward ously leaf node receives packet send notiÔ¨Åcation parent interior node hierarchy turn forward received notiÔ¨Åcation itsparent provided child subqueues active interior node active subqueues node active new notiÔ¨Åcation need sent way leaf node active news propagated root tree root interior node reached complete hierarchical wfq algorithm modify algorithm gps model support subqueues anytype egfifo priority case hierarchical subtrees vided inactive subqueues notify wfq parent active wfq subqueues suppose want implement wfq subqueues instead fifo arbitrary queuing discipline case interested subqueue represents hierarchy order dequeuing subqueue changed later arrival egas priority queuing packet subqueues disappear queuing assume nonempty subqueues dequeuing operation hold case consider original wfq algorithm envisioned labeling packet p Ô¨Ånishing time follows hierarchical weighted fair queuing introduction computer network release max vc f prev ùõºi clearly labeling packet arrival incompatible subqueues place arriving packet ahead one original algorithm modiÔ¨Åed turn wfq node need calculate Ô¨Ånishing time f pfor packet p head subqueues need time dequeue operation invoked waiting packet need labeled fact packet head subqueue passed dequeue operation large f replaced different packet dequeue sufÔ¨Åcient wfq node maintain subqueues variable nextstart representing time according wfq node s virtual clock used start time subqueue s transmitted packet subqueue s nextstart value serf max vc f prev wfq formula parent wfq node called dequeue packet call thepeek operation subqueues calculates Ô¨Ånishing time f pfor packet pcurrently head subqueue nextstart size p ùõº ùõºis bandwidth fraction assigned subqueue inactive subqueue active hypothesis notiÔ¨Åes parent wfq node parent node record time virtual clock nextstart value subqueue subqueue called dequeue packet p nextstart value updated nextstart size p ùõº Ô¨Ånishing time notiÔ¨Åcation exactly necessary wfq node maintain virtual clock set active subqueues ith subqueue bandwidth share ùõºi clock run rate equal reciprocal sum ùõºifor rate need updated subqueue active inactive Ô¨Årst case parent node notiÔ¨Åed hypothesis second case happens dequeue operation modiÔ¨Åcation needed wfq node suspend virtual clock transmitting following argument end gps model node real interface physically transmit say interior node n logically transmitting root node r currently transmitting packet leaf node l n lie path r note interior node path r l logically transmitting simultaneously speciÔ¨Åc node n called time t dequeue packet p virtual clock run wallclock interval t t size p r root node s physical bandwidth virtual Ô¨Ånishing time p need direct correspondence actual Ô¨Ånishing time t size p rate n s virtual clock interval t t size p depend course number n s active child node remark dequeue operation described relatively inefÔ¨Åcient dequeue operation root result recursive traversal entire tree attempt improve algorithm performance algorithm used mechanism taken example let consider example end hierarchical weighted fair queuing queuing schedulingan introduction computer network release r c b idle b get time d bandwidth active b get d bandwidth assume packet size r transmits rate packet second initially suppose fifo leaf node b d long backlog idle r s subqueues active r s virtual clock run rate c s virtual clock running r s nextstart value subqueues Ô¨Ånishing time assigned r d iwill packet d ireaches head d queue r snextstart d claimed previous section hierarchical wfq node shouldn t need assign Ô¨Ånishing time current head packet fifo subqueues safe initial period r check c s subqueue b ii head packet r s nextstart c calculated virtual Ô¨Ånishing time tie decided b s favor Ô¨Årst second r send second needed send packet packet dequeued c come having active subqueue put c situation gps example packet calculated Ô¨Ånishing time exactly match c s value point actual Ô¨Ånish c dequeues packet virtual clock run second b ii transmitted result packet b iÔ¨Ånishes time c s virtual clock c s virtual clock packet completes transmission let subqueue logged c assign Ô¨Ånishing time c assigned virtual Ô¨Ånishing time b virtual Ô¨Ånishing time assigned c remaining b iwill change point virtual Ô¨Ånishing time c s packet follows hierarchical weighted fair queuing introduction computer network release packet c Ô¨Ånishing time r Ô¨Ånishing time time packet table sent c r send d s packet total virtual Ô¨Ånishing time assigned c b b notchanged note virtual Ô¨Ånishing time assigned packet r different remained idle idle Ô¨Ånishing time f f active Ô¨Ånish b assigned r Ô¨Ånishing time b assigned Ô¨Ånishing time r assigning successive Ô¨Ånishing time increment packet dequeued c b s contribution stream packet bumped far r s assignment virtual Ô¨Ånishing time d iare immutable c s assignment virtual Ô¨Ånishing time r notassign Ô¨Ånal virtual Ô¨Ånishing time c s packet s b s packet reached head c s queue r assigns Ô¨Ånishing time c s packet order dequeued packet dequeued c subject potential preemption epilog want use outbound bandwidth divide sender according termined ratio fair queuing tool use allows example dedicate outbound bandwidth v oip trafÔ¨Åc way wasted using v oip moment catch fair queuing harder apply inbound bandwidth fair queuing application routing ordinary packet example router implement fair queuing tcp trafÔ¨Åc basis sender incentive maximize queue utilization tcp reno lose competitive advantage course implementing fair queuing basis tricky thousand connection exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution queuing scheduling suppose router us fair queuing input class us quantum algorithm virtual finishing time Ô¨Årst class sends packet size byte second sends ets byte sends packet byte list sent Ô¨Çow Ô¨Årst Ô¨Åve round queuing schedulingan introduction computer network release suppose attempt simulate bbrr follows following strategy sbbrr subqueue marker advance bit bit available send queue queue active time take send bit marker advance bit bit packet ticked packet sent explain bbrr fair queuing packet b bbrr input queue active suppose modify sbbrr strategy previous exercise output link idle packet bit ticked marker immediately send packet fewest bit remaining ticked marker suppose packet size size arrive subqueue just begin transmission packet size arrives subqueue fair queuing send packet order mechanism described doe suppose attempt implement fair queuing calculating Ô¨Ånishing time f jfor p j jth packet subqueue follows start max f j wallclock time f start n total number subqueues active suppose router subqueues outbound bandwidth size unit time unit packet arrive subqueue size unit point Ô¨Ånished transmission packet arrive subqueue size Ô¨Ånishing time packet assigned order transmitted b strategy approximately equivalent fair queuing given subqueues router active suppose modify strategy previous exercise letting n number active subqueues time arrival packet p happens input subqueues Ô¨Åve packet arrive subqueue Ô¨Åve packet arrive subqueue assume packet size output bandwidth size unit time unit suppose active subqueues Ô¨Årst Ô¨Ålled packet size second packet size packet size transmission order assuming packet transmitted according bbrr continue packet size byte sent b transmission order assuming packet transmitted according deÔ¨Åcit quantum continue packet size byte sent following packet arrive time router output rate size unit time unit exercise introduction computer network release subqueue size size size subqueue size size size subqueue size size bbrr virtual Ô¨Ånishing time packet b actual wallclock Ô¨Ånishing time packet packet sent bbrr lead transmission order bbrr bbrr assume involves calculation virtual Ô¨Ånishing time sending packet based calculate gps Ô¨Ånishing time following packet present subqueues bandwidth fraction ùõºandùõΩwhere packet size subqueues follows follow fibonacci sequence appears twice ùõº ùõΩ hint evaluate ùõºto decimal place shown suppose wfq router subqueues bandwidth fraction router transmits byte initially subqueues gps virtual clock moment packet size byte arrives Ô¨Årst subqueue similarly sized packet arrives second subqueue Ô¨Ånishing time gps virtual clock b wallclock Ô¨Ånishing time c value gps virtual clock moment wfq Ô¨Ånishing suppose router subqueues outbound bandwidth packet unit time packet arrive timed router remains busy Ô¨Ånishing packet packet arrival schedule lead minimum Ô¨Ånal bbrr clock value b schedule lead maximum Ô¨Ånal bbrr clock value hint rate bbrr clock depends number active subqueues suppose packet subqueues sent using quantum algorithm deÔ¨Åcit round robin packet listed order arrival subqueue length l packet available time quantum byte order transmission queuing schedulingan introduction computer network release subqueue subqueue subqueue disneyland patron wait queue wind slowly large waiting room feed queue room example hierarchical queuing egof fifo queue feeding class generic hierarchy fifo queuing discipline described generic hierarchical queuing collapse single fifo queue exercise introduction computer network release queuing token bucket rate limiting algorithm provides alternative fair queuing fair queuing providing trafÔ¨Åc allocation group main practical difference fair queuing token bucket sender idle fair queuing distributes sender s bandwidth sender token bucket doe bandwidth sender allocated bandwidth cap suppose outbound bandwidth want allocate particular sender bandwidth use fair queuing sender bandwidth fraction suppose want bandwidth example paying reduced rate excess available bandwidth divided sender catch want Ô¨Çexibility allow s packet arrive irregular interval simply wait m s packet begin transmission begin strict suppose dutifully submitting packet interval packet supposed arrive instead arrives following packet arrives time doe mean held allow send late packet theory average rate option generally want solution deÔ¨Åne s quota term bucket speciÔ¨Åcation allows speciÔ¨Åcation average rate burst capacity implemented speciÔ¨Åcation called Ô¨Ålter packet doe meet speciÔ¨Åcation following thing packet bucket ready packet packet Ô¨Årst option called shaping second authoritarian option known aspolicing packet marking used marked packet sent lower priority dropped preferentially downstream router note approach dropping marking straightforward implement delaying packet requires creating place store algorithm resending priate time policing generally appropriate point trafÔ¨Åc enters network egat interface trafÔ¨Åc generator control packet spacing downstream congestion delay lead packet bunching lead violation bucket speciÔ¨Åcation unfair blame trafÔ¨Åc generator use speciÔ¨Åcations theoretical trafÔ¨Åc description rule enforced context compliance Ô¨Ålter thought queuing discipline underlying fifo queue compliant packet delayed dropping packet viewed introduction computer network release alternative deÔ¨Ånition queuing discipline doe provide marking packet straightforward extension token bucket deÔ¨Ånition idea token bucket notional bucket Ô¨Ålled steady rate token divisibility needed Ô¨Çuid overÔ¨Çow bucket discarded send packet need able token bucket bucket packet suffer special treatment bucket sender send burst packet corresponding bucket capacity point bucket common variation requiring token byte packet Ô¨Åll rate correspondingly scaled allows packet size taken account precisely speciÔ¨Åcation tb r b max includes token Ô¨Åll rate r ing rate bucket Ô¨Ålls token bucket capacity depth b max bucket Ô¨Ålls rate speciÔ¨Åed subject maximum b max denote current capacity b b t need specify time order packet size s possibly counting size unit packet speciÔ¨Åcation bucket s token b packet packet sent s token removed bucket possible packet given Ô¨Çow compliant given speciÔ¨Åcation point egone router network point happen example bmaxpackets pile downstream router momentary congestion following graph visual representation constraint black purple curve plotted cumulative bit sent function time bit t bit t horizontal sender idle token bucket rate limitingan introduction computer network release time tblue line bit rtcumulative bit sentred line tb r b sender cross bmaxb t sender shown black purple black sender sends discrete packet graph sequence step purple sender sends continuously different rate different interval blue line represents sender sending steadily rate r solid red line bucket limit compliant sender cross purple sender crossing blue line solid red line fact purple line cross dashed red line falling point blue line represents sender sending linearly rate r burstiness vertical distance b max blue line red line graph compliant sender cross entail burst b maxabove blue line formal argument sender s graph approach red line sender s current bucket content decrease instantaneous bucket content black sender shown point b t purple sender fallen blue line point result catch fact passing vertex point purple graph cross dashed red line proof token bucket queue utilization following numeric example illustrate Ô¨Ålter work satellite token bucket Ô¨Årst got satellite internet service limited Ô¨Ålter rate kbps bucket megabyte bucket emptied took hour reÔ¨Åll idea use internet intensely relatively brieÔ¨Çy satellite access expensive year provider switched Ô¨Çat mb cap day rule apparently understood customer token bucket deÔ¨Ånition introduction computer network release packet arrives token bucket send indicated option sender engage shaping making packet wait sufÔ¨Åcient token accumulate sender engage policing dropping packet sender send packet immediately mark noncompliant common strategy send noncompliant packet marked option lower priority alternatively marked packet face greater chance dropped downstream router atm network asynchronous transfer mode atm priority bit used mark noncompliant packet speciÔ¨Åcations supply framework making decision admission control router decide accept new connection accept connection s request based requested rate bucket queue requirement speciÔ¨Åcations equivalent speciÔ¨Åcations Ô¨Çuid leak leaky bucket rate r send packet add s unit overÔ¨Çowing form completely equivalent far using speciÔ¨Åcations trafÔ¨Åc egtrafÔ¨Åc arriving router possible use token bucket router setting formulation clearer router s queue represents bucket router s packet transmission represent token leaking bucket arriving packet added bucket bucket overÔ¨Çow represents lost packet pursue interpretation example suppose speciÔ¨Åcation tb packet packet arrive following time bucket initially packet processed bucket hold token time fourth packet arrives bucket volume risen immediately drop packet sent bucket volume reached Ô¨Åfth packet sent bucket fortunately remaining packet arrive interval sent set packet arrival time tb burst packet burst empty bucket take m reÔ¨Åll packet compliant following set packet arrival time tb burst packet drain bucket bucket size increased allowing packet arrives sent draining bucket thing happens bucket content rise allowing packet arriving sent finally suppose packet arrive following time tb Ô¨Ålter token bucket rate limitingan introduction computer network release just bucket size just just bucket size just just bucket size just just bucket size just just bucket size just bucket size arriving packet noncompliant represent tabular form follows note noncompliant packet bucket decremented packet arrival bucket just bucket just multiple token bucket make sense require sender comply separate speciÔ¨Åcations think applied trafÔ¨Åc sequentially Ô¨Ålter specify peak rate small bucket size specify average rate larger bucket size consider example following pair tb packet tb packet Ô¨Årst speciÔ¨Åcation meant apply peak rate mandate m average packet packet m early noncompliant second speciÔ¨Åcation meant apply longer term state average m packet subject burst following compliant assuming bucket initially Ô¨Årst seven packet arrive m interval rate Ô¨Årst Ô¨Ålter packet arrived instead sender allowed send instead waiting bucket size Ô¨Årst Ô¨Ålter instead packet arrival current size bucket time packet arrival just bucket decremented bucket arrival filter filter multiple token bucket introduction computer network release packet time Ô¨Årst point bucket reached fastest compliant sequence pair Ô¨Ålters sequence generated shaper steady backlog packet sent soon bucket capacity capacity applicable allow sending bucket return capacity continuing bucket allows additional transmission point limiting factor bucket packet sent doe return following arrival filter filter gcra formulation speciÔ¨Åcations generic cell rate algorithm gcra formulation frequently used classiÔ¨Åcation atm trafÔ¨Åc gcra speciÔ¨Åcation take parameter mean packet spacing time t allowance packet compute theoretical arrival time tat initially zero packet arrive earlier speciÔ¨Åcally t time actual arrival case packet compliant update tat max t tat t t ùúè packet early noncompliant tat unchanged Ô¨Çow satisfying gcra t ùúè equivalent speciÔ¨Åcation rate time bucket size tat represents time bucket time Ô¨Åll bucket bucket time tat working backwards contain send packet time trafÔ¨Åc Ô¨Çows constant rate ùúèrepresents time packet late permanently falling regular rate gcra formulation nient formulation particularly ùúè t application token bucket unlike fair queuing Ô¨Åltering implemented downstream end link sibly result quite agreement expectation let return Ô¨Ånal scenario plication fair queuing b cr mbps fair queuing applied r enforce equal share b c canimplement Ô¨Ålter r limit b c mbps token bucket rate limitingan introduction computer network release drawback Ô¨Ålter idle b c receive mbps second absence feedback guarantee limiting trafÔ¨Åc r eventually result reduced utilization isp √Ω√±r link true tcp trafÔ¨Åc property conceivable sender d trying send mbps udp trafÔ¨Åc isp trafÔ¨Åc fail compliant dropped r unless d get feedback trafÔ¨Åc getting reduce sending rate Ô¨Ålter r achieve want protocol doprovide kind feedback guaranteeing voip bandwidth particular instance previous situation suppose internet connection isp want begin using v oip telephony like reserve like kbps bandwidth v oip line plus room header large downloads degrade voice quality easily upstream direction fair priority queuing priority queuing lead starvation trafÔ¨Åc total v oip trafÔ¨Åc limited number line downstream direction problem unable enlist isp apply fair priority queuing end argued application fair queuing fair queuing downstream end congested link effect queue buildup isp s end link mean incoming v oip trafÔ¨Åc wait line trafÔ¨Åc downloads receive bandwidth requires likely router isp s end large queue meaning relatively extensive waiting time need limit total downstream trafÔ¨Åc limited trafÔ¨Åc manipulation downstream end provide answer idea limit aggregate bandwidth oip trafÔ¨Åc entering site leaving room v oip trafÔ¨Åc create downstream site entrance node tbf diagram Ô¨Ålter applies oip trafÔ¨Åc feature represented dashed v oip bypass path Ô¨Ålter s rate limit total download bandwidth minus reservation v oip example knew total bandwidth reserve say v oip trafÔ¨Åc having Ô¨Ålter limit delivery oip load trafÔ¨Åc diagram Ô¨Ålter represented conceptually large red dot short red segment represents virtual physical bottleneck link oip trafÔ¨Åc isp link sitetbfvoip bypass unfortunately encounter problem Ô¨Årst v oip trafÔ¨Åc Ô¨Çowing probably guaranteeing voip bandwidth introduction computer network release want cap trafÔ¨Åc arrange applying cap phone use setting aside small bandwidth fraction doe material affect overall bulk bandwidth second problem remote possibility discussed previous example sender sending downstream Ô¨Ålter throw away bit want link saturated quite difÔ¨Åcult determine exactly bandwidth particular internet connection especially case shared conÔ¨Ågured change time subject cap isp fortunately typical v oip bandwidth need low muddle viding guarantee remains good example difÔ¨Åculties faced trafÔ¨Åc limiting delay let s repeat previous example instead trying guarantee v oip bandwidth instead attempt limit total queuing delay mean presence large downloads v oip trafÔ¨Åc little queuing isp s router create Ô¨Ålter site entrance set limit total rate incoming trafÔ¨Åc just download link bandwidth packet arrive kbps set rate kbps little higher mean bottleneck link downstream direction virtual link downstream Ô¨Ålter rest site shown red diagram previous section queue build Ô¨Ålter red dot diagram steady state tcp trafÔ¨Åc queue build isp s end step enable codel codel manage queue Ô¨Ålter codel achieves dropping trafÔ¨Åc queue appropriate size end result downstream trafÔ¨Åc encounter queue isp s end assuming tcp steady state modestly sized queue site s end limited waiting time v oip trafÔ¨Åc limited queuing delay alltrafÔ¨Åc exchange giving utilization downstream link delay causing signiÔ¨Åcant problem reasonable tradeoff mean codel throwing away trafÔ¨Åc site long run worth isp limit download bandwidth Ô¨Ålter signiÔ¨Åcant bucket order accommodate burstiness copy upstream bucket size downstream end token bucket queue utilization suppose trafÔ¨Åc meeting speciÔ¨Åcation tb r b max arrives router r competition trafÔ¨Åc bucket Ô¨Åll rate r corresponds minimum outbound link bandwidth needed r guarantee trafÔ¨Åc doe build want trafÔ¨Åc average arriving faster depart intuitively bucket size b maxcorresponds queue space r Ô¨Çow consume make precise argue output rate r r number token bucket rate limitingan introduction computer network release untransmitted bit stored r b max formally start proving red line lemma implicit discussion graph token bucket deÔ¨Ånition sender cross red line speciÔ¨Åcally assume Ô¨Çow satisÔ¨Åes tb r b max bucket time let bit t cumulative number bit sent packetized time blue line graph bit rt red line graph bit rt bmax following bit t rt b max Ô¨Årst prove long graph blue line bit t rt claim hand minus rt b bit t represents volume b t Ô¨Çuid token bucket equating rearranging slightly need b t bit t rt equal b max true bit t rt bucket establish rate change constant bucket b t Ô¨Ålled rate correspondingly rt increasing rate r b t rt affected Ô¨Åll rate similarly b t reduced exactly rate bit t increasing use packet formulation packet arrives b t reduced packet size bit t increase exactly calculus version reader familiar calculus help note db t r bit t assume say Ô¨Çuid model bit t differentiable bucket volume b t increase rate r decrease rate equal arriving data rate change b t bit t rt just r bit t bit t r doe quite apply bit t fall blue line prove bit t later interval blue line starting time t reapply argument clock bit counter fact argue bit t graph pass point blue line point diagram bit t future climb new red line dashed red line diagram b maxunits point token bucket router return claim accumulation router r outbound Ô¨Çow r let bit t represent cumulative data received long bit t blue line router continuously transmit rate r net number bit held router bit r rt argument bounded b max bit t fall blue line router s queue router transmit incoming data fast arriving r holding b maxbytes instant just packet Ô¨Ånishes transmission b maxbytes queue plus currently transmitting packet taking entire buffer practical matter need space equal b maxplus packet token bucket router introduction computer network release speciÔ¨Åcation doe include delay bound speciÔ¨Åcally compute upper bound queuing delay router r b time take bucket s worth packet transmitted n Ô¨Çows individually satisfying tb r b collective trafÔ¨Åc satisfy tb nr nb exercise bucket size nb needed n individual Ô¨Çows burst gang particular instant possible advantage theoretical ical statistical information conclude collective trafÔ¨Åc time meet speciÔ¨Åcation tb nr b n b nsigniÔ¨Åcantly nb token bucket multiple router single tb r b max Ô¨Çow n router queuing delay notlarger single router assuming competition speciÔ¨Åcally assume trafÔ¨Åc Ô¨Çow arrives router tb r b pass turn r r router r ihas outbound bandwidth large total queuing delay n router remains b packet pile maximum size b max prove compare tb sequence packet sequence packet sent steady rate r series router bit packet k nth bit began steady stream send packet k time assume link rate reduced let represent time start counting bit n established nth bit tb packet Ô¨Çow transmitted b second ahead nth bit sent time packet encounter queuing delay router Ô¨Ånished previous tb packet arrive later packet sent earlier cross maximum delay faced tb packet b exactly trafÔ¨Åc single router delay constraint trafÔ¨Åc Ô¨Çow arriving router r compliant speciÔ¨Åcation tb r b showed r s queue space used Ô¨Çow bounded b long r devote rate r Ô¨Çow s trafÔ¨Åc let add delay constraint suppose r allowed delay Ô¨Çow s packet time time assume trafÔ¨Åc need make sure r sufÔ¨Åcient bandwidth forward bucketful size b time interval send burst size b time d bandwidth needed satisfy constraint r need outbound bandwidth s max r example suppose trafÔ¨Åc speciÔ¨Åcation tb rate d ¬µsec necessary outbound bandwidth s simply example suppose previous example delay limit d ¬µsec case need s token bucket rate limitingan introduction computer network release isother trafÔ¨Åc delay constraint hold provided s represents bandwidth allocated r Ô¨Çow Ô¨Çow s packet receive priority service r Ô¨Årst subtract delay packet size trafÔ¨Åc calculation sort play role router s decision accept reservation additional tb r b Ô¨Çow associated delay constraint hierarchical token bucket Ô¨Ålters used form hierarchy generic hierarchical queuing section assume token bucket used shaping delaying packet bucket sufÔ¨Åciently Ô¨Ålled usual packet remain leaf fifo queue ready transmitted central hierarchy conceptual time internal node release packet able inform parent node asked packet ready send packet physically remains waiting leaf queue node n informed child node packet released n s bucket sufÔ¨Åcient capacity n release packet turn parent immediately n wait bucket Ô¨Ålls sufÔ¨Åciently make packet compliant packet arrives leaf node progressively released node path root released root node sent make Ô¨Ålters classful assume node multiple input subqueues treat consolidated single fifo subqueue node release packet parent order released node child leaf node mark packet release time moment arrival interior node able determine release time packet released child node straightforward deÔ¨Åne peek operation generic hierarchical queuing node look set packet released return earliest release time hierarchy make sense say child Ô¨Çows bucket size respectively combined Ô¨Çow limited bucket size following diagram illustrates example hierarchy Ô¨Ålters rate bucket size packet delay constraint introduction computer network release tb tb tb b hierarchical token bucket s rate sum child rate long child packet ready send child receive bandwidth proportion token bucket rate example s rate sum rate child child receive promised rate send rate send rate assume remain nonempty period long bucket release packet respective rate following sequence release time assume start avoid tie packet released shown italic dequeued s bucket long run released packet sequence s sender b receive ings root bandwidth node physically forward released packet fifo queue attached parent node called hierarchy hierarchical queuing particular case mechanism function identically provided internal link inÔ¨Ånitely fast internal queue inÔ¨Ånitely large exercise point having node bucket larger sum child bucket rate larger sum child rate example sum child rate exceeds parent rate able send sustained rate provided b sends reducing child rate respectively equivalent node s rate larger sum child rate able handle child trafÔ¨Åc delay child bucket emptied parent bucket limiting factor fair queuing token bucket combination Ô¨Årst glance combining fair queuing token bucket improbable goal fair queuing allowing bandwidth assigned idle input class divided active token bucket rate limitingan introduction computer network release input class goal token bucket generally limit class maximum transmission rate usual approach synthesis allow administrator decide node hierarchy node borrow repayment bandwidth inactive sibling set sibling mutual borrowing privilege resembles scheduler node like scheduler cbq cbq introduced analyzed did actually use mechanism instead implemented shaping keeping track average idle time precisely time given input class input class tried send restricted unless node permitted borrow bandwidth sibling input class sent allowed average utilization fall burst arrived time average catch node brieÔ¨Çy send faster assigned rate size implicit bucket controlled indirectly linux htb linux htb queuing discipline trafÔ¨Åc control tc allows general tionality cbq replaces calculation Ô¨Ålters permit direct control burst size avoids technical timing issue cbq user watch sake efÔ¨Åciency htb us deÔ¨Åcit algorithm fair queuing noted deÔ¨Åcit round robin mean precise control packet delay htb come hierarchical token bucket best viewed primarily mentation hierarchical weighted fair queuing hierarchical weighted fair queuing fact htb doesn t actually implement hierarchical token bucket token bucket shaping htb doe ingonly leaf node hierarchy interior node present create hierarchy fair queuing node tree following attribute guaranteed rate r corresponding rate burst allowance b corresponding bucket size ceiling rate r ceil leaf node send faster case r ceilmay simply output rate root node interior node conÔ¨Ågured ceiling rate sum child rate child node send rate interior node low ceiling rate affect borrowing important attribute node guaranteed rate requested rate node large sum child rate following diagram rate kbps burst allowance shown assume root guaranteed rate kbps ceiling rate cbq introduction computer network release r n linux htb packet marked green yellow orreddepending situation red packet wait eventually turn yellow green packet considered green compliant waiting earlier leaf node green packet sent soon possible emptied bucket exhaust node n s rate similarly n m emptied bucket use half r s rate node allowed borrow bandwidth payback parent s rate packet beneÔ¨Åting borrowed bandwidth marked yellow sent immediately green packet waiting borrowing proportion node s guaranteed rate manner fair queuing guaranteed rate child node treated unnormalized weight normalized weight fraction obtained dividing total n normalized weight fraction engage borrowing n trafÔ¨Åc send get total bandwidth kbps respectively idle kbps n m borrow turn r send kbps respectively case assuming active kbps m elect borrowing send n kbps behavior desired set r r node send faster guaranteed rate allows htb model hierarchy hierarchical token bucket working example htb parent child node constructed linux trafÔ¨Åc control tc theorem Ô¨Ånal example relating speciÔ¨Åcations fair queuing present theorem provides precise bound trafÔ¨Åc enters network meeting token bucket rate limitingan introduction computer network release bucket speciÔ¨Åcation tb r b guaranteed fraction router path speciÔ¨Åcally let assume trafÔ¨Åc travel sender destination b n router r rn output rate ith router r ii ri Ô¨Çow guaranteed rate f let f min f n suppose maximum packet size packet Ô¨Çow s maximum packet size including competing trafÔ¨Åc s max total delay encountered Ô¨Çow s packet bounded sum following propagation delay total delay link sum n sum n s second term represents queuing delay introduced single burst size b showed token bucket multiple router delay bound applied regardless number router term represents total delay router packet belonging Ô¨Çow gps delay r ii Ô¨Ånal term represents degree delay packet theoretical gps time expressed term router use gps Ô¨Årst term bound packet delay established bound router r imay introduce additional delay gps delay s epilog previous chapter saw want use outbound bandwidth divide sender fair queuing way want impose absolute relative cap trafÔ¨Åc token bucket appropriate cap business justiÔ¨Åcations customer want bandwidth pay guaranteeing voip bandwidth token bucket beneÔ¨Åcial really interested cap work downstream router fair queuing doe trafÔ¨Åc queuing discipline fair queuing token bucket priority queuing come fundamental building block tool allow guarantee bandwidth fraction v oip trafÔ¨Åc allow trafÔ¨Åc sent minimal delay chapter quality service encounter fair queuing speciÔ¨Åcations repeatedly exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise marked solution hint solution queuing scheduling trafÔ¨Åc stream meet speciÔ¨Åcations tb tb respectively commingled trafÔ¨Åc meet tb hint imagine common bucket size Ô¨Ålled rate red token rate blue token theorem introduction computer network release sequence arrival time indicate packet compliant given speciÔ¨Åcation packet noncompliant arrival decrementing bucket tb b tb c tb fastest sequence end multiple token bucket following Ô¨Çows start bucket initially tb packet depart minimum time unit apart continue sequence b tb tb multiple packet depart instant continue fastest sequence packet compliant following speciÔ¨Åcations continue sequence tb tb tb hint Ô¨Årst speciÔ¨Åcation mean arrival time separated middle cation kick gps trafÔ¨Åc Ô¨Çow gps model satisÔ¨Åes speciÔ¨Åcation tb r b interval time t trafÔ¨Åc b r hint interval Ô¨Çuid added bucket exactly r hierarchy hierarchical token bucket produce result hierarchy intermediate node contained real fifo queue node instantaneously transmitted packet parent s fifo queue soon released packet transmitted hierarchy time hint node hierarchy release packet time corresponding hierarchy forward packet upwards following linux htb hierarchy labeled guaranteed rate difference term bandwidth allocation received sender b b r r continues page token bucket rate limitingan introduction computer network release continued previous page b b suppose know trafÔ¨Åc given router r us mbps total mbps bandwidth consider following way giving trafÔ¨Åc special treatment using priority queuing giving trafÔ¨Åc higher priority ii using weighted fair queuing giving trafÔ¨Åc share trafÔ¨Åc meet speciÔ¨Åcation rate mbps negligible bucket size mechanism equivalent sense trafÔ¨Åc Ô¨Çows sending fraction ùõºandùõΩ respectively mbps outbound rate method actually send rate b difference expected bucket size notnegligible approach favor fraction previous exercise suppose twoseparate Ô¨Çows guaranteed speciÔ¨Åcation exceed mbps material difference pair following sending Ô¨Çows priority remaining trafÔ¨Åc priority ii sending Ô¨Årst Ô¨Çow priority second priority remaining trafÔ¨Åc priority iii giving Ô¨Çow wfq share rest wfq share suppose router us priority queuing input outbound bandwidth queue currently maximum time arriving packet wait b trafÔ¨Åc follows description tb rp b rp r maximum time arriving packet wait hint use token bucket queue utilization answer include symbolic representation necessary additional parameter theorem introduction computer network release token bucket rate quality service far internet presented place trafÔ¨Åc sent basis router handle trafÔ¨Åc equal footing seen fundamental aspect ip layer delay loss congestion nearly universal bulk usually quite sufÔ¨Åcient way look tcp congestive loss mechanism ensure optimum utilization available bandwidth want trafÔ¨Åc receive certain minimum level network service allow individual sender negotiate service advance grant preferential service speciÔ¨Åc protocol v oip arrangement known quality service qos assurance involve bandwidth delay loss rate combination bulk sender example wish negotiate ahead time speciÔ¨Åed bandwidth sender interested level especially common concern sending receiving trafÔ¨Åc videoconferencing sender likely bandwidth constraint constraint delay loss rate furthermore application simply fail temporarily bandwidth delay loss constraint met network large small bulk trafÔ¨Åc create queue backlog large cause unacceptable delay assurance involve cooperation router router use queuing scheduling mechanism queuing scheduling set aside bandwidth designated trafÔ¨Åc major departure classic internet model stateless router information speciÔ¨Åc connection Ô¨Çows natural feature circuit routing chapter introduce mechanism internet introduce theory mechanism exactly adopted warm arm isp industry simply problem isps like implement feature using using isps don t support isp s problem qos feature come cost router state manage work require upgrade speciÔ¨Åc cost issue clear charge endpoint qos request rsvp particularly endpoint direct customer clear compare special trafÔ¨Åc like multicast purpose pricing standard unicast trafÔ¨Åc nonetheless v oip stay medium scale streaming video stay large scale issue longer quite ignored blithely note fundamental request internet sharing multiple Ô¨Åc class transmission various grade premium trafÔ¨Åc network lease sonet line construct private network approach expensive support multiple trafÔ¨Åc class network referred generically integrated service special case trafÔ¨Åc engineering confused speciÔ¨Åc ietf protocol suite integrated service rsvp introduction computer network release separate issue integrated network make sure premium trafÔ¨Åc get service requires integrate different trafÔ¨Åc class network Ô¨Årst issue addressed largely technique presented queuing scheduling applies network single service level present chapter address second issue request tcp udp trafÔ¨Åc example interactive tcp connection request path bulk connection request bandwidth path connection request speciÔ¨Åc guaranteed width service quality particular concern trafÔ¨Åc voice interactive video delay major difÔ¨Åculty trafÔ¨Åc likely use udp tcp blocking problem return udp trafÔ¨Åc net neutrality school thought say carrier carry trafÔ¨Åc equal footing forbidden charge extra premium service strong formulation net neutrality principle potentially complicates implementation service described principle matter premium service involves interaction router described mechanism simply involves improved access carriage weaker formulation net neutrality example trafÔ¨Åc carriage carrier charge premium service long did single individual provider rate throttling taking side debate good reason arguing additional charge speciÔ¨Åc service backbone router appropriate additional charge avoid rate tling wild queue stated ensure standard necessary participation router signiÔ¨Åcant queue backlog clear router late s claimed signiÔ¨Åcant congestion backbone router word quote reminder term doe precise technical meaning worth noting era kbps dialup access residential user just year later analysis internet concluded internet cloud doe contribute heavily time writing appears internet backbone continues excess capacity seldom congested delay likely tered locally study using timestamp ping end suspected link congestion occurred network work netÔ¨Çix google interconnection isps concretely suppose trafÔ¨Åc b go router quality servicean introduction computer network release b queuing delay loss occur need involve scheme true delay occur unfortunately easy determine location internet congestion abundance bandwidth today dearth tomorrow bandwidth usage ineluctably grows consume supply said early model request assumed router need participate quite possible practically speaking longer true possible consequence adequate qos level attainable participation s immediate isp trafÔ¨Åc trafÔ¨Åc trafÔ¨Åc sort hard soft delay bound presumably larger propagation delay trafÔ¨Åc said voice video trafÔ¨Åc packet arriving time played lost fortunately voice video degree lost voice packet simply result momentary voice dropout lost video packet result replay previous video frame handling trafÔ¨Åc intolerant difÔ¨Åcult consider case trafÔ¨Åc example service send resolution approximately corresponding bandwidth kbps kbps mbps mbps data hulu s software dynamically choose appropriate rate hulu transmission consequence delay pause video replay loss necessarily streaming video example codec opus successor earlier codec known speex normally used kbps rate support continuous range rate kbps lower rate lower voice quality used fallback event congestion prevents successful use kbps rate generally speaking notwithstanding trafÔ¨Åc need sufÔ¨Åcient management gestion minimal trafÔ¨Åc allowed arrive router example faster depart deÔ¨Ånitive way achieve sort reservation control mechanism new connection accepted unless resource available playback buffer application avoid delay completely course received stream delivered receiving application playback voice video stream slightly time sent application intentionally increase time creating playback buffer orjitter buffer allows smoothing variation delay known jitter example suppose v oip application sends packet m typical rate delay exactly m packet sent time etcwill arrive time suppose delay uniform packet sent arrive time trafÔ¨Åc introduction computer network release packet sent expected received rec d expected Ô¨Årst packet arrived time second early fourth late m respectively setting playback buffer capacity m mean packet received time played discarded setting buffer value m mean packet received time send time diagram plot point table dashed line represents expected arrival time corresponding send time packet late line solid blue line represents playback buffer corresponding m packet arriving point line lost higher line playback delay playback accommodate late packet voice video essentially penalty making playback buffer quite long telephony speaker stop start perceive gap length equal rtt including delay voice increasingly annoying rtt delay reach streaming video streaming video gray area hand really viewer necessarily care long delay long consistent delay second minute uncommon long sender stay ahead playback application real issue bandwidth delay ten second order magnitude larger delay bound genuine application request quality servicean introduction computer network release large video sender probably coordinate playback application limit far ahead get amount using playback buffer playback buffer accommodate Ô¨Çuctuation delivery rate long run delivery bandwidth large playback rate smaller video egtraditional youtube clip sender sends fast stopping delivery bandwidth playback rate viewer hit pause wait entire video downloaded hand viewer particularly like pause especially long video viewer start movie average network congestion level change materially time interval viewer prefer consistent bandwidth competing trafÔ¨Åc ramp adaptive playback Ô¨Åne signed viewing viewer want guarantee supplied overbuilding network implementing mechanism chapter various intermediate approach example provider n negotiate residential internet carrier c sufÔ¨Åcient bandwidth n viewer problem backbone congestion n arrange use bgp s med option med value trafÔ¨Åc engineering carry trafÔ¨Åc far possible network entail creation large number peering point c s network internet exchange point alternatively c persuaded set aside large trafÔ¨Åc category backbone network using differentiated service reserved n s trafÔ¨Åc udp trafÔ¨Åc main difÔ¨Åculty using tcp trafÔ¨Åc blocking loss doe occur tcp layer hold later data lost segment time retransmitted receiving application able simply ignore lost packet granted option theory tcp timeout interval slightly rtt practice larger use clock track timeouts tcp implementation actually discouraged using smaller timeout interval following rfc rto stand retransmission timeout rto computed second rto rounded second policy make tcp unsuitable environment vanishingly small loss rate genuine interactive response needed includes telephony video telephony form video conferencing involve feedback participant tcp doe work video streaming true popular package skype doe fact use tcp skype Ô¨Ågured way limitation skype session infrequently plagued difÔ¨Åculties use udp allows application option deciding lost late data simply skipped integrated service rsvp integrated service intserv developed ietf late s Ô¨Årst attempt providing guarantee selected internet trafÔ¨Åc intserv model assumed router integrated service rsvp introduction computer network release participate router connection path strictly necessary connection make reservation using resource reservation protocol rsvp note major retreat model virtual circuit virtual circuit better routing model better worse marketplace appears answered question unambiguous intserv seen limited adoption core internet idea intserv implementable internet using appropriate content distribution network outlining intserv cdn alternative cdn alternative intserv intserv router maintain soft state connection meaning reservation refreshed sender regular interval second reservation discarded mean reservation recovered router crash small probability failure traditional switch maintain hard state sender stop sending fails hang properly connection maintained charged router crash mean connection lost intserv supported backbone isp industry partly practical difÔ¨Åculties Ô¨Åguring charge reservation charge zero make reservation connection issue busy router maintain thousand reservation intserv add genuine expense isp s infrastructure time intserv developed dominant application envisioned teleconferencing speaker s stream sent large number receiver intserv based ip multicast turn decision intserv somewhat complex necessary v oip required future internet reservation mechanism jettison multicast support nsis multicast intserv share fundamental common require participation intermediate router effectively implemented solely end system global ip multicast idea ip multicast following multicast address sender transmits stream packet setof receiver bn way packet stream transmitted link mean router way duplicate packet need forwarded multiple outbound link example suppose wish send following diagram receive packet forward receive packet forward forward doe trafÔ¨Åc quality servicean introduction computer network release set path used multicast trafÔ¨Åc sender destination known multicast tree shown bold acknowledge upfront ip multicast potentially useful technology intserv support mainstream isp industry central issue need router maintain complex new information difÔ¨Åculty Ô¨Åguring charge kind trafÔ¨Åc larger scale isps normally charge total trafÔ¨Åc carried suppose isp s portion multicast tree single path continent tree branch different path near point egress isp consider like unicast connection like time ideal candidate multicast delivery broadcast television ironically expansion internet backbone meant video delivery achieved individual unicast connection viewer model site delivering video online education time natural candidate multicast separate unicast connection entirely affordable line future multicast application really need note ip multicast potentially straightforward implement single large small tion setting organization free set budget rule multicast use multicast trafÔ¨Åc consist udp packet provision tcp speciÔ¨Åcation multicast connection large group acknowledgment receiver multicast udp packet tical returning acks consume bandwidth outbound data fortunately complete acknowledgment unnecessary archetypal example multicast trafÔ¨Åc voice video trafÔ¨Åc rtp protocol transport protocol rtp includes response anism receiver sender rtp response packet intended sender idea loss rate effort expended rtp protocol precisely companion protocol rtcp make sure response packet multiple recipient end amounting trafÔ¨Åc data trafÔ¨Åc original ethernet model multicast node agree physical multicast address receiver subscribe address instructing card forward host packet address destination switch turn expected treat packet addressed multicast address broadcast forwarding allinterfaces arrival interface global broadcast option internet router receive speciÔ¨Åc instruction forwarding packet large switched ethernet newer switch generally try avoid broadcasting multicast packet preferring instead attempt Ô¨Ågure subscriber multicast group actually located principle ip multicast routing thought extension ip unicast routing model ip forwarding table usual xudest yentries unicast destination andxmdest yentries multicast destination diagram g represents multicast group receiver entry xg needed multicast routing work extension bgp rithms accommodate multicast destination using g denote actual multicast group multicast address group time ignoring exactly group assigned actual multicast address extension fact quite straightforward case global ip multicast introduction computer network release node use local network map Ô¨Ågure optimal multicast tree problem internet host potentially join multicast group router maintain separate entry multicast group opportunity consolidation chical routing matter way support multicast basic separation address network host portion crucial continued scalability ip ing multicast address block contains million entry far support entry second problem multicast group unlike unicast destination ephemeral place additional burden router trying track routing group example ephemeral group used speciÔ¨Åc speaker finally multicast group tend member host far wide internet generally send multicast group close relationship diagram sender actually member group strong tie reason know multicast group need way think multicast routing successful approach subscription model sender receiver join leave multicast group dynamically route group subscribed router update multicast tree event optimal multicast tree determined receiving group thesender different sender wanted send group different tree constructed practice tree constructed sender transmitting large volume data important sender modicum inefÔ¨Åciency multicast protocol suited purpose known deÔ¨Åned rfc pim stand multicast mean tied speciÔ¨Åc routing protocol sm stand sparse mode meaning set member widely scattered internet acknowledge reasonable starting point realistic multicast implementation difÔ¨Åcult Ô¨Ånd isp implement Ô¨Årst step given multicast group g destination designation router serve rendezvous point rp multicast group set particular sender rp router near sender rp serve default root multicast tree time multicast tree created sender send packet rp forward multicast tree group member level internet group management protocol igmp used host inform local router designated router dr group wish join designated router learns host b wish join group g forward join request rp join request travel dr rp usual path dr rp suppose path diagram xdr rp router chain create update entry group g router record entry trafÔ¨Åc g need sent previous router list starting dr trafÔ¨Åc g come router list ultimately rp quality servicean introduction computer network release rp dr s diagram suppose Ô¨Årst join group s designated router join packet sent entry g s entry example speciÔ¨Åes packet addressed g sent come entry tagged x gy use rfc s notation mean sender return tree wish join designated router dr sends join request path update entry g reÔ¨Çect packet addressed g warded set fact doe need forward join packet point sender s send group g creating ip packet lating unicast ip packet addressed rp rp open encapsulation forward packet tree represented bold link note data packet sent rp dr follow path rp set normal unicast path multicast path based s preferred rp assumed trafÔ¨Åc sender speciÔ¨Åc receiver take exact reverse path unicast packet receiver sender saw hierarchical routing provider common unicast ip trafÔ¨Åc different path direction step introduce tree sender suppose sender s sending considerable trafÔ¨Åc g link blue serve shortcut s global ip multicast introduction computer network release rp dr s suppose trafÔ¨Åc reach rp like allow s send g path rp initiate special join message sent message sent rp group g announcing option creating speciÔ¨Åc tree s properly s s designated router change router reach rp router receives message note reach directly general different path us reach rp send join message general entry x gybut entry x gy meaning forward trafÔ¨Åc addressed g coming s accept forward packet rp rp doe belong group g rp x gyentry say unless diagram extended forward tagsx gyandxs gythus mark different tree rooted rp rooted router use implicit strategy using entry available wildcard x gyentry mentioned repeatedly necessary isp cooperation forthcoming stopgap measure multicast backbone mbone created modest subset router router actually internet domain isps let backbone isps join multicast group mbone Ô¨Årst identiÔ¨Åed nearest mbone router connected using tunneling mbone gradually faded away year discussed multicast address allocated speciÔ¨Åc set host wishing form multicast group large block address assigned iana assigned speciÔ¨Åc protocol example multicast address network time protocol use ntp quite happily using multicast block reserved multicast block allocated glop standard site autonomous number byte x y site automatically get multicast block fuller allocation scheme wait adoption development broader strategy happen quality servicean introduction computer network release rsvp turn rsvp reservation protocol form core intserv original model rsvp support multicast support teleconferencing reason reservation requested sender receiver multicast sender know receiver reservation direction bidirectional trafÔ¨Åc need make reservation like multicast rsvp generally requires participation intermediate router reservation include Ô¨Çowspec describing trafÔ¨Åc Ô¨Çow ega unicast multicast destination Ô¨Ålterspec describing identify packet Ô¨Çow assume Ô¨Ålterspecs simply deÔ¨Åne unidirectional unicast Ô¨Çows egby specifying source destination socket general spec possible component Ô¨Çowspec tspec trafÔ¨Åc spec speciÔ¨Åcation Ô¨Çow appears tspecs fact include bound total delay degree ofqueuing delay router computed tb r b max parameter b main message used rsvp path packet sender receiver subsequent resv packet receiver sender initially sender sender sends path message receiver receiver single unicast connection multicast group path message contains sender s tspec receiver need know make reservation path message just ultimate recipient router path examines packet learns identity rsvp router upstream direction path message inform router path path state sender example imagine sender sends path message receiver b using normal unicast delivery suppose route taken suppose b simply sends unicast message route different b arrow path normal unicast traffic b rsvp traffic follows bold link direction s path message head b record hop particular path record hop b need note hop presumably know directly connected convey information router insert ip address speciÔ¨Åc location path packet router receive path packet know hop path state stored router includes address previous router sender s tspec record particular path rsvp introduction computer network release path packet word tell receiver tspec prepares router way future reservation actual trafÔ¨Åc sender receiver b eventually forwarded standard unicast path branch b just like path message router check packet forwarded reservation order reserved trafÔ¨Åc preferential drop rate reduced queuing delay order police reservation ensure sender sending reserved trafÔ¨Åc agreed reserved trafÔ¨Åc identiÔ¨Åed source destination ip address port number combination likened vci routing virtual circuit constant path receiving sender s path message receiver responds resv message ing reservation resv packet passed sender default unicast route reverse path created path message example resv packet travel router b look resv message look sponding path record order Ô¨Ågure pas reservation message chain resv message sent using normal unicast b router seeing resv path make decision able grant reservation admission control decision router typically set aside fraction total bandwidth reservation likely use priority queuing preferred service fraction long fraction bulk unreserved trafÔ¨Åc shut fair queuing used reservation resent egevery second time away mean receiver shut canceling reservation continue tie resource resv message moving multicast tree backwards unicast path likely reach router granted reservation equal greater capacity diagram router r granted reservation trafÔ¨Åc receiver reached r s interface similar reservation receiver reached r s interface r assuming r able grant s reservation doe send resv packet upstream request new reservation s reservation merged s r simply receive packet forward interface receiver respectively necessary router path suppose sends path message b router listed cloud store path state mark path packet ip address path packet arrives bear s ip address record hop possible sends resv packet different path doe matter accepting quality servicean introduction computer network release reservation delivery used instead router path covered reservation outlined wild queue quite possible need participation various s quality service wanted contribute delay multicast model receiver make reservation sender receiver sender data transmission protocol used receiver make reservation sender lower rate sender sending work node sender receiver willing decode data lower rate rtp protocol provides support form rtp mixer rtp mixer allows different member multicast receiver group receive stream different resolution isp s perspective problem rsvp likely lotof reservation isp Ô¨Ågure decide get reserve model simply charge reservation complicated isp doing charging isp providing service receiver involved model allow ask reservation maintain cap number reservation site sort problem largely prevented rsvp implemented internet backbone said rsvp apparently quite successful corporate intranet used support voice trafÔ¨Åc lan data cdn alternative intserv core component intserv arguably ip multicast trafÔ¨Åc reservation true intserv implementation come widespread narrow adoption purpose network network achieve goal multicasting reservation requiring cooperation backbone routing infrastructure strategy necessarily implement actual reservation attempt provide responding trafÔ¨Åc guarantee appropriate application videoconferencing include sufÔ¨Åcient bandwidth bounded delay online gaming hand primary goal usually extremely small queuing delay lag bandwidth requirement modest multiple gaming private network optimized gaming network available gamers operate principle described imagine videoconference presenter node node b g represent video receiver cording intserv strategy create multicast tree rooted s video presentation multicast node b link multicast tree consisting red dashed link image maintain appropriate trafÔ¨Åc reservation rsvp introduction computer network release abc d e f ginternetcdn instead imagine network cdn consisting multiple publicly accessible node called point presence pop connected link virtual physical link node represented red line diagram user connects cdn using usual public internet dashed line connection probably aegis videoconferencing provider leased service cdn user using software provider attempt connect closest reasonably close access point cdn cdn aware data source subscriber forward s incoming data s data keeping idea multicast forwarded link twice forwarding likely videoconferencing application layer multicasting cdn node receive s data stream distribute cdn node cdn see Ô¨Åt word multicasting straightforward implement software trafÔ¨Åc performance depend implementation red link gold standard term support streaming red link private leased line router cdn control case load queuing delay regulated necessary true reservation internal cdn granted necessary gaming private network require private link delay commodity internet difÔ¨Åcult minimize google internal network known sort architecture carry huge volume trafÔ¨Åc end red link simply path public internet making cdn overlay network vaguely resembling original mbone case cdn s trafÔ¨Åc compete trafÔ¨Åc isn t necessarily bad red link probably internet backbone link high capacity importantly cdn large customer isps connect likely close business relationship congestion business problem cdn want attract videoconferencing provider client strong position negotiate appropriate service guarantee partial isolation trafÔ¨Åc Ô¨Çows quality servicean introduction computer network release netÔ¨Çix open connect netÔ¨Çix cdn used deliver streamed video consists largely open connect appliance oca containing upwards tb colored netÔ¨Çix red distributed widely isps ixps oca get daily update multiple tb delivered public internet private link netÔ¨Çix need content time link implemented data Ô¨Çow multicast scenario follows source cdn node using internet cdn s internal link necessary cdn node subscriber b g using subscriber s internet link teleconferencing gaming service use sort architecture subscriber charged privilege using network solving multicast reservation pricing issue principle seldom practice subscriber told network busy congestion level high ing reservation admission issue likely provider handle period allowing performance degrade attempting provision network adequate time cdn small dozen point presence dashed link user cdn end handling trafÔ¨Åc carriage dashed link source congestion small cdn produce large performance beneÔ¨Åt furthermore cdn reasonably large dashed link shrink distance red link handle trafÔ¨Åc differentiated service differentiated service diffserv created alternative intserv rfc overall introduction idea diffserv replace intserv s reservation small handful service class single regular class s bulk trafÔ¨Åc premium class intserv s reserved trafÔ¨Åc reason diffserv described providing resource allocation versus rsvp s allocation like intserv diffserv easiest implement single isp autonomous diffserv reasonably practical implement isp boundary set router agreeing common diffserv policy called d domain d domain consist single isp comprise larger backbone isp regional customer isps negotiated single diffserv policy packet marked premium service border router d domain trafÔ¨Åc question enters domain d domain s interior router marking trafÔ¨Åc policing interior router priority queuing generally used premium service marked packet simple example diffserv approach suppose isp thousand customer ith customer negotiates bandwidth r ifor premium portion trafÔ¨Åc isp ensures sum ri s maximum designated rate isp enforces premium rate cap r iat point differentiated service introduction computer network release customer s connection mark customer s premium trafÔ¨Åc isp guarantee customer individual premium rate simply ensuring bandwidth r available network handling marked premium packet priority basis internal service class needed premium despite thousand different individual bandwidth guarantee packet marked using bit d Ô¨Åeld header header originally ip bit diffserv trafÔ¨Åc class known hop behavior phbs come identiÔ¨Åcation trafÔ¨Åc class router handle packet class simplest phb default phb meaning packet get special processing phbs provide degree preferred service class selector phb backwards compatibility precedence subÔ¨Åeld old Ô¨Åeld originally proposed priority Ô¨Åeld theexpedited forwarding ef phb expedited forwarding arguably best service meant trafÔ¨Åc delay constraint addition rate constraint newer voice admit phb closely related recommended preferred phb voice telephony look closely phb assured forwarding af assured forwarding really separate phbs corresponding class meant providing soft service guarantee contingent sender s staying certain rate speciÔ¨Åcation af class rate speciÔ¨Åcation rate speciÔ¨Åcations entirely discretion implementing d domain af us Ô¨Årst bit denote af class second bit denote drop precedence assured forwarding pattern phbs af bit denoted ddd default phb delivery ddd af class lowest priority ddd af class ddd af class ddd af class best expedited forwarding v oice admit network control trafÔ¨Åc rfc xxx class selector traditional goal premium phbs ef af d domain set rule admitting premium packet hope total number given destination small service target met exactly guarantee signiÔ¨Åcant degree depends statistic actual speciÔ¨Åcations written behavior phb appropriate admission control behavior translate desired behavior possible internet arrangement leaf domain isp support rsvp hand trafÔ¨Åc carrier run diffserv instead trafÔ¨Åc rsvp reservation marked entry second carrier appropriate d class quality servicean introduction computer network release expedited forwarding goal ef phb provide low queuing delay marked packet canonical example v oip trafÔ¨Åc phb ef generally considered best d service depends ef trafÔ¨Åc accepted d domain router d domain supporting ef conÔ¨Ågured committed rate r ef trafÔ¨Åc different router different committed rate router rfc spell rule way note rule doe express hopbehavior intuitively deÔ¨Ånition ef simple rate ef trafÔ¨Åc served given output interface conÔ¨Ågured rate r suitably deÔ¨Åned interval independent offered load trafÔ¨Åc interface ef trafÔ¨Åc word output interface appear offer bandwidth r peting trafÔ¨Åc general mean network appear lightly loaded appearance depends strict control entering ef trafÔ¨Åc normally r physical bandwidth router s interface rfc go specify apparent service work roughly ef packet length l sent interval ef packet arrives ef trafÔ¨Åc waiting held queue sent soon physical transmission ended time elapsed total r l physical bandwidth delay sending packet held trafÔ¨Åc note doe notmean ef trafÔ¨Åc given strict priority trafÔ¨Åc tation processing priority queuing reasonable strategy sending interface provide service ef queue interval ef rate r effect time scale queuing ef packet sending lot time allowed fair queuing used instead priority queuing quantum fair queuing used quantum small ef router s committed rate r mean simply router promised reserve bandwidth r ef trafÔ¨Åc ef trafÔ¨Åc arrives router faster rate r queue ef packet build router position use additional bandwidth avoid degree queuing delay ef trafÔ¨Åc mean s application fails badly router held account long total ef trafÔ¨Åc arriving given router limited router ef rate r router able offer good service arriving ef trafÔ¨Åc meet speciÔ¨Åcation tb r b maximum number ef packet queue b maximum time ef packet held far looking individual router d domain control ef trafÔ¨Åc border doe arrange thing router receives ef trafÔ¨Åc committed rate conservative approach limit total ef trafÔ¨Åc entering d domain common committed rate likely mean individual router ef trafÔ¨Åc load close statistical approach suppose d domain border router trafÔ¨Åc enter exit diagram differentiated service introduction computer network release d domain boundary suppose addition domain know experience exiting ef trafÔ¨Åc generally divide equally border router bottleneck allow entry rate r router meaning total entering ef trafÔ¨Åc volume course occasion ef trafÔ¨Åc entering happened addressed exit ef rate hopefully happen individual isp wanted provide v oip service mark v oip packet ef service entered let customer mark subject isp s policing rate marked packet subject ceiling negotiated customer certain number voice line marked v oip packet receive ef service routed isp call terminating isp switching traditional telephone network interface isp necessary call likely customer isps address original isp negotiate isp neighbor continued preferential service service d service class egaf packet likely need marked left original isp entered original isp larger isp particular relationship larger isp feel internal network need support preferential service agree carry original isp s ef marking use isp road assured forwarding af documented rfc simpler ef little way delay guarantee scopic goal grant speciÔ¨Åc rate assurance certain trafÔ¨Åc class egthe trafÔ¨Åc certain set customer distinct trafÔ¨Åc class represented distinct af class limited contributor trafÔ¨Åc class sends trafÔ¨Åc particular contributor permitted excess trafÔ¨Åc simply marked higher drop precedence network trafÔ¨Åc dropped value second bit af class follows drop medium high quality servicean introduction computer network release different level used different af class ensure trafÔ¨Åc need ah class met ah class line ah class lowest ah priority just bulk default trafÔ¨Åc provided careful limit placed trafÔ¨Åc admitted class strict priority queuing need lead starvation bulk trafÔ¨Åc use priority queuing mandatory option fair queuing ah class greater fraction total bandwidth relative trafÔ¨Åc volume trafÔ¨Åc different value single af class notassigned different subqueues priority fair doing certainly lead signiÔ¨Åcant reordering overall trafÔ¨Åc reordering tends bad tcp trafÔ¨Åc different level used example packet delayed queue emptied form queuing using multiple queue different output interface likely lead reordering long tcp connection remains single af class egbecause trafÔ¨Åc given site remains single af class packet connection reordered classic application af isp able grant different performance level different tomers gold silver bronze appendix rfc customer pay isp carry trafÔ¨Åc higher category af level customer negotiate isp average rate committed excess burst bucket capacity customer s trafÔ¨Åc entered network encounter Ô¨Ålters rate equal rate different bucket size tb r b committed tb r b excess trafÔ¨Åc compliant Ô¨Årst speciÔ¨Åcation marked drop trafÔ¨Åc noncompliant Ô¨Årst pliant second marked medium trafÔ¨Åc noncompliant speciÔ¨Åcation marked drop precedence high use b excess corresponds sum committed burst size excess burst size appendix rfc customer free send faster rate subject excess trafÔ¨Åc marked lower drop precedence process mean isp different gold customer widely varying rate agreement lumped class individual customer rate sum rate tenuous relationship actual internal capacity isp isp s oversubscribe af level isp keep af class trafÔ¨Åc sparse outperform ef trafÔ¨Åc term delay ef phb rule explicitly address delay issue af rule red differentiated service assured forwarding af Ô¨Åts nicely rio router red middle red rio router value middle subject different drop threshold packet higher value experience red signaling loss correspondingly lower degree red queue utilization mean tcp connection signiÔ¨Åcant fraction value encounter induced loss sooner reduce congestion window sooner connection stayed committed rate af class sent single priority tcp connection single af class experience problem egreordering red signaling loss effect gently encouraging customer stay committed trafÔ¨Åc limit red introduction computer network release rio likely meaningful effect tcp connection udp trafÔ¨Åc affected slightly red loss nsis practical problem rsvp need router participate approach gaining isp eration version rsvp speculative differentiated service supposed just widely adopted commercial internet backbone said work underway quite time replacement protocol suite candidate step signaling nsis documented rfc andrfc nsis break rsvp design separate layer signal transport layer charged Ô¨Åguring reach intermediate router higher signaling application layer charged requesting actual reservation advantage approach nsis adapted kind signaling nsis signaling expected related speciÔ¨Åc network Ô¨Çow example nsis used tell nat router open access given inside port order allow v oip connection proceed generally speaking nsis abandon approach rsvp signaling trafÔ¨Åc travel nsis element ne ne path case signaling trafÔ¨Åc follows path data case signaling packet likely addressed ultimate destination recognized ne router path ne router add packet update internal state nonparticipating router simply forward signaling packet like ip packet ultimate destination comcast large isp comcast introduced scheme reduce internal congestion eventually documented rfc effect scheme reduce bandwidth subscriber using largest bandwidth reduction isp s local network experiencing signiÔ¨Åcant congestion goal avoid saturation backbone improving fairness user throttling bulk trafÔ¨Åc network maximum capacity reached strategy potential improve performance protocol mechanism operation user trafÔ¨Åc tagged comcast s network priority best fort pbe akin medium drop precedence particular diffserv assured forwarding class assured forwarding rfc doe claim diffserv actually used gestion occurs trafÔ¨Åc user tagged instead best effort meaning lower priority higher drop precedence mechanism Ô¨Årst deÔ¨Ånes state port router certain level comcast s network router known cable modem termination system cmts s cmts node serf subscriber state declared port utilization exceeding quality servicean introduction computer network release speciÔ¨Åc percentage maximum speciÔ¨Åc time typically utilization threshold time interval minute cmts port typically serf customer previous experience established cmts port likely locus congestion particular cmts port enters state port s trafÔ¨Åc monitored subscriber basis subscriber extended high consumption state ehcs triggered subscriber exceeds given percentage subscriber rate given number ute threshold entering ehcs state typically subscriber rate upstream rate downstream rate minute switch port state andthe subscriber s trafÔ¨Åc ehcs scriber s trafÔ¨Åc marked best effort pbe corresponding higher af drop precedence downstream trafÔ¨Åc marked cmts higher network user s stream utilization high upstream trafÔ¨Åc marked user s connection network upstream utilization high router drop trafÔ¨Åc preferentially versus trafÔ¨Åc occur router actively experiencing congestion using mechanism like rio red rio originally intended tcp trafÔ¨Åc subscriber leaf ehcs state subscriber s bandwidth drop subscription rate minute presumably rate measured short timescale note mean user tcp sawtooth ranging maximum remain ehcs state indeÔ¨Ånitely note allthe subscriber s trafÔ¨Åc marked trafÔ¨Åc just overage intent provide mild disincentive sustained utilization subscriber maximum rate token bucket speciÔ¨Åcations used possibly small timescales deÔ¨Åne utilization alternative create speciÔ¨Åcation customer tb r b r fraction subscription rate b bucket modest size compliant trafÔ¨Åc marked pbe noncompliant trafÔ¨Åc marked mechanism behave quite differently trafÔ¨Åc actually ceiling marked transport protocol rtp rtp convenient framework carrying trafÔ¨Åc run udp largely avoid blocking user datagram protocol udp offer advantage raw udp doe involve interaction intervening router offer service guarantee rtp header include sequence number timestamp representing attached data recorded basic mechanism handling trafÔ¨Åc merger original source contributing source related content rtp includes support multicast transmission egfor voice video stream make teleconference teleconferencing arguably application rtp developed widely used application v oip striking feature rtp absence frequent acknowledgment provision receiver response sent interval frequently omitted entirely response use companion rtcp protocol receiver report format transport protocol rtp introduction computer network release rtcp packet thought acknowledgment source statistic rtp Ô¨Çow delivered particular rtcp packet contain ratio sender packet arrived previous rtcp report highest sequence number received measure degree jitter multicast infrequent acknowledgment make sense receiver multicast group sent acknowledgment totaling bandwidth tcp ratio receiver group large teleconference total acknowledgment trafÔ¨Åc arriving sender triple content trafÔ¨Åc fact mechanism place limit total rtcp bandwidth outbound content stream multicast stream thousand receiver receiver respond relatively infrequently egat interval second minute transmission setting rtp send acknowledgment v oip system conÔ¨Ågured send rtcp response default areenabled rate typical minimum rtcp response second second v oip sender transmit packet explanation voice encountering signiÔ¨Åcant congestion participant expected hang line open voice call symmetric rtp used rfc mean party us port sending receiving convenience handle nat router separate direction completely independent notserve acknowledgment case bidirectional tcp trafÔ¨Åc block direction v oip rtp stream continues indeÔ¨Ånitely transmitting voice direction block removed blocked voice Ô¨Çow simply resume rtp mixer mixer network node rtp source stream perform combination following operation consolidation multiple stream translation different audio video format format example consolidation video panelist consolidated single video frame current speaker larger window audio level mixer combine stream individual microphone party location kind consolidation performed primary sender mixer useful conference participant geographically dispersed translation participant prefer receive different format important task mixer unicast connection congestion experienced sender adapt switching encoding appropriate multicast receiver experiencing congestion unlikely receiver doing just Ô¨Åne multicast receiver having trouble receiving high data rate Ô¨Ånd mixer offer encoding switch mixer instead mixer offering range rate set near sender logically near geographically distributed nearer cluster likely receiver host provide mixer offering range bandwidth option quality servicean introduction computer network release thing mixer notdo mix audio video separate audio video stream carried separate rtp session rtp packet carry timestamps allow receiver synchronize audio video playback mixing necessary importantly mixing audio video make difÔ¨Åcult different format difÔ¨Åcult receiver subscribe audio difÔ¨Åcult rtcp report indicate original stream encountering loss individual sending point rtp complete timing information called synchronization source ssrc point origin camera microphone ssrc ssrcs identiÔ¨Åed identiÔ¨Åer actual ssrc identiÔ¨Åers chosen pseudorandomly provision protocol making sure different source choose ssrc identiÔ¨Åer practical purpose ssrc thought host identiÔ¨Åer like ip address mixer combine multiple ssrcs stream mixer take input single ssrc mixer new synchronization source creates new ssrc identiÔ¨Åer output packet mixer generates new series synchronization timestamps ssrc identiÔ¨Åers stream mixer used input attached rtp packet mixer known contributing source csrc rtp packet format basic rtp header following format rfc px cc m payload type sequence number timestamp synchronization source ssrc identifier contributing source csrc identifier theverÔ¨Åeld hold version currently pbit indicates rtp packet includes padding byte end Ô¨Ånal padding byte contains exact count thex bit set extension header follows basic header consider thecc Ô¨Åeld contains number contributing source csrc identiÔ¨Åers total header size word bit set allow marking example Ô¨Årst packet new video frame course actual video encoding contain information thepayload type Ô¨Åeld allows precisely originally allowed speciÔ¨Åcation encoding mechanism described rfc course sible encoding typically speciÔ¨Åed mechanism egusing extension header separate session description protocol rfc rtp stream s ment rfc way early stage rtp development necessary use statically assigned payload type mechanism speciÔ¨Åed bind encoding payload transport protocol rtp introduction computer network release type mechanism deÔ¨Åning dynamic payload type binding speciÔ¨Åed session description protocol sdp protocol Ô¨Åeld allows detection lost packet correct reassembly reordered packet typically packet lost receiver expected manage mechanism rtp thetimestamp synchronizing playback timestamp sufÔ¨Åciently support smooth playback measurement jitter degree variation packet arrival encoding mechanism chooses timestamp granularity voice ings example timestamp clock increment canonical sampling rate time second corresponding channel multiplexing suggests timestamp clock rate time second video encoding v oip application use rtp send m voice packet meaning timestamp mented packet actual data needed send m voice vary byte byte depending encoding used timestamp clock increment rate ssrc identiÔ¨Åer identiÔ¨Åes primary data source synchronization source stream case identiÔ¨Åer originating identiÔ¨Åer mixer repackaged stream stream processed mixer ssrc Ô¨Åeld identiÔ¨Åes mixer ssrc identiÔ¨Åers original source listed csrc contributing source section header mixer involved csrc section rtp control protocol rtp control protocol rtcp provides mechanism exchange variety extra information rtp participant rtcp packet sender report sr packet receiver report rr packet interested rtcp receiver report form acknowledgment rtp transmission unlike form acknowledgment considered thing generally question retransmitting lost data rtcp rr packet thought statistical summary regarding delivery acknowledgment se case effect simply relay sender information multicast working today rtcp packet contain list ssrcs ssrc message includes fraction rtp packet lost recent interval cumulative number packet lost session began highest sequence number received measure interarrival jitter rr packet information recent rtcp sr packet jitter measured mean deviation actual arrival time versus theoretical arrival time sured unit rtp timestamp clock actual formula follows packet p quality servicean introduction computer network release record actual time arrival rtp timestamp unit r iand save rtp timestamp included packet s Ô¨Årst calculate ith deviation follows dev r s evenly spaced packet deviation zero v oip packet s likely exactly r actual arrival interval eighth millisecond calculate cumulative jitter follows multicast setting rtp receiver experiencing excessive loss practical option ably Ô¨Ånd mixer offering encoding likely provide congestion service rtcp packet needed unicast setting rtp sender theoretically use information provided rtcp rrs adapt transmission rate downwards better make use available bandwidth sender use tfrc tfrc calculate sending rate internet draft rfc tfrc allows gradual adjustment rate accommodate new condition course tfrc used adjust sending rate sending rate fact adaptive application level course requires encoding rfc speciÔ¨Åes mechanism make sure rtcp packet consume total rtp bandwidth rtcp rr packet account achieved receiver learning rtcp sr packet receiver total rtp bandwidth related information rtp receiver calculate acceptable rtcp reporting interval interval easily hundred second mixer allowed consolidate rtcp information direct subscriber forward originating source rtp voip v data carried rtp v oip call initially set using session initiation protocol sip rfc setup protocol process sip node organizing exchange ip address port number actual endpoint endpoint informed address port endpoint endpoint immediately begin sending rtp packet endpoint nat Ô¨Årewall associated sip server continue forwarding packet v oip call typically send voice data packet containing audio input standard encoding used byte needed millisecond voice packet data encoding includes encoders variation idea having sample proportional logarithm actual sound intensity voice encoders provide greater degree compression example voice encoding used v oip packet carry m voice byte data packet typically byte header byte ethernet header byte ip header byte udp header transport protocol rtp introduction computer network release byte rtp header despite payload efÔ¨Åciency generally considered acceptable ideal v oip connection make use data rtcp packet uncommon fact rtcp packet sent general presumption voice quality adequate user involved simply hang common voice encoders matter encountering congestion said rtcp packet provide useful information regarding jitter experienced furthermore mentioned trafÔ¨Åc voice codecs opus speex support label switching mpls currently mpls way tagging certain class trafÔ¨Åc routing altogether differently class trafÔ¨Åc allowed routing based tagged qos level feature seldom used common assumption integrated differentiated service priority trafÔ¨Åc essentially took route mpls allows priority trafÔ¨Åc entirely different route mpls started way routing ip trafÔ¨Åc later way avoid lookup ip address router evolved way support following creation explicit route ip trafÔ¨Åc bulk designated class virtual private network vpns interested mpls Ô¨Årst provides alternative way isps handle trafÔ¨Åc explicit route deÔ¨Åned using virtual circuit virtual circuit effect tag added packet entrance routing domain allowing packet routed predetermined path virtual circuit path need follow route normal ip routing use note routing protocol ospf allow different route different class service note trafÔ¨Åc use internal router bulk trafÔ¨Åc priority fair queuing needed router make sure mpls trafÔ¨Åc get desired level service use mpls make classiÔ¨Åcation problem easier internal router need look tag determine priority class inspection avoided mpls allow option Ô¨Çow travel special path set router notalso service trafÔ¨Åc generally mpls used routing domain administrative scope isp trafÔ¨Åc enters leaf looking like ordinary ip trafÔ¨Åc use mpls internally completely invisible local scope mpls meant seen relatively widespread adoption compared rsvp ip multicast coordination isps necessary implement mpls start set participating router called router lsrs lsrs comprise entire isp just subset edge router partition classify trafÔ¨Åc large Ô¨Çow class distinct Ô¨Çow example correspond v oip trafÔ¨Åc called quality servicean introduction computer network release forwarding equivalence class fec different fecs different target bulk trafÔ¨Åc receiving special mpls treatment considered fec virtual circuit created fec mpls header prepended ip packet using vci label value related fec mpls label Ô¨Åeld Ô¨Årst bit vci bit carry supplemental connection information example atm identiÔ¨Åers identiÔ¨Åers asynchronous transfer mode atm likely trafÔ¨Åc majority doe fec trafÔ¨Åc delivered normal mechanism router add forwarding table mpls table consists xlabel interface label interface outyquadruples just routing packet arriving interface interface inwith label label inis forwarded interface interface outafter label altered label router build mpls table incrementally trafÔ¨Åc follow path trafÔ¨Åc example downstream router connect customer assign customer label respectively tell upstream neighbor arriving trafÔ¨Åc customer labeled corresponding label ingres router mpls domain consisting push upstream egto selecting label asking label trafÔ¨Åc label rewrite vcis respectively forwarding usual routing able continue label using inbound trafÔ¨Åc point mpls forwarding table like following interface inlabel ininterface label advantage mpls label live Ô¨Çat address space easy simple look egwith big array entry label mpls adapted multicast case label interface tions single input packet mpls label second label pushed packet enters designated subdomain original routing domain mpls used domain ingres router attach initial label egress router strip label information base lib maintained node hold necessary label switching mpls introduction computer network release information egqueue priority lib indexed label involves simpler lookup examination ip header mpls natural Ô¨Åt differentiated service differentiated service ingres router assign d class attach mpls label interior router need examine mpls label priority trafÔ¨Åc routed different path bulk trafÔ¨Åc mpls allows isp create multiple mutually isolated vpns needed ensure isolation virtual circuit crossing vpn isp customer b virtual circuit created connecting pair s site pair b s site b probably gateway internet b communicate gateway mpls interacts somewhat oddly traceroute traceroute time exceeded packet s ttl reach mpls router router usually generate appropriate icmp time exceeded message attach mpls label original packet result icmp message continue downstream egress router sent original sender result unusually large report traceroute initiator appear internal router mpls domain distance initiator egress router epilog guarantee class trafÔ¨Åc area active research internet year come mainstream tool protocol requiring global isp coordination rsvp ip multicast come slowly protocol differentiated service mpls effective rolled single isp year unreasonable ask integrated network fact correct approach school thought say application v oip just beginning come mainstream integrated network sure follow video streaming niche intended trafÔ¨Åc intserv just ahead time perspective marketplace plenty opportunity make mind answered resounding time having separate network bulk trafÔ¨Åc voice unreasonable inefÔ¨Åcient internet evolve network alltrafÔ¨Åc handled mechanism time usual tell quickly exercise suppose proposes tcp multicast router collect acks returning group member reached consolidates single ack mean like multicast trafÔ¨Åc ack duplicated single link problem foresee proposal hint send retransmissions long packet need buffered potential retransmission quality servicean introduction computer network release following network suppose trafÔ¨Åc rp routed Ô¨Årst right trafÔ¨Åc rp routed Ô¨Årst left multicast tree group g rp rsvp router see path packet subsequent resv packet expedited forwarding example ef router committed rate r packet length r l physical bandwidth delay sending packet held trafÔ¨Åc large packet router send ef packet answer involve suppose diagram expedited forwarding ef used voice telephony point call entering directed problem perceived user b isp respond reduce problem note isp control call exercise introduction computer network release quality network management snmp network management broadly construed consists administrative action taken network running efÔ¨Åciently include number consideration egstafÔ¨Ång help desk negotiating contract vendor restrict attention exclusively technical aspect network management iso international telecommunication union deÔ¨Åned formal model cation network management original model deÔ¨Åned Ô¨Åve area concern known fcaps Ô¨Årst letter area fault conÔ¨Åguration accounting performance security organization little network accounting fcaps replaced administration reason vague category network security arguably subject entirely identify important subcategories fault management monitoring switch router server network hardware make sure running properly management monitoring network s application layer ware service include login authentication email web server business application Ô¨Åle server management monitoring link ensure working conÔ¨Åguration network architecture overall design including topology switching v routing subnet layout management arranging consistent conÔ¨Åguration large number network device management doe site roll new change new ip address software update patch performance management using technique queuing scheduling allocate bandwidth share bucket size varying internal external client customer management making sure service target egbandwidth met depending focus placed fault category introduction computer network release aspect important technical network management narrowly construed devolves emphasis fault management companion reliability management making sure go wrong doe Ô¨Åxing promptly fault management network provider achieve elusive availability goal uptime snmp versus management snmp important toolfor network management isjust tool network management process making decision achieve goal outlined subject resource constraint snmp simply provides input decision far common protocol primary focus chapter simple network management protocol orsnmp snmp basic protocol allows device report information current operational state example switch router report conÔ¨Åguration interface total number byte packet sent interface chapter basic snmp particular snmp version following chapter version version reasonable security Ô¨Ånally implemented implicit strategy initial device discovery process monitor learns new device ping protocol internet control message protocol common option example possible probe sequential address udp port used snmp usually case router conÔ¨Åguration algorithm manual entry simply realistic alternative snmp application layer snmp studied entirely perspective make excellent case study application layer like essentially application snmp deÔ¨Ånes rule client server role format request response snmp contains authentication mechanism community security generally unrelated login authentication practical necessity network modest size automate job checking thing working properly waiting complaint option monitoring known network management ornms wide range proprietary nm s available basic nm consists library script discover new network device poll device possibly necessarily using snmp regular interval generally data received recorded analyzed alarm sounded failure detected snmp Ô¨Årst established common belief soon replaced osi s common management interface protocol cmip deÔ¨Åned international telecommunication union s protocol companion protocol cmip us syntax snmp richer operation set remains network management protocol choice osi network time believed destined adoption world vendor supported cmip widely network management support snmp snmp support essentially universal network management snmpan introduction computer network release need site bother cmip cmip unlike snmp supported tcp using cmip tcp cmot protocol advantage using tcp elimination uncertainty request reply received cmip doe exist used niche monitoring application overcoming lack hardware support make widespread adoption difÔ¨Åcult network architecture turning snmp depth offer reference part book relating network architecture lan internetwork layer local site main issue redundancy bandwidth cost cabling building particular need provide redundancy ning tree algorithm redundancy virtual lan vlan consideration ethernet level subnets versus switching site determine sort connection internet isp contract vary greatly term bandwidth burst bandwidth response event outage aspect speciÔ¨Åcation appear token bucket rate limiting assured forwarding organization geographically dispersed internal network isps larger corporation decide internal site connected communicate public internet vpn used virtual private network private line sonet sonet carrier ethernet carrier ethernet leased site private line used link monitoring essential increasingly important architectural decision application layer extent network software service outsourced cloud run remote server managed party snmp basic snmp far away popular protocol supporting network device monitoring basic level snmp allows polling individual designated device attribute number packet received interface attribute organized record set table table indexed contiguously like array eginterface interface interface sparsely eginterface interface simplest router switch quite limited provision snmp virtually networking hardware provides extensive support standard set basic device attribute proprietary attribute device signiÔ¨Åcant snmp support referred managed device snmp node reply request information known snmp agent network node doing snmp querying known manager nm simply standalone tool known snmp browser mib browser mib stand management mation base mib browser understood graphical user interface tool make snmp query snmpget andsnmpwalk command network architecture introduction computer network release project invoked scripting language build simple rudimentary nm snmp run exclusively udp choice udp avoid connection overhead envisioned simple protocol manager poll device minute packet udp easily packet tcp necessary packet especially signiÔ¨Åcant network congested near point failure use udp doe raise problem lost packet having data Ô¨Åt packet simplest case data request manager handle packet loss polling device response received response request big usual strategy use fragmentation fragmentation fragment header ideal snmp data stay local organizational network workable consequence use udp snmp device need ip address device acting ip layer issue ethernet switch hub need ip address basic function device like switch hub use snmp provided suitable ip interface address security ip address snmp management placed private hidden subnet snmp support writing attribute device implementing nism writing device security implication reading mechanism used care snmp security important issue community security writing agent conÔ¨Ågure network behavior device egto bring interface set ip address speciÔ¨Åcally conÔ¨Ågure snmp behavior agent finally snmp support asynchronous notiÔ¨Åcation trap mechanism device conÔ¨Ågured report error immediately wait asked trap quite important site largely ignore crucial problem udp underlying transport mechanism delivery guarantee trap message snmp used server monitoring device monitoring alternatively simple script initiate connection service discern readiness thing verify email server listening tcp port responds correct rfc originally rfc ehlo message verify message accepted actually delivered snmp version snmp ofÔ¨Åcial version Ô¨Årst appearance collection rfcs starting rfc updated rfc current deÔ¨Ånition core attribute reporting released rfc return introduced rfc loosely speaking expanded basic information starting rfc currently rfc introduced improved technique managing table included proposed security mechanism largely rejected marketplace ultimately version used community security mechanism network management snmpan introduction computer network release community security introduced rfc community version known Ô¨Ånally delivered model reasonably effective security security model orusm Ô¨Årst proposed rfc Ô¨Ånal version rfc snmp naming oids central snmp protocol device attribute consistent manner naming scheme chosen object identiÔ¨Åer oroid hierarchy starting international standard organization iso standardization sector national telecommunication union known ccitt developed object identiÔ¨Åer scheme naming world needed naming name oids consist string tegers textual representation component integer written separated period notation used scheme standardized oids used snmp begin preÔ¨Åx example sysname attribute corresponds oid preÔ¨Åx known preÔ¨Åx issystem occasionally abuse notation act name referred single additional level preÔ¨Åxes egthe name basic snmp read operation sent getrequest protocol message take oid parameter agent receiving request authentication check oid corresponds valid attribute return pair consisting oid attribute value return snmp operation multiple attribute value requested single operation oids form tree hierarchy immediate child node say length node length root node understanding anonymous oids rendered leading emphasize alternatively number thought label arc tree node intrinsic way distinguish internal oid node preÔ¨Åxes leaf oid node correspond actual named object context essential common numeric label speciÔ¨Åc level string equivalent node immediately root standard string equivalent iso string equivalent thought external data oids encoded numeric value included oid naming adopted context iso use oids identify ofÔ¨Åcial standard document standard us oid naming encryption certiÔ¨Åcates seerfc directory standard us oids related rfc deÔ¨Ånes oid class preÔ¨Åxed example health level seven name healthcare information beginning oid preÔ¨Åx snmp naming oids introduction computer network release mentioned snmp us oids beginning oid tree level correspond iso org organization dod department defense original sponsor internet internet apparently sublevel dod portion oid tree showing assignment iso subtree highlighting preÔ¨Åx entry available try tree display button iso standard nist dod european computer manufacturer association oiw ose implementers workshop edifactboard ewos european workshop open system osf open software foundation nordunet nato icao international civil aviation organization amazon author idea amazon currently us snmp preÔ¨Åx spelled rfc syntax internet object identifier iso org dod mean string internet type object identifier actual value list right use iso represents oid preÔ¨Åx conceptually different just level iso formal syntax deÔ¨Åned standard expand syntax snmp presentation informal detail http rfc deÔ¨Ånes oid preÔ¨Åxes management information mgmt use private mgmt object identifier internet private object identifier internet network management snmpan introduction computer network release internet represents newly deÔ¨Åned preÔ¨Åx snmp oids begin themgmt preÔ¨Åx private preÔ¨Åx oids representing information example preÔ¨Åx delegated cisco system rfc state mgmt private preÔ¨Åxes delegated iab iana responsibility assigning name begin given oid preÔ¨Åx easily delegated internet activity board example charge according rfc delegation department defense iab ofÔ¨Åcially iab just began using mib mib management information base set deÔ¨Ånitions associate oids speciÔ¨Åc tribute way associate numeric level oids symbolic example set deÔ¨Ånitions core rfc mib known andsystem preÔ¨Åxes Ô¨Årst deÔ¨Åned object identifier mgmt object identifier respectively deÔ¨Ånitions represent actual attribute retrieved follows sysdescr sysobjectid sysuptime syscontact sysname syslocation sysservices attribute represent string value need administratively deÔ¨Åned return mib notthe actual attribute set xoid valueypairs stored snmp manager result single set query result sequence query time known management database mdb term universal colloquially mib abstract set oid deÔ¨Ånitions particular ascii Ô¨Åle deÔ¨Ånes set run mib compiler used software user mib browser generally Ô¨Ånd information useful appropriate mib Ô¨Åle loaded making snmp query rfcs read directly mib compiler know edit discussion package contains snmp agent linux macintosh computer microsoft software tool making snmp query tool available window sysname value example retrieved snmpget command snmpget public localhost mib introduction computer network release oid corresponds Ô¨Ånal represents snmp convention indicates scalar value table mib browsing example mib serve documentation data documentation tell implementer given snmp agent information returned oid request data serve translate numeric oids data example snmpget command understands appropriate mib egbecause mib Ô¨Åle right place type snmpget public localhost uncommon installation involve different possibly overlapping mib deÔ¨Åning different portion oid tree particularly true private subtree separate mib Ô¨Åle manufacturer device data type snmp us oids index retrieval attribute attribute following type rfc datatype description integer integer octet string text string network address counter integer increase wrap gauge integer rise fall wrap timeticks integer used measure time second object identifier oid appearing data ipaddress address octet string Ô¨Åxed length networkaddress ipaddress theory allowing kind address later opaque data ultimately octet string type sysname attribute example octet string snmp data value returned agent tagged type receiver determine type actually transmitted decode data doe applicable mib installed snmp encoding detail integer type used represent enumerated type value zero used example status type testing syntax snmp seen deÔ¨Ånition object identifier snmp naming oids attribute corresponding single oid scalar type egone snmp us composite type deÔ¨Ånitions network management snmpan introduction computer network release sequence deÔ¨Ånes record type sequence type deÔ¨Ånes homogeneous list array table object type type case type represents sequence type list list record table database sense note importance keyword distinguish record list macro heavily used mib deÔ¨Ånitions format syntax type access status mandatory oroptional orobsolete description descriptive string index oid used table indexing oid assigned objname theobjname called object descriptor intended globally unique value forsyntax valid syntax speciÔ¨Åcation example ues foraccess andstatus case literal string shown value description optional object deÔ¨Åned represent table structure case object id line represent internal node oid tree leaf node access table actually inaccessible attribute retrieved collectively concrete simple example example appear following section oid value ifentry ifinoctets syntax counter access status mandatory description total number octet received interface including framing ifentry data type deÔ¨Ånitions syntax used collectively known structure management information smi smi effect deÔ¨Ånes type structure needed various mib smi deÔ¨Åned rfc syntax snmp introduction computer network release snmp table seen mib snmp organizes oid name group consists scalar value agent attribute assigned permanent oid oid thesysname attribute oids scalar attribute include Ô¨Ånal agent data come form table list record snmp referred conceptual table snmp agent offering table responsible storage physical organization sense snmp table resemble database view table accessed linear search primary key lookup key single attribute set attribute known index snmp doe support secondary key table principle possible agent present data table different index related example trick appears matrix snmp table small agent keep record main memory style concern organization indexing issue database snmp table index act constraint disallowing distinct row identical index value snmp table mirror real table egthe ip forwarding table problem occur snmp index small attribute snmp table able accurately represent original table mib example world database key attribute fail capture important constraint efÔ¨Åcient concern snmp exception table support row creation special case snmp table index include attribute database perspective likely omitted key mib example look example table goal right present tabular structure mapped underlying structure return syntactic deÔ¨Ånition table table deÔ¨Ånitions interface group semantics table modest improvement table deÔ¨Åned Ô¨Årst example snmp interface table iftable network interface egloopback ethernet ethernet wireless collection attribute including device mtu bitrate physical address number byte packet received sent index shall later abstractly assigned interface number known ifindex sample data notshowing column actual table includes showing oids header index column ifindex italic value single integer interface higher number packet byte octet inoctets value wrapped ifindex mtu bitrate inoctets inpackets lo network management snmpan introduction computer network release route data record different source route vpn route using tunnel workstation forwarding table just entry local subnet default route snmp routing table iproutetable based ip forwarding table ip internet protocol column representing destination network variety status information column egfor routeage nexthop column index attribute sample data index column italic index ip address compound object list integer return dest mask metric type indirect direct indirect thetype column indicates destination local nonlocal host subnet middle entry involves local delivery use indirect anddirect example snmp enumerated type indexing interface table usually dense value ifindex typically consecutive number routing table hand sparse index index value likely near theiproutetable table obsolete issue cidr preÔ¨Åx length index mib history replacement tcp connection table tcpconntable list tcp connection connection state tcp state diagram obtain linux window macintosh system command netstat index case consists attribute deÔ¨Åning socketpair local address local port remote address remote port table attribute index integer representing connection state represented snmp enumerated type localaddr localport remoteaddr remoteport state established timewait established snmp adopted convention tabular data encoded oid tree Ô¨Årst step strategy deÔ¨Åne statically oid preÔ¨Åx subtree representing table section denote t later table deÔ¨Ånitions interface group thattoften represents oid level form attribute table column assigned oid appending successive integer table preÔ¨Åx starting example root preÔ¨Åx interface table known ifentry column shown fraction interface table following oids snmp table introduction computer network release oid table column ifentry interface number ifindex ifentry interface description ifentry interface mtu ifentry interface bitrate ifentry number inbound octet byte ifentry number inbound unicast packet second step establish convention converting index attribute list integer used oid sufÔ¨Åx identifying particular row index oid sufÔ¨Åx appended attribute oid preÔ¨Åx identifying column obtain oid trailing time represents table data value case interface table interface number used oid sufÔ¨Åx value forinoctets oid number assigned inoctets column theifindex value row written note numbering form transposition common convention t row col routing tcp table presented address written notation converted level oid sufÔ¨Åx note textual representation address oid sufÔ¨Åx leading added logically entirely different thing encoding obvious deceptive newer convention address encoded oid sufÔ¨Åx address address length octet string present rule encoding come rfc theipaddress type deÔ¨Åned implicit octet string size inrfc mined length ip address encoded single oid level using address single unsigned integer option chosen routing table nexthop column assigned number nexthop oid oid sufÔ¨Åx encoding used indexing ber encoding used data value snmp encoding tcp connection table ip address involved translate oid chunk routing table port number translate chunk resultant oid sufÔ¨Åx state Ô¨Årst connection table clarity level shown italic state column assigned identiÔ¨Åer appended common universal assignment begin index column diagram fragment doing table preÔ¨Åx denoted tand node labeled topmost t Ô¨Årst row network management snmpan introduction computer network release oids internal node drawn heavier blue box lower row black box leaf node ifinucastpktst diagram emphasizes arrangement column actual oid tree structure diagram leaf node column actually sibling node snmp table introduction computer network release ifmtut table index column table data unnecessary index column necessity encoded oid table entry required necessarily enforced effect omit index column table presented agent declared index note table snmp table serve purely source mation new row added snmp manager snmp table support row creation table row creation snmp operation mentioned earlier fundamental read operation protocol message known getrequest contains authentication information community string included multiple outstanding getrequest s aren t mixed thegetrequest message contain listof oids actually encoded list xoid nullypairs called avarbind list simply entail varbind list length agent receiving getrequest validates authentication successful look oid received list Ô¨Ånd corresponding value varbind list allxoid valueypairs returned value egbecause oid represented interior node oid tree instead actual value oid lay outside portion oid tree request authorized access novalues returned oid list corresponds valid value list xoid valueypairs returned later relaxed rule allow return individual request successful exact oid known case tabular data getnext operation used work like oid oidin request list agent Ô¨Ånds leaf network management snmpan introduction computer network release oid strictly following oidin lexicographical order agent includes pair valueyin response value value corresponding note getnext case previously known manager note snmp return value corresponding oid tabular data encodes index value thegetnext operation allows manager walk subtree oid tree root subtree preÔ¨Åx t Ô¨Årst getnext t return value getnext parameter oid agent return value manager continues series getnext call Ô¨Ånally subtree exhausted agent return error likely anxoidn value nyfor oid ni longer extension original preÔ¨Åx example let start preÔ¨Åx start group Ô¨Årst getnext return pair y oid Ô¨Årst leaf node interior node second getnext oid parameter getnext return y oid returned leaf node strictly following process tinue oid notpart group seen likely Ô¨Årst entry interface group oid action getnext particularly useful retrieving table interface table sented preceding section example index value consecutive integer snmp manager likely guess guessing index value table ip forwarding table tcp connection table nigh impossible index value complete oid consider version interface table diagrammed format snmp operation introduction computer network release ifinucastpktst let initially getnext t leaf node upper left black box oid getnext t return pair continue getnext return represents black box immediately Ô¨Årst call getnext return successively getnext leaf node following Ô¨Årst leaf node second column value returned lo y call getnext time supplied parameter value returned previous getnext return value making second ifdesc column table second column getnext return xoid valueypair Ô¨Årst leaf node column column getnext jump fourth column manner getnext iterates entire table column time Ô¨Ånally leaf node table shown actual iftable additional column getnext return outside table network management snmpan introduction computer network release return error event oid manager authorized receive leaf node right normal collection Ô¨Årst entry theattable table way manager receiving data tell request getnext gone past end table t thas completely traversed diagram sequence getnext operation involved traversing partial interface table show getnext table s lower right returning xoid valueypairxa avaluey t getnext oid right t avalue value diagram traversing partial interface table getnext manager utility performing kind table retrieval called walk present data order retrieved column time option format data visually snmp operation introduction computer network release look like table s snmpwalk andsnmptable mib browsing singleget request fact include list attribute retrieved provides efÔ¨Åcient way request entire row table manager general doe know index value table likely doe know column oids blue row manager speed process asking entire row time Ô¨Årst getnext getnext oids blue row oids result list pair lo y table s entire Ô¨Årst row returned assuming column getnext use oids returned getnext return table s entire second row got row getnext return assuming column shown column exist lo y xa avaluey ai leaf oid right t assuming error point manager know case entire table retrieved doe matter manager us form getnext return column relevant table subset column manager interested getbulk introduced operation getbulk return multiple row multiple column single operation table necessarily static new dynamic interface added new route tcp tions added time manager reading table using form getnext Ô¨Ånd new row retrieved alternatively Ô¨Årst deleted row retrieved getnext offer little protection set snmp allows set operation attribute writable course manager write authority arewritable setnext exact oid value supplied group sysname attribute writable oid update invoke set newsysname network management snmpan introduction computer network release likeget set invoked multiple attribute suppose table thas column row change second row ywith set change indexing way table row creation semantics set explicitly require require assignment succeed fail set operation atomic usual reason failure manager issuing set lacked write permission item rule requirement relaxed set semantics mean certain update end completed set semantics notmean assignment ent manager serialized suppose example separate manager attempt update attribute speciÔ¨Åed oids xandy update scheduled time set set possible set s performed order leaving testandincr workaround mib browsing tool individual snmp reading widely available helpful viewing going mentioned package command snmpget issue single request similar snmpgetnext issue getnext request command snmpwalk take oid representing root subtree return subtree example assumes snmp agent localhost conÔ¨Ågured use community string tengwar community security snmpwalk tengwar localhost oid iftable multiple oids permitted snmpget andsnmpgetnext forsnmpwalk appropriate mib Ô¨Åles loaded command entered snmpwalk tengwar localhost iftable mib browsing introduction computer network release entail putting Ô¨Åle special directory adding line like mib Ô¨Åle including mib command line snmpwalk tengwar localhost iftable note identiÔ¨Åer assigned mib Ô¨Åle Ô¨Årst line sarily Ô¨Åle containing mib definition begin appropriate mib Ô¨Åle loaded oids displayed symbolically numerically data presentation change string valhal mib string valhal withmib actually data type object id mib oid displayed numerically appropriate mib displayed symbolically finally manager package includes snmptable like snmpwalk data displayed table column time snmptable command appropriate mib Ô¨Åle installed come mib browser graphical interface tkmib personal edition ireasoning mib browser isfree work window mac linux supported license doe prohibit publication benchmark test consent turn mib represents core data known deÔ¨Åned rfc represented roman numeral represents second iteration deÔ¨Ånition snmpv predecessor Ô¨Årst documented rfc saw mib oid preÔ¨Åx extended look extension mib change ifxtable mib general network management make use newer version excellent place started partly obsolete original divided group current use brief arp cache address resolution protocol arp network management snmpan introduction computer network release including ip forwarding table used example information icmp internet control message protocol including tcp connection table used example information udp activity information egp protocol replaced bgp used snmp agent originally group cmot entry commented rfc doe appear theatgroup ofÔ¨Åcially deprecated information available ipgroup egp protocol entirely replaced bgp management bgp router highly specialized rfc contains bgp mib private mib universally used transmission group included anticipating day deÔ¨Ånitions managed transmission medium deÔ¨Åned day come pas agent implementation return egp transmission group group looked mib say note entry group manually conÔ¨Ågured editing conÔ¨Åguration Ô¨Åle case attribute using snmp thesysobjectid value represents oid particular s snmp agent example package installed return root private oid tree assigned project represents practice way snmp manager Ô¨Ågure vendor agent determine information query use discovered ask subtree Ô¨Ånd sort information similarly particular window xp installation microsoft network monitoring installed sysobjectid value oid level assigned microsoft private subtree group expanded object resource table sysortable mib change table deÔ¨Ånitions interface group interface group consists single integer value ifnumber representing number current network interface including interface interface table partially introduced earlier opportunity outline exactly mib table deÔ¨Ånitions enumerated type tured using introduction computer network release deÔ¨Ånitions later updated example rfc redeÔ¨Ånes group use additional feature smi return extension interface group ifxtable mib table deÔ¨Ånitions involve process oid deÔ¨Åned table second oid deÔ¨Åned table entry row table second oid usually generated Ô¨Årst appending second oid represents table preÔ¨Åx sense snmp table denoted actual slightly annotated follows iftable syntax sequence ifentry note ifentry access status mandatory description list interface entry number entry isgiven value interface ifentry note ifentry syntax ifentry note ifentry access status mandatory description interface entry containing object subnetwork layer andbelow forum particular index ifindex iftable entry represent leaf node second declaration ifentry deÔ¨Ånition rfc version represents complete list column object type case data type thephysaddress type deÔ¨Åned rfc synonym octet string deÔ¨Ånitions oid associated column come later isifentry represents actual row includes index entry specify attribute attribute make primary key row deÔ¨Åne ifentry ifentry sequence ifindex integer ifdescr displaystring iftype integer ifmtu integer ifspeed gauge ifphysaddress physaddress ifadminstatus integer ifoperstatus integer iflastchange timeticks ifinoctets counter continues page network management snmpan introduction computer network release continued previous page ifinucastpkts counter ifinnucastpkts counter ifindiscards counter ifinerrors counter ifinunknownprotos counter ifoutoctets counter ifoutucastpkts counter ifoutnucastpkts counter ifoutdiscards counter ifouterrors counter ifoutqlen gauge ifspecific object identifier attribute certain tedium snmp s lengthy attribute list replaced panic hurry problem arisen proper attribute diagnose doesn t included possible plug deÔ¨Ånition ifentry syntax speciÔ¨Åcation previous ifentry cumbersome ifentry deÔ¨Ånition doe oid wanted implement interface table using shortest possible oids created separate iftable ifentry oids mean use macro deÔ¨Åne iftable consistent especially syntax determines packet encoding snmp encoding essentially table preÔ¨Åx snmp deÔ¨Åned using additional oid level turn speciÔ¨Åc interface attribute deÔ¨Ånition Ô¨Årst ifindex deÔ¨Ånes column interface table effect talking leaf node oid sufÔ¨Åx appended represent index access longer ifindex syntax integer access status mandatory description unique value interface value range andthe value ifnumber value foreach interface remain constant reinitialization entity network management ifentry thedescription clearly indicates value ifindex used specify interface consecutive integer compliance rule early casualty various reason formally withdrawn rfc vendor simply number physical interface introduction computer network release case underlying issue consecutive numbering example author s system running return ifnumber following table value ifindex ifname lo turn virtual interface corresponding vpn tunnel virtual private network underlying tunnel regularly fails automatically time doe ifindex incremented rule interface numbered consecutively formally deprecated rfc update interface group turn make ifnumber value useful snmp table associated count attribute just Ô¨Åne snmp data value correspond straightforwardly attribute deÔ¨Åned hardware derlying operating ifindex value doe necessarily generally agent maintain state ifindex value consistent case ifindex value taken relative position interface internal table universally case ifindex value table theifindex value widely used snmp referenced table deÔ¨Ånes special type textual convention named interfaceindex smi data type mentioned earlier reason include ifindex actual column table value ofifindex calculated oid component row approach basically deÔ¨Åne ifindex described index theifdescr textual description interface usually device associated interface rfc state string include manufacturer product version hardware interface inconsistent linux convention current rule merely unique theiftype attribute Ô¨Årst example handle enumerated type value small integer hardware type associated integer spelled follows majority networking technology list pretty vanished face earth iftype syntax integer following continues page network management snmpan introduction computer network release continued previous page starlan hyperchannel fddi lapb sdlc european equiv basicisdn primaryisdn proprietary serial proppointtopointserial ppp softwareloopback eon clnp ip nsip xns ip slip generic slip ultra ultra technology sip smds access status mandatory description type interface distinguished according protocol s immediately network layer inthe protocol ifentry problem new technology unlisted address value foriftype placed control iana deÔ¨Åned ianaiftype rfc http iana add new type formally updating rfc meaning ifmtu interface mtu fragmentation ifspeed value unusable speed exceed gbps rfc deÔ¨Ånes anifhighspeed object speed measured unit mbps entry ifxtable table ifxtable clariÔ¨Åes virtual interface really bandwidth value reported zero example earlier loopback interface lowas reported bandwidth mbps theifphysaddress ethernet ethernet address interface theifadminstatus andifoperstatus attribute enumerated type testing theifadminstatus ifoperstatus disagrees likely hardware malfunction iflastchange attribute reÔ¨Çects time timeticks change ifoperstatus entry count byte packet error ifinoctets andifoutoctets count byte received sent including framing byte framing applicable problem introduction computer network release wrap fast second gbps value used generally supplemented counter deÔ¨Åned ifxtable ifxtable packet counter unicast packet packet discarded packet error inbound packet packet unknown protocol count packet separated ifxtable separate count broadcast multicast packet interface queue length available ifoutqlen take considerable trafÔ¨Åc make rfc say timescale averaging queue length member classic interface group ifspecific type objectid return oid queried additional information interface formally deprecated rfc ip group ip group contains scalar attribute table Ô¨Årst attribute writable boolean attribute enable disable forwarding default ttl outgoing packet header scalar attribute follows later summarize informally number received ip packet number apparent ip packet received header error number ip packet received bad destination address number forwarded ip packet number received ip packet unknown protocol number received ip packet error discarded resource limit number received ip packet delivered locally number ip packet originated node delivery number outbound ip packet discarded resource limit number outbound ip packet route ip warding table value second ip timer number ip proper fragment received needed reassembly node forwarded fragment reassembled destination number fragmented ip packet successfully reassembled number fragmented ip packet notsuccessfully reassembled network management snmpan introduction computer network release primarily packet needed fragmentation dont fragment bit mentation set number ip fragment created node number packet forwarded discarded resource limit Ô¨Årst table ipaddrtable list ip address assigned node interface netmasks second table iproutetable forwarding table looked brieÔ¨Çy snmp table note index consists solely destination ip address iproutedest sufÔ¨Åcient forwarding key xdest netmasky pair trafÔ¨Åc routed differently trafÔ¨Åc table contains attribute state unused metric set agent simply omit column entirely agent similarly omit iprouteage table ipnettomediatable table replaces similar deprecated table group ipnettomedia table add column ipnettomediatype present table column indicates mapping invalid dynamic static arp entry dynamic updated version ip group mib icmp group icmp group consists counter various icmp event icmp echo request ping request packet counter tcp group tcp group includes following scalar method calculating retransmission timeout normally vanj algorithm tcp timeout retransmission minimum tcp retransmission timeout millisecond maximum tcp retransmission timeout m imposes static cap number allowed tcp connection returned system static cap return number tcp connection opened node speciÔ¨Åcally number tcp state transition closed literally number tcp state transition listen number tcp connection went closed established introduction computer network release number tcp connection went established directly closed rst packet number tcp connection currently state established state count received tcp packet including error duplicate duplicate reception relatively rare count sent tcp packet notincluding retransmissions count tcp packet retransmitted byte packet contain new data number tcp packet received error including checksum error number rst packet sent surprisingly counter provided total number tcp byte sent received entry strategy egreno v newreno v tcp cubic newer tcp implementation tcp group includes tcpconntable table list connection identiÔ¨Åed xlocaladdress localport remoteaddress remoteport y connection state looked earlier snmp table table noteworthy Ô¨Åve column index consequence extract information table manager need retrieve tcpconnstate column attribute encoded oid index returned eachtcpconnstate value look newer replacement udp group udp group contains following scalar count number udp packet received deliverable socket count udp packet received undeliverable port open count number udp packet undeliverable error count number udp packet sent udp group contains table udptable table list udp port node open table row form xlocaladdr localport y column included index udp socket accepts connection localaddr appear snmp group snmp group consists snmp status error attribute numbered used network management snmpan introduction computer network release community security manager authenticates agent providing string known community string combination userid password single string identiÔ¨Åes manager manager group time authenticates manager community string identiÔ¨Åes manager member designated community conventional use word manager course site manager interacts given agent community string sent unencrypted vulnerable snifÔ¨Ång snifÔ¨Ång necessary far away popular value default agent string public community string obscure changed frequently appropriate security practice today use authentication manager sends incorrect community string reply relaxed rule somewhat engine single agent support multiple community string community associated subset mib view allows example agent conÔ¨Ågured community string allows manager access group community string tengwar allows access entire group community string galadriel allows access preceding plus private group s using common agent linux macintosh machine achieved following entry Ô¨Åle rocommunity default rocommunity tengwar default rocommunity galadriel default view included view included order galadriel community contain disconnected oid subtrees necessary make use access control model v acm community galadriel access tree view named view turn deÔ¨Åned line purpose v acm seen implementation mechanism specifying portion oid tree accessible given community v acm allows read write permission granted speciÔ¨Åc oid tree excluded speciÔ¨Åc subtrees egtable column using mask mechanism access granted speciÔ¨Åc row table return v acm brieÔ¨Çy vacm microsoft operating system snmp agent generally included enabled egfrom dows component program feature agent conÔ¨Ågured accessing service egthrough control panel √±administrative tool launching selecting snmp service clicking property applet allows setting community read v write permission specifying collection visible oid subtrees view supported snmp community mechanism canoffer reasonable degree security community name changed frequently eavesdropping concern real problem security just information leak attacker know community string community security introduction computer network release understood snmp access reveal site s complete network host structure including vpns subnets tcp connection trust relationship site block snmp port Ô¨Årewall far run snmp hidden network largely invisible organization view model access formalized rfc called based access control model v acm allows creation named view vacmaccesstable spell viewing right assigned given v acm group rough sense corresponds community v acm support addition view consisting disjoint union oid subtrees table view limit access speciÔ¨Åc set column snmp encoding snmp data entered packet encoded according basic encoding rule ber hierarchical binary encoding strategy atomic value integer octet string object identifier istagged type compound structure tagged mean receiver understand complex packet format prior knowledge structure ber rule itu standard support format including xml encoding rule snmp us ber general representation object triple following form type tag make data length value bitclass bit ber encoding Ô¨Årst bit type Ô¨Åeld theclass bit identify context universal type integer object identifier class bit type timeticks class bit bit primitive type constructed type structure rest Ô¨Årst byte type tag second byte needed tag bit Ô¨Årst byte primitive type standard primitive tag value used snmp follows null integer octet string object identifier snmp deÔ¨Ånes tag following rfc network management snmpan introduction computer network release ipaddress timeticks opaque second Ô¨Åeld structure length value portion byte length primitive type Ô¨Åt single byte data item longer byte true composite type integer encoding used actual data encoded value Ô¨Åeld nonnegative integer integer converted bitstring encoded byte possible provided leading represent sign similarly negative number leading represent sign example encoded integer value byte encoded integer value byte second value byte represents Ô¨Årst byte represents sign Ô¨Årst byte integer represented length value byte similarly encode decimal fourvalue byte needed leading bit number interpreted negative octet string string byte placed value portion number byte placed thelength portion object id generally encoded using byte level exception initial level oid encoded using single level value y snmp oids begin Ô¨Årst byte second level greater encoded multiple byte Ô¨Årst bit byte Ô¨Årst bit preceding byte seven remaining bit byte contain bit oid level example value encoding following byte hexadecimal represented block Ô¨Årst block preÔ¨Åxed second block note encoding oid quite different encoding integer composite type encoding primitive type build structure composite type bit set universal composite type consider sequence sequence composite type Ô¨Årst bit tag Ô¨Åeld snmp encoding introduction computer network release trap avarbind pair encoded sequence object identifier value objectsyntax objectsyntax speciÔ¨Åed choice contain tagged snmp primitive type choice syntax add byte value simply encoded varbind oid sysuptime value hour represented hexadecimal byte hexadecimal representation encoding type length type length encoding sequence item type length Ô¨Årst byte mark sequence recall type byte sequence bit Ô¨Åve bit numeric value decimal thevarbindlist deÔ¨Åned sequence varbind single varbind resultant enclosing varbindlist follows length Ô¨Åeld ber encoding rule stop varbindlist slightly simpliÔ¨Åed speciÔ¨Åcation entire packet portion protocol data unit sequence integer integer integer varbindlist encoding packet ber rule ber encoding mechanism represents different approach layout say ip tcp header header tcp header approach generally quite bit compact byte needed larger integer versus ber byte used sequence speciÔ¨Åcations biggest advantage snmp ber approach object entire packet individual value given variety type used snmp fact variable length fact value reader mib network management snmpan introduction computer network release browser operate having mib loaded feature quite useful network management system job network management system nm automate process network monitoring rule includes regular collection snmp data nm new device added identify capability device determine sort snmp query send regularly pollthe device request appropriate interval maintain history network behavior device discovery example implemented ping internet control message protocol capability determination using sysobjectid value group nmses able Ô¨Ågure appropriate query private Ô¨Åx addition appropriate query worth noting discovery capability determination principle handled manual conÔ¨Åguration practice fails badly smallest network automatic detection nm literally snmp manager device sense snmp basic sending request directly alternatively delegate role nmses use mechanism quite common monitoring status link server snmp offer fewer option nmses use alternative situation relatively snmp system come able imperfect strategy device discovery capability determination automating issue system requires considerable thought effort snmp alternative snmp popular large nearly piece networking hardware support room improvement issue use udp transport response lost second issue limitation polling polling interval second common concern frequent polling lead excessive trafÔ¨Åc long polling interval make impossible capture trafÔ¨Åc burst problem exacerbated lack timestamps snmp agent quite clear just agent response collected alternative proposed promising category streaming telemetry google network management interface gnmi implementation particular gnmi us grpc grpc transport meaning message delivery reliable turn mean device conÔ¨Ågured report change approach fail badly unreliable transport gnmi doe support set request similar snmp primary mechanism subscribe request subscription type poll meaning agent sends requested data regular interval stream subscription useful support sending data update data value change update response sent time data change immediately network management system introduction computer network release detection data change particularly useful say packet count invaluable report interface going available report trafÔ¨Åc exceeding preset threshold gnmi supported device adoption nearly complete snmp gnmi installation make use translation proxy device speak gnmi nm gnmi collector speak snmp nearby snmp agent proxy close agent mean snmp packet loss rate low frequent snmp polling doe lead network congestion proxy approach help difÔ¨Åcult problem device discovery capability detection information gnmi gnmi speciÔ¨Åcation exercise consider table snmp table Ô¨Årst column index index count veggie kale kohlrabi m√¢che okra oid data value assuming table encoded snmp assume column assigned oid level order including index column root subtree tableentry oid represented note row numbered consecutively suppose interface data appears table snmp table follows missing entry simply present column numbered physical interface ifspeed tunnel interface built physical interface identify physiface column ifindex ifname ifspeed physiface loopback suppose traverse table using getnext sequentially order value returned oid let trepresent root oid leaf oids form Ô¨Årst value oids follows value oid consider following getnext presented network management snmpan introduction computer network release getnext answer given text explicitly assumed column existing shown result column iftable present assume row Ô¨Ånal row suppose want snmp table identtable holdxidnum username ypairs idnum integer username octet string index idnum deÔ¨Ånitions following follow convention including index column regular table data exercise introduction computer network release network management snmp version chapter mixed present useful tional mib introduced multiple evolutionary change smi various mib basic protocol operation new mib added contained proposal improved security widely adopted eventually snmp community settled c version stayed security model speciÔ¨Åcation rfc rfc generally agent manager interoperate quite easily essentially agent support query answer according version request received slightly greater confusion mib Ô¨Åles browser manager support smi data type introduced macro act like macro leaf syntax clause serf way deÔ¨Åne oids separately syntax macro access attribute renamed new access option reading plus row creation added provided new version basic type added type deÔ¨Ånitions rfc originally rfc practical problem example inoctets counter wrap second gbps integer type remains declared synonymous counter gauge type replaced version added added somewhat later rfc bit type representing individual bit word added object identifier type formally limited level introduced macro alternative type primary enumerated type description type actually represent example include ownerstring octet string intended management station human operator entrystatus enumerated type meant used row addition rmon andinterfaceindex meant number interface appearing iftable table deÔ¨Ånitions interface group used table casual mib reading textual convention simply thought type introduction computer network release semantics agent receives list oids request available error returned agent return list containing appropriate value valid oid request oids agent able return actual value special valuenosuchinstance missing table entry legal column speciÔ¨Åcations nosuchobject missing value substituted theset semantics remain unchanged agent doe update oid value request unless able update getbulk introduced getbulk operation extension getnext manager includes integer n request agent iterates action getnext n time n result represent entire row returned single operation example suppose table thas Ô¨Åve row indexed column oids oids table follows getbulk request repetition count return Ô¨Årst row following oids continue request include oids result suming count value oids ai leaf oid right note row second request Ô¨Årst leaf oid following row column Ô¨Årst row column similarly follows leaf oid table successor outside table getbulk request format actually partition list requested oids part oids requested request repeated additional parameter snmp version introduction computer network release oid list included indicating number oids requested indicating number time remaining oids retrieved getnext possible request row table return xoid valueypairs outside table following table order total number oids request n return packet contain list ofxoid valueyvariable binding length n getbulk considerable potential return data room agent return fewer repetition see Ô¨Åt index saw snmp table index column included table attribute returned agent come paired attribute s oid oid table item encodes row index value index column unnecessary rare case case alltable column index udptable deal requiring usual index clause tableentry deÔ¨Ånition tableindex attribute deÔ¨Åned assigned example sysortable mib change second represents change sysorentry syntax sysorentry status current description entry conceptual row sysortable index sysorindex sysortable sysorindex syntax integer status current description sysorentry theindex attribute appears declaration sysorentry usual way classed anauxiliary object access sysorindex ordinary column direct access index attribute suppressed way index data available nying oid longer tagged type snmp encoding thesysorindex value example appear single oid level manager use mib determine meant integer timeticks counter address used introduction computer network release index appear oid level readily recognizable address provided manager knew look string value appear index lack index column particular nuisance example indication username alice usmusertable usmusertable oid fragment representing ascii code letter generally agent send nosuchobject special value semantics asked auxiliary object testandincr introduced testandincr textual convention introduces aberration usual semantics set underlying type integer range andget work usual way tiis oid testandincr object set ti val set value titoval instead value object equal val theset succeeds value object incremented set value object equal val error occurs change atestandincr object act like kind semaphore exactly way decrement object value doe wrap goal provide tary mechanism enforce serialization manager writing set attribute saw example end set serialization automatic let revisit example using testandincr recall manager updating attribute oids xandy time agree include testandincr object oid ti serialization assured long manager executes set following form val ti mean manager us retrieve value tiand store local variable val val ti set ti val x xval y yval suppose manager b s ti occurs manager s set ti val incremented val manager b s set operation occur later s set completed alternative manager value val let manager Ô¨Årst succeeds set ti val manager b set ti val fail value stored tiis allof b s set operation fail consequence manager b try probably immediately likelihood conÔ¨Çict low b expect succeed soon usually testandincr object need provided entire table row actual example usmusertable table augmentation introduced mechanism extending existing table adding effect column known asaugmentation new deÔ¨Ånition instead index clause augments snmp version introduction computer network release clause argument existing table extended new entry row indexed attribute indexed augments clause example ifxtable augments iftable meaning essence ifxtable automatically indexed iftable s index ifindex ifxentry deÔ¨Ånition establishes ifxentry syntax ifxentry status current description entry containing additional management information applicable particular augments ifentry ifxtable intent iftable row extended include nineteen additional value deÔ¨Åned forifxentry correspondence row iftable andifxtable hand new table extends row original table ieis asparse extension new table entry index clause repeat original table ple extends providing additional information interface behave like ethernet deÔ¨Ånition syntax status current description statistic particular interface √£√±medium index index deÔ¨Åned follows note statement tion reference correspond ifindex syntax interfaceindex status current description index value uniquely identifies interface medium interface identified particular value index isthe interface asidentified value reference rfc ifindex finally possible new table dense correspondence row subset row existing table case new table index clause include index attribute original table additional attribute example keep interface set histogram bucket giving n introduction computer network release count number packet experienced exactly n collision successful transmission deÔ¨Ånition follows syntax status current description index ifindex theifindex entry index represents original table second new index attribute mib change core mib essentially version rfc originally rfc change appear oid preÔ¨Åx deÔ¨Ånes preÔ¨Åx speciÔ¨Åcally information mib add object resource table sysortable group slightly modiÔ¨Åes group provides new snmp group preÔ¨Åx sysortable original group contained attribute sysobjectid identiÔ¨Åes agent time suggests private oid tree provide additional information agent group thesysortable attempt extend consists list oids queried agent information oid associated description string asysoruptime value indicating time oid added example list following snmpmodules message processing mib security mib snmp management architecture information tcp ip udp v acm snmp notiÔ¨Åcation snmp notiÔ¨Åcation logging snmp version introduction computer network release oid preÔ¨Åxes theoretically accessed information unfortunately conÔ¨Ågured query return sysortable doe know ifxtable rfc addressed problem ifspeed byte counter introducing new table ifxtable formerlyifextnstable oid aegis oid outside traditional interface group doe use smi theifxtable table includes deÔ¨Ånitions high capacity counter octet unicast packet multicast packet broadcast packet includes ifhighspeed attribute interface speed quantity measured unit mbps deÔ¨Ånition ifxtable row follows ifxentry sequence ifname displaystring ifinmulticastpkts ifinbroadcastpkts ifoutmulticastpkts ifoutbroadcastpkts ifhcinoctets ifhcinucastpkts ifhcinmulticastpkts ifhcinbroadcastpkts ifhcoutoctets ifhcoutucastpkts ifhcoutmulticastpkts ifhcoutbroadcastpkts iflinkupdowntrapenable integer ifhighspeed ifpromiscuousmode truthvalue ifconnectorpresent truthvalue ifalias displaystring ifcounterdiscontinuitytime timestamp original interface group counted multicast broadcast packet egin ifinnucastpkts rfc originally rfc deÔ¨Ånes mib interface primary goal enable collection statistic collision behavior new table deÔ¨Åned contains additional attribute refers ieee designation ethernet table represents sparse extension original iftable sense table augmentation table used example introduction computer network release row table consist counter various error noteworthy condition alignment error number bit frame divisible crc checksum failure frame experienced exactly collision frame experienced collision signal quality error sqe speciÔ¨Åc mbps ethernet deferred transmission station tried send line idle late collision way collision occur slot time passed physical ethernet big failing slot time collision excessive collision frame experienced collision sender gave hardware error carrier sense error carrier sense refers mechanism actual carrier frame longer octet ethernet encode data symbol mbps ethernet s frame arriving corrupted symbol attribute ethernet chipset like counter bit instead bit list n packet experienced exactly n collision successful transmission discard ethernet generally allows maximum n table indexed pairxifindex ny contains information contains information interface support mac control sublayer similar rfc rfc deÔ¨Åned basic management information ethernet switch complemented mib mib contains basic information switch number port section cover information protocol spanning tree algorithm redundancy interesting member mib table contains forwarding table map mac address port created ethernet learning algorithm ethernet learning algorithm abbreviation ieee standard transparent bridging protocol forwarding database using table network manager trace origin packet given mac address switch seen packet table reveals switch port packet arrived snmp version introduction computer network release port lead switch process repeated port represents port packet originated end port s cable terminates typically allows determination ofÔ¨Åce apartment unit hotel room device connected tracing quite hard evade short breaking wiring closet compromising switch table used alert network manager different device plugged ofÔ¨Åce ethernet jack spooÔ¨Ång changing new device s mac address match Ô¨Årst device s mac address used avoid detection strategy identifying device s physical location doe work quite used identify access point generally requires presentation credential give alternative approach tracking user mib doe notcontain information internal switch queue drop packet mib used instead mib ip group really separate thing strictly local information ip packet delivery forwarding table affect larger collection node node local ip information router signiÔ¨Åcant forwarding did long subgroup separate mib began rfc just year original rfc created new home information time Ô¨Årst mib ip group came rfc theiproutetable group declared obsolete current version rfc allows enabling disabling forwarding ipforwarding setting default ttl ipdefaultttl urable parameter timeout ipreasmtimeout ip address appear table deÔ¨Åning entry prefaced object type inetaddresstype value value special case table devoted ip statistic ipsystemstatstable ip information theipifstatstable information table includes ip address type ip version index meaning separate statistic kept trafÔ¨Åc table indexed ip address type interface table indexed interface number ifindex theipifstatstable contains interface count packet octet broadcast multicast unicast count forwarded reassembled fragmented packet count packet kind error related additional count entry counter refresh rate provided appropriate counter provided usually equivalent counter provided ipsystemstatstable provides summary count represent information ip address assigned interface indexed interface index meaning introduction computer network release table accurately represent interface ip address type additional information contained ipaddressprefixtable primarily theipaddresstable table contain information ip address assigned interface address came egdhcp dynamic host conÔ¨Åguration protocol dhcp preÔ¨Åx discovery preÔ¨Åx discovery indexed ip address ipaddressaddrtype table support possibility interface multiple ip address particularly common theipnettophysicaltable represents map local ip address physical lan address created arp neighbor discovery addition interface ip address physical address tle table contains timestamp indicating given entry updated refreshed indication address mapping dynamic static invalid Ô¨Ånally attributeipnettophysicalstate value reachable stale pired reachability delay andprobe relating active update reachability invalid unknown andincomplete indicating arp progress arp finer point simple version forwarding table known default router table contains list default accurately initially conÔ¨Ågured route doe represent genuine forwarding table intended node act router engage protocol table represents list default route ip address interface contains value used specifying timer attribute router tisements router discovery finally contains table icmp statistic icmpstatstable andicmpmsgtable keep track example ping icmp echo icmp message sent internet control message protocol mib information speciÔ¨Åc host s capability Ô¨Årst split ip group rfc updated rfc current version rfc original ip group left oid new mib begin iteration ip forwarding table original rfc ip group siproutetable new version formally deprecated predecessor Ô¨Årst replacement ipforwardtable described rfc deÔ¨Ånes oid ipforward new table ipforward table added routing attribute importantly changed indexing index iproutetable ip tion network iproutedest new table s index includes attribute snmp version introduction computer network release ipforwardpolicy usually representing type service Ô¨Åeld usually known d Ô¨Åeld header inclusion allows ipforwardtable accurately represent routing based onxdest qosy discussed algorithm routing called multipath routing allows multiple path given destination based different qos ues mask length notincluded index making ipforwardtable inadequate representing cidr routing index includes actual forwarding table doe make sense looking given destination work Ô¨Åne snmp ments snmp index attribute expected snmp table index cludes attribute ipforwardproto represents protocol source table entry icmp rip common implementation andospf implementation bgp addition table includes attribute ipforwardtype eglocal v remote ipforwardage time update ipforwardinfo ipforwardnexthopas eral routing metric purpose ipforwardinfo provide oid accessed vide additional information speciÔ¨Åc algorithm use ipforwardnexthopas allows speciÔ¨Åcation autonomous number usually relevant bgp border gateway protocol bgp involved number relevant set zero second iteration ip forwarding table ipcidrroutetable appearing rfc located ipforward returning practice calling route forward table table add address mask ipcidrroutemask index Ô¨Ånally allowing distinct route Ô¨Åeld ipcidrroutetos remains index doe destination Ô¨Årmly identiÔ¨Åed type service d Ô¨Åeld algorithm dropped index table add attribute ipcidrroutestatus typerowstatus used creation deletion entire row forwarding table entry control snmp return process table row creation current version ip forwarding table inetcidrroutetable introduced rfc located ipforward main change introduced table extension support column egfor destination companion column address type detail attribute column addition address type index address mask used inipcidrroutetable updated preÔ¨Åx length inetcidrroutepfxlen Ô¨Åeld inetcidrroutepolicy object id clared opaque object deÔ¨Åned semantics implementer s discretion Ô¨Åeld evolved trafÔ¨Åc class Ô¨Åeld header finally route longer required list single associated interface table make use interfaceindexorzero textual convention rfc covering just situation size modern ip forwarding table million entry bgp table size dwarf size essentially snmp table regularly downloading entire table snmp use considerable bandwidth source table changed time snmp retrieval Ô¨Ånished leading inconsistent snmp snapshot introduction computer network release rfc contains extension s tcp group mib embedded rfc repeat tcp group add new feature tree rfc stopped rfc deÔ¨Ånes new object starting newtcpconnectiontable deÔ¨Åned versus original tcpconntable newer table support like inetcidrroutetable column companion column address represented octet string preceded length byte follows rule inetaddresstype inetaddress ofrfc rule rfc length aninetaddress isn t known advance length included user used earlier tcpconntable mean extra s preÔ¨Åxing address index example host connecting port web server tcpconnectionstate new table includes column representing process id process open local end connection table adheres convention index column included data attribute marked accessible column tcpconnectionstate tcpconnectionprocess doe notmake available tcp statistic egthe number tcp byte sent doe make available statistic retransmission count total byte transmitted way table row creation reÔ¨Åned mechanism manager add row agent s table principle adding row table set operation imagine table twith column indext fruitt andprimet corresponding imagine right table row withindext value indext fruitt primet apple blueberry cantaloupe new row added following set operation entry new row oids create row assign note assigning oids agent s current database exist set durian snmp version introduction computer network release course raise question agent actually allow happens set operation performed individually group way delete newly added row seriously happens manager try insert time row turn speciÔ¨Åc mechanism rmon rmon rmon remote monitoring early attempt Ô¨Årst appearing rfc month s rfc having snmp agent monitoring responsibility current version rfc original rmon called implemented layer monitoring later extended ip transport layer rfc consider rmon implement passive monitoring capability remote agent send snmp query ping monitoring implemented putting designated interface promiscuous mode classic ethernet capturing trafÔ¨Åc modern ethernet host simply trafÔ¨Åc actually addressed rmon need implemented switch router practical use agent s rmon activity controlled snmp manager insertion new row various control table mechanism doing primary concern rmon statistic divided group consider following count error count packet size range octet statistic group data taken regular interval ethernet sender receiver seen interface n sender receiver information trafÔ¨Åc xsender receiver ypair statistic use entrystatus theetherstatstable default indexed etherstatsindex opaque integer column etherstatsdatasource represents oid speciÔ¨Åc interface number deÔ¨Åned iftable example interface ifnumber represented column etherstatsstatus typeentrystatus follows valid createrequest undercreation invalid attribute etherstatsdatasource andetherstatsstatus initially later changed status written creation table row creation introduction computer network release new row attribute etherstatsowner supplied string identifying particular manager ip address hostname human involved appropriate additional identiÔ¨Åcation enable statistic collection snmp manager creates row agent s etherstatstable setting attribute status datasource andowner left preÔ¨Åxetherstats readability status set tovalid agent begin collecting data desired interface manager read data desire accessing particular row data collection end manager set etherstatsstatus row invalid agent row actually deleted point theetherstatsindex column actually writable manager select value index approach read entire table identify Ô¨Årst unused index value manager creating new row agent moment row index available moment unavailable return conÔ¨Çicts prevented common strategy reducing chance collision choose value index random possible manager create desired row single set operation rfc requires status attribute request creation new row createrequest second set operation required transition valid iftis tree oid etherstatsentry manager s chosen index manager want monitorifindex send following single operation set createrequest owner point agent create row status undercreation value createrequest used manager request appears actual row agent manager follow set valid manager want need create entry piecemeal follows set createrequest set set owner set valid immediately following Ô¨Årst set createrequest agent create row mark asundercreation time new row missing column thestatus attribute speciÔ¨Åed Ô¨Årst set operation row existing row status set tocreaterequest primary legal state transition follows snmp version introduction computer network release non existentunder creationvalid invalidcreaterequest changed mindnormal row completion normal termination change allowed transition diagram entrystatus row requested createrequest actually created undercreation case row edited manager changing status valid undercreation speciÔ¨Åc implementation require change row marked valid change existing row case row marked invalid new row created transition rule createrequest prevent manager simultaneously creating row index suppose example manager m aand m beach attempt create new row executing set createrequest m s set request Ô¨Årst acted row s status becomesundercreation later m b s set request processed row longer nonexistent diagram mb s arrivingcreaterequest invalid createrequest arc node nonexistent m b s set operation m b s set operation fail strategy meant prevent accidental conÔ¨Çict prevent m bfrom hijacking ma s row marking invalid effectively deleting generally understood inconsequential risk legitimate manager trustable authorized snmp manager read etherstatstable record requirement creator row read row quite possible multiple row created referring interface egby multiple manager forbidden reason manager create row interface entrystatus type appeared original rfc update rmon left entrystatus introduced rowstatus type likely used new mib turn rowstatus history history group allows collection series sample data statistic group regular interval group consists table historycontroltable manager creates row manage process etherhistorytable containing actual data thehistorycontroltable contains entry omitting historycontrol preÔ¨Åx attribute name datasource representing interface examined status andowner table row creation introduction computer network release attribute etherstatstable manager creates new row speciÔ¨Åes value index historycontrolindex chosen random manager specify additional attribute interval representing time second event bucketsrequested representing requested maximum number interface record kept agent agent reach maximum new record replaces oldest previous record control table contains attribute bucketsgranted indicating actual maximum number interface record kept control table row marked valid agent start accumulating statistic record speciÔ¨Åed interface interval second record numbered consecutively number given record sampleindex agent keep bucketsrequested record sampleindex reach value record n added record n bucketsrequested deleted data collected agent stored etherhistorytable contains column statistic etherstatstable count packet various size range table indexed pair value index corresponding ethercontrolindex record number sampleindex table disjoint union multiple independent series consecutively numbered record series index value control table series manager request example suppose manager asked history statistic kept given interface rate minute bucketsgranted value request hour table contains record sample index value hour minute record record hour record sample index available manager return hour retrieve recent record manager create record holding record taken interval holding record taken interval manager download Ô¨Årst table day entirely ignore second table manager available record hour access needed problem arises signaled entirely manager easily retrieve row etherhistorytable let tbe root etherhistorytable column suppose manager created controltable row value historycontrolindex manager retrieve Ô¨Årst data row following note oid contains column number row index getnext row associated value ranging getnext return row indexed value paired following oids subsequent getnext s return subsequent row associated control entry row theetherhistorytable indexed reverse order sample index Ô¨Årst historycontrolindex second substantial linear search necessary locate Ô¨Årst row given value control index snmp version introduction computer network release host host group allows agent track host identiÔ¨Åed ethernet address currently active like historycontroltable thehostcontroltable allows manager specify datasource status andowner manager speciÔ¨Åes tablesize entry valid agent start recording host hosttable dexed index host ethernet address agent record new host s creationorder value integer record number starting thehosttable maintains counter following attribute updated agent see packet host revisit hosttopntable following inpackets outpackets inoctets outoctets outerrors outbroadcastpkts outmulticastpkts number host entry particular index value exceeds tablesize new host s creationorder exceed tablesize old entry removed host table given updated creationorder value table size contains entry host b c creationorder value host d come deleted b c d given creationorder value respectively quite different assignment etherhistorytable sampleindex record number immutable consequence creationorder value contiguous integer starting entry deleted based order creation order update hosttable doe attribute representing time given host s entry entry updated convenience data hosttable available hosttimetable indexed index creationorder time make potentially faster lookup example manager know record creationorder oldest record importantly alternative index allows manager download recent entry single step host deleted table creationorder value assigned host change indexing hosttimetable change manager downloading row hosttimetable time prepared possibility earlier row row host duplicated skipped help manager deal control table entry lastdeletetime representing time timeticks startup deletion thuscreationorder renumbering manager see value change example start data request beginning table row creation introduction computer network release host n thehosttopn table report prepared agent n entry n thehosttable interval time manager speciÔ¨Åes control table status owner attribute hostindex index value hostcontroltable duration second ratebase indicating following hosttable statistic used ranking inpackets outpackets inoctets outoctets outerrors outbroadcastpkts outmulticastpkts value n attribute requestedsize agent reduce communicates change lack attribute grantedsize row valid agent start maintaining counter entry hosttable indexed hostindex end duration sort data place result hosttopn table interval host removed hosttable table result inaccurate result statistic inaccessible theduration elapsed particular hosttopn report run course point result matrix matrix group allows agent collect information trafÔ¨Åc Ô¨Çow indexed source destination address manager begin process supplying attribute status owner usualindex interface datasource maximum table size row valid agent begin collecting xsource destination ypair count number packet octet error record xa bycounts thing sent corresponding record forxb aycounts reverse direction actual matrixsdtable indexed index value source destination ethernet address order companion table view maintained called matrixdstable list information indexed destination Ô¨Årst source view present supply information reverse direction obtained reversing source destination matrixsdtable matrixdstable allows manager extract information single destination d single snmp operation preÔ¨Åx matrixdstable similar indexing discussion end history exercise snmp version introduction computer network release rowstatus rmon value entrystatus attribute createrequest undercreation valid andinvalid support entrystatus preferred form rowstatus rfc option likevalid agent know row complete row complete activated likecreaterequest followed valid likecreaterequest likeinvalid thecreateandgo option allows manager make single request agent cessful agent immediately set row status active usingentrystatus requires step Ô¨Årst set new row undercreation set valid manager ask status notready row created marked agent notready notinservice oractive withentrystatus manager choose index value pseudorandom selection remains appropriate case agent supply mib Ô¨Åle support recommendednextindex attribute simpliÔ¨Åed rowstatus diagram link destroy node shown rfc p detail non existentnot readynot serviceactive destroycreateandwait partial attribute changed mindrequest active normal termination change allowed simplified transition diagram rowstatuscreateandgo additional set agent know req attrs specified createandwait required attributesadd l set partial attribute manager issue createandwait agent Ô¨Ålls attribute provided manager default attribute available manager desired entire row Ô¨Ånd value missing value reported nosuchinstance alternatively manager simply know attribute set table row creation introduction computer network release agent know row missing attribute necessary activation set rowstatus notready notinservice anotinservice row course undeÔ¨Åned attribute agent later set activation notinservice row attribute manager intends set activation agent given default value interim manager set attribute required activation set rowstatus attribute active agent activity begin withentrystatus manager simultaneously create row try second attempting set rowstatus tocreateandwait orcreateandgo row entry existed diagram transition allowed idea ping mib allow manager ask agent repeatedly ping target internet control message protocol report success rate use ietf ping mib rfc ofÔ¨Åcially titled disman short distributed ment earlier ping mib deprecated cisco generally available internet ping mib make use rowstatus convention previous section manager ping target ifthere Ô¨Årewalls way result likely different obtained having agent ping target actual mib support multiple type ping usual icmp echo request consider disman version control table pingctltable result appear pingresultstable cisco version table used control result result include minimum maximum average rtt number ping sent number response result table attribute operstatus indicate test stopped thepingctltable contains wide range option actual ping request including option specify outgoing ip address multihomed agent familiar option include address type supported big ping packet long agent give ping number ping sent interval ping table includes pingctlrowstatus typerowstatus pingctlownerindex typesnmpadminstring fancier way identifying manager rmon owner attribute include credential desired new row created rowstatus set toactive createandgo test begin setting control table s rowstatus todestroy manager attempt halt ping series progress snmp version introduction computer network release snmp version added authentication encryption relatively change nomenclature original deÔ¨Ånitions rfc rfc rfc Ô¨Årst appeared rfc introduced user security model usm agent allow manager access manager presented appropriate key derived ultimately passphrase agent s response digitally signed encrypted desired did make terminology change snmp node manager agent known snmp entity entity divided part Ô¨Årst snmp engine consisting message dispatcher message processor security subsystem second consists various snmp application consisting agent primarily command responder responding andgetnext goal architectural division separate application authentication mechanism goal provide framework future new application easily supported snmp engine implement new security provision possibly wrong rfc analyzes risk inadequate snmp security identiÔ¨Åes primary secondary threat primary threat follows unauthorized modiÔ¨Åcation information transit attack s message b intercepted modiÔ¨Åed intermediate node unauthorized operation manager agent masquerading authorized entity use guessed cracked password fall category secondary threat stream modiÔ¨Åcation includes message importantly replay attack example key discovered attacker learn certain message cause certain server reboot retransmitting message consequence reading eavesdropper management information transit disclosure addressed appropriate digital signature timestamps encryption needed disclosure active concern disclosure signiÔ¨Åcant concern rfc written unlicensed export encryption technology united state illegal deÔ¨Ånes separate new level security addressing modiÔ¨Åcation masquerade replay encryption addressing disclosure correspond value snmpsecuritylevel textual convention priv breviates privacy authentication authentication encryption introduction computer network release encryption message encryption privacy implies authentication encrypted message include authentication signature described cryptographic fundamental authentication based cryptographic hash function function data string arbitrary length return hash way knowing hash value shed practical light original data given hash value feasible way Ô¨Ånd message yielding hash detail secure hash internet checksum error detection fails cryptographic hash example given message m hash value calculate hash m h append m string based yielding message hash cryptographic hash function originally supported rfc produce hash produce hash publication rfc vulnerability hash function discovered snmp framework principle allows easy substitution new hash function rfc standardizing use family did appear draft form party share secret key k basic way sign message m append value hash m k m k result appending k eavesdropper m hash m k provide information k similarly attacker given message m able generate value hash m k knowing hash function vulnerable attack used way actual signature slightly involved password key secure hash authentication hash m k good example basic concept snmp encryption mechanism based shared secret key encryption encryption used rfc describes use data encryption standard cipher de us key later rfc introduced use advanced encryption standard cipher aes snmp user key de aes discussed brieÔ¨Çy block cipher de vulnerable limited key length aes stronger choice encryption based abstractly encrypting function e p k take plaintext message p key k return encrypted ciphertext similarly decrypting function d c k take encrypted ciphertext message c key k return original plaintext engine engine component snmp entity charged ensuring security engine manager agent identiÔ¨Åer known snmpengineid string default incorporates node s ip ethernet address additional standard information common snmp version introduction computer network release leave default setting unchanged possible replace using naming scheme including organization locally assigned serial number rfc exchange engine designated authoritative aget orset request request requires response agent authoritative job authoritative engine validate message received engine encrypting security level nonauthoritative engine present pair consisting following string identifying person string holding data speciÔ¨Åc mechanism use serf authenticate user thought passphrase goal send passphrases clear authoritative engine table username value recognizes appropriate key validate user engine keep track attribute number second engine rebooted number time engine rebooted pair abbreviate xtime bootsy uniquely identiÔ¨Åes point time entity nearest second used prevent replay attack message sent second apart xtime bootsytimestamp note keeping track snmpengineboots implies entity form persistent age nonauthoritative engine purpose manager want send request itative engine agent Ô¨Årst step Ô¨Ånd agent s snmpengineid current xtime bootsyvalue initial discovery process Ô¨Årst request tains varbindlist engineid username string security level noauthnopriv authoritative sends response containing engineid second step send request varbindlist containing valid xusername keyypair value forxtime authoritative engine responds message including actual xtime bootsy message authentication discovering authoritative engine s xtime bootsy nonauthoritative engine store thoritative engine s snmpengineboots difference authoritative engine s snmpenginetime clock time use difference approximate tative engine s snmpenginetime point future message nonauthoritative engine include estimate authoritative engine s current xtime bootsyvalue relative drift tween engine clock eventually mean estimate fails shall expected close quite authoritative engine accepts request following hold time boot value submitted nonauthoritative engine snmpenginetime introduction computer network release snmpengineboots authoritative engine s value boot time snmpenginetime differ second maximum allowable clock drift word second clock drift nonauthoritative synchronization process outlined end previous section actual message signing based shared secret key authkey negotiated previously user agent key usually speciÔ¨Åc agent called local key kl password key user identiÔ¨Åed username value usually password word converted Ô¨Årst key way xuser agentypair unique key start mechanism commonly used security similar hash denote hash function hash Ô¨Årst step create digest based password sufÔ¨Åce principle set digest hash password order make password √±key conversion process relatively slow hamper attack appendix rfc recommends repeating password logically Ô¨Åll buffer length hash function applied megabyte string perspective intentionally slow password operation password hash step engineid agent user generating particular key hash concatenation digest engineid digest hash digest engineid digest xuser agentyshared key local key entered computed agent stored byte long byte long mechanism strictly speaking optional agent doe know manager key generated enforce particular mechanism manager s key later changed secure way generate unique key klfor user agent sufÔ¨Åcient mechanism advantage manager node compute user s local key directly password agent engineid key need stored manager allows manager use password multiple agent compromise agent attendant local key klshould affect security agent original password message signing snmp message mesg signed local key klusing hash message authentication code hmac rfc follows extended ekby padding zero constant string ipad formed repeating octet time snmp version introduction computer network release constant string opad formed repeating time set ipad set opad theauthparameter Ô¨Åeld actual digital signature set Ô¨Årst byte hash hash mesg slightly complicated hash mesg kl mechanism suggested cryptographic fundamental order make resistant potential vulnerability hash function secure hash authentication receiver replicate authparameter calculation verify match value transmitted packet key change suppose user want change password key manager need nicate new key agent way exposed eavesdropper mechanism hash appropriate use n denote length byte result hash original key denoted oldkey new key newkey manager Ô¨Årst chooses string random n byte chosen randomly possible second stringdelta calculated follows temp oldkey random delta xornewkey point random anddelta sent clear manager agent agent userandom andoldkey compute temp thusnewkey xortemp eavesdropper use random Ô¨Ånd temp knowing oldkey useful delta unless newkey ortemp known actual process combine random anddelta single keychange string written column usmusertable usmusertable note eavesdropper save random anddelta later discovers user s oldkey newkey calculated easily using language forward secrecy forward secrecy fails badly eavesdropper later discovers newkey obvious way Ô¨Ånd oldkey exercise improve forward secrecy simplify mass key generation generally rfc outline mental mechanism use key exchange exchange create change key instead process creating additional user suppose want add user alice agent alice s local key kl problem shared key way transmit klto agent snmp risk introduction computer network release eavesdropping solution require account creation alice log agent ssh direct connection enter password work awkward large network usual way create account alice cloning account agent assume initial account created password key user master cloning account just requires speciÔ¨Åcation name master alice key need sent second step update password new alice account mechanism previous section look detail cloning procedure section vacm v acm created association community string security group security group permitted view oid tree user name replace community string primary v acm table deÔ¨Åned rfc Ô¨Årst vacmsecuritytogrouptable indexed security model security model security username row table effectively indexed username unreasonable separate security group user grppld user pld second table vacmaccesstable indexed security group security model community security level egauthnopriv table used look named view read write privilege trap privilege desired table indexed textname contextname default finally named view stored vacmviewtreefamilytable indexed view oid preÔ¨Åx representing oid subtree given view vconsists oid preÔ¨Åxes opfor xv opyappears table preÔ¨Åxes associated mask typically allow access designated table row preÔ¨Åxes represent exclusion subtree view typical view name systemonly created view community security usmusertable time look actual table agent store user name associated authentication credential usmusertable attribute preÔ¨Åxed usmuser index attribute Ô¨Årst engineid andname consider attribute related security snmp version introduction computer network release engineid usually agent s engineid alice securityname usually clonefrom indication row entry cloned authprotocol authkeychange thexrandom deltaykeychange object key change ownauthkeychange different permission privprotocol used encryption privkeychange used encryption ownprivkeychange used encryption public used conÔ¨Årming key change storagetype hopefullypermanent meaning value persist reboots status typerowstatus row insertion think table having implicit authkey column representing local key sponding directly readable writable rfc state Ô¨Çatly authkey accessible agent authkey tied validate given user based andauthparameter supplied request becauseengineid usually agent s engineid table facto indexed just recall discussed index index attribute engineid andname directly accessible encoded oid associated retrieved attribute username alice encoded using ascii string encoding necessarily easily readable human manager position explain cloning process process play table speciÔ¨Åc semantic rule table use set assign axrandom deltaykeychange object toauthkeychange orownauthkeychange cause user s hidden authkey updated process key change user conÔ¨Årm directly change succeeded read keychange attribute return string usual recommended strategy write random value public attribute set operation atomic change mean change succeeded possible multiple manager updating table simultaneously single testandincr object named usmuserspinlock used enforce serialization standincr recommended sequence updating key follows keychange xrandom deltaykeychange object index encodes engineid thename rand value chosen manager val usmuserspinlock set usmuserspinlock val authkeychange keychange public rand repeated necessary public return rand indicating set operation succeeded introduction computer network release applies key change write privilege authkeychange column ofusmusertable alternative granting ordinary user write access authkeychange column use column ownauthkeychange instead user attempt write column write succeed username request authenticated equal representing index particular keychange word write access ownauthkeychange column change key key write access column granted cloning security option relatively little practical signiÔ¨Åcance clone new user existing Ô¨Årst step choose row cloned represented oid index value clonerow let index encode engineid andname val usmuserspinlock set usmuserspinlock val clonefrom clonerow status createandwait typically key change executed changing status toactive required creating account create initial account conÔ¨Åguration Ô¨Åles used author s installation sion administratively written conÔ¨Åguration Ô¨Åle written conÔ¨Åguration Ô¨Åle contains snmpengineboots persistent snmp data following line go second Ô¨Åle snmp shut earlier version required placed effect create user named master password saskatchewan createuser master saskatchewan snmp started line replaced like following single line usmuser master master null new localized key Ô¨Årst hex string beginning engineid new account authorized add following permission entry rwuser master effect entry create entry snmp restart vacmsecuritytogrouptable ciating user master security group name grpmaster entry thevacmaccesstable granting new group read write access entire oid tree snmp version introduction computer network release general used rouser need master able create new user permission read permission enabled following snmpget work snmpget master authnopriv saskatchewan localhost hostname localhost run machine agent running course run remotely make little shorter editing manager conÔ¨Åguration Ô¨Åle add following line defsecurityname master defauthtype defsecuritylevel authnopriv defauthpassphrase saskatchewan snmpget command shortened snmpget localhost password saskatchewan repeat checksum digest password key Ô¨Åle created usmuser entry Ô¨Ånd engineid convert string binary data concatenate digest engineid digest checksum exactly key entry Ô¨Åle cloning clone account snmp running using snmpusm utility following line creates account pld cloned master using master account assuming master rwuser rouser abbreviated auth credential master authnopriv saskatchewan switched localhost host size run remotely snmpusm auth host create pld master change password rambler using authority user master option tell snmpusm change authentication key snmpusm hostpasswd saskatchewan rambler pld new user pld grant access canagain edit machine running agent adding directive rouser pld granting access time restarting snmp manipulate v acm table vacm using snmpvacm command work remotely snmpvacm auth host pld grppld introduction computer network release snmpvacm auth host createaccess grppld command create entry vacmsecuritytogrouptable vacmaccesstable respectively parameter following grppld second command include usm security model authnopriv security level placeholder contextmatch Ô¨Çag using view predeÔ¨Åned command givesgrppld read access write access second denies access creation notiÔ¨Åcations trap user pld issue snmpget using pld s credential snmpget pld authnopriv rambler host user pld able change pld s password key granted usmuserauthkeychange column ofusmusertable adding appropriate oid write view user pld view maintained vacmviewtreefamilytable association view list oids Ô¨Årst step add usmuserauthkeychange column user pld s view command applied usmuserauthkeychange column object user pld write series createview statement adding series oid subtrees pldwriteview oid removed view deleteview option following command using initial master account auth snmpvacm auth host createview pldwriteview apply new view pldwriteview pld s group grppld Ô¨Årst clear previously granted access snmpvacm auth host deleteaccess grppld snmpvacm auth host createaccess grppld pldwriteview password changed rambler ignatius follows snmpusm pld authnopriv rambler host passwd rambler ignatius pld granted pld access entire usmuserauthkeychange column principle risky allows user pld write column anyuser potential approach grant user pld access pld s row usmuserauthkeychange following cumbersome oid level spell string pld ascii approach grant pld write access usmuserownauthkeychange column semantics column outlined usmusertable request snmp version introduction computer network release accepted user signed request prevent user pld attempting change s password risk usmuserauthkeychange access minimal request authenticated user pld change password user say bob bob s previous password known pld keychange object incorporate old password known password just easily changed authenticating request user bob user pld event snmpusm command doe support writing usmuserownauthkeychange command snmpusm doe support making general modiÔ¨Åcations usm entry incorrectly necessary delete exercise recall getbulk act like repeated getnext getbulk equivalent ofget happens table ask using getbulk Ô¨Årst column repetition count retrieved assume entry form col row ranging suppose exercise previous chapter want snmp table identtable hold xidnum username ypairs idnum integer username octet string index idnum deÔ¨Ånitions following time follow convention notincluding index column actual table data index snmp agent detect manager created row state undercreation crashed leaving row abandoned b snmp agent detect manager created valid row later crashed rmon hosttopn table host n agent doe work possible manager think rmon provides table rmon matrixsdtable matrix table constructed collect data single interface agent interface speciÔ¨Åed datasource additional matrix information considering interface rmon matrix group matrix provides table information matrixsdtable andmatrixdstable exercise introduction computer network release suppose want table data given destination d matrixsdtable explain row matrixsdtable need examined b suppose repeat investigation time manager previously downloaded complete list host lan using rmon host table n number host lan explain Ô¨Ånd host communicated d using n retrieval request c explain Ô¨Ånd host s sent packet d quickly using matrixdstable number s answer involve retrieval request keychange operation key change suppose manager simply transmitted xornewkey agent suppose eavesdropper discovers know bit oldkey eavesdropper learn newkey vulnerability apply mechanism key change b suppose eavesdropper later discovers newkey explain recover oldkey doe work mechanism key change used list oid preÔ¨Åxes manager need granted write permission manager able modify setting change local key nothave access column usmusertable allow modiÔ¨Åcation manager account v acm table exception option make easier suppose manager write permission usmuserownauthkeychange column usmusertable allows change manager s password manager write access v acm table explain manager modify local key manager use wireshark monitor localhost trafÔ¨Åc use snmpusm command change manager s local key doe command use usmuserauthkeychange column usmuserownauthkeychange column snmp version security intruder computer impersonating listening conversation downloading data computer security problem news daily basis chapter look just issue involved building secure network chapter focus general principle approach authentication encryption chapter address encryption limited overview divide attack category attack execute intruder s code target computer attack extract data target code injection eavesdropping interfering communication Ô¨Årst category arguably usually amount complete takeover sionally attacker s code limited privilege computer taken way said owned discus attack intrusion simplest form attack stolen guessed password offer remote login account technical form attack involve virus buffer Ô¨Çow stack buffer overÔ¨Çow heap buffer overÔ¨Çow protocol Ô¨Çaw christmas day attack software Ô¨Çaw morris worm second category intrusion involve remote code execution server application manipulated data way designer did foresee example david kernell gained access yahoo email account candidate sarah palin guessing looking answer security question account question palin s birthdate did meet spouse research kernell able guess wasilla high palin grew point mayor wasilla alaska idea answer security question site second example category andrew weev auernheimer daniel spitler charged t ipad hack ipad owner signed network service t ipad s id recorded email address owner later used view account option ipad s setting applet http request sent t server containing server return corresponding email address displayed applet user need enter password actually log http transaction performed browser curl supply email address randomly selected presented t site happened match real account user s email address returned string contain decimal digit portion identiÔ¨Åer smaller attack yielded email address account account compromised attack superÔ¨Åcially resembles guessing password success rate vastly higher guessed valid guessing password middling introduction computer network release strength order million try auernheimer s defense team described action walking open door auernheimer convicted intrusion november sentence set aside appeal april auernheimer s conviction remains controversial t site requested password usual sense site certainly released information intended designer finally category includes form eavesdropping password account obtained way attack follow usual approach prevention use encryption encryption closely related secure authentication encryption authentication addressed secure hash ssh tl encryption doe work desired intruder million record tjx corp breaking wep encryption wep encryption failure used company gaining access account credential Ô¨Åle server albert gonzalez pleaded guilty intrusion largest retail breach target hack late intrusion intrusion usually vulnerability allows attacker run executable code target classic computer virus broadly form usually network vulnerability user tricked involving form social engineering running attacker s program target computer program make home permanently form attack user receives Ô¨Åle attack slightly easier default setting window displaying Ô¨Ånal Ô¨Åle extension early virus completely networked target attacker able run small initial executable program turn download additional malware target controlled network reach intrusion limited privilege target operating operating browser computer user pld intruder take advantage Ô¨Çaw browser intruder s code run pld root administrator prevent intruder rewriting kernel small comfort Ô¨Åles encrypted held ransom server standard practice run network service minimum privilege practical defense buffer overÔ¨Çows exactly executable code surprisingly hard state scripting language usually qualify iloveyou virus began spreading window system user received Ô¨Åle vbs enticing subject line love letter extension displayed default meant Ô¨Åle opened automatically run visual basicscript iloveyou virus later attributed reonel ramones onel guzman philippine prosecuted year melissa virus spread emailed microsoft word attachment executable component word macro securityan introduction computer network release window number format effectively executable format format morris worm classic morris worm launched infant internet robert tappan morris machine infected launch attack machine lan far away worm used number technique including taking advantage implementation Ô¨Çaws stack buffer overÔ¨Çows stack buffer overÔ¨Çow worm s technique code injection worm module contained dictionary popular password used try various likely account module relied different kind implementation vulnerability broken diagnostic feature sendmail email server connect sendmail tcp port send command wiz password person shell able execute arbitrary command intent require legitimate sendmail password error sendmail s processing meant password worked christmas day attack christmas day attack isn spooÔ¨Ång used tcp protocol weakness combined common arrangement gain privileged login access computer ucsd implementation Ô¨Åxed immediately problem understood protocol change require considerable negotiation review rlogin trust arrangement meant computer conÔ¨Ågured trust request execution computer b subnet attack meant attacker m send command request appear come trusted peer b late command simple open shell connection m point spoofed connection fail harmful command executed Ô¨Åx stop using rlogin ironically isn spooÔ¨Ång attack discovered morris used morris worm note sendmail wiz attack morris worm attack did involve network delivery executable fragment shellcode stack buffer overÔ¨Çow stack buffer overÔ¨Çow classic way attacker execute short piece machine code remote machine compromising attack implementation Ô¨Çaw server application read data buffer buf length buflen Ô¨Çaw server read buflen byte data additional data written memory past end buf corrupting memory c language bound checking native array overÔ¨Çow detected time occurs early example memory layout stack grows downwards function creates new stack frame numerically lower address array indexing grows upwards buf higher address stack buffer overÔ¨Çow introduction computer network release thanbuf consequence overwriting buffer allows rewriting recent return address stack common goal attacker supply overÔ¨Çowing buffer doe thing includes shellcode small snippet machine code executed doe bad traditionally necessarily starting shell attacker invoke arbitrary mands overwrites stack return address current function exit control returned caller supplied shellcode diagram left show normal layout current stack frame buffer attacker s message read current function exit control returned address stored right show result attacker written shellcode buffer overÔ¨Çow overwritten Ô¨Åeld stack point shellcode function exit control passed code shellcode original caller shellcode shown memory return libc variant attack attacker skip shellcode instead overwrite stack return address address known library procedure libc library popular making known approach goal attacker identify library procedure current context server process attacked attacker Ô¨Ånds useful version attack overwrite stack address address place stack just return address pointer string present ronment string attacked process current function exit control branch think called parameter shell launched securityan introduction computer network release attack involve shellcode attack jpeg heap vulnerability us element doe involve injected shellcode practical problem form attack knowing memory layout target machine attacker determine exactly shellcode loaded simpler standardized version window library routine Ô¨Åxed address actual example code account computer vulnerability understandable reluctance explain actual mechanic lest attacker learn exploit Ô¨Çaw secrecy unfortunate making vulnerability magical goal presenting example simply strip away aura mystery surrounding exploit actual example modify version tcp tcp c language server read input infamous get char buf read data newline nul character array buf size tions able use get way arrange stream reading process network connection version get read arbitrary input stream fgets char buf int bufsize file stream butfgets vulnerable get read bufsize character buf possible course programmer supply value bufsize larger actual size buf drawback using get shellcode string null zero byte take subterfuge example shellcode includes string shnaaaabbbb thenand thebbbb replaced zero injected code read alternatively server read data recv int socket char buf int bufsize int flag supply incorrect large value parameter bufsize approach practical advantage allowing attacker supply buffer nul character zero byte additional embedded newline character client attacker s need come suitable shellcode create buffer containing correct place address start shellcode guessing address used easy day process started address harder precisely make kind attack difÔ¨Åcult cheat server print address startup supply client attack like depends knowing target operating target cpu architecture provide executable shellcode target memory layout target server mentation attacker know overÔ¨Çow present ala stack buffer overÔ¨Çow introduction computer network release readily guessable time vulnerability server implementation discovered reading source code long possible search overÔ¨Çow opportunity making use binary executable code shellcode presented assumes server running code linux system conÔ¨Ågured run code simpler alternative create virtual machine run server possible migrate shellcode format server server c implementation tcp server tcp shellcode work server run program server contains explicit bind handled implicitly serversocket constructor java version new connection new process handle created fork new process call function read line time client buffer pcbuf byte unfortunately server read byte intopcbuf stack overÔ¨Çow work essential function read data buffer corrupting stack return protocol modiÔ¨Åed return arriving string begin quit careful stack overÔ¨Çow doe badly corrupt local variable code fails continue running returning local variable overwritten overÔ¨Çow save socket global variablegsock setstdinout gsock standard input standard output network connection allows use notoriously blegets read standard input alternatively recv orfgets incorrect value forbufsize used setstdinout mean shell launched shellcode standard input output correctly set course make appropriate dup call shellcode increase complexity size server s standard output tcp connection print incoming string terminal stream startup server print address mbuf stack frame refer attacking client know value real server accommodating print internal address day address randomization aslr server s stack address typically easy guess connection server print distance byte start ofmbuf inmain start pcbuf buffer receives overÔ¨Çow number constant compiled exploit program doe change new variable added server s main actual address pcbuf securityan introduction computer network release address shellcode located address want overwrite stack return exploit introduce nopslide attacker doe address pcbuf exactly right linux provides protection overÔ¨Çow attack defense buffer overÔ¨Çows server disable mentioned protection address randomization defeat having server print stack address server compiled option disable stack canary stack canary execstack option disable making stack data area making stack gcc execstack oserver dutifully warned compiler linker warning isdeprecated warning isdangerous andshould notbe used word getting vulnerability work take bit effort server doe work client tcp option enabled doe handle client exit gracefully unless client sends quit shellcode shellcode matched operating cpu architecture assume linux running intel goal create shellcode launch approach taken shellcode string machine instruction completely data reference depend linker address resolution code code data intel syntax used destination operand come Ô¨Årst egmov nasm assembler support format direct call linux using interrupt using int opcode parameter architecture register eax ebx ecx andedx invoking interrupt Ô¨Årst hold code particular routine invoked hold parameter jpeg heap vulnerability make use register edi want make execve char filename char argv char envp needeax contain numeric value syscall value corresponding execve deÔ¨Åned linux us syscall value execve load mov al ali shorthand byte register eax Ô¨Årst zero eax subtracting course use mov eax expands byte want avoid including nul byte code stack buffer overÔ¨Çow introduction computer network release need ebx point string register ecx point ray pointer memory argv andedx point null word memory envp include shellcode string shellcode insert nul byte replace n zero word replace bbbb shellcode contain nul byte time read get shellcode replace aaaa address load ecx address aaaa containing address followed zero word edx address bbbb just zero word loading address string tricky architecture want calculate address relative current instruction pointer ip direct access provided ip workaround code jump shellstring near end invoke start wherestart label main code action start push address byte following start stack happens address shellstring start thepop ebx pop address stack leaf ebx want complete shellcode follows actual code jmp short shellstring start pop ebx address string ebx sub eax eax zero eax subtracting mov al nul byte n string mov ebx address string aaaa mov eax zero null word bbbb mov al execve syscall lea ecx load address aaaa lea edx load address bbbb null int kernel shell shellstring start push address string jump start db string aaaa bbbb filled run command nasm elf ld shellcode objdump shellcode creating string byte produced come following char shellcode test simple c program deÔ¨Åning including int main int argc char argv void func void shellcode func securityan introduction computer network release verify resulting shell inherited parent environment env andset command additional shellcode example exploit assemble actual attack start c implementation client add feature input string doit client sends oversized buffer containing shellcode terminated newline make get happy sends quit terminated newline force server s return transfer control code pointed Ô¨Åeld stack begin loop copylines copy local terminal s standard input network tion hopefully shell end copy network connection local terminal s standard output startup client accepts parameter representing address hex variable close start server s main stack frame server start print address simply copy starting client second parameter server hostname client code remains layout malicious oversized buffer created buildbadbuf Ô¨Årst compute guess address start vulnerable buffer pcbuf server s function address passed command line ally address mbuf server s main add known constant pcbuf value version tested author stored s calculation address server s pcbuf store shellcode start ofpcbuf arrange server jump calculated address shellcode run real life accommodating introduce nop slide precede shellcode run nop instruction jump nopslide lead right shellcode example make nopslide byte long add fudge factor calculated address fudge actual code need attack buffer large overwrites stack Ô¨Åeld small server doe incur segmentation fault overÔ¨Ålling buffer settle badbufsize plus byte Ô¨Ånal newline character comparable slightly larger value case attack buffer byte nops shellcode byte version byte worth repeated calculated address code byte newline server s get expects string stack buffer overÔ¨Çow introduction computer network release diagram like labeled particular attack memory region drawn scale address stack frame just return address bad buffer make sure contains nul byte newline character wanted longer nopslide hope room stack s Ô¨Åeld case attack buffer consist bunch repeated address guess nopslide Ô¨Ånally shellcode command doit netsploit client prompt change type l shellcode successfully started list Ô¨Åles server earlier type env andset verify shell did inherit environment normal shell note shell command need write stderr stream fail stream set includes mistyped command defense buffer overÔ¨Çows prevent sort attack basic approach make sure array bound violated similar rule use dynamically allocated memory using block freed violated language enforce automatically safe semantics guarantee program safe doe eliminate important class vulnerability c bug eliminated careful programming task notoriously basic approach applicable attack make sure server run minimum permission possible server write permission substance fact run chroot environment access bulk server s Ô¨Ålesystem disabled issue approach server process want listen port need special privilege open port traditionally process start root securityan introduction computer network release privilege socket opened downgrade privilege call setgid setuid safe principle requires careful attention man page use seteuid example allows shellcode recover original privilege linux system support assigning unprivileged process capability man capability relevant set allows process open privileged port assign capability requires privileged intervention process started stack canary underlying provide defense typically implemented compiler stack canary additional word stack near return address set random value copy word saved function call return explicitly implicitly word checked make sure stack copy agrees copy discrepancy indicates stack overwritten thegcc compiler stack canary enabled compiler option compile stack exploit exploit needed add aslr defense layout randomization aslr plest form mean time server process restarted stack different starting address example restarting oserver program Ô¨Åve time yield address hex hex digit bit entropy server did print stack address attacker succeed attacker hour worse attacker simply create attack long nopslide longer nopslide room error guessing shellcode address nopslide length bit guessing correct stack address try implementation squeeze bit entropy meaning guessing correct address increase try system aslr effective guessing stack address take prohibitively long time alsr change heap layout location library time server process restarted prevent attack return libc concrete example attacker s use library address jpeg heap vulnerability linux system aslr disabled writing value correspond partial randomization window system vista aslr support earlier version linker required developer request aslr switch making stack sophisticated idea hardware support mark page memory allocated stack meaning processor s instruction register loaded stack buffer overÔ¨Çow introduction computer network release address page branching shellcode exception immediately occur immediately prevents attack place shellcode stack libc attack return libc possible world amd introduced nx bit execute architecture cpu architecture began appearing intel followed xd execute disabled bit essentially cpu provide hardware support support cpu generally requires physical address extension mode nx idea applies memory page just stack page cause problem application compilation code page written immediately executed result common support disabling software linux system compiler option execstack disables protection used server window option requesting protection stack prevents attack described injecting shellcode heap potentially possible openbsd operating introduced write execute abbreviated use xor operator memory page writable executable strong protection virtually attack vulnerable attack return libc chapter potential attack strategy system page heap buffer overÔ¨Çow stack overÔ¨Çows heap overÔ¨Çows rely software Ô¨Çaw allows data written conÔ¨Ånes designated buffer buffer heap subject overÔ¨Çow prospect buffer stack important difference buffer heap clear proximity obvious return address despite difference heap overÔ¨Çows used enable attack simplest heap overÔ¨Çow advantage fact heap page contain executable code representing library page page overÔ¨Çowable buffer pointed byp following page memory pointed qcontains code attacker overÔ¨Çow Ô¨Åll qpage long nopslide shellcode point code pointed q shellcode executed instead drawback attack layout heap page like seldom known hand fact heap page legitimately contain executable code mean uniformly marking heap commonly stack option linux heap vulnerability actual linux heap vulnerability following based version glibc library vulnerable server code simply following char p malloc char q malloc get p read attacker input continues page securityan introduction computer network release continued previous page free q block q islast allocated andfirst freed free p example get p result overÔ¨Çow block p block q writing just data block q block header maintained malloc guarantee general block qwill immediately follow block pin memory practice usually happens unless great deal previous activity vulnerability relies feature malloc block allocated user free free block kept doubly linked list assume data portion block power separate list block size adjacent block free malloc coalesces move joined block list size block preÔ¨Åxed Ô¨Åeld containing size assume actual size including header alignment size bit size zero bit used Ô¨Çag indicate block allocated free crucially bit used indicate previous block allocated free addition Ô¨Åeld Ô¨Årst word free block forward backward pointer linking block doubly linked list Ô¨Åeld replicated word block psize status user datapsize status forward pointer backward pointer copy size allocated block free block forward backward pointer link block list strategy attacker brief overwrite pblock way block qi freed malloc think block pi free attempt coalesce process unlinking block butpwas fact free forward andbackward pointer manipulated malloc unlinking process fact provided attacker shall allows writing word memory location location hold return address updated point shellcode block p compromised normal operation free q arbitrary block q includes following block size size Ô¨Çags address heap buffer overÔ¨Çow introduction computer network release check following block address free merge interested case check Ô¨Çags preceding block free load size address address copy size Ô¨Åeld diagram calculate pointer previous block p q unlink block p coalesced block different list speciÔ¨Åc block q attacker overwrite Ô¨Ånal size Ô¨Åeld block p overwrite Ô¨Çag address indicating block pi free attacker cannotoverwrite header block pthat properly indicate block pwas use free code did suppose attacker overwritten block pto include following setting Ô¨Çag header block qto true setting Ô¨Ånal size Ô¨Åeld block pto desired value badsize placing value free believe previous block s forward pointer located placing value free believe previous block s backward pointer located thefree q operation executed calculate previous block address attempt unlink false block normal unlink backward forward forward forward backward backward ala unlinking result pointer increment second line type bechar orvoid point jig pretty location return address stack location shellcode shellcode executed current stack frame return extending working example requires fair bit attention detail important data use overwrite block pgenerally contain nul byte small positive number badsize nul byte workaround badsize small negative number meaning false pointer actually come afterqin memory jpeg heap vulnerability microsoft released vulnerability notice patch relating heap buffer overÔ¨Çow inwindows xp microsoft earlier provided standard library displaying jpeg image known securityan introduction computer network release gdi graphic device interface specially formed jpeg image opened gdi library overÔ¨Çow heap occur launch shellcode browser unaffected subroutine difÔ¨Åcult convince user open jpeg Ô¨Åle supplied email attachment html download link problem occurred processing jpeg comment section normally invisible user section begin Ô¨Çag followed length Ô¨Åeld network byte order include byte total length loading subtracted length calculated length actual data length Ô¨Åeld contained example calculated length interpreted unsigned value library thinking space blithely attempt write byte comment heap page overÔ¨Çowing byte fact come image portion jpeg Ô¨Åle attacker place nopslide shellcode shall carefully constructed value linux heap described linux heap vulnerability block winxp heap formed list forward backward pointer known flink andblink allocator attempt unlink block blink forward flink flink backward blink Ô¨Årst simpliÔ¨Åes blink flink offset Ô¨Åeld forward action allows attacker write word memory address blink desired value operation eventually run heap result segmentation fault point heap manager attempt allocate block free list overwritten attempt instead executes blink flink attacker s conceptual goal flink hold instruction branch shellcode blink hold address instruction soon executed equivalently flink hold address shellcode blink represent location soon loaded used target branch catch attacker doesn t exactly know heap variant libc approach described return libc necessary strategy described remainder section described possible approach window xp location hold pointer entry point undeÔ¨Åned exception filter handler program exception occurs window creates structure branch address stored address refer uef attack overwrite setting blink uef undeÔ¨Åned exception filter triggered suitable subsequent program crash exception occurs typically second operation flink backward blink branch address loaded uef structure created heap overwriting jpeg comment buffer address structure stored register edi turn scattered standard library half dozen instruction known address form dword subroutine address edi p instruction intended context register edi set immediately preceding instruction point appropriate attacker s context edi point structure byte past edi attacker s overÔ¨Çowed jpeg buffer safely past structure overwritten heap buffer overÔ¨Çow introduction computer network release instruction happens address address value attacker flink exception come control branch address stored uef address point dword control branch time buffer point processor land nopslide end executing shellcode short jump instruction needed depending layout attack depends fact speciÔ¨Åc instruction dword speciÔ¨Åc Ô¨Åxed address layout randomization aslr prevented introduced microsoft window vista scripting xss simplest form scripting involves attacker posting malicious javascript website allows content javascript executed target computer victim visit website attacker leave comment website following form agree withthe previous poster completely script unless website question doe careful html Ô¨Åltering user upload site visitor view comment script executed browser script email information target user attacker attempt exploit browser vulnerability target order completely script enclosing tag appear victim actually see screen code block usually include javascript function deÔ¨Ånitions function call general attacker achieve effect victim visit attacker s website popularity apparent safety website usually important practice common attack involve obtaining private information victim s account website sql injection sql query language database attack attacker place carefully chosen sql fragment website form way get executed website typically construct sql query based form data attacker s goal data treated additional sql supposed prevented careful quoting quoting end quite careful successful attacker managed run sql code server give unintended privilege information example suppose form Ô¨Åelds username andpassword run following return set record xusername password ypair user considered authenticated select password p securityan introduction computer network release string username andpassword taken web form spliced note enclosed single quotation mark supplied server attacker s goal supply value nonempty set record returned authenticating attacker following value successful quotation mark username supplied attacker username y password foo query built server select password p y note mark Ô¨Årst sixth seventh eighth came server second Ô¨Åfth came attacker appears sql disjunction clause y middle clause true fore login succeeds attack work attacker pretty good idea query server build user input thing working attacker s favor Ô¨Årst query relatively standard second attacker discover great deal error message returned malformed entry case error message reveal table name used network intrusion detection idea network intrusion detection monitor s network sign attack newer network system nids attempt halt attack importance simple monitoring reporting underestimated attack password guessing buffer overÔ¨Çows presence aslr multiple thousand million try succeed nids fair warning system hids run monitor speciÔ¨Åc host consider nids detect intrusion based trafÔ¨Åc anomaly signature example ping internet control message protocol acceptable large number modest number addressed nonexistent host cause concern signature attack jpeg heap vulnerability identiÔ¨Åed hex string attack exploit using shellcode signature tends ineffective shellcode easy vary nopslide replaced wide variety instruction just happen present context sub eax eax common signature used nidss overÔ¨Çow attack simply presence overly long string rate relatively low general coming sufÔ¨Åciently speciÔ¨Åc signature nontrivial attack keep changing relatively trivial way avoid detection said polymorphic network intrusion detection introduction computer network release evasion nids reassemble tcp stream sequence udp packet order match signature raise possibility evasion attacker arrange packet nids reassembles way target way possibility evasion explored great simple way overlapping tcp segment happens packet contains byte tcp connection help second packet contains byte armful h e l p r m f u l reassembled helpful harmful tcp speciÔ¨Åcation doe say ferred different operating system routinely reassemble different way nids reassembles packet way target attack go undetected attack spread multiple packet way reassembly occur increasing probability nids target differ possibility overlapping segment header irregularity ip tcp header cause rejected target nids packet h e l p h r m f u l system normally prefer data Ô¨Årst segment received reassemble helpful Ô¨Årst packet rejected target header Ô¨Çaw target receives harmful Ô¨Çaw recognized nids nids doe detect problem similar problem occurs fragment reassembly fragment point intrinsically suspicious approach preventing evasion conÔ¨Ågure nids information actual target doe reassembly nids match safer approach nids reassemble overlapping packet forward result potential target cryptographic goal remainder chapter turn use cryptographic technique networking protect packet content different technique address different issue classic goal following message conÔ¨Ådentiality eavesdropper able read content message integrity recipient able verify message received correctly face determined adversary way sender authentication recipient able verify identity sender brieÔ¨Çy conÔ¨Ådentiality addressed encryption encryption key encryption integrity addressed secure hash secure hash authentication addressed secure hash signature securityan introduction computer network release encryption doe ensure message integrity stream cipher example using message transfer mallory encrypted xoring corresponding number byte keystream encryption decrypted xoring attacker xors byte bold byte xor message transfer mallory attacker xors byte encrypted message xor result decrypt transfer similarly integrity doe automatically ensure authentication party negotiate temporary key guarantee message integrity establishing s identity necessary thentication example alice connects website using site purchased ssl certiÔ¨Åcate tl certiÔ¨Åcate authority alice doe trust site s cate authority certiÔ¨Åcate authority alice message integrity session authentication list add resistance message replay consider message following alice authorize payment bob account authentication cookie alice doe want Ô¨Årst message executed bank doing violate rule owner second message happy replay multiple time want able straightforward way prevent replay attack introduce message timestamp count desire resistance attack attack generally related mentation failure attack ssl user end negotiating early version protocol secure encryption mechanism arguably type poodle sidebar ssh tl finally see message goal technical opposed legal realm hope prove alice signed message best prove alice s keywas used sign message point purpose quite similar authentication Ô¨Ånal example secure hash authentication alice bob cryptographer usually use alice bob instead b name party sending encrypted message tradition date party include eve eavesdropper mallory active attacker launcher attack article name aodh bea introduced speciÔ¨Åcally cryptography irish aodh pronounced roughly eh secure hash tell Ô¨Åle changed way create record Ô¨Åle s checksum using sake argument internet checksum error detection potential Ô¨Åle corruption random fail detect modiÔ¨Åed Ô¨Åle probability secure hash introduction computer network release ala modiÔ¨Åcation intentional trivial modify Ô¨Åle checksum original original Ô¨Åle checksum c initial modiÔ¨Åcation checksum c create Ô¨Åle checksum c append quantity c subtraction using need modify slightly number byte modiÔ¨Åed Ô¨Åle odd crc family checksum easily tricked goal cryptographically secure hash provide hash function checksum hash based simple sum share insecurity trick impossible speciÔ¨Åcally want hash function knowing hash value shed practical light message given hash value feasible way Ô¨Ånd message yielding hash slightly simpler problem second Ô¨Ånd message hash called collision problem collision problem hash function solved high time abandon potentially longer secure single bit input changed output usually entirely different hash popular rfc based developed nsa originally supported tographic fundamental collision message hashing value reported collision message meaningful reported collision attack mean longer trusted security purpose hash function currently believed secure include family includes variant ranging bit bit known individually common framework constructing function construction used initial state speciÔ¨Åed applied set transformation h x y block x additional bit y return updated block transformation usually similar round function block cipher block cipher typical example encryption parameter y used hold key substring key function parameter y hold substring input message set transformation applied repeatedly process iterates entire input message result hash Ô¨Ånal state hash function input processed block byte block divided sixteen word block input result iteration set sixteen h applied time input word used key parameter h ifour time total input length multiple bit padded padding includes length attribute message differing padding hash value framework general believed secure used family doe suffer called vulnerability h hash m value h simply Ô¨Ånal state mechanism processed message attacker knowing h initialize algorithm h continue Ô¨Ånd hash hash m arbitrary message end m knowing m original message m padded message m p attacker Ô¨Ånd hash m p vulnerability considered using function message authentication securityan introduction computer network release family hash function doe use construction believed vulnerable attack secure hash authentication secure hash function used implement message authentication suppose sender receiver share secret key k random string length comparable output hash principle sender append message m value h hash k m receiver knowing k recalculate value verify h appended message correct theory knew k calculate particular hash k m implementation undermined vulnerability vious section hash function exhibit vulnerability sender transmits message m hash k m attacker modify message m hash k m knowing k problem defeated reversing order using hash m k introduces potential collision vulnerability hash function vulnerability message m m value m k m taking vulnerability account rfc deÔ¨Ånes hash message authentication code hmac follows used function vulnerability length come typical length function increased necessary family length candidate increase shared key k extended byte padding zero constant string ipad formed repeating octet time constant string opad formed repeating time set k xor ipad set k xor opad finally hmac value hmac hash hash mesg value critical xor intent reasonable number hmac algorithm somewhat surprisingly believed secure underlying hash function vulnerable kind collision attack rfc said hash function vulnerable collision attack vulnerability phased negotiating key k signiÔ¨Åcant obstacle just cipher using arranged key encryption alice bob meet person negotiate key k secure hash introduction computer network release alice use hmac authentication bob long k compromised alice receives message signed k know come bob k negotiated basis deÔ¨Ånitive personal authentication party akin alice claiming bob selecting encryption key using mechanism exchange key selection secure doe require alice bob prior knowledge hmac setting alice conÔ¨Ådent message sent bob negotiated key party assuming leaked key k true alice sure bob real bob idea bob signature guarantee message integrity serf authentication sender entity sent previous message series finally alice receives message bob signed hmac using secret key k secure hash authentication alice trust signature prove k used sign message divulging prove bob party know signature mechanism provides cation password hash site generally doe store user password directly instead hash password h p stored cryptographic hash function work long password Ô¨Åle compromised function execute quickly design attacker succeeds obtaining password Ô¨Åle usually extract password simply calculating hash possible password english word consisting word digit password usually considered strong calculation h p value p quite feasible hash considered far checking password second quite feasible mean password checked minute use gpu increase speed special hash developed address one scrypt internet draft bcrypt newer entrant old stalwart goal develop hash take ideally better second calculate easily sped large precomputed table typically like thousand million time slower conventional hash function like family hash function equivalent making password longer random bit theoretical analysis effectiveness scrypt context rfc section proposal thousandfold slower good password table incorporate salt ornonce random string s chosen appended password hashing password record stored pair x h p s mean cracking password user expose second user chosen exactly password long second user different salt salting doe change scenario outlined securityan introduction computer network release chap secure hash used provide secure login authentication presence eavesdropping speciÔ¨Åc implementation include chap authentication col rfc microsoft s version rfc version rfc general idea server sends random string challenge client creates response consisting secure hash challenge string concatenated user s password possibly information assuming secure hash actually secure possession user password created response token eavesdropper Ô¨Ågure password response protocol quite secure term verifying server client know word chap strategy fundamental vulnerability server store plaintext password secure hash previous section attacker make server s password Ô¨Åle password cracking needed reason newer authentication protocol create encrypted channel Ô¨Årst egusing tl tl use secure channel exchange credential involve transmission plaintext password clearly allows server store hashed password example show ispossible authenticate having server store plaintext password having plaintext password transmitted scram scram salted authentication mechanism rfc authentication protocol following feature client password transmitted clear server doe store plaintext client password server s hashed credential compromised attacker authenticate outline version protocol password salting removed clarity exchange greatly simpliÔ¨Åed clientkey hashed version password server store secure hash clientkey called storedkey storedkey hash clientkey exchange begin server sending random nonce string client client calculates theclientsignature follows clientsignature hash storedkey nonce attacker eavesdropped exchange replicate clientsignature server compute client sends following server clientkey xor clientsignature server calculate clientsignature extract clientkey verify h clientkey storedkey attacker obtained storedkey server generate clientsignature generate clientkey secure hash introduction computer network release attacker exÔ¨Åltrated storedkey server eavesdropped server exchange able generate clientsignature extract clientkey attacker authenticate later time using clientkey reason secure tunnel needed authentication given presence tunnel scram approach appears offer relatively modest security improvement sending password plaintext note scram server doe password client mistakenly connects wrong server password revealed simultaneous authentication equal mutual form password tication encryption secure hash provide authentication prevent eavesdropping need encryption keyencryption encryption glamorous workhorse encryption world cipher orsymmetric cipher party possession key k used encryption decryption cipher quite fast encryption generally slower order nitude result party shared key wish communicate used encryption exchange key cipher used actual message encryption typical key length cipher believed secure range bit bit key cipher known attack faster brute force quite large number cipher block cipher encrypting data unit block typically byte long stream cipher generate pseudorandom keystream byte bit message encrypted typically xoring corresponding byte keystream session key message key used encrypt information potential eavesdropper launch codebreaking attack alice bob shared secret key k quite common encrypt bulk correspondence temporary session key used time period range minute day secret key k used exchange new session key forestall attack trust man middle signing important message secure hash authentication merkle key exchange ref used k reserved message signing session key entirely different key chosen randomly key discovered attacker learns secret key time session key k additional information initialization vector cipher mode transmitted clear session key concatenation k initialization vector xor approach mean eavesdropper Ô¨Ågures session key secret key k use session key make codebreaking attempt difÔ¨Åcult securityan introduction computer network release forward secrecy consider reverse problem alice bob session key private secret key compromised block cipher mentioned block cipher encrypts data block time typically key length longer block size typical block cipher proceeds iterated application sequence round function updating block using substring key auxiliary input start block plaintext p apply round function turn result ciphertext block c e p k e k p process reversed p d c k d k c common framework feistel network arrangement block divided word sized machine architecture block typically divided word l h low high typical round function following form k key f x k take word x key k return new word xl hy√Ω√±x h l xor f h k y visually diagrammed lh xorfk round scramble half block half get scrambled round time operation called reason total number round typically art designing block cipher come round function result overall fast execution introducing vulnerability round slower internal function f different round look designated subset bit key note operation invertible decrypted regardless f given receiver compute f h k xoring l xor f h k recover remains true case xor operation replaced ordinary addition crypto law cipher mentioned member daniel bernstein s snufÔ¨Çe family cipher based encryption introduction computer network release function previous century government banned export cipher function point banned export publication bernstein s paper sued court appeal ninth circuit favor decision appellate decision author aware contains footnote sample c code lisp simple f return result xoring h subset bit usually little simple ordinary addition h subset k work interaction addition xoring introduces considerable diffusion language cryptography operation used f h k include boolean operation multiplication introduces considerable computationally expensive cipher us xor addition speed uncommon round function incorporate bit rotation l h result place left larger blocksize desired say bit want avail efÔ¨Åciency operation block divided xa b c dy round function xa b c dy√Ω√±x b c d xor f b c d k y mentioned function use round function use successive chunk message hashed place key algorithm block transformed sum fragment m constant k g b c d boolean combination b c alternative framework block cipher use permutation network Ô¨Årst block cipher widespread use federally sanctioned data encryption standard de commonly pronounced dez developed ibm selected national bureau standard nb standard alteration recommended national security agency nsa nsa s recommendation key size bit sufÔ¨Åcient era government concerned spread strong encryption year people assumed nsa intentionally introduced weakness de facilitate government eavesdropping year vulnerability discovered longer likely suspicion nsa s resource launch attack de greater credence academic team launched successful attack de following year tronic frontier foundation eff built hardware de cracker break de day attempt improve security de introduced did ofÔ¨Åcial standard late s form proposed involves application de key encrypting plaintext p ciphertext c c p middle deciphering option d algorithm reduces de reduces exposure particular vulnerability known meet middle tion man middle estimated distinct key strength roughly equivalent bit paper us attack securityan introduction computer network release straightforward encryption c e p effective keystrength bit better single de sufÔ¨Åcient quantity plaintext corresponding ciphertext known concern security de continued mount national institute standard technology nist new nb began search replacement result advanced encryption standard aes ofÔ¨Åcially approved aes work key length bit algorithm described based rijndael family cipher rijndael combination author name earlier cipher include idea international data encryption algorithm described andblowÔ¨Åsh described use key idea algorithm patented blowÔ¨Åsh intentionally patented successor blowÔ¨Åsh twoÔ¨Åsh cipher mode simplest encryption mode block cipher encrypt input block independently piis ith plaintext block ith ciphertext block c ii e p k known electronic codebook orecb mode ecb vulnerable attack suppose attacker know message lowing form vertical line block boundary bank transfer mallory attacker know ciphertext position rewrite message inject new message attacker combine Ô¨Årst block block create different message knowing key http remarkable example failure ecb fail effectively conceal encrypted image result ecb seldom used common alternative cipher block chaining cbc mode mode plaintext block xored previous ciphertext block encrypting e k c p decrypt use d k c xor c stop mean message begin identical plaintext block encrypted message begin identical block prevent Ô¨Årst ciphertext block c random string known initialization vector iv plaintext taken start block p iv sent clear contains private information cbc work encrypting reliable stream data delivered tcp cbc difÔ¨Åcult packet lost occur udp transport cipher block lost say c decrypt c need xor lost block Ô¨Ånal mix decrypt c subsequent cipher block c istarts packet packet effectively lost nondelivery packet lead effective loss exercise encryption introduction computer network release stream cipher conceptually stream cipher encodes byte time cipher generates pseudorandom keystream k ii ith byte keystream ith plaintext byte p ii encrypted c pixor k stream cipher viewed special form pseudorandom number generator prng prngs used numeric method simulation seldom secure cryptography simple xoring plaintext keystream secure keystream fact truly random cipher unbreakable attacker possible plaintexts equally likely truly random keystream mean entire keystream shared ahead time portion reused cipher known pad stream cipher provide authenticity attacker xor encrypted message change example message known transfer mallory attacker xor byte xor changing character attacker doe encrypted stream decrypted plaintext stream retains change appending authentication code hmac secure hash authentication prevents stream cipher theory suited encryption data sent single byte time data telnet session ssh protocol ssh generally us block cipher send single byte pad block random data stream cipher quite widely used developed ron rivest rsa security formally published code leaked internal detail widely available unofÔ¨Åcial implementation called arcfour alleged designed fast implementation software end operation byte generates keystream pseudorandom byte xored corresponding text byte keystream completely independent plaintext key length range byte unofÔ¨Åcial protocol contains explicit mechanism incorporating initialization vector iv essential stream cipher identical keystream generated time simple approach create session key concatenating iv secret key alternatively safely iv key xored basis wep encryption wep encryption failure wep s requirement iv precede key Ô¨Çaw did affect application newer attack suggested phased internally implementation maintains following state variable array s representing permutation √±s byte integer index s j securityan introduction computer network release s guaranteed represent permutation ieis guaranteed map initialized identity update transposition involving swapping s s j initially set s introduce transposition known algorithm following keylength length key key byte j j s key mod keylength swap s ands j wep encryption failure transposition apparently initialization iandjare reset keystream byte needed following executed whereiandjretain value call mod j j s mod swap s ands j return s s j mod Ô¨Årst byte returned s s s s stream cipher possible create stream cipher block cipher Ô¨Årst technique consider counter mode orctr mode sender receiver agree initial block b similar initialization vector Ô¨Årst block keystream k simply encrypted block e b k ith keystream block k e k result treating b long number performing ordinary arithmetic going typically change bit encryption signiÔ¨Åcant vulnerability based form counter mode widely believed secure underlying block cipher note e different computed parallel cbc encryption comparison parallelized similarly cipher block j arrives e need computed related technique generate keystream starting secret key k taking secure hash successive concatenation k k drawback approach function developed use mind unforeseen vulnerability exist stream cipher general face problem underlying transport unreliable block lost resynchronization lost packet trivial packet contains block number Ô¨Årst cipher block packet arrangement sufÔ¨Åcient include packet number receiver easily compute e k decrypt packet technique used encryption used individual packet course quently lost packet contains packet number enables decryption absence previous packet packet number help eavesdropper absence loss determined simply keeping track packet count encryption introduction computer network release keystream calculated counter mode completely independent plaintext case cipher feedback mode cfb initialize c initialization vector deÔ¨Åne keystream block k ifor follows e k usual c p ixor k ifor e k k evolution keystream depends earlier plaintext cipher block lost receiver face resynchronization problem encryption authentication ciphertext modiÔ¨Åed transit decryption algorithm happily decrypt gibberish encryption provides implicit validity check worse possible attacker modify ciphertext produce meaningful intentional change resultant plaintext example appear stream cipher cipher mode cbc block cipher exercise common practice include hmac authentication signature secure hash authentication encrypted message use hmac simple checksum ensures attacker modify message appear valid hmac identify sender positively digital signature rsa digital signature doe positively identify sender entity receiver negotiated key needed appending hmac signature doe prevent garbled message attack absence signature allow decryption message particularly attacker create multiple ciphertexts Ô¨Ånd one recipient able decrypt successfully example option combining encryption hmac consistency literature replace hmac general mac message authentication code calculate mac signature plaintext append encrypt calculate mac signature plaintext encrypt message append mac encrypt plaintext calculate mac ciphertext append mac ciphertext analyzed proven general satisÔ¨Åes stronger cryptographic property property hold special case mean decryption attempted forged spoofed message wep encryption failure wep privacy mechanism Ô¨Årst encryption option introduced security used encryption secret key appended initialization vector necessity sent clear session key byte shorter key common securityan introduction computer network release inherently wrong strategy designer wep design choice retrospect infelicitous secret key appended iv say xored iv byte long new keystream new iv used packet choice mistake justiÔ¨Åcation choice lost packet common represent gap received stream receiver trouble Ô¨Åguring size gap decrypt later arrival contributing issue Ô¨Årst byte plaintext header byte packet essentially known Ô¨Årst byte generally logical link control header contains value ethernet type Ô¨Åeld access point ip packet share value looking Ô¨Årst byte encrypted packet attacker know Ô¨Årst byte keystream theoretical wep vulnerability published proved real world let k denote key k k k representing initialization vector k representing secret key attacker monitor airwave iv particular form collected attacker make excellent guess k slightly different group iv collected allowing guess k byte secret key fail sequentially attack requires modest time key byte discovered total key length doe add security versus key iv byte time needed collect packet containing necessary special iv value modest outline attack Ô¨Årst secret byte k iv s looking form xy byte called weak iv iv form careful analysis omit increase usable fraction iv substantially iv useful need algorithm start example Ô¨Årst byte key k iv recall array s initialized s represents s s point j run following loop introducing transposition s iteration j j s k mod keylength swap s ands j Ô¨Årst value j isk Ô¨Årst transposition s follows swapped value bold encryption introduction computer network release iteration ii andjis swap s ii andjis general iv xy jwould point processed iv iteration involves Ô¨Årst secret byte andjbecomes k recall Ô¨Årst byte returned keystream s s s s point be value iv attacker calculate repeating process k iv xy noted step step x y value Ô¨Årst byte keystream using s point k y x assuming x s ands changed step ifnone ofs s ands changed remaining iteration value predict iteration Ô¨Årst byte actual keystream treating future selection valuejas random probability iteration doe notselectjin set leaf value probability remaining iteration change value s success rate terribly impressive face time identify k correctly time incorrect value calculate k uniformly randomly distributed range guess expect correct guess spread likely guess value look value guessed securityan introduction computer network release likely true value k increasing number xyivs increase certainty sake completeness iteration ii respectively ji respectively corresponding content s know k step Ô¨Ånd k search trafÔ¨Åc iv form xy general strategy work attack originally described requires average weak iv secret key byte weak iv turn key byte requires different iv iv chance key byte weak iv guess key requires million packet quite bit better number packet needed average point attack entirely practical vulnerability used attack tjx corp mentioned opening section exchange party agree secret key k meet expensive possible like able encrypt example online shopping transaction occur spur moment difÔ¨Åe hellman merkle difÔ¨Åe hellman s paper appeared reference merkle s paper submitted hellman suggested going name called key exchange s actually based concept merkle algorithm apparently discovered malcolm williamson gchq williamson s work classiÔ¨Åed approach use encryption came year later merkle approach allows private key exchange public key goal alice bob exchange information public network end alice bob determined common key eavesdropper determine extraordinary computational effort exchange introduction computer network release warmup begin simple example alice bob choose number say alice chooses bob chooses alice sends bob value bob sends alice value b alice computes bob computes use arithmetic arrived exact value catch intruder calculator recover b factoring make arithmetic little complicated extremely difÔ¨Åcult actual protocol alice bob agree publicly large prime p typically digit small value g discussed alice chooses p sends bob value gamod similarly bob chooses b p sends alice value b gbmod alice bob compute bamod p abmod p equal shared secret key derived question eavesdropper know b g compute crete logarithm problem sense log g believed computationally intractable provided order g smallest k modulo p large key exchange g primitive root modulo p meaning order largest possible value naive attempt compute try gifor p Ô¨Ånds match slow practical work involved Ô¨Ånding suitable primitive root g given p public usually section traditionally reusing p g regarded safe fact popular p g pair various length p published rfc andrfc widely deployed p g reuse care particular p large vulnerable logjam attack described Ô¨Åxed prime p turn relatively fast computation Ô¨Ånding ga modulo p possible attacker able large table prime average time table constructed second time calculation table took compressed little week highly parallel hardware comparison author able factor rsa key factoring rsa key author conjecture nsa built table commonly used prime fewer computational resource logjam attack includes strategy forcing common server implementation downgrade use bit prime using tl implementation vulnerability cfthe poodle attack Ô¨Årst sidebar ssh tl exchange vulnerable attack discussed greater trust man middle mallory intercept alice s gaand sends bob ga similarly intercept bob s gband replaces gb link negotiate key link negotiate ga mallory remains middle intercepting decryping forwarding message alice bob usual Ô¨Åx alice bob sign gaand gb forward secrecy securityan introduction computer network release fast arithmetic important note basic arithmetic operation egcalculating gamod p polynomial time respect number binary digit p called completely obvious naive approach multipying g time take o p step exponential respect trick use repeated squaring compute note binary simple implementation appears rsa key example worth noting Ô¨Ånding large prime obviously polynomial number digit use fast probabilistic primality testing note prime number theorem guarantee number candidate test Ô¨Ånd prime near given number n o log n finally general fast algorithm Ô¨Ånding primitive root g modulo p number gk mod p smaller straightforward approach involves factoring general factoring large number believed quite hard Ô¨Ånding primitive root special prime example prime p form p second prime case g p generator mod p mod special prime straightforward Ô¨Ånd usually searching Ô¨Årst prime q checking prime process considered slow performed demand interactive exchange instead p g calculated advance simultaneous authentication equal simultaneous authentication equal protocol sae approach mutual password cation password veriÔ¨Åes know password note exchange password achieve compared handshake used handshake fact standard sae partly replacing handshake sae protocol introduced later variant known dragonÔ¨Çy described rfc version used deÔ¨Åned ieee standard essentially protocol later version including various technical cryptographic reÔ¨Ånements secondary outcome sae mutual authentication generates shared secret used encryption key sense sae act protocol cf exchange fact part sae strongly resemble key change sae protocol presented using arithmetic modulo large prime number elliptic curve sidebar rsa used alice bob initially know password likely string agrees large prime number agrees number g known generator order g modulo p smallest k modulo p large purpose primitive root modulo p sufÔ¨Åcient rfc requires order g modulo p large prime divisor q prime q g square primitive root modulo requirement q prime used analysis exchange introduction computer network release initially determines password numeric value pw start hash password modulo p create seed value pw calculated seed ensures pwqmod p authentication start choosing random value rand andmask value alice s value randa andmaska likewise bob computes following scal rand mod q elem p name reÔ¨Çect fact scal scalar value elem element group generated g arithmetic distinction purely convention negative exponent second formula refers multiplicative inverse mod p unique modulo p number x x p let alice s scal andelem denoted scala andelema bob s scalb andelemb Ô¨Årst step protocol alice bob exchange scal andelem value way view s value rand represents s contribution key value hidden masked mask computes secret k follows alice computes k randamod p bob computes k randbmod p value k fact equal scal mod q Ô¨Ånd n scal ordinary integer arithmetic start alice s value k k randa pw randa pwrandb randa pwqmod p value alice bob comparison key change note alice bob arrive shared secret second Ô¨Ånal step protocol involves exchange veriÔ¨Åcation token veriÔ¨Åcation step alice sends bob value like following hash suitable function hash k elema scala elemb scalb bob sends similar alice bob veriÔ¨Åed knew password alice did really know pw used incorrect value instead different k bob know token exchanged importantly attacker eavesdrops exchange obtains use known ofÔ¨Çine dictionary attack sae resistant eavesdropping say handshake used second sae step protected function Ô¨Årst step knowing scal andelem convey pw large difÔ¨Åculty solving discrete logarithm problem securityan introduction computer network release sae protocol doe require alice bob copy password cleartext copy password hash unavoidable given bob alice authenticate exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise modify program exploit nopslide byte long nopslide shellcode overwritten return address memory disable aslr linux writing appropriate value netsploit attack work having attacked server print stack address allowed make test run server print address set possible reassembly rule rule appear recall value position j received value acknowleged released application earlier hole segment subject reassembly accept Ô¨Årst value received position accept value received position value released application bsd new segment discard position segment position supplied earlier packet left edge equal new packet value remaining position replace previously received value linux previous rule discard position supplied earlier packet left edge strictly smaller new packet following set packet arrival reassembled packet value column position reassembled packet begin daa ebb respectively b b b b b b b c c c c d b b b b b b c c c c c c d d d e suppose network hop attacker target hop router outline strategy tweaking ttl Ô¨Åeld nids receives tcp stream helpful target receives harmful segment disjoint cover exactly range byte assume target accepts Ô¨Årst segment given range byte exercise introduction computer network release suppose alice encrypts block using cbc mode cipher mode tion vector encrypt decrypt operation e p c d c e xor e xor e xor suppose mallory intercept transit replaces xor m transmitted normally bob receives bob attempt decrypt decrypts normally decrypts gibberish decrypts xor used attack Ô¨Çip speciÔ¨Åc bit byte case earlier gibberish doe matter suppose alice us stream cipher stream cipher block keystream ki ci ki xor pi alice sends previous exercise mallory replaces xor plaintext block bob deciphers p q prime p g primitive root mod p g exercise requires familiarity modular arithmetic primitive root suppose short message m ega bank pin number alice want send message m bob revealing m immediately used later verify alice knew m time m sent later veriÔ¨Åcation alice reveal m suppose alice simply sends m hash m explain bob quickly recover b alice construct m using function avoiding problem hint later veriÔ¨Åcation alice supply additional information bob example wep encryption failure suppose iv Ô¨Årst byte key Ô¨Årst keystream byte s s s s encryption encryption fast efÔ¨Åcient secure temporary key negotiated algorithm exchange authenticate alice sure negotiated key bob nsa signature secure hash authentication depend key doe authenticate new correspondent alternatively suppose alice want send secure messge bob circumstance prevent negotiation key apply alice wanted example send encrypted email bob alice encrypt message answer issue public encryption communicating entity publish public public private keypair explore encryption chapter encryption party public encryption key k eand private decryption key k alice publish k eto world making feasible eavesdropper determine k bob alice s k e encrypt message send possession alice s k d read fundamental idea encryption knowledge k eshould offer meaningful information k rsa encryption outlined technique arguably rsa algorithm rsa algorithm discovered clifford cock gchq classiÔ¨Åed rsa based idea arithmetic operation large number n time polynomial number bit n factoring large number n requires time exponential number bit construct rsa key Ô¨Årst Ô¨Ånds large prime p q binary digit prime chosen random choosing random n s right range testing primality success let n p follows fermat s little theorem integer m m mod n sufÔ¨Åces m mod p m mod q Ô¨Ånds positive integer e d e mod given e relatively prime possible Ô¨Ånd d using extended euclidean algorithm simple python implementation appears rsa key example claim previous paragraph know m mod m message length n integer encrypt c memod decrypt c recover m calculating cdmod n mod n public key pair xn ey private key introduction computer network release cryptography concern rsa faster factoring algorithm someday make encryption useless newer alternative use elliptic curve example set solution modulo large prime p equation ax set natural nonobvious product operation completely unrelated multiplication arithmetic Ô¨Ånding n given b using product operation appears quite difÔ¨Åcult cryptographic protocol based elliptic curve proposed wikipedia fast arithmetic operation mial time respect p theory security rsa know public key way Ô¨Ånd d practice factor factoring hard problem long history faster way factor try candidate n believed require general time respect factoring rsa key rsa encryption usually thousand time slower comparably secure cipher rsa need used encrypt secret key cipher key actually protects document reason message encrypted multiple recipient usually larger encrypted additional space needed additional recipient just encrypted key cipher similarly purpose alice doesn t encrypt entire message private key sufÔ¨Åcient faster encrypt secure hash message alice bob want negotiate session key using encryption sufÔ¨Åcient alice know bob s public key alice doe need public key alice choose session key encrypt bob s public key send bob look actual calculation rsa key encrypted message rsa key example rsa digital signature rsa used strong digital signature role encryption decryption key symmetric reversed suppose alice s public key pairxn eyand private key exponent alice want sign message m bob simply encrypts using exponent d private key computes c mdmod bob world decrypt resulting ciphertext c alice s public exponent e ce yield valid message alice possession key sender generally signature purpose alice encrypt entire message simply secure hash send message hash bob decrypts encrypted hash signature check result match hash corresponding message encryptionan introduction computer network release advantage signature hmac signature us key term persistence used identify individual sent message drawback hmac signature faster common alice sign message bob encrypt message plus signature bob s public key sending bob just alice probably prefers sign undated document handwritten signature likely prefer apply digital signature document containing timestamp help deter replay attack factoring rsa key security rsa depends largely difÔ¨Åculty factoring key modulus n pq oretically possible rsa vulnerability exists doe entail factoring factoring algorithm appears fastest larger key sieve early version technique introduced heuristic estimate time needed factor number n algorithm exp n log n exp x exand log x natural logarithm Ô¨Årst approximation exp k l exponent extremely slow channel placing reliance relative security level outlined aware existence attack egmaking use electromagnetic leakage computer infer key Ô¨Årst factorization rsa modulus bit occurred published rsa factoring challenge took seven calendar month using processor parallel year later reported able factorization day machine seven hour using core speedup software implementation improvement faster hardware normalize factoring time n following table estimated relative cost factoring larger n key length bit relative factoring time conclude key potentially breakable determined funded adversary key length appears safer nist s recommended key length rsa encryption increased bit publication table quite bit rsa introduction computer network release larger recommendation cipher rsa factoring attack faster trying key brute force note part factoring algorithm highly parallelizable part relative factoring time using highly parallel hardware differ quite bit ing key forward secrecy suppose alice bob exchange session key k susing rsa key later rsa key compromised attacker retained alice bob s prior communication attacker decrypt k s use k sto decrypt entire session protected k true alice bob used key exchange case encryption used process negotiating k s later encryption compromise reveal k property called forward secrecy perfect forward secrecy time perfect ward secrecy add requirement compromise session key negotiated alice bob doe reveal information k s advantage using encryption key exchange alice sign key k sshe sends bob assuming bob conÔ¨Ådent alice s real public key attack trust man middle impossible common encryption used sign transaction exchange alice bob gain forward secrecy andprotection attack drawback forward secrecy described key exchange inally requires synchronous exchange alice encrypting email message bob synchronous change probably option bob ofÔ¨Çine time approach forward secrecy asynchronous communication used protocol alice bob generate prekeys key exchange described change alice bob agree prime p generator g choose random value b respectively exchange gamod p gbmod prekey bob simply precomputed gb shared server signed bob avoid reuse bob typically generate share prekeys ice want send asynchronous message simply asks server bob s prekeys ga calculate session key k sand encrypt message alice s gamust sent encrypted message bob calculate k sand decrypt message prekey approach appears quite secure doe commit using prime p generator g usual approach requires generation set prekeys potential correspondent finally note forward secrecy work best ephemeral data stream like browser session voice call data longer exists captured encrypted packet data consists message archived compromise device archived likely yield encrypted keylogger device yield necessary local password cracking alice s key possibility common way obtaining encryptionan introduction computer network release key probably compromise computer attacker succeeds attacker likely access message alice archived computer forward secrecy notwithstanding trust man middle suppose alice want send bob message doe Ô¨Ånd bob s public key e b alice go public directory completely secure trustworthy Ô¨Ånd key fact belongs mallory instead alice fall victim attack like end exchange alice encrypts bob s message using mallory s public key e mal thinking bob s mallory intercept decrypts message using decryption key d mal mallory message bob s real public key e bob bob decrypts message d bob despite mallory s inability break rsa directly read modify alice s message alice course bob s key directly bob course alice met bob exchange key cipher middle easiest setting launch attack public hotspot hotspot owner setting rogue access point customer mistakenly connect come mysterious world trust alice trust charlie bob s key dave alice doesn t meet charlie bob s key need trusted copy charlie s public key copy bob s public key bob s signed charlie time alice trust dave charlie evan s key bob trust charlie dave alice s key mathematically trust relationship symmetric transitive handle possibility trust erode time signed key expiration date small scale party held participant exchange key rectly indirectly signing approach known web trust large scale certiÔ¨Åcate authority certiÔ¨Åcate authority entity built tl work tl verify website s public key claimed implicitly trusting certiÔ¨Åcate authority browser vendor trust web trust certiÔ¨Åcate authority example infrastructure pki broadly mechanism reliably tying public key owner application encryption manage avoid need pki use cryptographically generated address security neighbor discovery discussion address end dns trust man middle introduction computer network release encryption communication application based model encryption central server example alice bob use http based tl tl encrypt teractions email provider mean alice bob trusting provider decrypts message alice store delivering bob model doe protect alice bob internet eavesdropper breached security email provider allows government authority order email provider turn alice bob s correspondence alice bob wish trust intermediary s government need implement encryption alice bob negotiate key use key encrypt message divulge key quite bit work alice bob complicated alice wish use encryption large number correspondent course encryption alice compelled subpoena turn correspondence bob different matter alice s private key seized search warrant common universal protect private key password good practice protecting key having effective length bit password having effective length bit leaf desired mechanism password hash provide limited relief mechanism forward secrecy useful assuming alice communicate bob previous key compromised certiÔ¨Åcate revocation ssh tl look encryption mechanism popular use internet Ô¨Årst secure shell ssh used allow login remote system remote command execution Ô¨Åle transfer form vpn tunneling optional used public key generally transported manually poodle poodle attack based Ô¨Çaw ssl ssl Ô¨Åfteen year obsolete ofÔ¨Åcially deprecated Ô¨Çaw broken negotiation implementation disruption packet attacker force client server settle ssl supported latest tl version tl connection setup second example transport layer security protocol tl successor secure socket layer ssl people refer tl ssl tl replaced ssl fair tl effectively update ssl tl easily named ssl tl used encrypt web trafÔ¨Åc http secure protocol http used encrypt trafÔ¨Åc application canbe used appropriate programming application alice want contact server s using ssh tl point trust public encryptionan introduction computer network release key claimed common approach ssh alice accept key faith Ô¨Årst time presented save future veriÔ¨Åcations tl key s alice receives signed certiÔ¨Åcate authority certiÔ¨Åcate authority alice presumably trust certiÔ¨Åcate authority ssh doe support certiÔ¨Åcate authority use ssh common ssh tl eventually end negotiating session key used actual data encryption ssh ssh protocol establishes encrypted communication channel host establishing identity endpoint primary use enable secure execution input output secure channel includes remote execution interactive shell effect terminal login encryption companion program scp us ssh protocol implement secure Ô¨Åle transfer finally ssh support secure port forwarding machine port unrelated application connect machine Ô¨Ånd securely talking current version ssh protocol deÔ¨Åned rfc authentication transport deÔ¨Åned rfc andrfc respectively Ô¨Årst step ssh connection endpoint negotiate cipher mode use support following cipher recommended longer list tional cipher include blowÔ¨Åsh table includes added rfc cipher mode nominal keylength cbc ctr bit aes cbc ctr bit aes ctr bit aes ctr bit ssh support special format including new cipher local use ssh protocol allows endpoint negotiate mechanism function algorithm minor variant key exchange implemented alice wish connect server s server clearly want verify alice s identity password mean just important alice verify identity s prevent attack possibility attacker masquerading s simply collecting alice s password later use ssh protocol designed minimize number packet exchange making ssh connection setup quite bit slower tl connection setup tl connection setup nection involve quite round trip started tcp handshake protocol version exchange key exchange init exchange actual key exchange newkeys exchange service request exchange Ô¨Årst documented rfc delay usually reduced performance tuning enabling diagnostic output egwith helpful common delay culprit dns lookup client Ô¨Åxable conÔ¨Åguration setting usedns equivalent ssh tl introduction computer network release following subsection focus common ssh conÔ¨Åguration ignore advanced option server authentication end Ô¨Årst step ssh connection negotiation server send public half itshost key alice alice veriÔ¨Åes key typically Ô¨Åle alice asks s sign host key alice decrypt public host key s conÔ¨Ådent talking real alice s Ô¨Årst attempt connect s message like authenticity host s t established rsa key Ô¨Ångerprint sure want continue connecting alice cautious contact administrator s verify key Ô¨Ångerprint likely simply choose yes case host key s added Ô¨Åle strategy referred trust Ô¨Årst use later s host key s changed dire message default conÔ¨Åguration allowed continue manually remove old host key s Ô¨Åle scenario arp security comment applies ssh ssh support mechanism verifying server host key replacing Ô¨Åle key exchange step alice s computer s negotiate session key cipher algorithm negotiated alice s computer s use chosen algorithm agree session key chosen cipher direction connection generally different session key use different encryption algorithm point channel encrypted client authentication server asks alice authenticate password authentication used alice type password username sent server connection doe expose server attack infrequently disabled alice set rsa authentication type authentication possible alice create key pair Ô¨Åles public key previously installed system installed s encryptionan introduction computer network release Ô¨Åle subdirectory alice s home directory alice sends message s signed private key s position verify signature succeeds alice log supplying password common universal practice alice s Ô¨Åle computer protected password case alice need supply password used alice s end connection default password hash good choice password hash authentication tried password authentication alice created public key likely tried copied s set require authentication alice direct way install public key s need cooperation administrator possible send alice keypair chosen speciÔ¨Åcally s allowing alice choose keypair standard ssh user conÔ¨Åguration doe support different private key different server implementation ssh various stage authentication observed client using ssh orslogin command session ssh connection started new session key periodically negotiated rfc recommends hour gb data exchanged data sent packet generally size multiple block size cipher data available egbecause single keystroke byte sent packet padded random data needed packet required padded byte random data thwart attack based known pair included encrypted packet byte indicating length padding tl transport layer security tl ietf extension secure socket layer ssl protocol nally developed netscape communication ssl went published version introduced ofÔ¨Åcially deprecated rfc poodle sidebar ssh tl tl introduced ietf took ownership speciÔ¨Åcation netscape current version tl speciÔ¨Åed rfc plus update listed draft tl progress original primary role tl encrypting web connection verifying client authenticity server tl embedded network application unlike ssh client authentication possible common web server relationship client unlike ssh mechanism based established certiÔ¨Åcate authority ca common way ssh server s host key end client accepted user Ô¨Årst connection browser tl application necessary embedded list certiÔ¨Åcate authority known trust store trusted browser vendor ssh requires centralized trust ssh tl introduction computer network release bob wish use tl web server s bob Ô¨Årst arrange certiÔ¨Åcate authority say ca sign certiÔ¨Åcate certiÔ¨Åcate contains dns s bob say public key k sused s bob expiration date tl us certiÔ¨Åcate format domain bob actually domain domain example bob s organization established international treaty imagine alice connect bob s server s bobusing tl early process s bobwill send signed certiÔ¨Åcate claiming public key k alice s browser note certiÔ¨Åcate signed ca look ca list trusted certiÔ¨Åcate authority step browser use ca s public key list verify signature certiÔ¨Åcate s bobsent check alice s browser know ca public key k s bob presented key k s able verify possesses matching private key proof sbobis legitimately server domain assuming course ca correct ssh alice accepted public key k sof s bob cipher negotiated remainder exchange encrypted certiÔ¨Åcate authority acertiÔ¨Åcate authority ca just entity business signing certiÔ¨Åcates message include s boband veriÔ¨Åed public key k purpose certiÔ¨Åcate authority prevent middle attack trust man middle alice want sure really connected s badinstead s bob ca actually signing particular public key k sbelongs domain just like charlie sign bob s public key individual basis difference ca likely large organization ca s public key likely embedded network application software real ca s usually key signing arrangement bob s public key signed ca s subsidiary key effect certiÔ¨Åcate speciÔ¨Åc work www dns name direct server s bob s bobpresents certiÔ¨Åcate browser arrived s bobvia url http user warning straightforward server support certiÔ¨Åcates certiÔ¨Åcate authority support single certiÔ¨Åcate subject alternative entered certiÔ¨Åcate possible obtain wildcarded certiÔ¨Åcates doe match doe match name additional level rfc recommends wildcard certiÔ¨Åcates remain widely used firefox certiÔ¨Åcates encryptionan introduction computer network release writing certiÔ¨Åcate authority popular firefox browser preference vanced√±view certiÔ¨Åcates interesting list highly trusted organization people heard handful policy firefox ca popular browser use preset list ca provided presumably trusted browser dor host vendor ifalice willing trust ca feel comfortable using key receives send private message bob sial just alice trust browser operating egnot contain malware doe automatically imply alice trust vendor judgment come ca face bob s certiÔ¨Åcate authority ca just signing domain public key k isn t quite attesting request actually came bob depends thorough ca checking identity customer customer typically choose expensive ca incentive cut corner certiÔ¨Åcate authority s failure verify identity party making request enable attack trust man middle suppose example mallory able obtain signed certiÔ¨Åcate certiÔ¨Åcate authority ca key kbadcontrolled mallory mallory position server s badin middle alice sbob alice sbad sbob alice tricked connecting s badinstead s bob alice request certiÔ¨Åcate sbadinstead s bob mallory s ca bob s actual certiÔ¨Åcate ca mallory open second connection s badto s bob easy bob make attempt verify alice s identity forward information connection far tl concerned check alice s perspective mallory s false certiÔ¨Åcate vouches key k badof s bad ca signed certiÔ¨Åcate ca trusted alice s browser search point ca contrary information s bob fact necessarily contact ca certiÔ¨Åcate revocation certiÔ¨Åcate error certiÔ¨Åcate signature fail verify expired improperly signed certiÔ¨Åcate authority recognized browser receives appropriate tl error message communicates problem user example click button different error certiÔ¨Åcate authority ca domain registrar bob registered dns especially verify bob really owner main generally case quite ca s primary veriÔ¨Åcation method send email say bob dns administrative contact listed whois database domain responds email assumed legitimately domain authentication strategy ca send special Ô¨Åle placed say idea domain owner able note attack doe matter ca matter veriÔ¨Åcation policy used ca ssh tl introduction computer network release alice careful click lock icon browser certiÔ¨Åcate authority signing connection s badis ca ca alice secure way Ô¨Ånding bob s real certiÔ¨Åcate authority use Ô¨Ånd bob s key k doe limited utility practice second certiÔ¨Åcate authority ca legitimate certiÔ¨Åcate authority tricked coerced bribed signing mallory s certiÔ¨Åcate alternatively mallory s creation inserted mallory alice s browser vulnerability superÔ¨Åsh superÔ¨Åsh vulnerability involved module based lsp wfp principle iptables intercept browser tl connection acting man middle software act certiÔ¨Åcate authority generating new certiÔ¨Åcates like mallory s ca Ô¨Çy apparent goal inject advertising connection mallory s machination require attack bad certiÔ¨Åcate alice able establish direct connection s bob send true key k ssigned ca attack mallory obtain certiÔ¨Åcate hope alice doesn t notice spelling difference bob mallory sends alice disguised link hope click unicode domain name make easier unicode provides character pair different look identical certiÔ¨Åcates tend come number constraint certiÔ¨Åcates issued ca end user corporation individual marked certiÔ¨Åcate authority meaning certiÔ¨Åcate used sign additional certiÔ¨Åcates certiÔ¨Åcate trust relationship transitive bob get certiÔ¨Åcate use sign certiÔ¨Åcate alice matter google second major restriction name certiÔ¨Åcate tied speciÔ¨Åc dns described multiple name accepted subject alternative attribute using wildcard like finally certiÔ¨Åcates contain restriction used extended key usage attribute typical entry tl web server authentication expressed oid snmp naming oids restriction enforced tl library possible outside library use key inside certiÔ¨Åcates want certiÔ¨Åcates introduced way providing greater assurance certiÔ¨Åcate issued fact generated request bob mallory theory harder time obtaining ev certiÔ¨Åcate ca desktop browser secured tl connection using ev certiÔ¨Åcate typically add domain owner highlighted green green padlock icon address bar financial institution use ev certiÔ¨Åcates doe course alice doe know bob using ev certiÔ¨Åcate tricked mallory alternatively alice using mobile device mobile browser little visual indication ev certiÔ¨Åcates majority browsing today mobile device severely limit usefulness certiÔ¨Åcates encryptionan introduction computer network release certiÔ¨Åcate pinning strategy intended direct prevention attack certiÔ¨Åcate pinning conceptually alice browser make note Ô¨Årst time connects s bobthat certiÔ¨Åcate authority ca bob s public key k s future connection s bobmust match credential form pinning depends alice s having reached real s bobon Ô¨Årst connection called trust Ô¨Årst use similar strategy used ssh server authentication pinning protocol described rfc s bobthat initiate pinning including pin directive initial http connection request alice s browser pin desired certiÔ¨Åcates pinned correspondence site key maintained browser pin directive speciÔ¨Åes key k sor ca pinned long s bobsends pin directive k s alice s browser remembers k s new certiÔ¨Åcate s bob mismatch s bobpins ca s bobcan ca new key pas validation ca later compromised s bobis protected new rogue certiÔ¨Åcates issue generally minor concern ca mean newvisitors s bob vulnerable attack bob obtain k s backup certiÔ¨Åcate k s bob s pin directive pin k si compromised k ready hopefully key compromise rare event small chance k sand k compromised pin s lifetime key compromise pretty follows server compromise intruder break k production bob sure site secure time k sand k areboth compromised ca t pinned s bobmay simply inaccessible returning visitor automatic unpinning revoked certiÔ¨Åcates help certiÔ¨Åcate revocation following section difÔ¨Åculties user option disable pin validation particular site s supposed simple clicking ok event site bank loath certiÔ¨Åcate revocation suppose key r underlying certiÔ¨Åcate compromised mallory private key mallory trick alice connecting s badinstead s bob original ca validate connection s badcan prove alice secret key corresponding k s certiÔ¨Åcate doe attest key k mallory s deception work bob noticed compromise updated s bob s key k point mallory original key ca s certiÔ¨Åcate attesting original key valid mechanism certiÔ¨Åcate revoked revocation information kept central directory server continue serve revoked certiÔ¨Åcate unless client actively check wiser reason certiÔ¨Åcates expiration date original revocation mechanism global certiÔ¨Åcate revocation list newer alternative online certiÔ¨Åcate status protocol ocsp described rfc alice receives certiÔ¨Åcate signed ca send serial number certiÔ¨Åcate designated ocsp responder run behalf ca certiÔ¨Åcate valid responder site return signed conÔ¨Årmation ssh tl introduction computer network release course eavesdropper watching alice s trafÔ¨Åc arriving ocsp responder ocsp der know alice visiting eavedropper closer alice know seriously running attack close alice probably intercept block alice s ocsp request alice receives response maybe problem maybe responder site simply internet simply slow browser actually revocation check assume known soft fail making revocation check dubious value alternative refusing allow access original site hard fail lead false positive generally accepted solution minimal approach event ocsp soft fail use hard fail ev certiÔ¨Åcates downgrade ev certiÔ¨Åcates ordinary one ocsp approach ocsp stapling server site periodically daily request signed dated update ca s ocsp server indicating site s certiÔ¨Åcate valid ocsp report stapled serverhello message requested client allows client verify certiÔ¨Åcate valid quite recently course client isthe victim attack fake server staple ocsp validity report client fall regular ocsp lookup process case expected infrequent making hard fail ocsp reasonable option google s chrome browser implement crlsets lieu checking ocsp server described list revoked certiÔ¨Åcates downloaded regularly browser unfortunately list large crlsets limited emergency revocation certiÔ¨Åcate revocation key compromise list complete tl connection setup typical tl user interested viewing web page quickly possible placing mium rapid negotiation tl connection site load noticeably slowly encryption used encryption used routinely result process known tl handshake protocol designed complete rtts goal handshake protocol agree encryption authentication mechanism used provide authentication necessary negotiate encryption key outline typical exchange option omitted encryptionan introduction computer network release client alice server bob clienthello preferred tl version session id new tions list cipher acceptable client servername optional extension start key exchange optional serverhello chosen version chosen cipher server key exchange optional server certiÔ¨Åcate separate message client know key optional client certiÔ¨Åcate optional data encrypted finished message finished message encrypted client initiate connection sending clienthello message contains preferred version number session identiÔ¨Åer random byte cryptographic nonce list cipher suite tuples consisting algorithm encryption algorithm algorithm list cipher suite ranked client according preference large server host multiple website virtual hosting website cate server need able know send reply setting like client includes server s dns servername extension server indication sni deÔ¨Åned rfc choosing cipher theory tl client choose cipher suite accept practice software application firefox browser config yes theory tl server responds serverhello contains Ô¨Ånal number erally maximum version proposed client highest version supported server theserverhello contains server s choice cipher suite client s list random byte server s nonce server sends certiÔ¨Åcate requested exactly certiÔ¨Åcate sent depend server sent client optional extension certiÔ¨Åcate considered separate message tl protocol level ssh tl introduction computer network release theserverhello sent having received server s certiÔ¨Åcate client application s step validate certiÔ¨Åcate checking signature client s list trusted certiÔ¨Åcate authority client s trust store step doe involve network communication operating system maintain list generally trusted certiÔ¨Åcates client application trust list client load certiÔ¨Åcates certiÔ¨Åcate doe notcheck client free continue connection pausing add server certiÔ¨Åcate trust store hopefully user interaction conÔ¨Årming client responds response certiÔ¨Åcate applicable seldom immediately follows finished message Ô¨Årst message encrypted cipher suite server reply itsencryptedfinished message encrypted communication begin browser allow user click padlock icon connection Ô¨Ånd cipher suite actually agreed client starting connection leaf session id Ô¨Åeld clienthello message client wish resume previous session includes session id previous session server course recognize session time broken tl server failed respond properly client proposed version number greater server supported server close connection instead returning lower version number result client programmed try version event failure meant attacker force client propose obsolete version egssl simply interrupting earlier attempt tcp rst packet consequence poodle vulnerability mentioned sidebar ssh tl application s choice tl versus unencrypted communication signaled use special port number example standard http port standard http port alternatively initial negotiation example smtp email protocol rfc common client connect server standard port encryption negotiate use tl using starttls extension smtp rfc add multiple extra rtts protocol usually minor concern occasionally application confused tl use web browser ing port http port http usually Ô¨Ågure thing correctly http http s url missing browser connecting nonstandard webservers running nonstandard port receive cryptic binary response tl required http url preÔ¨Åx missing domain fronting government censorship website internet service encrypted messaging pant part world saw servername extension included clienthello message order request correct certiÔ¨Åcate sent clear used censor block selected trafÔ¨Åc censorship workaround known domain fronting ask hostname say theclienthello servername extension request second different hostname encryptionan introduction computer network release protocol encryption place example http request netcat contains host header speciÔ¨Åed course work hosted ip address large http server handle multiple website single server using mechanism known virtual hosting nslookup dig block censor block hope censor unwilling domain fronting easier cdns network involved virtual hosting necessary cdn accepts connection website large number customer larger number single server support using virtual hosting edge server network edge server certiÔ¨Åcates customer appear legitimate user connection edge server answer request cached data forward request actual web server enable domain fronting environment need customer cdn cdns large hosting provider think highly domain fronting particularly censor shown willingness block critical domain like just block unwanted application google amazon web service disabled domain fronting cdn customer initial connection server client usually make dns request obtain server s ip address blocked monitored workarounds tl key exchange important tl handshake negotiate encyption key key self derived tl master secret key derivation deterministic way using secure hash algorithm master secret known case client know master secret receiving serverhello related packet point rtt client begin sending encrypted message server point client begin sending encrypted data possible client fully authenticated server negotiation master secret depends cipher suite chosen rsa method client chooses random secret sent server leg exchange client received server s certiÔ¨Åcate serverhello stage secret encrypted public rsa key server s certiÔ¨Åcate conveying securely server side calculate master secret secret side cryptographic nonce using secure hash pseudorandom keystream stream cipher stream cipher inclusion server nonce mean tha client doe unilaterally specify key used exchange server proposes prime p primitive root g serverhello phase selection cipher suite listed clienthello server bob includes gbmod client chooses exponent sends gamod p server secret p client rsa case know end Ô¨Årst rtt client s gamod p encrypted using master key sent client point version exchange us cryptography ssh tl introduction computer network release tl version version tl rfc make numerous improvement protocol thing prune list acceptable cipher suite algorithm longer considered secure exchange algorithm support forward secrecy forward secrecy process improved prevent attack mode enables faster connection startup method previous section doe support forward secrecy rsa depending s choice secret proposal drop rsa key exchange caused concern enterprise setting particularly banking industry widespread use middleboxes able decrypt monitor internal tl connection connection endpoint control enterprise monitoring variety reason including regulatory compliance malware detection enable monitoring using tl tl connection enterprise outside internet terminate site s border special appliance connection rior system using static rsa secret shared monitoring equipment applies tl connection entirely internal enterprise enable kind monitoring tl approach monitoring occur appliance mean device considerably bigger complicated expensive additionally help entirely internal tl connection approach tl proxy endpoint internal tl connection turn session key monitor raise security concern proposed amendment original tl proposal internet draft tl requires message serverhello encrypted possibly message intrinsically secure client know master secret point server know soon hears client tl mode finally tl add mode client send encrypted message beginning assuming appropriate master secret negotiated previous connection http interaction common case mode particular allows client send secure data clienthello server respond data serverhello chooses protected new session s master secret known protection send data client resume earlier session including previous session id clienthello message server canrefuse data demand protection usually advantage data server accepts answer return client single rtt particularly signiÔ¨Åcant quic quic quic revisited tl handshake carried parallel quic connection handshake replacement tcp handshake mean response come just rtt Ô¨Årst message client quic requires tl later encryptionan introduction computer network release protection quite strong ast protection forward secrecy doe apply seriously participant receiving data vulnerable replay attack attacker modify previously intercepted message breaking cipher resend minimum recipient request accept idempotent yielding result executed twice sun rpc generally automatic simple http request idempotency security guarantee request delete Ô¨Åles idempotent point particular request replay attack executed safe safe twice tl server suppport mechanism database past request consequence mixing data recipient need able tell request received protection received protection tl programming example section introduce simple pair program communicate tl somewhat resemble program tcp read command line instead client sends message server ignore server sends message structure allow later point client real web server instead tlsserver client send http request netcat obtain web server s response program written c order use openssl library descendant original netscape ssl implementation openssl package includes important utility cate creation openssl library documentation remains notoriously spare part library audited openssl remains widely used implementation tl code shown intended simply demonstration considered model implement secure connection making certiÔ¨Åcate Ô¨Årst step create appropriate application certiÔ¨Åcate create certiÔ¨Åcate authority sign step use openssl command used rsa key example additional explanation start certiÔ¨Åcate authority Ô¨Årst step create key certiÔ¨Åcate authority use genrsa option achieves choose key length bit openssl genrsa resultant Ô¨Åle say private key fact key pair step create certiÔ¨Åcate thereq option asks signing request option indicates new request option tell openssl forget making request instead make certiÔ¨Åcate actually format standard openssl req ssh tl introduction computer network release certiÔ¨Åcate set expire day real published certiÔ¨Åcates supposed valid year signing process trigger series question form distinguished certiÔ¨Åcate country letter code state orprovince illinois locality city shabbona organization company introduction computer network organizational unit section security common server fqdn oryour peter l dordal email address requesting certiÔ¨Åcate web server use hostname common output represents concatenation information public key signed private key private key isnotpresent Ô¨Åle tl client receive certiÔ¨Åcate authority read information Ô¨Åle follows openssl produce following somewhat edited space certiÔ¨Åcate theissuer subject certificate data version serial number signature algorithm issuer introduction computer √£√±networks l dordal validity jan gmt gmt subject introduction computer √£√±networks l dordal subject public key info public key algorithm rsaencryption bit modulus bf cf exponent extension subject key identifier cb dd fa authority key identifier √£√±keyid cb dd fa basic constraint continues page encryptionan introduction computer network release continued previous page ca true signature algorithm aa ee certificate certificate create application key application signature request request sign certiÔ¨Åcate generate application certiÔ¨Åcate openssl genrsa openssl req certiÔ¨Åcate request requires entering distinguished time enter follows organization match country letter code state orprovince illinois locality city fixed abode organization company introduction computer network organizational unit section tl server common server fqdn oryour odradek email address asked challenge password leave blank come Ô¨Ånal step actual signing unlike previous openssl command requires root privilege make use global openssl conÔ¨Åguration Ô¨Åle thing reference Ô¨Åle serial assign certiÔ¨Åcate serial number did create certiÔ¨Åcate openssl ca √£√±keyfile application certiÔ¨Åcate deliver application section low read openssl Ô¨Ånd issuer subject common odradek tlsserver complete server certiÔ¨Åcate key Ô¨Åles stored additional sufÔ¨Åx prevent accidental click loading directly browser compiler server linux openssl library installed usual place use ssh tl introduction computer network release gcc tlsserver server run directory certiÔ¨Åcate key Ô¨Åles following important line program stripped error checking openssl library method return success failure different kind failure require different library doe sound like initializes ssl subsystem loading error string useful step commit version ssl agree accept method ctx method ctx somewhat paradoxically accepts allssl tl version line disable earlier tl version openssl version bering unrelated tl versioning replaced appropriately named variable ctx represents tl context set tl state information server use context incoming connection load server certiÔ¨Åcate key Ô¨Åles newly created tl context recall server get application certiÔ¨Åcate client int ctx int ctx server need key Ô¨Åle sign message create ordinary tcp socket listening port createsocket deÔ¨Åned end Ô¨Åle sock createsocket finally main loop accept tcp connection create new ssl object context tie new ssl object socket int childsock accept sock struct sockaddr addr len ssl ssl ctx ssl childsock ssl ssl reply strlen reply encryptionan introduction computer network release handshaking described tl connection setup take place point server writes reply message channel argued ietf osi tl way regarded true presentation layer note application layer responsible accepting childsock passing tl application layer word doe interact directly tcp tlsclient complete client certiÔ¨Åcate sufÔ¨Åx sequence ssl library call removed server start initialization time load error string return choose tl version allow time starting method ctx method ctx instead use method connection fail allows tl version server requires tl version better step load trust store certiÔ¨Åcates certiÔ¨Åcate authority elected trust trust store Ô¨Årst load standard certiÔ¨Åcate directory tory supplied parameter individual Ô¨Åles second certiÔ¨Åcates directory named possibly using symbolic link hash value utility wanted able trust server s just load certiÔ¨Åcate need standard certiÔ¨Åcate directory want point tlsclient real http server tlsserver ctx null load certiÔ¨Åcate added trust store addition standard certiÔ¨Åcates add multiple individual certiÔ¨Åcates making multiple call ing certiÔ¨Åcates single Ô¨Åle certiÔ¨Åcates separated begin certificate andend certificate line ctx null ready connect server line initiate tl handshake starting clienthello ssh tl introduction computer network release sock openconnection hostname port ssl ctx ssl sock ssl client retrieves case print certiÔ¨Åcate supplied server server tlsserver normally cert ssl certname cert print certname printed certname doe writing web browser point verify site hostname match cnÔ¨Åeld certiÔ¨Åcate client receives application certiÔ¨Åcate verify signature client us trust store ret ssl certiÔ¨Åcate authority trust store vouches signature application certiÔ¨Åcate return value comment loading unable local issuer certiÔ¨Åcate tlsclient loading server instead proper certiÔ¨Åcate error certiÔ¨Åcate list error listed verify command validation fails connection encrypted vulnerable attack gardless happened validation particular tlsclient go write http request server read server s response companion tlsserver program doe fact read request generally speaking continuing tl session certiÔ¨Åcate validation failure bad idea ssl request ignored tlsserver program bytesread ssl buf sizeof buf fwrite buf bytesread stdout bytesread written request ignored tlsserver http request form point tlsclient real webserver say tlsclient veriÔ¨Åcation result loaded default authority library point openssl client tlsserver default connects localhost port openssl encryptionan introduction computer network release course veriÔ¨Åcation fails doesn t know certiÔ¨Åcate authority add command line openssl veriÔ¨Åcation successful ipsec ssh software package built ground implement ssh protocol modern web browser incorporate tl library enable secure web connection want add encryption authentication network application doesn t built alternatively administrator ensure s trafÔ¨Åc protected regardless software using ipsec ip security answer security protocol typically behaves network sublayer ip layer transport mode transport layer akin security implement encryption lan layer ipsec encryption transparent communicating application term actual implementation incorporated ip layer implemented external network appliance ipsec used protect individual tcp udp connection trafÔ¨Åc pair router used implement access outside host private subnets nat router easily adapted support encryption authentication mechanism ipsec support packet format authentication header ah authentication encapsulating rity payload esp authentication encryption esp format common consider ah format date day export encryption software united state banned sidebar crypto law block cipher event ah format used authentication esp packet format follows ipsec introduction computer network release bit security parameter index spi sequence number integrity check value variable length payload variable length padding pad length header esp packet layout spi identiÔ¨Åes security association sequence number prevent replay attack sender increment transmission receiver care received number strictly increasing gap lost packet matter cryptographic algorithm applied payload algorithm negotiated connection padding Ô¨Åeld used Ô¨Årst bring payload length multiple applicable encryption blocksize round total multiple byte header Ô¨Åeld describes data inside payload egtcp udp transport mode ip tunnel mode corresponds protocol Ô¨Åeld header header Ô¨Åeld header ipsec primary mode transport andtunnel transport mode ipsec endpoint ically trafÔ¨Åc endpoint header egtcp header data encrypted protected tunnel mode ipsec endpoint router security way encryption protection includes original ip header eavesdropper necessarily identify actual trafÔ¨Åc endpoint ipsec documented wide range rfcs good overview architectural principle rfc esp packet format described rfc word warning ipsec doe support modern encryption continues support outdated algorithm user care ensure encryption negotiated sufÔ¨Åcient ipsec attracted recent year attention security community ssh tl eye make bug shallow bug security association order given connection path receive ipsec protection Ô¨Årst necessary set pair security association security association consists necessary attribute algorithm key rekeying rule set selector identify covered encryptionan introduction computer network release trafÔ¨Åc given security association cover trafÔ¨Åc direction bidirectional trafÔ¨Åc requires separate security association direction outbound trafÔ¨Åc trafÔ¨Åc going unprotected internal status selector consists destination ip address set address possibly source ip address set source address port protocol value inbound esp packet carry security parameter index spi unicast trafÔ¨Åc identiÔ¨Åes security association security association checked packet actual match destination source ip address need ip address ipsec endpoint example consider following arrangement traveling host want connect private subnet security gateway address shown arrangement created b host security ipsec security association s selector include entire subnet set tination address packet arriving s ipsec interface match selector encapsulated sent normal internet routing b b packet forward using normal ip forwarding table b actually bethe nat router site external address internal subnet b simply publicly visible host site happens route private subnet action forwarding encapsulated packet b closely resembles ip forwarding isn t quite unlikely true entry likely single default route local isp connection delivery packet understood simply examining s ip forwarding table entry ipsec b s taken easily lead confusion complex arrangement multiple overlapping security association lead nontrivial difÔ¨Åculties Ô¨Åguring just packet forwarded second routing issue exists b s end host packet arrive address reply delivered using tunnel routing infrastructure route packet b nat router happen matter course deliberate action need taken avoid having trafÔ¨Åc unsecured route additionally security association need list list source address ipsec resembles routing routing attribute routing based destination source address packet arriving b source address nottake ipsec tunnel add confusion linux ipsec actually linux routing table security association created software management interface egvia linux ipsec mand associated conÔ¨Åguration Ô¨Åle possible application request creation necessary security association common set application start request creation security association typically trigger invocation internet key exchange ike protocol current version abbreviated described rfc ipsec introduction computer network release typically us public key negotiate session key session key renegotiate session key interval simplest secure case side manually conÔ¨Ågured session key little verifying side key nat traversal ipsec packet particularly tricky ah packet impossible graphic authentication code packet cover original ip address packet transport data issue esp packet incoming packet match receiver s selector negotiated using sender s original ip address additional problem nat router fail forward fail forward properly packet outside protocol icmp udp tcp result ipsec mechanism outlined rfc rfc andrfc ipsec packet encapsulated udp packet original header ipsec receiving end original header used check tionally keepalive mechanism deÔ¨Åned ipsec node send regular small packet make sure nat mapping connection doe time dnssec dns security extension dnssec make possible authoritative nameservers provide ticated response dns query using digital signature primary goal dnssec prevent cache poisoning dns cache poisoning allowing resolvers verify dns record received dnssec documented rfc rfc rfc update rfc outline general framework extension dns known edns extension include new record type edns particular deÔ¨Ånes dnssec ok Ô¨Çag used signal receiving nameserver return response basic idea dnssec zone including root zone digitally sign rrsets set dns resource record matching given type ega record aaaa record mx record signature zone root zone parent zone sign public key public key resolver ip address sort linked sequence veriÔ¨Åcations called chain trust root key known trust anchor compared certiÔ¨Åcate authority certiÔ¨Åcate authority root zone implemented support dnssec zone far domain including following year order support signed record key dnssec introduced additional dns record type signature rrset public half keypair used sign zone record delegation signer record parent zone containing signature child zone s key encryptionan introduction computer network release dns sequence used afÔ¨Årm securely given hostname doe notexist slightly dnssec authoritative nameserver creates zone zone signing key zsk possible rrset nameserver creates rrsig signature record signed zsk public half zone s zsk available record type dnskey dns equal zone finally hash public zsk signed parent s zsk available parent zone record type d equal child zone s query arrives xname typey nameserver return rrset rrsig record type example use dig tool query arecord include Ô¨Çag result dig receive formatting applied rrsig note rrsig record piggybacked original query independent way request rrsig record matching type type dns query contain type rrsig record dns answer section additional section record essential response obtain zone s public zsk requesting record type dnskey verify key asking record type d nameserver fetch record dnssec resolver called validating resolver cached start asking root zone appropriate n record just plain dns nslookup dig root zone reply n record record pointing authoritative nameserver dnssec ok bit request set includes corresponding rrsig record resolver validate rrsig signature know prearrangement ksk resolver asks root nameserver d record signature ksk nameserver us signed root key used step resolver switch sending request authoritative nameserver zone asks n record receives appropriate n record dnssec involved receives corresponding rrsig record signed ksk com resolver obtains ksk requesting dnskey record nameserver ksk validated using signed d record previously obtained root zone validated ksk turn used validate rrsig record note dnskey d record dns form pair signing dnssec introduction computer network release hash dnskey record obtained nameserver corresponding d record obtained parent root case nameserver resolver asks nameserver d record used step Ô¨Ånal stage resolver sends request namserver time asks record address returned corresponding rrsig resolver get zsk requesting dnskey record resolver obtained signature zsk previous d record obtained nameserver validate zsk turn validate rrsig address record www dns query involved summarized following diagram request show xname typey pair response indicated query traditional dns make emphasize rrsig record included query shown black path request zone shown blue path request zone shown green validating authoritative nameserverroot authoritative nameserver authoritative nameserverrequest n response request d request n response request dnskey request d request response request dnskey chain key validation summarized follows known root zsk validates zsk pair dns zsk validates zsk validated pair dns zsk validates record validated encryptionan introduction computer network release pair dns possible resolver know likely caching ip address server case rrsig d credential cached resolver process root validate information implemented dnssec support subdomain did chain trust subdomain root zone broken case resolver use dnssec validate record zsk domain known root zone trust anchor trust anchor isolated zone island security available manual conÔ¨Åguration record cached validating resolver following previous query caching work dnssec just work ordinary dns record like dns record ttl value resolver abide diagram show separate request root nameserver nameserver nameserver inefÔ¨Åcient fortunately mandatory client request likely record cached particularly request root nameservers improved security authoritative nameservers conÔ¨Ågured key shorter signing key used sign rrsigs longer key ksk signed d record dnskey record return zsk ksk sufÔ¨Åcient maintain chain trust example pair let send following dnskey request domain having previously looked n record nameserver ip address dig com dnskey key shorter explained zsk longer ksk output formatted key data line neatly com dnskey com dnskey continues page dnssec introduction computer network release continued previous page number immediately following dnskey type label represent Ô¨Çag Ô¨Åeld bit set position indicating key generally longer key bit set position secure entry point Ô¨Çag loosely indicates key ksk speciÔ¨Åcally sep Ô¨Çag used mark key d record created parent zone rfc detail mean key signature use rsa speciÔ¨Åed rfc key encoded rfc Ô¨Årst key encoded byte line plus decoding python function library byte string length Ô¨Årst byte seven leading zero bit number bit Ô¨Årst nonzero bit end second byte bit stripping leading common parlance key respectively rsa keylength terribly secure meant relatively use day ksk provides excellent security rrsig record contains key tag Ô¨Åeld consisting hash information key make easier multiple dnskey record help Ô¨Ågure used create rrsig signature fallback necessary signature available key match rrsig multiple dnskey record occur separate zsk ksk key created occur anytime key process updated paragraph change ksk nameserver Ô¨Årst step create new key create new rrsigs rrset new dnskey record created new ksk public key communicated parent zone order create corresponding d record rrsig dnskey d parent nameserver ksk changed record set returned contain record ksks receiving resolver use key tag Ô¨Åeld Ô¨Ågure key go rrsig eventually old ksk expire egwhen ttl reached older record removed signing failure response dns name important little trickier rrset question set signed signed response replayed convince later existing dns valid possible prevent including dns signed response require signing private key available necessary goal strategy make possible record set actual private key secured ofÔ¨Çine original strategy authenticating return record containing previous legitimate dns nsec record listing subsequent legitimate dns according alphabetical order nsec record corresponding valid dns host valid dns sequence example query asked information nonexistent host foo result returned dns nsec record forerl indicating record following nameserver prepare signature record ahead time consecutive pair dns name nsec record corresponding valid hostname wrap Ô¨Årst usually zone drawback strategy make easy enumerate valid dns name encryptionan introduction computer network release zone sequential querying prevent nsec approach updated doe thing cryptographic hash hostname returned instead ordering used hashed value attacker enumerate hashed value dns doesn t help discover actual hostnames considerable effort necessary signature nsec approach prepared advance using dnssec managing authoritative nameserver egfor website enabling dnssec take deliberate effort enable dnssec requires conÔ¨Åguring nameserver software creating key forwarding appropriate d record parent zone site guarantee dnssec validation beneÔ¨Åts actually available given user workstation depends resolver workstation us support dnssec dns result authoritative nameservers validated according dnssec process user workstation conÔ¨Ågured use site resolver provided local isp support dnssec possible switch resolver manually public dns server user typical workstation stub resolvers perform dnssec validation default popular linux dnsmasq resolver conÔ¨Ågured use dnssec adding dnssec Ô¨Çag appropriate startup Ô¨Åle doe exist site dns resolver performs dnssec validation clicking link simply fail verify site actually exists changing resolvers Ô¨Årst n record nameserver dig desired record simplest way tell resolver support dnssec andvalidates dnssec response received look dns name intentionally misconÔ¨Ågured managed comcast validating resolver return nxdomain domain error message word zero record answer section clicking link yield browser error message like hmm having trouble Ô¨Ånding validating resolver return record link work normally partially aware resolvers manage return address way gauge degree resolver support dnssec use dig mand nslookup dig example ip address resolver omitted sign default resolver used argument set thednssec ok Ô¨Çag query dig command return like following resolver doe support dnssec opendns resolver dnssec introduction computer network release header opcode query status noerror id flag qr rd ra query answer authority additional opt pseudosection edns version flag udp question section answer section rrsig record flag second line notinclude adÔ¨Çag authenticated data edns line doe include doÔ¨Çag dnssec ok resolvers understanding dnssec following appear google resolver header opcode query status noerror id flag qr rd ra ad query answer authority additional opt pseudosection edns version flag udp question section answer section rrsig note rrsig record adÔ¨Çag second line doÔ¨Çag fourth argument ordinary dns response rrsig adordo occasional intermediate result appear eghaving rrsig record doÔ¨Çag missing adÔ¨Çag try lookup domain resolvers return answer nxdomain return rrsig record resolver return adÔ¨Çag artiÔ¨Åcially induced key error data case authenticated authentication named entity idea authentication named entity dane dnssec sign just usual dns record tl certiÔ¨Åcates doing dane replaces need tl certiÔ¨Åcate authority certiÔ¨Åcate authority rfc update basic idea dane domain owner make public tl key available authoritative dns nameserver chain trust authenticates record nameserver authenticate certiÔ¨Åcates certiÔ¨Åcates signed local ksks turn signed parent ksks root zone reached long list key stored browser reduced shorter list dnssec key encryptionan introduction computer network release certiÔ¨Åcates stored dns object type tlsa certiÔ¨Åcates speciÔ¨Åc application main preÔ¨Åxed port transport protocol leading underscore port number http trafÔ¨Åc dane solves number problem make potentially make expensive certiÔ¨Åcate tie unnecessary second certiÔ¨Åcate authority verify asking certiÔ¨Åcate given domain actually owner domain dane solved having domain s authoritative nameserver responsible domain key finally dane simpliÔ¨Åes process adding new certiÔ¨Åcates make pretty operation owner domain created key signed zone d record create additional certiÔ¨Åcates want validation library used client incorporated tl library able ensure certiÔ¨Åcates issued domain question subdomain verify port protocol constraint dane certiÔ¨Åcate veriÔ¨Åable dnssec chain trust certiÔ¨Åcate creation eliminate need private certiÔ¨Åcates used validate access vpns email server dane certiÔ¨Åcates lightweight object created moment s notice course browser currently support dane intended creation tl certiÔ¨Åcates form veriÔ¨Åable public key possible rfc example compromise authoritative nameserver using dane lead false tl certiÔ¨Åcates happen conventional certiÔ¨Åcate authorites generally use control domain evidence entity requesting certiÔ¨Åcate actually owns domain compromise nameserver allow distribution false tl certiÔ¨Åcates domain happens trouble regardless dane subtle difference trust conventional regime us principle decide ca trust rarely exercised browser user available potential option dane trust certiÔ¨Åcate trust root nameservers choice fact root nameservers control united state government iana agreement iana concern easy government create hierarchy starting domain associated key government charge certiÔ¨Åcate authority private entity clear extent resist government demand issue misleading certiÔ¨Åcates isn t dnssec popular ssh tl adopted eagerly website administrator seen widespread adoption following early concern deployment difÔ¨Åculties government united state mandated dnssec website organization tie internet governance early adopter especially icann ment dnssec adoption major internet corporation vanishingly small using dig tool dnssec introduction computer network release straightforward verify domain table support dnssec return rrsig record record requested Ô¨Çag google supported dnssec public resolver authoritative nameservers large site hasadopted dnssec company seriously interested internet security turn back dnssec primary answer site enables dnssec party make wrong conÔ¨Åguration mistake site unreachable user go dark cast void error message user tl certiÔ¨Åcate faulty end user get message browser sidebar certiÔ¨Åcate error certiÔ¨Åcate authority browser directly manages tl connection go wrong browser learns inform user majority certiÔ¨Åcate error misspelling expiration update thing control domain owner pretty major source tl error certiÔ¨Åcate authority domain owner eye dns browser farm lookup resolver library library likely doe return browser distinguish dnssec validation error nxdomain error site public resolver local sends dns query likely doe return different result validation error versus nxdomain error dnssec validation occur root occur lower level dns hierarchy impossible domain owner track potential problem possible resolver second reason site choose make use dnssec perceived unnecessary user receives corrupted address dns problem detected tl signing failure remarkably attack dnssec difference term detection series dns attack involved changing ip address retrieved dns selected hostnames server attacker control just attack dns cache poisoning attack entailed compromise authoritative nameservers involved attack achieved stolen credential bly misfeatures software domain registrar fireeye blog detail dnssec doe notprotect attacker able compromise zone s authoritative nameserver nameserver credential login credential really guarded carefully counter argument dnssec certainly potential block attack security better concept called defense depth principle abstract hard argue concrete hand depends dnssec complex introduces risk principle used argue regular password encryptionan introduction computer network release change policy paradoxical effect encouraging user choose shorter password real question dnssec add internet security worth change eventually public dns server site resolvers gain experience dnssec ing server safer safer likely eventually risk seen negligible point dnssec start make lot sense added beneÔ¨Åt modest concern dnssec old world dnssec contains great legacy bit rsa key today s standard considered long use dnssec doe mandate short key saw example key bit root key ksks similar issue domain hierarchy tightly controlled government individual user concerned clear large internet company dns http entirely different approach securing dns reducing dns problem taken mozilla firefox browser idea dns http doh abandon use site resolvers firefox send dns query central dns resolver secured tl speciÔ¨Åcs rfc stated goal eliminate dns attack essence switching firefox user large highly secure resolver trusted recursive resolver trr get data directly authoritative nameservers goal prevent isp eavesdropping interference dns request sent local resolvers course concern simply replaced concern central dns resolver collecting dns query trr partner selected mozilla cloudÔ¨Çare manager large cdn agreement tiated mozilla cloudÔ¨Çare personally identiÔ¨Åable data dns request discarded hour shared outside party use doh firefox controlled config value prefers normal resolver value completely disables doh set resolver egto understands query doh speciÔ¨Åcation spell dns query mapped http request traditional dns query response look like http separate approach dns tl outlined rfc goal simply prevent eavesdropping dns trafÔ¨Åc host individually chosen resolvers rsa key example section create short rsa key using openssl package available window mac linux break factoring Ô¨Årst step create rsa key length bit length chosen easy factorability rsa key example introduction computer network release openssl genrsa resultant Ô¨Åle follows rsa private key rsa private key pem format mean line middle encoding encoding snmp encoding actual data despite private key label Ô¨Åle fact contains private public key ssh private key typically generated command pem format extract data command openssl rsa output following bit modulus cf eb cd publicexponent privateexponent coefficient ac default openssl encryption exponent denoted e rsa default exponent used exercise convert hex number decimal corresponding notation rsa parenthesis modulus n privateexponent d p q coefÔ¨Åcient encryptionan introduction computer network release verify arithmetic using tool support large integer used unixbccommand check n pq check ed mod e d encrypt message m use efÔ¨Åcient calculation implementation squaring algorithm mentioned fast arithmetic function built python aspow x e n defpower x e n computes mod n pow whilee ife pow pow x n x x x n e denotes integer division returnpow let m string rivest hex decimal m e n c power c d n number pem Ô¨Åle andcoefficient value speed decryption value d mod d mod solution coefÔ¨Åcient mod p breaking key finally let break key decrypt message ciphertext c hard factoring n use factor command rsa key example introduction computer network release factor factor value p q factoring took second author s laptop course rsa key secure recall current recommendation use key factor command us pollard s rho algorithm serviceable especially suited factoring product large prime author able factor modulus just second using msieve program program available internet msieve implement version algorithm mentioned toring rsa key need Ô¨Ånd decryption key d knowing e need implementation extended euclidean algorithm following python implementation taken wikibooks defegcd b ifa return b g y x egcd b return g x b y y toegcd b return triple g x y g greatest common divisor b x y solution g ax rsa need d positive satisfy x value second value returned egcd e satisÔ¨Åes second negative case need add positive value gruent mod x value adding value d started c ciphertext calculate m pow c d n yielding hex rivest exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise suppose alice us rsa send message friend bob charlie deborah tive public key n n n note friend use encryption exponent assume n b ncand n dare relatively prime alice s friend bigger problem alice sends message m encrypted c n b c n c c n d mallory intercept encrypted message explain efÔ¨Åciently decrypt hint chinese remainder theorem implies mallory Ô¨Ånd c n bncndsuch encryptionan introduction computer network release c c bmod n b c c cmod n c c c dmod n d simple way avoid risk alice include timestamp recipient s message ensuring sends exactly message twice way choose larger exponent repeat rsa key example using key extract modulus key Ô¨Åle convert decimal attempt factor factoring minute series public rsa key encrypted message encrypted message c modulus case Ô¨Ånd original message using method breaking key factor n Ô¨Ånd key factor command sufÔ¨Åcient larger key consider msieve fast factorer number decimal encryption exponent e encryption c power message e n message ascii string numeric message converted string byte value range real use rsa applied directly message session key following python function useful converting numeric message string n return n chr n bit b bit c bit d bit limit factor gmp library e bit exercise introduction computer network release f bit g bit h bit mininet simulation possible practical network experiment run actual chine use set interconnected virtual machine virtual machine consume sufÔ¨Åcient resource hard create network handful node mininet support creation lightweight logical node connected network node called container accurately network namespaces nology used container consume sufÔ¨Åciently resource network thousand node created running single laptop mininet originally developed testbed networking networking work just demonstration experiment involving traditional networking mininet container process group process longer access host s native network interface process executed chroot longer access Ô¨Ålesystem mininet container assigned virtual ethernet interface man page entry veth connected container virtual ethernet link use veth link ensures virtual link behave like ethernet necessary disable tso tcp ofÔ¨Çoading view ethernet packet wireshark appear virtual wire process started mininet container inherits container s view network interface efÔ¨Åciency mininet container share Ô¨Ålesystem default make setup simple cause problem application expect individualized conÔ¨Åguration Ô¨Åles speciÔ¨Åed cation mininet container canbe conÔ¨Ågured container private directory conÔ¨Åguration Ô¨Åles quagga routing bgp example avoid feature mininet form network emulation opposed simulation important advantage emulation network software layer simply run simulator environment hand application protocol implementation need ported run simulator used drawback emulation network get large complex emulation slow particular possible emulate link speed faster underlying hardware support possible emulate network software mininet group maintains extensive documentation useful starting place overview introduction faq goal chapter present series mininet example upgraded following upgrade mininet distribution mininet mininet vm widespread mininet python Ô¨Åle conÔ¨Ågures network start mininet interface necessary start command various node container use python Ô¨Åles arguably make conÔ¨Ågurations easier edit avoids complex argument standard mininet example python code us mininet documentation call api mininet distribution come set example directory particular listed exception example presented use technique demonstrates mininet node private directory node introduction computer network release share common Ô¨Ålesystem demonstrates arrange multiple sdn controller different switch connecting different controller demonstrates set cpu utilization limit link bandwidth creates node act router host node act router provided enable forwarding sysctl graphical editor mininet network demonstrates host switch demonstrates connect host internet creates network node occasionally need supplemental program egfor sending monitoring receiving trafÔ¨Åc meant modiÔ¨Åed necessary meet circumstance contain option setting supplemental program written installing mininet mininet run linux operating window mac user easily run mininet single linux virtual machine linux user wish running mininet nontrivial potential affect normal operation process started mininet example interfered suspend feature author s laptop mininet group maintains virtual machine current mininet installation mininet vm tion downloads site mininet vm option option listed version used version linux download Ô¨Åle actually Ô¨Åle unzips modest Ô¨Åle deÔ¨Åning speciÔ¨Åcations virtual machine larger gb Ô¨Åle representing virtual disk image virtual disk fully utilized footprint just gb choice software option supported free personal use virtualbox vmware workstation player using miniet vm option open Ô¨Åle virtualbox import appliance option easier simply create new linux virtual machine specify use existing virtual disk select downloaded Ô¨Åle disk login password mininet vm option mininet logged sudo command used obtain root privilege needed run mininet principle safest basis egsudo python possible terminal window open permanently logged root egviasudo bash preinstalled mininet vm doe notcome desktop lightweight option recommended mininet site install alternative desktop environment lxde half size ubuntu install lxde mininetan introduction computer network release install xinit lxde standard graphical text editor included lxde leafpad course eggedit emacs installed desktop installation command startx necessary login start graphical ronment automate mininet python approach create ubuntu virtual machine lubuntu lighter option using downloaded disk image option http stall mininet virtual machine us script mininet github repository cloned git clone http instruction downloads site approach like mininet vm option includes additional package commonly used mininet openvswitch pox note default changed mininet vm explicitly setting link speed delay queue capacity bottleneck link improves consistency standard recommendation new linux system installing update upgrade software offer special package improve compatibility host annoying incompatibility tendency virtual machine grab mouse allow dragged outside window usually special keypress release mouse virtualbox default control key vmware player installation compatibility package virtualbox called guest addition usually requires mounting cd image command mount mininet installation mininet vm cloned github upgraded follows assuming hold cloned github Ô¨Åles http cd git fetch git checkout master specific version like git pull script accepts option simplest environment beginner install graphical desktop eglxde ubuntu work allows seamless opening xterm wireshark necessary enabling virtual host convenient installing mininet introduction computer network release xterm font size quite small changed clicking right mouse button holding control key pasting clipboard clicking middle mouse button text screen copied automatically selected copied xterm internal clipboard clipboard changed selecting select clipboard option menu pop middle mouse button keyboard alternative available mouse possible work entirely desktop using multiple ssh logins window forwarding enabled ssh username mininet doe require host available window example point open graphical program ssh command line egwireshark gedit program window display properly close properly finally possible access mininet virtual machine solely ssh terminal session window launch xterm wireshark simple mininet example starting mininet mncommand root argument creates simple work host switch start mininet interface cli convention mininet host name begin h switch name begin s numbering begin point issue various command command node example yield following output available node controller switch default controller action make like ethernet learning switch ethernet learning algorithm command intfs list interface node link list connection useful command net show node interface connection lo network look like mininetan introduction computer network release running command node step run command individual node use mininet cli preÔ¨Åx command node ifconfig ping Ô¨Årst command show properly ip address note second recognized ifconfig command show mac address vary like following section mac address special mininet command pingall generates ping pair host open shell window node mininet command work host node switch node xterm note xterm run root privilege xterm command ping fails recognized switch ping add entry ip address mininet share Ô¨Ålesystem mean entry deÔ¨Åned mininet forewarned different mininet conÔ¨Åguration assigns different address chaos ensue example use hostnames assuming entry xterm try logging ssh ssh deÔ¨Åned connection refused ssh server running node return following example start wireshark listen interface progress ping start wireshark host node say enter wireshark themininet prompt launch wireshark xterm window running approach interface visible method work starting wireshark switch node simpler way take advantage fact unlike host interface switch interface default visible linux simple example simply start wireshark level outside mininet interface interested won t generally exist mininet started term mininet container model switch default network namespace share root namespace host running following mininet command line example simple mininet example introduction computer network release ifconfig comparing output ifconfig run mininet host mininet running using terminal notassociated mininet process example interface lo interface controller node net andintfs command showed interface mininet wireshark demo advantage simple conÔ¨Åguration observe trafÔ¨Åc wireshark nearly idle network default mininet node connected outside world starting mininet terminal window start wireshark set listening say watch tcp connection start xterm window run netcat netcat point arp exchange followed tcp handshake type line text netcat watch data packet returning ack wireshark drill data packet message content typing netcat result closing exchange fin packet trafÔ¨Åc wait long repeat arp packet shark Ô¨Åltering generally needed busier environment Ô¨Ålter trafÔ¨Åc wireshark Ô¨Ålter option multiple switch line example creates topology host subnet command link used determine switch interface connected neighboring switch interface program run use mininetan introduction computer network release conÔ¨Ågures network start mininet cli default number pair changed parameter example selected part program start building network topology object linetopo extending mininet class topo create host node override overriding build actually common class linetopo topo self kwargs create linear topology super linetopo self kwargs h list host h s list switch forkey inkwargs ifkey key add n host hn foriinrange str take string build host object mediately append new host object list h switch using topo addswitch add n switch sn foriinrange str build link note h h represent hn build link link foriinrange n add link hi si h s foriinrange link switch s s main program use argparse support argument defmain kwargs parser n args n n multiple switch line introduction computer network release create linetopo object deÔ¨Åned set info having problem set debug ltopo linetopo setloglevel finally ready create mininet net object start ve speciÔ¨Åed type switch point doe really matter doe matter using defaultcontroller switch behave automatically ethernet learning switch autosetmacs option set host mac address great convenience manually examining ethernet address net mininet topo ltopo switch ovskernelswitch controller defaultcontroller autosetmacs true finally start mininet cli exit stop emulation cli net conÔ¨Åguring ssh example want run sshd mininet node fragment start daemon node command automatically put background need add string run command background foriinrange hi net str usingsshd requires small bit conÔ¨Åguration ssh root user set Ô¨Årst root run better creates public private key Ô¨Åles rsa key default Ô¨Åles respectively option advantage key public key shorter typically Ô¨Åts single line terminal window unless virtual machine used connection need protect key password enable passwordless login second step directory copy new Ô¨Åle Ô¨Åle exists append ssh command Ô¨Ånicky directory allow access owner permission rwx Ô¨Åle writeable owner finally linux distribution lock root account unlocked giving root account password editing Ô¨Åle changing Ô¨Åeld mininetan introduction computer network release started sshd host command ssh successfully connect Ô¨Årst time connection root ssh ask conÔ¨Årmation store s key Ô¨Åle mininet node common Ô¨Ålesystem subsequent request connect h succeed immediately authenticated node finally note ssh return immediately starting persistent process remote host need like command question ssh hostname running webserver let s run web server say host example python includes simple implementation serf Ô¨Åles directory started running start xterm host change directory html Ô¨Åles run following command server port number python simplehttpserver run background output redirected server eventually hang step start browser desktop environment installed eglxde installing mininet browser available lxde come start xterm host run following option necessary run chromium root assuming chromium open successfully enter following url chromium doe start try wget store receives Ô¨Åle way listing directory possible browse subdirectory Ô¨Åletypes open directly directory subdirectory namedhtml areiperf iptables andxarchiver try navigating ip router line example build mininet example involving router switch router simply mininet host ip forwarding enabled linux kernel mininet support host somewhat fragile interface need initialized speciÔ¨Åc order ip address assigned point link created code presented assign ip address using call used invoke linux command ifconfig mininet container fully support use alternative ip addr command Ô¨Årst router topology host end n router diagram subnets program set invoked python use example somewhat simpler version program set topology speciÔ¨Åcally ip router line introduction computer network release version program routing entry created route trafÔ¨Åc router route know reach directly connected verify connectedness running wireshark ortcpdump Ô¨Årst starting xterm running ping using mininet command ping ortcpdump arriving icmp ping packet arriving icmp destination network unreachable packet reply internet control message protocol turn routing considered suspicious interpretation packet involved source address shouldn t possible spoofed linux provides interface conÔ¨Åguration Ô¨Ålter block forwarding packet router doe route packet s source disabled example work note code filtering despite lack connectivity reach sequence ssh connection program enables sshd host router slogin slogin slogin slogin routing work needed tell reach destination following command executed automatically set true program ip route add ip route add bidirectional connectivity create following route ip route add ip route add building network topology host attribute set code router created addhost separate step continues page mininetan introduction computer network release continued previous page later router address net thesysctl command enables forwarding disables linux s default refusal forward packet router doe route packet s source wanted real world notnecessarily routing demonstration ultimately implemented sysctl command ip router simple implementation step automate discovery route using simple vector protocol present partial implementation routing information protocol rip deÔ¨Åned rfc alternatively use rip implementation quagga quagga routing bgp algorithm described algorithm brief idea add cost attribute forwarding table entry form xdestination cost router send xdestination cost ylists neighbor list referred rip speciÔ¨Åcation asupdate message router receiving message process Ô¨Ågure route destination format update message diagrammed addr family ip address netmask address metric rip speciÔ¨Åcation includes request message implementation omits speciÔ¨Åcation includes split horizon poison reverse triggered update split horizon triggered update omit finally include code increase case update rule include test link case triggered implementation Ô¨Åle time program waiting read update message router second program sends update ip router simple implementation introduction computer network release message communication udp packet sent using ip multicast ofÔ¨Åcial rip multicast address port used sending receiving creating separate thread receiving sending conÔ¨Ågure short second recv timeout timeout check time send update update second late approach doe matter program maintains shadow copy rtable real forwarding table added cost column real table updated route shadow table change program rtable dictionary mapping tablekey value consisting ip address mask tablevalue object containing interface cost run program production approach use mininet s start router assuming Ô¨Åle located directory mininet started demonstration program output observed program started xterm router multicast programming sending ip multicast involves special consideration arise tcp udp connection Ô¨Årst issue sending multicast group don t multicast route multicast tree global ip multicast conÔ¨Ågured likeis router trafÔ¨Åc forwarded neighboring router actually want conÔ¨Ågure multicast route want reach immediate neighbor setting multicast tree presumes know network topology point rip come play multicast packet send fact notbe forwarded neighbor enforce setting ttl multicast model local did want conÔ¨Ågure multicast route linux doe provide standard utility manual conÔ¨Åguration man page instead create socket separate router interface conÔ¨Ågure socket forward trafÔ¨Åc associated interface introduces complication need list interface interface associated address netmasks simplify life little assume interface single address function getifaddrdict return dictionary interface name string key pair ipaddr netmask value ifaddrs dictionary example ifaddrs implement getifaddrdict straightforwardly using python module netifaces demonstration purpose call list interface using myinterfaces interface ip address netmask intf following s siocgifaddr siocgifnetmask intfpack byte intf ifreq like struct ifreq ifreq siocgifaddr intfpack ipaddrn ifreq offset ip addr ifreq continues page mininetan introduction computer network release continued previous page ipaddr ipaddrn netmaskn siocgifnetmask intfpack netmask netmaskn return ipaddr netmask need create socket connected order ioctl thesiocgifaddr siocgifnetmask value come c language include Ô¨Åle library make constant available doe pas value provide directly underlying c ioctl return result c struct ifreq ifreq python version address netmask offset createmcastsockets position interface create udp socket used send receive interface information come linux man page functioncreatemcastsockets ifaddrs take dictionary mapping interface name ipaddr netmask pair interface intf conÔ¨Ågures follows list newly conÔ¨Ågured socket returned Ô¨Årst step obtain interface s address mask convert integer format ipaddrn andnetmaskn enter subnet corresponding interface shadow routing tablertable cost rtable tablekey subnetn netmaskn tablevalue intf create socket begin conÔ¨Åguring Ô¨Årst setting read timeout short value set ttl value used outbound packet go header time live Ô¨Åeld header mean downstream router forward packet exactly want rip us multicast send immediate neighbor want able bind socket source address port socket creating actual bind make socket receive packet arriving speciÔ¨Åed interface byte intf √£√± add following prevent packet sent interface delivered sender multicast delivery just false make socket send speciÔ¨Åed interface multicast packet destination address normally kernel chooses sending interface based ip forwarding table ip router simple implementation introduction computer network release override effect telling kernel route packet sent socket kernel able Ô¨Ågure route packet subsequent joining socket multicast group √£√±aton ipaddr finally join socket multicast group represented need face s ip address ipaddr addrpair ipaddr addrpair step bind socket desired address port speciÔ¨Åes source address outbound packet fail given using socket address multiple interface conÔ¨Åguration rip main loop rest implementation relatively nontechnical nicety use select wait arriving packet socket created createmcastsockets alternative poll socket turn short read timeout create separate thread socket theselect take list socket timeout value return sublist consisting socket data ready read just socket read data recording source address src used socket close removed select list socket close function take incoming message parsed list ripentry object ip address arrives run algorithm update rule thetablekey object representing new destination addr netmask pair new destination rule update rule plied tkis present existing rtable lower cost rule applied newcost currentcost increase rule applied newcost currentcost currentnexthop quagga routing bgp quagga package fully functional router package support rip ospf bgp simple example involving bgp quagga replacement earlier package known zebra quagga package named subspecies zebra goal create network router learn global routing map using bgp example using linear series router layout router mininetan introduction computer network release bgp router host set appropriate conÔ¨Åguration Ô¨Åles quagga daemon case zebra bgpd run daemon bgp node main mininet Ô¨Åle helper function setup requires conÔ¨Åguration Ô¨Åles host general information bgpd conf information mininet doe support having node private copy directory conÔ¨Åguration Ô¨Åles approach supplying Ô¨Åle name command line quagga daemon way node get conÔ¨Åguration Ô¨Åle unique location conÔ¨Åguration Ô¨Åles particularly tedious create introduce python code generate automatically automatically generated Ô¨Åles preserved reused desired appropriately adjusting code existing code deletes Ô¨Åles exit necessary example bgp routing Ô¨Åltering policy bgp filtering routing policy applied conÔ¨Åguration Ô¨Åle created subdirectory named router question preÔ¨Åxed path directory mininet started directory created exist set allow wrting log Ô¨Åles created need writable process root privilege speciÔ¨Åcation appropriate log Ô¨Åle absolute path ending appropriate directory creating conÔ¨Åguration Ô¨Åles involve extracting little topology information mininet network previously given mininet node object representing router say r Ô¨Ånd interface python given interface intf Ô¨Ånd node attached link connects finally given link lnk Ô¨Ånd interface connects sufÔ¨Åcient need Ô¨Årst conÔ¨Åguration Ô¨Åle quagga called Ô¨Åle need know router s password log Ô¨Åle interface participate routing example Ô¨Åle router Ô¨Ågure parameter bold zebra conÔ¨Åguration Ô¨Åle Ô¨Åle automatically generated hostname quagga routing bgp introduction computer network release password zpassword enable password epassword log Ô¨Åle interface multicast interface multicast creating Ô¨Åle interesting step listing interface connect bgp router Ô¨Årst create dictionary neighbor ndict bgp router r string name mininet object value ndict r bgp router string directly connected rvia link connected interface neighbor rconnected ordinary host router entry ndict created build ndict start list designated bgp router bgpnodelist code mininet object given node n list Ô¨Årst Ô¨Ånd n s interface interface Ô¨Ånd link connects endpoint node link endpoint node r course neighbor node looking second conÔ¨Åguration Ô¨Åle bgp route preference expressed demonstration include Ô¨Åle bgpd conÔ¨Åguration Ô¨Åle router Ô¨Åle automatically generated hostname password zpassword enable password epassword log Ô¨Åle router bgp bgp network announce conÔ¨Ågured directly connected network network mininetan introduction computer network release network network neighbor estabish bgp session neighbor neighbor quite bit information extract network topology Ô¨Årst item tonomous number assigned router arbitrary create asdict map string name number simplicity number nth router set item bgp value chosen largest alphabetical sorted order router s address router announce directly connected network create addrdict dictionary mapping router interface pair address preÔ¨Åx length assigned interface dictionary includes router bgp router unlike ifdict includes terface ndict simplicity entry dictionary string mininet object finding address assigned mininet interface involves slight complication set previously explicit call ifconfig egwith need query relevant node interface Ô¨Ånd address attached advantage fact mininet method return python string output command run function node intf run command ip addr list dev intf node command widely used view interface ip address command output stored string s string parsed Ô¨Ånd address assignment technique allows mininet node property queried mininet run command creation network line conÔ¨Åguration Ô¨Åle interface straightforward Ô¨Ånal step neighbor line need Ô¨Ågure neighbor bgp router Ô¨Ånd ip address use connect original router issue bgp isthe routing algorithm rely routing information route bgp router neighbor practice mean bgp neighbor directly connected real world route bgp speaker typically known side interior routing protocol example given router say bgp neighbor Ô¨Ånd ip address assigned link connecting straightforward dictionary ndict andaddrdict point Ô¨Åre mininet short conÔ¨Årm ping conÔ¨Årming routing working quagga routing bgp introduction computer network release anycast try speciÔ¨Åc bgp anycast routing bgp anycast host address righthand interface rightmost bgp router address subnet bgp start error ping setting Ô¨Åle use traceroute path run ping following traceroute hop max byte packet m m m m m m m m m m m m try probably way exact dividing point vary run traceroute hop max byte packet m m m m m m m m m conÔ¨Çict rightmost h having address entire network partitioned bgp portion belief left disjoint portion belief right attach server reach destination whichever route better logging router adjust conÔ¨Ågurations Ô¨Çy using router interface password conÔ¨Åguration Ô¨Åles Ô¨Årst password grant access second allows change quagga interface quite similar used cisco router switch offer excellent opportunity gain familiarity cisco interface ready access cisco hardware interface privilege level user level typical prompt privileged command level typical prompt global conÔ¨Åguration level typical prompt conÔ¨Åg speciÔ¨Åc conÔ¨Åguration level typical prompt mininetan introduction computer network release log bgp router open xterm window node use command telnet localhost bgpd bgpd represents tcp port numeric form used password requested zpassword Ô¨Årst password point lowest privilege level typically available command list command obtained list command useful command bgp summary privilege level type enable ask enable password speciÔ¨Åed conÔ¨Åguration Ô¨Åle example us epassword level command try display privilege level separate password entering configure terminal enters conÔ¨Åguration level Ô¨Ånal step specify just conÔ¨Ågured egwithrouter bgp number Ô¨Ånal privilege level command including command entered example advertise new network following just entered network router running command doe direct connection speciÔ¨Åed network amount tobgp hijacking sidebar bgp filtering routing policy set number bgp router example set connection run connection broken router effect told way reach destination trafÔ¨Åc arrives simply undeliverable traceroute command used verify trafÔ¨Åc go dy proper trafÔ¨Åc Ô¨Çow restored command network tcp competition routing example us following topology order emulate competition tcp connection introduce mininet feature set link emulated bandwidth delay set router emulated queue size Ô¨Årst application arrange tition tcp reno tcp reno congestion management tcp vega tcp vega Ô¨Åle running mininet conÔ¨Åguration mbit mbit mbit want link bottleneck making instance singlebell topology ample competition queue utilization need able control bandwidth delay queue size link topology fairly standard tcp competition really tcp competition introduction computer network release need separate sender r r link different propagation delay differ attribute run tcp simpliÔ¨Åes conÔ¨Åguration discussed bottleneck bandwidth shown particularly high adjusted product network shown kb interested tcp competition determine tcp best alternatively interested order verify new tcp sense tcp friendliness interested tcp competition context tcp problem tcp problem goal proposed new tcp competes fairly respect reno lower bandwidth performs unfairly respect reno higher bandwidth desideratum finally interested comparing tcp connection different rtts different starting time interested comparing tcp context speciÔ¨Åc trafÔ¨Åc environment environment experiment involve sender small randomizing trafÔ¨Åc interested competition environment large number connection share link measuring relative tcp performance fraught potential misinterpretation tant question long competition run place competition performance usually interesting case tcp reno example adjusts cwnd sequence teeth state competition run minimum teeth general answer competition long yield reasonably consistent result longer naively expected reno tooth size estimated bottleneck queue capacity plus transit capacity product nominally quantity sum m cwnd range m length tooth rtts tcp bottleneck link utilization tcp reno loss rate versus cwnd rtt rtts second turn raise question value use capacity queue classic answer tcp reno bottleneck queue capacity large transit capacity ensures absence competition single connection receives bottleneck bandwidth tcp bottleneck link utilization having connection leaf link unusual situation event large queue tend aggravate bufferbloat problem bufferbloat queue capacity particularly important comparing reno vega tcp vega versus tcp reno theory predicts tcp vega best small queue variable kept somewhat mind sequel primarily address mechanic setting measuring tcp competition emulating bandwidth delay queue consider following diagram want r fifo queue Ô¨Årst tional queue maximum capacity link bandwidth mbps introduce b delay mininetan introduction computer network release s m delay queue size packet conceptually happens packet arriving r dropped r s fifo queue packet dropped wait r s fifo queue r send earlier packet rate packet sent r wait m propagation delay arriving b immediately accepted processing emulate successfully need apply limit fifo queue bandwidth delay order matter generally fifo queue immediately precede bandwidth throttler implemented appropriate linux queuing discipline sense queuing discipline queuing discipline generally attached r s interface face b b s interface facing formally emulation mechanism equivalent physical conÔ¨Åguration arbitrary sequence packet ny p ihas size s iand sent time t packet arrival time b packet loss physical conÔ¨Åguration avoid formal equivalence proof idea equivalence occur rule applied order linux long queuing discipline implementing bandwidth throttling example htb linux htb htb support multiple trafÔ¨Åc class simpler token bucket filter tbf applies bandwidth throttling trafÔ¨Åc uniformly linux netem network tor queuing discipline support delay traditional fifo queue offer mechanism bandwidth throttling netem support model packet duplication corruption reordering variable delay jitter use feature subtle nicety trafÔ¨Åc emulator particularly come bandwidth tling htb tbf quite meant emulate physical bandwidth single link token bucket token bucket rate limiting generally apply Ô¨Ålter line idle allow bucketful packet sent using htb tbf choosing small bucket size burst size parlance choose burst size toosmall run issue linux system speciÔ¨Åc interrupt frequency denoted hz representing number interrupt second htb tbf netem wake process packet interrupt author s laptop example meaning interrupt occur m traditionally hz system interrupt queuing discipline wake send batch packet speciÔ¨Åcally number packet need sent time interval order maintain desired bandwidth htb tbf support burst parameter designated burst size smaller size cluster sent bandwidth fall short packet byte packet cpu interrupt yield bandwidth mbps send mbps need burst parameter byte general tcp competition introduction computer network release send rate r need burst size rounded multiple byte bit byte advantage using netem calculates netem issue consequence use token bucket bandwidth throttling bucket size usually large packet single packet delayed example increase size ofping packet Ô¨Ånd rtt reported ping command unchanged individual ping packet delayed Ô¨Ålter mininet us htb default specifying link rate limit netem used delay fifo queue convenience mininet default critical link having netem handle mean avoid having deal putting thing right order Ô¨Åle use netem bottleneck link specify netem rate mbps delay m size use following netem rate delay limit add interface need preface tc qdisc add root dev link emulation mininet create link mininet support simply set mininet inmain tclink class represents trafÔ¨Åc controlled link topology section call addlink add keyword parameter neckbw number represents mbps delay string example create link use build method r b bw implement mininet creates queuing hierarchy hierarchical queuing htb qdisc root provides bandwidth throttling netem qdisc provides delay hierarchy managed tc trafÔ¨Åc control linux trafÔ¨Åc control tc command lartc subsystem topology assuming delay bandwidth limit declared link mininet set queue way using thetc qdisc command handle netem queue set maximum fifo queue size example following command r tc qdisc change dev handle netem limit alternatively wish use netem simply ignore mininet s bandwidth delay option link include following run section qdisc add root dev netem rate delay limit mininetan introduction computer network release python utility tcp competition order arrange tcp competition introduce following tool open tcp connection send bulk data requesting speciÔ¨Åc tcp control mechanism reno vega receive data connection track result send random additional data break tcp phase effect program similar transmits speciÔ¨Åed number block allows speciÔ¨Åcation tcp congestion algorithm following setsockopt cong wherecong reno cubic available tcp Ô¨Çavor list edited include entry choosing tcp linux accepts positional argument number block send ip address hostname port number algorithm typically run follows port listening port following section reno vega sender used support selection tcp algorithm receiver s data listens port default connection begin reading main loop start select wheresset list connected socket sl select sset valueslis sublist sset consisting socket data ready read normally list consisting single socket data arriving contain s sl record running total byte received tcp competition introduction computer network release sender close socket result read byte point close socket point removed sset appear sllist repeatedly set timer printstats print value second interval reÔ¨Çecting cumulative amount data received connection variable set tofalse value printed amount data received recent time interval tcp competition fair stay approximately equal python calling exit exit current thread thread running given single parameter matching number block sent sender allows exit soon competition option left terminates detects change phase effect completely deterministic travel time competing tcp connection throughput differing factor simply unfortunate synchronization transmission time introduce degree randomization order obtain meaningful result phase effect overhead used overhead attribute ble real network thing introduce random trafÔ¨Åc phase effect telnet trafÔ¨Åc purpose program sends udp packet random interval use udp tcp like combine small packet fewer larger one length interval exponentially distributed meaning Ô¨Ånd length interval choose x randomly uniform distribution set length wait interval constant time x packet size byte atypical value real telnet trafÔ¨Åc crucially average rate sending held small fraction default available bottleneck bandwidth supplied constant bottleneckbw mean udprandomtelnet trafÔ¨Åc interfere signiÔ¨Åcantly competing tcp connection course additional interval whatsoever packet transmission dictated sliding window udprandomtelnet trafÔ¨Åc appears quite effective eliminating tcp phase effect udp used run small tcp packet typically end coalesced larger tcp packet defeat purpose sends port default usually use netcat netcat receiver interested measuring throughput trafÔ¨Åc run netcat principle competition result obtained presence running valid presence particular pattern random trafÔ¨Åc practice doe appear randomness eliminates tcp phase effect phase effect equivalent mininetan introduction computer network release monitoring cwnd end competition look output determine overall throughput connection time Ô¨Årst connection send data just Ô¨Ånished plot throughput interval plotting successive difference value doe view connection s cwnd readily available modeling competition simulator network simulation essentially tcp exhibit degree variation cwnd meant converge sense value average example tcp reno variation tcp sawtooth state graph cwnd versus time useful understanding connection behavior minimum experiment meant demonstrate behavior run long include multiple teeth tooth analog tcp question thousand teeth appropriate end linux kernel version kernel module available reportcwnd value longer supported leaf following method monitor approximate cwnd eavesdropping data ack packet Ô¨Çight use thesscommand socket statistic sender parse cwnd data output monitoring cwnd eavesdropping approach monitor number packet byte connection Ô¨Çight difference highest byte sent highest byte acknowledged highest byte acked value ack Ô¨Åeld recent ack packet highest byte sent value seq Ô¨Åeld plus packet length recent data packet ack seq number requires eavesdropping network trafÔ¨Åc using library libpcap program us module libpcap named corresponding c library monitor packet interface router slightly accurate monitor entail separate monitoring different node difference small link negligible delay queuing conÔ¨Ågured monitor tcp connection competing note use outbound interface packet don t waiting r s queue way libpcap work Ô¨Årst create packet Ô¨Ålter identify packet want capture Ô¨Ålter used connection mininet example host andtcp andportrange host course packet captured source host destination host similarly packet captured source port destination port connection port connection port connection time packet arrives heading code determine destination port dport save tcp header seq Ô¨Åeld plus packet length time packet seen heading source port record tcp competition introduction computer network release tcp header ack Ô¨Åeld packet captured array byte use python dpkt module decode ip tcp header parsepacket p byte function extract tcp source destination port sequence acknowledgement number tcp data defparsepacket p p captured packet eth p notisinstance return ip notisinstance return tcp return separate thread used interface connection variant select available return captured packet interface seq ack Ô¨Åelds isn cancel subtract seq ack value subject wraparound timer Ô¨Åres regular interval print difference isn t completely close noise result minimized taking running average difference row necessary delete Ô¨Årst record variable assigned measured value monitoring cwnd s thesscommand collect variety statistic tcp connection matching certain criterion value ofcwnd reported packet multiply value obtained ms stylized setting connection run s repeatedly see connection comparing connection starting host arrange thread process monitoring connection port port program invokes ssat appropriate interval print time cwnd record standard output take remote host port number argument started egby shell script soon corresponding tcp connection started like dir supply pathname blockcount reno alternatively code combined better control note output time necessity absolute linux timestamps easily synchronize thread running different mininet node subtract common start time mininetan introduction computer network release synchronizing start issue sender start time approach use ssh command run r ssh reno ssh vega ssh command millisecond complete faster method use netcat trigger start run shell script like separate value port cong needed simplest implement separate script say netcat block port cong start close time following r delay link command typically complete millisecond option mean netcat quit immediately input alternative connection remain open reverse direction echo hello netcat echo hello netcat sequence step start netcat receiving output start sender start start script wait signal start possibly followed using cwnd eavesdropping start r send start trigger netcat somewhat cumbersome help incorporate hierarchy shell script tcp compeition reno v vega graph tcp reno versus tcp vega set vega parameter ùõºandùõΩto implementation tcp vega mininet virtual machine doe support changing ùõºandùõΩ default value like vega Ô¨Åghting chance reduce queue size r graph monitoring throughput tcp competition introduction computer network release vega tcp vega getting smaller share bandwidth overall tcp reno s consistently holding turn tcp vega greatly helped small queue size queue size doubled vega get share upper graph reno sawteeth versus vega triangular teeth sloping sloping compare graph tcp reno versus tcp vega tooth shape somewhat mirrored throughput graph throughput proportional queue utilization proportional number packet Ô¨Çight tcp competition reno v bbr apply technique compare tcp reno tcp bbr create graph tcp bbr mininet approach usable soon tcp bbr module linux released source form use simulator hand entail waiting tcp bbr ported simulator nicety essential fqqueuing discipline enabled tcp bbr sender example following mininet code remove existing queuing discipline add fq qdisc del dev root qdisc add dev root fq purpose fqqueuing discipline enable pacing transmission packet regular small interval mininetan introduction computer network release linux trafÔ¨Åc control tc linux tccommand trafÔ¨Åc control allows attachment implemented queuing discipline queuing scheduling network interface usually router hierarchical example appears linux htb tc command used extensively mininet control example link queue capacity explicit example adding fqqueuing discipline appears immediately example presented section involve simple Ô¨Åltering using tbf classful Ô¨Åltering using htb use example apply Ô¨Åltering class connection connection receive Ô¨Åltering granularity rate control limited timer granularity typically tbf able schedule packet transmission rate packet millisecond tbf schedule packet transmission likely sent burst start interval tc scheduler able achieve Ô¨Åner pacing control egthe fq qdisc tcp competition reno v bbr mininet topology case involves single router host use example option router interface connecting connecting desired topology built using ignoring host send data use default tcp congestion rithm receive data use initially just connection sending signiÔ¨Åcant data set constant tofalse print interval number byte received recent interval modiÔ¨Åed version redirect stderr message start start main sender following address number block dualreceive program reading connection enabled need create second connection order started second connection sends single block data point dualreceive generate output somewhat like following timestamps Ô¨Årst column rounded nearest millisecond number middle column linux trafÔ¨Åc control tc introduction computer network release mean average receiving mb gbps run command reduce rate tcrequires abbreviation mbit treat mbps megabyte second Ô¨Ålter parameter rate burst purpose limit parameter used netem qdiscs specify maximum queue size waiting packet value signiÔ¨Åcant low value lead packet loss momentarily plunging bandwidth high value hand lead bufferbloat bufferbloat tc qdisc add dev root tbf rate burst limit output like byte m mbps received application data extra mbps corresponds packet header byte wireshark need disable tso tcp ofÔ¨Çoading change rate dynamically tc qdisc change dev root tbf rate burst limit use tbf allows throttle police alltrafÔ¨Åc interface suppose want police selected trafÔ¨Åc use hierarchical token bucket htb set htb root node limit create child node policed trafÔ¨Åc default trafÔ¨Åc root htb qdisc handle root class mbit classid policed leaf class mbit classid leaf class mbit classid create htb hierarchy Ô¨Årst create root qdisc associated root class need raw interface rate taken class identiÔ¨Åers form major minor major integer root handle minor integer absolutely need create root class child common parent class share bandwidth mininetan introduction computer network release tc qdisc add dev root handle htb default tcclass add dev parent classid htb rate create child class qdiscs trafÔ¨Åc default trafÔ¨Åc class classid default class classid child class class qdisc parent tcclass add dev parent classid htb rate tcclass add dev parent classid htb rate need classiÔ¨Åer orÔ¨Ålter assign selected trafÔ¨Åc class goal police trafÔ¨Åc port default accepts trafÔ¨Åc port classiÔ¨Åers available example man bpf man based berkeley packet filter virtual machine packet recognition use mainly work reliably iptables fwmark mechanism used earlier routing attribute iptables intended Ô¨Åltering modifying ets associate fwmark value packet bound tcp port command thefwmark value doe packet exists packet remains kernel iptables append forward table mangle protocol tcp dport jump √£√±mark run packet forwarded tcp port receive fwmark arrival step tell tcsubsystem packet fwmark value placed class class following command flowid used synonym classid tc filter add dev parent protocol ip handle fw classid view setting tc qdisc dev tcclass dev tc filter dev parent iptables table mangle list verify work tbf sender time sender send large amount data work shortly second sender start like output taken tcp connection cwnd stabilize middle column number received data byte policed port continues page linux trafÔ¨Åc control tc introduction computer network release continued previous page byte header packet requested mbit cap yield byte sec slight reduction appears related tcp competition rate achieved connection terminates openflow pox controller section introduce pox controller openflow openflow switch switch allowing exploration networking networking example earlier mininet included parameter cause switch behave like ordinary ethernet ing switch using pox create customized controller investigate option switch operation pox preinstalled mininet virtual machine pox written receives sends openflow message response event message purpose grouped following category switch informing controller arriving packet usually switch doe know forward packet doe know forward packet ing packetin event result controller providing new forwarding instruction switch connected controller point controller give switch initial instruction switch informing controller link available unavailable includes initial report link availability switch s response openflow barrier message meaning switch pleted response message received barrier begin respond message received barrier pox program come demonstration module illustrating controller grammed directory starting point pox tation pox wiki archived copy thing includes brief outline program review program written james mccauley licensed apache license pox code data structure closely tied openflow switch speciÔ¨Åcation version technical library Ô¨Årst example pox suppose copy Ô¨Åle make following change mininetan introduction computer network release change controller speciÔ¨Åcation inside mininet add following line immediately following mininet c remotecontroller c c modiÔ¨Åed version available rc remote controller run iÔ¨Åed version ping fail remotecontroller c doe exist absence troller switch default response start pox directory follows load Ô¨Åle ping connectivity restored switch connects controller address tcp port point controller able tell switch example conÔ¨Ågures switch simple hub Ô¨Çooding arriving packet terfaces linear topology doesn t matter relevant code event msg port msg handler connectionup event invoked switch Ô¨Årst report duty switch connects controller code instructs switch forward arriving packet virtual port mean forward port theevent parameter class connectionup subclass class event deÔ¨Åned object pox include connection Ô¨Åeld controller use send message switch dpid Ô¨Åeld representing switch identiÔ¨Åcation number generally mininet switch dpid code creates openflow message msg type message deÔ¨Åned openflow standard Ô¨Åeld list action taken list append action forwarding designated virtual port normally append list matching rule packet forwarded want forward packet matching needed different functionally equivalent approach taken response connectionup event involves communication switch connection stored instead switch report arriving packet controller controller responds telling switch Ô¨Çood packet port approach doe result sufÔ¨Åcient unnecessary trafÔ¨Åc used production code code slightly consolidated look like openflow pox controller introduction computer network release self event packet parsed packet data actual message packet self packet msg action port action msg event instance class packetin time switch sent packet message switch packet object different view packet Ô¨Årst parsed generally easier obtain information second represents entire packet received switch format sent switch Ô¨Åeld virtual port equivalent hub implementation start wireshark ping ping demonstrates example behaving like hub switch pox example implement real ethernet learning switch switch implementation discussed learning switch openflow module act ethernet address layer layer Ô¨Çows speciÔ¨Åed src dst pair address module started pox command straightforward implementation ethernet learning switch run problem switch need contact controller packet source address seen controller send switch forwarding rule reach source address primary lookup switch Ô¨Çow table destination address approach used us single openflow table versus mechanism learned Ô¨Çow table match entry include match rule source destination address packet separate entry necessary pair communicating host number Ô¨Çow entry scale o present scaling problem large switch ignore switch see packet unmatched dst src address pair forward controller case consider controller doe know reach destination address current switch tell switch Ô¨Çood packet controller record later reference packet source address arrival interface controller know destination address reached switch switch port sends switch instruction create forwarding entry dst src time controller sends switch reverse forwarding entry src dst forwarding port packet arrived controller maintains partial map address switch port dictionary table take switch destination pair key return switch port number value switch mininetan introduction computer network release sented object used reach switch destination address sented pox ethaddr object program handle packetin event main step packetin handler follows packet arrives switch source table table step check entry table destination looking table notan entry packet get Ô¨Çooded mechanism create message containing packet send switch hand controller Ô¨Ånds destination address reached switch port proceeds follows Ô¨Årst create reverse entry port packet just arrived msg reversed dst src reversed dst src port msg like forwarding rule created forwarding speciÔ¨Åc port virtual port importantly adding rule step create similar matching rule Ô¨Çow andto include packet retransmitted message doe double duty message msg forward incoming packet reversed time port msg object quite potential matching Ô¨Åelds following taken attribute meaning switch port number packet arrived ethernet source address ethernet destination address ethertype length bit protocol tcp lower bit arp opcode source address ip destination address source port destination port openflow pox controller introduction computer network release possible create object match Ô¨Åelds given packet watch forwarding entry created linux program suppose pox module mininet ping ping run command mininet virtual machine linux prompt used option mininet ethernet address assigned host easy follow Ô¨Årst fourth line result pinging output port end line reachable port port similarly middle line result pinging lie s port port number correspond interface number shown diagram multiple switch line example accomplishes effect using o n space doe use openflow table destination address source address implementation source address held table destination address held table reverse approach outlined learning switch openflow refers network layer nxrefers nicira extension pox enable use multiple Ô¨Çow table initially table set try match source address match packet forwarded controller andsent table match packet sent table controller table look match destination address packet forwarded destination match packet Ô¨Çooded using openflow table pox requires loading nicira extension nx module require slightly complex command line nicira require instead action table set handling connectionup event action default action rule included priority low recall openflow switch packet match multiple entry entry highest priority win priority set pox default priority used implicitly mininetan introduction computer network release later entry Ô¨Årst step arrange table forward controller table msg necessary default low priority port table msg tell table Ô¨Çood packet default msg port msg deÔ¨Åne packetin handler come table match packet source match source address seen controller packet longer forwarded controller forwarded table msg match source table msg come table match destination address know point packet source address came port forward packet addressed port msg rule applies packet port msg note network state maintained controller analog table dictionary suppose simple network sends controller add s table entry indicating known source address add s table entry indicating reachable port s left similarly reply added table table goal multitrunk example illustrate different tcp connection host routed different path case different trunk line example standard distribution mininet pox unlike example discussed example consist mininet code set speciÔ¨Åc network topology corresponding pox controller module written work properly topology real network evolve time making tight link topology controller impractical work openflow pox controller introduction computer network release datacenters purpose illustrate speciÔ¨Åc openflow possibility relatively simple setting multitrunk topology involves multiple trunk line host following gram trunk line multitrunk topology packet flooded link mininet Ô¨Åle corresponding pox module number trunk line default changed setting variable prevent looping broadcast trafÔ¨Åc Ô¨Çooding tcp trafÔ¨Åc take refer direction tcp connection Ô¨Çows consistent usage header routing vary Ô¨Çows doe matter original connection opened Ô¨Årst tcp Ô¨Çow subsequent connection alternate robin fashion achieve course include tcp port openflow forwarding information link bandwidth set mininet involves using option tc stand trafÔ¨Åc control make use bandwidth limit tclinks queue size set tcp compeition reno v vega arp icmp trafÔ¨Åc openflow table used thepacketin sage arp icmp packet switch learn mac address host controller learns switch port directly connected host tcp trafÔ¨Åc handled differently initial handling connectionup message switch receive default instruction arp icmp packet switchnode object created controller switch object eventually contain information neighbor switch host reached switch port point information available step handling linkevent message initiated discovery module module included command line order example work discovery module sends switch connects controller special discovery packet link layer discovery protocol lldp format packet includes originating switch s dpid value switch port originating switch sent packet lldp packet received mininetan introduction computer network release neighboring switch switch forward controller dpid port receiving switch point controller know switch port number end link controller report multitrunkpox module linkevent event aslinkevent message processed multitrunkpox module learns switch port connect directly neighboring switch end linkevent phase generally take second switch s switchnode know directly connected neighbor switch known directly connected neighbor host host sent packet host pair packet associated packetin event tellmultitrunkpox switch port connected host ethernet address learning take place execute ping example information contained switchnode graph complete suppose open tcp connection egvia ssh Ô¨Årst packet tcp syn packet switch packet forward controller packetin handler process create Ô¨Çow packet flow flow psrc pdst path assigned Ô¨Çow dictionary Ô¨Årst packet case path exists create Ô¨Årst picking trunk trunkswitch picktrunk flow path findpath flow trunkswitch Ô¨Årst path python list switch represented switchnode object supposedly Ô¨Ånal step result flow path create forwarding rule switch path switchnode object know use reach Ô¨Årst tcp syn packet preceeded arp exchange arp exchange willresult port use reach thisshould work fact doe problem pox creates separate internal thread handling handling thread stalled location appropriate switchnode object time thread call need location race condition unfortunate avoided fallback creating path fails Ô¨Çood tcp packet chosen trunk wait tcp packet try soon reach succeed run create xterms create ssh connection forwarding entry using let run restricting attention Ô¨Çow entry little sorting openflow pox controller introduction computer network release tcp tcp tcp tcp Ô¨Årst entry represent Ô¨Årst connection source tcp port routed output port port port us reach output mininet link command includes similarly output port used second connection source tcp port reach switch host port seen entry correspond reverse openflow timeout inÔ¨Ånite good idea running indeÔ¨Ånitely steady stream tcp connection doe make easier view connection disappear production implementation need Ô¨Ånite timeout ensure connection idle longer timeout interval properly resumed sending multitrunk strategy presented compared routing ecmp case trafÔ¨Åc divided multiple path improve throughput individual tcp connection assigned trunk controller reassigned improve load balance ecmp common assign tcp connection path pseudorandom hash case approach offer potential better control distribution trafÔ¨Åc trunk link conÔ¨Ågurations ecmp route packet multiple link packet basis basis allows better load balancing openflow support approach select group mechanism matching entry forward trafÔ¨Åc group instead port action select group select set output action basis apply action packet principle implement successive packet sent fashion practice pox support select group appears insufÔ¨Åciently developed time writing make practical example demonstrates simple load balancer topology somewhat reverse previous example host end trunk line switch host act server renamed mininetan introduction computer network release r c server address normally lead chaos server allowed talk controller ensures server aware particular controller make sure server simultaneously reply arp query mininet Ô¨Åle corresponding pox module noderis router switch interface assigned separate subnets host subnet share router rthen connects switch s connection fromsto controller ci shown idea tcp connection hi connected s server ti different connection connect different server implementation server choice Ô¨Årst tcp connection connect fourth connect server conÔ¨Ågured address address rewriting packet arriving left preceding example Ô¨Årst packet new tcp connection left right arrives s forwarded cwhich selects speciÔ¨Åc tiand creates sthe appropriate forwarding rule connection previous example tcp connection involves flow object direction separate openflow forwarding entry created Ô¨Çow need path main work routing tcp connection look like server pickserver flow flow server addtcprule flow ti port addtcprule port lead r biggest technical problem arp normally rand thetiwould contact arp Ô¨Ånd appropriate lan address end identical address instead create static arp entry know checking mac address mininet Ô¨Åle run following command ti arp creates static arp entry ti leaf knowing mac address default router result issue arp query Ô¨Ånd direction openflow pox controller introduction computer network release similar r really plot think single mac address tithe mac address normally lead chaos giving address address ff install permanent arp entry rwith arp ff say sends tcp packet rforwards mac address ff thensforwards whichever instructed controller cto forward packet arrives tiwith correct address correct mac address ff accepted reply similar tisends torat mac address connectionup processing set rule icmp packet left routed way single responder ping request entirely possible important icmp message egfragmentation required df flag set lost result run program create xterm window connect ssh tell ve reached running ifconfig ethernet interface named t similarly finding way distinguish tiis easy simpler way connection rotation run ssh ifconfig themininet prompt time succession note successive interface name create connection run s look tcp entry destination address tcp ff tcp ff tcp ff different Ô¨Çows output port s corresponding Ô¨Ånal pox controller example take arbitrary mininet network learns topology set openflow rule trafÔ¨Åc forwarded shortest path measured hopcount openflow rule set demand trafÔ¨Åc host Ô¨Årst seen module compatible topology loop provided module loaded start module us module build map connection run algorithm spanning tree algorithm redundancy result list switch port Ô¨Çooding occur Ô¨Çooding disabled setting openflow attribute port port switch sthat disabled s mininetan introduction computer network release nicety module quite certain network complete recalculates spanning tree linkevent module action create mininet network switch loop exercise run following switch like following verify mininet link command connected interface verify tcpdump packet endlessly circulating verify used surprising learning strategy learns ultimately learns source address Ô¨Çooded arp packet sent learn send module hand creates map network link separate map created module calculates best route pair host calculate route us algorithm outlined form algorithm optimized network map available algorithm algorithm faster choice avoid having rebuild forwarding map linkevent doe create route see Ô¨Årst packet counting lldp packet point usually network stable run example using mininet rectangle topology Ô¨Ånd spanning tree disabled Ô¨Çooding doe result icmp icmp note creates separate rule arp icmp ping ping reply matching rule matter preference brief outline algorithm assume switch numbered n outer loop form k start stage k assume ve best path j intermediate switch path j pair path stage k examine inner loop pair j look path k second path k concatenate path create new path previous path add previous path q longer p replace q end stage path discovered openflow pox controller introduction computer network release exercise exercise given fractional Ô¨Çoating point number allow interpolation new exercise exercise distinct example exercise exercise marked solution hint solution mininet rip implementation ip router simple implementation add split horizon split horizon rip implementation ip router simple implementation add support link failure rule update rule explain example table table entry suppose try eliminate source address implementation default switch report packet controller controller tell switch Ô¨Çood packet packet ha hb arrives switch s s report packet controller controller know reach hb s controller installs forwarding rule s destination hb controller tell s packet future s report packet hb controller s report controller packet ha hb controller note ha reachable port s packet arrived doe work hint consider switchline example multiple switch line sending sending sending Ô¨Ånally sending suppose make following change strategy packet ha hb arrives switch s s report packet controller controller know reach ha hb s controller installs forwarding rule s destination ha hb controller tell s packet future s report packet ha hb controller doe work switchline example suppose try implement ethernet switch follows default switch action unmatched packet Ô¨Çood send controller packet ha hb arrives switch s s report packet controller controller know reach ha hb s controller installs forwarding rule s destination ha hb future s report packet destination controller unlike exercise controller tell s Ô¨Çood packet ha hb forwarded directly trafÔ¨Åc sent network mininetan introduction computer network release trafÔ¨Åc follows ping ping switch learn b trafÔ¨Åc follows ping ping switch learn recall ping new destination start broadcast arp broadcast packet sent controller destination match conÔ¨Ågured tito default router say created appropriate static arp entry ip route add default dev arp work tithink router actually explain hint router address actually used ti discussed text race condition arise example time Ô¨Årst tcp packet controller doe know learn processing Ô¨Årst arp packet explain similar race condition occur create mininet network host switch switch use external controller let pox controller create topology mininet run pox module controller option identify spanning tree created identify path taken icmp trafÔ¨Åc exercise introduction computer network release idea reality motion act fall shadow t eliot hollow men try leave reader tend skip elmore leonard rule writing network simulation previous chapter especially dynamic tcp time simplifying assumption tcp reno trafÔ¨Åc present chapter look actual tcp behavior simulation enabling explore accuracy assumption primary goal provide comparison idealized tcp behavior real behavior secondary goal shed light issue involved simulation example discussion tcp sender competing competition tcp reno connection different rtts address technical issue affect relevance simulation result part chapter serve primer using simulator primer focused goal illuminating basic operation theory tcp experimentation outcome described planning designing simulation simulation frequently used literature comparing different tcp Ô¨Çavors effective throughput example graph excerpted tcp cubic created simulation alternative simulation network emulation involves running actual networking software vironment created containerization virtualization present mininet important advantage simulation emulation emulation large complex bogged hard distinguish result artifact begin chapter looking single connection analyzing tcp sawtooth utilizes bottleneck link turn competition tcp sender primary competition example tcp reno connection different rtts example allows explore hypothesis hypothesis introduce phase effect transient queue overÔ¨Çows unanticipated tcp behavior introduce element designing simulation experiment second example compare tcp reno tcp vega close straightforward example wireless simulation simulator tool used network simulation n network simulator originally veloped information science institute n simulator grew real simulator developed srinivasan keshav later development work network research group lawrence berkeley national laboratory chapter simulator hosted simulator available programming interface changed considerably position entirely different package likely someday supercede entirely short introduction book network simulator use arguably quite bit complicated beginner particular simulation example presented support complex realistic modeling tool choice research added complexity come price term conÔ¨Åguration programming standard traceÔ¨Åle format quite easy work using informal scripting introduction computer network release use involves building new module compiling purpose stock distribution sufÔ¨Åcient simplest way install probably allinone distribution doe require compiling come simple install script version appeared compile recent version native environment linux simplest approach window user install linux virtual machine install possible compile cygwin older version available cygwin binary create simulation need following addition modest standard housekeeping deÔ¨Åne network topology including node link router queuing rule create tcp udp connection called agent attach node create application usually ftp bulk transfer telnet intermittent random packet generation attach agent start simulation started simulation run designated time driven packet generated application object simulated application generate packet transmission calculates packet arrive depart node generates simulated acknowledgment packet appropriate unless delay explicitly introduced node response forwarding packet sending ack instantaneous node begin sending simulated packet node time link bandwidth m packet propagation delay m time received packet respond instant response indicated egby enqueuing packet forwarding queue doe necessarily require assigning ip address node possible elaborate simulation advanced use involves introduction randomization example tcp sender competing introduce random delay trafÔ¨Åc generator release packet random time possible seed generator different run experiment yield different outcome number generator produce sequence consequence script yield exactly result time run using scripting interface us language tcl pronounced tickle precisely otcl simple use learning general tcl syntax necessary proceed quite successfully modifying standard example network simulation deÔ¨Åned tcl Ô¨Åle run simulation run command n network simulation introduction computer network release result running simulation create Ô¨Åles print output common Ô¨Åles created trace Ô¨Åle contains record packet arrival departure queue event Ô¨Åle network animator nam allows visual display packet motion version nam known netanim video sliding window created nam tcl variable assigned using set command expression evaluated numeric expression use expr command set foo expr foo shell scripting value variable x x x used setting value perl php hand variable name begin included evaluating setting variable comment line beginning character comment notbe appended line contains statement possible Ô¨Årst start new logical line object simulation generally created using constructor constructor line square bracket recall bracket enclose expression evaluated set new object attribute assigned value example following set data portion packet tcp connection byte set object attribute retrieved using set value following assigns variable current value Ô¨Åeld set set thegoodput tcp connection properly number application byte received differs thethroughput total byte sent way includes packet header retransmitted packet value includes retransmissions occasionally refer goodput sense single tcp sender Ô¨Årst script demonstrate single sender sending router topology build delay bandwidth r mbps m delay m kbps smaller bandwidth link make bottleneck default tcp packet size byte bottleneck bandwidth nominally single tcp sender introduction computer network release noload product m packet actually default size byte refers data segment additional byte tcp ip header actual transmitted size byte make bottleneck bandwidth exactly want router r queue capacity packet plus currently transmitted create tcp connection b create ftp sender run simulation second node b r named link default maximum window size increase set artiÔ¨Åcial cap cwnd growth section increase script Ô¨Åle signifying single sender simulation create simulator object set n new simulator open nam file file set namfile open w n namfile set tracefile open w n tracefile define procedure proc finish global n namfile tracefile n close namfile close tracefile exit create network node set n node set r n node set b n node create duplex link node n r droptail n r b droptail queue size r including packet sent n r b hint nam color packet flow red n color red n r orient right n r b orient right continues page network simulation introduction computer network release continued previous page n r b queuepos create tcp sending agent attach set new make flow flow set set set n let trace variable attach tracefile tracevar tracevar tracevar tracevar create tcp receive agent traffic sink attach b set new n b connect traffic source traffic sink n connect schedule connection data flow start sending data stop set myftp new myftp n myftp start n finish run simulation n run running script output did ask Ô¨Åles created simplest thing point view animation nam using command nam animation slow start beginning Ô¨Årst packet sent little past string packet loss visible animation tumbling series red square r s queue tcp sawtooth take alternate cwnd phase congestion avoidance packet loss threshold slow start phase bottleneck link Ô¨Årst incompletely utilized bottleneck link saturated router queue begin build graph cwnd v time graph cwnd versus time prepared data trace Ô¨Åle single tcp sender introduction computer network release slow start left edge unbounded slow start run timeout occurs bounded slow start run loss handled fast recovery tell cwnd doe drop half previous peak Ô¨Årst teeth following slow start height cwnd peak value respectively simulation extended second subsequent peak exactly height cwnd spacing peak constant second becausecwnd incremented arriving ack described tcp reno ack response phase great data point jammed bunching effect stronger choice dot size make point clearly visible give appearance continuous line segment close examination line segment slightly concave discussed highspeed tcp increase rtt queue Ô¨Ålls individual Ô¨Çights packet just end tooth especially Ô¨Årst trace file examine simulation matter animation quantitatively turn detailed analysis trace Ô¨Åle contains record packet event plus requested information variable requested trace Ô¨Åle bulk line event record sample record fault format link format wireless wireless simulation r tcp tcp d tcp network simulation introduction computer network release Ô¨Åelds follows received dfor dropped enqueued dequeued arriving packet enqueued immediately dequeued packet Ô¨Årst dropped packet entire simulation time second number sending node order node deÔ¨Ånition starting Ô¨Årst Ô¨Åeld d number node doing enqueuing dequeuing dropping event beginning represent node sending packet number destination node Ô¨Årst Ô¨Åeld r record represents packet s arrival node protocol packet size byte data requested plus tcp header ip header tcp Ô¨Çags represented Ô¨Çags set flag include e n ecn reduction advertised winsize Ô¨Çow id Ô¨Çow value set variable tcl source Ô¨Åle example appears version Ô¨Çow id used direction tcp connection source node form node connectionid connectionid number simply abstraction connection endpoint superÔ¨Åcially resemble port number node question need simulate ip connection unique connectionid end connectionid number start destination node connectionid packet sequence number tcp packet starting packet identiÔ¨Åer uniquely identifying packet simulation packet warded new link keep old sequence number get new packet identiÔ¨Åer trace line represent arrival packet r enqueuing packet dropping packet happen instant mixed event record record indicating particular variable changed example format line time source node Ô¨Çow source port abstract connection endpoint simulated tcp port destination node Ô¨Çow destination port single tcp sender introduction computer network release traced variable value traced variable record instant variable set initially start simulation incremented arrival Ô¨Årst line show ack counter reaching arrival second line show resultant change graph cwnd v time selecting line plotting Ô¨Årst Ô¨Åeld time recall phase cwnd incremented arriving new ack ack traceÔ¨Åle acks started number mean sent packet successfully theoretical bandwidth sec packet goodput use value way tell data actually delivered alternative statistic Ô¨Ånal value represents number distinct packet sent line seen cwnd graph slow start end measure goodput end little better Ô¨Årst data packet sent data packet packet sent packet packet end packet second goodput necessary use traceÔ¨Åle Ô¨Ånal value tcp variable printed tcl script s finish procedure following example illustrates come connection theglobal line list global variable available body procedure proc finish global n nf f n close namfile close tracefile set lastack set set lastseq set put stdout final ack lastack final seq num lastseq exit tcp sending agent useful member variable set include identifying number Ô¨Çow maximum window size default small set total packet size useful member variable trace print simulation s end include number packet sent starting data packet network simulation introduction computer network release number ack received current value congestion window number retransmitted packet count data actually received need look tcpsink object packet counter retrieve value representing total number byte received include byte threeway handshake ignored subtracted set acked expr round set slightly better estimate goodput long simulation byte count wrap long packet counter wrap example packet event traced consequence line n trace instead asked trace particular link example following line request tracing bottleneck r √Ω√±b link n r b trace useful overall volume tracing large interested bottleneck link long simulation tracing increase runtime limiting tracing actually needed quite important single loss examining Ô¨Åle record conÔ¨Årm single drop occurs end tooth argued single packet loss slow start Ô¨Ånishes drop Ô¨Årst drop data shown following record d tcp like real implementation implementation tcp increment cwnd Ô¨Åle new ack tcp reno response additional packet sent cwnd increased way past number Ô¨Çoor cwnd crease incremented triggering double transmission data doomed data point rtt loss data discovered fast retransmit dupack arrives Ô¨Årst ack arrives dupacks arrive m clocked transmission rate detects loss time reduced half traceÔ¨Åle time variable decimal place recorded single tcp sender introduction computer network release represents elapsed time data dropped m rtt described single packet loss stopped incrementing Ô¨Årst ack arrived value point quite large trigger transmission pair eventually second packet drop reading traceÔ¨Åle python deeper analysis data typically involves running sort script traceÔ¨Åles use python language awk language traditional following programmer interface simple module library Ô¨Ålename open traceÔ¨Åle returnstrue current line normal event record returnstrue current line record returnstrue traceÔ¨Åle line return tuple event value cast correct type ninth tenth value pair traceÔ¨Åle returned node port return tuple value skip current line useful interested event record trace record want ignore type record Ô¨Årst make use link utilization measurement tcp loss event synchronized loss Ô¨Åle includes check verify traceÔ¨Åle line correct format slow disabled default enabling check potentially useful wireless trace record included nam animation let nam animation light trace Ô¨Åle Ô¨Årst data packet sent syn packet sent actual packet identiÔ¨Åcation number refer data point data enqueued time sent delay exactly match link s bandwidth bit sec Ô¨Årst loss occurs data data lost data lost r able send packet make room begin string loss packet Ô¨Årst ack make Ô¨Årst dupack arrives arrives m later exactly bottleneck time dupack arrives point data retransmitted cwnd halved sender receives ack dupack s received ala tcp reno fast recovery mode implementing network simulation introduction computer network release fast retransmit fast recovery going tcp newreno effect Ô¨Åxes nection experience hard timeout previous event point ssthresh set cwnd drop slow start used ssthresh point sender switch phase throughput experiment according theoretical analysis tcp bottleneck link utilization queue size close zero yield bottleneck utilization queue size mean cwnd equal transit capacity yield queue size equal transit capacity yield close test Ô¨Årst increase propagation time simulation m n r droptail n r b droptail bottleneck link kbps kbps change mean transit capacity packet include bandwidth delay r table run simulation varying parameter simulation run second minimize effect slow start tracing disabled reduce runtimes received column give number distinct packet received b link utilization second b receive packet received utilization r √±b arriving packet Ô¨Årst enqueued immediately dequeued actually zero give poor result probably problem slow start run far line predicted theory close zero thencwnd range phase equal length lead theoretical link utilization measurement good agreement continues increase link utilization rapidly approach expected single tcp sender introduction computer network release link utilization measurement experiment estimated utilization r √±b link number distinct packet arriving packet duplicate transmission occur packet delivered twice r √±b link utilization hard estimate nominally packet retransmitted dropped r desired exact value r √±b link utilization analysis trace Ô¨Åle Ô¨Åle r node b node Ô¨Çow Ô¨Çow look line form x y check count extra packet simulated syn simply count line simple script python using nstrace module import nstrace import sys filename flow count filename event time sendnode dest dummy size dummy flow dummy √£√±dummy dummy dummy event andsendnode anddest √£√±andsize andflow flow count print packet count count completeness program implemented awk scripting language begin √£√±flow end print count network simulation introduction computer network release parameter experiment vary parameter facilitated passing parameter value command line example Ô¨Åle include following set queuesize argv n r b queuesize command line run follows n want run simulation parameter ranging simple shell script queue n queue expr queue want pas multiple parameter command line use lindex separate argument argv string Ô¨Årst argument position bash awk script comparison Ô¨Årst argument optional parameter Ô¨Årst representing queuesize second representing endtime use argc set queuesize expr lindex argv argc set endtime expr lindex argv queue utilization previous experiment examined link utilization smaller product suppose greater bandwidth product bottleneck link essentially idle calculated tcp bottleneck link utilization expect average queue utilization transit capacity packet queue capacity cwnd maxwould cwnd minwould queue utilization vary averaging let run experiment set propagation delay m m respectively making rtt noload m packet transit set value simulation run second turn tcp sawteeth end run following python script maintains running average queue size queue capacity exceeds total transit capacity queue seldom single tcp sender introduction computer network release import nstrace import sys defqueuesize filename filename sum counting regular trace line event time sendnode dnode proto dummy dummy flow dummy √£√±dummy seqno pktid sendnode continue event r continue sum size time prevtime time size elif size elif size print avg queuesize answer average queue size good agreement theoretical value packet delivered twice dropped tcp packet ultimately transmitted twice classical tcp theory suggests relatively packet actually delivered twice pretty true tcp sawtooth phase reached fail badly slow start following python script count packet delivered time us dictionary count indexed sequence number import nstrace import sys filename flow count count filename continues page network simulation introduction computer network release continued previous page event time sendnode dest dummy size dummy flow dummy √£√±dummy seqno dummy event r anddest andsize andflow flow seqno incounts count seqno count seqno forseqno insorted count seqno print seqno count seqno run Ô¨Åle Ô¨Ånds packet delivered twice tcp sequence number sent second time Ô¨Årst transmission time look cwnd graph Ô¨Årst transmission occurred gap end unbounded phase beginning leading tcp sawtooth slow start word messy loss rate versus cwnd run simulation time packet acknowledged loss event yield loss rate p formula tcp reno loss rate versus cwnd expect average cwnd true average cwnd number packet sent divided elapsed time rtts rtts constant signiÔ¨Åcantly longer queue Ô¨Ålls turn approximation graph cwnd v time saw peak cwnd mean cwnd perfect agreement quite reasonable loss rate versus cwnd tcp sender competing let create simulation tcp reno sender compete bottleneck link fair allocation get according analysis tcp reno fairness synchronized loss really test hypothesis examine trace Ô¨Åles loss loss response start classic tcp reno eventually consider sack tcp note term packet loss immediate vicinity event expect tcp reno sack tcp behave identically differ respond loss initial topology follows soon raise bandwidth tenfold propagation delay tcp sender competing introduction computer network release br kbps mbps m delay mbps varying m delay broadly speaking simulation demonstrate connection receives bandwidth connection quite predicted tcp reno fairness synchronized loss hypothesis increasingly fails delay increase connection begin escape event experienced connection admit outset obtain quantitative answer question bandwidth allocation fact shall run difÔ¨Åculties formulating proper question course developing simulation encounter potential problem sender synchronized unfortunate manner resolve previous issue introducing randomness bandwidth division sensitive method selected r s queue Ô¨Ålls rtt increase signiÔ¨Åcantly undermining measurement rtt problem transient queue spike introduce unexpected loss coarse timeouts introduce additional unexpected loss experiment analysis divide broad category Ô¨Årst category make use Ô¨Ånal goodput measurement connection consider Ô¨Årst point list phase effect rtt problem raising bandwidth Ô¨Årst category concludes simple loss modeling possible model second category beginning tcp loss event synchronized loss make use traceÔ¨Åles extract information packet loss extent synchronized example related point Ô¨Åve list presented tcp reno cwnd graph second category concludes sack tcp avoiding loss anomaly demonstrate sack tcp term loss recovery better behaved tcp reno tcl script simpliÔ¨Åed version script simulation version important variable additional delay link called delayb deÔ¨Åned variable queuesize r s bottleneckbw bandwidth endtime length simulation overhead introducing small degree randomization set packet size byte total byte tcp portion increase advertised window size limiting factor network simulation introduction computer network release delayb value parameter tcl Ô¨Åle easily ment changing version linked overhead bottleneckbw endtime queuesize parameter propagation delay path m m m making rtt m plus bandwidth delay bandwidth bandwidth delay data packet add additional m acks contribute return script variable rttnl intended approximate rtt noload withendtime theoretical maximum number data packet delivered bottleneckbw mbps link hold r √Ω√±d data packet transit plus d √Ω√±r acks thefinish procedure added code print number packet received d connection extract trace Ô¨Åle gain better control printing used format command work like c s sprintf return string containing numeric value replacing corresponding dor f token control string returned string printed put version linked contains nam directive support argument arranges traceÔ¨Åles base Ô¨Ålename tcl Ô¨Åle n example tcp competing link create simulator object set n new simulator open trace file set trace open w n trace globals modify desired queuesize bottleneck link set queuesize default run time second set endtime overhead d introduces uniformly randomized delay d √£√±turns set overhead delay r link m set basedelay additional delay b r link m set delayb bandwidth bottleneck link mbit set bottleneckbw estimated rtt flow m set rttnl arrange output set outstr format parameter f f f √£√± delayb overhead bottleneckbw put stdout outstr continues page tcp sender competing introduction computer network release continued previous page define procedure print progress connection proc finish global n queuesize trace delayb overhead rttnl set set set set count packet received set expr round set set expr round set number section set rttratio expr rttnl rttnl actual ratio throughput force floating point set actualratio expr theoretical ratio squaring text discussion √£√±of set expr rttratio rttratio set expr rttratio set expr set outstr format f f d d f f f f f delayb overhead √£√± rttratio actualratio put stdout outstr n close trace exit create network topology r destination b create node set n node set b n node set r n node set d n node set fastbw expr bottleneckbw create link node propdelay b r link delayb m n r fastbw mb basedelay m droptail n b r fastbw mb expr basedelay delayb m droptail link bottleneck byte d delay m prop m bandwidth value floyd jacobson n r d bottleneckbw mb droptail continues page network simulation introduction computer network release continued previous page n r d queuesize create connect tcp agent start set set set overhead create tcp agent attach node delayed path set new set set flowid used field trace set attach trace tracevar tracevar n set new set set attach trace tracevar tracevar n b set new n d set new n d connect traffic source traffic sink n connect n connect schedule connection data flow set new set new n start n start n endtime finish run simulation n run tcp sender competing introduction computer network release equal delay Ô¨Årst try running simulation equal delay following value printed arranged vertically allow annotation value variable meaning additional propagation delay compared delay overhead value mean effectively disabled count cumulative packet received d goodput count cumulative packet received d goodput square previous value actual ratio goodput note change order versus propagation delay m bandwidth delay noted m m link make rtt noload delay time delayb set rttnl calculate rtt ratio tcl Ô¨Ånish procedure really use rttnl instead closer later change bottleneckbw way difference modest note rtt calculation queue r queue contains packet add m √Ω√±d b√Ω√±d time reverse direction unchanged make large difference rtt ratio address doe matter propagation delay far identical model tcp reno rtt bias explored model expect Ô¨Ånal paragraph unsynchronized tcp loss hint possible model soon position test theory experimentally note order b goodput rtt ratio reversed reÔ¨Çect expected inverse relationship run packet sent mean bottleneck link utilized tcp reno cwnd graph introduce script count analyze teeth tcp sawtooth applying Ô¨Ånd loss event total teeth loss event Ô¨Çow loses exactly packet remarkably exact conformance hypothesis tcp reno rtt bias far unequal delay begin increasing additional delay delayb preliminary data table point signiÔ¨Åcant problem goodput ratio column varying smoothly value m Ô¨Årst row mean delay equal delay value m network simulation introduction computer network release row mean rtt noload double rtt noload column labeled rtt ratio expected goodput ratio according model tcp reno fairness synchronized loss actual goodput ratio Ô¨Ånal column delayb rtt ratio goodput goodput rtt ratio ratio row Ô¨Årst agreement column quite good decidedly anomalous case particularly number bold asdelayb change goodput ratio jump similar dramatic change goodput appear asdelayb range set value admittedly specially chosen trial error illustrate relatively discontinuous behavior goodput ratio going phase effect erratic behavior goodput ratio table turn called phase effect transmission tcp connection precisely synchronized way involves persistent negative bias happening race condition occurs remaining queue vacancy connection consistently loses race majority time phase effect begin taking detailed look bottleneck queue competition involved consider single sender using Ô¨Åxed window size send destination b bottleneck router r topology suppose window size large r s queue sake deÔ¨Åniteness assume r s bandwidth delay r send packet m ack arrive m transmit imagine output meter report percentage transmitted packet r currently sending m packet tcp sender competing introduction computer network release Ô¨Årst observation instant packet fully arrives r r exactly point forwarding earlier packet b output meter read percentage percentage called phase connection denoted determine ùúëas follows consider total elapsed time following r Ô¨Ånishes transmitting packet arrives b ack make data packet triggered ack fully arrives r absence congestion time includes variable queuing delay constant percentage determined elapsed time example time m data n leaf r data sent arrival ack n arrive r r completed sending packet data m m transmitting data percentage dividing r s bandwidth delay taking fractional case elapsed time simply rtt noload minus bandwidth delay r compute phase rtt r s bandwidth delay ratchet winsize queue new packet arrives phase percentage represents fraction time queue vacancy scenario start clock r Ô¨Ånished transmitting packet queue vacancy new packet arrives queue r start transmitting packet queue finally presence competition r phase single connection remains constant provided queuing delay bidirectional path r forward direction trafÔ¨Åc sent r add delay integral multiple r s bandwidth delay affect phase phase effect present simulation remark previous paragraph calculate phase sender let ùúëaandùúëb signiÔ¨Åcance phase competition b send packet happen arrive r interval r forwarding packet queue vacancy connection smaller phase win concrete example suppose respective rtt noload s b s phase b s important thing s packet time event s packet arrive Ô¨Årst imagine r forward b packet packet m later forward packet acks elicited packet cause new packet sent b s packet arrive Ô¨Årst r followed m later b s packet course r likely send packet packet b packet doe arrival order predetermined s favor random consider happens packet dropped single vacancy r packet b arrive near tie b s packet dropped occasional sent b expansion cwnd ultimate cause loss event phase effect introduced persistent degree bias s favor network simulation introduction computer network release visualize phase effect letting delayb range say small increment plotting corresponding value classically expect close graph blue curve represents goodput ratio show marked perfect periodicity period orange curve represents according tcp reno fairness synchronized loss expect blue orange curve blue curve high slower connection proportionately unexpected disadvantage seldom phase effect work favor connection s phase quite small based s exact rtt noload m change propagation delay basedelay m making s phase blue curve oscillates somewhat evenly orange curve approximately amplitude recall m change delayb corresponds m change connection s rtt equal router r s transmission time happening connection s rtt increase range m cycle neutrality deÔ¨Åcit minimizing phase effect real world kind precise transmission synchronization lead phase effect seldom evident rarity fact tcp titions difÔ¨Åcult observe intimately usually sufÔ¨Åcient trafÔ¨Åc present disrupt synchronization break synchronization simulation way inject degree randomization bulk tcp Ô¨Çows technique introduced break synchronization simulation random telnet trafÔ¨Åc involving smaller packet sent according given random distribution use queue included standard distribution second course mean longer simulating fifo queue way addressing phase effect make use overhead variable introduces modest randomization time tcp sender technique simpler tcp sender competing introduction computer network release start difference use overhead telnet trafÔ¨Åc effect introducing delay node network carry trafÔ¨Åc just tcp source phase effect overhead Ô¨Årst attempt introducing randomization competing tcp Ô¨Çows start s tcp overhead attribute equal default measured unit second ifoverhead tcp source introduces uniformly distributed random delay overhead second ack arrives source allowed send new packet distribution uniform average delay introduced overhead introduce average delay m set overhead packet sent order packet assigned small overhead delay packet large overhead delay packet wait packet sent reason good idea average overhead delay average packet interval m following graph show curve representing overhead value m m m curve actual goodput ratio plotted function delayb range simulation run second bottleneckbw return choice rtt problem corresponding graph quite similar term oscillatory behavior curve overhead wildly erratic phase effect curve overhead half oscillation overhead curve exhibit wiggling overhead darker green curve graph really settle conclude value overhead quite effective mitigating phase effect crude way quantify degree graph oscillation calculating mean deviation respective deviation value curve recall time send packet bottleneck link second average delay introduced overhead d overhead connection acting average sender delay equal delay overhead delay like propagation delay high overhead prevent queue buildup network simulation introduction computer network release compared transmission time average delay m Ô¨Çow overhead respectively disproportionate quite large compared m bandwidth delay leg generally goal duce phase effect overhead comparable transmission rate using overhead doe increase rtt case considerably conclude using overhead break synchronization lead phase effect appears worked sense value overhead goodput ratio increase monotonically increasing delayb problem using overhead way doe correspond physical network delay phenomenon use represents decidedly ad hoc strategy introduce randomization phase effect disappear said doe produce result similar obtained injecting random telnet trafÔ¨Åc introduced following section phase effect telnet trafÔ¨Åc introduce randomization making use telnet application ate level random trafÔ¨Åc requires additional object ing telnet connection carry trafÔ¨Åc telnet trafÔ¨Åc introduce slight delay corresponding bulk ftp trafÔ¨Åc size telnet packet sent determined tcp agent attribute telnet connection create object set attribute script fragment set tninterval represents average packet spacing second transmission scheduled according exponential random distribution mean remark real telnet trafÔ¨Åc seldom follows exponential random distribution necessarily concern common trafÔ¨Åc pattern egweb trafÔ¨Åc database trafÔ¨Åc Ô¨Åt model better actual simulated transmission constrained telnet connection s sliding window quite possible telnet application release new packet transmission sent telnet tcp connection s sliding window momentarily frozen waiting ack telnet packet encounter congestion small sender backlog telnet packet outbound queue waiting sliding window advance permit departure set new n set new n b set new set new n d n d set new set new continues page tcp sender competing introduction computer network release continued previous page set tninterval text discussion set tninterval set set tninterval set real telnet packet necessarily exponentially distributed quite small simulation use uncharacteristically large size byte leading total packet size byte simulated header attached denote number actualsize exercise bandwidth theoretically consumed telnet connection simply actualsize tninterval actual bandwidth lower telnet packet encountering congestion noted convenient deÔ¨Åne attribute tndensity denotes fraction link s bandwith telnet application allowed use case tninterval actualsize tndensity bottleneckbw example actualsize byte bottleneckbw corresponds byte m telnet connection saturate link packet spaced m apart want telnet connection use bottleneck link tninterval m converted sec Ô¨Årst question need address telnet trafÔ¨Åc sufÔ¨Åciently dampen tions density following graph telnet version phase effect overhead bottleneckbw simulation run second telnet total packet size byte given telnet density percentage apply telnet connection total telnet density double value shown network simulation introduction computer network release hoped oscillation doe substantially Ô¨Çatten telnet density increase dark blue bright green mean deviation fall far use telnet promising unfortunately continue increase telnet density past oscillation increase seen graph Ô¨Årst curve plotted green correspond good density previous graph vertical axis stretched factor density increase oscillation return curve converge heavier red curve appears happening density limiting factor telnet transmission telnet sliding window random trafÔ¨Åc generation mentioned paragraph section sliding window limiting factor telnet packet transmission telnet connection behave like synchronized corresponding ftp connection point ability moderate phase effect greatly diminished actual packet tcp sender competing introduction computer network release departure longer exponential random distribution generates packet despite issue fact small level random trafÔ¨Åc lead large reduction phase effect taken evidence real world trafÔ¨Åc source ubiquitous phase effect seldom problem overhead versus telnet step compare effect original Ô¨Çows overhead randomization telnet randomization graph plot function delayb range increment bottleneckbw mbps queue capacity r second curve represent result using telnet packet size density ranging compared green curve representing use overhead value telnet density excellent agreement use overhead apparent smaller telnet density larger larger density smaller raise awkward possibility exact mechanism introduce randomization material effect fairness ratio ultimately observe right answer different randomization source level simply lead differing fairness result advantage using telnet randomization represents actual network phenomenon unlike overhead drawback using telnet effect goodput ratio graph show somewhat sensitive exact value chosen telnet density remainder chapter continue use overhead model simplicity claim universally appropriate approach network simulation introduction computer network release rtt problem preceding graph phase effect overhead phase effect telnet trafÔ¨Åc overhead versus telnet green curve graph appear sufÔ¨Åcient randomization introduced disrupt phase effect converges fact artifact second Ô¨Çaw simulated network rtt constant rtt noload link m queuing delay r queuesize double adding m mean computed value rttratio large computed value small approach address problem careful track rtt actual simpler strategy create simulated network queuing delay small compared propagation delay rtt relatively constant turn raising bandwidth modern network queuing delay tend small compared propagation delay tcp bottleneck link utilization simulate network simply increase bandwidth link tenfold leaving existing propagation delay achieve setting bottleneckbw instead make rtt noload equal m queuing delay additional value overhead need scaled factor sec reÔ¨Çect average delay range packet transmission time graph result bottleneckbw time overhead queuesize use m estimated rtt actual rtt range m delayb parameter run step Ô¨Årst observation make generally large generally small compared word especially good Ô¨Åt appears fairly general phenomenon simulation real world tcp reno throughput ratio tend corresponding rtt ratio square rtt ratio hypothesis led prediction tcp reno fairness synchronized loss tcp sender competing introduction computer network release goodput ratio close conclusion appears fail hypothesis fail degree case loss shared graph observe fair noise variation variation appears unrelated m period expect phase effect graph phase effect important increment delayb amount smaller m order rule increment strong peak delayb delayb value correspond increasing rtt integral multiple respectively peak presumably related kind phase effect possible model fairness model fails replace ad hoc option try Ô¨Åt curve form k ùõº data value exponent ùõºcomes sort compromise value exponent somewhat sensitive detail simulation entirely different curve Ô¨Åt data based appearance graph past possess formula model relative loss primary tcp connection precise offer explanation formula Ô¨Ånal paragraph relative loss rate higher bandwidth link utilization consequence raising bottleneck bandwidth total link utilization drop delayb bandwidth bottleneck link keeping analysis tcp bottleneck link utilization transit capacity packet queue r ideal sawtooth oscillate packet sender whendelayb loss synchronized meaning behave like sender value cwnd varies linearly spends time transit capacity packet period average cwnd time path utilized weighted average estimating total goodput whendelayb combined tcp reno goodput fall bandwidth bottleneck link low utilization related loss timeouts corresponding combined percentage sack tcp shall sack tcp avoiding loss anomaly better behaved network simulation introduction computer network release tcp loss event synchronized loss model entirely accurate concluded graph doe happen packet loss queue Ô¨Ålls point shift focus analyzing goodput ratio analyzing underlying loss event using traceÔ¨Åle look synchronization loss event different connection individual packet loss involved single tcp loss response conclusion reach tcp reno s response queue overÔ¨Çows face tion quite messy versus behavior absence competition described single loss trying come model replace hypothesis turn better switch sack tcp use sack tcp change goodput ratio fact selective acks nearly universal real world good reason enable packet dropped queue Ô¨Ålls case single packet dropped case multiple packet dropped multiple connection refer set packet dropped drop cluster packet dropped tcp reno discovers just rtt sent fast retransmit responds halving cwnd fast recovery tcp reno retransmits lost packet rtt tcp newreno doe sack tcp retransmit multiple lost packet packet lost tcp tion retransmitted point timer expires typically second resulting coarse timeout point tcp abandon process progressing steadily eventually tcp sender experienced packet loss reduce cwnd queue lization drop point classically expect loss sender involved time grow cwnd s process point Ô¨Ålling queue shall transient queue peak classical expectation entirely correct possible packet loss associated period spread sufÔ¨Åcient time rtt minimum tcp reno responds separately half cwnd rapid succession refer cluster tooth cluster simulator counting individual lost packet tcp loss response straightforward tcp reno kind loss response fast recovery cwnd halved coarse timeout cwnd set counting cluster subjective need decide drop response close counted cluster use notion ularity loss separated time granularity time interval counted single event use granularity decide loss response different connection considered part event tie loss response packet loss appropriate length granularity interval hoped case couple rtts sufÔ¨Åcient note rtt noload connection range sec sec delayb increase order cover coarse timeouts granularity second work packet drop trying count loss estimate loss rate formula cwnd p tcp tcp loss event synchronized loss introduction computer network release reno loss rate versus cwnd count loss response separately argument tcp reno loss rate versus cwnd depended counting allloss response difference recovery response rapid succession case cwnd halved twice quarter original value interested loss connection synchronized need make use granularity make sure close loss counted setting granularity second sufÔ¨Åcient tcp reno cwnd graph turn example actual tcp behavior present hopefully representative cwnd graph Ô¨Ågure red line represents Ô¨Çow green line represents shorter Ô¨Çow graph usual simulation bottleneckbw andoverhead run second sensitivity graph prepared earlier version simulation script node b reversed mean tie r resolved different order lead noticeably different set packet loss immediate goal illuminate issue graph serve illustrate general behavior tcp reno competition variability use graph explore idea transient queue spike case count teeth visually python script counting teeth python case use appropriate granularity interval second want count agree approximately visual count time tooth count quite dependent exact value granularity delayb network simulation introduction computer network release start graph delayb Ô¨Ågure teeth loss event completely synchronized unsynchronized loss event green Ô¨Çow s loss cwnd graph exactly lockstep red Ô¨Çow coarse timeouts cwnd drop green Ô¨Çow seven coarse timeouts red graph get little ahead green interval despite synchronized loss just green graph response followed coarse timeout green loss involve coarse timeouts despite perfect loss synchronization range green graph end set loss event involve coarse timeouts red graph s delayb thisdelayb graph respective packet loss red green Ô¨Çows marked thecwnd graph superimposed graph averaged queue utilization gold time scale averaging rtt queue graph scaled vertically factor queue value maximum numerically comparable cwnd value transit capacity large red tooth corresponds green teeth red tooth corresponding green teeth aside point representing isolated loss red green teeth appear quite synchronized evidence cluster large green tooth peak halfway little notch ending represents loss event interpreted tcp distinct actually event representing coarse timeout shortly fourth event examine shortly t red tooth loss event followed shortly coarse timeout happens Ô¨Çows overall red path teeth use granularity second teeth granularity second count happens phase generally count tooth graph end tcp loss event synchronized loss introduction computer network release slope green teeth slightly greater slope red teeth representing longer rtt red connection queue graph noise expected generally right edge teeth tcp loss response aligned peak representing queue Ô¨Ålling recall transit capacity packet queue capacity general expect sum cwnd s range queue remain sum reached conÔ¨Årm visually case tooth peak add transient queue peak loss graph little peculiar fully second primary tooth peak preceded let zoom little closely time averaging graph sharp narrow peak queue graph just just causing packet drop Ô¨Çows peak especially appears gradual loss event transient queue peak associated sum cwnd s approaching maximum t peak sum cwnd s t sum acks sender return destination d faster rate suggest new packet sender b arrive r faster combined rate going happening Ô¨Çow sends Ô¨Çight packet spaced m apart coincidence Ô¨Çights begin arriving r moment runup queue near occurs Ô¨Årst drop m interval Ô¨Çight packet arrive node Ô¨Çow Ô¨Çight packet arrive node b Ô¨Çow packet m mean queue utilization r increase sufÔ¨Åcient overÔ¨Çow queue quite ack Ô¨Çights triggered Ô¨Çights spaced m apart consistent bottleneck link acks Ô¨Çights triggered acks passed r quite different time difference propagation delay link network simulation introduction computer network release transient queue peak like complicate theory relative throughput based gradually Ô¨Ålling queue fortunately transient peak quite common seen zoomed graph occasionally overÔ¨Çow queue example created majority transient overÔ¨Çow peak including analyzed second tcp coarse timeout response relationship timeout existence transient queue peak used argue queue reasonable surge capacity speciÔ¨Åcally bufferbloat addressed simply reducing queue capacity small level bufferbloat transient peak relatively infrequent delayb graph note red green loss event quite aligned happens cluster queue graph give appearance solid yellow large number transient queue spike greater magniÔ¨Åcation clear spike relatively sparse transient queue overÔ¨Çows following normal overÔ¨Çow following normal overÔ¨Çow following normal overÔ¨Çow following normal overÔ¨Çow tcp loss event synchronized loss introduction computer network release delayb queue data good example highly unsynchronized teeth green graph teeth start red graph Ô¨Åve note loss event subset green loss event sack tcp avoiding loss anomaly coarse timeouts clustered loss response graph anticipated original fairness model tcp reno fairness synchronized loss time avoid anomaly obtain behavior closer classic sawtooth turn sack tcp Ô¨Ålls quite nicely following subsection counting teeth python script counting loss response teeth run traceÔ¨Åles tcp reno simulation bottleneckbw time Ô¨Ånd Ô¨Çow loss response coarse timeouts little dependence value delayb change tcp connection simulation fraction fall half presumably tcp newreno better able handle multiple packet drop change tcp connection use sack tcp situation improves dramatically essentially nocoarse timeouts run second typically involving cwnd adjustment Ô¨Çow coarse timeout majority time cluster multiple loss response vanish entirely run usually case loss response occur second rtts connection sack tcp s smaller number packet loss result marked improvement goodput total link utilization range delayb delayb tcp reno corresponding utilization range network simulation introduction computer network release note switching sack tcp unlikely signiÔ¨Åcant impact distribution packet loss sack tcp differs tcp reno way responds loss sack tcp sender speciÔ¨Åed receiver aware creating receiver switch sack tcp underlying fairness situation doe change graph similar raising bandwidth run time second bottleneckbw mbps delayb run increment did use increment similar graph raising bandwidth conÔ¨Ådent phase effect taken care shown blue green try Ô¨Åt curve possible model exponential model k ùõº value exponent ùõºcomes time noticeably tcp reno s value remains considerable noise despite sampling interval clear difference signiÔ¨Åcant second model appears remain good Ô¨Åt counting teeth python using earlier python module easily count time reduced event correspond loss response anticipating complex scenario deÔ¨Åne python class flowstats hold information particular case know exactly Ô¨Çows count get smaller count coarse timeouts practical matter closely spaced reduction event followed second later coarse timeout want count separate tcp response count count startpoint avoid counting loss related slow start import nstrace import sys continues page tcp loss event synchronized loss introduction computer network release continued previous page count point drop startpoint wait slow start class flowstats python object hold data self coarse timeout count defcountpeaks filename globalstartpoint filename flowstats flowstats counting trace line time snode dummy dummy dummy varname cwnd nstrace √£√±getvar time startpoint continue ifvarname continue ifsnode ifcwnd count tooth ifcwnd coarse timeout print flow teeth flow teeth √£√±toothcount print flow coarse timeouts flow coarse timeouts √£√± countpeaks elaborate version script set count cluster teeth cluster drop available new cluster start time t time t granularity cluster t granularity start new cluster relative loss rate point accept throughput ratio generally smaller value predicted hypothesis Ô¨Çow additional loss account experiment count loss event Ô¨Çow identify loss event common Ô¨Çows network simulation introduction computer network release following graph demonstrates rise loss percentage total using sack tcp use script previous section granularity sec sack tcp rare drop Ô¨Çow occur close granularity primarily decide teeth different Ô¨Çows counted shared blue region represents percentage event teeth shared Ô¨Çows green region middle represents percentage event apply faster connection Ô¨Çow rise quickly remain asdelayb range just uppermost yellow region represents loss event affected slower connection Ô¨Çow usually rough approximation assume division shared blue green loss event losscount applying formula unsynchronized tcp loss bandwidth clear continue hold delayb continues increase doe suggest possible underlying explanation second formula possible model loss rate versus cwnd tcp reno loss rate versus cwnd argued average value cwnd p constant k loss rate versus cwnd tested single connection regular teeth section test hypothesis simulation order avoid coarse timeouts included original model use sack tcp lifetime connection average cwnd number packet sent divided number rtts simple relationship slightly complicated fact rtt varies fullness bottleneck queue effect minimized choose model rtt noload large compared queuing delay set bottleneckbw bandwidth queuing delay add rtt noload rtt Ô¨Çows use appropriate rtt noload approximation rtt use number packet acknowledged approximation number transmitted calculation tcp loss event synchronized loss introduction computer network release true average cwnd value table estimated average cwnd value formula p loss ratio p total number teeth counted earlier divided number Ô¨Çow s packet relatively high value bottleneckbw take long simulation reasonable number loss simulation used ran second long connection ended loss data Ô¨Çow using bold column represent extent ratio estimated average cwnd true average cwnd differs unity error value reasonably close zero suggesting formula cwnd p reasonably accurate delayb true avg est avg avg est avg table clearly show rise s cwnd fall related observation absolute number loss Ô¨Çow slowly decline delayb increase range considering Ô¨Çow longer rtt number packet transmitted drop precipitously sevenfold cwnd probability p stay relatively constant Ô¨Çow total number packet sent rise Ô¨Çow drop insigniÔ¨Åcance average rise sufÔ¨Åciently fast Ô¨Çow s decline generally doe increase tcp reno versus tcp vega tcp vega described alternative tcp reno known tcp vega tcp vega versus tcp reno argued capacity fifo bottleneck queue signiÔ¨Åcant relative transit capacity tcp vega disadvantage competition fairer queue capacity small test theory standard model tcp sender competing withbottleneckbw mbps delay m delay m transit capacity path network simulation introduction computer network release packet simulate competition tcp reno tcp vega queue size earlier use overhead Ô¨Årst attempt default tcp vega parameter thing start evenly queuesize goodput ratio time queue size ratio climbed tcp vega swamped raising ùõºandùõΩhelps little larger queue expense performance small queue size graph vertical axis plot goodput ratio horizontal axis represents queue capacity performance tcp vega fall quite quickly queue size increase reason larger ùõº help slightly increase range tcp vega behaves like tcp reno different outcome using fair queuing fifo queuing fair queuing bufferbloat create tcp vega connection set ùõºandùõΩone us set new set set prior simulation following setting order make total tcp packetsize including header set turn tcp vega object includes header veriÔ¨Åed looking traceÔ¨Åle need tcp reno versus tcp vega introduction computer network release set acwnd graph comparing tcp reno tcp vega queuesize bottleneckbw mbps overhead Ô¨Årst second shown period bandwidth ratio rise close tcp reno s favor red plot represents tcp reno green represents tcp vega green plot show spike probably represent implementation artifact second sharp tcp reno peak tcp vega softer peak rtt begun rise tcp vega recognizes begin decrementing cwnd rtt point packet loss tcp vega begin incrementing cwnd cwnd phase tcp vega fall relative tcp reno catch subsequent increment phase tcp vega avoids cwnd multiplicative decrease continues loss event larger cwnd tcp reno conclude smaller size tcp vega doe hold unfortunately scenario size quite small work tcp vega suffers competition tcp reno moderate queue size said queue capacity real internet tend increase slowly bandwidth situation tcp vega performs quite compared tcp reno wireless simulation simulating wireless network link conÔ¨Åguration work go setting node trafÔ¨Åc wireless behavior wireless node multiple attribute antenna type model node charge packet queuing responsibility link finally node coordinate position mobility introduced velocity wired link user set bandwidth delay wireless generally provided wireless model propagation delay simply distance divided speed light bandwidth usually built particular wireless model chosen model available network simulation introduction computer network release set Ô¨Ånd current value print set version ad hoc wireless network conÔ¨Ågured routing protocol path node looked brieÔ¨Çy dsdv dsdv maximum range node determined power level set using txpower attribute default used source code Ô¨Åle variable transmitter power declared default value translates physical range meter using appropriate model create simulation node mover move horizontally sequence position node stored tcl array rownodes leftmost node transmits continuously themover node mover node progress packet routed node node m apart mover node m line mean mover reach edge range ith rownode directly rownode use ad hoc distance vector aodv routing protocol mover move range node aodv Ô¨Ånds new route node quite quickly return dsdv dsdv slower lead packet loss new route discovered course given routing mechanism fast depends speed mover simulation doe perform nearly time set second mover move fast aodv conÔ¨Åguration parameter adopt common tion making attribute single tcl object named opt list simulation Ô¨Åle piece annotation complete Ô¨Åle begin option define option set opt chan channel type set opt prop model set opt netif network interface type set opt mac mac type set opt ifq interface queue type set opt ll ll link layer type set opt ant antenna model set opt ifqlen max packet ifq set opt bottomrow number node set opt spacing spacing √£√±row node set opt mheight height moving node √£√±above node set opt brheight height √£√±nodes edge set opt x expr opt bottomrow opt spacing x √£√±coordinate topology set opt y y coordinate topology continues page wireless simulation introduction computer network release continued previous page set opt adhocrouting aodv routing protocol set opt finish time stop simulation value speed field set opt speed expr opt x opt finish class represents physical terrestrial wireless medium class satellite radio particular propagation model tworayground model take account ground reÔ¨Çection larger distance d received power level proportional model model received power distance d proportional shadowing model take account type interference detail radio propagation model chapter manual class speciÔ¨Åes standard interface network alternative additional option class speciÔ¨Åes ieee behavior option cover thing like generic aloha satellite class speciÔ¨Åes queuing havior node opt ifqlen value determines maximum queue length corresponds value wired link llclass link layer deÔ¨Ånes thing like behavior arp network class deÔ¨Ånes standard omnidirectional antenna kind directional antenna real world egparabolic dish waveguide cantennas implemented value speciÔ¨Åc particular layout opt bottomrow value determines number node simulation spacing adjacent node opt spacing meter moving node mover move height meter Ô¨Åxed row whenmover directly Ô¨Åxed node distance previous Ô¨Åxed node point previous node range Ô¨Åxed row meter topology opt x andopt y value dimension simulation meter number node spacing determine opt x mentioned earlier use aodv routing mechanism mover node move range node currently contact aodv receives notice failed transmission link layer ultimately news originates absence ack trigger immediate search new route typically take m complete earlier dsdv dsdv mechanism doe use feedback doe look new route regularly scheduled round announcement second away routing mechanism include tora puma olsr Ô¨Ånishing time opt finish represents time moving node take node necessary speed calculated opt speed Ô¨Ånishing time reduced mover speed increase routing mechanism time Ô¨Ånd updated route section tcl code set general bookkeeping network simulation introduction computer network release create simulator object set n new simulator set tracing n set tracefd open w set namtrace open w n tracefd n namtrace opt x opt y create define topography object layout set topo new topography topo opt x opt y create instance general operation director keep track √£√±nodes reachability parameter total number node √£√±the simulation expr opt bottomrow option enables different tracing mechanism attribute Ô¨Årst preÔ¨Åxed identifying tag parsing longer look example note special option tracing nam dimension parameter opt x andopt y step create topography object hold layout determined finally create general operation director hold information layout necessarily available node step pass opt parameter n inÔ¨Çuences future node creation general node configuration set new opt chan n opt adhocrouting opt ll opt mac opt ifq opt ifqlen opt ant opt prop opt netif topo finally create node node created tcl stored wireless simulation introduction computer network release tcl arrayrownode node set coordinate point rownode node given position horizontal line spaced opt spacing apart create node node array rownode moving node √£√±as mover set opt bottomrow incr set rownode n node rownode set expr opt spacing rownode set opt brheight rownode set set mover n node mover set mover set expr opt mheight opt brheight mover set make mover node using setdest node reach destination supplied setdest stop possible change direction later time using additional setdest call path desired various external utility available create Ô¨Åle tcl command create large number node designated motion Ô¨Åle imported main tcl Ô¨Åle set moverdestx expr opt x n mover setdest moverdestx mover set opt speed create udp agent cbr constant bit rate application set connection rownode tomover cbr trafÔ¨Åc doe notuse sliding window setup udp connection using cbr traffic set udp new set null new n rownode udp n mover null n connect udp null set new set set udp n start n opt finish stop remainder tcl Ô¨Åle includes additional bookkeeping nam finish procedure startup simulation tell nam initial node position taken node attribute size supplied parameter continues page network simulation introduction computer network release continued previous page set opt bottomrow incr n rownode n mover set color mover node nam mover color blue n mover color blue n opt finish finish proc finish global n tracefd namtrace n close tracefd close namtrace exit begin simulation n run simulation viewed nam Ô¨Åle available simulation mover node move topography node cbr trafÔ¨Åc reach mover rownode Ô¨Årst directly rownode viarownode andrownode motion mover node best seen speeding animation frame rate using nam control doing mean aliasing effect make cbr trafÔ¨Åc appear moving opposite direction frame animation mover node quite directly rownode close losing contact rownode cbr packet seen en route reached rownode way rownode bluemover node packet shown scale exercise wireless simulation introduction computer network release traceÔ¨Åle speciÔ¨Åc wireless networking use different format simulation earlier newtrace format begin letter logged attribute identiÔ¨Åed preÔ¨Åxed tag position detail manual edited record Ô¨Årst packet drop initialdindicates record d rtr cbk cbr √£√±pi indicates time tag indicate source destination respectively tag indicates level router loss logged tag indicates cause cbk callback mean packet loss detected link layer information passed routing layer tag packet s unique serial number ptags supply information agent use traceÔ¨Åle Ô¨Ånd cluster drop beginning time corresponding roughly time route used reach mover node shift passing node somewhat terious cluster drop cluster related ordinary queue overÔ¨Çow reÔ¨Çect decreasing reliability forwarding mechanism path grows longer epilog simulation using n central network research scientiÔ¨Åc paper addressing comparison tcp Ô¨Çavors refer n simulation degree n widely used research especially wireless simulation seldom matter small number run new protocol tested wide range condition varying bandwidth delay level background trafÔ¨Åc comparison isolation Ô¨Årst run unequal delay misleading good simulation design word easy simulation involved extremely simple network great deal effort expended n community past decade create simulation involving larger set node ultimate goal create realistic simulation internet refer interested reader exercise graph graph cwnd v time examine trace Ô¨Åle account dot start tooth time approximately note solid part graph solid fractional cwnd value used cwnd incremented cwnd receipt ack problem experiment throughput experiment smallest practical value path transit capacity repeat experiment arrange path transit capacity packet network simulation introduction computer network release making smaller proportionally sure simulation run long includes multiple teeth link utilization try value create simulation path transit capacity packet bottleneck mean cwnd varies sure simulation run long includes teeth link utilization observe queue utilization observe use model equal propagation delay delayb delay starting time Ô¨Årst connection let delay time end Ô¨Åle n start try ranging m increment graph value function graph like phase effect bottleneck link forward bottleneckbw second send packet percentage total sent competing sender tcp sender competing fordelayb repeat previous exercise bottleneckbw bottleneck rate pick case total write script keep track cwnd measure time quantity transit capacity average cwnd cwnd period transit capacity model tcp sender competing case small delayb delayb connection greater throughput demonstrate use appropriate value ofoverhead generating Ô¨Årst graph phase effect telnet trafÔ¨Åc used byte actualsize byte generate similar graph using simulation smaller value byte note given value tndensity actualsize shrink tninterval phase effect telnet trafÔ¨Åc telnet connection ran b d telnet trafÔ¨Åc competed bulk ftp trafÔ¨Åc bottleneck link change simulation telnet trafÔ¨Åc run far variable tndensity represent fraction bandwidth used telnet try value tndensity note density quite high generate graph like Ô¨Årst graph phase effect telnet trafÔ¨Åc illustrating form telnet trafÔ¨Åc effective reducing phase effect using telnet simulation previous exercise telnet trafÔ¨Åc run far r generate graph comparing bulk ftp trafÔ¨Åc randomization come value range discussed text bottleneckbw mbps telnet trafÔ¨Åc tndensity range exercise introduction computer network release goal graph comparable overhead versus telnet randomization mechanism overhead telnet yield comparable value repeat experiment exercise using telnet instead overhead try telnet trafÔ¨Åc tndensity trafÔ¨Åc exercise tndensity effect marked analyze packet drop Ô¨Çow competition shown second graph red v green tcp reno versus tcp vega simulation bottleneckbw mbps delayb queuesize simulation ran second drop cluster reno Ô¨Çow b drop cluster vega Ô¨Çow c shared drop cluster use granularity second generate cwnd graph tcp reno versus tcp vega like second graph tcp reno versus tcp vega using default doe tcp vega connection form better worse compare tcp vega connection tcp sender competing fordelayb varying step use bottleneckbw mbps run simulation second use default ùõºandùõΩ usually better Ô¨Åt doe overall fairness compare predict doe ratio appear roughly constant value repeat previous exercise larger value ùõº say set sure queuesize larger ùõΩ recall n connection manage number packet bottleneck queue r goodput rule example router competition fairness situation better worse default ùõºandùõΩ nam animation involving link packet length displayed proportionally link propagation delay m bandwidth packet displayed length link length true wireless consider animation single displayed frame wireless simulation assume signal propagation speed c node m apart bandwidth mbps long single bit far doe signal travel time needed send single bit b sender transmits continuously bit send Ô¨Årst bit reach destination c nam animation wireless simulation plausible rendered cbr packet represents just Ô¨Årst bit packet scale right single bit d accurate animated representation wireless packet network simulation network simulator chapter somewhat cursory look simulator intended replacement project managed consortium material available represents sharp break gone tcl programming interface instead tion program written language extensive call library referred simulation script simulator core written case allows improved interaction conÔ¨Åguration execution conÔ¨Åguration execution case quite separate end simulation script come simulator akin s n run point job library take conÔ¨Ågure simple simulation tcl script create node link create agent attached node create application attached agent applies addition node conÔ¨Ågured network interface network interface assigned ip address installing running outline step installing linux allinone tar Ô¨Åle assuming prerequisite package gcc place general installation instruction particular user likely want download current mercurial repository directly information available window macintosh installation simplest option window user run linux virtual machine Ô¨Årst step unzip tar Ô¨Åle leave directory named nn reÔ¨Çects version number author s installation writing directory root contains python script primary directory necessary run script considerable conÔ¨Åguration compiler output ensue hopefully terminating list module built module built point work place subdirectory development directory contains source directory src script directory scratch execution script waf development directory contains directory example containing rich set example script script described depth tutorial running script let run script example Ô¨Åle included directory Ô¨Årst copy Ô¨Åle directory scratch parent development directory enter command introduction computer network release run program compiled compilation successful run fact uncompiled program scratch directory compiled meaning project progress compilable kept convenient strategy maintain multiple project directory link symbolically scratch needed includes support option following example illustrates passing command line value variable ncsma run second compilation error default enables option compiler meaning warning treated error good practice contributed published script exasperating beginner disable edit Ô¨Åle relative development directory change line development directory run configure build single tcp sender begin translating script single tcp sender program review standard thing include directive omitted network topology r b r mbps m delay r b kbps m delay queue r size using namespace std filenameroot base fortrace file continues page network simulatoran introduction computer network release continued previous page void cwndchange ptr outputstreamwrapper stream oldcwnd √£√±newcwnd getstream simulator newcwnd √£√± std static void tracecwnd trace change congestion window asciitracehelper ascii ptr outputstreamwrapper stream filenameroot √£√±cwnd config makeboundcallback cwndchange stream function tracecwnd arranges tracing cwnd function cwndchange acallback voked cwnd change callback common parameter string beginning example conÔ¨Åguration namespace attribute accessed way ascii traceÔ¨Åle int main int argc char argv int tcpsegmentsize config uintegervalue √£√± tcpsegmentsize config uintegervalue config stringvalue √£√± config timevalue millisecond √£√± use config allows conÔ¨Ågure object exist later point simulator running Ô¨Årst parameter attribute string class partial list attribute http attribute class determined command following run advantage config mechanism object created indirectly helper class direct setting class property problematic perfectly acceptable issue config call create object implicitly change default config creation additional object pick tcp algorithm setting option congestion control tcptahoe tcpreno tcpnewreno single tcp sender introduction computer network release tcpwestwood tcp cubic sack tcp supported natively available network simulation cradle installed setting delackcount attribute disables delayed acks setting minrto value m avoids unexpected hard timeouts return unexpected timeouts phenomenon come local variable processing handled thecommandline object recognized printattributes option using printhelp option give list variable set argument unsigned int runtime second int delayar m int delayrb m double mbps double fastbw mbps queuesize maxbytes mean unlimited commandline cmd define command line option overriding runtime long application send data √£√±runtime delayrb delay r b link m delayrb queuesize queue size r queuesize tcpsegmentsize tcp segment size tcpsegmentsize argc argv std queuesize delayrb √£√±std create node illustrating use smart pointer createobject ptr node createobject node ptr node r createobject node ptr node b createobject node classptr smart pointer manages memory reference counting template function createobject act preferred alternative operator new parameter object created way supplied config later method applied ptr object node object example adddevice convenient alternative creating node individually create container node nodecontainer allnodes ptr node node place create link using pointtopointhelper class create netdevicecontainer object don t use simply ar install r need assigning address network simulatoran introduction computer network release use pointtopointchannel andpointtopointnetdevice netdevicecontainer devar devrb pointtopointhelper ar rb create link ato r datarate dataratevalue datarate fastbw delay timevalue millisecond delayar devar r create link rto b datarate dataratevalue datarate bottleneckbw delay timevalue millisecond delayrb maxpackets uintegervalue queuesize devrb r b hand address class help individual lan make sure lan different subnets attempt b subnet routing simply fail just real network node internetstackhelper internet r b assign ip address devar devrb print address assigned give peek getobject template model original node object created earlier quite generic gained component code retrieve component getobject call ptr getobject get node subsystem ptr getobject ptr getobject aaddr getaddress baddr getaddress raddr getaddress std address aaddr std continues page single tcp sender introduction computer network release continued previous page std b address baddr std std r address raddr std std r address getaddress √£√±std general getobject t return component type tthat aggregated ptr object aggregation invisible script programmer understanding work useful aggregation handled object class contains internal list aggregated companion object object given type aggregated making getobject t unambiguous given ptr object obtain iterator aggregated companion getaggregateiterator type object ptr const object b returned iterator getinstancetypeid class thegetaddress call parameter Ô¨Årst specÔ¨Åes interface value give loopback interface second distinguishes multiple address assigned interface happening getaddress return object containing thing ip address broadcast address netmask getlocal return Ô¨Årst create receiver b using packetsinkhelper receiver essense form application server create sink b bport address sinkaaddr inetsocketaddress bport packetsinkhelper sinka sinkaaddr applicationcontainer sinkappa b second following mean receiver run min longer sender app second runtime address sinkaddr inetsocketaddress baddr bport come sending application conÔ¨Ågure create bulksendapplication attach arrange connection created bulksendhelper class simpliÔ¨Åes bulksendhelper sourceahelper sinkaddr maxbytes uintegervalue maxbytes sendsize uintegervalue tcpsegmentsize applicationcontainer sourceappsa second second runtime did want use helper class easiest way create bulksendapplication objectfactory conÔ¨Ågure factory type want create relevant conÔ¨Åguration parameter used config mechanism createobject network simulatoran introduction computer network release objectfactory factory protocol stringvalue maxbytes uintegervalue maxbytes sendsize uintegervalue tcpsegmentsize remote addressvalue sinkaddr ptr object bulksendappobj ptr application bulksendapp bulksendappobj getobject application setstarttime second setstoptime second runtime addapplication bulksendapp give direct access actual tcp connection alternative start creating tcp socket connecting ptr socket tcpsock socket tcpsocketfactory √£√± bind connect sinkaddr mechanism creating bulksendapplication us socket workaround tutorial example beginning execution set tracing look traceÔ¨Åle format later use ar pointtopointhelper class ascii pcap tracing apply entire network set tracing asciitracehelper ascii std tfname filenameroot tfname setup tracing forcwnd simulator second tracecwnd time tell generate pcap trace including √£√±filename filenameroot suffix isadded automatically creates Ô¨Åles Ô¨Årst number refers node second interface packet arriving r dropped appear second Ô¨Åle Ô¨Åles viewed wireshark finally ready start simulator bulksendapplication stop time runtime trafÔ¨Åc progress allow additional second clear simulation run print number byte received b single tcp sender introduction computer network release simulator second simulator ptr packetsink dynamiccast packetsink std total byte received gettotalrx √£√±std running script run script plot cwnd trace data second following compare graph graph cwnd v time produced phase earlier ended end closer modest difference including halving ofcwnd just peak apparent graph graph quite similar cwnd range period second difference likely accurate implementation recovery algorithm striking difference presence line dot just peak ing implement cwnd algorithm outlined tail end tcp reno fast recovery dupacks received cwnd set tocwnd allowed increase end tcp reno fast recovery ascii traceÔ¨Åle line traceÔ¨Åle starting record showing packet dropped network simulatoran introduction computer network release d protocol ip tos dscp default ecn ttl id protocol offset byte √£√±flags length √£√±ack payload r tos dscp default ecn ttl id protocol √£√±offset byte flag length ack payload √£√± √£√±enqueue protocol ip tos dscp default ecn ttl id protocol √£√±offset byte flag length ack √£√±dequeue protocol ip tos dscp default ecn ttl id protocol √£√±offset byte flag length ack Ô¨Årst letter indicates action rfor received dfor dropped enqueued dequeued traceÔ¨Åles ti transmitted second Ô¨Åeld represents time Ô¨Åeld represents event conÔ¨Åguration namespace called Ô¨Åguration path nodelist value represents node thedevicelist represents interface Ô¨Ånal repeat action drop macrx enqueue dequeue come series class name attribute followed case parenthesized list trace information output Ô¨Ånal record refer node b packet just arrived ack enqueued sent unexpected timeouts phenomenon discussion script single tcp sender mentioned set disable delayed acks m avoid unexpected timeouts comment line disabling delayed acks little change graph spacing consecutive tcp teeth double delayed acks receiver sends half acks sender doe account incrementing cwnd sender doe implement suggestion rfc mentioned tcp reno response leave minrto adjustment andsettcpsegmentsize problem graph look like single tcp sender introduction computer network release enable s internal logging tcpreno class entering command running script case wifihelper logging output enabled script enabled logging output written stderr export log output show initial dupack node triple dupack reset cwnd ssthresh despite fast recovery proceding normally hard timeout node rto reset cwnd ssthresh restart happening rto interval just little short probably use awkward segment size timeout node triple dupack reset cwnd ssthresh shortly cwnd reset accordance fast recovery rule overall effect cwnd reset packet signiÔ¨Åcantly slows throughput recovering hard timeout sequence number reset packet packet acknowledged unfortunately later packet fact looking traceÔ¨Åle b received packet begin retransmitting packet etcafter timeout b s response send ack highest packet received packet network simulatoran introduction computer network release scenario designer fast recovery mind likely triggered conservative timeout estimate exactly Ô¨Åx interesting question approach ignore fast recovery triple dupacks packet sender currently sending wireless present wireless simulation wireless simulation script animation output netanim player mover node moving horizontally meter row Ô¨Åve Ô¨Åxed node spaced meter apart limit transmission set meter meaning Ô¨Åxed node go range mover node just pass directly Ô¨Åxed node use ad hoc distance vector aodv routing protocol mover pass Ô¨Åxed node n go range Ô¨Åxed node point aodv Ô¨Ånds new route mover Ô¨Åxed node wireless simulation tend require considerably conÔ¨Åguration lations review source code start callback function global variable need access using namespace ptr constantvelocitymobilitymodel cvmm double std tracebase callback void printposition vector thepos getposition simulator second printposition std position thepos std void stopmover cvmm setvelocity vector wireless introduction computer network release come data rate int main int argc char argv std phymode thephymode string represents data rate modulation technique dsss rate available areerpofdmrate constant mbps ofdmrate constant mbps mhz width deÔ¨Åned variable determine layout network behavior factor variable allows slowing speed mover node correspondingly extending runtime discovery time notscaled int bottomrow number node int spacing node int mheight height mover row int brheight height row int x x isthe horizontal √£√±dimension field int packetsize double factor allows slowing rate andextending runtime √£√±total packet int endtime int factor double speed double bitrate average transmission rate √£√±sec interval packetsize inmicrosec packetcount interval std interval interval bitrate packetcount std nicety calculating packet transmission interval instead packetsize run overÔ¨Çow problem roundoff problem conÔ¨Ågure setting disable fragmentation forframes byte config √£√±stringvalue turn forframes byte config √£√±stringvalue set data rate asthat unicast config √£√±stringvalue phymode create mover node withcreateobject node Ô¨Åxed node created nodecontainer typical larger simulation network simulatoran introduction computer network release create node nodecontainer fixedpos bottomrow ptr node lowerleft ptr node mover createobject node set helper object conÔ¨Åguration conÔ¨Ågure phy physical mac layer set helper help desired √£√±behavior wifihelper wifi use aarf rate √£√±control aarf rate change viewed enabling appropriate logging shell level interested rate scaling dynamic rate scaling phy layer helper yanswifiphyhelper yans project network simulator inÔ¨Çuential precursor note addpropagationloss conÔ¨Åguration set range meter mac layer helper nqoswifimachelper nqos mean ieno use pcf polling mode phy layer yans yanswifiphyhelper wifiphyhelper yanswifiphyhelper tracing yanswifiphyhelper √£√±radio yanswifichannelhelper wifichannelhelper √£√± pld default following absolute cutoff distance √£√± maxrange doublevalue ptr yanswifichannel pchan pchan add layer adhocwifimac set rate control nqoswifimachelper wifimachelper nqoswifimachelper netdevicecontainer device wifiphyhelper wifimachelper √£√±fixedpos wifiphyhelper wifimachelper mover point basic conÔ¨Åguration step work position motion establish position Ô¨Åxed node mobilityhelper sessile forfixed node continues page wireless introduction computer network release continued previous page ptr listpositionallocator positionalloc createobject listpositionallocator √£√± int xpos int bottomrow add vector xpos brheight xpos spacing positionalloc fixedpos set mover subclass mobilitymodel end print couple thing just conÔ¨Årmation vector po vector vel speed mobilityhelper mobile √£√±attributes mover cvmm getobject constantvelocitymobilitymodel setposition po setvelocity vel std position getposition velocity √£√±getvelocity std std mover mobility model √£√±std conÔ¨Ågure ad hoc distance vector routing aodvhelper aodv olsrhelper olsr listrouting olsr generates √£√±traffic aodv fastest new √£√±routes uncommenting olsr line commenting line necessary change olsr routing olsr slower Ô¨Ånd new route sends trafÔ¨Åc set ip address straightforward node single subnet internetstackhelper internet listrouting fixedpos mover assign ip address isonly √£√±subnet continues page network simulatoran introduction computer network release continued previous page device create receiving application udpserver nodemover sending application udpclient node application generate sequence number traceÔ¨Åles marked single tcp sender use config andcreateobject construct application port create receiving application udpserver node mover address sinkaddr inetsocketaddress port config uintegervalue port ptr udpserver udprecvapp createobject udpserver setstarttime second setstoptime second addapplication udprecvapp ptr getobject maddr getaddress std address mover maddr std address moveraddress inetsocketaddress maddr port udpclient sending application config uintegervalue packetcount config uintegervalue packetsize config timevalue microsecond √£√± interval ptr udpclient udpsendapp createobject udpclient udpsendapp setremote maddr port udpsendapp setstarttime second udpsendapp setstoptime second endtime addapplication udpsendapp set tracing Ô¨Årst line enables tracing need theyanswifiphyhelper object support tracing receive r transmit t record thepointtopointhelper single tcp sender traced enqueue drop record tracebase device asciitracehelper ascii tracebase create animation file run animationinterface anim tracebase second view animation netanim moving node s motion clear mover node appears transmit node left node right transmission represent acks appear sent wireless introduction computer network release node netanim actually displaying blue link transmission node range view motion text format uncommenting Ô¨Årst line second printposition simulator second endtime stopmover finally time run simulator print Ô¨Ånal output simulator second simulator simulator int pktsrecd getreceived std packet received pktsrecd std std packet recorded lost getlost √£√±std std packet actually lost packetcount pktsrecd √£√±std traceÔ¨Åle analysis traceÔ¨Åle provides enqueue record doesn t Ô¨Åxed link verify packet forwarded correctly thing cando traceÔ¨Åle look value udpserver application sequence number record received node mover transmitted node output like following packet received forwarded packet received forwarded packet received forwarded packet recd forwarded forwarded √£√±forwarded forwarded forwarded forwarded forwarded packet received forwarded forwarded packet received forwarded forwarded packet recd forwarded forwarded √£√±forwarded forwarded forwarded forwarded forwarded forwarded √£√±at continues page network simulatoran introduction computer network release continued previous page packet received forwarded forwarded forwarded packet received forwarded forwarded forwarded packet received forwarded forwarded forwarded packet recd forwarded forwarded √£√±forwarded forwarded forwarded forwarded forwarded forwarded √£√±at forwarded packet recd forwarded packet received forwarded forwarded forwarded forwarded forwarded forwarded packet received forwarded forwarded forwarded forwarded packet transmitted node packet received mover seven transmission attempt seven attempt follow rule described collision packet starting transmitted node later node similarly packet lost packet arriving mover Ô¨Årst transmitted node order word packet forwarded rightward line node node reached range mover aodv performance change line aodv dsdv Ô¨Ånd loss count go packet olsr routing loss count discussed wireless simulation loss data packet trigger aodv implementation look new route dsdv olsr implementation hand look new route regularly spaced interval exercise preparation exercise introduction computer network release network bibliography note rfcs included introduction computer network release conversion table table converting edition exercise number left column edition chapter exercise number lookup reverse probably useful direction search pair chapter exercise chapter overview network overview network exercise chapter exercise chapter ethernet basic ethernet basic exercise chapter exercise chapter advanced ethernet advanced ethernet introduction computer network release exercise chapter exercise chapter wireless lan wireless lan exercise chapter exercise chapter lan lan exercise chapter exercise chapter link link exercise chapter exercise chapter packet packet conversion tablesan introduction computer network release exercise chapter exercise chapter abstract sliding window abstract sliding window exercise chapter exercise chapter ip version ip version introduction computer network release exercise chapter exercise chapter companion protocol companion protocol exercise chapter exercise chapter exercise chapter exercise new chapter additional feature additional feature exercise chapter exercise chapter algorithm algorithm conversion tablesan introduction computer network release exercise chapter exercise chapter ip routing ip routing exercise chapter exercise chapter border gateway protocol border gateway protocol bgp exercise chapter exercise chapter udp udp transport introduction computer network release exercise chapter exercise chapter tcp transport basic tcp transport basic exercise chapter exercise chapter tcp issue alternative tcp issue alternative exercise chapter exercise conversion tablesan introduction computer network release chapter tcp reno congestion management tcp reno congestion management exercise chapter exercise chapter dynamic tcp dynamic tcp exercise chapter exercise new chapter dynamic tcp dynamic tcp introduction computer network release exercise chapter exercise chapter newer tcp implementation newer tcp implementation exercise chapter exercise chapter queuing scheduling queuing scheduling conversion tablesan introduction computer network release exercise chapter exercise chapter token bucket rate limiting token bucket rate limiting exercise chapter exercise chapter quality service quality service exercise chapter exercise chapter network management snmp network management snmp introduction computer network release exercise chapter exercise new version chapter snmp version snmp version exercise chapter exercise version chapter security security exercise chapter exercise chapter public key encryption encryption exercise chapter exercise chapter mininet mininet conversion tablesan introduction computer network release exercise chapter exercise chapter network simulation network simulation exercise chapter exercise introduction computer network release conversion selected solution chapter present solution case partial solution exercise marked solution overview network exercise exercise b c d direct e d c b c direct d e c c b e direct d e d e direct b c e e c d direct c d b c exercise d destination d according s forwarding table d according s table d according s table d introduction computer network release according s table d path d exercise shortest path f total cost solution ethernet exercise exercise sends d switch use switch know d switch learn d sends know route packet directly know learn d sends b switch use switch learns new b sends d us doe know d doe know d forward packet learn b switch known destination ad abd ab solution advanced ethernet exercise exercise root keep link s link direction root keep link lowest id selected solutionsan introduction computer network release path exercise packet reported c destination known c installs s rule reached port packet Ô¨Çooded packet notreported c destination isknown packet Ô¨Çooded packet reported s delivers packet normally Ô¨Çooding packet reported c destination known c installs s rule reached port packet Ô¨Çooded exercise table report c learns doe report forward normally destination known report c known know doe report forward normally destination known report c learns doe report forward normally destination known s table end forwarding entry solution wireless lan exercise solution wireless lan introduction computer network release exercise sending node laid vertex equilateral triangle receiving node center alternatively impermeable wall following arrangement work receiver arrangement generalizes number sender sender laid vertex square tetrahedron possibly pentagon geometry enforces eventual limit exercise b t length contention interval ¬µsec transmission contention alternate length fraction bandwidth lost contention solution lan exercise exercise b simple strategy station compare according numeric value mac address station smallest mac address s station smallest address s exercise connection follows vci number shown endpoint link solution link exercise binary ascii letter n e t look nybble right column table selected solutionsan introduction computer network release data symbol putting symbol encoding space added readability solution packet exercise exercise bandwidth delay packet ¬µsec packet ¬µsec bandwidth delay ¬µsec propagation delay link total ¬µsec following timeline begin sending packet Ô¨Ånishes sending packet s begin receiving packet s Ô¨Ånishes receiving packet begin sending b s Ô¨Ånishes sending packet b begin receiving packet b Ô¨Ånishes receiving packet b bandwidth delay packet ¬µsec Ô¨Årst packet arrives s second packet arrives bandwidth delay ¬µsec later ¬µsec Ô¨Årst packet take ¬µsec travel s b arriving second packet arrives ¬µsec later timeline solution packet introduction computer network release begin sending packet Ô¨Ånishes sending packet start packet Ô¨Ånishes sending packet s begin receiving packet s Ô¨Ånishes receiving packet begin sending b s begin receiving packet s Ô¨Ånishes receiving packet begin sending b b begin receiving packet b received packet start receiving packet b Ô¨Ånishes receiving packet s data b format quite scale long propagation delay mean Ô¨Ånishes transmission s begin receiving s Ô¨Ånishes transmission b begin receiving smaller propagation delay event likely overlap exercise received data received code bit Ô¨Årst calculate code bit received data parity bit parity second half parity bit parity bit incorrect received code bit Ô¨Årst bit received code tell error data code bit second correct bit received code tell error Ô¨Årst half bit bit received code tell error bold bit selected solutionsan introduction computer network release fourth bit finally fourth bit received code tell error bold bit mean fourth bit corrected data making data example hamming code solution sliding window exercise exercise network c fast second formula rtt calculation winsize bandwidth rtt noload know winsize bandwidth rtt noload work packet queue b c sends packet begin sending packet packet queued begin sending packet begin sending packet d begin sending packet begin sending packet packet reached d begin sending begin sending packet begin sending packet d d begin sending begin sending begin sending packet begin sending packet d d begin sending begin sending arrived instantly forwarded window slide forward c sends new packet instantly arrives placed queue table column data packet currently sending column ack currently sending similarly √±d solution sliding window introduction computer network release tc sends queue exercise formula bandwidth winsize bandwidth noload sec packet b Ô¨Årst line formula rtt calculation convenience switch unit throughput rtt actual rtt noload packet c use formula rtt calculation rtt actual winsize bandwidth exercise data receiver s window data received sender sent data previously received ack transmission data precede Ô¨Årst transmission data precede Ô¨Årst successful transmission data data arrive data solution exercise exercise forwarding table destination direct direct default b exercise d subnet preÔ¨Åx mean preÔ¨Åx consists Ô¨Årst byte bit Ô¨Årst bit byte selected solutionsan introduction computer network release expressing byte binary convert byte address binary match Ô¨Årst Ô¨Åve bit bit mark ignored match match match match exercise binary add Ô¨Årst byte mask d byte plus additional starting byte mask solution algorithm exercise exercise destination s report likely sent earlier r s route Ô¨Årst established change destination b r s total distance using tied r s route b using change destination c reporting increase cost r s c r increase cost c destination d r s total cost using cheaper r s previous cost using r change route updated table destination cost hop change b change tie c source increase d route solution ip routing exercise solution algorithm introduction computer network release exercise match binary Ô¨Årst bit match ruling preÔ¨Åx ii match b c destination b longer match iii match b c d destination c longest match iv match b c d d longest match exercise p s table destination hop q r b q s table destination hop p r c d r s table destination hop p q solution border gateway protocol exercise exercise p receive route q xq sy route r xr sy solution udp exercise selected solutionsan introduction computer network release second data sent lost sender receiver time sender transmit data receiver retransmit ack ignored sender retransmitting duplicate retransmitted data arrives receiver receiver send ack transfer continue solution tcp reno congestion management exercise exercise b lettbe transit capacity total cwnd maxist point convenient normalize unit capacity measurement t phase length proportion average height tooth phase average utilization percentage give utilization ft eliminate normalization t f plugging simplifying give utilization f solution dynamic tcp exercise exercise window size larger bandwidth product packet packet sent bottleneck rate packet spend m link average link carrying packet applies link link m propagation delay number packet carried alternatively bandwidth product packet conclude packet transit half acknowledgment half distributed proportion link propagation delay yielding packet exercise point s bandwidth b s bandwidth b packet transit b s winsize leaf packet r s queue half bandwidth half queue capacity packet bandwidth rtt noload m packet transit s winsize conÔ¨Årm using following formula example competition queue tion solution tcp reno congestion management introduction computer network release ùõºq w ùõΩq w formula derived assumption bottleneck bandwidth normalized apply need measure time unit m time need multiplied d substituting second formula total queue utilization q ment earlier answer Ô¨Årst formula solve w q d agreement earlier answer exercise bottleneck bandwidth bottleneck link saturated sion rate link packet transmission need propagation delay packet exercise connection bandwidth rtt noload m window size necessary similarly window size connection packet remains window size actually result equal division bandwidth bandwidth exceed steady state limitation imposed link bandwidth exceeds product exceeds w c connection packet queue leaving connection queuing delay mean sends w apackets m bandwidth solution dynamic tcp exercise exercise thecwnd vary average packet loss occur interval rtts packet sent selected solutionsan introduction computer network release solution queuing scheduling exercise subqueues active virtual clock move lockstep real clock calculate Ô¨Ånishing time according real clock transmission order Ô¨Ånishing time taken cumulative byte queue size Ô¨Ånishing time exercise b initially subqueue deÔ¨Åcit queue packet sent deÔ¨Åcit byte pas byte byte byte solution queuing scheduling introduction computer network release solution mininet exercise sends broadcast arp controller learns relative reply rule sends packet controller installs rule destination packet Ô¨Çooded arrives controller installs rule packet arrives Ô¨Çooding controller installs rule sends broadcast packet packet packet broadcast switch report packet controller reply switch rule destination controller know reach switch new rule reaching installed switch selected solutionsindices table genindex search introduction computer network release index tablesbibliography anubhavnidhi abhashkumar kausik subramanian alexey andreyev hyojeong kim nanda kishore salem jingyi yang petr lapukhov aditya akella hongyi zeng ning bgp data center scale usenix symposium networked system design implementation nsdi april david adrian karthikeyan bhargavan zakir durumeric pierrick gaudry matthew green alex halderman nadia heninger drew springall emmanuel thom√© luke valenta benjamin vandersloot eric wustrow santiago paul mann imperfect forward secrecy fails practice preprint eralp akkoyunlu kattamuri ekanadham r v huber constraint tradeoff design network communication sosp proceeding Ô¨Åfth acm posium operating system principle november aleph elia levy smashing stack fun proÔ¨Åt phrack volume number available http mohammad alizadeh albert greenberg david maltz jitendra padhye parveen patel aji prabhakar sudipta sengupta murari sridharan data center tcp dctcp ceedings acm sigcomm september mohammed alizadeh shuang yang milad sharif sachin katti nick mckeown aji prabhakar scott shenker pfabric minimal datacenter transport sigcomm august mark allman vern paxson estimating network path property proceeding acm sigcomm august jo√´l alwen binyi chen krzysztof pietrzak leonid reyzin stefano tessaro scrypt maximally cryptology eprint archive report available http chris anley john heasman felix fx linder gerardo richarte shellcoder s handbook second edition wiley guido appenzeller isaac keslassy nick mckeown sizing router buffer acm sigcomm computer communication review october introduction computer network release john assalone exploiting jpeg com marker integer underÔ¨Çow bility global information assurance certiÔ¨Åcation technical note january able paul baran distributed computing network rand corporation technical report steven bauer david clark william lehr evolution internet congestion telecommunication policy research conference tprc august available mihir bellare new proof nmac hmac security resistance advance cryptology crypto proceeding lecture note puter science volume mihir bellare ran canetti hugo krawczyk keying hash function message authentication advance cryptology crypto proceeding lecture note computer science volume mihir bellare chanathip namprempre authenticated encryption relation notion analysis generic composition paradigm advance cryptology asiacrypt lecture note computer science volume updated version july jon bennett hui zhang hierarchical packet fair queueing algorithm transaction networking volume october daniel bernstein family stream cipher chapter new stream cipher design matthew robshaw olivier billet editor john bickett selection wireless network m thesis massachusetts tute technology timm b√∂ttger felix cuadrado gareth tyson ignacio castro steve uhlig open nect glimpse internet ecosystem lens netÔ¨Çix cdn arxiv arxiv june lawrence brakmo larry peterson tcp vega end end congestion avoidance global internet ieee journal selected area communication volume number vladimir brik suman banerjee marco gruteser sangho oh wireless device Ô¨Åcation radiometric signature proceeding acm international ence mobile computing networking mobicom september andreis brouwer hacker hut http april carlo caini rosario firrincieli tcp hybla tcp enhancement heterogeneous network international journal satellite communication networking volume pp bibliographyan introduction computer network release neal cardwell yuchung cheng stephen gunn soheil hassas yeganeh van son bbr congestion control acm queue volume number zehra cataltepe prat moghe characterizing nature location congestion public internet proceeding eighth ieee international symposium computer communication stefania cavallar bruce dodson arjen k lenstra walter lioen peter montgomery brian murphy herman te riele karen aardal jeff gilchrist gerard guillerm paul leyland joel marchand fran√ßois morain alec muffett craig putnam chris putnam paul mermann factorization rsa modulus advance cryptology crypt lecture note computer science volume vinton g cerf robert e kahn protocol packet network intercommunication ieee transaction communication volume number chiu raj jain analysis algorithm tion avoidance computer network journal computer network volume pp david clark van jacobson flexible efÔ¨Åcient resource management datagram network presentation september david clark scott shenker lixia zhang supporting application integrated service packet network architecture mechanism proceeding acm sigcomm august david clark steven bauer kc claffy amogh dhamdhere bbradley huffaker william lehr matthew luckie measurement analysis internet interconnection congestion telecommunication policy research conference tprc september joan daemen vincent rijmen design rijndael aes advanced tion yogen dalal carl sunshine connection management transport protocol puter network ivan d√•mgard design principle hash function advance cryptology crypto proceeding lecture note computer science volume verlag mikael degermark andrej brodnik svante carlsson stephen pink small forwarding table fast routing lookup proceeding acm sigcomm conference application technology architecture protocol computer communication september alan demers srinivasan keshav scott shenker analysis simulation fair queueing algorithm acm sigcomm proceeding communication architecture protocol whitÔ¨Åeld difÔ¨Åe martin hellman new direction cryptography ieee tions information theory volume november bibliography introduction computer network release mihaela enachescu ashish goel yashar ganjali nick mckeown tim roughgarden iii router small buffer acm sigcomm computer communication review volume number july kevin fall sally floyd comparison tahoe reno sack tcp acm sigcomm computer communication review july nick feamster jennifer rexford ellen zegura road sdn intellectual history programmable network acm queue december roberto ferorelli luigi grieco saverio mascolo g piscitelli p camarda live internet measurement using tcp congestion control ieee global cation conference sally floyd connection multiple congested gateway work acm sigcomm computer communication review october sally floyd van jacobson trafÔ¨Åc phase effect gateway internetworking research experience volume pp sally floyd van jacobson random early detection gateway congestion ance transaction networking volume august sally floyd van jacobson resource management model packet network transaction networking volume june sally floyd vern paxson difÔ¨Åculties simulating internet action networking volume august scott fluhrer itsik mantin adi shamir weakness key scheduling algorithm sac revised paper annual international workshop selected area cryptography cheng fu soung liew tcp veno tcp enhancement transmission wireless access network ieee journal selected area communication volume number february lixin gao inferring autonomous relationship internet transaction networking volume december lixin gao jennifer rexford stable internet routing global coordination transaction networking volume december peter gao akshay narayan gauram kumar rachit agarwal sylvia ratnasamy scott schenker phost distributed datacenter transport commodity work fabric conext december jose j routing using diffusing computation transaction networking volume february l gharai c perkins rtp tcp friendly rate control internet draft http sergey gorinsky harrick vin extended analysis binary adjustment algorithm technical report department computer science university texas austin bibliographyan introduction computer network release luigi grieco saverio mascolo bandwidth estimation congestion control packet network proceeding second international workshop quality service multiservice ip network luigi grieco saverio mascolo performance evaluation comparison new reno vega tcp congestion control acm sigcomm computer munication review volume number april marco gruteser dirk grunwald enhancing location privacy wireless lan disposable interface identiÔ¨Åers quantitative analysis proceeding acm international workshop wireless mobile application service wlan hotspot wmash september sangtae ha injong rhee lisong xu cubic new tcp variant acm sigops operating system review research development linux kernel volume number july steve hanna shellcoding linux window tutorial http july dan harkins simultaneous authentication equal secure key exchange mesh network second international conference sensor nologies application sensorcomm august martin hellman oral history interview martin hellman charles babbage institute retrieved university minnesota digital conservancy http janey hoe improving behavior congestion control scheme tcp acm sigcomm symposium communication architecture protocol august gavin holland nitin vaidya paramvir bahl mac protocol hop wireless network mobicon proceeding annual international ference mobile computing networking xueheng hu lixing song dirk van bruggen aaron striegel wifi aggressive wifi probe request deteriorate energy throughput proceeding internet measurement conference october christian huitema routing internet second edition prentice hall paul hurley le boudec patrick thiran note fairness additive increase multiplicative decrease proceeding van jacobson michael karels congestion avoidance control proceeding sigcomm symposium volume sushant jain alok kumar subhasree mandal joon ong leon poutievski arjun singh subbaiah venkata jim wanderer junlan zhou min zhu jonathan zolla ur zle stephen stuart amin vahdat experience software deÔ¨Åned wan proceeding acm sigcomm conference sigcomm august bibliography introduction computer network release cheng jin david wei steven low fast tcp motivation architecture algorithm performance ieee infocom proceeding march ad kamerman leo monteban wireless lan unlicensed band t bell laboratory technical journal volume number srinivasan keshav real network simulator technical report university fornia berkeley jongseok kim seongkwan kim sunghyun choi daji qiao cara rate adaptation ieee wlan ieee infocom proceeding april leonard kleinrock flow control computer network proceeding tional conference communication june moshe kol amit klein device tracking linux s new tcp source port selection algorithm september appear usenix security conference mathieu lacage thomas henderson network simulator proceeding workshop ip network simulator xuejia lai james massey proposal new block encryption standard rocrypt proceeding workshop theory application cryptographic technique advance cryptology eliot lear jennifer katinsky jeff cofÔ¨Ån diane tharp renumbering threat ace tenth usenix administration conference chicago carl lebsack rob shakir snmp dead presentation nanog north american network operator group available http dj leith rn shorten y lee framework congestion control speed network hamilton institute technical report august dj leith rn shorten g mccullagh experimental evaluation tended version paper presented proc protocol fast long distance network shao liu tamer basar r srikant loss congestion control algorithm network proceeding international ence performance evaluation methodology tool allison mankin random drop congestion control acm sigcomm symposium communication architecture protocol saverio mascolo claudio casetti mario gerla sanadidi ren wang tcp westwood bandwidth estimation enhanced transport wireless link mobicon ings annual international conference mobile computing networking paul mckenney stochastic fairness queuing ieee infocom proceeding june bibliographyan introduction computer network release nick mckeown tom anderson hari balakrishnan guru parulkar larry peterson nifer rexford scott shenker jonathan turner openflow enabling innovation campus network acm sigcomm computer communication review april ralph merkle secure communication insecure channel communication acm volume april ralph merkle digital signature based conventional encryption function vances cryptology crypto lecture note computer science volume ralph merkle martin hellman security multiple encryption cation acm volume july robert metcalfe david boggs ethernet distributed packet switching local puter network communication acm volume number jeonghoon mo jean walrand fair congestion control transaction networking volume number october jeffrey mogul observing tcp dynamic real network acm sigcomm sium communication architecture protocol jeffrey mogul greg minshall rethinking tcp nagle algorithm acm comm computer communication review january mart molle new binary logarithmic arbitration method ethernet technical port computer system research institute university toronto behnam montazeri yilong li mohammad alizadeh john ousterhout homa transport protocol using network priority acm comm conference application technology architecture protocol puter communication august robert t morris weakness unix software t bell ratories technical report february andreas m√ºller nathan evans christian grothof samy kamkar autonomous nat traversal ieee tenth international conference computing august kathleen nichols van jacobson controlling queue delay acm queue teunis ott jhb kemperman matt mathis stationary behavior ideal tcp gestion avoidance technical report jitendra padhye victor firoiu don towsley jim kurose modeling tcp throughput simple model empirical validation acm sigcomm conference tions technology architecture protocol computer communication abhay parekh robert gallager generalized processor sharing approach flow control integrated service network case tions networking volume number june abhay parekh robert gallager generalized processor sharing approach flow control integrated service network multiple node case tions networking volume number april bibliography introduction computer network release vern paxson internet packet dynamic acm sigcomm conference application technology architecture protocol computer communication changhua pei zhi wang youjian zhao zihan wang yuan meng dan pei yuanquan peng wenliang tang xiaodong qu take long connect wifi access point ieee international conference computer communication colin percival stronger key derivation sequential function technical bsd conference charles perkins pravin bhagwat highly dynamic vector routing dsdv mobile computer acm sigcomm computer cation review volume number october charles perkins elizabeth royer distance vector routing ceedings second ieee workshop mobile computing system application february radia perlman algorithm distributed computation spanning tree tended lan acm sigcomm computer communication review radia perlman rbridges transparent routing ieee infocom proceeding march jonathan perry amy ousterhout hari balakrishnan devavrat shah han fugal pas centralized datacenter network sigcomm august john m pollard factoring cubic integer unpublished manuscript circulated included development number field sieve lecture note mathematics volume balaji prabhakar katherine n dektar deborah m gordon regulation ant colony foraging activity spatial information plo computational biology http thomas ptacek timothy newsham insertion evasion denial service eluding network intrusion detection technical report secure network january kadangode ramakrishnan raj jain binary feedback scheme congestion avoidance computer network acm transaction computer system volume number injong rhee lisong xu cubic new tcp variant international workshop protocol fast network february ronald rivest message digest algorithm advance cryptology crypto proceeding ronald rivest adi shamir leonard adleman method obtaining digital tures cryptosystems communication acm volume february eric rye robert beverly ipvseeyou exploiting leaked identiÔ¨Åers level geolocation august bibliographyan introduction computer network release jerome saltzer david reed david clark argument design acm transaction computer system volume number november bruce schneier description new key block cipher Ô¨Åsh fast software encryption cambridge security workshop proceeding december nachum shacham paul mckenney packet recovery network using coding buffer management ieee infocom proceeding june umesh shankar vern paxson active mapping resisting nids evasion tering trafÔ¨Åc proceeding ieee symposium security privacy m shreedhar george varghese efÔ¨Åcient fair queuing using deÔ¨Åcit round robin transaction networking volume number june john ivan simon john simon music criticism applause book rade stanojevi christopher kellett robert shorten adaptive tuning buffer reducing queuing delay ieee communication letter volume number august kun tan jingmin song qian zhang murari sidharan compound tcp scalable congestion control network international shop protocol fast network pfldnet andrew tanenbaum robbert van renesse critique remote procedure paradigm proceeding european teleinformatics conference euteco amsterdam pp ao tang jintao wang sanjay hegde steven low equilibrium fairness work shared tcp reno telecommunication system special issue high speed transport protocol erik tews weinmann andrei pyshkin breaking wep second wisa proceeding international conference information security application mathy vanhoef c√©lestin matte mathieu cunche leonardo cardoso frank piessens mac address randomization analysis network covery mechanism acm asia conference computer communication security mathy vanhoef frank piessens key reinstallation attack forcing nonce reuse proceeding acm sigsac conference computer cation security october kannan varadhan ramesh govindan deborah estrin persistent route oscillation routing computer network volume january serge vaudenay security flaw induced cbc padding application ssl ipsec wtls eurocrypt proceeding david wei cheng jin steven low sanjay hegde fast tcp motivation ture algorithm performance acm transaction networking december bibliography introduction computer network release damon wischik nick mckeown buffer size core router acm comm computer communication review volume number july christopher s yoo david wishnick lowering legal barrier rpki adoption u penn law school public law research paper january available ssrn http lixia zhang new architecture packet switching network protocol phd thesis massachusetts institute technology lixia zhang virtualclock new trafÔ¨Åc control algorithm work acm transaction computer system volume number lixia zhang scott shenker david clark observation dynamic tion control algorithm effect trafÔ¨Åc acm sigcomm symposium communication architecture protocol bibliographyindex symbol address cwnd initial value cwnd monitoring protection quic protection tl protection quic protection tl parity ghz ghz ieee handoff ieee ieee ieee ethernet aaaa record dns record dns accelerated open tcp access point cdn access point accurate cost acd ack compression tcp acknowledgment acknowledgment number tcp acknowledgment quic acks unsent data tcp ack n active close tcp active queue management active subqueue ad hoc configuration ad hoc wireless netw adaptive droptail algorithm additional dns additive increase multiplicative decrease address address configuration manual address ownership quic address randomization address resolution protocol addressfamily administratively prohibited admission control rsvp adt advertised window size aero aes af drop precedence afrinic agent configuration snmp agent snmp ah ipsec aimd algorithm aodv algorithm algorithm dsdv introduction computer network release algorithm eigrp algorithm ethernet learning algorithm exponential backoff algorithm fair queuing algorithm fair queuing gps algorithm fair queuing quantum algorithm algorithm hierarchical weighted fair queuing algorithm hwmp algorithm algorithm algorithm distance vector algorithm nagle algorithm algorithm algorithm forwarding table lookup alice alignment memory multicast address multicast address aloha ami answer dns anternet anycast address anycast bgp aodh aodv apnic aqm arcfour architecture network arin arithmetic fast arp arp cache arp failover arp spoofing arpanet arq protocol aslr enumerated type association assured forwarding assured forwarding phb asymmetric route asynchronous transfer mode semantics atm augmentation snmp authentication header ipsec authentication function authenticator wpa authoritative nameserver authority dns autoconfiguration autonomous b backbone backoff ethernet backup link bgp backwards compatibility tcp bad news band width wireless bandwidth bandwidth bandwidth delay bandwidth guarantee bandwidth emulating base station wimax basic encoding rule bbr tcp bbrr bcrypt bdp beacon packet beacon beefcafe ber berkeley packet filter berkeley unix indexan introduction computer network release selection bgp bgp bgp relationship bgp routing registry bgp security bgp speaker bgp table size binary data bind bind tcp bit stuffing round robin biz blam blowfish bluetooth bob boot counter border gateway protocol border router bottleneck link bpdu message spanning tree bpf bps broadcast address broadcast ethernet broadcast manet bsd buffer overflow buffer overflow heap bufferbloat bug byte stuffing c ca cache poisoning dns cache dns cam table canonical dns canopy capture effect ethernet address carrier ethernet cbc mode cdn intserv cdn closest edge server priority bit atm censorship certificate authority certificate authority certificate pinning certificate revocation certificate revocation list cfb mode cga chain trust authentication channel width channel chaosnet chap authentication checksum offloading checksum tcp checksum udp christmas day attack chrome chrome cidr cipher feedback mode cipher mode cisco cisco interface class addressing class selector phb class queuing discipline classful queuing discipline classless internet domain routing client clienthello tl clientkey clientsignature cliff clnp clock recovery clock synchronization close tcp closest cdn edge server cmip cmns index introduction computer network release cmot cname dns codel cogent communication collision collision attack collision avoidance collision detection collision detection wireless collision domain collision problem hash collision command mininet community attribute bgp community snmp concave cwnd graph configuring freeradius configuring congestion congestion avoidance phase congestion bit congestion window connect connection connection reuse timewait connection table virtual circuit networking connectionless networking connectx conservative memory memory network contention contention interval contributing source rtp control packet control packet ack control packet convergence tcp fairness convex cwnd graph counter mode crc code scripting crossbar switch generated address cryptograpy csma csma persistence csrc ctr mode ct cubic tcp cumulative ack customer bgp cwnd cwr cyclical redundancy check d dad dally tftp dane dark website data center tcp data rate data type datacenter datagram congestion control protocol datagram forwarding data n dccp dccp congestion control dccp connection establishment dctcp deadbeef decbit decnet default forwarding entry default route defense depth security deflation cwnd delay constraint delay bandwidth delay emulating delay delay propagation delay queuing indexan introduction computer network release delay congestion control delayed acks denial service attack dense multiplexing de destination unreachable dhcp dhcp relay differentiated service key exchange diffserv difs dig digital signature rsa discrete logarithm problem distance vector version routing update distribution network dix ethernet dns dns aaaa record dns cdns dns dns attack dns authentication dns http dns resolver dns server public dns dns dnskey dns dnssec dnssec ok flag doh domain fronting domain domain domain registrar domain registrar dns dont fragment bit doze mode standard dragonfly drop precedence diffserv af d d domain d field header d dns line line dsdv dso channel dual stack duckduckgo dumbbell network topology duplicate address detection duplicate connection request detection durian dwdm dynamic rate scaling e eap eapol easyconnect easymesh ecb mode ece echo ecmp ecn ecn vpns ect edge server cdn edge server closest efs egp eigrp elephant flow elevator algorithm cryptography emulating bandwidth emulating delay emulating queue size enb lte index introduction computer network release encapsulated security payload ipsec encoding encryption encryption principle engine enumerated type snmp multipath routing error message icmp code code esp ipsec es estimated flightsize ethernet ethernet address ethernet hub ethernet repeater ethernet switch ethernet switch hardware ethtool linux euclidean algorithm identifier evasion intrusion detection semantics expedited forwarding expedited forwarding phb expiration date certificate explicit congestion notification exponential backoff ethernet exponential backoff exponential growth export filtering bgp extended interface table snmp certificate extender extensible authentication protocol extension header exterior routing extreme tcp unfairness face facebookcorewwwi factoring rsa key fading fair queuing fair queuing af fair queuing ef fairness fairness tcp fallback flooding fantasia fast arithmetic fast ethernet fast handoff fast open tcp fast primality testing fast recovery fast retransmit fastest sequence fcaps feistel network fib fibonacci sequence fifo queuing time voice filtering bgp filterspec fin fin packet finishing order wfq firewall fixed wireless flight packet flightsize flightsize estimated flow control flow control quic flow control tcp flow label flow specification flow table flow flow tcp flowspec rsvp algorithm fluid model fair queuing indexan introduction computer network release foraging foreign agent fortune forward secrecy forwarding delay forwarding information base forwarding table forwarding ip forwarding manet algorithm handshake fox fragment header fragment offset fragmentation fragmentation required fragmentation ip fragmentation frame frame quic framing freeradius frequency band friendliness tcp frost robert ethernet fwmark g gamers cdns gaming private network generalized processor sharing generic hierarchical queuing geodns geographical routing geolocation ip request http getaddrinfo getallbyname java getallbyname java getbulk getbyname getbyname java getbyname java gethostbyname gigabit ethernet global scope address gns gnu dns gnu goodput government dane gps fair queuing granularity loss counting gratuitous arp greediness tcp group openflow grpc gtc eap h hadoop file tcp tcp hamilton tcp hamming code handoff handshake packet quic handshake protocol tl happy eyeball hard fail ocsp hardware ethernet switch hash message authentication code hash password hdlc blocking header header ethernet header header header tcp header udp heap buffer overflow heap vulnerability hellman hello henhouse hidden node problem collision problem hierarchical routing hierarchical token bucket index introduction computer network release hierarchical token bucket linux tcp problem highspeed tcp hijacking bgp history rmon hmac hold homa rpc home address home agent host command host key ssh host n rmon host unreachable forwarding routing htb linux htonl htons http http hub ethernet hulu hurricane electric hwmp hybla tcp iab iana icann icmp idea idempotency idempotent ident field ieee ieee ieee ieee ieee ieee ethernet ietf ifconfig ifdescr ifindex iftype snmp ifxtable snmp illinois tcp implementation import filtering bgp incarnation connection incast tcp india inetcidrroutetable inflation cwnd info infrastructure configuration initial packet quic initial sequence number tcp initial value cwnd initialization vector input queue switch instability bgp integrated service integrated service generic interconnection fabric interface interface identifier interface table extended snmp interior routing interior routing bgp internet architecture board internet checksum internet engineering task force internet exchange point internet key exchange internet routing registry internet society intersymbol interference intrusion detection intserv ip ip command linux ip forwarding ip fragmentation ip multicast ip network encapsulation linux indexan introduction computer network release ipconfig ipsec iptables header address configuration manual address connection extension header header interface identifier connection multicast neighbor discovery programming tunnel ipvseeyou irregular prime ism band isn isoc isp iv ixp j jail staying java getallbyname java getallbyname java getbyname java getbyname javascript jitter join multicast joining network jpeg heap vulnerability json jumbogram k algorithm kb keepalive tcp key exchange tl algorithm party store sdn keystream kib king knee ssh krack attack wpa l lacnic ladder diagram lag cdns lan lan layer lartc latching tftp layer switch layer leaky bucket alternative formulation learning ethernet switch legacy routing vulnerability liberal licensing book lightning limited transmit tcp reno limiting delay ack address packet routing update linux linux advanced routing linux htb linux routing linux sfq lisp listen load balancer pox sdn traditional local traffic network index introduction computer network release logical link layer logjam attack lollipop numbering rule loopback address loopback interface loss recovery sliding window loss synchronization loss synchronization tcp congestion control tcp problem lost final ack lost final ack tftp lro tcp lsa lso tcp lsp lte m mac address mac address randomization mac flooding attack mac layer mae attack managed device snmp management frame protection management packet manager snmp manchester encoding manet mangling manrs manual address configuration mapreduce market address master secret tl matrix rmon fairness maximum transfer unit mb mbps med control merkle construction mesh network mesh network hwmp mib mib browser mic michael mickey mouse microsoft snmp agent middlebox middleboxes middleboxes ecn mimo minimal network configuration minimizing route cost minimum rto tcp mininet mininet command miso mitnick kevin mixer rtp mobile ip mobile wireless network modified identifier monitoring cwnd mpls mptcp msieve mtu discriminator label switching multicast multicast address allocation multicast ip address multicast programming multicast subscription multicast tree multicast ethernet multicast ip multihomed multihoming arp indexan introduction computer network release multihoming tcp multihoming udp multipath interference multipath tcp multiple address multiple flow table multiple loss multiple token bucket mx record dns n nagle algorithm naked domain dns nameserver nat nat icmp nat ipsec nat problem nat traversal nc neighbor advertisement neighbor discovery security neighbor discovery neighbor solicitation net neutrality netcat netcat http request netem qdisc netsh window netstat network address network address translation network architecture network entry wimax network file network interface ethernet network management network management network model layer layer seven layer network number prefix network prefix network unreachable newreno tcp attribute bgp nfs nm bgp theorem bgp node information message loss stack dns lookup nonce nonce cryptographic nonpersistence nopslide nosuchobject snmp notcp manifesto nrz nrzi n record dns trace file tracefiles reading python nsec nsec dns dns nsfnet nsis nslookup ntohl ntohs sieve nx page bit nxdomain dns o object id snmp snmp snmp ocsp ocsp stapling ofdm index introduction computer network release ofdma offloading tcp oid snmp old duplicate packet old duplicate tcp olsr mode hwmp pad onion address openbsd openflow openssl openssl programming opportunistic wireless encryption optical transport network optimistic dad opus ork orthogonal multiplexing osi ospf otn overhead p packet loss rate packet pair packet size pap eap claim theorem topology partial acks passive close tcp password hash password sniffing path attribute bgp path bandwidth path mtu discovery path mtu discovery tcp path packet rsvp paul dukas pause frame ethernet paw tcp pcapng pcf peap peer bgp behavior diffserv perfect forward secrecy persist timer tcp persistence phase effect tcp phbs diffserv physical address ethernet physical layer pifs ping pinning tl certificate pipe drain pipelining smtp pki playback buffer pmk pogonomyrmex point presence protocol poison reverse policing routing pollard s rho algorithm polling mode polling tcp poodle vulnerability port control protocol port exhaustion tcp port number udp port security ethernet port unreachable potato hot power wireless power management pox controller ppp pppoe secret tl prefix information prekey forward secrecy indexan introduction computer network release presentation layer president primality testing fast prime number theorem primitive root modulo p priority small packet wfq priority queuing priority queuing af privacy privacy extension slaac private address private address prng proactive mode hwmp probe request probing network promiscuous mode propagation delay proportional fairness protection wrapped segment tcp protocol graph multicast provider bgp routing proxy arp pseudorandom number generator psh psk ptk public dns server encryption infrastructure pulse stuffing tdm push tcp pwnat python tracefile script python reading tracefiles q qname minimization dns qos qos routing quagga interface quagga router quality service quantum algorithm fair queuing query identifier icmp minimization dns query icmp queue capacity typical queue overflow queue size emulating queue utilization token bucket rule queuing delay queuing discipline queuing theory queuing priority quic quiet time startup tcp r race condition pox radius radvd random drop queuing random early detection randomization mac address ranging interval wimax ranging wimax lte rate control rate scaling traffic fair queuing protocol traffic transport protocol reassembly reassociation reboot rpc reboots record route ip option recursive dns lookup red code regional registry registry regional reliable reliable flooding remote procedure rendezvous point multicast reno reno v vega repeater ethernet index introduction computer network release repeater request comment reservation reset tcp resolver dns resource record dns resv packet rsvp attack reverse dns filtering rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc indexan introduction computer network release rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc index introduction computer network release rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc rfc indexan introduction computer network release rfc rfc rfc rfc rib rinjdael ripe rmon roa rpki roaming root nameserver dns time route route aggregation ip route leak router router advertisement router discovery router solicitation routerless example routing addressing routing domain routing header routing information base routing loop routing loop ephemeral routing policy bgp routing policy database routing policy specification language routing registry bgp routing update algorithm routing ip routing manet rpc rpcgen rpki bgp rpsl rr dns rrset dns rrsig dns rsa rsa factoring challenge rst rsvp rtcp rtcp measurement tcp rto tcp minimum rtp rtp voip rtp mixer rts rtt rtt bias tcp reno rtt inflation s sack tcp sack tcp sae salt password satellite internet tcp problem sawtooth tcp scalable routing scanning network scope address scope scram authentication scrypt sctp sdn search warrant secure dns secure hash function secure neighbor discovery secure shell security security association ipsec segment segmentation segment tcp select group select selective acks tcp selective export property selector ipsec send sequence number tcp serial execution rpc index introduction computer network release server server pod facebook serverhello tl servername extension tl session key session layer sfq theorem shaping shared address block cipher switch shellcode bridging algorithm shutdown tcp sibling family bgp sibling bgp sif signaling loss signature intrusion signature rsa silly window syndrome tcp simo simple network management protocol simplehttpserver tcp udp simultaneous authentication equal simultaneous open tcp single principle singlebell network topology site resolver dns address size packet slaac slaac privacy extension sliding window sliding window tcp slot time slow convergence priority wfq smtp sni tl snmp snmp agent configuration snmp agent manager snmp alternative snmp enumerated type snmp version data type engine snorri sturluson tcp socket socket address socketpair soft fail ocsp soft state networking sonet sorcerer s apprentice bug source quench multicast tree algorithm multicast spatial stream mimo spb speex spf algorithm spine plane facebook split horizon spoofing ip spoofing tcp sql injection squatting ip prefix ssh ssh ssh host key ssh mininet ssid ssl ssl programming ssrc stack canary stalk tcp stalk udp star topology starttls indexan introduction computer network release state diagram tcp stateless autoconfiguration stateless forwarding stochastic fair queuing transport tftp delay storedkey stream cipher stream control transmission protocol streaming telemetry streaming video stream quic stub resolver subnet mask subnets subnets subnets v switching subpoena subqueue subscription multicast sun rpc superfish supplicant wpa switch switch fabric switch crossbar switch switching v subnets switzerland symbol data symmetric cipher syn syn flooding syn packet synchronization source rtp synchronized loss hypothesis tcp synchronized loss tcp synchronized loss tcp reno synchronized state tcp line line table snmp tahoe tail drop tangle cord tbf linux tc linux tcam tco tcp tcp tcp accelerated open tcp application close tcp bbr tcp checksum offloading tcp close tcp cubic tcp fairness tcp fast open tcp friendliness tcp hamilton tcp header tcp hybla tcp illinois tcp minimum rto tcp newreno tcp newreno tcp old duplicate tcp reno tcp reno limited transmit tcp sawtooth tcp segmentation offloading tcp state diagram tcp tahoe tcp timeout interval tcp vega tcp westwood tcp tcp highspeed tcp sack tdm teredo tunneling termshark index introduction computer network release terrestrial broadband terrestrial wireless testandincr snmp tfo tcp fast open tftp thepiratebay thermonuclear handshake handshake tcp threshold slow start throughput provider time live multiplexing dns timeout retransmission timeout interval tcp timestamp ip option timewait connection reuse timewait tcp tjx attack tl tl client example tl connection setup tl handshake protocol tl programming tl server example tl version token bucket token bucket queue utilization token bus ethernet token ring application rsvp topology topology table eigrp tor project tos routing trace file tracefiles reading python traceroute tracking trading traffic amplification quic traffic amplification udp anomaly traffic engineering traffic management tragedy common trango transient queue peak transit capacity transit traffic transmission control protocol transmission ethernet transport layer transport mode ipsec trap snmp tree trie forwarding table triggered update trill triple de trivial file transport protocol trr dns trust anchor trust anchor trust public key trust use ssh trust use tl trust dane trusted recursive resolver tshark tso tcp tspec ttl tunnel mode ipsec tunnel tunneling implementation problem type service u udp udp advisory udp traffic unbounded slow start unicast address unknown destination ethernet indexan introduction computer network release unlicensed spectrum unnumbered ip interface upgrade network uplink scheduling wimax lte urg user datagram protocol usmusertable utility network v vacm varbind list vci video streaming videoconferencing cdns virtual circuit virtual hosting virtual lan virtual link virtual private network virtual tributary vlans voice ip void cast voip voip rtp voip bandwidth guarantee voting vpn vpns ecn w war driving multiplexing web trust web server weighted fair queuing wep encryption failure wep westwood tcp easymesh extender fragmentation polling mode repeater security hwmp mesh wimax window window scale option tcp window size window window xp vulnerability winsize wireless wireless lan wireless fixed wireless satellite wireless terrestrial wireshark wireshark wireshark tcp example queuing wpa authenticator wpa supplicant wpa configuring wtf x encryption xd page bit xdr xkcd xml xss z zigbee zone break dns zone identifier zone dns zsk dns index