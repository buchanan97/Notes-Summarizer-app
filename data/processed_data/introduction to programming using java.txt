Introduction to Programming Using Java Version 9, JavaFX Edition May, 2022 David J. Eck Hobart and William Smith Colleges This is a PDF version of a free on-line book that is available a t https://math.hws.edu/javanotes/ . The PDF does not include source code ﬁles, solutions to exercises, or answers to quiz zes, but it does have external links to these resources, shown in blue . The PDF also has internal links, shown in red. These links can be used in Acrobat Reader and some other PDF reader programs. ii/EP1996–2022, David J. Eck David J. Eck (eck@hws.edu) Department of Mathematics and Computer Science Hobart and William Smith Colleges Geneva, NY 14456 Thisbookcanbedistributedinunmodiﬁedformfornon-comme rcialpurposes. Modiﬁed versions can be made and distributed for non-commer cial purposes provided they are distributed under the same license as the o riginal. More speciﬁcally: This work is licensed under the Creative Commo ns AttributionNonCommercial-ShareAlike 4.0 License. To view a copy of thi s license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/. O ther uses require permission from the author. The web site for this book is: https://math.hws.edu/javano tes Contents Preface xi 1 The Mental Landscape 1 1.1 Machine Language . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 1.2 Asynchronous Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 1.3 The Java Virtual Machine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7 1.4 Building Blocks of Programs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9 1.5 Object-oriented Programming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11 1.6 The Modern User Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13 1.7 The Internet and Beyond . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 Quiz on Chapter 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18 2 Names and Things 19 2.1 The Basic Java Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19 2.2 Variables and Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23 2.2.1 Variables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24 2.2.2 Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25 2.2.3 Literals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26 2.2.4 Strings and String Literals . . . . . . . . . . . . . . . . . . . . . . . . . . . 27 2.2.5 Variables in Programs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28 2.3 Objects and Subroutines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29 2.3.1 Built-in Subroutines and Functions . . . . . . . . . . . . . . . . . . . . . . 30 2.3.2 Classes and Objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33 2.3.3 Operations on Strings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34 2.3.4 Text Blocks: Multiline Strings . . . . . . . . . . . . . . . . . . . . . . . . 36 2.3.5 Introduction to Enums . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37 2.4 Text Input and Output . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38 2.4.1 Basic Output and Formatted Output . . . . . . . . . . . . . . . . . . . . . 39 2.4.2 A First Text Input Example . . . . . . . . . . . . . . . . . . . . . . . . . . 41 2.4.3 Basic TextIO Input Functions . . . . . . . . . . . . . . . . . . . . . . . . . 42 2.4.4 Introduction to File I/O . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44 2.4.5 Other TextIO Features . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46 2.4.6 Using Scanner for Input . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47 2.5 Details of Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49 2.5.1 Arithmetic Operators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 2.5.2 Increment and Decrement . . . . . . . . . . . . . . . . . . . . . . . . . . . 50 2.5.3 Relational Operators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51 2.5.4 Boolean Operators . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52 i CONTENTS ii 2.5.5 Conditional Operator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53 2.5.6 Assignment Operators and Type Conversion . . . . . . . . . . . . . . . . 53 2.5.7 Precedence Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55 2.6 Programming Environments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56 2.6.1 Getting a JDK . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56 2.6.2 Command Line Environment . . . . . . . . . . . . . . . . . . . . . . . . . 57 2.6.3 Eclipse IDE . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60 2.6.4 BlueJ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64 2.6.5 The Problem of Packages . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 2.6.6 About jshell . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 2.6.7 JavaFX on the Command Line . . . . . . . . . . . . . . . . . . . . . . . . 66 2.6.8 Using JavaFX in Eclipse . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68 Exercises for Chapter 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71 Quiz on Chapter 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 73 3 Control 75 3.1 Blocks, Loops, and Branches . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75 3.1.1 Blocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75 3.1.2 The Basic While Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76 3.1.3 The Basic If Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79 3.1.4 Control Abstractiont . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81 3.1.5 Deﬁnite Assignment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82 3.2 Algorithm Development . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83 3.2.1 Pseudocode and Stepwise Reﬁnement . . . . . . . . . . . . . . . . . . . . 83 3.2.2 The 3N+1 Problem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86 3.2.3 Coding, Testing, Debugging . . . . . . . . . . . . . . . . . . . . . . . . . . 89 3.3 while and do..while . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91 3.3.1 The while Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91 3.3.2 The do..while Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93 3.3.3 break and continue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 3.4 The for Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97 3.4.1 For Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97 3.4.2 Example: Counting Divisors . . . . . . . . . . . . . . . . . . . . . . . . . . 100 3.4.3 Nested for Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102 3.5 The if Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105 3.5.1 The Dangling else Problem . . . . . . . . . . . . . . . . . . . . . . . . . . 106 3.5.2 Multiway Branching . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106 3.5.3 If Statement Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108 3.5.4 The Empty Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112 3.6 The switch Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113 3.6.1 The Basic switch Statement . . . . . . . . . . . . . . . . . . . . . . . . . . 113 3.6.2 Menus and switch Statements . . . . . . . . . . . . . . . . . . . . . . . . . 115 3.6.3 Enums in switch Statements . . . . . . . . . . . . . . . . . . . . . . . . . 116 3.6.4 Deﬁnite Assignment and switch Statements . . . . . . . . . . . . . . . . . 117 3.6.5 Switch Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118 3.6.6 The Traditional switch Statement . . . . . . . . . . . . . . . . . . . . . . 118 3.7 Exceptions and try..catch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120 CONTENTS iii 3.7.1 Exceptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120 3.7.2 try..catch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120 3.7.3 Exceptions in TextIO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122 3.8 Introduction to Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124 3.8.1 Creating and Using Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . 124 3.8.2 Arrays and For Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126 3.8.3 Random Access . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128 3.8.4 Partially Full Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129 3.8.5 Two-dimensional Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131 3.9 GUI Programming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132 3.9.1 Drawing Shapes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133 3.9.2 Drawing in a Program . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136 3.9.3 Animation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137 Exercises for Chapter 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140 Quiz on Chapter 3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 144 4 Subroutines 147 4.1 Black Boxes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 147 4.2 Static Subroutines and Variables . . . . . . . . . . . . . . . . . . . . . . . . . . . 149 4.2.1 Subroutine Deﬁnitions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150 4.2.2 Calling Subroutines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152 4.2.3 Subroutines in Programs . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152 4.2.4 Member Variables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 155 4.3 Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158 4.3.1 Using Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158 4.3.2 Formal and Actual Parameters . . . . . . . . . . . . . . . . . . . . . . . . 159 4.3.3 Overloading . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161 4.3.4 Subroutine Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 161 4.3.5 Array Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 163 4.3.6 Command-line Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . 164 4.3.7 Throwing Exceptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166 4.3.8 Global and Local Variables . . . . . . . . . . . . . . . . . . . . . . . . . . 166 4.4 Return Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167 4.4.1 The return statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167 4.4.2 Function Examples . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 168 4.4.3 3N+1 Revisited . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171 4.5 Lambda Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173 4.5.1 First-class Functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173 4.5.2 Functional Interfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174 4.5.3 Lambda Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175 4.5.4 Method References . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177 4.6 APIs, Packages, Modules, and Javadoc . . . . . . . . . . . . . . . . . . . . . . . . 178 4.6.1 Toolboxes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178 4.6.2 Java’s Standard Packages . . . . . . . . . . . . . . . . . . . . . . . . . . . 179 4.6.3 Using Classes from Packages . . . . . . . . . . . . . . . . . . . . . . . . . 181 4.6.4 About Modules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182 4.6.5 Javadoc . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184 CONTENTS iv 4.6.6 Static Import . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 185 4.7 More on Program Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186 4.7.1 Preconditions and Postconditions . . . . . . . . . . . . . . . . . . . . . . . 187 4.7.2 A Design Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187 4.7.3 The Program . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192 4.8 The Truth About Declarations . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194 4.8.1 Initialization in Declarations . . . . . . . . . . . . . . . . . . . . . . . . . 194 4.8.2 Declaring Variables with var . . . . . . . . . . . . . . . . . . . . . . . . . 196 4.8.3 Named Constants . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196 4.8.4 Naming and Scope Rules . . . . . . . . . . . . . . . . . . . . . . . . . . . 199 Exercises for Chapter 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202 Quiz on Chapter 4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 205 5 Objects and Classes 207 5.1 Objects and Instance Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207 5.1.1 Objects, Classes, and Instances . . . . . . . . . . . . . . . . . . . . . . . . 208 5.1.2 Fundamentals of Objects . . . . . . . . . . . . . . . . . . . . . . . . . . . 210 5.1.3 Getters and Setters . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 215 5.1.4 Arrays and Objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216 5.2 Constructors and Object Initialization . . . . . . . . . . . . . . . . . . . . . . . . 217 5.2.1 Initializing Instance Variables . . . . . . . . . . . . . . . . . . . . . . . . . 218 5.2.2 Constructors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 219 5.2.3 Garbage Collection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224 5.3 Programming with Objects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 225 5.3.1 Some Built-in Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 225 5.3.2 The class “Object” . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 227 5.3.3 Writing and Using a Class . . . . . . . . . . . . . . . . . . . . . . . . . . . 228 5.3.4 Object-oriented Analysis and Design . . . . . . . . . . . . . . . . . . . . . 230 5.4 Programming Example: Card, Hand, Deck . . . . . . . . . . . . . . . . . . . . . . 232 5.4.1 Designing the classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 232 5.4.2 The Card Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235 5.4.3 Example: A Simple Card Game . . . . . . . . . . . . . . . . . . . . . . . . 238 5.5 Inheritance and Polymorphism . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241 5.5.1 Extending Existing Classes . . . . . . . . . . . . . . . . . . . . . . . . . . 242 5.5.2 Inheritance and Class Hierarchy . . . . . . . . . . . . . . . . . . . . . . . 244 5.5.3 Example: Vehicles . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245 5.5.4 Polymorphism . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247 5.5.5 Abstract Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 250 5.5.6 Final Methods and Classes . . . . . . . . . . . . . . . . . . . . . . . . . . 253 5.6 this and super . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253 5.6.1 The Special Variable this . . . . . . . . . . . . . . . . . . . . . . . . . . . 253 5.6.2 The Special Variable super . . . . . . . . . . . . . . . . . . . . . . . . . . 255 5.6.3 super and this As Constructors . . . . . . . . . . . . . . . . . . . . . . . . 256 5.7 Interfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 257 5.7.1 Deﬁning and Implementing Interfaces . . . . . . . . . . . . . . . . . . . . 258 5.7.2 Default Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 260 5.7.3 Interfaces as Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 261 CONTENTS v 5.8 Nested Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 262 5.8.1 Static Nested Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 262 5.8.2 Inner Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263 5.8.3 Anonymous Inner Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . 264 5.8.4 Local Classes and Lambda Expressions . . . . . . . . . . . . . . . . . . . 266 Exercises for Chapter 5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268 Quiz on Chapter 5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 272 6 Introduction to GUI Programming 275 6.1 A Basic JavaFX Application . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275 6.1.1 JavaFX Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 276 6.1.2 Stage, Scene, and SceneGraph . . . . . . . . . . . . . . . . . . . . . . . . 278 6.1.3 Nodes and Layout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 279 6.1.4 Events and Event Handlers . . . . . . . . . . . . . . . . . . . . . . . . . . 280 6.2 Some Basic Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281 6.2.1 Color and Paint . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281 6.2.2 Fonts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 282 6.2.3 Image . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283 6.2.4 Canvas and GraphicsContext . . . . . . . . . . . . . . . . . . . . . . . . . 284 6.2.5 A Bit of CSS . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 289 6.3 Basic Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 291 6.3.1 Event Handling . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 292 6.3.2 Mouse Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 293 6.3.3 Dragging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 295 6.3.4 Key Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 298 6.3.5 AnimationTimer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 300 6.3.6 State Machines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 301 6.3.7 Observable Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 304 6.4 Basic Controls . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 305 6.4.1 ImageView . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 306 6.4.2 Label and Button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 306 6.4.3 CheckBox and RadioButton . . . . . . . . . . . . . . . . . . . . . . . . . . 308 6.4.4 TextField and TextArea . . . . . . . . . . . . . . . . . . . . . . . . . . . . 310 6.4.5 Slider . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312 6.5 Basic Layout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 314 6.5.1 Do Your Own Layout . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 315 6.5.2 BorderPane . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 317 6.5.3 HBox and VBox . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 319 6.5.4 GridPane and TilePane . . . . . . . . . . . . . . . . . . . . . . . . . . . . 322 6.6 Complete Programs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325 6.6.1 A Little Card Game . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325 6.6.2 Menus and Menubars . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328 6.6.3 Scene and Stage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 331 6.6.4 Creating Jar Files . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 333 6.6.5 jpackage . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 334 Exercises for Chapter 6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336 Quiz on Chapter 6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342 CONTENTS vi 7 Arrays, ArrayLists, and Records 343 7.1 Array Details . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 343 7.1.1 For-each Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 344 7.1.2 Variable Arity Methods . . . . . . . . . . . . . . . . . . . . . . . . . . . . 346 7.1.3 Array Literals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 347 7.2 Array Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 349 7.2.1 Some Processing Examples . . . . . . . . . . . . . . . . . . . . . . . . . . 349 7.2.2 Some Standard Array Methods . . . . . . . . . . . . . . . . . . . . . . . . 352 7.2.3 RandomStrings Revisited . . . . . . . . . . . . . . . . . . . . . . . . . . . 354 7.2.4 Dynamic Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 357 7.3 ArrayList . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 359 7.3.1 ArrayList and Parameterized Types . . . . . . . . . . . . . . . . . . . . . 359 7.3.2 Wrapper Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 361 7.3.3 Programming With ArrayList . . . . . . . . . . . . . . . . . . . . . . . . . 363 7.4 Records . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 366 7.4.1 Basic Java Records . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 366 7.4.2 More Record Syntax . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 368 7.4.3 A Complex Example . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 369 7.5 Searching and Sorting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 371 7.5.1 Searching . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 372 7.5.2 Association Lists . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 374 7.5.3 Insertion Sort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 376 7.5.4 Selection Sort . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 378 7.5.5 Unsorting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 380 7.6 Two-dimensional Arrays . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 380 7.6.1 The Truth About 2D Arrays . . . . . . . . . . . . . . . . . . . . . . . . . 381 7.6.2 Conway’s Game Of Life . . . . . . . . . . . . . . . . . . . . . . . . . . . . 383 7.6.3 Checkers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 387 Exercises for Chapter 7 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 395 Quiz on Chapter 7 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 399 8 Correctness, Robustness, Eﬃciency 401 8.1 Introduction to Correctness and Robustness . . . . . . . . . . . . . . . . . . . . . 401 8.1.1 Horror Stories . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 402 8.1.2 Java to the Rescue . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 403 8.1.3 Problems Remain in Java . . . . . . . . . . . . . . . . . . . . . . . . . . . 405 8.2 Writing Correct Programs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 406 8.2.1 Provably Correct Programs . . . . . . . . . . . . . . . . . . . . . . . . . . 407 8.2.2 Preconditions and Postconditions . . . . . . . . . . . . . . . . . . . . . . . 407 8.2.3 Invariants . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 410 8.2.4 Robust Handling of Input . . . . . . . . . . . . . . . . . . . . . . . . . . . 413 8.3 Exceptions and try..catch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 417 8.3.1 Exceptions and Exception Classes . . . . . . . . . . . . . . . . . . . . . . 417 8.3.2 The try Statement . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 419 8.3.3 Throwing Exceptions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 423 8.3.4 Mandatory Exception Handling . . . . . . . . . . . . . . . . . . . . . . . . 424 8.3.5 Programming with Exceptions . . . . . . . . . . . . . . . . . . . . . . . . 425 CONTENTS vii 8.4 Assertions and Annotations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 429 8.4.1 Assertions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 429 8.4.2 Annotations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 432 8.5 Analysis of Algorithms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 434 Exercises for Chapter 8 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 440 Quiz on Chapter 8 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 444 9 Linked Data Structures and Recursion 445 9.1 Recursion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445 9.1.1 Recursive Binary Search . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446 9.1.2 Towers of Hanoi . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 448 9.1.3 A Recursive Sorting Algorithm . . . . . . . . . . . . . . . . . . . . . . . . 451 9.1.4 Blob Counting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 453 9.2 Linked Data Structures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 457 9.2.1 Recursive Linking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 457 9.2.2 Linked Lists . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 459 9.2.3 Basic Linked List Processing . . . . . . . . . . . . . . . . . . . . . . . . . 460 9.2.4 Inserting into a Linked List . . . . . . . . . . . . . . . . . . . . . . . . . . 463 9.2.5 Deleting from a Linked List . . . . . . . . . . . . . . . . . . . . . . . . . . 465 9.3 Stacks, Queues, and ADTs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 466 9.3.1 Stacks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 467 9.3.2 Queues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 470 9.3.3 Postﬁx Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 475 9.4 Binary Trees . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 478 9.4.1 Tree Traversal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 479 9.4.2 Binary Sort Trees . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 481 9.4.3 Expression Trees . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 485 9.5 A Simple Recursive Descent Parser . . . . . . . . . . . . . . . . . . . . . . . . . . 489 9.5.1 Backus-Naur Form . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 489 9.5.2 Recursive Descent Parsing . . . . . . . . . . . . . . . . . . . . . . . . . . . 490 9.5.3 Building an Expression Tree . . . . . . . . . . . . . . . . . . . . . . . . . . 494 Exercises for Chapter 9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 498 Quiz on Chapter 9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 501 10 Generic Programming and Collection Classes 503 10.1 Generic Programming . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 503 10.1.1 Generic Programming in Smalltalk . . . . . . . . . . . . . . . . . . . . . . 504 10.1.2 Generic Programming in C++ . . . . . . . . . . . . . . . . . . . . . . . . 505 10.1.3 Generic Programming in Java . . . . . . . . . . . . . . . . . . . . . . . . . 506 10.1.4 The Java Collection Framework . . . . . . . . . . . . . . . . . . . . . . . . 507 10.1.5 Iterators and for-each Loops . . . . . . . . . . . . . . . . . . . . . . . . . . 509 10.1.6 Equality and Comparison . . . . . . . . . . . . . . . . . . . . . . . . . . . 511 10.1.7 Generics and Wrapper Classes . . . . . . . . . . . . . . . . . . . . . . . . 514 10.2 Lists and Sets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 514 10.2.1 ArrayList and LinkedList . . . . . . . . . . . . . . . . . . . . . . . . . . . 515 10.2.2 Sorting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 518 10.2.3 TreeSet and HashSet . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 519 10.2.4 Priority Queues . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 521 CONTENTS viii 10.3 Maps . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 522 10.3.1 The Map Interface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 523 10.3.2 Views, SubSets, and SubMaps . . . . . . . . . . . . . . . . . . . . . . . . 524 10.3.3 Hash Tables and Hash Codes . . . . . . . . . . . . . . . . . . . . . . . . . 527 10.4 Programming with the JCF . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 529 10.4.1 Symbol Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 529 10.4.2 Sets Inside a Map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 531 10.4.3 Using a Comparator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 534 10.4.4 Word Counting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 535 10.5 Writing Generic Classes and Methods . . . . . . . . . . . . . . . . . . . . . . . . 537 10.5.1 Simple Generic Classes . . .