Stephen Davies, Ph.D. University of Mary Washington MANUALINSTRUCTIONBALLCRYSTALTHE version 1.2INTRODUCTION TO DATA SCIENCEVOLUME ONE: The Crystal Ball Instruction Manual Volume One: Introduction to Data Science version 1.2 Stephen Davies, Ph.D. Computer Science Department University of Mary Washington Copyright©2025 Stephen Davies. University of Mary Washington Department of Computer Science James Farmer Hall 1301 College Avenue Fredericksburg, VA 22401 Permission is granted to copy, distribute, transmit and adapt this work under a Creative Commons Attribution-ShareAlike 4.0 International License: http://creativecommons.org/licenses/by-sa/4.0/ If you are interested in distributing a commercial version of this work, please contact the author atstephen@umw.edu. The L ATEXsource for this book is available from:https://github. com/divilian/crystal-ball-1. Cover art copyright©2020 Elizabeth M. Davies. Contents Contents i 1 Introduction 1 2 A trip to Jupyter 9 3 Three kinds of atomic data 13 4 Memory pictures 25 5 Calculations 31 6 Scales of measure 43 7 Three kinds of aggregate data 53 8 Arrays in Python (1 of 2) 61 9 Arrays in Python (2 of 2) 73 10 Interpreting Data 89 11Assoc. arrays in Python (1 of 3)103 12Assoc. arrays in Python (2 of 3)109 13Assoc. arrays in Python (3 of 3)123 14 Loops 135 i iiCONTENTS 15 EDA: univariate 145 16 Tables in Python (1 of 3) 169 17 Tables in Python (2 of 3) 177 18 Tables in Python (3 of 3) 187 19 EDA: bivariate (1 of 2) 193 20 EDA: bivariate (2 of 2) 201 21 Branching 211 22 Functions (1 of 2) 223 23 Functions (2 of 2) 235 24 Recoding and transforming 243 25 Machine Learning: concepts 255 26 Classification: concepts 261 27 Decision trees (1 of 2) 269 28 Decision trees (2 of 2) 275 29 Evaluating a classifier 289 Chapter 1 Introduction If this marks your first exposure to the new and exciting discipline ofdata science, you occupy an enviable position. Still in front of you is all the cool stuff, even the first few sparks of magic when you learn how to plug data into electrical sockets, perform automated prediction, and write the first gems of code to probe the depths of an interesting data set. I’m a bit jealous, tbh, but am also excited to explore it all again with you, which is the next best thing! This field has changed the world like hardly any other has, and on an incredibly short time scale, too. Just a couple decades ago, businesses and organizations were routinely making major decisions basedongutfeelingsandanecdotalobservations. Doctorseyeballed setsofsymptomsanddiagnosedpatientslargelybasedonwhatconditions they themselves had seen before, or seen recently. Online sellers gave product recommendations that made sense tothem, completely missing patterns and trends that would become apparent if the characteristics and purchasing patterns of past customers were taken into account. Part of the reason decision makers made these suboptimal choices was because it wasn’t yet clear how much punch data science would pack. Another reason was that the technology wasn’t there yet: the processing power and storage capacity to work with extremely large data sets wasn’t commonly available, and of course the data itself hadn’t all been gathered yet. No more! All these parts are here 2CHAPTER 1. INTRODUCTION now. And somewhat incredibly, they’re all at your disposal for low (or even no) cost. This is the era of data science.If you want to understand and make an impact on your world, I can honestly think of no better field to dive into than this one, no matter what your sphere of interest. The ability to command these techniques and tools gives you both great insight and great power to influence how life on planet Earth proceeds from this day forward. 1.1 Defining Data Science When people ask me what data scienceis, here’s my go-to definition:deriving knowledge from data. But interpreting that phrase entails dissecting the difference between “knowledge” and “data,” two related but different terms. And that brings me to the data-to-wisdom hierarchy, depicted in Figure 1.1. Let’s break it down. Figure 1.1:The data-to-wisdom hierarchy. 1.1. DEFINING DATA SCIENCE3 The real world Ultimately, what we’re interested in is not data, but aspects of thereal world– album sales and video views, stock prices and employment rates, hurricane trajectories and virus hot spots, or whatever. Data science can’t really get off the ground until some sort ofdata acquisitiontakes place that records measurements of the real world in electronic form. This sounds obvious, but it’s important to keep in mind, actually. No matter how much time we spend working with data,it’s never the data that actually matters – it’s the real-world phenomenon the data represents.It might seem strange to say that “data” is merely incidental to a data scientist, but it’s true. And I’ve definitely seen more than one data scientist get so locked on to the data that they forget this basic truth. One important observation is that decisions about exactlywhich data to acquire from the real world are often crucial in how things are interpreted later on. To take an example close to home, let’s say we’re gathering information on college professors so we can gauge which universities have the highest performing faculty, and how this might be changing over the years. We choose some representative set of criteria to measure for each faculty member to get a rough assessment of their performance. Let’s say we choose three things: the number of research papers the professor publishes each year, the total amount of research funding they’ve been granted, and the average student evaluation score of the courses they teach. That seems like a good first cut at assessing “faculty performance.” We then go on our merry data science way, finding correlations, making data visualizations, and drawing conclusions. This is all fine and dandy, provided we always keep in mind that it was those three qualities, andonlythose three, that we gathered in the first place. If our study gains any traction, and university professors find they have a vested interest in being ranked high in our yearly study, we’ll discover that they act to maximizeonlythe categories that are being collected. We didn’t gather data on how many university committees they served on, or how many independent studies they supervised, or how many advisees they had,etc. 4CHAPTER 1. INTRODUCTION Those metrics will inevitably become minimized in importance, because they weren’t part of what we lifted out of the real world and onto the bottom rung of our lofty chain. The moral is: what we measure matters, often more than we realize. Our country’s GDP and the Dow Jones Industrial Average are easy things to quantify, and so we often do. And thus they gain great importance in analyses of the economy. But are they actually the most important indicators? Does focusing on them leave out other, perhaps more vital, benchmarks? I’ll just leave you with that question for now. Data Have you ever gotten blood work done, say for an annual physical? I have. I like to look over the numbers when the doctor hands me the results, just to chuckle and wonder what they all mean. To me, a non-physician, they’re all pretty much gobbledy-gook. They tell me my TBC is 4.93 x10E6/µL, that I have 5.7 Absolute Neutrophils, and a slightly out-of-range NT-proBNP (just 53.49 pg/mL, whatever the heck that means). When I use the worddatain the context of the hierarchy, this is what I mean: recorded measurements, often (but not always) quantitative, that have not yet beeninterpreted. They may be very precise, but they’re also quite meaningless without the context in which to understand them. They’d even be meaningless to a physicianif I didn’t provide the labels; try telling your doctor that you have 4.93 “something” and see whether he/she freaks out. The good news is that when we’re at the data stage of the hierarchy, we at least have the stuff in an electronic form so we can start to dosomething with it. We also often make choices at this stage about how toorganizethe data, choosing the appropriate type of atomic and/or aggregate data structures that we’ll discuss in detail in Chapters 3 and beyond. This will allow us to bring our analysis equipment to bear on the problem in powerful ways. 1.1. DEFINING DATA SCIENCE5 Information Data becomesinformationwhen itinformsus of something;i.e., when we know what it means. Getting large amounts of data organized, formatted, and labeled the right way are jobs for the data scientist, since turning that morass into useful knowledge is impossible without those steps. When the aspects of the real world that we’ve collected are properly structured and conceptually meaningful, we’re in business. Knowledge Nowknowledgeiswheretherealactionis. AsshowninFigure1.1, knowledge consists ofgeneralizabletruths. Here’s what I mean. Information is about specific individuals or occurrences. When we say “Chandra is a female bank teller, and earns $48,000 a year,” or “Austin is a male bank teller, and earns $69,000 a year,” we have in our information repository some individual facts. They can be looked up and consulted when necessary, as you’ll learn in the first part of this book. But if we say “women make less money than men do, even at the same jobs,” we’re in a different realm entirely. We have now generalized from specific facts to more wide-reaching tendencies. In the language of our discipline, we’ve moved from information to knowledge. Properly gleaning knowledge from information is a trickier business than interpreting individual data points. There are established rules, some of them mathematical, for determining when an apparent pattern is actually reliable, what kinds of relationships can be detected with data, whether a relationship is causal, and so forth. We’ll build some important foundations with this kind of reasoning in thisCrystal Ballvolume and its follow-on companion. For now, I only want to make the point thatknowledge– as opposed to mere information – opens up a whole new world of understanding. No longer is the world limited to a chaotic collection of individual observations: we can now begin to understand the general ways in which the world works...and perhaps even to change them. 6CHAPTER 1. INTRODUCTION Wisdom Wisdomis the gold standard. It represents what wedowith our knowledge. Let’s say we indeed determine that on average men are paid higher than women in our country, even for the same jobs. What do we do with that realization? Is it okay? Do we want to try and fix it, and if so, how? With laws? Education? Government subsidies? Revolution? You’ll remember my definition of Data Science on p. 2: deriving knowledgefromdata. This implies that the “wisdom” level of the hierarchy is really outside the discipline, and belongs to other disciplines instead. And that’s partially true: in some sense, the data scientist’s job stops when the deep truths about the real world are ferreted out and illustrated, leaving it to CEOs, directors, and other policy makers to act on them. But the data scientist is often involved here too, for a simple reason: a decision maker wants to know what’s likely tohappenif a particular policy is implemented. Most non-trivial interventions will have results that are hard to predict in advance, as well as unintended side effects. One set of tools in the data scientist’s toolkit is for making principled, calculated predictions about such things, as well as quantifying the level of uncertaintyin the predictions. Sometimes, the technique ofsimulationis used – carrying out experiments on virtual societies or systems to see the likely aggregate effects of different interventions. It’s like having a high-dimensional, multi-faceted crystal ball that lets you play out various scenarios to their logical conclusions. Starting with the rough and tumble real world and helping produce wise decisions about how humankind can deal with it all: that’s the grand promise of the data science enterprise. And those are the mighty waters you’re about to dip your toes in! I hope you’ll find it as exhilarating as I do. 1.2 A word of warning Before we dive into the nitty gritty, let me leave you with one more general thought. It’s actually an application of something 1.2. A WORD OF WARNING7 Spidermanoncesaid: “withgreatpowercomesgreatresponsibility.” Here’s the deal. The skills you’ll learn in this book are so powerful and (still!) so rare, that when you demonstrate them, people will thinkyoucanwalkonwater. Ifyoucontinueinthediscipline, you’ll become highly sought-after (and well paid). People will constantly be asking you to work with new data, to produce plots, predictions, and insights, and basically to do your magic. You’ll be treated as a guru: the oracle people go to when they want the scoop. This is ultra-cool, but also dangerous. Why dangerous? One simple reason: becausewhen you make a data-related claim,people will believe you.Prettymuchunquestioningly. Mostofyourcolleagues won’t have the expertise or understanding to double-check your snazzy results. And it wouldn’t occur to them to do that anyway – after all, you’re the wizard. The truth of the matter is that data science lives on the knife edge ofuncertainty. With our crystal ball, we can make non-obvious assertionsaboutthepastorpresentandevenpredictthefuture, but aswithall“knowledge,” wemustalwaysholdittentatively. Wemay be 95% confident that men are paid more than women...but that’s only 95% confidence, not 100%. We may have reason to believe that raising the minimum wage in a city will decrease poverty by 3%...but there’s a 1 in 20 chance that it might decrease it by as much as 6%, or evenincreaseit by 1%. The abiding principle is that you should always be forthright about the limits of your bold claims, the caveats behind your beautiful plots, and the level of likelihood that your hypotheses will turn out to be wrong. Admittedly, doing so will make you seem a little less magic. Therearelotsoftalkingheadsontelevisionwhodeliberately obscurethe level of uncertainty in their analyses so that they seem more certain (and more impressive) than they really are. To be responsibledatascientists, though, we’regoingtodotheSpiderman thing and be up front and transparent about exactly what we’ve found, and what we might be missing. Believe me, this will make you powerful enough! Chapter 2 A trip to Jupyter Python is a ridiculously popularlanguagefor programming and data science (currently the third most widely used in the world1) which is one of many reasons we’re using it for this course. The language itself is different from theprogramming environment usedtowritecodeinit, justas“English” isdifferentfrom“Microsoft Word” and “Google Docs.” A programming environment is just a fancy name for a tool or application used to write programs. At a minimum, it must include a way toedit(write and revise) code, and a way toexecute(run) it. Therearemanydifferentprogrammingenvironmentsdatascientists use to write Python code, just as there are many different word processing apps people use to write English. The choice largely comes down to personal preference. Some use full-blownIDEs (“integrateddevelopmentenvironments”)likeSpyderorAtom; some use text-based tools like Notepad++ orvim. In this class, we’re going to use the friendly and minimalistic “Jupyter Notebooks” environment since it’s appropriate for an intro experience. 2.1 Jupyter Notebooks The concept of a Jupyter Notebook is simple: it’s a Web page with editable “cells.” Each cell is a little text window you can type in. 1Seehttps://www.tiobe.com/tiobe-index/. 10CHAPTER 2. A TRIP TO JUPYTER There are three kinds of cells in Jupyter Notebooks: Raw.“Raw” is dumb. Never use it. Markdown.“Markdown” cells are forEnglish text, not Python code. They’re mostly used to describe and annotate what you’redoinginthecodecells, likearunningcommentary. You can type plain-ol’ text in a Markdown cell, plus various cutesy formatting adornments like boldface (putting double-splats (**) around a word or phrase), italics (single splats), outline headings (prefacing a line with one or more hashtags (like# or###), and so forth.2When you type in a Markdown cell, you see the raw text and formatting; to actually get Jupyter torenderyour cells and make them pretty, you choose “Run All” from the “Cell” menu. Code.The most important cells are “Code” cells which contain (duh) code. When executed (again, by choosing “Run All” from the “Cell” menu) they actually carry out the Python instructions you have typed in that cell, and display any results. By the way, a common snafu is to somehow accidentally click in a way that changes the type of a cell from “Code” to one of the other types. If you do this, the Python code in that cell won’t execute until you change the type back to “Code” (more on this below). Figure 2.1 shows a Jupyter Notebook hosted by theCoCalccloud computing platform, which we’ll use this semester. It has two cells, one Markdown and one Code. Note carefully thecell-type dropdownwhichiskindofhiddeninthemiddleofthepage: itcurrently reads “Code” because the second cell is the one that’s highlighted. (If we clicked to highlight and edit the top cell, that dropdown would change to “Markdown.”) The top figure shows the two cells before the user has done a “Run All” from the “Cell” menu: all the Markdown is unrendered (see the literal splats and hashtags) and the code is just sitting there. After 2For a complete list of formatting options, seehttps://github.com/ adam-p/markdown-here/wiki/Markdown-Cheatsheet. 2.1. JUPYTER NOTEBOOKS11 Figure 2.1:A Jupyter Notebook with one Markdown cell and one Code cell. In the top image, the two cells have been edited but not yet “run” – hence the Markdown formatting is unrendered and the code has not been executed. The bottom pane shows both cells after the use has chosen “Run All” from the “Cell” menu. “Run All,” the picture changes: you see the formatted message in the top cell, and theoutputof the Python code snippet after it runs. (The latter is easy to miss; stare at that bottom picture and 12CHAPTER 2. A TRIP TO JUPYTER find the “Our country is 249 years old!” message. That’s the “output.”) We haven’t yet covered what that Python code means (that’s the main subject of this book) but you can probably guess some of what it’s doing. 2.2 Code and output Incredibly, that’s about it. Everything else in this book is going to concern what to type in those Code cells and how to interpret its output. From now on, whenever I give example Python code in this book, I’ll write it in a box like this: founding = 1776 usa_age = 2025 - founding print("Our country is {} years old!".format(usa_age)) That box means “this stuff goes in a Code cell of a Notebook.” When I write the corresponding output (i.e., what gets printed on the page immediately below the code cell when “Run All” is chosen from the “Cell” menu), I’ll write it like this: Our country is 249 years old! That vertical bar means “this stuff is the printed result of executing the code cell.” Easy enough. Onward! Chapter 3 Three kinds of atomic data 3.1 Atomic data When we say that some data is “atomic,” we don’t mean it’s radioactive; we mean it’sindivisible. The ancients spoke of “atoms” as the smallest possible bits of matter. If you divide up any physical object – say, an apple – into parts, you get its components: a stalk, a stem, skin, seeds, and the sweet juicy stuff. Cut up any ofthosepieces with a knife and you get smaller pieces. If you continue to split and split and split, philosophers like Democritus reasoned, you’ll eventually get to tiny indivisible bits that cannot be further dissected. This is where the physical world bottoms out at the finest degree of granularity. Similarly, a piece of atomic data is typically treated as an entire unit, not as something with internal structure that can be broken down. In the next chapter we’ll learn about various ways that theseatomsofdatacanbestrungtogetherandorganizedintolarger wholes; fornow, though, we’rejustlookingattheatomsthemselves. 3.2 Environments and variables A data analysis program – of which we will write many in this course – makes use of anenvironmentas it runs. “Environment” just means “all the data that is currently in view, and which the 14CHAPTER 3. THREE KINDS OF ATOMIC DATA program can access.”1The environment consists ofvariables, each of which (usually) has anameand avalue. For example, we might have a variable namedagewhose value is 21, and a variable named sloganwhose value is"Finger lickin’ good". Each variable in the environment must have adistinctname (i.e., no two variables can share the same name). Also, importantly, the reason these building blocks are called “variables” is that their value canchangeas the program executes. Although we may initially create anagevariable with the value21, later on in the program the variable’s value might change to22, or50, or0. The variable’s namenever changes, though. 3.3 Atomic data types There’s one other thing that a variable has in addition to its name and value: atype.2In a programming language like Python, every piece of data has a specific type, which is necessary for determining how it behaves and what all you can do to it. A question you should ask yourself a lot is: “okay, I’ve got a variable in my environment calledx...now what is its type?” You might have guessed (correctly) that ourageandsloganvariables from the previous section are of different types: one is a number, and the other is a phrase. Inthiscourse, we’llprincipallydealwiththreetypesofatomicdata, all of which will be familiar to you. Whole numbers Oneverycommontypeofdataiswholenumbers, orintegers. These areusuallypositive, butcanbenegative, andhavenodecimalpoint. Thingslikeaperson’sbirthyear, acandidate’svotetotal, orasocial media post’s number of “likes” are represented with this data type. 1Confusingly, this use of the term “environment” is different from the term “programming environment” I introduced on p.9. 2Strictly speaking, although in languages like Java variables indeed have types, in Python thevalueshave types, not the variables. This distinction will never be important for us though. 3.3. ATOMIC DATA TYPES15 Real (fractional) numbers You may remember from high school math that the so-called “real numbers” include not only integers, but also numbers with digits after the decimal point. This type can therefore be used to store interest rates, temperature readings, and average movie ratings on a 1-to-5 scale. Since all whole numbers are themselves real numbers, you might wonder why we bother to define two different types for these. Why not just give both kinds of variables the same real number type? Basically, the answer is that something “feels wrong” about that to the Data Science community. A Facebook user might have 240 friends, or 241, but it would never make sense for her to have 240.3 friends. A consensus has thus arisen: variables that would only ever store whole numbers really ought to be of a type that’s devoted to only whole numbers. You can violate this convention, but you’ll be thought weird by your fellow developers if you do so. Text Lastly, somevaluesobviouslyaren’tnumericatall, likeacustomer’s name, a show title, or a tweet. So our third type of data is textual. Variables of this type have a sequence of characters as values. ThesecharactersaremostoftenEnglishletters, butcanalsoinclude spaces, punctuation, and characters from other alphabets. By the way, this third data type can tiptoe right up to the “atomic” line and sometimes cross it. In other words, we will occasionally work with text valuesnon-atomically, by splitting them up into their constituent words or even letters. Most of the time, though, we’ll treat a character sequence like"Avengers: Endgame"as a single, indivisible chunk of data in the same way we treat a number like42. But what about...? What about other things a computer can store: images, song files, videos? It turns out that through clever tricks, all these kinds of media and more can be boiled down to a large number of integers, 16CHAPTER 3. THREE KINDS OF ATOMIC DATA and stored in an aggregate data structure like those discussed in the next chapter. At the atomic level, we’ll really only ever need to deal with the three types of this section. 3.4 The three kinds in Python Now the three kinds of atomic data described above arelanguagegeneral: this means that they’re conceptual, not tied to any specific programming language or analysis tool.Anytechnology used for Data Science will have the ability to deal with those three basic types. The specific ways they do so will differ somewhat from language to language. Let’s learn about how Python implements them. Whole numbers:int One of the most basic Python data types is the “int,” which stands for “integer.” It’s what we use to represent whole numbers. In Python, you create a variable by simply typing its name, an equals sign, and then its initial value, like so: revolution = 1776 This is our firstline of code3. As we’ll see, lines of code are executedone by one – there is a time before, and a time after, each line is actually carried out. This will turn out to be very important. (Oh, and a “line of code” is sometimes also called a statement.) Python variable names can be as long as you like, provided they consist only of upper and lower case letters, digits, and underscores. (You do have to be consistent with your capitalization and your 3By the way, the wordcodeis grammatically a mass noun, not a count noun. Hence it is proper to say “I wrote some code last night,” not “I wrote some codes last night.” If you misuse this, it will brand you as a newbie right away. 3.4. THE THREE KINDS IN PYTHON17 spelling: you can’t call a variableMoviein one line of code and moviein another.) Underscores are often used as pseudo-spaces, but no other weird punctuation marks are allowed in a variable’s name.4 And while we’re on the subject, let me encourage you toname your variables well. This means that each variable name should reflect exactlywhat the value that it stores represents. Example: if a variable is meant to store the rating (in “stars”) that an IMDB user gave to a movie, don’t name itmovie. Name itrating. (Or even better,movie_rating.) Trust me: when you’re working on a complex program, there’s enough hard stuff to think about without confusing yourself (and your colleagues) by close-but-not-exact variable names.5 Now remember that a variable has three things – a name, value, and type. The first two explicitly appear in the line of code itself. As for the type, how does Python know thatrevolutionshould be an “int?” Simple: it’sa number with no decimal point. As a sanity check, we can ask Python to tell us the variable’s type explicitly, by writing this code: type(revolution) If this line of code is executed after the previous one is executed, Python responds with: int So there you go. Here’s another “code snippet” (a term that just means “some lines of code I’m focusing on, which are generally only part of a larger program”): 4Oh, and another rule: a variable name can’tstartwith a digit. Sor2d2is a legal variable name, but not007bond. 5And I fully own up to the fact that therevolutionvariable isn’t named very well. I chose it to make a different point shortly. 18CHAPTER 3. THREE KINDS OF ATOMIC DATA revolution = 1776 moon_landing = 1969 revolution = 1917 Now if this were a math class, that set of equations would be nonsensical. How could the same variable (revolution) have two contradictory values? But in aprogram, this is perfectly legit: it just means that immediately after the first line of code executes, revolutionhas the value1776, and moments later, after the third line executes, its value has changed to1917. Its value depends entirely on “where the program is” during its execution. Real (fractional) numbers:float The only odd thing about the second data type in Python is its name. In some other universe it might have been called a “real” or a “decimal” or a “fractional” variable, but for some bizarre historical reasons it is called afloat.6 All the same rules and regulations pertain tofloats as they do to ints; the only difference is you type a decimal point. So: GPA = 3.17 price_of_Christian_Louboutin_shoes = 895.95 interest_rate = 6. Note that theinterest_ratevariable is indeed afloattype (even though it has no fractional part) because we typed a period: 6If you’re curious, this is because in computer programming parlance a “floating-point number” means a number where the decimal point might be anywhere. With an integer like -52, the decimal point is implicitly at the far right-hand side of the sequence of digits. But with numbers like -5.2 or -.52 or -.000052 or even 520000, the decimal point has “floated” away from this fixed position. 3.4. THE THREE KINDS IN PYTHON19 type(interest_rate) float Text:str Speaking of weird names, a Python text variable is of typestr, which stands for “string.” You could think of it as a bunch of letters “strung” together like a beaded necklace. Important: when specifying astrvalue, you must usequotation marks(either single or double). For one thing, this is how Python know that you intend to create astras opposed to some other type. Examples: slang ='lit' grade = "3rd" donut_store = "Paul's Bakery" url ='http://umweagles.com' Notice, by the way, that astring of digitsis not the same as an integer. To wit: schwarzenegger_weight = 249 action_movie = "300" type(schwarzenegger_weight) int type(action_movie) str See? The quotes make all the difference. 20CHAPTER 3. THREE KINDS OF ATOMIC DATA The length of a string We’ll do many things with strings in this book. Probably the most basic is simply to inquire as to a string’slength, or the number of characters it contains. To do this, we enclose the variable’s name in parentheses after the wordlen: le