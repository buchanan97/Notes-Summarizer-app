which doesn t make much sense. Both metaphors are potentially useful and potentially misl eading. As you work on the next problem, try out both ways of thinking and see which one leads you to a solution. Multiplex Puzzle: Generalize the previous solution so that it allows m ultiple threads to run in the critical section at the same time, but it enforces a n upper limit on the number of concurrent threads. In other words, no more tha nnthreads can run in the critical section at the same time. This pattern is called a multiplex . In real life, the multiplex problem occurs at busy nightclubs where there is a maximum number of people a llowed in the Basic synchronization patterns building at a time, either to maintain re safety or to create the illusion of exclusivity. At such places a bouncer usually enforces the synchronizati on constraint by keeping track of the number of people inside and barring arri vals when the room is at capacity. Then, whenever one person leaves another is a llowed to enter. Enforcing this constraint with semaphores may sound di cul t, but it is almost trivial. Barrier Multiplex solution To allow multiple threads to run in the critical section, jus t initialize the semaphore to n, which is the maximum number of threads that should be allowed. At any time, the value of the semaphore represents the number of additional threads that may enter. If the value is zero, then the next thr ead will block until one of the threads inside exits and signals. When all th reads have exited the value of the semaphore is restored to n. Sincethesolutionissymmetric, it