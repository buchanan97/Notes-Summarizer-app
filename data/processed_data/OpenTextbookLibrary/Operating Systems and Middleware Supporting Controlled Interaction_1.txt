on the web at http: www. ickr.com photos 33122834 N06 3437495101 . To my family iv Contents Preface xi Introduction Chapter Overview What Is an Operating System? What Is Middleware? Objectives for the Book Multiple Computations on One Computer Interactions Between Computations Supporting Interaction Across Time Supporting Interaction Across Space Security Threads Introduction Example of Multithreaded Programs Reasons for Using Concurrent Threads Switching Between Threads Preemptive Multitasking Security and Threads Scheduling Introduction Thread States Scheduling Goals Throughput Response Time Urgency, Importance, and Resource Allocation Fixed-Priority Scheduling v vi CONTENTS Dynamic-Priority Scheduling Earliest Deadline First Scheduling Decay Usage Scheduling Proportional-Share Scheduling Security and Scheduling Synchronization and Deadlocks Introduction Races and the Need for Mutual Exclusion Mutexes and Monitors The Mutex Application Programming Interface Monitors: A More Structured Interface to Mutexes . . Underlying Mechanisms for Mutexes Other Synchronization Patterns Bounded Bu ers Readers Writers Locks Barriers Condition Variables Semaphores Deadlock The Deadlock Problem Deadlock Prevention Through Resource Ordering Ex Post Facto Deadlock Detection Immediate Deadlock Detection Synchronization Scheduling Interactions Priority Inversion The Convoy Phenomenon Nonblocking Synchronization Security and Synchronization Atomic Transactions Introduction Example Applications of Transactions Database Systems Message-Queuing Systems Journaled File Systems Mechanisms to Ensure Atomicity Serializability: Two-Phase Locking Failure Atomicity: Undo Logging Transaction Durability: Write-Ahead Logging CONTENTS vii Additional Transaction Mechanisms Increased Transaction Concurrency: Reduced Isolation Coordinated Transaction Participants: Two-Phase Commit Security and Transactions Virtual Memory Introduction Uses for Virtual Memory Private Storage Controlled Sharing Flexible Memory Allocation Sparse Address Spaces Persistence Demand-Driven Program Loading E cient Zero Filling Substituting Disk Storage for RAM Mechanisms for Virtual Memory Software Hardware Interface Linear Page Tables Multilevel Page Tables Hashed Page Tables Segmentation Policies for Virtual Memory Fetch Policy Placement Policy