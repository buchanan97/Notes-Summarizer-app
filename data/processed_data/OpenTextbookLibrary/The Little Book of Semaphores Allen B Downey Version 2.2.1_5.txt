s. Christoph Bartoschek found an error in a solution to the excl usive dance problem. Eus found a typo in Chapter . iv Preface Tak-Shing Chan found an out-of-bounds error in counter mutex.c. Roman V. Kiseliov made several suggestions for improving th e appearance of the book, and helped me with some L ATEX issues. Alejandro C espedes is working on the Spanish translation o f this book and found some typos. Erich Nahum found a problem in my adaptation of Kenneth Reek s solution to the Sushi Bar Problem. Martin Storsj o sent a correction to the generalized smoker s problem. Cris Hawkins pointed out an unused variable. Adolfo Di Mare found the missing and . Simon Ellis found a typo. Benjamin Nash found a typo, an error in one solution, and a mal feature in another. Alejandro Pulver found a problem with the Barbershop soluti on. Contents Preface i Introduction Synchronization Execution model Serialization with messages Non-determinism Shared variables Concurrent writes Concurrent updates Mutual exclusion with messages Semaphores De nition Syntax Why semaphores? Basic synchronization patterns Signaling Sync.py Rendezvous Rendezvous hint Rendezvous solution Deadlock Mutex Mutual exclusion hint Mutual exclusion solution Multiplex Multiplex solution Barrier Barrier hint Barrier non-solution Deadlock Barrier solution vi CONTENTS Deadlock Reusable barrier Reusable barrier non-solution Reusable barrier problem Reusable barrier non-solution Reusable barrier hint Reusable barrier solution Preloaded turnstile Barrier objects Queue Queue hint Queue solution Exclusive queue hint Exclusive queue solution Classical synchronization problems Producer-consumer problem Producer-consumer hint Producer-consumer solution Deadlock Producer-consumer with a nite bu er Finite bu er producer-consumer hint Finite bu er producer-consumer solution Readers-writers problem Readers-writers hint Readers-writers solution Starvation No-starve readers-writers hint No-starve readers-writers solution Writer-priority readers-writers