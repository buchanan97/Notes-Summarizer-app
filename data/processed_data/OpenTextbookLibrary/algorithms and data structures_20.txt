sqrt(sqr(p.x q.x) sqr(p.y q.y)) end; procedure Draw Line(p1, p2: point; pat: Pattern); begin Pen Pat(pat); Move To(round(p1.x), round(p1.y)); Line To(round(p2.x), round(p2.y)) end; procedure Drag Line(var L: line Segment); begin repeat until Button; Get Point(L.p1); L.p2 : L.p1; Pen Mode(pat Xor); while Button do begin Draw Line(L.p1, L.p2, black); replace 'black' by 'white' above to get an artistic drawing tool Get Point(L.p2); Draw Line(L.p1, L.p2, black) end; Pen Mode(pat Copy) end; Drag Line procedure Draw Circle(c: point; r: real; pat: Pattern); begin Pen Pat(pat); Frame Oval(round(c.y r), round(c.x r), round(c.y r), round(c.x r)) end; procedure Drag Circle(var c: point; var r: real); var p: point; begin repeat until Button; Get Point(c); r : ; Pen Mode(pat Xor); while Button do begin Draw Circle(c, r, black); Get Point(p); Algorithms and Data Structures A Global Text . Graphics primitives and environments r : Dist(c, p); Draw Circle(c, r, black); end; Pen Mode(pat Copy) end; Drag Circle procedure Title; begin Show Text; make sure the text window and Show Drawing; the graphics window show on the screen Write Ln('Frame program'); Write Ln('with simple graphics and interaction routines.'); Write Ln('Click to proceed.'); Wait For Click end; Title procedure What; begin Write Ln('Click a point in the drawing window.'); Click Point(p); Write Ln('Drag mouse to enter a line segment.'); Drag Line(L); Write Ln('Click center of a circle and drag its radius'); Drag Circle(c, r) end; What procedure Epilog; begin Write Ln('Bye.') end; begin Frame Title; What; Epilog end. Frame Example of a graphics routine: polyline input Let us illustrate the use of the frame program above in developing a new graphics procedure. We choose interactive polyline input as an example. A polyline is a chain of